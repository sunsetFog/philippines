(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-05f2"],{Isj9:function(t,e,a){},"R+67":function(t,e,a){"use strict";a.r(e);var s=a("QbLZ"),i=a.n(s),n=a("t3Un"),r=a("L2JU");function o(t){Object(n.a)({url:t.public.url+"/backend/syscleardataset/getList",method:"post",data:{pageno:t.currentPage,pagerows:t.pagesize}}).then(function(e){t.tableData=e.data.list,t.total=1*e.data.rownum,t.currentPage=1*e.data.pageno}).catch(function(t){})}var l={filters:{status:function(t){return"1"==t?"启用":"0"==t?"禁用":void 0}},data:function(){return{currentPage:1,tableData:[],dialogFormVisible:!1,form:{id:"",name:"",day:"",status:""},rules:{id:[{required:!0,message:"请输入ID",trigger:"blur"}],name:[{required:!1,message:"",trigger:"blur"}],day:[{required:!0,validator:function(t,e,a){""===e?a(new Error("请输入数据保留天数")):1*e<0||e.indexOf(".")>0?a(new Error("请输入正整数")):a()},trigger:"blur"}],status:[{required:!0,message:"请选择清理状态",trigger:"change"}]},formLabelWidth:"120px",title:"",total:0,pagesize:20,id:"",showadd:!0}},created:function(){o(this)},computed:i()({},Object(r.b)(["syscleardatasetadd","syscleardatasetgetlist","syscleardatasetupdate","syscleardatasetdel","syscleardatasetupdatestatus"])),watch:{},methods:{reset:function(t){this.dialogFormVisible=!1,this.$refs.form.resetFields()},edit:function(t){this.title="修改清理项目",this.showadd=!1,this.dialogFormVisible=!0;var e=this;Object(n.a)({url:e.public.url+"/backend/syscleardataset/getinfo",method:"post",data:{id:t.id}}).then(function(t){e.id=t.data.id,e.form.id=t.data.id,e.form.name=t.data.name,e.form.day=t.data.data_save_day,e.form.status=1*t.data.status}).catch(function(t){})},add:function(){this.title="新增清理项目",this.showadd=!0,this.dialogFormVisible=!0},up:function(t){var e=this,a=this;this.$confirm("此操作将启用该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({url:a.public.url+"/syscleardataset/updatestatus",method:"post",data:{id:t.id,status:1}}).then(function(t){a.$message({type:"success",message:t.message}),o(a)}).catch(function(t){})}).catch(function(){e.$message({type:"info",message:"已取消启用"})})},down:function(t){var e=this,a=this;this.$confirm("此操作将停用该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({url:a.public.url+"/syscleardataset/updatestatus",method:"post",data:{id:t.id,status:0}}).then(function(t){a.$message({type:"success",message:t.message}),o(a)}).catch(function(t){})}).catch(function(){e.$message({type:"info",message:"已取消停用"})})},sure:function(t){var e=this,a=this;this.$refs.form.validate(function(t){if(!t)return!1;"修改清理项目"===e.title?Object(n.a)({url:a.public.url+"/backend/syscleardataset/update",method:"post",data:{id:e.id,name:e.form.name,data_save_day:e.form.day,status:e.form.status}}).then(function(t){0===t.code&&(a.$message.success(t.message),a.dialogFormVisible=!1,a.$refs.form.resetFields(),o(a))}).catch(function(t){}):Object(n.a)({url:a.public.url+"/backend/syscleardataset/add",method:"post",data:{id:e.form.id,name:e.form.name,data_save_day:e.form.day,status:e.form.status}}).then(function(t){0===t.code&&(a.$message.success(t.message),a.dialogFormVisible=!1,a.$refs.form.resetFields(),o(a))}).catch(function(t){})})},delet:function(t){var e=this,a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({url:a.public.url+"/backend/syscleardataset/del",method:"post",data:{id:t.id}}).then(function(t){a.$message.success(t.message),o(a)}).catch(function(t){})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){this.pagesize=t,this.currentPage=1,o(this)},handleCurrentChange:function(t){this.currentPage=1*t,o(this)}}},c=(a("cMiX"),a("KHd+")),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"query"},[a("el-row",[a("el-form",{attrs:{inline:!0,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[t.syscleardatasetadd?a("el-button",{attrs:{type:"info",round:""},on:{click:t.add}},[t._v("新增 + ")]):t._e()],1)],1)],1)],1),t._v(" "),t.syscleardatasetgetlist?a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,background:"",layout:"prev, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e(),t._v(" "),t.syscleardatasetgetlist?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"清理项目标识"}}),t._v(" "),a("el-table-column",{attrs:{prop:"data_save_day",label:"数据保留天数"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("status")(e.row.status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.syscleardatasetupdate&&1!=e.row.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.syscleardatasetupdatestatus&&0==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.up(e.row)}}},[t._v("启用")]):t._e(),t._v(" "),t.syscleardatasetupdatestatus&&1==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.down(e.row)}}},[t._v("禁用")]):t._e(),t._v(" "),t.syscleardatasetdel&&1!=e.row.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delet(e.row)}}},[t._v("删除")]):t._e()]}}])})],1):t._e(),t._v(" "),t.syscleardatasetgetlist?a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,200],"page-size":t.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e(),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"before-close":t.reset},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"ID","label-width":t.formLabelWidth,prop:"id"}},[t.showadd?a("el-input",{staticStyle:{width:"50%"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}}):t._e(),t.showadd?a("span",{staticClass:"red"},[t._v("请按照程序要求填写")]):t._e(),t._v(" "),t.showadd?t._e():a("span",[t._v(t._s(t.form.id))])],1),t._v(" "),a("el-form-item",{attrs:{label:"清理项目标识","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据保留天数","label-width":t.formLabelWidth,prop:"day"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{type:"number"},model:{value:t.form.day,callback:function(e){t.$set(t.form,"day",e)},expression:"form.day"}}),a("span",[t._v("天")])],1),t._v(" "),a("el-form-item",{attrs:{label:"清理状态：","label-width":t.formLabelWidth,prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:0}},[t._v("禁用")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("启用")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.reset(t.form)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sure(t.form)}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="datacleaning.vue";e.default=d.exports},cMiX:function(t,e,a){"use strict";var s=a("Isj9");a.n(s).a}}]);