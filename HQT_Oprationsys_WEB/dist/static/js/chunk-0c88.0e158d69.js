(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c88"],{F1UH:function(t,e,a){"use strict";var i=a("MSCp");a.n(i).a},MSCp:function(t,e,a){},k1Vz:function(t,e,a){"use strict";a.r(e);var i,o=a("YEIV"),l=a.n(o),n=a("QbLZ"),r=a.n(n),s=a("t3Un"),u=a("XJYT"),c=a("L2JU"),d=a("0FX9"),m=a.n(d);function _(t){Object(s.a)({url:t.public.url+"/backend/virtualagent/getinfo",method:"post",data:{user_id:t.dataquery.user_id}}).then(function(e){t.loading=!1,t.tableData=e.data}).catch(function(t){})}var p=(i={data:function(){return{formInline:{agent_domain_id:"",origin:"",promotion_domain:"",promotion_url:"",total_uplayer_num:"",uagent_login_name:"",user_id:""},domain_id:"",form:{},currentPage:1,tableData:[],tableData3:[],dialogFormVisible:!1,dialogFormVisible2:!1,dialogFormVisible3:!1,formLabelWidth:"180px",formLabelWidth2:"100px",data:[],total:0,mstatus:"",lstatus:"",rules:{},pagesize:20,havetime:!1,havetime1:!1,typelist:[],loading:!1,title:"",canvas:"",title2:"",title3:"",codes:"",dataquery:{user_id:"",agent_org_name:"",user_account:""},linPm:""}},created:function(){},mounted:function(){this.getparams(),_(this),this.getlinklist()},components:{QRCode:m.a},computed:r()({},Object(c.b)(["virtualagentgetinfo","virtualagentgetdomainlist","virtualagentaddagent","virtualagentupdateurl","virtualagentgetusercountinfo"])),watch:{dialogFormVisible2:function(t,e){this.dialogFormVisible2&&setTimeout(function(){this.canvas=document.getElementById("canvas")},500)}},methods:{cell:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);return 5===a&&"启用"===e.status?"black":5===a&&"禁用"===e.status?"red":6===a&&"未失效"===e.expire_status?"black":6===a&&"已失效"===e.expire_status?"red":void 0},tableclassname:function(t){t.row,t.rowIndex},getparams:function(){null!=this.$route.query.agent_org_name&&(this.dataquery.user_id=this.$route.query.user_id,this.dataquery.agent_org_name=this.$route.query.agent_org_name,this.dataquery.user_account=this.$route.query.user_account)},relink:function(t){var e=this;Object(s.a)({url:e.public.url+"/backend/virtualagent/updateurl",method:"post",data:{account_id:t.user_id,agent_domain_id:t.agent_domain_id}}).then(function(t){e.loading=!1,Object(u.Message)({message:t.message,type:"success"}),_(e)}).catch(function(t){})},getlinklist:function(){this.title="新增下级代理";var t=this;Object(s.a)({url:t.public.url+"/backend/virtualagent/getdomainlist",method:"post",data:{user_id:this.dataquery.user_id}}).then(function(e){t.loading=!1,t.typelist=e.data}).catch(function(t){})},addagent:function(){this.dialogFormVisible=!0},reset1:function(){this.dialogFormVisible=!1,this.$refs.form.resetFields()},reset2:function(){this.dialogFormVisible2=!1,canvas.height=canvas.height},reset3:function(){this.dialogFormVisible3=!1,this.linPm="",this.tableData3=[]},sure3:function(){this.dialogFormVisible3=!1,this.linPm="",this.tableData3=[]},sure1:function(){var t=this,e=this;Object(s.a)({url:e.public.url+"/backend/virtualagent/addagent",method:"post",data:{user_id:this.dataquery.user_id,agent_login_name:this.form.account,origin:this.form.source,au_domain_id:this.form.au_domain_id}}).then(function(a){e.loading=!1,Object(u.Message)({message:a.message,type:"success"}),t.dialogFormVisible=!1,t.$refs.form.resetFields(),_(e)}).catch(function(t){})},copy:function(t){var e=t.promotion_url,a=document.createElement("input");a.setAttribute("id","copyInput"),a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy")&&this.$message.success("复制成功"),document.getElementById("copyInput").remove()},useqrcode:function(t){setTimeout(function(){m.a.toCanvas(canvas,t.promotion_url,function(t){t&&console.error(t)})},600)},qrcode:function(t){this.dialogFormVisible2=!0,this.title2="查看二维码",this.useqrcode(t)},totalBtn:function(t,e){var a=this;this.dialogFormVisible3=!0,this.title3="用户来源详情",this.linPm=e,Object(s.a)({url:a.public.url+"/backend/virtualagent/getusercountinfo",method:"post",data:{user_id:t}}).then(function(t){a.tableData3=t.data}).catch(function(t){})}}},l()(i,"components",{}),l()(i,"filters",{}),i),b=(a("F1UH"),a("KHd+")),f=Object(b.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"query"},[a("el-row",[a("el-form",{attrs:{inline:!0,"label-width":"80px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"渠道:"}},[a("span",[t._v(t._s(t.dataquery.agent_org_name))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"虚拟代理账号:","label-width":"120px"}},[a("span",[t._v(t._s(t.dataquery.user_account))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addagent()}}},[t._v("\n                 新增下级代理\n             ")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({path:"virtualagent"})}}},[t._v("\n                 返回\n             ")])],1)],1)],1)],1),t._v(" "),t._m(0),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableclassname,"cell-class-name":t.cell,border:""}},[a("el-table-column",{attrs:{prop:"uagent_login_name",width:"120",label:"下级虚拟代理"}}),t._v(" "),a("el-table-column",{attrs:{prop:"origin",label:"推广来源"}}),t._v(" "),a("el-table-column",{attrs:{prop:"promotion_domain",label:"推广域名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_count",label:"推广链接操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.promotion_url&&t.virtualagentupdateurl?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.relink(e.row)}}},[t._v("重新生成")]):t._e(),t._v(" "),e.row.promotion_url?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.copy(e.row)}}},[t._v("复制链接")]):t._e(),t._v(" "),e.row.promotion_url?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.qrcode(e.row)}}},[t._v("二维码")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"promotion_url",label:"推广链接"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"推广域名状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expire_status",label:"推广链接状态"}},[t._v("\n      "+t._s(t.mstatus)+"\n     \n    ")]),t._v(" "),a("el-table-column",{attrs:{prop:"total_uplayer_num",label:"来源统计"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.total_uplayer_num>0&&t.virtualagentgetusercountinfo?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.totalBtn(e.row.user_id,e.row.promotion_domain)}}},[t._v(t._s(e.row.total_uplayer_num))]):a("span",[t._v(t._s(e.row.total_uplayer_num))])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"before-close":t.reset1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"所属虚拟代理：","label-width":t.formLabelWidth}},[a("span",[t._v(t._s(t.dataquery.user_account))])]),t._v(" "),a("el-form-item",{attrs:{label:"下级代理账号：","label-width":t.formLabelWidth,prop:"account"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推广来源：","label-width":t.formLabelWidth,prop:"source"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推广域名：","label-width":t.formLabelWidth,prop:"au_domain_id"}},[a("el-select",{attrs:{filterable:""},model:{value:t.form.au_domain_id,callback:function(e){t.$set(t.form,"au_domain_id",e)},expression:"form.au_domain_id"}},t._l(t.typelist,function(t){return a("el-option",{key:t.au_domain_id,attrs:{label:t.url,value:t.au_domain_id}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.reset1(t.form)}}},[t._v("取 消")]),t._v(" "),t.virtualagentaddagent?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sure1(t.form)}}},[t._v("确 定")]):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title2,visible:t.dialogFormVisible2,"before-close":t.reset2,width:"300px"},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("div",{staticStyle:{width:"150px",height:"150px","margin-left":"58px"},attrs:{id:"qrCode"}},[a("div",{attrs:{id:"code"}}),t._v(" "),a("canvas",{attrs:{id:"canvas"}})]),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{width:"168px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.reset2()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"dialogDiv",attrs:{title:t.title3,visible:t.dialogFormVisible3,"before-close":t.reset3,width:"400px"},on:{"update:visible":function(e){t.dialogFormVisible3=e}}},[a("div",{staticClass:"linDiv"},[a("span",[t._v("推广域名：")]),t._v(" "),a("span",[t._v(t._s(t.linPm))])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData3,border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"数量"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.sure3}},[t._v("确 定")])],1)],1),t._v(" "),t._m(1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pagingbox"},[e("div",{staticClass:"paging"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pagingbox"},[e("div",{staticClass:"paging"})])}],!1,null,null,null);f.options.__file="virtualagentgetinfo.vue";e.default=f.exports}}]);