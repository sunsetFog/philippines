(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-106c"],{DNkW:function(e,t,n){var r=n("93I4"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},F37Q:function(e,t,n){},TiQZ:function(e,t,n){"use strict";var r=n("F37Q");n.n(r).a},Yfch:function(e,t,n){"use strict";function r(e){return/^[a-zA-Z_]\w{2,17}$/.test(e)}function a(e){return/^[A-Za-z]+$/.test(e)}function o(e){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$/.test(e)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o})},h5AQ:function(e,t,n){n("hRZT"),e.exports=n("WEpk").Number.isInteger},hRZT:function(e,t,n){var r=n("Y7ZC");r(r.S,"Number",{isInteger:n("DNkW")})},ql3t:function(e,t,n){e.exports={default:n("h5AQ"),__esModule:!0}},zyhz:function(e,t,n){"use strict";n.r(t);var r=n("QbLZ"),a=n.n(r),o=n("ql3t"),i=n.n(o),l=n("L2JU"),s=n("t3Un"),c=n("Yfch");function u(e,t,n,r,a){Object(s.a)({url:e.public.url+"/backend/account/getList",method:"post",data:{accountName:t.trim(),pageno:n,pagerows:r,roleName:a.trim()}}).then(function(t){e.tableData=t.data.list,e.tableData2=e.tableData.map(function(t){return e.$set(t,"edit",!1),t}),e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(e){})}var m={data:function(){var e=this;return{formInline:{user:"",region:""},disabledname:!1,pwdType:"password",currentPage:1,tableData:[],tableData2:[],rolelist:[],cmoney_balance:"",dialogFormVisible:!1,form:{login:"",pwd:"",role:"",day:"",total:"",status:"1",name:""},pwdshow:!0,status:[{value:"1",label:"启用"},{value:"0",label:"禁用"}],rules:{status:[{required:!0,message:"请选择状态",trigger:"change"}],login:[{required:!0,trigger:"blur",validator:function(e,t,n){Object(c.a)(t)?n():n(new Error("请输入正确的用户名-以字母或下划线开头，长度在3-18位，不可以存在特殊字符"))}}],pwd:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度6至18位",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}],day:[{required:!0,validator:function(e,t,n){""===t?n(new Error("请输入日上分总额度")):1*t<0?n(new Error("日上分总额度必须为大于等于0的数")):i()(1*t)?n():n(new Error("日上分总额度为整数"))},trigger:"blur"}],total:[{required:!0,validator:function(e,t,n){""===t?n(new Error("请输入上分总额度")):1*t<0?n(new Error("上分总额度必须为大于等于0的数")):i()(1*t)?n():n(new Error("上分总额度为整数"))},trigger:"blur"}],name:[{required:!0,message:"请输入昵称",trigger:"blur"}]},formLabelWidth:"120px",title:"",password:!1,name:"",total:0,pagesize:50,pwdform:{original:"",new:"",sure:""},pwdrules:{original:[{required:!0,message:"请输入原始密码",trigger:"blur"},{min:6,max:18,message:"长度在6到18个字符之间",trigger:"blur"}],new:[{required:!0,validator:function(t,n,r){""===n?r(new Error("请输入新密码")):(""!==e.form.sure&&e.$refs.form.validateField("sure"),r())},trigger:"blur"},{min:6,max:18,message:"长度在6到18个字符之间",trigger:"blur"}],sure:[{required:!0,validator:function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.form.new?r(new Error("两次输入的密码不一致!")):r()},trigger:"blur"},{min:4,max:18,message:"长度在6到18个字符之间",trigger:"blur"}]}}},created:function(){!function(e){Object(s.a)({url:e.public.url+"/backend/role/getRoleList",method:"post"}).then(function(t){e.rolelist=t.data}).catch(function(e){})}(this);this.account.length||0==this.account.length||(this.formInline.user=this.account.user,this.currentPage=this.account.currentPage,this.pagesize=this.account.pagesize,this.formInline.region=this.account.region,u(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.region))},computed:a()({},Object(l.b)(["accountadd","accountdel","accountupdate","accountaddCmoney","accountresetLoginPwd","accountgetlist","account"])),filters:{status:function(e){return"0"===e?"禁用":"1"===e?"启用":void 0},time:function(e){return"-1"===e?"":e}},methods:{repwd:function(e){this.password=!1,this.$refs.pwdform.resetFields()},pwdsure:function(e){var t=this;this.$refs.pwdform.validate(function(e){if(!e)return!1;var n=t;Object(s.a)({url:t.public.url+"/backend/account/resetLoginPwd",method:"post",data:{oldpwd:t.pwdform.original,newpwd:t.pwdform.new,confirmpwd:t.pwdform.sure}}).then(function(e){n.password=!1,n.$refs.pwdform.resetFields()}).catch(function(e){})})},resetpwd:function(e){var t=this;this.name=e.login_name;var n=this;this.$confirm("此操作将重置"+this.name+"的密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(s.a)({url:n.public.url+"/backend/account/resetpwd",method:"post",data:{id:e.id}}).then(function(e){n.$alert(e.data.pwd,"新密码",{confirmButtonText:"确定",callback:function(e){}}),u(n,n.formInline.user,n.currentPage,n.pagesize,n.formInline.region)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},reset:function(e){this.dialogFormVisible=!1,this.$refs.form.resetFields()},query:function(){this.currentPage=1,u(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.region);var e={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,region:this.formInline.region};this.$store.commit("setaccount",e)},edit:function(e){this.title="编辑账号",this.dialogFormVisible=!0,this.disabledname=!0,this.pwdshow=!1;var t=this;Object(s.a)({url:t.public.url+"/backend/account/getinfo",method:"post",data:{id:e.id}}).then(function(e){t.form.name=e.data.nickname,t.form.login=e.data.login_name,t.form.role=e.data.role_id,t.form.pwd=e.data.login_pwd,t.form.total=e.data.cmoney_total_limit,t.form.day=e.data.cmoney_day_limit,t.form.status=e.data.status,t.id=e.data.id}).catch(function(e){})},add:function(){this.title="新增账号",this.dialogFormVisible=!0,this.disabledname=!1,this.pwdshow=!0},sure:function(e){var t=this,n=this;this.$refs.form.validate(function(e){if(!e)return!1;"编辑账号"===t.title?Object(s.a)({url:n.public.url+"/backend/account/update",method:"post",data:{login_name:t.form.login,role_id:t.form.role,nickname:t.form.name,cmoney_total_limit:t.form.total,cmoney_day_limit:t.form.day,status:t.form.status,id:t.id}}).then(function(e){n.$alert("用户信息修改成功！"),n.dialogFormVisible=!1,n.$refs.form.resetFields(),u(n,n.formInline.user,n.currentPage,n.pagesize,n.formInline.region)}).catch(function(e){}):Object(s.a)({url:n.public.url+"/backend/account/add",method:"post",data:{login_name:t.form.login,login_pwd:t.form.pwd,role_id:t.form.role,nickname:t.form.name,cmoney_total_limit:t.form.total,cmoney_day_limit:t.form.day,status:t.form.status}}).then(function(e){n.dialogFormVisible=!1,n.$refs.form.resetFields(),u(n,n.formInline.user,n.currentPage,n.pagesize,n.formInline.region)}).catch(function(e){})})},delet:function(e){var t=this,n=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(s.a)({url:n.public.url+"/backend/account/del",method:"post",data:{id:e.id}}).then(function(e){u(n,n.formInline.user,n.currentPage,n.pagesize,n.formInline.region)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1,u(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.region);var t={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,region:this.formInline.region};this.$store.commit("setaccount",t)},handleCurrentChange:function(e){this.currentPage=1*e,u(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.region);var t={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,region:this.formInline.region};this.$store.commit("setaccount",t)},confirmEdit:function(e){e.edit=!1;var t=this;Object(s.a)({url:t.public.url+"/backend/account/addCmoney",method:"post",data:{cmoney:t.cmoney_balance,account_id:e.id}}).then(function(e){u(t,t.formInline.user,t.currentPage,t.pagesize,t.formInline.region),t.cmoney_balance=""}).catch(function(e){})},cancelEdit:function(e){e.edit=!1,this.cmoney_balance=""}}},d=(n("TiQZ"),n("KHd+")),f=Object(d.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"query"},[n("el-row",[n("el-form",{attrs:{inline:!0,"label-width":"80px"}},[n("el-col",{attrs:{span:6}},[e.accountadd?n("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("新增 + ")]):e._e()],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"帐号"}},[n("el-input",{attrs:{placeholder:"帐号",clearable:""},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"角色"}},[n("el-input",{attrs:{placeholder:"角色",clearable:""},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[e.accountgetlist?n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"pagingbox"},[n("div",{staticClass:"paging"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,border:""}},[n("el-table-column",{attrs:{prop:"login_name",label:"账号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cmoney_total_limit",label:"上分总额度"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cmoney_had_used",label:"已经上分额度"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cmoney_day_limit",label:"日上分额度"}}),e._v(" "),n("el-table-column",{attrs:{label:"可用余额",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-input",{staticClass:"inline",attrs:{size:"small"},model:{value:e.cmoney_balance,callback:function(t){e.cmoney_balance=t},expression:"cmoney_balance"}}),e._v(" "),n("el-button",{staticClass:"cancel-btn",attrs:{size:"small",type:"warning"},on:{click:function(n){e.cancelEdit(t.row)}}},[e._v("取消")])]:n("span",[e._v(e._s(t.row.cmoney_balance))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"cmoney_last_used",label:"最近上分额度"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cmoney_last_time",width:"180",label:"最近上分时间"}}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"最近登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("time")(t.row.last_login_time))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180",prop:"create_time",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("status")(t.row.status))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){e.confirmEdit(t.row)}}},[e._v("确定")]):e._e(),e._v(" "),e.accountaddCmoney&&!t.row.edit?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("增加余额")]):e._e(),e._v(" "),e.accountupdate&&1!=t.row.type?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.edit(t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.accountdel&&1!=t.row.type?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.delet(t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e.accountresetLoginPwd?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.resetpwd(t.row)}}},[e._v("重设密码")]):e._e()]}}])})],1),e._v(" "),n("div",{staticClass:"pagingbox"},[n("div",{staticClass:"paging"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),n("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"role"}},[n("el-select",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.rolelist,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"登录账号","label-width":e.formLabelWidth,prop:"login"}},[n("el-input",{attrs:{disabled:e.disabledname},model:{value:e.form.login,callback:function(t){e.$set(e.form,"login",t)},expression:"form.login"}})],1),e._v(" "),e.pwdshow?n("el-form-item",{attrs:{label:"登录密码","label-width":e.formLabelWidth,prop:"pwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"昵称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上分总额度","label-width":e.formLabelWidth,prop:"total"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.total,callback:function(t){e.$set(e.form,"total",t)},expression:"form.total"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"日上分额度","label-width":e.formLabelWidth,prop:"day"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.day,callback:function(t){e.$set(e.form,"day",t)},expression:"form.day"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth,prop:"status"}},[n("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.status,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"重设密码",visible:e.password,"before-close":e.repwd},on:{"update:visible":function(t){e.password=t}}},[n("span",{staticClass:"resetname"},[e._v("您将对"),n("span",[e._v(e._s(e.name))]),e._v("进行重置密码操作？")]),e._v(" "),n("el-form",{ref:"pwdform",attrs:{model:e.pwdform,rules:e.pwdrules}},[n("el-form-item",{attrs:{label:"原始密码","label-width":e.formLabelWidth,prop:"original"}},[n("el-input",{model:{value:e.pwdform.original,callback:function(t){e.$set(e.pwdform,"original",t)},expression:"pwdform.original"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth,prop:"new"}},[n("el-input",{model:{value:e.pwdform.new,callback:function(t){e.$set(e.pwdform,"new",t)},expression:"pwdform.new"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"sure"}},[n("el-input",{model:{value:e.pwdform.sure,callback:function(t){e.$set(e.pwdform,"sure",t)},expression:"pwdform.sure"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.repwd(e.pwdform)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.pwdsure(e.pwdform)}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);f.options.__file="account.vue";t.default=f.exports}}]);