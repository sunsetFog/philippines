(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-118f"],{XVQL:function(e,t,i){},tmGp:function(e,t,i){"use strict";var a=i("XVQL");i.n(a).a},u0S4:function(e,t,i){"use strict";i.r(t);var a=i("QbLZ"),r=i.n(a),n=i("t3Un"),l=i("L2JU");function s(e,t,i,a,r,l){var s={title:t.trim(),pageno:i,pagerows:a,receive_name:r.trim()};if(l&&l.length>0){var o=l[0].getTime()/1e3;s.time_from=o;var c=l[1].getTime()/1e3;s.time_to=c}Object(n.a)({url:e.public.url+"/gameemail/getList",method:"post",data:s}).then(function(t){e.tableData=t.data.list,e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(e){})}function o(e,t,i,a){Object(n.a)({url:e.public.url+"/gameemail/getreceiverlist",method:"post",data:{pageno:i,pagerows:a,id:t}}).then(function(t){e.receiverlist=t.data.list,e.total1=1*t.data.rownum,e.currentPage1=1*t.data.pageno}).catch(function(e){})}var c={filters:{},data:function(){return{formInline:{title:"",receive:"",time:""},currentPage:1,tableData:[],namelist:[],dialogFormVisible:!1,outerVisible:!1,innerVisible:!1,orglist:[],form:{name:"",desc:"",content:"",org:""},rules:{org:[{required:!0,message:"请选择渠道",trigger:"blur"}],name:[{required:!0,message:"请输入收件人",trigger:"blur"}],desc:[{required:!0,message:"请输入主题",trigger:"blur"},{min:0,max:16,message:"主题在16个字符以内",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"},{min:0,max:500,message:"内容在500个字符以内",trigger:"blur"}]},formLabelWidth:"120px",title:"",total:0,pagesize:50,id:"",list:{},total1:0,currentPage1:1,pagesize1:50,receiverlist:[],nametime:"",nametitle:""}},created:function(){!function(e){Object(n.a)({url:e.public.url+"/backend/org/getorglist",method:"post",data:{}}).then(function(t){e.orglist=t.data}).catch(function(e){})}(this),this.mail.length||0==this.mail.length||(this.formInline.title=this.mail.title,this.currentPage=this.mail.currentPage,this.pagesize=this.mail.pagesize,this.formInline.receive=this.mail.receive,this.formInline.time=this.mail.time,s(this,this.formInline.title,this.currentPage,this.pagesize,this.formInline.receive,this.formInline.time))},computed:r()({},Object(l.b)(["gameemailadd","gameemailgetlist","gameemailgetinfo","gameemailgetreceiverlist","mail"])),watch:{},methods:{reset:function(e){this.dialogFormVisible=!1,this.$refs.form.resetFields()},add:function(){this.title="写邮件",this.dialogFormVisible=!0},view:function(e){this.outerVisible=!0,this.id=e;var t=this;Object(n.a)({url:t.public.url+"/gameemail/getinfo",method:"post",data:{id:e}}).then(function(e){t.list=e.data}).catch(function(e){})},more:function(e,t){this.innerVisible=!0,this.nametitle=e,this.nametime=t,o(this,this.id,this.currentPage1,this.pagesize1)},query:function(){this.currentPage=1,s(this,this.formInline.title,this.currentPage,this.pagesize,this.formInline.receive,this.formInline.time);var e={title:this.formInline.title,currentPage:this.currentPage,pagesize:this.pagesize,receive:this.formInline.receive,time:this.formInline.time};this.$store.commit("setmail",e)},sure:function(e){var t=this,i=this;this.$refs.form.validate(function(e){if(!e)return!1;Object(n.a)({url:i.public.url+"/gameemail/add",method:"post",data:{email_receiver:t.form.name,title:t.form.desc,content:t.form.content,org_id:t.form.org}}).then(function(e){0===response.code&&(i.dialogFormVisible=!1,i.$refs.form.resetFields(),s(i,i.formInline.title,i.currentPage,i.pagesize,i.formInline.receive,i.formInline.time))}).catch(function(e){})})},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1;s(this,this.formInline.title,this.currentPage,this.pagesize,this.formInline.receive,this.formInline.time);var t={title:this.formInline.title,currentPage:this.currentPage,pagesize:this.pagesize,receive:this.formInline.receive,time:this.formInline.time};this.$store.commit("setmail",t)},handleCurrentChange:function(e){this.currentPage=1*e;s(this,this.formInline.title,this.currentPage,this.pagesize,this.formInline.receive,this.formInline.time);var t={title:this.formInline.title,currentPage:this.currentPage,pagesize:this.pagesize,receive:this.formInline.receive,time:this.formInline.time};this.$store.commit("setmail",t)},handleSizeChange1:function(e){this.pagesize1=e,this.currentPage1=1,o(this,this.id,this.currentPage1,this.pagesize1)},handleCurrentChange1:function(e){this.currentPage1=1*e,o(this,this.id,this.currentPage1,this.pagesize1)}}},m=(i("tmGp"),i("KHd+")),u=Object(m.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container mail"},[i("div",{staticClass:"query"},[i("el-row",[i("el-form",{attrs:{inline:!0,"label-width":"80px"}},[i("el-col",{attrs:{span:2}},[e.gameemailadd?i("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("写邮件 ")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"主题"}},[i("el-input",{attrs:{placeholder:"主题",clearable:""},model:{value:e.formInline.title,callback:function(t){e.$set(e.formInline,"title",t)},expression:"formInline.title"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"接收人员"}},[i("el-input",{attrs:{placeholder:"接收人员",clearable:""},model:{value:e.formInline.receive,callback:function(t){e.$set(e.formInline,"receive",t)},expression:"formInline.receive"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发送时间"}},[i("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:2}},[e.gameemailgetlist?i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"sender_name",label:"发送人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"邮件主题"}}),e._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"发送时间"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.gameemailgetinfo?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.view(t.row.id)}}},[e._v("查看详情")]):e._e()]}}])})],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"渠道","label-width":e.formLabelWidth,prop:"org"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.form.org,callback:function(t){e.$set(e.form,"org",t)},expression:"form.org"}},e._l(e.orglist,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"收件人","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"主题","label-width":e.formLabelWidth,prop:"desc"}},[i("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"内容","label-width":e.formLabelWidth,prop:"content"}},[i("el-input",{staticClass:"texthight",attrs:{type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"邮件详情",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[i("div",{staticClass:"line"},[i("span",[e._v(e._s(e.list.title))]),e._v(" "),i("span",{staticClass:"floatright"},[e._v(e._s(e.list.create_time))]),e._v(" "),i("p",{staticClass:"sizestyle",staticStyle:{"font-size":"16px","font-weight":"500"}},[e._v("发送至："),i("span",[e._v(e._s(e.list.receive_name))]),e._v(" "),e.gameemailgetreceiverlist?i("el-button",{staticClass:"floatright",attrs:{type:"text"},on:{click:function(t){e.more(e.list.title,e.list.create_time)}}},[e._v("详情\n        ")]):e._e()],1)]),e._v(" "),i("p",{staticClass:"sizestyle"},[e._v("\n      "+e._s(e.list.content)+"\n    ")]),e._v(" "),i("el-dialog",{staticClass:"dialogcolor",attrs:{width:"50%",title:"邮件收件人",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[i("div",{staticStyle:{"font-size":"21px","font-weight":"700"}},[i("span",[e._v(e._s(e.nametitle))]),e._v(" "),i("span",{staticClass:"floatright"},[e._v(e._s(e.nametime))]),e._v(" "),i("p",{staticClass:"sizestyle",staticStyle:{"font-size":"16px","font-weight":"500"}},[e._v("发送至："),e._l(e.receiverlist,function(t,a){return i("span",{key:a,class:"1"===t.isread?"namegreen":"",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.email_receiver))])})],2),e._v(" "),i("div",{staticClass:"paging",staticStyle:{float:"left"}},[i("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":e.pagesize1,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPage1=t}}})],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.innerVisible=!1}}},[e._v("关闭")])],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.outerVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="mail.vue";t.default=u.exports}}]);