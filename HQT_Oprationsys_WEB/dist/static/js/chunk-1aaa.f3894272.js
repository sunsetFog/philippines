(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1aaa"],{DM1J:function(e,t,s){"use strict";s.r(t);var a=s("QbLZ"),i=s.n(a),n=s("t3Un"),o=s("XJYT"),l=s("L2JU"),r=s("X4fA");function c(e,t,s){Object(n.a)({url:e.public.url+"/backend/webdownpageset/getlist",method:"post",data:{agent_org_id:e.formInline.id,pageno:t,pagerows:s}}).then(function(t){e.loading=!1,Object(o.Message)({message:t.message,type:"success"}),e.tableData=t.data.list,e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(t){e.loading=!1})}var d={data:function(){return{formInline:{starttime:"",endtime:"",id:""},currentPage:1,tableData:[],data:[],total:0,pagesize:20,havetime:!1,havetime1:!1,statuslist:[],statuslist2:[],fileList:[],fileList2:[],imgname:"",imgname2:"",title:"",mosrnId:!1,formLabelWidth:"120px",loading:!1,dialogFormVisible:!1,dialogFormVisible2:!1,showfile:!0,imgsrc:"",form:{id2:"",name:"",sort:"",status:3},rowId:"",rules:{}}},created:function(){var e=new Date((new Date).toLocaleDateString()).getTime()-6048e5,t=new Date((new Date).toLocaleDateString()).getTime();this.formInline.starttime=new Date(e),this.formInline.endtime=new Date(t);!function(e){Object(n.a)({url:e.public.url+"/backend/org/getorglist",method:"post",data:{}}).then(function(t){e.statuslist=t.data,e.statuslist2=t.data}).catch(function(e){})}(this),this.businessdealday.length||0==this.businessdealday.length||(this.formInline.starttime=this.businessdealday.starttime,this.currentPage=this.businessdealday.currentPage,this.pagesize=this.businessdealday.pagesize,this.formInline.endtime=this.businessdealday.endtime,this.formInline.id=this.businessdealday.id,c(this,this.currentPage,this.pagesize))},computed:i()({token:function(){return{"X-Token":Object(r.a)()}},action:function(){return this.public.url+"/webdownpageset/upload"}},Object(l.b)(["businessdealdayreportgetlist","businessdealday","webdownpagesetadd","webdownpagesetgetlist","webdownpagesetupdate","webdownpagesetupdatestatus","webdownpagesetdel"])),watch:{},methods:{query:function(){this.currentPage=1,c(this,this.currentPage,this.pagesize);var e={currentPage:this.currentPage,pagesize:this.pagesize,id:this.formInline.id};this.$store.commit("setbusinessdealday",e)},cell:function(e){e.row,e.column,e.rowIndex,e.columnIndex},tableclassname:function(e){e.row,e.rowIndex},handleSizeChange:function(e){this.pagesize=e;this.currentPage=1,c(this,this.currentPage,this.pagesize);var t={currentPage:this.currentPage,pagesize:this.pagesize,id:this.formInline.id};this.$store.commit("setbusinessdealday",t)},handleCurrentChange:function(e){this.currentPage=1*e;c(this,this.currentPage,this.pagesize);var t={currentPage:this.currentPage,pagesize:this.pagesize,id:this.formInline.id};this.$store.commit("setbusinessdealday",t)},add:function(){this.title="新增下载页",this.mosrnId=!1,this.dialogFormVisible=!0},reset:function(e){this.dialogFormVisible=!1,this.form.id2="",this.form.name="",this.form.sort="",this.form.status="",this.imgname="",this.imgname2="",this.rowId="",this.fileList2=[],this.fileList=[]},sure:function(e){var t=this,s=this;this.$refs.form.validate(function(e){if(!e)return!1;"新增下载页"===t.title?Object(n.a)({url:s.public.url+"/backend/webdownpageset/add",method:"post",data:{agent_org_id:s.form.id2,name:s.form.name,iso_bgpic_path:s.imgname,andriod_bgpic_path:s.imgname2,sortid:s.form.sort,status:s.form.status}}).then(function(e){0===e.code&&(Object(o.Message)({message:e.message,type:"success"}),s.dialogFormVisible=!1,s.$refs.form.resetFields(),t.form.id2="",t.form.name="",t.form.sort="",t.form.status="",t.imgname="",t.imgname2="",t.rowId="",t.fileList2=[],t.fileList=[],c(t,t.currentPage,t.pagesize))}).catch(function(e){}):Object(n.a)({url:s.public.url+"/backend/webdownpageset/update",method:"post",data:{id:s.rowId,name:s.form.name,iso_bgpic_path:s.imgname,andriod_bgpic_path:s.imgname2,sortid:s.form.sort,status:s.form.status}}).then(function(e){0===e.code&&(Object(o.Message)({message:e.message,type:"success"}),s.dialogFormVisible=!1,s.$refs.form.resetFields(),t.form.id2="",t.form.name="",t.form.sort="",t.form.status="",t.imgname="",t.imgname2="",t.rowId="",t.fileList2=[],t.fileList=[],c(t,t.currentPage,t.pagesize))}).catch(function(e){})})},view:function(e){var t=e.android_bgpic;this.imgsrc=t,this.dialogFormVisible2=!0},view2:function(e){var t=e.ios_bgpic;this.imgsrc=t,this.dialogFormVisible2=!0},reset2:function(){this.dialogFormVisible2=!1},disable:function(e){var t=this;Object(n.a)({url:this.public.url+"/backend/webdownpageset/updatestatus",method:"post",data:{id:e.id}}).then(function(e){Object(o.Message)({message:e.message,type:"success"}),c(t,t.currentPage,t.pagesize)}).catch(function(e){})},enable:function(e){var t=this;Object(n.a)({url:this.public.url+"/backend/webdownpageset/updatestatus",method:"post",data:{id:e.id}}).then(function(e){Object(o.Message)({message:e.message,type:"success"}),c(t,t.currentPage,t.pagesize)}).catch(function(e){})},delet:function(e){var t=this;Object(n.a)({url:this.public.url+"/backend/webdownpageset/del",method:"post",data:{id:e.id}}).then(function(e){Object(o.Message)({message:e.message,type:"success"}),c(t,t.currentPage,t.pagesize)}).catch(function(e){})},exceed:function(e){e.length>1&&this.$message({message:"一次只能上传一个文件",type:"warning"})},success:function(e,t,s){this.$message({message:e.message,type:"success"}),this.imgname=e.data.file_name,console.log(this.imgname)},success2:function(e,t,s){this.$message({message:e.message,type:"success"}),this.imgname2=e.data.file_name},error:function(e,t,s){this.$message({message:e.message,type:"error"}),this.fileList=[]},error2:function(e,t,s){this.$message({message:e.message,type:"error"}),this.fileList2=[]},before:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),s="tif"===t,a="gif"===t,i="psd"===t,n="png"===t,o="tiff"===t,l="jpeg"===t,r="bmp"===t,c="jpg"===t,d=e.size/1024/1024<1;return s||a||i||n||o||l||r||c||this.$message({message:"上传文件只能是tif,gif,psd,png,tiff,jpeg,bmp,jpg格式",type:"warning"}),d||this.$message({message:"上传文件大小不能超过1MB!",type:"warning"}),s||a||i||n||o||l||r||c&&d},edit:function(e){this.title="修改下载页",this.mosrnId=!0,this.dialogFormVisible=!0;var t=this;this.rowId=e.id,Object(n.a)({url:t.public.url+"/backend/webdownpageset/getinfo",method:"post",data:{id:e.id}}).then(function(e){t.form.id2=e.data.agent_org_id,t.form.name=e.data.name,t.form.sort=e.data.sortid,t.form.status=1*e.data.status,t.imgname=e.data.ios_bgpic,t.imgname2=e.data.android_bgpic}).catch(function(e){})}},components:{},filters:{}},u=(s("WS/H"),s("KHd+")),m=Object(u.a)(d,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"query"},[s("el-row",[s("el-form",{attrs:{inline:!0,"label-width":"80px"}},[s("el-col",{attrs:{span:5}},[e.webdownpagesetadd?s("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("新增 + ")]):e._e()],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"玩家渠道"}},[s("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}},e._l(e.statuslist,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:3}},[e.webdownpagesetgetlist?s("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"pagingbox"},[s("div",{staticClass:"paging"},[s("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableclassname,"cell-class-name":e.cell,border:""}},[s("el-table-column",{attrs:{prop:"agent_org_name",label:"渠道"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"下载页样式名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"android图片预览"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.view(t.row)}}},[e._v("预览图片")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"ios图片预览"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.view2(t.row)}}},[e._v("预览图片")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"sortid",label:"排序"}}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.row.status,expression:"scope.row.status == 1"}]},[e._v("启用")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.row.status,expression:"scope.row.status == 0"}]},[e._v("禁用")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.webdownpagesetupdate?s("el-button",{staticStyle:{float:"left"},attrs:{type:"text",size:"small"},on:{click:function(s){e.edit(t.row)}}},[e._v("修改")]):e._e(),e._v(" "),1==t.row.status&&e.webdownpagesetupdatestatus?s("el-button",{staticStyle:{color:"red",float:"left"},attrs:{type:"text",size:"small"},on:{click:function(s){e.disable(t.row)}}},[e._v("禁用")]):e._e(),e._v(" "),0==t.row.status&&e.webdownpagesetupdatestatus?s("el-button",{staticStyle:{color:"green",float:"left"},attrs:{type:"text",size:"small"},on:{click:function(s){e.enable(t.row)}}},[e._v("启用")]):e._e(),e._v(" "),e.webdownpagesetdel?s("el-button",{staticStyle:{float:"left"},attrs:{type:"text",size:"small"},on:{click:function(s){e.delet(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),s("div",{staticClass:"pagingbox"},[s("div",{staticClass:"paging"},[s("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[20,50,200],"page-size":e.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"玩家渠道：","label-width":e.formLabelWidth,prop:"domain"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:e.mosrnId},model:{value:e.form.id2,callback:function(t){e.$set(e.form,"id2",t)},expression:"form.id2"}},e._l(e.statuslist2,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"样式名：","label-width":e.formLabelWidth}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"android图片：","label-width":e.formLabelWidth}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:e.action,headers:e.token,"on-exceed":e.exceed,"on-success":e.success,"on-error":e.error,"show-file-list":e.showfile,"before-upload":e.before,multiple:"",limit:1,"file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),e._v("   \n            "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片文件,且文件大小不超过5m")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"ios图片：","label-width":e.formLabelWidth}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:e.action,headers:e.token,"on-exceed":e.exceed,"on-success":e.success2,"on-error":e.error,"show-file-list":e.showfile,"before-upload":e.before,multiple:"",limit:1,"file-list":e.fileList2}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),e._v("   \n            "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片文件,且文件大小不超过5m")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"排序：","label-width":e.formLabelWidth}},[s("el-input",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态：","label-width":e.formLabelWidth,prop:"status"}},[s("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[s("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),s("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"查看预览",visible:e.dialogFormVisible2,"before-close":e.reset2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.imgsrc}}),e._v(" "),s("el-button",{on:{click:function(t){e.reset2()}}},[e._v("取 消")])],1)],1)},[],!1,null,null,null);m.options.__file="webdownpage.vue";t.default=m.exports},Py8u:function(e,t,s){},"WS/H":function(e,t,s){"use strict";var a=s("Py8u");s.n(a).a}}]);