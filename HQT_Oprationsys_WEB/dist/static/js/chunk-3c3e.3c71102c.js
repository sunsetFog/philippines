(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3c3e"],{"0bdz":function(t,e,a){},VZlF:function(t,e,a){"use strict";var l=a("0bdz");a.n(l).a},WSwd:function(t,e,a){"use strict";a.r(e);var l=a("QbLZ"),r=a.n(l),o=a("t3Un"),i=a("L2JU");function s(t){Object(o.a)({url:t.public.url+"/lotteryaward/getList",method:"post",data:{}}).then(function(e){t.tableData=e.data}).catch(function(t){})}function n(t,e){Object(o.a)({url:t.public.url+"/lotteryaward/getinfocycle",method:"post",data:{id:e}}).then(function(e){t.form=e.data;var a=e.data.lot_sd;if(t.list=a.map(function(t){return{sale_from_time:t.sale_from_time,sale_to_time:t.sale_to_time,sale_period:t.sale_period}}),e.data.game_id){var l=e.data.game_id;t.form.game_id=l.split(",")}else t.form.game_id=[]}).catch(function(t){})}var c={data:function(){return{tableData:[],gamename:[],list:[{sale_from_time:"",sale_to_time:"",sale_period:""}],status:[{name:"已撤单",id:"1"},{name:"未撤单",id:"2"},{name:"已结算",id:"3"},{name:"未结算",id:"4"},{name:"已开奖",id:"5"},{name:"未开奖",id:"6"}],total:0,labelposition:"left",id:"",form:{name:"",status:"",game_id:[],bet_count_down:"",sortid:""},form2:{name:"",platform_id:"",lottery_id:"",api_url:"",key:""},rules:{status:[{required:!0,message:"请选状态",trigger:"change"}],bet_count_down:[{required:!0,message:"请选时间",trigger:"blur"}],game_id:[{required:!1,message:"",trigger:"change"}],sortid:[{required:!0,validator:function(t,e,a){""===e?a(new Error("请填排序")):1*e<1||1*e>99||e.indexOf(".")>0?a(new Error("请输入1到99的整数")):a()},trigger:"blur"}]},rules2:{platform_id:[{required:!0,message:"请填写平台ID",trigger:"blur"}],lottery_id:[{required:!0,message:"请填写彩种ID",trigger:"blur"}],api_url:[{required:!0,message:"请填写号源网址",trigger:"blur"}]},dialogFormVisible:!1,dialogFormVisible2:!1,formLabelWidth:"150px",statuslist:[{type:"1",name:"启用"},{type:"2",name:"禁用"}],gamelist:[],selectableRange:"",clearable:!1}},created:function(){s(this),function(t,e){Object(o.a)({url:t.public.url+"/gamename/getlotterygamelist",method:"post",data:{}}).then(function(e){t.gamelist=e.data}).catch(function(t){})}(this)},computed:r()({},Object(i.b)(["lotteryawardupdatecycle","lotteryawardupdatestatus","lotteryawardgetresult","lotteryawardupdate"])),watch:{},filters:{status:function(t){return"1"===t?"启用":"0"===t?"禁用":void 0}},methods:{handleadd:function(){this.list.push({sale_from_time:"",sale_to_time:"",sale_period:""})},setselect:function(t,e){""===this.list[e].sale_from_time?(this.$message({type:"warning",message:"请先选择开始时间"}),this.selectableRange="23:59:59-23:59:59"):this.selectableRange=t.sale_from_time+"-23:59:59"},handleremove:function(t){this.list.splice(t,1)},edit:function(t){this.dialogFormVisible=!0,this.id=t.id,n(this,t.id)},edit2:function(t){this.dialogFormVisible2=!0,this.id=t.id;var e=this;Object(o.a)({url:e.public.url+"/backend/lotteryaward/getinfo",method:"post",data:{id:t.id}}).then(function(t){e.form2=t.data}).catch(function(t){})},sure2:function(){var t=this;Object(o.a)({url:t.public.url+"/backend/lotteryaward/update",method:"post",data:{id:this.id,platform_id:this.form2.platform_id,lottery_id:this.form2.lottery_id,api_url:this.form2.api_url,private_key:this.form2.key}}).then(function(e){t.$message({type:"success",message:e.message}),t.$refs.form2.resetFields(),t.dialogFormVisible2=!1,s(t)}).catch(function(t){})},cs:function(t){var e=this;if(t.cs){if(1*t.cs<0)return this.$message({type:"error",message:"不能为负数"}),!1;Object(o.a)({url:this.public.url+"/backend/lotteryaward/getresult",method:"post",data:{id:t.id,termno:t.cs}}).then(function(t){var a="开奖结果为"+t.data;e.$message({type:"success",message:a})}).catch(function(t){})}else this.$message({type:"warning",message:"请输入期号"})},reset:function(){n(this,this.id)},back:function(t){this.dialogFormVisible=!1,this.$refs.form.resetFields(),this.list=[{sale_from_time:"",sale_to_time:"",sale_period:""}]},reset2:function(t){this.dialogFormVisible2=!1,this.$refs.form2.resetFields()},up:function(t){var e=this,a=this;this.$confirm("此操作将启用该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(o.a)({url:a.public.url+"/backend/lotteryaward/updateStatus",method:"post",data:{id:t.id,status:1}}).then(function(t){s(a)}).catch(function(t){})}).catch(function(){e.$message({type:"info",message:"已取消启用"})})},down:function(t){var e=this,a=this;this.$confirm("此操作将禁用该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(o.a)({url:a.public.url+"/backend/lotteryaward/updateStatus",method:"post",data:{id:t.id,status:0}}).then(function(t){s(a)}).catch(function(t){})}).catch(function(){e.$message({type:"info",message:"已取消禁用"})})},sure:function(t){var e=this,a=this;a.$refs.form.validate(function(t){if(!t)return!1;var l=!0,r=!0,i=!0;if(e.list.map(function(t){t.sale_from_time||(a.$message({type:"error",message:"请选择销售开始时间"}),l=!1),t.sale_to_time||(a.$message({type:"error",message:"请选择销售结束时间"}),r=!1),t.sale_period&&t.sale_period>0&&t.sale_period>=30||(a.$message({type:"error",message:"请输入销售周期且销售周期为大于30的正数"}),i=!1)}),!(l&&r&&i))return!1;a.$confirm("请确认是否提交?","二次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(t){var l=e.form.game_id.join(",");Object(o.a)({url:a.public.url+"/lotteryaward/updatecycle",method:"post",data:{id:e.id,status:e.form.status,bet_count_down:e.form.bet_count_down,game_id:l,lot_sd:e.list,sort:e.form.sortid}}).then(function(t){a.$message({type:"success",message:t.message}),a.$refs.form.resetFields(),a.dialogFormVisible=!1,s(a)}).catch(function(t){})}).catch(function(t){})})}}},d=(a("VZlF"),a("KHd+")),u=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container mail tableshowstyle"},[a("span",[t._v('备注："测试接口"的格式为后缀，只能查当天期号。比如：重庆时时彩的期号为： 20190420-021，那么只需在“测试接口”中填写： “21”点击“测试”即可查询。')]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"彩种"}}),t._v(" "),a("el-table-column",{attrs:{width:"160",prop:"update_time",label:"修改时间"}}),t._v(" "),a("el-table-column",{attrs:{width:"110",label:"销售开始时间"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"small"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{display:"none"},data:t.row.lot_sd}},[a("el-table-column",{attrs:{prop:"sale_from_time"}})],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"110",label:"销售结束时间"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"small"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{display:"none"},data:t.row.lot_sd}},[a("el-table-column",{attrs:{prop:"sale_to_time"}})],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"110",label:"销售周期（秒）"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"small"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{display:"none"},data:t.row.lot_sd}},[a("el-table-column",{attrs:{prop:"sale_period"}})],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bet_count_down",label:"投注倒计时（秒）"}}),t._v(" "),a("el-table-column",{attrs:{width:"250",prop:"game_id",label:"支持游戏"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("status")(e.row.status))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"100",label:"销售时间操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.lotteryawardupdatecycle?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),"1"===e.row.status&&t.lotteryawardupdatestatus?a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){t.down(e.row)}}},[t._v("禁用")]):t._e(),t._v(" "),"0"===e.row.status&&t.lotteryawardupdatestatus?a("el-button",{staticStyle:{color:"green"},attrs:{type:"text",size:"small"},on:{click:function(a){t.up(e.row)}}},[t._v("启用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"platform_id",label:"平台ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lottery_id",label:"彩种ID"}}),t._v(" "),a("el-table-column",{attrs:{width:"250",label:"网址"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.api_url)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"300",fixed:"right",label:"测试接口"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"70%"},attrs:{clearable:"",placeholder:"请输入期号",type:"number"},model:{value:e.row.cs,callback:function(a){t.$set(e.row,"cs",a)},expression:"scope.row.cs"}}),t._v(" "),t.lotteryawardgetresult?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.cs(e.row)}}},[t._v("测试")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.lotteryawardupdate?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit2(e.row)}}},[t._v("编辑")]):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"奖源修改",visible:t.dialogFormVisible,"before-close":t.back},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"彩种中文","label-width":t.formLabelWidth}},[a("span",[t._v(t._s(t.form.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth,prop:"status"}},[a("el-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statuslist,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"投注倒计时长","label-width":t.formLabelWidth,prop:"bet_count_down"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:t.form.bet_count_down,callback:function(e){t.$set(t.form,"bet_count_down",e)},expression:"form.bet_count_down"}}),a("span",[t._v("秒")])],1),t._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":t.formLabelWidth,prop:"sortid"}},[a("el-input",{attrs:{type:"number",clearable:""},model:{value:t.form.sortid,callback:function(e){t.$set(t.form,"sortid",e)},expression:"form.sortid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"支持游戏","label-width":t.formLabelWidth,prop:"game_id"}},[a("el-checkbox-group",{model:{value:t.form.game_id,callback:function(e){t.$set(t.form,"game_id",e)},expression:"form.game_id"}},t._l(t.gamelist,function(e,l){return a("el-checkbox",{key:l,attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary",disabled:t.list.length>4},on:{click:t.handleadd}},[t._v("增加时间段")]),t._v(" "),t._l(t.list,function(e,l){return a("div",{key:l,staticStyle:{"margin-left":"160px","border-bottom":"1px solid"}},[a("el-form",{attrs:{"label-position":t.labelposition}},[a("p",{staticClass:"green"},[t._v("第"+t._s(l+1)+"段销售时间设置")]),t._v(" "),a("el-form-item",{attrs:{label:"销售开始时间","label-width":t.formLabelWidth}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",prop:"start_time",clearable:t.clearable},model:{value:e.sale_from_time,callback:function(a){t.$set(e,"sale_from_time",a)},expression:"item.sale_from_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销售结束时间","label-width":t.formLabelWidth}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:t.selectableRange},clearable:t.clearable},on:{focus:function(a){t.setselect(e,l)}},model:{value:e.sale_to_time,callback:function(a){t.$set(e,"sale_to_time",a)},expression:"item.sale_to_time"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",disabled:t.list.length<2},on:{click:function(e){t.handleremove(l)}}},[t._v("删除本段销售设置")])],1),t._v(" "),a("el-form-item",{attrs:{label:"销售周期","label-width":t.formLabelWidth,prop:"around_time"}},[a("el-input",{staticStyle:{width:"160px"},attrs:{type:"number"},model:{value:e.sale_period,callback:function(a){t.$set(e,"sale_period",a)},expression:"item.sale_period"}}),a("span",[t._v("秒")])],1)],1)],1)})],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sure(t.form)}}},[t._v("确认提交")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.reset(t.form)}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.back(t.form)}}},[t._v("返回列表")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"奖源编辑",visible:t.dialogFormVisible2,"before-close":t.reset2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2}},[a("el-form-item",{attrs:{label:"彩种名称","label-width":t.formLabelWidth}},[a("span",[t._v(t._s(t.form2.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"平台ID","label-width":t.formLabelWidth,prop:"platform_id"}},[a("el-input",{attrs:{placeholder:"请按技术要求填写"},model:{value:t.form2.platform_id,callback:function(e){t.$set(t.form2,"platform_id",e)},expression:"form2.platform_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"彩种ID","label-width":t.formLabelWidth,prop:"lottery_id"}},[a("el-input",{attrs:{placeholder:"请按技术要求填写"},model:{value:t.form2.lottery_id,callback:function(e){t.$set(t.form2,"lottery_id",e)},expression:"form2.lottery_id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"号源网址","label-width":t.formLabelWidth,prop:"api_url"}},[a("el-input",{attrs:{placeholder:"必须是具体页面"},model:{value:t.form2.api_url,callback:function(e){t.$set(t.form2,"api_url",e)},expression:"form2.api_url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密钥","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"不填写，默认不修改"},model:{value:t.form2.key,callback:function(e){t.$set(t.form2,"key",e)},expression:"form2.key"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.reset2(t.form2)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sure2(t.form2)}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="forthesource.vue";e.default=u.exports}}]);