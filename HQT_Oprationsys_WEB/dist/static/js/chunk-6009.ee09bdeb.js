(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6009"],{AyZx:function(e,t,i){"use strict";i.r(t);var a=i("QbLZ"),r=i.n(a),l=i("t3Un"),o=i("L2JU");function n(e){var t={effect_level:e.formInline.type,pageno:e.currentPage,pagerows:e.pagesize,priority_level:e.formInline.frist,switch:e.formInline.play};Object(l.a)({url:e.public.url+"/gamemovetext/getlist",method:"post",data:t}).then(function(t){e.tableData=t.data.list,e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(e){})}function s(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var m={data:function(){return{formInline:{type:"",frist:"",play:""},currentPage:1,tableData:[],dialogFormVisible:!1,typelist:[{name:"全部",type:""},{name:"1",type:"1"},{name:"2",type:"2"},{name:"3",type:"3"}],typelist2:[{name:"1",type:"1"},{name:"2",type:"2"},{name:"3",type:"3"}],fristlist:[{name:"全部",type:""},{name:"1",type:"1"},{name:"2",type:"2"},{name:"3",type:"3"},{name:"4",type:"4"}],fristlist2:[{name:"1",type:"1"},{name:"2",type:"2"},{name:"3",type:"3"},{name:"4",type:"4"}],playlist:[{name:"全部",type:""},{name:"开启",type:"1"},{name:"停用",type:"0"}],form:{},rules:{},formLabelWidth:"120px",total:0,pagesize:50,id:"",title:"",dialogFormVisible2:!1,form2:{type:"",frist:"",number:"",speed:"",checkbox:!1,value1:"",value2:"",input:"",content:"",radio:"",num:"",time:""},rules2:{type:[{required:!0,message:"请选择效果级别",trigger:"change"}],frist:[{required:!0,message:"请选择优先级",trigger:"change"}],number:[{required:!0,message:"请输入循环次数",trigger:"blur"}],speed:[{required:!0,message:"请输入循环速度",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],radio:[{required:!0,message:"请选择播放开关",trigger:"change"}]}}},created:function(){this.diversions.length||0==this.diversions.length||(this.formInline.type=this.diversions.type,this.currentPage=this.diversions.currentPage,this.pagesize=this.diversions.pagesize,this.formInline.frist=this.diversions.frist,this.formInline.play=this.diversions.play,n(this))},computed:r()({},Object(o.b)(["gamemovetextgetlist","gamemovetextdel","gamemovetextadd","gamemovetextupdate","gamemovetextgetinfo","diversions","gamemovetextrepeatpush"])),watch:{},filters:{play:function(e){return"0"===e?"关闭":"1"===e?"开启":void 0},is_timing_play:function(e){return"0"===e?"否":"1"===e?"是":void 0}},methods:{view:function(e){this.id=e,this.dialogFormVisible=!0;var t=this;Object(l.a)({url:t.public.url+"/gamemovetext/getinfo",method:"post",data:{id:e}}).then(function(e){t.form=e.data}).catch(function(e){})},edit:function(e){this.title="跑马灯 编辑",this.dialogFormVisible2=!0,this.id=e;var t=this;Object(l.a)({url:t.public.url+"/gamemovetext/getinfo",method:"post",data:{id:e}}).then(function(e){t.form2.type=e.data.effect_level,t.form2.frist=e.data.priority_level,t.form2.speed=e.data.loop_speed,t.form2.content=e.data.content,t.form2.radio=e.data.switch,"0"===e.data.is_timing_play?(t.form2.checkbox=!1,t.form2.num=e.data.loop_count,t.form2.time=e.data.one_interval_sec):(t.form2.checkbox=!0,t.form2.input=e.data.one_loop_sec,t.form2.value1=new Date(e.data.play_from_time),t.form2.value2=new Date(e.data.play_to_time))}).catch(function(e){})},add:function(){this.title="跑马灯 添加",this.dialogFormVisible2=!0},delet:function(e){var t=this,i=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(l.a)({url:i.public.url+"/gamemovetext/del",method:"post",data:{id:e}}).then(function(e){n(i)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},sure:function(){var e=this,t=this;this.$refs.form2.validate(function(i){if(!i)return!1;if("跑马灯 添加"===e.title){var a="",r="",o="",m="",f="",c="";if(t.form2.checkbox){if(!t.form2.value1)return e.$message.error("请选择开始时间"),!1;if(r=s(b=t.form2.value1.getTime()/1e3),!t.form2.value2)return e.$message.error("请选择开始时间"),!1;if(o=s(_=t.form2.value2.getTime()/1e3),b>_)return e.$message.error("开始时间要小于结束时间"),!1;if(a=1,""===t.form2.input&&1*t.form2.input<0)return e.$message.error("请填写多少秒循环一次且循环次数时间必须大于0"),!1;m=t.form2.input,f="",c=""}else a=0,r="",o="",m="",f=t.form2.num,c=t.form2.time;Object(l.a)({url:t.public.url+"/gamemovetext/add",method:"post",data:{effect_level:t.form2.type,priority_level:e.form2.frist,loop_speed:e.form2.speed,is_timing_play:a,play_from_time:r,play_to_time:o,one_loop_sec:m,content:e.form2.content,switch:e.form2.radio,loop_count:f,one_interval_sec:c}}).then(function(e){t.$message({type:"success",message:e.message}),t.dialogFormVisible2=!1,t.form2.value1="",t.form2.value2="",t.form2.input="",t.form2.num="",t.form2.time="",t.form2.checkbox=!1,t.$refs.form2.resetFields(),n(t)}).catch(function(e){})}else{var u="",p="",d="",v="",h="",g="";if(t.form2.checkbox){if(!t.form2.value1)return e.$message.error("请选择开始时间"),!1;var b,_;if(p=s(b=t.form2.value1.getTime()/1e3),!t.form2.value2)return e.$message.error("请选择开始时间"),!1;if(d=s(_=t.form2.value2.getTime()/1e3),b>_)return e.$message.error("开始时间要小于结束时间"),!1;if(u=1,""===t.form2.input&&1*t.form2.input<0)return e.$message.error("请填写多少秒循环一次且循环次数时间必须大于0"),!1;v=t.form2.input,h="",g=""}else u=0,p="",d="",v="",h=t.form2.num,g=t.form2.time;Object(l.a)({url:t.public.url+"/gamemovetext/update",method:"post",data:{effect_level:t.form2.type,priority_level:e.form2.frist,loop_speed:e.form2.speed,is_timing_play:u,play_from_time:p,play_to_time:d,one_loop_sec:v,content:e.form2.content,switch:e.form2.radio,id:e.id,loop_count:h,one_interval_sec:g}}).then(function(e){t.$message({type:"success",message:e.message}),t.dialogFormVisible2=!1,t.form2.value1="",t.form2.value2="",t.form2.input="",t.form2.num="",t.form2.time="",t.form2.checkbox=!1,t.$refs.form2.resetFields(),n(t)}).catch(function(e){})}})},again:function(e){var t=this;Object(l.a)({url:t.public.url+"/gamemovetext/repeatpush",method:"post",data:{id:e.id}}).then(function(e){t.$message.success(e.message),n(t)}).catch(function(e){})},reset:function(){this.dialogFormVisible2=!1,this.$refs.form2.resetFields(),this.form2.value1="",this.form2.value2="",this.form2.input="",this.form2.num="",this.form2.time="",this.form2.checkbox=!1},query:function(){this.currentPage=1,n(this);var e={type:this.formInline.type,currentPage:this.currentPage,pagesize:this.pagesize,frist:this.formInline.frist,play:this.formInline.play};this.$store.commit("setdiversions",e)},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1;n(this);var t={type:this.formInline.type,currentPage:this.currentPage,pagesize:this.pagesize,frist:this.formInline.frist,play:this.formInline.play};this.$store.commit("setdiversions",t)},handleCurrentChange:function(e){this.currentPage=1*e;n(this);var t={type:this.formInline.type,currentPage:this.currentPage,pagesize:this.pagesize,frist:this.formInline.frist,play:this.formInline.play};this.$store.commit("setdiversions",t)}}},f=(i("DBfz"),i("KHd+")),c=Object(f.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container mail"},[i("div",{staticClass:"query"},[i("el-row",[i("el-form",{attrs:{inline:!0,"label-width":"80px"}},[i("el-col",{attrs:{span:2}},[e.gamemovetextadd?i("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("添加")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"效果级别"}},[i("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},e._l(e.typelist,function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"优先级"}},[i("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.frist,callback:function(t){e.$set(e.formInline,"frist",t)},expression:"formInline.frist"}},e._l(e.fristlist,function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"播放开关"}},[i("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.play,callback:function(t){e.$set(e.formInline,"play",t)},expression:"formInline.play"}},e._l(e.playlist,function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:2}},[e.gamemovetextgetlist?i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{width:"80",prop:"id",label:"ID"}}),e._v(" "),i("el-table-column",{attrs:{width:"80",prop:"effect_level",label:"效果级别"}}),e._v(" "),i("el-table-column",{attrs:{width:"80",prop:"priority_level",label:"优先级"}}),e._v(" "),i("el-table-column",{attrs:{width:"80",prop:"loop_speed",label:"播放速度"}}),e._v(" "),i("el-table-column",{attrs:{width:"80",label:"定时播放"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("is_timing_play")(t.row.is_timing_play))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"content",label:"播放内容"}}),e._v(" "),i("el-table-column",{attrs:{width:"80",label:"播放开关"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("play")(t.row.switch))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"120",prop:"push_status",label:"推送情况"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.gamemovetextrepeatpush?i("el-button",{staticClass:"red",attrs:{type:"text"},on:{click:function(i){e.again(t.row)}}},[e._v("重推")]):e._e(),e._v(" "),e.gamemovetextupdate?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.edit(t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.gamemovetextgetinfo?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.view(t.row.id)}}},[e._v("查看")]):e._e(),e._v(" "),e.gamemovetextdel?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.delet(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:"跑马灯 查看",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"效果级别","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.effect_level)+"\n      ")]),e._v(" "),i("el-form-item",{attrs:{label:"优先级","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.priority_level)+"\n      ")]),e._v(" "),i("el-form-item",{attrs:{label:"播放速度","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.loop_speed)+"\n      ")]),e._v(" "),i("el-form-item",{attrs:{label:"定时播放","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e._f("is_timing_play")(e.form.is_timing_play))+"\n      ")]),e._v(" "),"1"===e.form.is_timing_play?i("el-form-item",{attrs:{label:"播放开始时间","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.play_from_time)+"\n      ")]):e._e(),e._v(" "),"1"===e.form.is_timing_play?i("el-form-item",{attrs:{label:"播放结束时间","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.play_to_time)+"\n      ")]):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"播放内容","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.content)+"\n      ")]),e._v(" "),i("el-form-item",{attrs:{label:"播放开关","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e._f("play")(e.form.switch))+"\n      ")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible2,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[i("el-form",{ref:"form2",attrs:{model:e.form2,rules:e.rules2}},[i("el-form-item",{attrs:{label:"效果级别","label-width":e.formLabelWidth,prop:"type"}},[i("el-select",{attrs:{clearable:""},model:{value:e.form2.type,callback:function(t){e.$set(e.form2,"type",t)},expression:"form2.type"}},e._l(e.typelist2,function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"优先级","label-width":e.formLabelWidth,prop:"frist"}},[i("el-select",{attrs:{clearable:""},model:{value:e.form2.frist,callback:function(t){e.$set(e.form2,"frist",t)},expression:"form2.frist"}},e._l(e.fristlist2,function(e){return i("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"播放速度","label-width":e.formLabelWidth,prop:"speed"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{type:"number"},model:{value:e.form2.speed,callback:function(t){e.$set(e.form2,"speed",t)},expression:"form2.speed"}}),i("span",[e._v("像素/16ms")])],1),e._v(" "),i("el-form-item",{attrs:{label:"定时播放","label-width":e.formLabelWidth,prop:"name"}},[i("el-checkbox",{staticStyle:{position:"absolute",left:"-90px"},model:{value:e.form2.checkbox,callback:function(t){e.$set(e.form2,"checkbox",t)},expression:"form2.checkbox"}}),e._v(" "),i("span",[e._v("开始时间：")]),e._v(" "),i("el-date-picker",{attrs:{type:"datetime"},model:{value:e.form2.value1,callback:function(t){e.$set(e.form2,"value1",t)},expression:"form2.value1"}}),e._v(" "),i("span",[e._v("至 结束时间：")]),e._v(" "),i("el-date-picker",{attrs:{type:"datetime"},model:{value:e.form2.value2,callback:function(t){e.$set(e.form2,"value2",t)},expression:"form2.value2"}}),e._v(" "),i("el-input",{staticStyle:{width:"300px","margin-top":"8px"},attrs:{type:"number"},model:{value:e.form2.input,callback:function(t){e.$set(e.form2,"input",t)},expression:"form2.input"}}),i("span",[e._v("秒循环一次")])],1),e._v(" "),i("el-form-item",{attrs:{label:"播放次数","label-width":e.formLabelWidth}},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",disabled:e.form2.checkbox},model:{value:e.form2.num,callback:function(t){e.$set(e.form2,"num",t)},expression:"form2.num"}}),i("span",[e._v("次，每次间隔")]),i("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.form2.checkbox,type:"number"},model:{value:e.form2.time,callback:function(t){e.$set(e.form2,"time",t)},expression:"form2.time"}}),i("span",[e._v("秒")])],1),e._v(" "),i("el-form-item",{attrs:{label:"播放内容","label-width":e.formLabelWidth,prop:"content"}},[i("el-input",{attrs:{type:"textarea",placeholder:"必填。公告内容"},model:{value:e.form2.content,callback:function(t){e.$set(e.form2,"content",t)},expression:"form2.content"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"播放开关","label-width":e.formLabelWidth,prop:"radio"}},[i("el-radio-group",{model:{value:e.form2.radio,callback:function(t){e.$set(e.form2,"radio",t)},expression:"form2.radio"}},[i("el-radio",{attrs:{label:"1"}},[e._v("开启")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("停用")])],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("提 交")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="diversions.vue";t.default=c.exports},DBfz:function(e,t,i){"use strict";var a=i("XxMH");i.n(a).a},XxMH:function(e,t,i){}}]);