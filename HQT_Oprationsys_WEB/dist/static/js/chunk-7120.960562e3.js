(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7120"],{"1acA":function(t,e,a){},"2RX2":function(t,e,a){"use strict";a.r(e);var l=a("QbLZ"),r=a.n(l),n=a("L2JU"),i=a("t3Un");a("Yfch");function s(t){Object(i.a)({url:t.public.url+"/backend/agentaccount/gettaxlist",method:"post",data:{org_id:t.formInline.org,pageno:t.currentPage,pagerows:t.pagesize,user_account:t.formInline.user.trim(),level:t.formInline.playerlevel,status:t.formInline.status,puser_id:t.pid}}).then(function(e){t.tableData=e.data.list,t.total=1*e.data.rownum,t.currentPage=1*e.data.pageno,e.data.nav_path&&e.data.nav_path.length>0?t.nav=e.data.nav_path:t.nav=[]}).catch(function(t){})}var o={data:function(){return{formInline:{org:"",user:"",playerlevel:"",status:""},currentPage:1,tableData:[],dialogFormVisible:!1,form:{desc:""},rules:{desc:[{required:!0,validator:function(t,e,a){""===e?a(new Error("请输入契约规则")):1*e>5||1*e<0?a(new Error("请填写0%-5%之间的数值")):/^[1-9]\d*$|^[1-9]\d*\.\d\d?$|^0\.\d\d?$/.test(e)||"0"==e?a():a(new Error("保留两位小数"))},trigger:"blur"}]},formLabelWidth:"150px",title:"",name:"",total:0,pagesize:50,statuslist:[],list:[{id:"",name:"全部"},{id:"1",name:"启用中"},{id:"0",name:"无"}],nav:[],form2:{},pid:""}},created:function(){!function(t){Object(i.a)({url:t.public.url+"/backend/org/getorglist",method:"post",data:{}}).then(function(e){t.statuslist=e.data,t.statuslist.unshift({id:"",name:"全部"})}).catch(function(t){})}(this),this.tax.length||0==this.tax.length||(this.formInline.org=this.tax.org,this.currentPage=this.tax.currentPage,this.pagesize=this.tax.pagesize,this.pid=this.tax.pid,this.formInline.user=this.tax.user,this.formInline.playerlevel=this.tax.playerlevel,this.formInline.status=this.tax.status,s(this))},computed:r()({},Object(n.b)(["agentaccountgettaxlist","agentaccountupdatetax","tax"])),filters:{time:function(t){return"-1"===t?"":t}},methods:{reset:function(t){this.dialogFormVisible=!1,this.$refs.form.resetFields()},getpid:function(t,e){this.pid=t.puser_id,s(this)},query:function(){this.currentPage=1,this.pid="",s(this);var t={org:this.formInline.org,currentPage:this.currentPage,pagesize:this.pagesize,pid:this.pid,user:this.formInline.user,playerlevel:this.formInline.playerlevel,status:this.formInline.status};this.$store.commit("settax",t)},confirmEdit:function(t){this.pid=t.user_id,s(this)},edit:function(t){this.title="税收 编辑",this.dialogFormVisible=!0,this.id=t.user_id;var e=this;Object(i.a)({url:e.public.url+"/backend/agentaccount/gettaxinfo",method:"post",data:{user_id:t.user_id}}).then(function(t){e.form2=t.data,e.form.desc=t.data.reward_top}).catch(function(t){})},sure:function(t){var e=this,a=this;this.$refs.form.validate(function(t){if(!t)return!1;a.$confirm("","二次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(t){Object(i.a)({url:a.public.url+"/agentaccount/updatetax",method:"post",data:{user_id:e.id,tax:e.form.desc}}).then(function(t){a.$message({type:"success",message:t.message}),a.dialogFormVisible=!1,a.$refs.form.resetFields(),s(a)}).catch(function(t){})}).catch(function(t){})})},handleSizeChange:function(t){this.pagesize=t,this.currentPage=1,this.pid="",s(this);var e={org:this.formInline.org,currentPage:this.currentPage,pagesize:this.pagesize,pid:this.pid,user:this.formInline.user,playerlevel:this.formInline.playerlevel,status:this.formInline.status};this.$store.commit("settax",e)},handleCurrentChange:function(t){this.currentPage=1*t,this.pid="",s(this);var e={org:this.formInline.org,currentPage:this.currentPage,pagesize:this.pagesize,pid:this.pid,user:this.formInline.user,playerlevel:this.formInline.playerlevel,status:this.formInline.status};this.$store.commit("settax",e)}}},u=(a("YpGg"),a("KHd+")),c=Object(u.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"query"},[a("el-row",[a("el-form",{attrs:{inline:!0,"label-width":"80px"}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"玩家渠道"}},[a("el-select",{attrs:{clearable:""},model:{value:t.formInline.org,callback:function(e){t.$set(t.formInline,"org",e)},expression:"formInline.org"}},t._l(t.statuslist,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"玩家账号"}},[a("el-input",{attrs:{placeholder:"玩家账号",clearable:""},model:{value:t.formInline.user,callback:function(e){t.$set(t.formInline,"user",e)},expression:"formInline.user"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属组"}},[a("el-select",{model:{value:t.formInline.playerlevel,callback:function(e){t.$set(t.formInline,"playerlevel",e)},expression:"formInline.playerlevel"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"总代",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"一级",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"二级",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"三级",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"四级",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"五级",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"六级",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"七级",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:"八级",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"会员",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"游客",value:"-1"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"税收状态"}},[a("el-select",{attrs:{clearable:""},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},t._l(t.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:1}},[t.agentaccountgettaxlist?a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.query}},[t._v("查询")]):t._e()],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,background:"",layout:"prev, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]),t._v(" "),a("div",t._l(t.nav,function(e,l){return a("div",{key:l,staticClass:"parenti"},[a("el-button",{attrs:{plain:""},on:{click:function(a){t.getpid(e,l)}}},[t._v(t._s(e.p_user_account))]),t._v(" "),a("i",{staticClass:"el-icon-d-arrow-right"})],1)})),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"org_name",width:"200",label:"玩家渠道"}}),t._v(" "),a("el-table-column",{attrs:{label:"玩家账号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",disabled:0==e.row.isleaf},on:{click:function(a){t.confirmEdit(e.row)}}},[t._v(t._s(e.row.user_account))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"层级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reward_top",width:"150",label:"总代税收比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reward_team",label:"团队占比"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reward_fact",width:"150",label:"实际收益比例"}}),t._v(" "),a("el-table-column",{attrs:{label:"税收创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("time")(e.row.reward_create_time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"税收上次时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("time")(e.row.reward_update_time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"税收状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"总代税收操作操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["总代"===e.row.level&&t.agentaccountupdatetax?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[50,100,200],"page-size":t.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"before-close":t.reset},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"玩家渠道:","label-width":t.formLabelWidth}},[t._v("\n        "+t._s(t.form2.org_name)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"签订方:","label-width":t.formLabelWidth}},[a("span",[t._v("（渠道）- （总代）")])]),t._v(" "),a("el-form-item",{attrs:{label:"上次更新时间:","label-width":t.formLabelWidth}},[t._v("\n        "+t._s(t._f("time")(t.form2.reward_update_time))+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"契约规则:","label-width":t.formLabelWidth,prop:"desc"}},[a("span",[t._v("玩家流水的")]),a("el-input",{staticStyle:{width:"30%"},attrs:{type:"number"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),a("span",[t._v("%（保留小数点后两位）")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.reset(t.form)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sure(t.form)}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,"3011cc44",null);c.options.__file="tax.vue";e.default=c.exports},Yfch:function(t,e,a){"use strict";function l(t){return/^[a-zA-Z_]\w{2,17}$/.test(t)}function r(t){return/^[A-Za-z]+$/.test(t)}function n(t){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$/.test(t)}a.d(e,"a",function(){return l}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return n})},YpGg:function(t,e,a){"use strict";var l=a("1acA");a.n(l).a}}]);