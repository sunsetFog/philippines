(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-73c0"],{"6QW9":function(t,a,e){},BDX0:function(t,a,e){"use strict";e.r(a);var n=e("QbLZ"),l=e.n(n),i=e("L2JU"),c=e("t3Un");e("Yfch");function r(t){Object(c.a)({url:t.public.url+"/backend/paybankcard/selectpaycard",method:"post",data:{bank_id:t.id,pageno:t.currentPage,pagerows:t.pagesize}}).then(function(a){t.tableData=a.data.list,t.total=1*a.data.rownum,t.currentPage=1*a.data.pageno}).catch(function(t){})}function o(t,a){Object(c.a)({url:t.public.url+"/backend/paybankcard/showcardlist",method:"post",data:{type:a,agent_org_id:t.radio}}).then(function(a){t.tags=a.data}).catch(function(t){})}var s={data:function(){return{radio:"",currentPage:1,tableData:[],dialogFormVisible:!1,tags:[],formLabelWidth:"150px",title:"",name:"",total:0,pagesize:20,userlist:[],bankcard:!1,bank:!1,banktable:!1,tableshow:!1,banklist:[],multipleSelection:[],id:"",tableData2:[],num:""}},created:function(){!function(t){Object(c.a)({url:t.public.url+"/backend/domain/getorglist",method:"post"}).then(function(a){t.userlist=a.data}).catch(function(t){})}(this)},watch:{radio:function(t){var a=this;Object(c.a)({url:a.public.url+"/paybankcard/showcardlist",method:"post",data:{type:"1",agent_org_id:t}}).then(function(t){!function(t){Object(c.a)({url:t.public.url+"/backend/paybankcard/banklist",method:"post"}).then(function(a){t.banklist=a.data}).catch(function(t){})}(a),o(a,1),a.bankcard=!0,a.bank=!0}).catch(function(t){})}},computed:l()({},Object(i.b)(["domaingetorglist","paybankcardshowcardlist","paybankcardbanklist","paybankcardselectpaycard","paybankcardallotpaycard"])),methods:{banklistbt:function(t){this.banktable=!0;this.id=t,r(this)},shou:function(){this.num=1,o(this,1)},fu:function(){this.num=2,o(this,2)},open:function(t){var a=this;Object(c.a)({url:a.public.url+"/backend/paybankcard/getpaycardinfo",method:"post",data:{card_id:t.card_id}}).then(function(t){a.tableData2=t.data}).catch(function(t){})},handleSelectionChange:function(t){this.multipleSelection=t},checkdel:function(){this.banktable=!1,this.tableData=[]},check:function(){var t=this;if(this.multipleSelection.length>0){var a=this,e=this.multipleSelection.map(function(t){return t.id}).join(",");this.$confirm("此操作将分配这些银行卡, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.a)({url:a.public.url+"/backend/paybankcard/allotpaycard",method:"post",data:{card_ids:e,agent_org_id:a.radio}}).then(function(e){t.$message({type:"success",message:e.message}),r(a),o(a,1),o(a,2)}).catch(function(t){})}).catch(function(){t.$message({type:"info",message:"已取消分配"})})}else this.$message({type:"info",message:"请选择银行卡"})},delet:function(t){var a=this,e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(c.a)({url:e.public.url+"/paybankcard/delpaycard",method:"post",data:{id:t.id}}).then(function(t){e.$message.success(t.message),o(e,e.num)}).catch(function(t){})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){this.pagesize=t,this.currentPage=1,r(this)},handleCurrentChange:function(t){this.currentPage=1*t,r(this)}},filters:{type:function(t){return"1"==t?"收款卡":"2"==t?"付款卡":void 0}}},u=(e("l4jy"),e("KHd+")),d=Object(u.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container bankallocation"},[t.domaingetorglist?e("div",{staticClass:"left"},[e("div",{staticClass:"boxred"}),t._v(" "),e("div",{staticClass:"line"},[t._v("渠道选择")]),t._v(" "),e("el-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},t._l(t.userlist,function(a,n){return e("el-radio",{key:n,attrs:{label:a.id}},[t._v(t._s(a.nickname))])}))],1):t._e(),t._v(" "),e("div",{staticClass:"right"},[t.bankcard&&t.paybankcardshowcardlist?e("div",[e("div",{staticClass:"boxred"}),t._v(" "),e("div",{staticClass:"line"},[t._v("渠道已分配银行卡")]),t._v(" "),e("div",{staticStyle:{"margin-top":"10px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.shou}},[t._v("查看收款卡")]),t._v(" "),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.fu}},[t._v("查看付款卡")])],1),t._v(" "),e("div",{staticClass:"boxborder"},t._l(t.tags,function(a){return e("el-popover",{key:a.id,attrs:{placement:"bottom-start"}},[e("el-table",{attrs:{data:t.tableData2,border:""}},[e("el-table-column",{attrs:{label:"ID"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n                  "+t._s(a.row.id)+"\n              ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"cardno",label:"银行卡号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"channel_name",label:"对应支付平台"}}),t._v(" "),e("el-table-column",{attrs:{prop:"init_balance",label:"期初余额"}}),t._v(" "),e("el-table-column",{attrs:{prop:"interval",label:"转账区间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"day_trans_max_limit",label:"单日上限"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"状态"}})],1),t._v(" "),e("el-tag",{attrs:{slot:"reference",closable:"",type:a.type},on:{close:function(e){t.delet(a)}},nativeOn:{click:function(e){t.open(a)}},slot:"reference"},[t._v(t._s(a.financial_ident))])],1)}))]):t._e(),t._v(" "),t.bank&&t.paybankcardbanklist?e("div",[e("div",{staticClass:"boxred"}),t._v(" "),e("div",{staticClass:"line"},[t._v("银行选择")]),t._v(" "),e("div",{staticClass:"boxborder"},t._l(t.banklist,function(a,n){return e("el-button",{key:n,staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:function(e){t.banklistbt(a.id)}}},[t._v(t._s(a.name))])}))]):t._e(),t._v(" "),t.banktable&&t.paybankcardselectpaycard?e("div",[e("div",{staticClass:"boxred"}),t._v(" "),e("div",{staticClass:"line"},[t._v("银行卡选择")]),t._v(" "),e("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{label:"内部识别码"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n                  "+t._s(a.row.financial_ident)+"\n              ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"cardno",label:"银行卡号"}}),t._v(" "),e("el-table-column",{attrs:{label:"银行卡类型"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n                  "+t._s(t._f("type")(a.row.type))+"\n              ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"channelname",label:"对应支付平台"}}),t._v(" "),e("el-table-column",{attrs:{prop:"init_balance",label:"期初余额"}}),t._v(" "),e("el-table-column",{attrs:{prop:"interval",label:"转账区间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"day_trans_max_limit",label:"单日上限"}}),t._v(" "),e("el-table-column",{attrs:{prop:"total_in_money",label:"截止至昨日总转入"}}),t._v(" "),e("el-table-column",{attrs:{prop:"total_out_money",label:"截止至昨日总转出"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"状态"}})],1),t._v(" "),e("el-row",{staticClass:"buttoncenter",staticStyle:{"text-align":"center","margin-top":"20px"}},[t.paybankcardallotpaycard?e("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(a){t.check()}}},[t._v("确认分配")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.checkdel()}}},[t._v("取消分配")])],1),t._v(" "),e("div",{staticClass:"pagingbox"},[e("div",{staticClass:"paging"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[20,50,200],"page-size":t.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.currentPage=a}}})],1)])],1):t._e()])])},[],!1,null,null,null);d.options.__file="bankallocation.vue";a.default=d.exports},Yfch:function(t,a,e){"use strict";function n(t){return/^[a-zA-Z_]\w{2,17}$/.test(t)}function l(t){return/^[A-Za-z]+$/.test(t)}function i(t){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,12}$/.test(t)}function c(t){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{0,20}$/.test(t)}e.d(a,"a",function(){return n}),e.d(a,"b",function(){return l}),e.d(a,"c",function(){return i}),e.d(a,"d",function(){return c})},l4jy:function(t,a,e){"use strict";var n=e("6QW9");e.n(n).a}}]);