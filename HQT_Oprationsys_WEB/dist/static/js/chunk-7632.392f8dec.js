(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7632"],{"04JN":function(e,t,i){},HKn3:function(e,t,i){"use strict";i.r(t);var a=i("QbLZ"),r=i.n(a),n=i("t3Un"),o=i("L2JU");function s(e,t,i,a,r){var o={title:t.trim(),pageno:i,pagerows:a};if(r&&r.length>0){var s=r[0].getTime()/1e3;o.time_from=s;var l=r[1].getTime()/1e3;o.time_to=l}Object(n.a)({url:e.public.url+"/gamenotice/getlist",method:"post",data:o}).then(function(t){e.tableData=t.data.list,e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(e){})}var l={filters:{},data:function(){return{formInline:{user:"",time:""},currentPage:1,tableData:[],dialogFormVisible:!1,form:{name:"",desc:"",time:"1",time1:[]},rules:{name:[{required:!0,message:"请输入主题",trigger:"blur"},{min:0,max:16,message:"主题长度小于16个字符",trigger:"blur"}],time:[{required:!0,message:"请选类型",trigger:"change"}],desc:[{required:!0,message:"请输入说明",trigger:"blur"}],time1:[{required:!0,message:"请选类型",trigger:"change"}]},formLabelWidth:"120px",title:"",total:0,pagesize:50,id:"",timeshow:!0,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},created:function(){this.notice.length||0==this.notice.length||(this.formInline.user=this.notice.user,this.currentPage=this.notice.currentPage,this.pagesize=this.notice.pagesize,this.formInline.time=this.notice.time,s(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.time))},computed:r()({},Object(o.b)(["gamenoticeadd","gamenoticedel","gamenoticeupdate","gamenoticegetlist","notice"])),watch:{},methods:{reset:function(e){this.dialogFormVisible=!1,this.$refs.form.resetFields()},time:function(){"1"===this.form.time?this.timeshow=!0:this.timeshow=!1},edit:function(e){this.title="编辑公告",this.dialogFormVisible=!0;var t=this;Object(n.a)({url:t.public.url+"/gamenotice/getinfo",method:"post",data:{id:e.id}}).then(function(e){if(t.form.name=e.data.title,t.form.desc=e.data.content,"-1"===e.data.validtime_from)t.form.time="2",t.timeshow=!1;else{t.form.time="1",t.timeshow=!0;var i=new Date(e.data.validtime_from),a=new Date(e.data.validtime_to);t.form.time1=[i,a]}t.id=e.data.id}).catch(function(e){})},add:function(){this.title="新公告",this.dialogFormVisible=!0,this.timeshow=!0},query:function(){this.currentPage=1,s(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.time);var e={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,time:this.formInline.time};this.$store.commit("setnotice",e)},sure:function(e){var t=this,i=this;this.$refs.form.validate(function(e){if(!e)return!1;var a="",r="";"1"===t.form.time?t.form.time1&&t.form.time1.length>0&&(a=t.form.time1[0].getTime()/1e3,r=t.form.time1[1].getTime()/1e3):(a="-1",r="",t.form.time1=[]),"编辑公告"===t.title?Object(n.a)({url:i.public.url+"/gamenotice/update",method:"post",data:{title:t.form.name,content:t.form.desc,validtime_from:a,validtime_to:r,id:t.id}}).then(function(e){i.dialogFormVisible=!1,i.$refs.form.resetFields(),s(i,i.formInline.user,i.currentPage,i.pagesize,i.formInline.time)}).catch(function(e){}):Object(n.a)({url:i.public.url+"/gamenotice/add",method:"post",data:{title:t.form.name,content:t.form.desc,validtime_from:a,validtime_to:r}}).then(function(e){i.dialogFormVisible=!1,i.$refs.form.resetFields(),s(i,i.formInline.user,i.currentPage,i.pagesize,i.formInline.time)}).catch(function(e){})})},delet:function(e){var t=this,i=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({url:i.public.url+"/gamenotice/del",method:"post",data:{id:e.id}}).then(function(e){s(i,i.formInline.user,i.currentPage,i.pagesize,i.formInline.time)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1,s(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.time);var t={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,time:this.formInline.time};this.$store.commit("setnotice",t)},handleCurrentChange:function(e){this.currentPage=1*e,s(this,this.formInline.user,this.currentPage,this.pagesize,this.formInline.time);var t={user:this.formInline.user,currentPage:this.currentPage,pagesize:this.pagesize,time:this.formInline.time};this.$store.commit("setnotice",t)}}},m=(i("O4am"),i("KHd+")),c=Object(m.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container notice"},[i("div",{staticClass:"query"},[i("el-row",[i("el-form",{attrs:{inline:!0,"label-width":"80px"}},[i("el-col",{attrs:{span:3}},[e.gamenoticeadd?i("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("写公告 ")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"主题"}},[i("el-input",{attrs:{placeholder:"主题",clearable:""},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"创建时间"}},[i("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"-","start-placeholde":"开始日期","picker-options":e.pickerOptions,"end-placeholde":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:3}},[e.gamenoticegetlist?i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,background:"",layout:"prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[i("el-table-column",{attrs:{prop:"creator_name",label:"创建人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"主题"}}),e._v(" "),i("el-table-column",{attrs:{prop:"content",label:"公告内容"}}),e._v(" "),i("el-table-column",{attrs:{prop:"validtime",width:"300",label:"有效时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.gamenoticeupdate?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.edit(t.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.gamenoticedel?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.delet(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[50,100,200],"page-size":e.pagesize,background:"",layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"主题","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"有效时间","label-width":e.formLabelWidth,prop:"time"}},[i("el-radio-group",{on:{change:e.time},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}},[i("el-radio",{attrs:{label:"1"}},[e._v("指定时间")]),e._v(" "),i("el-radio",{attrs:{label:"2"}},[e._v("永久有效")])],1)],1),e._v(" "),e.timeshow?i("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth,prop:"time1"}},[i("el-date-picker",{attrs:{"picker-options":e.pickerOptions1,"end-placeholde":"结束日期","range-separator":"-","start-placeholde":"开始日期",type:"datetimerange"},model:{value:e.form.time1,callback:function(t){e.$set(e.form,"time1",t)},expression:"form.time1"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"内容","label-width":e.formLabelWidth,prop:"desc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="notice.vue";t.default=c.exports},O4am:function(e,t,i){"use strict";var a=i("04JN");i.n(a).a}}]);