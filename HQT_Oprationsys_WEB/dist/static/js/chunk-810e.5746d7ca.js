(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-810e"],{"6EUH":function(e,t,i){"use strict";var o=i("FRbB");i.n(o).a},FRbB:function(e,t,i){},hISg:function(e,t,i){"use strict";i.r(t);var o=i("QbLZ"),l=i.n(o),n=i("t3Un"),r=i("L2JU");function a(e){Object(n.a)({url:e.public.url+"/backend/privilege/getPriNameList",method:"get"}).then(function(t){var i=[{id:0,name:"总权限",child:t.data}];e.options=i}).catch(function(e){})}var s={filters:{},data:function(){return{formInline:{user:"",region:"",action:""},currentPage:1,tableData:[],dialogFormVisible:!1,form:{selectedOptions:[],name:"",controller:"",menu:"0",action:"",desc:""},menu:[{value:"0",label:"否"},{value:"1",label:"是"}],formLabelWidth:"120px",title:"",total:1e3,pagesize:20,rules:{selectedOptions:[{type:"array",required:!0,message:"请选父权限id",trigger:"change"}],name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],controller:[{required:!0,message:"请输入控制器名称",trigger:"blur"}],menu:[{required:!0,message:"请选是否导航菜单",trigger:"change"}],action:[{required:!0,message:"请输入方法名称",trigger:"blur"}],desc:[]},options:[],defaultProps:{value:"id",label:"name",children:"child"},id:""}},computed:l()({},Object(r.b)(["privilegeadd","privilegedel","privilegeupdate"])),created:function(){a(this)},methods:{reset:function(e){this.dialogFormVisible=!1,this.$refs.form.resetFields()},edit:function(e){this.title="编辑权限",this.dialogFormVisible=!0;var t=this;Object(n.a)({url:t.public.url+"/backend/privilege/getinfo",method:"post",data:{id:e.id}}).then(function(e){t.form.name=e.data.name,t.form.controller=e.data.controller,t.form.menu=e.data.is_menu,t.form.action=e.data.action,t.form.desc=e.data.depict,t.id=e.data.id;var i=function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if(o.id===t)return o.parentNode}}(function(e){for(var t=e.concat([]),i=t.length,o=0;o<i;o++){var l=t[o];if(l.child&&0!=l.child.length){for(var n=l.child,r=0;r<n.length;r++)l.parentNode?n[r].parentNode=l.parentNode.concat([l.id]):n[r].parentNode=[l.id],t[i+r]=n[r];i=t.length}}return t}(t.options),e.data.id);t.form.selectedOptions=i}).catch(function(e){})},add:function(){this.title="新增权限",this.dialogFormVisible=!0},sure:function(e){var t=this,i=this;this.$refs.form.validate(function(e){if(!e)return!1;"编辑权限"===t.title?Object(n.a)({url:i.public.url+"/backend/privilege/update",method:"post",data:{pid:t.form.selectedOptions[t.form.selectedOptions.length-1],name:t.form.name,controller:t.form.controller,is_menu:t.form.menu,action:t.form.action,sortid:0,depict:t.form.desc,id:t.id}}).then(function(e){i.$message.success(e.message),i.dialogFormVisible=!1,i.$refs.form.resetFields(),a(i)}).catch(function(e){}):Object(n.a)({url:i.public.url+"/backend/privilege/add",method:"post",data:{pid:t.form.selectedOptions[t.form.selectedOptions.length-1],name:t.form.name,controller:t.form.controller,is_menu:t.form.menu,action:t.form.action,sortid:0,depict:t.form.desc}}).then(function(e){i.$message.success(e.message),i.dialogFormVisible=!1,i.$refs.form.resetFields(),a(i)}).catch(function(e){})})},delet:function(e){var t=this,i=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(n.a)({url:i.public.url+"/backend/privilege/del",method:"post",data:{id:e.id}}).then(function(e){a(i)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},c=(i("6EUH"),i("KHd+")),d=Object(c.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"query"},[i("el-row",[i("el-form",{attrs:{inline:!0,"label-width":"80px"}},[i("el-col",{attrs:{span:3}},[e.privilegeadd?i("el-button",{attrs:{type:"info",round:""},on:{click:e.add}},[e._v("新增 + ")]):e._e()],1)],1)],1)],1),e._v(" "),e._m(0),e._v(" "),i("el-tree",{attrs:{data:e.options,"node-key":"id","default-expanded-keys":[0],props:e.defaultProps,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,l=t.data;return i("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"20%"}},[e._v(e._s(o.label))]),e._v(" "),i("span",{staticStyle:{display:"inline-block",width:"20%"}},[e._v(e._s(l.controller))]),e._v(" "),i("span",{staticStyle:{display:"inline-block",width:"20%"}},[e._v(e._s(l.action))]),e._v(" "),i("span",[e.privilegeupdate&&0!=l.id?i("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"mini"},on:{click:function(){return e.edit(l)}}},[e._v("\n          编辑\n        ")]):e._e(),e._v(" "),e.privilegedel&&0!=l.id?i("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"mini"},on:{click:function(){return e.delet(l)}}},[e._v("\n          删除\n        ")]):e._e()],1)])}}])}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"父级","label-width":e.formLabelWidth,prop:"selectedOptions"}},[i("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.options,props:e.defaultProps,filterable:"","change-on-select":""},model:{value:e.form.selectedOptions,callback:function(t){e.$set(e.form,"selectedOptions",t)},expression:"form.selectedOptions"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限名","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"控制器名","label-width":e.formLabelWidth,prop:"controller"}},[i("el-input",{model:{value:e.form.controller,callback:function(t){e.$set(e.form,"controller",t)},expression:"form.controller"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"方法名","label-width":e.formLabelWidth,prop:"action"}},[i("el-input",{model:{value:e.form.action,callback:function(t){e.$set(e.form,"action",t)},expression:"form.action"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否导航菜单","label-width":e.formLabelWidth,prop:"menu"}},[i("el-select",{model:{value:e.form.menu,callback:function(t){e.$set(e.form,"menu",t)},expression:"form.menu"}},e._l(e.menu,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"说明","label-width":e.formLabelWidth,prop:"desc"}},[i("el-input",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"treetitle"},[t("div",[this._v("权限名称")]),this._v(" "),t("div",[this._v("控制器")]),this._v(" "),t("div",[this._v("方法")]),this._v(" "),t("div",[this._v("操作")])])}],!1,null,null,null);d.options.__file="power.vue";t.default=d.exports}}]);