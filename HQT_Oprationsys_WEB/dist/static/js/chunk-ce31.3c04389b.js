(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce31"],{GQeE:function(e,t,n){e.exports={default:n("iq4v"),__esModule:!0}},Mqbl:function(e,t,n){var i=n("JB68"),a=n("w6GO");n("zn7N")("keys",function(){return function(e){return a(i(e))}})},iq4v:function(e,t,n){n("Mqbl"),e.exports=n("WEpk").Object.keys},vofN:function(e,t,n){"use strict";var i=n("zGIT");n.n(i).a},wxna:function(e,t,n){"use strict";n.r(t);var i=n("QbLZ"),a=n.n(i),l=n("GQeE"),r=n.n(l),s=n("t3Un"),o=n("L2JU");function m(e){e.loading=!0;var t="",n="",i="",a="";e.formInline.time1&&e.formInline.time1.length>0&&(t=u(e.formInline.time1[0].getTime()/1e3),i=u(e.formInline.time1[1].getTime()/1e3)),e.formInline.time2&&e.formInline.time2.length>0&&(n=u(e.formInline.time2[0].getTime()/1e3),a=u(e.formInline.time2[1].getTime()/1e3));var l="",r="";""!=e.formInline.id&&e.gamelist.map(function(t){e.formInline.id===t.name&&(l=t.type,r=t.id)}),Object(s.a)({url:e.public.url+"/gameopenaward/getlotterylist",method:"post",data:{pageno:e.currentPage,pagerows:e.pagesize,lottery_id:e.formInline.name,termno:e.formInline.number,is_settle_order:e.formInline.setstatus,is_cancel_order:e.formInline.cancelstatus,is_open_award:e.formInline.kjstatus,term_to_time_from:t,term_to_time_to:i,open_award_time_from:n,open_award_time_to:a,game_id:r,type:l}}).then(function(t){e.loading=!1,t.data&&t.data.list&&t.data.list.length>0?e.tableData=t.data.list:e.tableData=[]}).catch(function(e){})}function u(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var c={data:function(){return{formInline:{setstatus:"",cancelstatus:"",kjstatus:"",number:"",name:"",time1:[],time2:[],id:""},gamelist:[],currentPage:1,tableData:[],gamename:[],status:[{name:"全部",id:""},{name:"待结算",id:"0"},{name:"已结算",id:"1"}],status1:[{name:"全部",id:""},{name:"撤单",id:"2"},{name:"无",id:"4"},{name:"已撤单",id:"3"}],status2:[{name:"全部",id:""},{name:"待开奖",id:"0"},{name:"已开奖",id:"1"}],total:0,pagesize:100,id:"",form:{type:"",time:"",number:""},name:"",termno:"",formLabelWidth:"150px",dialogFormVisible:!1,rules:{type:[{required:!0,message:"请选择处理原因",trigger:"change"}],number:[{required:!0,message:"请输入正确的开奖号码",trigger:"blur"}],time:[{required:!0,message:"请选择官方实际开奖时间",trigger:"change"}]},table_id:"",las_id:"",showtime:!1,shownumber:!1,game_id:"",num:1,loading:!1}},created:function(){!function(e){Object(s.a)({url:e.public.url+"/gameopenaward/getlottery",method:"post",data:{}}).then(function(t){e.gamename=t.data}).catch(function(e){})}(this),function(e){Object(s.a)({url:e.public.url+"/backend/gameopenaward/getlotteryname",method:"post",data:{}}).then(function(t){e.gamelist=t.data}).catch(function(e){})}(this);r()(this.$route.query).length>0?(this.formInline.number=this.$route.query.termno,this.formInline.name=this.$route.query.id,m(this)):this.lottery.length||0==this.lottery.length||(this.currentPage=this.lottery.currentPage,this.num=this.lottery.currentPage,this.pagesize=this.lottery.pagesize,this.formInline.number=this.lottery.number,this.formInline.name=this.lottery.name,this.formInline.time1=this.lottery.time1,this.formInline.time2=this.lottery.time2,this.formInline.setstatus=this.lottery.setstatus,this.formInline.cancelstatus=this.lottery.cancelstatus,this.formInline.kjstatus=this.lottery.kjstatus,m(this))},computed:a()({},Object(o.b)(["gameopenawardgetlist","gameopenawardkillorder","lottery"])),watch:{"form.type":function(e){"1"===e?(this.showtime=!0,this.form.number=""):this.showtime=!1,"2"===e?(this.form.time="",this.shownumber=!0):this.shownumber=!1}},filters:{time:function(e){return"-1"===e?"":e},time1:function(e){return"-1秒"===e?"":e}},methods:{query:function(){this.currentPage=1,this.num=1,m(this);var e={currentPage:this.num,pagesize:this.pagesize,number:this.formInline.number,name:this.formInline.name,time1:this.formInline.time1,time2:this.formInline.time2,setstatus:this.formInline.setstatus,cancelstatus:this.formInline.cancelstatus,kjstatus:this.formInline.kjstatus,id:this.formInline.id};this.$store.commit("setlottery",e)},up:function(){this.num--,this.currentPage=this.num,m(this);var e={currentPage:this.num,pagesize:this.pagesize,number:this.formInline.number,name:this.formInline.name,time1:this.formInline.time1,time2:this.formInline.time2,setstatus:this.formInline.setstatus,cancelstatus:this.formInline.cancelstatus,kjstatus:this.formInline.kjstatus,id:this.formInline.id};this.$store.commit("setlottery",e)},down:function(){this.num++,this.currentPage=this.num,m(this);var e={currentPage:this.num,pagesize:this.pagesize,number:this.formInline.number,name:this.formInline.name,time1:this.formInline.time1,time2:this.formInline.time2,setstatus:this.formInline.setstatus,cancelstatus:this.formInline.cancelstatus,kjstatus:this.formInline.kjstatus,id:this.formInline.id};this.$store.commit("setlottery",e)},reset:function(){this.dialogFormVisible=!1,this.$refs.form.resetFields()},rowclass:function(e){var t=e.row;e.rowIndex;return"需要撤单"===t.is_cancel_order?"should":"己撤单"===t.is_cancel_order?"ready":""},sure:function(){var e=this,t=this;t.$refs.form.validate(function(n){if(!n)return!1;t.$confirm("","二次确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(n){var i="";t.form.time&&(i=u(t.form.time.getTime()/1e3)),Object(s.a)({url:t.public.url+"/gameopenaward/killorder",method:"post",data:{game_id:t.game_id,table_id:e.table_id,termno:e.termno,las_id:e.las_id,reason:e.form.type,openno:e.form.number,open_bonus_time:i}}).then(function(e){t.$message({type:"success",message:e.message}),t.$refs.form.resetFields(),t.dialogFormVisible=!1,m(t)}).catch(function(e){})}).catch(function(e){})})},edit:function(e){var t=this;t.name=e.cname,t.termno=e.termno,t.id=e.id,this.dialogFormVisible=!0,Object(s.a)({url:t.public.url+"/gameopenaward/getinfo",method:"post",data:{id:e.id}}).then(function(e){t.table_id=e.data.table_id,t.las_id=e.data.las_id,t.game_id=e.data.game_id}).catch(function(e){})},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1,m(this);var t={currentPage:this.currentPage,pagesize:this.pagesize,number:this.formInline.number,name:this.formInline.name,time1:this.formInline.time1,time2:this.formInline.time2,setstatus:this.formInline.setstatus,cancelstatus:this.formInline.cancelstatus,kjstatus:this.formInline.kjstatus,id:this.formInline.id};this.$store.commit("setlottery",t)},handleCurrentChange:function(e){this.currentPage=1*e,m(this);var t={currentPage:this.currentPage,pagesize:this.pagesize,number:this.formInline.number,name:this.formInline.name,time1:this.formInline.time1,time2:this.formInline.time2,setstatus:this.formInline.setstatus,cancelstatus:this.formInline.cancelstatus,kjstatus:this.formInline.kjstatus,id:this.formInline.id};this.$store.commit("setlottery",t)}}},f=(n("vofN"),n("KHd+")),d=Object(f.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container mail"},[n("div",{staticClass:"query"},[n("el-row",[n("el-form",{attrs:{inline:!0,"label-width":"70px"}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"彩种"}},[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}},e._l(e.gamename,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"期号"}},[n("el-input",{attrs:{placeholder:"期号",clearable:""},model:{value:e.formInline.number,callback:function(t){e.$set(e.formInline,"number",t)},expression:"formInline.number"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"结算状态"}},[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.setstatus,callback:function(t){e.$set(e.formInline,"setstatus",t)},expression:"formInline.setstatus"}},e._l(e.status,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"撤单状态"}},[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.cancelstatus,callback:function(t){e.$set(e.formInline,"cancelstatus",t)},expression:"formInline.cancelstatus"}},e._l(e.status1,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)],1),e._v(" "),n("el-row",[n("el-form",{attrs:{inline:!0,"label-width":"70px"}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"游戏名称"}},[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}},e._l(e.gamelist,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"开奖状态"}},[n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.formInline.kjstatus,callback:function(t){e.$set(e.formInline,"kjstatus",t)},expression:"formInline.kjstatus"}},e._l(e.status2,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"开奖时间"}},[n("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.formInline.time2,callback:function(t){e.$set(e.formInline,"time2",t)},expression:"formInline.time2"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:2}},[e.gameopenawardgetlist?n("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:e.query}},[e._v("查询")]):e._e()],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"paging"},[n("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",disabled:e.num<=1,loading:e.loading},on:{click:e.up}},[e._v("上一页")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.tableData.length<20,loading:e.loading},on:{click:e.down}},[e._v("下一页"),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.rowclass,border:""}},[n("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"game_name",label:"游戏名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"table_name",label:"桌子"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cname",label:"彩种"}}),e._v(" "),n("el-table-column",{attrs:{prop:"termno",label:"期号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"openno",label:"中奖号码"}}),e._v(" "),n("el-table-column",{attrs:{label:"开奖时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("time")(t.row.open_award_time)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"is_open_award",label:"开奖状态"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_settle_order",label:"结算状态"}}),e._v(" "),n("el-table-column",{attrs:{label:"撤单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.gameopenawardkillorder&&"需要撤单"==t.row.is_cancel_order||"撤单"==t.row.is_cancel_order?n("el-button",{attrs:{type:"danger"},on:{click:function(n){e.edit(t.row)}}},[e._v(e._s(t.row.is_cancel_order))]):n("span",[e._v(e._s(t.row.is_cancel_order))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"撤单花销时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("time1")(t.row.cancel_cost_sec)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"撤单原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cancel_order_cause)+"\n      ")]}}])})],1),e._v(" "),n("div",{staticClass:"paging"},[n("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",disabled:e.num<=1,loading:e.loading},on:{click:e.up}},[e._v("上一页")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.tableData.length<20,loading:e.loading},on:{click:e.down}},[e._v("下一页"),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1),e._v(" "),n("el-dialog",{attrs:{title:"彩票撤单",visible:e.dialogFormVisible,"before-close":e.reset},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"注意","label-width":e.formLabelWidth}},[n("span",{staticClass:"red"},[e._v("异常处理时间限制在1440分钟内")])]),e._v(" "),n("el-form-item",{attrs:{label:"彩种名称","label-width":e.formLabelWidth}},[n("span",[e._v(e._s(e.name))])]),e._v(" "),n("el-form-item",{attrs:{label:"奖期","label-width":e.formLabelWidth}},[n("span",[e._v(e._s(e.termno))])]),e._v(" "),n("el-form-item",{attrs:{label:"处理原因","label-width":e.formLabelWidth,prop:"type"}},[n("el-radio",{attrs:{label:"1"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("提前开奖")]),e._v(" "),n("el-radio",{attrs:{label:"2"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("开奖号码错误")]),e._v(" "),n("el-radio",{attrs:{label:"3"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[e._v("未开奖")])],1),e._v(" "),e.shownumber?n("el-form-item",{attrs:{label:"正确的开奖号码","label-width":e.formLabelWidth,prop:"number"}},[n("el-input",{attrs:{placeholder:"请输入正确的开奖号码",clearable:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1):e._e(),e._v(" "),e.showtime?n("el-form-item",{attrs:{label:"官方实际开奖时间","label-width":e.formLabelWidth,prop:"time"}},[n("el-date-picker",{attrs:{type:"datetime"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.reset(e.form)}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure(e.form)}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="lottery.vue";t.default=d.exports},zGIT:function(e,t,n){},zn7N:function(e,t,n){var i=n("Y7ZC"),a=n("WEpk"),l=n("KUxP");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*l(function(){n(1)}),"Object",r)}}}]);