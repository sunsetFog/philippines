(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e553"],{LlZ3:function(e,t,i){"use strict";i.r(t);var n=i("QbLZ"),r=i.n(n),a=i("t3Un"),s=i("XJYT"),l=i("L2JU");function o(e,t,i,n,r,l,o){var c="",g="";if(t){var h=t.getTime()/1e3;c=m(h)}if(i){var p=i.getTime()/1e3;g=m(p)}h&&p&&h>p?Object(s.Message)({message:"开始时间必须小于结束时间",type:"error"}):(e.loading=!0,Object(a.a)({url:e.public.url+"/backend/gamesinglereport/getlist",method:"post",data:{date_from:c,date_to:g,termno:e.formInline.termno,pageno:n,pagerows:r,game_id:l,game_type:o}}).then(function(t){Object(s.Message)({message:t.message,type:"success"}),e.loading=!1,0===t.data.length?e.tableData=[]:e.tableData=t.data}).catch(function(e){}))}function m(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var c={data:function(){return{formInline:{time:[],starttime:"",endtime:"",id:"",type:0,termno:"",value:""},currentPage:1,tableData:[],gamelist:[],total:0,pagesize:20,num:1,havetime:!1,havetime1:!1,loading:!1}},created:function(){var e=Date.parse(new Date)-36e5,t=Date.parse(new Date);this.formInline.starttime=new Date(e),this.formInline.endtime=new Date(t),function(e){Object(a.a)({url:e.public.url+"/backend/gamename/getgamenamelist",method:"post",data:{}}).then(function(t){e.gamelist=t.data}).catch(function(e){})}(this);this.gamesinglereport.length||0==this.gamesinglereport.length||(this.formInline.starttime=this.gamesinglereport.starttime,this.currentPage=this.gamesinglereport.currentPage,this.pagesize=this.gamesinglereport.pagesize,this.formInline.endtime=this.gamesinglereport.endtime,this.formInline.id=this.gamesinglereport.id,this.formInline.type=this.gamesinglereport.type,o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type))},computed:r()({},Object(l.b)(["gamesinglereportgetlist","gamesinglereport","gamesinglereportexportlist"])),watch:{},methods:{up:function(){this.num--,this.currentPage=this.num,o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type);var e={starttime:this.formInline.starttime,currentPage:this.currentPage,pagesize:this.pagesize,endtime:this.formInline.endtime,id:this.formInline.id,type:this.formInline.type};this.$store.commit("setgamesinglereport",e)},down:function(){this.num++,this.currentPage=this.num,o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type);var e={starttime:this.formInline.starttime,currentPage:this.currentPage,pagesize:this.pagesize,endtime:this.formInline.endtime,id:this.formInline.id,type:this.formInline.type};this.$store.commit("setgamesinglereport",e)},excel:function(){var e=this,t="",i="";if(e.formInline.starttime){var n=e.formInline.starttime.getTime()/1e3;t=m(n)}if(e.formInline.endtime){var r=e.formInline.endtime.getTime()/1e3;i=m(r+86400-1)}n&&r&&n>r?Object(s.Message)({message:"开始时间必须小于结束时间",type:"error"}):Object(a.a)({url:e.public.url+"/backend/gamesinglereport/exportlist",method:"post",data:{date_from:t,date_to:i,termno:e.formInline.termno,pageno:e.currentPage,pagerows:e.pagesize,game_id:e.formInline.id,game_type:e.formInline.type}}).then(function(t){window.location.href=e.public.url+t.data}).catch(function(e){})},selectType:function(e){this.formInline.type=Number(this.gamelist[e].type),this.formInline.id=Number(this.gamelist[e].id)},query:function(){o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type);var e={starttime:this.formInline.starttime,currentPage:this.currentPage,pagesize:this.pagesize,endtime:this.formInline.endtime,id:this.formInline.id,type:this.formInline.type};this.$store.commit("setgamesinglereport",e)},cell:function(e){var t=e.row,i=(e.column,e.rowIndex,e.columnIndex);return 3===i&&1*t.flow<0?"red":4===i&&1*t.user_lose_money<0?"red":5===i&&1*t.user_win_money<0?"red":6===i&&1*t.tax<0?"red":7===i&&1*t.revenue<0?"red":void 0},sort:function(e){e.column;var t=e.prop,i=e.order;if(this.tableData.length>0){var n=this.tableData.shift();switch(i){case"ascending":this.tableData.sort(function(e,i){return 1*i[t]-1*e[t]});break;case"descending":this.tableData.sort(function(e,i){return 1*e[t]-1*i[t]})}this.tableData.unshift(n)}},handleSizeChange:function(e){this.pagesize=e;this.currentPage=1,o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type);var t={starttime:this.formInline.starttime,currentPage:this.currentPage,pagesize:this.pagesize,endtime:this.formInline.endtime,id:this.formInline.id,type:this.formInline.type};this.$store.commit("setgamesinglereport",t)},handleCurrentChange:function(e){this.currentPage=1*e;o(this,this.formInline.starttime,this.formInline.endtime,this.currentPage,this.pagesize,this.formInline.id,this.formInline.type);var t={starttime:this.formInline.starttime,currentPage:this.currentPage,pagesize:this.pagesize,endtime:this.formInline.endtime,id:this.formInline.id,type:this.formInline.type};this.$store.commit("setgamesinglereport",t)}},filters:{}},g=(i("kG0U"),i("KHd+")),h=Object(g.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"query"},[i("el-row",[i("el-form",{attrs:{inline:!0,"label-width":"80px"}},[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"游戏名称"}},[i("el-select",{attrs:{filterable:"",clearable:""},on:{change:e.selectType},model:{value:e.formInline.value,callback:function(t){e.$set(e.formInline,"value",t)},expression:"formInline.value"}},e._l(e.gamelist,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:t}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"期号"}},[i("el-input",{attrs:{clearable:""},model:{value:e.formInline.termno,callback:function(t){e.$set(e.formInline,"termno",t)},expression:"formInline.termno"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"开始日期"}},[i("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期"},model:{value:e.formInline.starttime,callback:function(t){e.$set(e.formInline,"starttime",t)},expression:"formInline.starttime"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"结束日期"}},[i("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期"},model:{value:e.formInline.endtime,callback:function(t){e.$set(e.formInline,"endtime",t)},expression:"formInline.endtime"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:2}},[e.gamesinglereportgetlist?i("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:e.query}},[e._v("查询")]):e._e()],1),e._v(" "),i("el-col",{attrs:{span:2}},[e.gamesinglereportexportlist?i("el-button",{attrs:{type:"primary"},on:{click:e.excel}},[e._v("导出excel")]):e._e()],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",disabled:e.num<=1,loading:e.loading},on:{click:e.up}},[e._v("上一页")]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.tableData.length<20,loading:e.loading},on:{click:e.down}},[e._v("下一页"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-class-name":e.cell,border:""},on:{"sort-change":e.sort}},[i("el-table-column",{attrs:{prop:"open_award_time",label:"结算时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"game_name",label:"游戏名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"termno",sortable:"custom","sort-orders":["ascending","descending"],label:"期号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"flow",label:"流水"}}),e._v(" "),i("el-table-column",{attrs:{prop:"user_lose_money",label:"玩家输额"}}),e._v(" "),i("el-table-column",{attrs:{prop:"user_win_money",label:"玩家赢额"}}),e._v(" "),i("el-table-column",{attrs:{prop:"tax",label:"代理收益"}})],1),e._v(" "),i("div",{staticClass:"pagingbox"},[i("div",{staticClass:"paging"},[i("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",disabled:e.num<=1,loading:e.loading},on:{click:e.up}},[e._v("上一页")]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.tableData.length<20,loading:e.loading},on:{click:e.down}},[e._v("下一页"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)])],1)},[],!1,null,null,null);h.options.__file="gamesinglereport.vue";t.default=h.exports},fthp:function(e,t,i){},kG0U:function(e,t,i){"use strict";var n=i("fthp");i.n(n).a}}]);