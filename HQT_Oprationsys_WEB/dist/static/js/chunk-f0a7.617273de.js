(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f0a7"],{LMt5:function(e,t,a){"use strict";var n=a("RFU9");a.n(n).a},RFU9:function(e,t,a){},WjZu:function(e,t,a){"use strict";a.r(t);var n=a("QbLZ"),s=a.n(n),c=a("t3Un"),l=a("L2JU"),i=a("X4fA");function o(e){Object(c.a)({url:e.public.url+"/backend/paychgmoney/getchargelist",method:"post",data:{pageno:e.currentPage,pagerows:e.pagesize}}).then(function(t){e.tableData1=t.data.list,e.total=1*t.data.rownum,e.currentPage=1*t.data.pageno}).catch(function(e){})}function r(e){var t="",a="";e.time&&e.time.length>0&&(t=u(e.time[0].getTime()/1e3),a=u(e.time[1].getTime()/1e3)),Object(c.a)({url:e.public.url+"/backend/paychgmoney/getchargeup",method:"post",data:{date_from:t,date_to:a,pageno:e.currentPage1,pagerows:e.pagesize1}}).then(function(t){e.tableData=t.data.list,e.total1=1*t.data.rownum,e.currentPage1=1*t.data.pageno}).catch(function(e){})}function u(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var p={name:"accountchange",data:function(){return{showtable:!1,dialogFormVisible1:!1,accountnumber:"",type:"",uploadperson:"",uploadtime:"",status:"",operation:"",total:0,total1:0,pagesize:50,pagesize1:50,id:"",time:[],currentPage:1,currentPage1:1,tableData:[],tableData1:[],showfile:!1,activeName2:"first",fileList:[],changetype:"12",multipleSelection:[],options1:[{changetype:"12",label:"【+】活动奖金"},{changetype:"16",label:"【+】手续费"},{changetype:"13",label:"【+】理赔"},{changetype:"14",label:"【+】其它"},{changetype:"50",label:"【-】人工扣减"}]}},created:function(){var e=new Date((new Date).toLocaleDateString()).getTime()-6048e5,t=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;this.time=[new Date(e),new Date(t)]},computed:s()({token:function(){return{"X-Token":Object(i.a)()}},action:function(){return this.public.url+"/paychgmoney/batchcharge"},datatype:function(){return{paytype:this.changetype}}},Object(l.b)(["paychgmoneygetchargeup","paychgmoneybatchcharge"])),filters:{type:function(e){return"16"===e?"手续费":"13"===e?"理赔":"12"===e?"活动奖金":"14"===e?"其它":"50"===e?"人工提现":void 0},status:function(e){return"0"===e?"待确认":"1"===e?"已提交":void 0}},methods:{exceed:function(e){e.length>1&&this.$message({message:"一次只能上传一个文件",type:"warning"})},cell:function(e){var t=e.row;e.column,e.rowIndex;if(5===e.columnIndex&&1*t.money<0)return"red"},submitupload:function(){this.$refs.upload.submit()},before:function(e){if(""===this.changetype)return this.$message({message:"请选择账变类型",type:"warning"}),!1;this.currentPage=1;var t=e.name.substring(e.name.lastIndexOf(".")+1),a="xls"===t,n="xlsx"===t,s=e.size/1024/1024<5;return a||n||this.$message({message:"上传文件只能是xls、xlsx格式",type:"warning"}),s||this.$message({message:"上传文件大小不能超过5MB!",type:"warning"}),a||n&&s},success:function(e,t,a){this.$message({message:e.message,type:"success"}),this.fileList=[],this.showtable=!0,this.tableData1=e.data.list,this.total=1*e.data.rownum,this.currentPage=1*e.data.pageno},error:function(e,t,a){this.$message({message:e.message,type:"error"}),this.fileList=[]},excel:function(){window.open("../../../static/批量充值.xls")},excelup:function(e){var t=this;Object(c.a)({url:t.public.url+"/backend/paychgmoney/dwnchgupfile",method:"post",data:{mid:e.id}}).then(function(e){t.$message({type:"success",message:e.message}),window.location.href=t.public.url+e.data.downurl}).catch(function(e){})},tableclassname:function(e){var t=e.row;e.rowIndex;return"1"===t.is_errdata?"red":""},handleSelectionChange:function(e){this.multipleSelection=e},handleClick:function(e,t){"second"===this.activeName2&&r(this)},allpass:function(){var e=this,t=this;Object(c.a)({url:t.public.url+"/backend/paychgmoney/submitcharge",method:"post",data:{}}).then(function(a){e.$message({type:"success",message:a.message}),o(t)}).catch(function(e){})},checkdel:function(){var e=this;if(this.multipleSelection.length>0){var t=this,a=this.multipleSelection.map(function(e){return e.id}),n=this.multipleSelection.map(function(e){return e.tbtype}),s=a.join(","),l=n.join(",");this.$confirm("此操作将删除这些申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.a)({url:t.public.url+"/backend/paychgmoney/delcharge",method:"post",data:{ids:s,tbtype:l}}).then(function(a){e.$message({type:"success",message:a.message}),o(t)}).catch(function(e){})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message({type:"info",message:"请选择文件"})},handleCurrentChange:function(e){this.currentPage=1*e,o(this)},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1,o(this)},handleCurrentChange1:function(e){this.currentPage1=1*e,r(this)},handleSizeChange1:function(e){this.pagesize1=e,this.currentPage1=1,r(this)},query:function(){r(this)},del:function(e){var t=this,a=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(c.a)({url:a.public.url+"/backend/paychgmoney/delchargeup",method:"post",data:{mid:e.id}}).then(function(e){t.$message({type:"success",message:e.message}),r(a)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delet:function(e){var t=this,a=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(c.a)({url:a.public.url+"/backend/paychgmoney/delcharge",method:"post",data:{ids:e.id,tbtype:e.tbtype}}).then(function(e){t.$message({type:"success",message:e.message}),o(a)}).catch(function(e){})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},g=(a("LMt5"),a("KHd+")),h=Object(g.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batchimport accountchange"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("div",{staticClass:"batchdown"},[e.paychgmoneybatchcharge?a("el-tab-pane",{staticStyle:{height:"auto","padding-bottom":"53px"},attrs:{label:"批量导入",name:"first"}},[a("span",{staticStyle:{float:"left","margin-top":"10px"}},[e._v("账变类型: ")]),e._v(" "),a("el-select",{staticClass:"channel",staticStyle:{float:"left","margin-right":"10px"},attrs:{filterable:"",placeholder:"请选择账变类型"},model:{value:e.changetype,callback:function(t){e.changetype=t},expression:"changetype"}},e._l(e.options1,function(e){return a("el-option",{key:e.changetype,attrs:{label:e.label,value:e.changetype}})})),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.action,headers:e.token,data:e.datatype,"on-exceed":e.exceed,"on-success":e.success,"on-error":e.error,"before-upload":e.before,"auto-upload":!1,multiple:"",limit:1,"file-list":e.fileList}},[a("span",[e._v("上传文件: ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls/xlsx文件,且文件大小不超过5m")])],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitupload}},[e._v("点击确认上传")]),e._v(" "),a("div",{staticClass:"downtemp"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:e.excel}},[e._v("下载模板")])]),e._v(" "),e.showtable?a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData1,"row-class-name":e.tableclassname,"cell-class-name":e.cell,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单编号",prop:"order_no"}}),e._v(" "),a("el-table-column",{attrs:{label:"玩家渠道",prop:"agent_org_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"玩家账号",prop:"user_account"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("type")(t.row.type))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值/扣减 （金额）",prop:"money"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传人",prop:"apply_account"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.delet(t.row)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),e.showtable?a("el-row",{staticClass:"buttoncenter"},[a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(t){e.allpass()}}},[e._v("提交审核")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkdel()}}},[e._v("选择删除")])],1):e._e(),e._v(" "),e.showtable?a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,"page-sizes":[50,100,200],total:e.total,background:"",layout:"sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]):e._e()],1):e._e()],1),e._v(" "),e.paychgmoneygetchargeup?a("el-tab-pane",{attrs:{label:"导入历史",name:"second"}},[a("div",{staticClass:"batchdown"},[a("div",{staticClass:"timesearch"},[a("span",[e._v("上传时间:")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-button",{staticClass:"serchbtn",attrs:{type:"primary"},on:{click:e.query}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"include"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{width:"80",type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("type")(t.row.mchg_type))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传人",prop:"uploader_account"}}),e._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"upload_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("status")(t.row.status))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",prop:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.excelup(t.row)}}},[e._v("导出")]),e._v(" "),"0"===t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagingbox"},[a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":e.pagesize1,"page-sizes":[50,100,200],total:e.total1,background:"",layout:"sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.currentPage1=t},"current-change":e.handleCurrentChange1,"size-change":e.handleSizeChange1}})],1)])])]):e._e()],1)],1)},[],!1,null,null,null);h.options.__file="accountchange.vue";t.default=h.exports}}]);