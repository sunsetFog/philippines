var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.RoomModel=e,__reflect(e.prototype,"base.RoomModel")}(base||(base={}));var fishjoy;!function(t){var e=function(){function t(t,e){this._mId=0,this._mIsDead=!0,this._mIsOver=!0,this._mParent=null,this.x=0,this.y=0,this.mSpeed=1,this.mAddSpeed=0,this.mSpeedX=1,this.mSpeedY=1,this.mRotation=0,this.mRadian=0,this._mServerId=-1,this._mIsDestroy=!1,this._mCurrTime=0,this._mIt=0,this._mId=t,this._mParent=e}return t.prototype.init=function(){this._mRender=new egret.DisplayObjectContainer,this._mRender.touchEnabled=!1,this._mRender.touchChildren=!1},t.prototype.setParent=function(t){this._mParent=t},t.prototype.refresh=function(t){this._mId=t,this._mIsDead=!1,this._mIsOver=!1},t.prototype.setTime=function(t){this._mCurrTime=t},t.prototype.it=function(){return this._mIt},t.prototype.updateAddByTime=function(t){for(var e=Math.floor(t/16),i=0;e>i;i++)this.update(this._mCurrTime+16)},t.prototype.update=function(t){this._mIt=t-this._mCurrTime,this._mCurrTime=t},t.prototype.clean=function(){this.removeRender(),this._mRender.rotation=0,this._mRender.scaleX=1,this._mRender.scaleY=1,this._mRender.removeChildren(),this._mId=0,this._mIsDead=!0,this._mIsOver=!0,this.mRotation=0,this.mRadian=0,this.mSpeedX=1,this.mSpeedY=1,this._mServerId=-1,this._mCurrTime=0,this._mIt=0},t.prototype.setServerId=function(t){this._mServerId=t},t.prototype.getServerId=function(){return this._mServerId},Object.defineProperty(t.prototype,"mId",{get:function(){return this._mId},set:function(t){this._mId=t},enumerable:!0,configurable:!0}),t.prototype.isDead=function(){return this._mIsDead},t.prototype.isOver=function(){return this._mIsOver},t.prototype.setDead=function(){this._mIsDead=!0},t.prototype.setOver=function(){this._mIsOver=!0},Object.defineProperty(t.prototype,"isLive",{get:function(){return!this._mIsDead&&!this._mIsOver},enumerable:!0,configurable:!0}),t.prototype.removeRender=function(){R.removeFromParent(this._mRender)},t.prototype.destroy=function(){this.clean(),this._mIsDestroy=!0,this._mParent=void 0,this._mRender=void 0},t}();t.FishJoyBase=e,__reflect(e.prototype,"fishjoy.FishJoyBase")}(fishjoy||(fishjoy={}));var base;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._mArmatureList={},i}return __extends(e,t),e.prototype.initDBRes=function(t){App.DragonBonesFactory.initArmatureFileByName(t)},e.prototype.init=function(){},e.prototype.createArmature=function(t,e,i,o){void 0===o&&(o=1),this.cleanAllArmature();var n=this._mArmatureList[e];return n||(n=new DragonBonesArmatureContainer,n.register(App.DragonBonesFactory.makeArmature(t,e,o),i),this._mArmatureList[e]=n),n.parent||this.addChild(n),n},e.prototype.cleanAllArmature=function(){var t=this._mArmatureList;for(var e in t){var i=t[e];i.stop(),i.removeFromParent()}},e.prototype.clean=function(){this.cleanAllArmature(),R.removeFromParent(this)},e.prototype.destroy=function(){var t=this._mArmatureList;for(var e in t){var i=t[e];i&&i.destroy(),t[e]=void 0}this.removeChildren(),R.removeFromParent(this),this._mArmatureList=void 0},e}(egret.DisplayObjectContainer);t.BaseGameObject=e,__reflect(e.prototype,"base.BaseGameObject")}(base||(base={}));var base;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},i.prototype.onUserMoneyChange=function(t){egret.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},i.prototype.onErrorCallBack=function(t){egret.log("------------------------ 错误返回 子类继承此方法 -------------------------")},i.prototype.onGameFramePause=function(){egret.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},i.prototype.GameFrameResume=function(){egret.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},i.prototype.onExitGame=function(){egret.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},i.prototype.onGameConstEvent=function(t){t==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},i.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},i.prototype.enterGameByDeskId=function(t,e){var i={deskId:t};if(e)for(var o in e)i[o]=e[o];this.enterGameByFromDesk(i)},i.prototype.enterGameByFromDesk=function(t){GameModuleMgr.i.enterGameFromDesk(t)},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},Object.defineProperty(i.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskType=function(t){GameModuleMgr.i.setCurrDeskType(t)},i.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.isInDesk&&App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge)},i}(BaseController);t.DeskController=e,__reflect(e.prototype,"base.DeskController")}(base||(base={}));var base;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this)},i.prototype.onInit=function(){e.prototype.onInit.call(this)},i.prototype.inits=function(){e.prototype.inits.call(this)},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(t.BaseConst.Goto_Leave_Desk,this.onLeaveDesk,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},i.prototype.onUserMoneyChange=function(t){egret.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},i.prototype.onErrorCallBack=function(t){egret.log("------------------------ 错误返回 子类继承此方法 -------------------------")},i.prototype.onGameFramePause=function(){egret.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},i.prototype.GameFrameResume=function(){egret.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},i.prototype.onGameConstEvent=function(t){t==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},i.prototype.onExitGame=function(){egret.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},i.prototype.onLeaveDesk=function(){egret.log("------------------------ 离开桌子 子类继承此方法 -------------------------")},i.prototype.goBack2Lobby=function(){App.SceneManager.runScene(SceneConsts.Lobby),GameModuleMgr.i.exitRoom()},i.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},i.prototype.goBack2Desk=function(){GameModuleMgr.i.backDeskScene()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},Object.defineProperty(i.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskType=function(t){GameModuleMgr.i.setCurrDeskType(t)},i.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge)},i}(BaseController);t.GameController=e,__reflect(e.prototype,"base.GameController")}(base||(base={}));var base;!function(t){var e=function(){function t(t){this._controller=t}return t.prototype.onCreate=function(){},t.prototype.onInit=function(){},t.prototype.inits=function(){},t.prototype.onReconstruction=function(){},t.prototype.registers=function(){},t.prototype.addListeners=function(){},t.prototype.removeListeners=function(){},t.prototype.getController=function(){return this._controller},Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),t.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},t.prototype.destroy=function(){this._controller=void 0},t.prototype.registerFunc=function(t,e,i){this._controller.registerFunc(t,e,i)},t.prototype.applyFunc=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this._controller.applyFunc.apply(this._controller,arguments)},t.prototype.applyControllerFunc=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return this._controller.applyControllerFunc.apply(this._controller,arguments)},t}();t.GameSeparateCtrl=e,__reflect(e.prototype,"base.GameSeparateCtrl")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},e.prototype.enterGameBySceneType=function(t,e){var i={sceneType:t};if(e)for(var o in e)i[o]=e[o];this.goEnterGame(i)},e.prototype.registers=function(){t.prototype.registers.call(this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},e.prototype.addListeners=function(){t.prototype.addListeners.call(this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},e.prototype.onUserMoneyChange=function(t){egret.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},e.prototype.onErrorCallBack=function(t){egret.log("------------------------ 错误返回 子类继承此方法 -------------------------")},e.prototype.onGameFramePause=function(){egret.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},e.prototype.GameFrameResume=function(){egret.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},e.prototype.goEnterGame=function(t){GameModuleMgr.i.enterGameFromRoom(t)},Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),e.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge)},e}(BaseController);t.RoomController=e,__reflect(e.prototype,"base.RoomController")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.DeskModel=e,__reflect(e.prototype,"base.DeskModel")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.GameModel=e,__reflect(e.prototype,"base.GameModel")}(base||(base={}));var ActionExpand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.runParabola=function(t,e,i,o,n,s){this._mPoint0=t,this._mPoint1=e,this._mPoint2=i,egret.Tween.get(this).to({parabola:1},o).wait(80).call(function(){this.clean(),n&&n.call(s)})},Object.defineProperty(e.prototype,"parabola",{get:function(){return 0},set:function(t){var e=this._mPoint0,i=this._mPoint1,o=this._mPoint2;this.x=(1-t)*(1-t)*e.x+2*t*(1-t)*i.x+t*t*o.x,this.y=(1-t)*(1-t)*e.y+2*t*(1-t)*i.y+t*t*o.y},enumerable:!0,configurable:!0}),e.prototype.clean=function(){egret.log("回收"),this._mPoint0&&egret.Point.release(this._mPoint0),this._mPoint1&&egret.Point.release(this._mPoint1),this._mPoint2&&egret.Point.release(this._mPoint2),this._mPoint0=void 0,this._mPoint1=void 0,this._mPoint2=void 0},e.prototype.destroy=function(){this.clean()},e}(egret.DisplayObjectContainer);__reflect(ActionExpand.prototype,"ActionExpand");var base;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onLeaveGame=function(e){var i=this.player;i.getUserId()==e.uid&&i.setMoney(e.balance),this.applyFunc(t.BaseConst.Goto_Leave_Game,e),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},i.prototype.sendLeaveGame=function(){this.send(t.ProxyKeyConst.CsWorldLeaveSceneReqType,{}),App.EasyLoading.showOnTimeOut()},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),i}(BaseProxy);t.DeskProxy=e,__reflect(e.prototype,"base.DeskProxy")}(base||(base={}));var base;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onLeaveGame=function(e){var i=this.player;i.getUserId()==e.uid&&i.setMoney(e.balance),this.applyFunc(t.BaseConst.Goto_Leave_Game,e),App.EasyLoading.hideLoading()},i.prototype.onLeaveDesk=function(){this.applyFunc(t.BaseConst.Goto_Leave_Desk),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.addListener(t.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this)},i.prototype.sendBackLobby=function(){this.send(t.ProxyKeyConst.CsWorldLeaveSceneReqType,{})},i.prototype.sendLeaveGame=function(){App.EasyLoading.showOnTimeOut(),this.send(t.ProxyKeyConst.CsWorldLeaveSceneReqType,{})},i.prototype.sendLeaveDesk=function(e){App.EasyLoading.showOnTimeOut(),this.send(t.ProxyKeyConst.CsWorldLeaveTableReqType,{table_id:e})},i.prototype.send=function(t,i){var o=GameModuleMgr.i.mIsGameLineOut;return o?void egret.warn("游戏正在重连中..."):void e.prototype.send.call(this,t,i)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),i}(BaseProxy);t.GameProxy=e,__reflect(e.prototype,"base.GameProxy")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseProxy);t.RoomProxy=e,__reflect(e.prototype,"base.RoomProxy")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return s.skinName="resource/games/"+o+"/skins/"+n+".exml",s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=120),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Game))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.DeskView=e,__reflect(e.prototype,"base.DeskView")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return o&&n&&(s.skinName="resource/games/"+o+"/skins/"+n+".exml"),s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=120),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Game))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.GameView=e,__reflect(e.prototype,"base.GameView")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return s.skinName="resource/games/"+o+"/skins/"+n+".exml",s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=120),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Game))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.RoomView=e,__reflect(e.prototype,"base.RoomView")}(base||(base={}));var ddz;!function(t){var e=function(){function e(){this._mMatchTimes=0}return e.prototype.checkValidity=function(t){return!1},e.prototype.match=function(t,e){return this._mMapMain?void 0:(this._mMapMain=t,this._mMapMinor=e,!1)},e.prototype.matchMore=function(t,e){this._mMapMain&&(this._mMapMain=this._mMapMain.concat(t),this._mMapMinor=this._mMapMinor?this._mMapMinor.concat(e):void 0)},e.prototype.getMatch=function(){return this._mMatchList?this._mMatchList:void 0},e.prototype.getMatchMinor=function(){return this._mMatchListMinor?this._mMatchListMinor:void 0},e.prototype.removeMinor=function(){},e.prototype.removeKing=function(e){for(var i=e.length-1;i>=0;i--){var o=e[i][0];o.val>t.PokerValue.POKER_VALUE_TWO&&e.splice(i,1)}},e.prototype.getMatchShunZi=function(t){var e=this._mMapMain,i=[],o=t.length;if(e.length<o)return null;for(var n=e.length-1,s=o-1;n>=s;n--)for(var r=void 0,a=void 0,h=[],l=n;l>0;l--){if(r=e[l],a=e[l-1],a[0].val!=r[0].val+1){n=Math.min(n,l);break}if(h=h.concat(r),h.length==s*r.length&&(h=h.concat(a)),h.length==o*r.length){i.push(h);break}}return i},e.prototype.clean=function(){this._mMapMain=void 0,this._mMapMinor=void 0,this._mMatchList=void 0,this._mMatchListMinor=void 0},e.prototype.destroy=function(){this.clean()},e}();t.CombBase=e,__reflect(e.prototype,"ddz.CombBase")}(ddz||(ddz={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this,"LhdChartSkin")||this;return t.record=[],t.chartRecord=[],t}return __extends(i,e),i.prototype.openChart=function(){egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut)},i.prototype.closeChart=function(){egret.Tween.get(this.GroupChart).to({right:-280},200,egret.Ease.sineInOut)},i.prototype.renderApproach=function(e){this.record=JSON.parse(JSON.stringify(e)),this.record.length>19&&this.record.splice(0,this.record.length-19),this.GroupApproach.removeChildren();var i=3,o=-1;this.record.forEach(function(e){var n=new eui.Image;n.x=i,n.y=o,n.source=e==t.TypeConst.LOONG?"lhd_ui_long_png":e==t.TypeConst.TIGER?"lhd_ui_hu_png":"lhd_ui_she_png",i+=40,this.GroupApproach.addChild(n)}.bind(this))},i.prototype.renderChart=function(t){this.chartRecord=JSON.parse(JSON.stringify(t)),this.chartRecord.length>50&&this.chartRecord.splice(0,50),this.ChartBead.renderBead(this.chartRecord,"lhd"),this.ChartOther.renderOtherChart(this.chartRecord,"lhd")},i.prototype.addEvent=function(){this.BtnOpenChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openChart,this),this.BtnCloseChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this)},i.prototype.removeEvent=function(){this.BtnOpenChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openChart,this),this.BtnCloseChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.record=void 0,this.chartRecord=void 0},i}(BaseEuiComponent);t.ChartView=e,__reflect(e.prototype,"lhd.ChartView")}(lhd||(lhd={}));var GameUpdateEvent=function(){function t(){}return t.Update_Loading_Event="Update_Loading_Event",t.Update_Main_Version="Update_Main_Version",t.Update_Game_Module_Progress="Update_Game_Module_Progress",t.Update_Game_Module_Version="Update_Game_Module_Version",t.Update_Game_Module_Complete="Update_Game_Module_Complete",t.Update_Game_Public_Complete="Update_Game_Public_Complete",t}();__reflect(GameUpdateEvent.prototype,"GameUpdateEvent");var SceneConsts;!function(t){t[t.Loading=999990]="Loading",t[t.Login=999991]="Login",t[t.Lobby=999992]="Lobby",t[t.Room=999993]="Room",t[t.Game=999994]="Game",t[t.Desk=999995]="Desk"}(SceneConsts||(SceneConsts={}));var baiJiaLe;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature.destroy(),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"baiJiaLe.EffectBones")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.TableListReq=20100,t}();t.DeskConst=e,__reflect(e.prototype,"baiJiaLe.DeskConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.Desk_ListInfo="10225",t.Desk_ListInfo_Back="10226",t}();t.DeskProxyKeyConst=e,__reflect(e.prototype,"baiJiaLe.DeskProxyKeyConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._baijialePopupView=null,Log.trace("DeskController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.BaiJiaLePoup)},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._view=new t.DeskView(this),this._baijialePopupView=new t.BaiJiaLePopupView(this,LayerManager.UI_Tips)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.BaiJiaLePoup,this._baijialePopupView),this.registerFunc("onClickBackLobby",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this),this.registerFunc("onClicHelpBtn",this.openHelp,this),this.registerFunc(t.DeskConst.TableListReq,this.tableListReq,this)},i.prototype.tableListReq=function(t){this._proxy.tableListReq(t)},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.onEnterGame=function(t,e){this.enterGameByDeskId(t,{tableType:e})},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.openHelp=function(){this._baijialePopupView.BaiJiaLeHelp.initComponent(),this._baijialePopupView.BaiJiaLeHelp.showPopup()},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._baijialePopupView.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0,this._baijialePopupView=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"baiJiaLe.DeskController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.roleName="",i.roomListInfo=[],i}return __extends(e,t),e.currTableType=1,e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"baiJiaLe.DeskModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.tableListReq=function(e){var i={bookmark:e.bookmark};this.send(t.DeskProxyKeyConst.Desk_ListInfo,i),App.EasyLoading.showLoading()},i.prototype.onTableListAck=function(t){Log.trace("桌子列表信息",t),App.MessageCenter.dispatch("onTableListAck",t),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"baiJiaLe.DeskProxy")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeDeskSkin")||this;return i.toggleBtns=[],i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);var i=new eui.VerticalLayout;this.deskList.layout=i,this.deskScroller.viewport=this.deskList,this.deskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.deskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.tab_classicBtn.inSelected.source="common_ui_xzjdd_png",this.tab_classicBtn.unSelected.source="common_ui_xzjdx_png",this.toggleBtns.push(this.tab_classicBtn),this.toggleBtns.push(this.tab_lotteryBtn),this.tab_classicBtn.selected=1==t.DeskModel.currTableType?!0:!1,this.tab_lotteryBtn.selected=!this.tab_classicBtn.selected,this.deskList.itemRenderer=t.BaiJiaLeDeskItem,this.tempCollection=new eui.ArrayCollection,this.initBroadcast(this)},i.prototype.open=function(){e.prototype.open.call(this);var i={bookmark:t.DeskModel.currTableType};this.applyFunc(t.DeskConst.TableListReq,i)},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackLobby"),t.DeskModel.currTableType=1},i.prototype.onEnterGame=function(e){var i=this.deskList.selectedIndex,o=this.deskList.getElementAt(i);t.DeskModel.currTableType=this.tab_classicBtn.selected?1:2,this.applyFunc("onEnterGame",o.tableId,this.tab_classicBtn.selected?1:2)},i.prototype.createList=function(t){Log.trace("createList",t),this.tempCollection.refresh();
var e=t,i=this.initListData(e);this.tempCollection.replaceAll(i),this.deskList.dataProvider=this.tempCollection,this.tempCollection.refresh();for(var o=function(t){var e=n.tempCollection.getItemAt(t).gametime;e>=0&&App.TimerManager.doTimer(1e3,e,function(){this.tempCollection.getItemAt(t).gametime>0&&(this.tempCollection.getItemAt(t).gametime--,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(t)))}.bind(n),n)},n=this,s=0;s<t.bookmark.length;s++)o(s)},i.prototype.initListData=function(t){if(!(t.bookmark.length<=0)){for(var e=[],i=0;i<t.bookmark.length;i++)e[i]={gamestatus:t.bookmark[i].gamestatus,gametime:t.bookmark[i].gametime,tablename:t.bookmark[i].tablename,termno:t.bookmark[i].termno,limitmoney:t.bookmark[i].limitmoney,winplace:t.bookmark[i].winPlaces,tableid:t.tableinfo[i].tableid,tabletype:t.tableinfo[i].tabletype,tableinfo:t.tableinfo[i]};return e}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.addListener("onTableListAck",this.createList,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.removeListener("onTableListAck",this.createList,this)},i.prototype.onClickHelp=function(){Log.trace("打开帮助"),this.applyFunc("onClicHelpBtn")},i.prototype.toggleChangeHandler=function(e){for(var i=0;i<this.toggleBtns.length;i++){var o=this.toggleBtns[i];o.selected=o==e.target}var n={bookmark:this.tab_classicBtn.selected?1:2};App.TimerManager.removeAll(this),this.applyFunc(t.DeskConst.TableListReq,n)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.toggleBtns=void 0,this.tempCollection&&(this.tempCollection.removeAll(),this.tempCollection=null),App.TimerManager.removeAll(this),this.deskList.removeChildren()},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"baiJiaLe.DeskView")}(baiJiaLe||(baiJiaLe={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"brnn.EffectBones")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.roomPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.create=function(){var e=t.roomPool.pop();return e||(e=new i),e.initup(),e},t.prototype.releaseCoin=function(e){return egret.is(e,"BrnnRoom")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.roomPool.unshift(e)):void egret.warn(e,"is not BrnnRoom")},t.prototype.clear=function(){for(;t.roomPool.length;)t.roomPool.pop().destroy()},t._i=null,t.roomPool=null,t}();t.roomFactory=e,__reflect(e.prototype,"brnn.roomFactory");var i=function(e){function i(){var t=e.call(this)||this;return t._mIsInPool=!1,t._maskRct=new egret.Rectangle(0,0,88,17),t._tableId=0,t._isRelease=!1,t.indexMask=0,t.index=0,t.skinName="BrnnRoomIcon",t._mandi.mask=t._maskRct,t}return __extends(i,e),i.create=function(){var t=ObjectPool.pop("brnn.BrnnRoom");return t._mIsInPool=!1,t},i.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},i.cleanRoomBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRoom","destroy")},i.prototype.init=function(t){this.dataChanged(t)},i.prototype.initup=function(){this._isRelease=!1},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},i.prototype.dataChanged=function(t){t.charts&&(this.ChangeChartList(t.charts),this.ChangeStatusList(t))},i.prototype.ChangeChartList=function(t){this.visibleChildElement();for(var e=0;e<t.length;e++){var i=t[e];for(var o in i){var n=0;switch(o){case"is_win_east":n=0;break;case"is_win_north":n=1;break;case"is_win_south":n=2;break;case"is_win_west":n=3;break;default:continue}var s=this["region_"+n];s.getChildAt(e).texture=i[o]?RES.getRes("brnn_ui_dui_room_png"):RES.getRes("brnn_ui_cuo_room_png"),s.getChildAt(e).visible=!0}}},i.prototype.ChangeStatusList=function(e){if(e.bet_limit){var i=e.bet_limit/1e4,o=e.bet_max/1e4;this._limit.text="限红: "+i+"~"+o}e.table_name&&(this._scene.text=e.table_name),e.issue&&(this.Issuenumber0.text="期号："+e.issue);var n=Math.floor(e.remaining_time/1e3);this.setttleTime.text=n+"",this.gameType.text=2==e.state?"下注中":"结算中",this._tableId=e.table_id,2==e.state?(this.startTimer(n),this.setMask(e.remaining_time,e.total_time),this.maskGame.visible=!0):(this.maskGame.visible=!1,this.setttleTime.text="···"),e.table_type==t.BrnnGameTypeConst.Lottery?this.setLotteyYY():this.setClassicYY()},i.prototype.getTableId=function(){return this._tableId},i.prototype.setGOGameImg=function(t){this.goGame.source=t?"common_ui_dqfj_png":"common_ui_jryx_png"},i.prototype.setLimitData=function(t,e){this._limit.text="限红: "+t+"~"+e},i.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var i=this["region_"+t];i.getChildAt(e).visible=!1}},i.prototype.setMask=function(t,e){var i=Math.ceil(t/e*88),o=89-i;this._maskRct.width=o;var n=t/i;App.TimerManager.doTimer(n,i,function(){this._maskRct.width+=1,this._mandi.mask=this._maskRct},this)},i.prototype.startTimer=function(t){this.index=0;var e=t;this.setttleTime.text=e+"",this.visible=!0,this.index=e,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){return this.index--,this.index<=0?(this.index=0,this.setttleTime.text=this.index+"",void App.TimerManager.removeAll(this)):void(this.setttleTime.text=this.index+"")},i.prototype.over=function(){this.index=0,this.setttleTime.text="0"},i.prototype.setClassicYY=function(){this._sceneGroup.y=this._sceneY.y,this.IssueClassic.visible=!1,this._limitGroup.y=this._limitY.y},i.prototype.setLotteyYY=function(){this._sceneGroup.y=this._sceneY.y-13,this.IssueClassic.visible=!0,this._limitGroup.y=this._limitY.y+13},i.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),console.log("销毁BrnnRoomclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),console.log("销毁BrnnRoomclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.destroy=function(){this.clean()},i}(eui.Component);t.BrnnRoom=i,__reflect(i.prototype,"brnn.BrnnRoom")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.index=0,e}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),console.log("this.data"),console.log(this.data),this.data.charts){this.visibleChildElement();for(var e=0;e<this.data.charts.length;e++)for(var i=this.data.charts[e].is_win,o=this["region_"+e],n=0;n<i.length;n++)o.getChildAt(n).texture=i[n]?RES.getRes("brnn_ui_dui_room_png"):RES.getRes("brnn_ui_cuo_room_png"),o.getChildAt(n).visible=!0;this._scene.text=(this.data.isLottery?"彩票场":"经典场")+this.data.table}},e.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var i=this["region_"+t];i.getChildAt(e).visible=!1}},e.prototype.enterGame=function(t){console.log(t);var e={type:"游戏类型："+t};console.log("进入游戏"),console.log(e),GameModuleMgr.i.enterGameFromRoom(e)},e.prototype.startTimer=function(t){this.index=0;var e=t;this.setttleTime.text=e+"",this.visible=!0,this.index=e,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},e.prototype.start=function(){return this.index--,this.index<=3&&App.SoundManager.playEffect("countdown_mp3"),this.index<=0?(this.index=0,this.setttleTime.text=this.index+"",void App.TimerManager.removeAll(this)):(this.setttleTime.text=this.index+"",void console.log("brnnRoomtime",this.setttleTime.text))},e.prototype.over=function(){this.index=0,this.setttleTime.text="0"},e.prototype.addEvent=function(t){this.goGame.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.goGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame.bind(this,t),this)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),!this.data},e.prototype.changeTest=function(t){this.setttleTime.text=t+""},e.prototype.onRemove=function(){this.destroy()},e.prototype.destroy=function(){Log.trace("销毁 IconRenderer"),App.TimerManager.removeAll(this)},e}(eui.ItemRenderer);t.BrnnRoomIcon=e,__reflect(e.prototype,"brnn.BrnnRoomIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.RProxyKeyConst=e,__reflect(e.prototype,"brnn.RProxyKeyConst")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.Base=500]="Base"}(e=t.RViewConst||(t.RViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._brnnPopupView=null,Log.trace("DeskController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base,this.getDeskModel()),App.ViewManager.open(t.ViewConst.brnnPopup),this.getDeskModel().tableType=this.currDeskType,console.log("currSceneType桌子"),console.log(this.currSceneType)},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._brnnPopupView=new t.brnnPopupView(this,LayerManager.UI_Tips),this._view=new t.DeskView(this)},i.prototype.getDeskModel=function(){return this._model},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.brnnPopup,this._brnnPopupView),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterBrnnGame",this.onEnterGame,this),this.registerFunc("onClickBackHelp",this.onClickBackHelp,this),this.registerFunc(t.ControllerCon.btnHallcharTReq,this.btnHallcharTReq,this),this.registerFunc(t.ControllerCon.createHallChart,this.createHallChart,this),this.registerFunc(t.ControllerCon.changeHallChart,this.changeHallChart,this),this.registerFunc(t.ControllerCon.changeHallstaus,this.changeHallstaus,this),this.registerFunc(t.ControllerCon.closeHallChart,this.closeHallChart,this),this.registerFunc("getFistHallChartReq",this.getFistHallChartReq,this)},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.getFistHallChartReq=function(t){console.log("进入游戏大厅请求"),console.log(t),console.log(this.currSceneType),console.log(this.currDeskId),this._view.onBtnType(t)},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.onEnterGame=function(t){console.log("onEnterGame--tableType"),console.log(this.getDeskModel().tableType),console.log(t),this.setCurrDeskId(t),this.setCurrDeskType(this.getDeskModel().tableType),this.enterGameByDeskId(t,{table_type:t})},i.prototype.onClickBackHelp=function(){console.log("帮助弹窗"),this._brnnPopupView._brnnHelp.showPopup(),this._brnnPopupView._brnnHelp.rankData()},i.prototype.btnHallcharTReq=function(t){var e={req_id:t,table_id:0};App.EasyLoading.showOnTimeOut(),this._proxy.getHallChart(e)},i.prototype.createHallChart=function(t){this._view.createLement(t)},i.prototype.changeHallChart=function(t){this._view.ChangeChartList(t)},i.prototype.changeHallstaus=function(t){this._view.ChangeStatusList(t)},i.prototype.closeHallChart=function(){this._view.reMoveLement(),App.ScrollTxtTips.showTip("游戏维护中")},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),console.log("销毁BrnnDeskController"),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._brnnPopupView.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0,this._brnnPopupView=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"brnn.DeskController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.roleName="",i.initData(),i}return __extends(e,t),e.prototype.initData=function(){this.tableType=0,this.chartList=[],this.tableId=0},e.prototype.changeChartList=function(){for(var t=0;t<this.chartList.length;t++)this.chartList[t].charts.length>9&&this.chartList[t].charts.splice(0,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"brnn.DeskModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getDeskModel=function(){return this._model},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onHallStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onHallChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onHHallChartNotifyBack,this)},i.prototype.onHallStatusNotifyBack=function(e){console.log("onHallStatusNotifyBack",e),e&&this.applyFunc(t.ControllerCon.changeHallstaus,e)},i.prototype.onHallChartResBack=function(e){console.log("onHallChartResBack",e),this.applyFunc("getFistHallChartReq",e.req_id),e.table_info_list.length?(console.log(e.table_info_list),console.log(e.table_info_list[0]),console.log(e.table_info_list[0].charts),console.log(e.table_info_list[0].charts[1]),this.getDeskModel().tableType=e.req_id,this.getDeskModel().chartList.length=0,this.getDeskModel().chartList=[].concat(e.table_info_list),this.applyFunc(t.ControllerCon.createHallChart,e.table_info_list)):this.applyFunc(t.ControllerCon.closeHallChart),App.EasyLoading.hideLoading()},i.prototype.onHHallChartNotifyBack=function(e){if(console.log("onHHallChartNotifyBack",e),e.charts){for(var i=this.getDeskModel().chartList,o=0;o<i.length;o++)(i[o].table_id=e.table_id)&&this.getDeskModel().chartList[o].charts.push(e.charts[0]);console.log(this.getDeskModel().chartList),this.getDeskModel().changeChartList(),this.applyFunc(t.ControllerCon.changeHallChart,e)}},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.getHallChart=function(e){this.send(t.ControllerCon.NET_MSG.HALL_CHART_REQ,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"brnn.DeskProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"brnn","BrnnRoomSkin")||this;return i._gameList=[],i.classicalXY=[],i.index=0,i._lementList=[],i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),console.log("初始化大厅跑马灯信息"),this.initBroadcast(this)},i.prototype.open=function(t){e.prototype.open.call(this),this.getXY(),this._mMoudel=t,App.EasyLoading.showOnTimeOut()},i.prototype.onHelpPay=function(){console.log("进入帮助"),this.applyFunc("onClickBackHelp")},i.prototype.onBackRoom=function(){console.log("返回大厅"),this.applyFunc("onClickBackRoom")},i.prototype.onEnterGame=function(t){},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t,i){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnRoomIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/brnn/euiSkins/BrnnRoomIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.onBacklassical=function(){this.onBtnType(t.BrnnGameTypeConst.Classic),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Classic)},i.prototype.onBackLottery=function(){this.onBtnType(t.BrnnGameTypeConst.Lottery),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Lottery)},i.prototype.onBtnType=function(e){e==t.BrnnGameTypeConst.Classic?(this.btnClassical3.touchEnabled=!0,this.btnClassical1.touchEnabled=!1,this.btnClassical1.source="common_ui_xzjdd_png",this.btnClassical3.source="common_ui_xzcpx_png",this.btnClassical1.x=this.classicalXY[1].x,this.btnClassical1.y=this.classicalXY[1].y,this.btnClassical3.x=this.classicalXY[3].x,this.btnClassical3.y=this.classicalXY[3].y):(this.btnClassical3.touchEnabled=!1,this.btnClassical1.touchEnabled=!0,this.btnClassical1.source="common_ui_xzjdx_png",this.btnClassical3.source="common_ui_xzcpd_png",this.btnClassical1.x=this.classicalXY[0].x,this.btnClassical1.y=this.classicalXY[0].y,this.btnClassical3.x=this.classicalXY[2].x,this.btnClassical3.y=this.classicalXY[2].y)},i.prototype.getXY=function(){for(var t=0;4>t;t++){var e=this["btnClassical"+t],i={x:e.x,y:e.y};this.classicalXY.push(i)}},i.prototype.onAnnouList=function(t){console.log("onAnnouList"),console.log(t);var e=this.gameList.selectedIndex;this.gameList.getElementAt(e);this.applyFunc("onEnterBrnnGame",e)},i.prototype.startAllTime=function(t){for(var e=0;e<this._gameList.length;e++){var i=t[e].time,o=this._gameList[e];this.startTimer(i,o)}},i.prototype.startTimer=function(t,e){this.index=0;var i=t;e.changeTest(i),this.visible=!0,this.index=i,App.TimerManager.doTimer(1e3,i,this.start.bind(this,e),this,this.over.bind(this,e),this)},i.prototype.start=function(t){return this.index--,this.index<=3&&App.SoundManager.playEffect("countdown_mp3"),this.index<=0?(this.index=0,t.changeTest(this.index),void App.TimerManager.removeAll(this)):void t.changeTest(this.index)},i.prototype.over=function(t){this.index=0,t.changeTest(this.index)},i.prototype.getChildList=function(t){for(var e=0;e<t.length;e++){var i=this.gameList.getElementAt(e);this._gameList.push(i)}},i.prototype.createLement=function(e){this.reMoveLement(),console.log("生成场次"),console.log(e);for(var i=0;i<e.length;i++){var o=e[i],n=e[i].table_id,s=t.BrnnRoom.create();s.init(o),s.x=0,s.y=0+195*i,this._addList.addChild(s),this._lementList.push(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,n),this)}},i.prototype.touchBtn=function(t){console.log(t),this.applyFunc("onEnterBrnnGame",t)},i.prototype.ChangeChartList=function(t){for(var e=0;e<this._lementList.length;e++)for(var i=this._lementList[e].getTableId(),o=this._mMoudel.chartList,n=0;n<o.length;n++){var s=o[n].charts;i==t.table_id&&this._lementList[e].ChangeChartList(s)}},i.prototype.ChangeStatusList=function(t){for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();i==t.table_id&&this._lementList[e].ChangeStatusList(t)}},i.prototype.setLimitData=function(t){for(var e=t.bet_limit/1e4,i=t.bet_max/1e4,o=0;o<this._lementList.length;o++){var n=this._lementList[o].getTableId();n==t.table_id&&this._lementList[o].setLimitData(e,i)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.BrnnRoom.release(e))}this._lementList.length=0},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),console.log("addEvent"),App.CommonUtils.effectButton(this.btnHelp,this.onHelpPay,this),App.CommonUtils.effectButton(this.btnReturn,this.onBackRoom,this),App.CommonUtils.effectButton(this.btnClassical1,this.onBacklassical,this),App.CommonUtils.effectButton(this.btnClassical3,this.onBackLottery,this),this.gameList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.btnHelp),App.CommonUtils.removeButton(this.btnReturn),App.CommonUtils.removeButton(this.btnClassical1),App.CommonUtils.removeButton(this.btnClassical3),this.gameList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),console.log("销毁BrnnDesk"),this.reMoveLement()},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"brnn.DeskView")}(brnn||(brnn={}));var lhd;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isRefresh=!1,e.openTypes=[],e}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){if(this.TableName.text=this.data.table_name,this.data.limit_min_bet&&this.data.limit_max_bet&&(this.Limited.text="限红:"+App.CommonUtils.money(this.data.limit_min_bet)+"~"+App.CommonUtils.money(this.data.limit_max_bet)),this.data.issue&&(this.Issue.text="期号:"+this.data.issue),this.data.state&&this.data.totalTime&&this.data.remainingTime)switch(this.data.state){case 1:this.betTimer(this.data.totalTime,this.data.remainingTime);break;case 2:this.GameStatus.text="结算中: "+this.data.remainingTime,this.MaskBetTimer.visible=!1}if(this.data.openTypes){if(JSON.stringify(this.data.openTypes)==JSON.stringify(this.openTypes))return;this.renderChart(),this.openTypes=this.data.openTypes}}this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},Object.defineProperty(e.prototype,"tableId",{get:function(){return this.data.table_id},enumerable:!0,configurable:!0}),e.prototype.betTimer=function(t,e){this.GameStatus.text="投注中",this.Mandi.scaleX=e/t,this.MaskBetTimer.visible=!0},e.prototype.renderChart=function(){var t=0,e=0,i=0;this.data.openTypes.forEach(function(o){0==o?t++:1==o?e++:i++}),this.BankerSum.text="龙"+t,this.PlayerSum.text="虎"+e,this.DrawSum.text="和"+i,this.ChartBead.renderBead(this.data.openTypes,"lhd"),this.ChartOther.renderOtherChart(this.data.openTypes,"lhd")},e.prototype.destroy=function(){this.ChartOther.destroy()},e}(eui.ItemRenderer);t.LhdDeskItem=e,__reflect(e.prototype,"lhd.LhdDeskItem")}(lhd||(lhd={}));var lhd;!function(t){var e=function(){function t(){}return t.NET_MSG={DESK_LIST_N:"11601",DESK_STATE_N:"11602",DESK_CHART_N:"11603",CHIPS_RECORD_N:"11605"},t.CB={onDeskListCallBack:"20000",onDeskStateCallBack:"20001",onDeskChartCallBack:"20002"},t}();t.DeskProxyConst=e,__reflect(e.prototype,"lhd.DeskProxyConst")}(lhd||(lhd={}));var lhd;!function(t){var e=function(){function t(){this.initChips()}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initChips=function(){this._chips="[2, 3, 6, 8, 9]"},t.prototype.setChips=function(t){this._chips=t},Object.defineProperty(t.prototype,"Chips",{get:function(){return this._chips},enumerable:!0,configurable:!0}),t._i=null,t}();t.LhdChips=e,__reflect(e.prototype,"lhd.LhdChips")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("DeskController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._view=new t.DeskView(this)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.DeskProxyConst.CB.onDeskListCallBack,this.onDeskListCallBack,this),this.registerFunc(t.DeskProxyConst.CB.onDeskStateCallBack,this.onDeskStateCallBack,this),this.registerFunc(t.DeskProxyConst.CB.onDeskChartCallBack,this.onDeskChartCallBack,this),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.onDeskListCallBack=function(t){this._view.createList(t)},i.prototype.onDeskStateCallBack=function(t){this._view.insertState(t)},i.prototype.onDeskChartCallBack=function(t){this._view.insertChart(t)},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.onEnterGame=function(t){this.enterGameByDeskId(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"lhd.DeskController")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"lhd.DeskModel")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onDeskList=function(e){this.applyFunc(t.DeskProxyConst.CB.onDeskListCallBack,e)},i.prototype.onDeskState=function(e){this.applyFunc(t.DeskProxyConst.CB.onDeskStateCallBack,e)},i.prototype.onDeskChart=function(e){this.applyFunc(t.DeskProxyConst.CB.onDeskChartCallBack,e)},i.prototype.onChipsRecord=function(e){""!=e.chips&&t.LhdChips.i.setChips(e.chips)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.DeskProxyConst.NET_MSG.DESK_LIST_N,this.onDeskList,this),this.addListener(t.DeskProxyConst.NET_MSG.DESK_STATE_N,this.onDeskState,this),this.addListener(t.DeskProxyConst.NET_MSG.DESK_CHART_N,this.onDeskChart,this),this.addListener(t.DeskProxyConst.NET_MSG.CHIPS_RECORD_N,this.onChipsRecord,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.DeskProxyConst.NET_MSG.DESK_LIST_N,this.onDeskList,this),this.removeListener(t.DeskProxyConst.NET_MSG.DESK_STATE_N,this.onDeskState,this),this.removeListener(t.DeskProxyConst.NET_MSG.DESK_CHART_N,this.onDeskChart,this),this.removeListener(t.DeskProxyConst.NET_MSG.CHIPS_RECORD_N,this.onChipsRecord,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"lhd.DeskProxy")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"lhd","DeskSkin")||this;return i.deskType=0,i.deskList=[],i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.BtnClassics1.visible=!1,this.BtnClassics2.visible=!0,this.BtnTicket1.visible=!0,this.BtnTicket2.visible=!1;var i=new eui.VerticalLayout;this.ListItem.layout=i,this.DeskScroller.viewport=this.ListItem,this.DeskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.DeskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.ListItem.itemRenderer=t.LhdDeskItem,this.tempCollection=new eui.ArrayCollection},i.prototype.createList=function(t){this.deskList=t.tables,this.deskList.length&&(this.deskList.forEach(function(t){t.openTypes=[]}),this.refreshList())},i.prototype.insertState=function(t){this.deskList.length&&(this.deskList.forEach(function(e){if(e.table_id==t.table_id)switch(e.issue=t.issue,e.state=t.state,e.totalTime=Math.round(t.total_time/1e3),e.remainingTime=Math.round(t.remaining_time/1e3),e.state){case 1:App.TimerManager.doTimer(100,10*e.remainingTime,function(){e.remainingTime>0&&1==e.state&&(e.remainingTime-=.1,this.refreshList())},this);break;case 2:App.TimerManager.doTimer(1e3,e.remainingTime,function(){e.remainingTime>0&&2==e.state&&(e.remainingTime--,this.refreshList())}.bind(this),this)}}.bind(this)),this.refreshList())},i.prototype.insertChart=function(t){this.deskList.length&&(this.deskList.forEach(function(e){e.table_id==t.table_id&&(e.openTypes=e.openTypes.concat(t.open_types),e.openTypes.length>50&&e.openTypes.splice(0,50))}.bind(this)),this.refreshList())},i.prototype.refreshList=function(){if(this.deskList.length){this.tempCollection.refresh();var t=[];this.deskList.forEach(function(e){e.table_type==this.deskType&&t.push(e)}.bind(this)),this.tempCollection.replaceAll(t),this.ListItem.dataProvider=this.tempCollection,this.tempCollection.refresh()}},i.prototype.toggleBtn=function(t){var e=t.currentTarget;switch(e.visible=!1,e){case this.BtnClassics1:this.BtnClassics2.visible=!0,this.BtnTicket1.visible=!0,this.BtnTicket2.visible=!1,this.deskType=0;break;case this.BtnTicket1:this.BtnTicket2.visible=!0,this.BtnClassics1.visible=!0,this.BtnClassics2.visible=!1,this.deskType=1}this.refreshList()},i.prototype.onEnterGame=function(t){var e=this.ListItem.selectedIndex,i=this.ListItem.getElementAt(e);this.applyFunc("onEnterGame",i.tableId)},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.BtnClassics1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.BtnTicket1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),this.ListItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.BtnClassics1),App.CommonUtils.removeButton(this.BtnTicket1),App.CommonUtils.removeButton(this.BtnReturn)},i.prototype.destroy=function(){App.TimerManager.removeAll(this),this.deskList=void 0},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"lhd.DeskView")}(lhd||(lhd={}));var baiJiaLe;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);console.log("百家乐初始化",e),i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.baiJiaLe=i,__reflect(i.prototype,"baiJiaLe.Entrance.baiJiaLe",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){var e=t.call(this,"AwardAnimationSkin")||this;
return e.visible=!1,e}return __extends(e,t),e.prototype.showAward=function(t,e){this.visible=!0,this._groupAward.alpha=0,this._playerWin.visible=!1,this._bankerWin.visible=!1,this._he.visible=!1,1==t?this._playerWin.visible=!0:2==t?this._bankerWin.visible=!0:this._he.visible=!0,egret.Tween.get(this._groupAward).to({alpha:1},500,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this._groupAward).to({alpha:0},300,egret.Ease.sineInOut),this.visible=!1}.bind(this),this,2e3),e&&e>0?(this._winMoney.text="+"+App.CommonUtils.money2Str(e),this._winMoney.visible=!0):this._winMoney.visible=!1},e}(BaseEuiComponent);t.AwardAnimation=e,__reflect(e.prototype,"baiJiaLe.AwardAnimation")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){return t.call(this,"BaiJiaLeBtnAreaSkin")||this}return __extends(e,t),e.prototype.onBtnClick=function(t){App.SoundManager.playEffect("click_mp3"),this.applyFunc("bet",t)},e.prototype.setBtnArea=function(t){this._btnArea8.touchEnabled=1==t,this._btnArea9.touchEnabled=1==t},e.prototype.addEvent=function(){t.prototype.addEvent.call(this);for(var e=1;e<this._btnAreaGroup.numChildren+1;e++)this["_btnArea"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick.bind(this,e),this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this);for(var e=1;e<this._btnAreaGroup.numChildren+1;e++)this["_btnArea"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BaiJiaLeBtnArea=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeBtnArea")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,"BaiJiaLeChangeTableSkin")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.initComponent=function(){this.tempCollection=new eui.ArrayCollection,this.gameList.itemRenderer=t.BaiJiaLeHelpItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},i.prototype.showPopup=function(){this.visible=!0,this.changeBg.visible=!0,this.changeMenu.scaleX=this.changeMenu.scaleY=0,App.EffectUtils.showUI(this.changeMenu)},i.prototype.closePoput=function(){this.changeBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.changeMenu,300,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(t){return this.gameList.itemRenderer=BrnnRecordIcon,this.gameList.dataProvider=t,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.createLement=function(t,e){this.reMoveLement(),console.log("生成场次");for(var i=0;i<t.length;i++){var o=t[i],n=t[i].table_id,s=t[i].table_type,r=brnn.roomFactory.i.create();r.init(o),r.x=0,r.y=0+195*i,n==e?r.setGOGameImg(1):r.setGOGameImg(0),this._addList.addChild(r),this._lementList.push(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,n,s),this)}},i.prototype.touchBtn=function(t,e){console.log(t)},i.prototype.ChangeGameChartList=function(t,e){console.log(e);for(var i=0;i<this._lementList.length;i++){var o=this._lementList[i].getTableId();o==t.table_id&&this._lementList[i].ChangeChartList(e)}},i.prototype.ChangeGameStatusList=function(t){console.log("ChangeStatusList2"),console.log(t);for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();i==t.table_id&&this._lementList[e].ChangeStatusList(t)}},i.prototype.reMoveLement=function(){},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement()},i}(BaseEuiComponent);t.BaiJiaLeChangeTable=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeChangeTable")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.largeX=0,t.verticalNum=1,t.maxBottomLine=6,eui.Watcher.watch(t,["data","tableinfo"],t.onLoadedData,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(i,e),i.prototype.onLoadedData=function(){JSON.stringify(this.tempTableInfo)!=JSON.stringify(this.data.tableinfo)&&(this._tableName.text=this.data.tablename,this._date.text="期号:"+this.data.termno,this._limited.text="限红:"+this.data.limitmoney[0]/1e4+"~"+this.data.limitmoney[1]/1e4,this.setDeskItemInfo(),this.renderAll(this.data.winplace)),this.tempTableInfo=this.data.tableinfo},i.prototype.test=function(){var t=new Array;t[0]=1,this.data.winplace.push({winPlace:t}),this.renderAll(this.data.winplace)},i.prototype.updataRoadMap=function(){Log.trace("更新路子图",this.data.winplace),this.collectResult(),this.renderAll(this.data.winplace)},i.prototype.updataStatus=function(){Log.trace("当前状态",this.data.gamestatus,"当前倒计时",this.data.gametime);var t;2==this.data.gamestatus?(t="投注中:"+this.data.gametime,this.MaskBetTimer.visible=!0,this.mask_progress.scaleX=this.data.gametime/15):5==this.data.gamestatus&&(console.log("this.data.gamestatus",this.data.gamestatus),t="结算中:"+this.data.gametime,this.MaskBetTimer.visible=!1),this._gameStatus.text=t},i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.updataStatus()},i.prototype.collectResult=function(){var t=this.data.winplace,e=[];e[1]=0,e[2]=0,e[3]=0;for(var i=0;i<=t.length-1;i++)1==t[i].winPlace[0]&&(e[1]=e[1]+1),2==t[i].winPlace[0]&&(e[2]=e[2]+1),3==t[i].winPlace[0]&&(e[3]=e[3]+1);return e},i.prototype.setDeskItemInfo=function(t){var e=this.collectResult();this._bankerSum.text="庄:"+e[1],this._playerSum.text="闲:"+e[2],this._drawSum.text="和:"+e[3]},Object.defineProperty(i.prototype,"tableId",{get:function(){return this.data.tableid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableType",{get:function(){return this.data.tabletype},enumerable:!0,configurable:!0}),i.prototype.renderBead=function(e){this.GroupBead.removeChildren();var i=0,o=0;e.length>0&&e.forEach(function(e,n){var s=new t.Bead,r=n/6;i=24*parseInt(String(r)),n%6==0&&(o=0),s.x=i,s.y=o,s._winner.source=1==e.winPlace[0]?"bjl_ui_zhuang_png":2==e.winPlace[0]?"bjl_ui_xian_png":"bjl_ui_he_png",s._label.text=1==e.winPlace[0]?"庄":2==e.winPlace[0]?"闲":"和",s._playerDouble.visible=e.winPlace.indexOf(5)>-1?!0:!1,s._bankerrDouble.visible=e.winPlace.indexOf(4)>-1?!0:!1,o+=24,this.GroupBead.addChild(s)}.bind(this))},i.prototype.renderAll=function(t){App.SoundManager.playEffect("click_mp3"),this.renderBead(t);var e=[];t.forEach(function(t,i){e[i]=t.winPlace[0]-1}),this.ChartOther.renderOtherChart(e,"bjl")},i.prototype.destroy=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},i}(eui.ItemRenderer);t.BaiJiaLeDeskItem=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeDeskItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,"BaiJiaLeHelpSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.initComponent=function(){this.help_collection=new eui.ArrayCollection,this.helpList.itemRenderer=t.BaiJiaLeHelpItem,this.helpScroller.viewport.scrollH=0,this.helpScroller.viewport=this.helpList},i.prototype.showPopup=function(){this.visible=!0,this.bg.visible=!0,this.helpMain.scaleX=this.helpMain.scaleY=0,App.EffectUtils.showUI(this.helpMain)},i.prototype.closePoput=function(){this.bg.visible=!1;var t=this;App.EffectUtils.hideUI(this.helpMain,200,0,function(){t.visible=!1})},i.prototype.initData=function(){},i.prototype.refreshGameList=function(){this.showPopup()},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.closeBtn,this.closePoput,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.closeBtn)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.BaiJiaLeHelp=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeHelp")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.BaiJiaLeHelpItem=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeHelpItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this,"BaiJiaLeTimeSkin")||this;return t._status={1:"下注中",2:"开奖中",3:"空闲",4:"发牌中"},t}return __extends(i,e),i.prototype.setCurryTimer=function(t){this.classicTimer.visible=1==t,this.lotteryTimer.visible=2==t,this._tableType=t},i.prototype.startTimer=function(t){var e=Math.round(t/1e3);switch(this._tableType){case 1:this.timer1(e);break;case 2:this.timer2(e)}},i.prototype.updateTimerStatus=function(e){switch(e){case t.BaiJiaLeConst.GAME_STATE.BET:this._currentGameStatus=1;break;case t.BaiJiaLeConst.GAME_STATE.AWARD:this._currentGameStatus=2;break;case t.BaiJiaLeConst.GAME_STATE.WAIT:this._currentGameStatus=3;break;case t.BaiJiaLeConst.GAME_STATE.DEAL:this._currentGameStatus=4}this._gameStatus.text=this._status[this._currentGameStatus]},i.prototype.timerHandler1=function(){this._currentSecond>0?(this._currentSecond--,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3")):this._timer.stop(),this._currentSecond>=0&&(this._timeLbL.text=""+this._currentSecond,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&(3==this._currentSecond&&(this._timeLbL.text="w"),2==this._currentSecond&&(this._timeLbL.text="m"),1==this._currentSecond&&(this._timeLbL.text="n"))),this._currentSecond<=3&&this.numShake()},i.prototype.timerHandler2=function(){return this._currentSecond--,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3"),this._currentSecond<0?(this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,void App.TimerManager.removeAll(this)):void(this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond)},i.prototype.timerHandlerOver2=function(){this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond},i.prototype.numShake=function(){var t=this._timeLbL;egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.timer1=function(t){this._timer?this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this):(this._timer=new egret.Timer(1e3,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this)),t>=0&&(this._currentSecond=t,this._timeLbL.text=""+this._currentSecond,this._timer.start())},i.prototype.timer2=function(t){this.timeSecond.text=t>=10?t+"":"0"+t,this._currentSecond=t,App.TimerManager.doTimer(1e3,t,this.timerHandler2,this,this.timerHandlerOver2,this)},i.prototype.setTimerVisible=function(t){1==this._tableType&&(this.classicTimer.visible=t),2==this._tableType&&(this.lotteryTimer.visible=t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._shape&&this.classicTimer.removeChild(this._shape),this._timer&&this._timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this),this._shape=null,this._timer=null,this._status=null,this._currentSecond=null,this._tableType=null},i}(BaseEuiComponent);t.BaiJiaLeTime=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeTime")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){return t.call(this,"BeadSkin")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(BaseEuiComponent);t.Bead=e,__reflect(e.prototype,"baiJiaLe.Bead")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this,"RoadMapSkin")||this;return t.largeX=0,t.verticalNum=1,t.maxBottomLine=6,t.isOpenRoad=!1,t}return __extends(i,e),i.prototype.collectResult=function(t){var e=t;Log.trace("收集开始",e);for(var i={},o=0;o<=e.length-1;o++)if(e[o].winPlace.length>0&&e[o].winPlace.length<=1){var n=e[o].winPlace[0];i[n]=i[n]+1||1}else if(e[o].winPlace.length>1){var s=e[o].winPlace[0];i[s]=i[s]+1||1;var r=e[o].winPlace[1];i[r]=i[r]+1||1}return Log.trace("收集结束",i),i},i.prototype.setDeskItemInfo=function(t){var e=this.collectResult(t);this._banker.text=(void 0===e[1]?0:e[1])+"",this._player.text=(void 0===e[2]?0:e[2])+"",this._tie.text=(void 0===e[3]?0:e[3])+"",this._bankerPair.text=(void 0===e[4]?0:e[4])+"",this._playerPair.text=(void 0===e[5]?0:e[5])+"",this._sum.text=t.length+""},i.prototype.renderBead=function(e){this.GroupBead.removeChildren();var i=0,o=0;e.length>0&&e.forEach(function(e,n){var s=new t.Bead,r=n/6;i=24*parseInt(String(r)),n%6==0&&(o=0),s.x=i,s.y=o,s._winner.source=1==e.winPlace[0]?"bjl_ui_zhuang_png":2==e.winPlace[0]?"bjl_ui_xian_png":"bjl_ui_he_png",s._label.text=1==e.winPlace[0]?"庄":2==e.winPlace[0]?"闲":"和",s._playerDouble.visible=e.winPlace.indexOf(5)>-1?!0:!1,s._bankerrDouble.visible=e.winPlace.indexOf(4)>-1?!0:!1,o+=24,this.GroupBead.addChild(s)}.bind(this))},i.prototype.renderAll=function(t){Log.trace("历史记录",t),App.SoundManager.playEffect("click_mp3"),this.renderBead(t);var e=[];t.forEach(function(t,i){e[i]=t.winPlace[0]-1}),this.ChartOther.renderOtherChart(e,"bjl"),this.setDeskItemInfo(t)},i.prototype.renderIssue=function(t){this.Issue.text="期号:"+t},i.prototype.showRoadMap=function(){egret.Tween.get(this.RoadMapMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.openRoadMap=function(){console.warn("1111"),this.isOpenRoad?(this.closeRoadMap(),this.isOpenRoad=!1):(this.applyFunc("showRoadMap"),this.isOpenRoad=!0)},i.prototype.closeRoadMap=function(){App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.RoadMapMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut),this.applyFunc("closeRoadMap")},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnRoadMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.removeEvent=function(){this.BtnRoadMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.RoadMap=e,__reflect(e.prototype,"baiJiaLe.RoadMap")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.CHIP_CONFIG=[1,10,50,100,500,1e3,5e3,1e4],t.BET_SLOT=3,t.FLY_CHIP_TIME=.4,t.TABLE_CHIP_SCALE=.4,t.DEAL_CARD_TIME=.35,t.FLIP_CARD_TIME=.5,t.SHOW_CHAIR_NUM=6,t.BET_TIME=10,t.REWARD_TIME=10,t.PI=3.1416926,t.GAME_STATE={BET:1,AWARD:2,WAIT:3,DEAL:4},t.Game_CHIP_AREA={PLAYER:1,HE:2,BANKER:3,ANY_DUI:4,PLAYER_DUI:5,BIG:6,SMALL:7,BANKER_DUI:8,PERFECT_DUI:9},t.CARD_TYPE={DAN_ZHANG:-1,DUI_ZI:-1,SHUN_ZI:-1,JIN_HUA:-1,SHUN_JIN:-1,BAO_ZI:-1},t.BENEFIT={0:1,1:1,2:2,3:3,4:5,5:10},t.CARD_TYPE_STR=(i={},i[0]="单张",i[1]="对子",i[2]="顺子",i[3]="金花",i[4]="顺金",i[5]="豹子",i),t.NET_MSG={ONLINE_NUM:"1005",LEAVE_GAME:"10104",LEAVE_GAME_R:"10105",BET_START_R:"10202",ME_BET:"10203",ME_BET_R:"10204",CARDLIST_R:"10205",GAME_RESULT:"10206",GAME_RECONECTINFO_R:"10207",REWARD_START_R:"10211",DEAL_START_R:"10212",TOTAL_BET_R:"10213",LEADER_BOARD_R:"10214",LEADER_BOARD:"10215",ROAD_MAP_R:"10216",INIT_FINISH:"10217",ONLINE_NUMBER_R:"10218",SPECIAL_PLAYER_R:"10219",CHIP_SETTING:"10221",CHIP_SETTING_R:"10220",TERMNO_R:"10224",GAMESTATE_R:"10229",RESULT_START_R:"10113"},t.NET_MSG_LOG={7002:"玩家下注",7003:"其他玩家下注",7004:"玩家自己发起上庄",7005:"其他玩家进入庄家排队",7006:"新玩家进入",7007:"新玩家离开",7008:"当前玩家离开房间",7009:"自己提前下庄或者离开上庄列表",7010:"玩家被踢出房间",7011:"可下注状态通知",7012:"开奖状态通知",7014:"其他玩家下庄或者离开上庄队列",7017:"房间更新中奖",7018:"房间更新其他信息"},t.ANIM_STAGE={NONE:-1,DEAL_CARD:-1,FLIP_LEFT_CARD:-1,FLIP_Right_CARD:-1,SHOW_LEFT_PX:-1,SHOW_RIGHT_PX:-1,CHIP_ANIM:-1,SHOW_SCORE:-1,WAIT:-1},t.NET_ERROR_MSG=(o={},o[101]="条件不满足",o[102]="下注数字错误",o[103]="下注额过大",o[104]="下注金额超过余额 ",o[105]="庄家无法赔付这么多下注额",o[106]="下注时间结束",o[107]="余额小于上庄最低要求",o[108]="上庄队列已满",o[109]="自己就在庄家队列",o[110]="当前玩家不是庄家也不在庄家列表",o[111]="当前玩家长时间不参与",o[112]="下注金额过小",o[113]="当前没有庄家,下注失败",o),t.Const_onEnterGameCallBack="Const_1001",t.onOtherBetCallBack="1002",t.onSelfBetCallBack="1003",t.onShowHandCallBack="1004",t.onOnlineNumCallBack="1005",t.onBetStartCallBack="1006",t.onRewardStartCallBack="1007",t.setJettonCallBack="1008",t.onResultCallBack="1009",t.onBetCallBack="1010",t.onCardListCallBack="1011",t.onDealStartCallBack="1012",t.onTotalBetCallBack="1013",t.onMeBetCallBack="1014",t.onGameResultCallBack="1015",t.onLeaveGameCallBack="1016",t.onRoadMapCallBack="1017",t.onLeaderBoardCallBack="1018",t.onOnlineNumberCallBack="1019",t.onSpecialPlayerCallBack="1020",t.onAddChipCallBack="1021",t.onReconectBack="1022",t.onTermnoBack="1023",t.onGameStateBack="1024",t}();t.BaiJiaLeConst=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeConst");var i,o}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.register(),o}return __extends(i,e),i.prototype.register=function(){this.addListener(t.BaiJiaLeConst.NET_MSG.DEAL_START_R,this.onDealStart,this),this.addListener(t.BaiJiaLeConst.NET_MSG.BET_START_R,this.onBetStart,this),this.addListener(t.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.addListener(t.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.addListener(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.addListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.addListener(t.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this)},i.prototype.onDealStart=function(e){this.applyFunc(t.BaiJiaLeConst.onDealStartCallBack,e)},i.prototype.onBetStart=function(e){console.log("投注开始",e),this.applyFunc(t.BaiJiaLeConst.onBetStartCallBack,e)},i.prototype.onTotalBet=function(e){this.applyFunc(t.BaiJiaLeConst.onTotalBetCallBack,e)},i.prototype.onMeBet=function(e){this.applyFunc(t.BaiJiaLeConst.onMeBetCallBack,e)},i.prototype.onRewardStart=function(e){console.log("开奖状态",e),this.applyFunc(t.BaiJiaLeConst.onRewardStartCallBack,e)},i.prototype.onCardList=function(e){console.log("获取牌",e),this.applyFunc(t.BaiJiaLeConst.onCardListCallBack,e)},i.prototype.onGameResult=function(e){console.log("结算结果",e),this.applyFunc(t.BaiJiaLeConst.onGameResultCallBack,e)},i.prototype.onRoadMap=function(e){this.applyFunc(t.BaiJiaLeConst.onRoadMapCallBack,e)},i.prototype.onLeaderBoard=function(e){this.applyFunc(t.BaiJiaLeConst.onLeaderBoardCallBack,e)},i.prototype.onOnlineNumber=function(e){this.applyFunc(t.BaiJiaLeConst.onOnlineNumberCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.BaiJiaLeConst.onSpecialPlayerCallBack,e)},i.prototype.onAddChip=function(e){this.applyFunc(t.BaiJiaLeConst.onAddChipCallBack,e)},i.prototype.onReconect=function(e){this.applyFunc(t.BaiJiaLeConst.onReconectBack,e)},i.prototype.onTermno=function(e){this.applyFunc(t.BaiJiaLeConst.onTermnoBack,e)},i.prototype.onGameStateChange=function(e){this.applyFunc(t.BaiJiaLeConst.onGameStateBack,e)},i.prototype.requestBet=function(e){console.log("requestBet1",e),this.send(t.BaiJiaLeConst.NET_MSG.ME_BET,e)},i.prototype.requestExitDesk=function(){this.sendLeaveDesk(GameModuleMgr.i.getCurrDeskId())},i.prototype.requestLeaderBoard=function(e){this.send(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD,e)},i.prototype.requestInitFinish=function(){this.send(t.BaiJiaLeConst.NET_MSG.INIT_FINISH)},i.prototype.requestAddChip=function(e){Log.trace("设置筹码请求",e),this.send(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeListener(t.BaiJiaLeConst.NET_MSG.DEAL_START_R,this.onDealStart,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.BET_START_R,this.onBetStart,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this)},i}(base.GameProxy);t.BaiJiaLeNet=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeNet")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e;!function(t){t[t.baiJiaLeBg=0]="baiJiaLeBg",t[t.baiJiaLeChip=1]="baiJiaLeChip",t[t.baiJiaLeMenu=2]="baiJiaLeMenu",t[t.baiJiaLeAni=3]="baiJiaLeAni",t[t.baiJiaLePopup=4]="baiJiaLePopup",t[t.baiJiaLeTips=5]="baiJiaLeTips"}(e=t.BaiJiaLeViewConst||(t.BaiJiaLeViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"baiJiaLe.DataNotify")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t}();t.ProxyKeyConst=e,__reflect(e.prototype,"baiJiaLe.ProxyKeyConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this.armature=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,1),this.removeEffect(),this.setState(e.ACTION_WASH)},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:0,x:StageUtils.getInstance().getWidth()/10*6.8,scaleX:0,scaleY:0,rotation:45},400,egret.Ease.sineInOut)},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"baiJiaLe.Shuffle")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e;!function(t){t[t.Base=201e3]="Base",t[t.BaiJiaLePoup=201001]="BaiJiaLePoup"}(e=t.ViewConst||(t.ViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isMove=!1,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addEventListeners(),this.addListeners(),this.addModelListeners(),Log.trace("GameController onCreate()")},i.prototype.onInit=function(t){e.prototype.onInit.call(this),this.registers(),t&&(this._baiJiaLeModel.tableType=t.tableType),this.enterGame(),Log.trace("GameController onInit()")},i.prototype.enterGame=function(){App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeBg),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeChip),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeMenu),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeAni),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLePopup),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeTips),App.SoundManager.stopBg(),App.SoundManager.playBg("bg_mp3"),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeModel._isAutoChecked=!0,this._baiJiaLeModel._isAutoCheckedDataNotify.setData(this._baiJiaLeModel._isAutoChecked),this._player=GamePlayerMgr.i.getPlayer(),this._baiJiaLeMenuView._messageinfo.setUserName(this._player.getNickName()),this._baiJiaLeModel._balance=this._player.getMoney(),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._player.getMoney())),this._baiJiaLeMenuView._messageinfo.setUserImage("ui_headImg_"+this._player.getAvatar()),this._baiJiaLeMenuView._messageinfo.setUserFrame("ui_headBox_"+this._player.getAvatarBox()),this._baiJiaLeMenuView._toolBar.reChargeEffect(),this._baiJiaLeMenuView.changeTablebtnEffect()},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToDesk,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("showWinner",this.showWinner,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showRoadMap",this.showRoadMap,this),this.registerFunc("closeRoadMap",this.closeRoadMap,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("rechargeMoney",this.openRecharge,this),this.registerFunc("changeTableReq",this.changeTable,this),this.registerFunc(t.BaiJiaLeConst.onBetStartCallBack,this.onBetStartCallBack,this),this.registerFunc(t.BaiJiaLeConst.onRewardStartCallBack,this.onRewardStartCallBack,this),this.registerFunc(t.BaiJiaLeConst.onCardListCallBack,this.onCardListCallBack,this),this.registerFunc(t.BaiJiaLeConst.onTotalBetCallBack,this.onTotalBetCallBack,this),this.registerFunc(t.BaiJiaLeConst.onMeBetCallBack,this.onMeBetCallBack,this),this.registerFunc(t.BaiJiaLeConst.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.BaiJiaLeConst.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(t.BaiJiaLeConst.onRoadMapCallBack,this.onRoadMapCallBack,this),this.registerFunc(t.BaiJiaLeConst.onLeaderBoardCallBack,this.onLeaderBoardCallBack,this),this.registerFunc(t.BaiJiaLeConst.onOnlineNumberCallBack,this.onOnlineNumberCallBack,this),this.registerFunc(t.BaiJiaLeConst.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.BaiJiaLeConst.onAddChipCallBack,this.onAddChipCallBack,this),this.registerFunc(t.BaiJiaLeConst.onReconectBack,this.onReconectCallBack,this),this.registerFunc(t.BaiJiaLeConst.onTermnoBack,this.onTermnoCallBack,this),this.registerFunc(t.BaiJiaLeConst.onGameStateBack,this.onGameStateCallBack,this)},i.prototype.inits=function(){e.prototype.inits.call(this),this._baiJiaLeModel=new t.GameModel(this),this._baiJiaLeNet=new t.BaiJiaLeNet(this,this._baiJiaLeModel),this.setModel(this._baiJiaLeModel),this._baiJiaLeBgView=new t.GameView(this),this._baiJiaLeChipView=new t.BaiJiaLeChipView(this,LayerManager.UI_Main),this._baiJiaLeMenuView=new t.BaiJiaLeMenuView(this,LayerManager.UI_Popup),this._baiJiaLeAniView=new t.BaiJiaLeAniView(this,LayerManager.UI_Popup),this._baiJiaLePopupView=new t.BaiJiaLePopupView(this,LayerManager.UI_Message),this._baiJiaLeTipsView=new t.BaiJiaLeTipsView(this,LayerManager.UI_Tips),this._baiJiaLeBgView.touchChildren=!1,this._baiJiaLeBgView.touchEnabled=!1,this._baiJiaLeMenuView._jeButton.enableBtn(),this._baiJiaLeMenuView._jeButton.toggleBtn(0),this._baiJiaLeModel._selBtnIndex=0,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0],Log.trace("this._baiJiaLeModel._betNum",this._baiJiaLeModel._betNum)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeBg,this._baiJiaLeBgView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeChip,this._baiJiaLeChipView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeMenu,this._baiJiaLeMenuView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeAni,this._baiJiaLeAniView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLePopup,this._baiJiaLePopupView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeTips,this._baiJiaLeTipsView),this.registerRecharge()},i.prototype.addModelListeners=function(){this._baiJiaLeModel._gameStatusInfoDataNotify.addDataListener(this.gameStatusCallback,this),this._baiJiaLeModel._betPlaceInfosDataNotify.addDataListener(this.betPlaceInfosCallBack,this),this._baiJiaLeModel._selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this),this._baiJiaLeModel._isBetDataNotify.addDataListener(this.isBetCallBack,this),this._baiJiaLeModel._isAutoCheckedDataNotify.addDataListener(this._isAutoCheckedCallBack,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._baiJiaLeNet.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._baiJiaLeNet.removeEvent()},i.prototype.onBetStartCallBack=function(e){this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!0),this._baiJiaLeBgView.resetHighLightArea();var i={gameStatus:t.BaiJiaLeConst.GAME_STATE.BET,gameTimer:e.actionTime};this._baiJiaLeModel._isBet=2,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeModel._selBtnIndex=this._baiJiaLeModel._selBtnIndex>0?this._baiJiaLeModel._selBtnIndex:1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex),this._baiJiaLeModel._gameStatusInfo=i,this._baiJiaLeModel._gameStatusInfoDataNotify.setData(this._baiJiaLeModel._gameStatusInfo),this.initSelfBet(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeBgView.initCoinBox(),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeChipView.showCard(),this.initPreBet(),15==e.actionTime&&(App.SoundManager.playEffect("start_mp3"),this._baiJiaLeMenuView._betAni.playAni(0))
},i.prototype.onRewardStartCallBack=function(e){var i={gameStatus:t.BaiJiaLeConst.GAME_STATE.AWARD,gameTimer:e.actionTime};this._baiJiaLeModel._isBet=1,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeModel._gameStatusInfo=i,this._baiJiaLeModel._gameStatusInfoDataNotify.setData(this._baiJiaLeModel._gameStatusInfo),10==e.actionTime&&(App.SoundManager.playEffect("stop_mp3"),this._baiJiaLeMenuView._betAni.playAni(1))},i.prototype.showHelp=function(){this._baiJiaLePopupView.BaiJiaLeHelp.showPopup()},i.prototype.ShowsetChip=function(){this._baiJiaLePopupView.SetChip.showMenu(),this._baiJiaLePopupView.SetChip.setDefaultChip(this._baiJiaLeModel._chipArray)},i.prototype.openRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.changeTable=function(){this._baiJiaLePopupView.BaiJiaLeChangeTable.showPopup()},i.prototype.onCardListCallBack=function(t){console.log("结算开牌状态1",t);var e,i,o,n=t.bankerCardList,s=t.playerCardList,r=0,a=0;this._baiJiaLeChipView.showCard();var h=this._baiJiaLeChipView.isDouble(n),l=this._baiJiaLeChipView.isDouble(s),p={winPlace:[]};3==t.bankerCardList.length?(a=n[2],i=2):i=1,3==t.playerCardList.length?(r=s[2],e=2):e=1,t.bankerCardNumber>t.playerCardNumber?(this._baiJiaLeModel._winner="banker",p.winPlace.push(1)):t.bankerCardNumber<t.playerCardNumber?(this._baiJiaLeModel._winner="player",p.winPlace.push(2)):(this._baiJiaLeModel._winner="he",p.winPlace.push(3)),h&&p.winPlace.push(4),l&&p.winPlace.push(5),this._baiJiaLeModel._recordHistory.push(p),this._baiJiaLeModel._recordHistory.length>50&&this._baiJiaLeModel._recordHistory.splice(0,50),this._baiJiaLeModel._onRewardActionTime>8?(this._baiJiaLeChipView.kaiPai(n,s),App.TimerManager.doTimer(1e3,1,function(){this._baiJiaLeChipView.buPai(r,a)}.bind(this),this),t.bankerCardList.length>2||t.playerCardList.length>2?App.TimerManager.doTimer(2e3,1,function(){this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber),1==e&&t.playerCardNumber>7?(App.SoundManager.playEffect("player_"+t.playerCardNumber+"_mp3"),o=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.playerCardNumber+"_mp3")}.bind(this),this),o=1200),App.TimerManager.doTimer(o,1,function(){1==i&&t.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+t.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this):App.TimerManager.doTimer(500,1,function(){this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber),1==e&&t.playerCardNumber>7?(App.SoundManager.playEffect("player_"+t.playerCardNumber+"_mp3"),o=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.playerCardNumber+"_mp3")}.bind(this),this),o=1200),App.TimerManager.doTimer(o,1,function(){1==i&&t.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+t.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this)):(this._baiJiaLeChipView.liangpai(n,s),this._baiJiaLeChipView.buPaiShow(r,a),this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber))},i.prototype.onTotalBetCallBack=function(t){console.log("监听总投注金额",t),this._baiJiaLeModel._betPlaceInfos=t.betInfo,this._baiJiaLeModel._betPlaceInfosDataNotify.setData(this._baiJiaLeModel._betPlaceInfos)},i.prototype.onMeBetCallBack=function(e){switch(console.log("onMeBetCallBack",e),e.isSpecial&&0!=e.specialRole[0]?(this._baiJiaLeMenuView._messageinfo.avatarShake(e.specialRole[0]),Log.trace("头像晃动",e.specialRole[0])):e.isSpecial&&0==e.specialRole[0]?(e.specialRole.length>1&&this._baiJiaLeMenuView._messageinfo.avatarShake(e.specialRole[1]),this._baiJiaLeMenuView._messageinfo.avatarShake(0),this._baiJiaLeBgView.starAnim(e.betPlace,this.isMove)):e.specialRole.length>4&&egret.error("specialRole:",e.specialRole),e.result){case 1:if(e.userid!=GamePlayerMgr.i.getPlayer().getUserId())return;var i=[];this._baiJiaLeModel._selfBetList.forEach(function(t){i.push(t.betPlace)}.bind(this)),this._baiJiaLeModel._meBetInfos.forEach(function(t){var e=i.indexOf(t.betPlace);e>-1&&(t.betMoney+=this._baiJiaLeModel._selfBetList[e].betMoney,this._baiJiaLeModel._selfBetAll+=this._baiJiaLeModel._selfBetList[e].betMoney)}.bind(this)),this._baiJiaLeBgView.showSelfBet(this._baiJiaLeModel._meBetInfos),this._baiJiaLeModel._balance=e.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)),this._baiJiaLeMenuView._messageinfo.setUserBet(App.CommonUtils.money2Str(this._baiJiaLeModel._selfBetAll)),this.initPreBet(),this._baiJiaLeBgView.clearPreBet();break;case 3:t.Application.textReminder(3);break;case 4:t.Application.textReminder(3)}this._baiJiaLeModel._selfBetList.length=0},i.prototype.onGameResultCallBack=function(t){console.log("结算开牌状态2",t),this._baiJiaLeModel._currWinAreaList=t.gameResultInfoList,this._baiJiaLeModel._awardMoney=0,this._baiJiaLeModel._balance=t.balance,this._baiJiaLeModel.bankOrPlayer.length=0,t.playerBetResultInfoList.forEach(function(t){this._baiJiaLeModel._awardMoney+=t.resultMoney}.bind(this));var e=[];t.gameResultInfoList.forEach(function(i){t.playerBetResultInfoList[i-1].resultMoney>0&&e.push(i)}.bind(this)),console.log("tempWinPlace",e),e.length>0&&e.forEach(function(t){this._baiJiaLeBgView.createWinChip(t,4)}.bind(this));var i=[];t.specialexchange.length>0&&t.specialexchange.forEach(function(t){t.winmoney>0&&(i.push(t.specialRole),this._baiJiaLeModel.specialWinList.push({role:t.specialRole,winmoney:t.winmoney}))}.bind(this)),console.log("specilWinRole",i),i.length>0&&i.forEach(function(t){for(var e in this._baiJiaLeModel._currWinAreaList)console.log("area",this._baiJiaLeModel._currWinAreaList[e]),this._baiJiaLeBgView.createWinChip(this._baiJiaLeModel._currWinAreaList[e],t)}.bind(this)),this._baiJiaLeModel._lastBetRecord.length=0,this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._meBetInfos)),Log.trace("保存当局投注",this._baiJiaLeModel._lastBetRecord)},i.prototype.showWinner=function(){if(console.log("showWinner",this._baiJiaLeModel._currWinAreaList),this._baiJiaLeBgView.coinAniClear(this._baiJiaLeModel._currWinAreaList),this._baiJiaLeModel.specialWinList.length>0)for(var t=0;t<this._baiJiaLeModel.specialWinList.length;t++){var e=this._baiJiaLeModel.specialWinList;this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(e[t].winmoney),e[t].role),this._baiJiaLeMenuView._messageinfo.getMoneyLight(e[t].role)}this._baiJiaLeModel._awardMoney>0&&(this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.getMoneyLight(4)),"player"==this._baiJiaLeModel._winner?(this._baiJiaLeBgView.showResultAnim(1),App.SoundManager.playEffect("player_win_mp3")):"banker"==this._baiJiaLeModel._winner?(this._baiJiaLeBgView.showResultAnim(2),App.SoundManager.playEffect("banker_win_mp3")):(this._baiJiaLeBgView.showResultAnim(3),App.SoundManager.playEffect("tie_mp3")),this._baiJiaLeModel._awardMoney>0&&(App.SoundManager.playEffect("win_game_mp3"),this.setRecordInit(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney))),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),App.TimerManager.doTimer(1500,1,function(){this._baiJiaLeModel._balance>0&&this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeBgView.resetStar(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0)}.bind(this),this),this._baiJiaLeModel.specialWinList=[]},i.prototype.onLeaveGameCallBack=function(){this.goBack2Room()},i.prototype.onRoadMapCallBack=function(t){var e=t.winPlaces.length;this._baiJiaLeModel._recordHistory=e>80?t.winPlaces.slice(e-80,e-1):t.winPlaces,this._baiJiaLeModel._issue=String(t.termno)},i.prototype.onLeaderBoardCallBack=function(t){Log.trace("排行版",t),this._baiJiaLePopupView.Ranking.rankData(t.LeaderInfo)},i.prototype.onOnlineNumberCallBack=function(t){this._baiJiaLeMenuView._toolBar.changeOnlineNum(t.OnlineNumber)},i.prototype.onSpecialPlayerCallBack=function(t){var e=t.specialPlayer,i=[];for(var o in e)i[e[o].playerrole]=e[o];for(var n=0;n<i.length;n++)this._baiJiaLeMenuView._messageinfo.setInformation(i[n],n,i.length)},i.prototype.onAddChipCallBack=function(t){console.log("onAddChipCallBack",t),this.setFiveChipAck(t)},i.prototype.onReconectCallBack=function(t){console.log("onReconectCallBack",t)},i.prototype.onTermnoCallBack=function(t){console.log("onTermnoCallBack",t),this._currIssue=t.termno,this._baiJiaLeBgView.setTermno(t.termno)},i.prototype.onGameStateCallBack=function(e){console.log("游戏状态改变",e),2==e.state&&(this._baiJiaLeModel._isBet=2,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(t.BaiJiaLeConst.GAME_STATE.BET),e.remaining_time>=14699?(Log.trace("开始洗牌"),this.shuffle(),App.SoundManager.playEffect("cardwash_mp3"),App.TimerManager.doTimer(2700,1,function(){this._baiJiaLeChipView.faPai()}.bind(this),this)):this._baiJiaLeChipView.showCard()),5==e.state&&(this._baiJiaLeModel._isBet=1,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(t.BaiJiaLeConst.GAME_STATE.AWARD),this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!1),this._baiJiaLeModel._onRewardActionTime=Math.floor(e.remaining_time/1e3),Log.trace("结算状态",this._baiJiaLeModel._onRewardActionTime)),this._baiJiaLeBgView._baiJiaLeTime.startTimer(e.remaining_time)},i.prototype.betPlaceInfosCallBack=function(){this._baiJiaLeModel._betPlaceInfos.length>0&&this._baiJiaLeBgView.showBetMoney(this._baiJiaLeModel._betPlaceInfos)},i.prototype.selBtnIndexCallBack=function(){Log.trace("选择按钮"),this._baiJiaLeMenuView._jeButton.toggleBtn(this._baiJiaLeModel._selBtnIndex-1),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.isBetCallBack=function(){1==this._baiJiaLeModel._isBet?(this._baiJiaLeMenuView._logicBtn.disabledConserBet(),this._baiJiaLeMenuView._logicBtn.disabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.disabledRepeatBet()):2==this._baiJiaLeModel._isBet&&(this._baiJiaLeMenuView._logicBtn.enabledConserBet(),this._baiJiaLeMenuView._logicBtn.enabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.enabledRepeatBet())},i.prototype._isAutoCheckedCallBack=function(){this._baiJiaLeMenuView._logicBtn.setAutoConfirm(this._baiJiaLeModel._isAutoChecked)},i.prototype.gameStatusCallback=function(){},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},i.prototype.shuffle=function(){this._shuffle||(this._shuffle=new t.Shuffle(this),this._baiJiaLeBgView.addChild(this._shuffle)),this._shuffle.init(),this._shuffle.anchorOffsetX=this._shuffle.width/2,this._shuffle.anchorOffsetX=this._shuffle.height/2,this._shuffle.x=StageUtils.getInstance().getWidth()/10*5.2,this._shuffle.y=StageUtils.getInstance().getHeight()/10*6,this._shuffle.scaleX=this._shuffle.scaleY=1,this._shuffle.rotation=0,this._shuffle.goToWash()},i.prototype.showRank=function(){this._baiJiaLePopupView.Ranking.showPopup();var t={index:1,size:10};this._baiJiaLeNet.requestLeaderBoard(t)},i.prototype.showRecord=function(){var t=this._baiJiaLeModel.recordList;this._baiJiaLePopupView.WinningRecord.showPopup(),this._baiJiaLePopupView.WinningRecord.rankData(t)},i.prototype.setRecordInit=function(t){var e=this._currIssue,i=t,o={issue:e,hit_money:i};this._baiJiaLeModel.recordList.unshift(o)},i.prototype.showGameSet=function(){this._baiJiaLePopupView.GameSet.initSet(),this._baiJiaLePopupView.GameSet.showPopup()},i.prototype.showRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:-90},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:-90},200,egret.Ease.sineInOut),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),this._baiJiaLeMenuView._roadMap.showRoadMap(),this.isMove=!0},i.prototype.closeRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:0},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:0},200,egret.Ease.sineInOut),this.isMove=!1},i.prototype.confirmShowhand=function(){var t={betMoney:this._baiJiaLeModel._balance,betPlace:this._baiJiaLeModel._betPlace},e={tableid:GameModuleMgr.i.getCurrDeskId()};if(this._baiJiaLeModel._isAutoChecked){var i=[],o=[];i.push(t),o.push(e);var n={betInfo:i,tableinfo:o};this._baiJiaLeNet.requestBet(n)}else this._baiJiaLeModel._preBetInfos.forEach(function(t){this._baiJiaLeModel._betPlace==t.betPlace&&(t.betMoney+=this._baiJiaLeModel._balance)}.bind(this)),this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)},i.prototype.touch=function(t){Log.trace("触摸",t),this._baiJiaLeModel._selBtnIndex=t+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex)},i.prototype.setAutoBet=function(t){this._baiJiaLeModel._isAutoChecked=t},i.prototype.confirmBet=function(){var t=[];this._baiJiaLeModel._preBetInfos.forEach(function(e){e.betMoney>0&&(t.push(e),this._baiJiaLeModel._selfBetList.push(e))}.bind(this));var e={tableid:GameModuleMgr.i.getCurrDeskId()},i=[];i.push(e);var o={betInfo:t,tableinfo:i};this._baiJiaLeNet.requestBet(o)},i.prototype.conserBet=function(){this.initPreBet(),this._baiJiaLeModel._selfBetList.length=0,this._baiJiaLeBgView.clearPreBet()},i.prototype.repeatBet=function(){if(this._baiJiaLeModel._isAutoChecked){var t=[],e={tableid:GameModuleMgr.i.getCurrDeskId()},i=[];i.push(e),Log.trace("上一次的下注记录",this._baiJiaLeModel._lastBetRecord),this._baiJiaLeModel._lastBetRecord.forEach(function(e){e.betMoney>0&&(t.push(e),this._baiJiaLeModel._selfBetList.push(e))}.bind(this));var o={betInfo:t,tableinfo:i};t.length>0&&this._baiJiaLeNet.requestBet(o)}else this._baiJiaLeModel._preBetInfos.forEach(function(t,e){t.betMoney+=this._baiJiaLeModel._lastBetRecord[e].betMoney}.bind(this)),this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)},i.prototype.ShowHandBtn=function(t){2==this._baiJiaLeModel._isBet&&(this._baiJiaLeModel._selBtnIndex=t+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex))},i.prototype.backToDesk=function(){this._baiJiaLeNet.requestExitDesk()},i.prototype.bet=function(t){if(Log.trace("投注额",this._baiJiaLeModel._betNum,"玩家余额",this._baiJiaLeModel._balance),this._baiJiaLeModel._betNum||0==this._baiJiaLeModel._betNum||(this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0]),2==this._baiJiaLeModel._isBet){if(1==t||2==t)if(0==this._baiJiaLeModel.bankOrPlayer.length)this._baiJiaLeModel.bankOrPlayer.push(t);else if(this._baiJiaLeModel.bankOrPlayer.length>0&&t!=this._baiJiaLeModel.bankOrPlayer[0])return void App.ScrollTxtTips.showTip("不能同时投注庄和闲");this._baiJiaLeModel._betPlace=t;var e={betMoney:App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum),betPlace:t},i={tableid:GameModuleMgr.i.getCurrDeskId()},o=[];if(o.push(i),0!=this._baiJiaLeModel._betNum)if(this._baiJiaLeModel._isAutoChecked){var n=[];n.push(e);var s={betInfo:n,tableinfo:o};this._baiJiaLeNet.requestBet(s),this._baiJiaLeModel._selfBetList.length=0,this._baiJiaLeModel._selfBetList.push(e)}else this._baiJiaLeModel._preBetInfos.forEach(function(e){t==e.betPlace&&(e.betMoney+=App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum))}.bind(this)),this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos);else(0==this._baiJiaLeModel._betNum||App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>=this._baiJiaLeModel._balance)&&this._baiJiaLePopupView.Prompt.showPrompt(2,App.CommonUtils.moneyself(this._baiJiaLeModel._balance))}},i.prototype.getFiveChip=function(t){var e="";e=JSON.stringify(t);var i={tableid:GameModuleMgr.i.getCurrDeskId()},o={chip:e,tableinfo:i};this._baiJiaLeNet.requestAddChip(o)},i.prototype.setFiveChipAck=function(t){var e;e=t.chip?JSON.parse(t.chip):[0,3,6,8,9],this._baiJiaLeModel._chipArray=e,this._baiJiaLeMenuView._jeButton.setBtnChip(e),this._baiJiaLeMenuView._jeButton.setchipValue(this._baiJiaLeModel._multiple),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.changeMultiple=function(t){this._baiJiaLeModel._multiple=t,this._baiJiaLeMenuView._jeButton.setchipValue(t)},i.prototype.getChipValue=function(t){Log.trace("当前筹码数组",t),this._baiJiaLeModel._currChipMoney=t,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.getStartPos=function(){return this._baiJiaLeMenuView._messageinfo.getPoint()},i.prototype.MSGSuccess=function(t){return"1"==t?!0:!1},i.prototype.initSelfBet=function(){this._baiJiaLeModel._meBetInfos.forEach(function(t){t.betMoney=0}.bind(this))},i.prototype.initPreBet=function(){this._baiJiaLeModel._preBetInfos.forEach(function(t){t.betMoney=0}.bind(this))},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._shuffle&&this._shuffle.destroy(),common.StarExpand.cleanFormPool(),this._baiJiaLeBgView._baiJiaLeTime.destroy(),this._baiJiaLeModel.destroy(),this._baiJiaLeNet.destroy(),this._baiJiaLeMenuView.destroy(),this._baiJiaLePopupView.destroy(),this._baiJiaLeAniView.destroy(),this._baiJiaLeChipView.destroy(),this._baiJiaLeBgView.destroy(),this._baiJiaLeModel=void 0,this._baiJiaLeNet=void 0,this._baiJiaLeMenuView=void 0,this._baiJiaLePopupView=void 0,this._baiJiaLeAniView=void 0,this._baiJiaLeChipView=void 0,this._baiJiaLeBgView=void 0,this._shuffle=void 0,this._player=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"baiJiaLe.GameController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.initData=function(){this._selfInfo={},this._gameStatusInfo={},this._betPlaceInfos=[],this._balance=0,this._meBetInfos=[{betPlace:1,betMoney:0},{betPlace:2,betMoney:0},{betPlace:3,betMoney:0},{betPlace:4,betMoney:0},{betPlace:5,betMoney:0},{betPlace:6,betMoney:0},{betPlace:7,betMoney:0},{betPlace:8,betMoney:0},{betPlace:9,betMoney:0}],this._preBetInfos=[{betPlace:1,betMoney:0},{betPlace:2,betMoney:0},{betPlace:3,betMoney:0},{betPlace:4,betMoney:0},{betPlace:5,betMoney:0},{betPlace:6,betMoney:0},{betPlace:7,betMoney:0},{betPlace:8,betMoney:0},{betPlace:9,betMoney:0}],this._issue="",this._recordHistory=[],this._selfBetAll=0,this._selfBetList=[],this._onlineNum=0,this._awardHistory=[],this._isBet=0,this._isAutoChecked=!1,this._awardMoney=0,this._lastBetRecord={},this._selBtnIndex=-1,this._selfPreBetList=[],this._betPlace=0,this._chipArray=[0,3,6,8,9],this._multiple=1,this._currChipMoney=[1,10,100,1e3,0],this._currWinAreaList=[],this.recordList=[],this.tableType=1,this.specialWinList=[],this.bankOrPlayer=[]},i.prototype.initDataNotify=function(){this._selfInfoDataNotify=t.DataNotify.create({}),this._awardHistoryDataNotify=t.DataNotify.create({}),this._onlineNumDataNotify=t.DataNotify.create(0),this._gameStatusInfoDataNotify=t.DataNotify.create(0),this._betPlaceInfosDataNotify=t.DataNotify.create(this._betPlaceInfos),this._selBtnIndexNotify=t.DataNotify.create(this._selBtnIndex),this._isBetDataNotify=t.DataNotify.create(this._isBet),this._isAutoCheckedDataNotify=t.DataNotify.create(this._isAutoChecked)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._selfInfo=void 0,this._gameStatusInfo=void 0,this._betPlaceInfos=void 0,this._meBetInfos=void 0,this._preBetInfos=void 0,this._recordHistory=void 0,this._selfBetList=void 0,this._awardHistory=void 0,this._lastBetRecord=void 0,this._selfPreBetList=void 0,this._selfInfoDataNotify=void 0,this._awardHistoryDataNotify=void 0,this._onlineNumDataNotify=void 0,this._gameStatusInfoDataNotify=void 0,this._betPlaceInfosDataNotify=void 0,this._selBtnIndexNotify=void 0,this._isBetDataNotify=void 0,this._isAutoCheckedDataNotify=void 0,this._chipArray.length=0,this._chipArray=void 0,this._currChipMoney.length=0,this._currChipMoney=void 0,this._multiple=void 0,this._currWinAreaList=void 0,this.recordList=void 0,this.tableType=void 0,this.specialWinList=void 0,this.bankOrPlayer=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"baiJiaLe.GameModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.getCardWithNum=function(t){console.log(t);var e=t>>16,i=(65535&t)>>8;if(0==e)var o="spade";else if(1==e)var o="heart";else if(2==e)var o="flower";else if(3==e)var o="block";var n="ui_hhdz_data_card_json.card_hhdz_"+o+"_"+i;return 0==e&&0==i&&(n=""),console.log("服务端发来的牌",n),n},t.getNumObj=function(t){var e=String(t).split(""),i={w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4])}for(var o in i)0==i[o]&&delete i[o];return i},t.getBetNum=function(t,e){t.forEach(function(t){1==t.betType?e.black+=t.betNum:2==t.betType?e.red+=t.betNum:e.lucky+=t.betNum})},t.isRepeat=function(t){var e={};for(var i in t){if(e[t[i]])return!0;e[t[i]]=!0}return!1},t.textReminder=function(t){switch(t){case 1:App.ScrollTxtTips.showTip("下注位置错误");break;case 2:App.ScrollTxtTips.showTip("下注金额太小或太大溢出");break;case 3:App.ScrollTxtTips.showTip("非投注阶段，请稍后");break;case 4:App.ScrollTxtTips.showTip("超出单人限额");break;case 5:App.ScrollTxtTips.showTip("超出所有人总共限额");break;case 6:App.ScrollTxtTips.showTip("没有足够的余额");break;case 7:App.ScrollTxtTips.showTip("充值接口后期统一制作")}},t}();t.Application=e,__reflect(e.prototype,"baiJiaLe.Application")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(BaseEuiView);t.BaiJiaLeAniView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeAniView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="BaiJiaLeChipViewSkin",o._baiJiaLeBtnArea.initComponent(t),o}return __extends(i,e),i.prototype.initAllPaiStatus=function(){var t=this;Log.trace("初始化牌的位置状态"),this._imageCardGroup.$children.forEach(function(e){var i=e;i.source="common_ui_cardback_png",i.x=t._pokerModel.x,i.y=t._pokerModel.y,i.scaleX=t._pokerModel.scaleX,i.scaleY=t._pokerModel.scaleY,i.rotation=t._pokerModel.rotation,i.alpha=t._pokerModel.alpha}),this._playerNumBox.alpha=0,this._bankerNumBox.alpha=0},i.prototype.faPai=function(){egret.Tween.get(this._playerPai1).wait(400).to({x:this._imgPos1.x,y:this._imgPos1.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(800).to({x:this._imgPos2.x,y:this._imgPos2.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(1200).to({x:this._imgPos3.x,y:this._imgPos3.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(1600).to({x:this._imgPos4.x,y:this._imgPos4.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,400),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,800),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1200),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1600)},i.prototype.showCard=function(){this.showCardItem(this._playerPai1,this._imgPos1),this.showCardItem(this._bankerPai1,this._imgPos2),this.showCardItem(this._playerPai2,this._imgPos3),this.showCardItem(this._bankerPai2,this._imgPos4)},i.prototype.showCardItem=function(t,e){t.x=e.x,t.y=e.y,t.scaleX=t.scaleY=1,t.rotation=0,t.alpha=1},i.prototype.buPai=function(t,e){var i=this.getCardWithNum(t),o=this.getCardWithNum(e);""!=i&&egret.Tween.get(this._playerPaiBu).wait(0).to({x:this._imgPos5.x,y:this._imgPos5.y,scaleX:1,scaleY:1,rotation:90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._playerPaiBu.source=i}.bind(this)).to({scaleY:1},200),""!=o&&egret.Tween.get(this._bankerPaiBu).wait(500).to({x:this._imgPos6.x,y:this._imgPos6.y,scaleX:1,scaleY:1,rotation:-90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._bankerPaiBu.source=o}.bind(this)).to({scaleY:1},200)},i.prototype.buPaiShow=function(t,e){var i=this.getCardWithNum(t),o=this.getCardWithNum(e);""!=i&&(this._playerPaiBu.x=this._imgPos5.x,this._playerPaiBu.y=this._imgPos5.y,this._playerPaiBu.scaleX=this._playerPaiBu.scaleY=1,this._playerPaiBu.rotation=90,this._playerPaiBu.alpha=1,this._playerPaiBu.source=i),R.setTimeOnce(function(){""!=o&&(this._bankerPaiBu.x=this._imgPos6.x,this._bankerPaiBu.y=this._imgPos6.y,this._bankerPaiBu.scaleX=this._bankerPaiBu.scaleY=1,this._bankerPaiBu.rotation=90,this._bankerPaiBu.alpha=1,this._bankerPaiBu.source=o)},this,2e3)},i.prototype.kaiPai=function(t,e){egret.Tween.get(this._playerPai1).wait(200).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[0]);this._playerPai1.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(400).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[1]);this._playerPai2.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(600).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[0]);this._bankerPai1.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(800).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[1]);this._bankerPai2.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.liangpai=function(t,e){this._playerPai1.source=this.getCardWithNum(e[0]),this._playerPai2.source=this.getCardWithNum(e[1]),this._bankerPai1.source=this.getCardWithNum(t[0]),this._bankerPai2.source=this.getCardWithNum(t[1])},i.prototype.setLbNum=function(t,e){this._playerNumBox.alpha=1,this._bankerNumBox.alpha=1,this._playerNum.text=t+"",this._bankerNum.text=e+""},i.prototype.isDouble=function(e){var i=[],o=e.slice(0,2);o.forEach(function(t){i.push(this.getCardNumber(t))}.bind(this));var n=t.Application.isRepeat(i);return n},i.prototype.getCardWithNum=function(t){var e=t>>16,i=(65535&t)>>8,o=11==i?"j":12==i?"q":13==i?"k":i;if(egret.log("hua:",e),egret.log("number:",o),0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s=""),egret.log("cardStr:",s),s},i.prototype.getCardNumber=function(t){var e=(65535&t)>>8;return e},i.prototype.setBtnArea=function(t){this._baiJiaLeBtnArea.setBtnArea(t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._baiJiaLeBtnArea.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._baiJiaLeBtnArea.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),egret.Tween.removeTweens(this._playerPai1),egret.Tween.removeTweens(this._bankerPai1),egret.Tween.removeTweens(this._playerPai2),egret.Tween.removeTweens(this._bankerPai2),this._baiJiaLeBtnArea.destroy()},i}(BaseEuiView);t.BaiJiaLeChipView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeChipView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._approach=null,o.skinName="BaiJiaLeMenuViewSkin",o._jeButton.initComponent(e),o._logicBtn.initComponent(e),o._toolBar.initComponent(e),o._roadMap.initComponent(e),o.initUI(),o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),Log.trace("初始化BaiJiaLeMenuView");var e=this.getBaseController().getModel();this._jeButton.createChip(e._chipArray),this._jeButton.setchipValue(e._multiple),this._messageinfo.allPlayerDisplay(),this._messageinfo.initInfo()},e.prototype.initData=function(){t.prototype.initData.call(this)},e.prototype.changeTablebtnEffect=function(){this.diceInit(),this.diceInitRenders(),this._approach.play(0)},e.prototype.diceInit=function(){this._approach||(this._approach=new common.comBones)},e.prototype.diceInitRenders=function(){if(!this._approach.parent){var t="table";this._changeTableBtn.addChild(this._approach),this._approach.updateId(t)}},e.prototype.onChangeTableHandler=function(){Log.trace("点击换桌",this._approach.y);var t=this.getBaseController();egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:0},80).call(function(){t.applyFunc("changeTableReq")},this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._changeTableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._changeTableBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._jeButton.destroy(),this._logicBtn.destroy(),this._toolBar.destroy(),this._roadMap.destroy(),this._approach&&this._approach.destroy()},e}(BaseEuiView);t.BaiJiaLeMenuView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeMenuView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="BaiJiaLePopupViewSkin",o.Prompt.initComponent(e),o.SetChip.initComponent(e),o.BaiJiaLeHelp.initComponent(),o.BaiJiaLeChangeTable.initComponent(),o.initUI(),o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.SetChip.getcoordinate(),this.SetChip.createChip()},e.prototype.setDefaultChip=function(t){this.SetChip.setDefaultChip(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.SetChip.addEvent(),this.BaiJiaLeChangeTable.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.SetChip.removeEvent(),this.BaiJiaLeChangeTable.removeEvent()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this.Prompt.destroy(),this.BaiJiaLeHelp.destroy(),this.SetChip.destroy()},e}(BaseEuiView);t.BaiJiaLePopupView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLePopupView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(BaseEuiView);t.BaiJiaLeTipsView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeTipsView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeBgViewSkin")||this;return i.currentY=0,i._delayTime=1e3,i.coinBox=[],i.allChipList=[],i.winpos=[],i._baiJiaLeTime.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.initCoinBox(),this.initBoneAnim(),this.resetHighLightArea(),this.clearCoin(),this.createHeadPosition(),this.initBroadcast(LayerManager.UI_Tips)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}for(var i=0;6>i;i++){var o={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0}};
this.coinBox.push(o)}},i.prototype.randomNum=function(){return Math.random()},i.prototype.initBoneAnim=function(){this._timer=new egret.Timer(3e3,1),this._timer.addEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._heAnim=new common.comBones,this._heAnim.updateId("HeAnim",["HeAnim"]),this._xianAnim=new common.comBones,this._xianAnim.updateId("XianAnim",["XianAnim"]),this._zhuangAnim=new common.comBones,this._zhuangAnim.updateId("ZhuangAnim",["ZhuangAnim"])},i.prototype.resetHighLightArea=function(){for(var t in this._highLight.$children)this._highLight.$children[t].visible=!1},i.prototype.showHighLightArea=function(t){var e=this.getBaseController().getModel();2==e.tableType&&(App.ArrayUtils.removeOfArray(t,8),App.ArrayUtils.removeOfArray(t,9)),t.forEach(function(t){var e=this["_highLight"+t];e.visible=!0,e.tw=egret.Tween.get(e),e.tw.to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){e.visible=!1,egret.Tween.removeTweens(e)},e)}.bind(this))},i.prototype.showBetMoney=function(t){t.forEach(function(t){var e=this["_scoreGroupItem"+t.betPlace];e.$children[0].text=""+App.CommonUtils.money2StrTwo(t.betMoney),this.showCoin(t.betPlace,t.betMoney)}.bind(this))},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.showCoin=function(e,i){var o=t.Application.getNumObj(App.CommonUtils.money(i)),n=Object.keys(o),s=this["_chipGroupItem"+e].$children[0],r=this["_chipGroupItem"+e].$children[1],a=this["_chipGroupItem"+e].$children[2];this.renderCoinType(n[0],o[n[0]],this.coinBox[e-1].coinBoxObj0,s),4>e&&(n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e-1].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e-1].coinBoxObj1._coinType="",this.coinBox[e-1].coinBoxObj1._coinNum=0,this.coinBox[e-1].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e-1].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e-1].coinBoxObj2._coinType="",this.coinBox[e-1].coinBoxObj2._coinNum=0,this.coinBox[e-1].coinBoxObj2._currentY=0))},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"w":s="ui_coin_json.common_ui_t10000",n=1e4;break;case"q":s="ui_coin_json.common_ui_t1000",n=1e3;break;case"b":s="ui_coin_json.common_ui_t100",n=100;break;case"s":s="ui_coin_json.common_ui_t10",n=10;break;case"g":s="ui_coin_json.common_ui_t1",n=1}for(var r=0,a=-60,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(this.randomNum()>.65){var i=this.randomNum();h=i>.5?2:-2}else h=0;egret.Tween.get(l[e]).wait(100*e).to({y:o._currentY,x:h},100,egret.Ease.sineInOut),function(t){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[t].alpha=1},this,100*t)}(e),o._currentY-=5}.bind(this))},i.prototype.resetStar=function(){for(var t=1;9>=t;t++)this["_starEndPos"+t].visible=!1},i.prototype.starAnim=function(t,e){var i=this.getBaseController(),o=i.getStartPos(),n=this.getMiddlePos(t),s=this.getEndPos(t,e),r=common.StarExpand.create();if(r){r.init(this);var a=App.MathUtils.getDistance2(o,s)+400;r.run(o,n,s,a,function(){this["_starEndPos"+t].visible=!0},this)}},i.prototype.getMiddlePos=function(t){var e=this["_middlePos"+t],i=this._middlePos.localToGlobal(e.x,e.y);return i},i.prototype.getEndPos=function(t,e){var i=this["_starEndPos"+t],o=e?i.x+140:i.x,n=this._starEndPos.localToGlobal(o,i.y);return n},i.prototype.showResultAnim=function(t){switch(t){case 1:this._resultAnim.addChild(this._xianAnim),this._xianAnim.play(1,1,"XianAnim");break;case 2:this._resultAnim.addChild(this._zhuangAnim),this._zhuangAnim.play(1,1,"ZhuangAnim");break;case 3:this._resultAnim.addChild(this._heAnim),this._heAnim.play(1,1,"HeAnim")}this._timer.start()},i.prototype.afterShowReslt=function(){this._resultAnim.removeChildren(),this._timer.stop(),this._timer.reset()},i.prototype.createWinChip=function(t,e){var i=this["ChipPos"+t],o=this["_chipGroupItem"+t];console.log("筹码位置点",i);var n,s,r=this.winpos[e];n=i.x,s=i.y;for(var a=this.GroupChip.globalToLocal(r.x,r.y),h=0;5>h;h++){var l=App.MathUtils.random(0,o.width),p=App.MathUtils.random(0,o.height),c=common.chipBtn.create();c.init(h),c.setNameNum(e);var u=Math.floor(n+l),d=Math.floor(s+p),m=Math.floor(a.x),y=Math.floor(a.y);this.GroupChip.addChild(c),c.x=o.x+o.width/2,c.y=o.y+o.height/2,c.scaleX=.5,c.scaleY=.5,c.alpha=0,c.setScore(),c.setFlyX(u),c.setFlyY(d),c.setFlyChipX(m),c.setFlyChipY(y),this.allChipList.push(c)}Log.trace("GroupChip",this.GroupChip.$children)},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,150),this.showHighLightArea(t)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.coinFlicker=function(t){t.forEach(function(t){Log.trace("winPlace",t);var e=this["_chipGroupItem"+t];egret.Tween.get(e).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){e.visible=!0,egret.Tween.removeTweens(e)},e)}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){var e=this["_chipGroupItem"+t];e.alpha=1}.bind(this))},i.prototype.flyWinChip=function(){Log.trace("飞筹码1",this.allChipList),this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()}),this.allChipList.length=0,Log.trace("飞筹码2",this.allChipList)},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.showSelfBet=function(t){t.forEach(function(t){var e=this["_scoreGroupItem"+t.betPlace];e.$children[1].text=""+App.CommonUtils.money2StrTwo(t.betMoney)}.bind(this))},i.prototype.showPreBet=function(t){t.forEach(function(t){var e=this["_scoreGroupItem"+t.betPlace];t.betMoney>0?e.$children[2].text=""+App.CommonUtils.money2StrTwo(t.betMoney):e.$children[2].text=""}.bind(this))},i.prototype.clearCoin=function(){for(var t=1;10>t;t++)if(this["_scoreGroupItem"+t].$children[0].text="",this["_scoreGroupItem"+t].$children[1].text="",this["_scoreGroupItem"+t].$children[2].text="",this["_chipGroupItem"+t].$children[0].removeChildren(),4>t)for(var e=0;3>e;e++)this.removeCoins(this["_chipGroupItem"+t].getChildAt(e))},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.clearPreBet=function(){for(var t=1;10>t;t++)this["_scoreGroupItem"+t].$children[2].text=""},i.prototype.setTermno=function(t){this._issue.text="期号:"+t},i.prototype.setTableBG=function(t){this.table_bg.source=1==t?"baijiale_ui_table_jpg":"bjl_ui_caipiaozhuo_jpg",this._scoreGroupItem8.visible=1==t,this._scoreGroupItem9.visible=1==t,this.lottery_bg.visible=2==t,this._issue.size=1==t?18:16,this._baiJiaLeTime.setCurryTimer(t)},i.prototype.showLotteryBall=function(t){this.lottery_bg.$children.forEach(function(t){Log.trace("小球",t)})},i.prototype.onChangeTableHandler=function(){Log.trace("点击换桌"),egret.Tween.get(this._changeTableBtn).to({y:this._changeTableBtn.y+10},80).to({y:this._changeTableBtn.y},80)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.changeTableTrigger,this.onChangeTableHandler,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.changeTableTrigger)},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._baiJiaLeTime.destroy(),this._chipList=null,this._chipImgList=null,this.coinBox=null,this._heAnim&&(this._heAnim.clean(),this._heAnim.destroy(),this._heAnim=void 0),this._xianAnim&&(this._xianAnim.clean(),this._xianAnim.destroy(),this._xianAnim=void 0),this._zhuangAnim&&(this._zhuangAnim.clean(),this._zhuangAnim.destroy(),this._zhuangAnim=void 0),this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._timer.stop()),this._timer=null,this.clearFlyWinChip()},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"baiJiaLe.GameView")}(baiJiaLe||(baiJiaLe={}));var Main=function(t){function e(){var e=t.call(this)||this;return e._hotGame=null,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this._hotGame=new HotGame,this._hotGame.initScene(),this.initLifecycle(),this.loadResConfig()},e.prototype.initLifecycle=function(){var t=this;egret.lifecycle.onPause=function(){App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Pause),App.Socket.setPause(!0),App.IsSimulate&&(e.onPause(),egret.ticker.pause())},egret.lifecycle.onResume=function(){App.IsSimulate&&(e.onResume(),egret.ticker.resume()),t._hotGame.onHeart(),App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Resume),App.Socket.setPause(!1)}},e.onPause=function(){this._mTimePauseResume=egret.getTimer()},e.onResume=function(){this._mTimePauseResume=egret.getTimer()-this._mTimePauseResume,this._mTimePauseResume>GameBase.reConnetTime&&App.IsSimulate&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},e.prototype.loadResConfig=function(){EXML.prefixURL="static/";App.ResourceUtils.addConfig("resource.json","static/resource/"),App.ResourceUtils.addConfig("config/game_config.json","static/resource/"),App.ResourceUtils.loadConfig(this.onConfigComplete,this)},e.prototype.onConfigComplete=function(){var t=new eui.Theme("static/resource/theme.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){var t=["game_config","preload_loading"];App.ResourceUtils.loadGroups("Init_Config",t,this.onResourceLoadComplete,this.onResourceLoadProgress,this)},e.prototype.onResourceLoadComplete=function(){egret.log("===== Main onResourceLoadComplete ====="),App.Init(),this._hotGame.showLoading(),App.DeviceUtils.IsNative?(GameBase.IsTest=!1,App.IsSimulate=!0,App.IsOpenToolView=!1,GameNative.initNativeExternal(),HotUpdateMgr.getInstance().initUrls(),HotUpdateMgr.getInstance().initUrlsUg(),R.setTimeOut(function(){GameNative.sendToNative(GameNative.GameReadyComplete,"")},this,100)):(removeLoadingDiv(),GameBase.getDeviceId()||GameBase.saveLocalData("GameDeviceId",m.LocalData.GenerateUUID()),this._hotGame.start()),App.IsOpenToolView&&ToolView.i()},e.prototype.onResourceLoadProgress=function(t,e){egret.log("初始化：",t,"/",e)},e._mTimePauseResume=0,e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var base;!function(t){var e=function(){function t(){}return t.Goto_Leave_Game="Goto_Leave_the_Game",t.Goto_Leave_Desk="Goto_Leave_the_Desk",t}();t.BaseConst=e,__reflect(e.prototype,"base.BaseConst")}(base||(base={}));var base;!function(t){var e=function(){function t(){}return t.CsWorldLeaveSceneReqType=10104,t.ScWorldLeaveSceneResType=10105,t.CsWorldLeaveTableReqType=10148,t.ScWorldLeaveTableResType=10149,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"base.ProxyKeyConst")}(base||(base={}));var base;!function(t){var e;!function(t){t[t.Base=1e3]="Base"}(e=t.ViewConst||(t.ViewConst={}))}(base||(base={}));var ErrorManager=function(){function t(){this._config=null,this._config=RES.getRes(App.GlobalData.ErrorConfig)}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Error_Msg_Tips_Show",{get:function(){return BaseProxy.Socket_CMD+"10051"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ec",{get:function(){return t.i.ErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ErrorCode",{get:function(){return hqtpb.common.ErrorCode},enumerable:!0,configurable:!0}),t.prototype.getErrorByData=function(t){var e=t.description?t.description:this.getError(t.code);return e=e&&e.length>0?e:"未知错误："+t.code},t.prototype.getError=function(t){return this._config[""+t]||""},t.prototype.showError=function(e){App.MessageCenter.dispatch(t.Error_Msg_Tips_Show,{description:e})},t._instance=null,t}();__reflect(ErrorManager.prototype,"ErrorManager");var GameBase=function(){function t(){}return Object.defineProperty(t,"AssetsServerIp",{get:function(){return t.getLocalData("_mAssetsServerIp")},enumerable:!0,configurable:!0}),t.saveResoureServerIp=function(e){t.saveLocalData("_mAssetsServerIp",e)},Object.defineProperty(t,"GameServerIp",{get:function(){return t.getLocalData("_mGameServerIp")},enumerable:!0,configurable:!0}),t.saveGameServerIp=function(e){t.saveLocalData("_mGameServerIp",e)},Object.defineProperty(t,"CurrAppVersion",{get:function(){return t._mCurrAppVersion},enumerable:!0,configurable:!0}),t.initCurrAppVersion=function(e){t._mCurrAppVersion=e},t.getMainVersion=function(){var e=App.GlobalData.WebVer?App.GlobalData.WebVer:"v1.8.x";return App.DeviceUtils.IsNative&&(e=t.getLocalData("last_main_version_s"),e=e?e.split("_").join("."):t.CurrAppVersion),e+"."+t._mCodeVersion},t.getGameVersion=function(e){var i=t.getLocalData("last_"+e+"_version_s");return i?i.split("_").join("."):"v0.0.1"},t.getDeviceId=function(){return t.getLocalData("GameDeviceId")},t.getCurrServerTime=function(){var e=egret.getTimer()-t._currOldTime;return t._currServerTime+e},t.saveCurrServerTime=function(e){t._currOldTime=egret.getTimer(),t._currServerTime=e},t.getLocalData=function(e){return m.LocalData.getLocalData(t.CurrAppVersion+e)},t.saveLocalData=function(e,i){m.LocalData.saveLocalData(t.CurrAppVersion+e,i)},t.setScaleModeNormal=function(){App.StageUtils.setScaleMode(egret.StageScaleMode.FIXED_HEIGHT)},t.setScaleModeSpecial=function(){App.StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT)},t._mCodeVersion="105",t.IsTest=!0,t.reConnetTime=18e4,t.GameWidth=1120,t.GameHeight=630,t._mCurrAppVersion="v1.8.0",t.mIsPublicDownloaded=!1,t._currServerTime=0,t._currOldTime=0,t}();__reflect(GameBase.prototype,"GameBase");var GameModuleMgr=function(){function t(){this._mCurrGame=null,this._mGameEntrances={},this._mCurrSceneType=0,this._mCurrSceneId=0,this._mCurrDeskId=0,this._mCurrDeskType=0,this._mIsBack2Game=!1,this._mIsGameLineOut=!1}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initGameMoudle=function(){this._mArrGameMoudel=[];var t=App.GlobalData.Games;egret.log("initGameMoudle: ",t);for(var e in t){var i=t[e],o=new GameMoudleInfo;o.key=e,o.gameName=i.title,o.gameIcon=i.icon,o.isOpen=i.isOpen,o.isHotGame=i.isHotGame,o.gameIndex=i.index,o.isRoom=i.isRoom,o.isDesk=i.isDesk,o.gameIconAnim=i.animRes;for(var n=i.gameType.split("|"),s=0;s<n.length;s++)o.mArrGameType.push(parseInt(n[s]));this._mArrGameMoudel.push(o)}},t.prototype.getGameEntrace=function(){var t=this.getGame();if(t){var e=this._mGameEntrances[t.key];if(!e){var i=egret.getDefinitionByName(t.key+".Entrance."+t.key);this._mGameEntrances[t.key]=e=new i}return e}},t.prototype.getGame=function(){return this._mCurrGame},t.prototype.getGameByName=function(t){var e=this._mArrGameMoudel;for(var i in e)if(e[i].key==t)return e[i];return egret.error("未配置游戏类型：",t),null},t.prototype.getGameByType=function(t){var e=this._mArrGameMoudel;for(var i in e)for(var o=e[i].mArrGameType,n=o.length-1;n>=0;n--)if(o[n]==t)return e[i];return egret.error("未配置游戏类型：",t),null},t.prototype.startGame=function(t){this._mCurrGame=this.getGameByName(t),this._mCurrGame&&(this._mIsGameLineOut=!1,App.EasyLoading.showLoading(),App.TimerManager.doFrame(1,0,this.publicDownloaded,this),App.MessageCenter.addListener(SocketConst.SOCKET_START_RECONNECT,this.onReconnentting,this),egret.log("开始游戏：",t))},t.prototype.startGameByType=function(t){var e=this.getGameByType(t);e&&this.startGame(e.key)},t.prototype.publicDownloaded=function(){if(GameBase.mIsPublicDownloaded){App.TimerManager.remove(this.publicDownloaded,this);var t=this.getGame();t.loaded?this.onConfigComplete():(App.ResourceUtils.addConfig("games/"+t.key+"/config/res_"+t.key+".json","static/resource/"),App.ResourceUtils.loadConfig(this.onConfigComplete,this))}},t.prototype.onReconnentting=function(){egret.warn("游戏中掉线了"),this._mIsGameLineOut=!0},Object.defineProperty(t.prototype,"mIsGameLineOut",{get:function(){return this._mIsGameLineOut},enumerable:!0,configurable:!0}),t.prototype.backRoomScene=function(){(App.isInGame||App.isInDesk)&&(this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room))},t.prototype.backDeskScene=function(){App.isInRoom?this.sendLoginGame2():App.isInGame&&(this.createScene(ControllerConst.Desk),this.initializeScene(SceneConsts.Desk,ControllerConst.Desk))},t.prototype.enterGameFromDesk=function(t){App.isInDesk&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,App.EasyLoading.showLoading(),this._mEnterGameInfo=t,this.loginOnDesk(),egret.log("enterGameFromDesk:",t))},t.prototype.enterGameFromRoom=function(t){App.isInRoom&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,App.EasyLoading.showLoading(),this._mEnterGameInfo=t,this.sendLoginGame(this._mEnterGameInfo.sceneType),egret.log("enterGameFromRoom:",t))},t.prototype.exitRoom=function(){egret.log("退出房间清理");var t=this.getGame();if(t){egret.log("退出房间清理-成功");var e=t.key,i=t.key+"_room";RES.isGroupLoaded(e)&&RES.destroyRes(e),RES.isGroupLoaded(i)&&RES.destroyRes(i),t.isRoDLoaded=!1,t.isGameLoaded=!1,this._mIsGameLineOut=!1,this.removeGC(),this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrDeskType=0,this._mCurrSceneType=0,this.removeEvent()}},t.prototype.removeGC=function(){App.ControllerManager.isExists(ControllerConst.Game)&&this.exitGame(),App.ControllerManager.isExists(ControllerConst.Desk)&&App.ControllerManager.unregister(ControllerConst.Desk)},t.prototype.exitGame=function(){egret.log("退出游戏清理");var t=this.getGame();if(t){egret.log("退出游戏清理-成功"),App.ControllerManager.unregister(ControllerConst.Game),ScrollTxtTips.i.cleanAll();var e=this.getGameEntrace();e&&e.destroy(),t.isRoDLoaded||(RES.destroyRes(t.key),t.isGameLoaded=!1,this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrSceneType=0,this.removeEvent()),App.isInLobby||(App.DragonBonesFactory.clear(),egret.Tween.removeAllTweens()),this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mEnterGameInfo=void 0}},t.prototype.onConfigComplete=function(){var t=this.getGame();t.loaded=!0;var e=t.key;t.isRoD&&(e=t.key+"_room"),App.ResourceUtils.loadGroup(e,this.loadGroupCompete,this.loadGroupProgress,this)},t.prototype.loadGroupCompete=function(){var t=this.getGame();if(t&&t.loaded)if(t.isRoD?t.isRoDLoaded=!0:t.isGameLoaded=!0,this.initProtocol(t),t.isLoadedEXML)this.initModuleResource();else{var e="thm_"+t.key+"_json";App.ResourceUtils.loadModuleTheme(e,this.initModuleResource,this)}},t.prototype.initProtocol=function(t){if(!t.loadedProtoConfig){var e=RES.getRes("proto_"+t.key+"_json");e?(App.Socket.addProtocolNum(e),t.loadedProtoConfig=!0):egret.error(t.key+"initProtocol --- "," 没有注册协议文件 ")}},t.prototype.loadGroupProgress=function(t,e){egret.log(t+"/"+e);var i=Math.floor(t/e*100);App.EasyLoading.updateTxt(i+"%"),web_easyLoading(i)},t.prototype.initModuleResource=function(){var t=this.getGame();t.isLoadedEXML=!0,this.roomInit(),this.loadResLater()},t.prototype.loadResLater=function(){var t=this.getGame();t.isRoD&&App.ResourceUtils.loadGroup(t.key,this.loadGameGroupCompete,this.loadGroupProgress,this)},t.prototype.loadGameGroupCompete=function(){var t=this.getGame();t&&(t.isGameLoaded=!0)},t.prototype.roomInit=function(){this._mIsBack2Game?this.sendLoginGame(this._mEnterGameInfo.sceneType):this.loginGame()},t.prototype.loginGame=function(){var t=this.getGame();if(t.isRoom)this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room),App.EasyLoading.hideLoading(),Log.trace("进入游戏",t.gameName,"房间场景");else{if("qznn"==t.key)return void this.onLoginGameBack({result:!0});this.sendLoginGame(t.gameType)}},t.prototype.sendLoginGame=function(t){var e=this.getGame();this._mCurrSceneType=t>0?t:e.gameType,e.isDesk?this._mIsBack2Game?App.TimerManager.doFrame(1,0,this.loadEnd,this):this.sendLoginGame2():App.TimerManager.doFrame(1,0,this.loadEnd,this)},t.prototype.loadEnd=function(){var t=this.getGame();t.isGameLoaded&&(App.TimerManager.remove(this.loadEnd,this),this.sendLoginGame2())},t.prototype.sendLoginGame2=function(){var t=this.getGame(),e=this._mEnterGameInfo;this._mIsBack2Game?(t.isDesk?App.isInLobby&&(this.createScene(e.deskId>0?ControllerConst.Game:ControllerConst.Desk),this._mCurrDeskId=e.deskId>0?e.deskId:this._mCurrDeskId):App.isInLobby&&this.createScene(ControllerConst.Game),this.sendBack2Game()):(this.createScene(t.isDesk?ControllerConst.Desk:ControllerConst.Game),this.sendFirst2Game(this._mCurrSceneType)),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.TimerManager.doTimer(1e4,1,this.loginGameTimeOut,this)},t.prototype.sendBack2Game=function(){var e=this.getGame();App.Socket.send({key:t.CsWorldReturnSceneReqType,body:{yes:!0}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ScWorldReturnSceneResType),this.onLoginGameBack,this),Log.trace("重回场景请求登录 -- ",e.gameName)},t.prototype.sendFirst2Game=function(e){var i=this.getGame();App.Socket.send({key:t.Game_Login,body:{scene_type:e}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.Game_Login_Back),this.onLoginGameBack,this),Log.trace("首次场景请求登录 -- ",i.gameName)},t.prototype.onLoginGameBack=function(e){if(App.TimerManager.remove(this.loginGameTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.ScWorldReturnSceneResType),this.onLoginGameBack,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.Game_Login_Back),this.onLoginGameBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.EasyLoading.hideLoading(),e.result){this._mCurrSceneId=e.scene_id,this._mCurrSceneType=e.scene_type,this._mCurrDeskId=e.table_id>0?e.table_id:this._mCurrDeskId;var i=this.getGame(),o=this._mEnterGameInfo;i.isDesk?(Log.trace("登录--",i.gameName,"--桌子成功",e),this._mIsBack2Game?(App.isInLobby?o.deskId>0?this.initializeScene(SceneConsts.Game,ControllerConst.Game):this.initializeScene(SceneConsts.Desk,ControllerConst.Desk):App.isInDesk?this.reconstructionScene(ControllerConst.Desk):App.isInGame&&this.reconstructionScene(ControllerConst.Game),this._mIsBack2Game=!1):this.initializeScene(SceneConsts.Desk,ControllerConst.Desk)):(Log.trace("登录--",i.gameName,"--游戏成功",e),App.isInGame?this._mIsBack2Game&&this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game),this._mIsBack2Game=!1),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginLobby_Success,this.reloginGame,this)}},t.prototype.loginOnDesk=function(){App.TimerManager.doFrame(1,0,this.loginOnDesk2,this)},t.prototype.loginOnDesk2=function(){var t=this.getGame();if(!t||t.isGameLoaded){App.TimerManager.remove(this.loginOnDesk2,this),App.isInGame||this.createScene(ControllerConst.Game);var e=this._mIsBack2Game?this._mCurrDeskId:this._mEnterGameInfo.deskId;"qznn"==t.key?this.sendLoginOnDeskBack({result:!0}):(this.sendLoginOnDesk(e),this._mCurrDeskId=e),Log.trace("请求上桌 -- ",t.gameName,"deskId:",e)}},t.prototype.sendLoginOnDesk=function(e){this.getGame();App.Socket.send({key:t.CsWorldEnterTableReqType,body:{table_id:e}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.TimerManager.doTimer(1e4,1,this.loginDeskTimeOut,this)},t.prototype.sendLoginOnDeskBack=function(e){App.TimerManager.remove(this.loginDeskTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.EasyLoading.hideLoading(),e.result&&(Log.trace("上桌--",this.getGame().gameName,"--成功",e),App.isInGame?this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game)),this._mIsBack2Game=!1},t.prototype.createScene=function(t){var e=this.getGameEntrace();e.create(t)},t.prototype.initializeScene=function(t,e){App.SceneManager.runScene(t),this.getGameEntrace().initialize(e,this._mEnterGameInfo)},t.prototype.reconstructionScene=function(t){this._mIsGameLineOut=!1;var e=this.getGameEntrace();e.reconstruction(t)},t.prototype.callBack2Game=function(t,e){this._mIsBack2Game=!0,this._mEnterGameInfo={sceneType:t,deskId:e},this.startGameByType(t)},t.prototype.saveBack2GameInfo=function(t,e){this._mCurrSceneType=t,this._mCurrDeskId=e},t.prototype.back2GameFromLobby=function(){this.callBack2Game(this.getCurrSceneType(),this.getCurrDeskId())},t.prototype.back2GameCancel=function(){App.Socket.send({key:t.CsWorldReturnSceneReqType,body:{yes:!1}})},t.prototype.reloginGame=function(t){t.scene_type>0?(this._mIsBack2Game=!0,this.sendLoginGame(this._mCurrSceneType)):((App.isInDesk||App.isInGame)&&App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.onErrorLoginScene=function(){this.removeEvent(),App.EasyLoading.hideLoading(),(App.isInLobby||App.isInDesk||App.isInGame)&&(App.isInLobby||App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.onErrorLoginDesk=function(){App.EasyLoading.hideLoading(),App.isInGame&&(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.removeEvent=function(){App.MessageCenter.removeAll(this),App.TimerManager.remove(this.loginGameTimeOut,this),App.TimerManager.remove(this.loginDeskTimeOut,this)},t.prototype.loginGameTimeOut=function(){egret.log(this.getGame().gameName+"场景登录超时！"),ErrorManager.i.showError("请求超时！"),App.isInDesk||App.isInGame?(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()):(this.removeEvent(),App.EasyLoading.hideLoading())},t.prototype.loginDeskTimeOut=function(){egret.log(this.getGame().gameName+"桌子登录超时！"),ErrorManager.i.showError("请求超时！"),App.isInGame?(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()):(this.removeEvent(),App.EasyLoading.hideLoading())},t.prototype.clearGameTips=function(){this.removeEvent(),this.exitGame(),this.exitRoom(),App.EasyLoading.hideLoading()},t.prototype.getCurrSceneType=function(){return this._mCurrSceneType},t.prototype.getCurrDeskId=function(){return this._mCurrDeskId},t.prototype.setCurrDeskId=function(t){this._mCurrDeskId=t},t.prototype.getCurrDeskType=function(){return this._mCurrDeskType},t.prototype.setCurrDeskType=function(t){this._mCurrDeskType=t},Object.defineProperty(t.prototype,"MoudleInfo",{get:function(){return this._mArrGameMoudel},enumerable:!0,configurable:!0}),t._i=null,t.Game_Login="10102",t.Game_Login_Back="10103",t.CsWorldReturnSceneReqType=10106,t.ScWorldReturnSceneResType=10107,t.CsWorldEnterTableReqType=10108,t.ScWorldEnterTableResType=10109,t}();__reflect(GameModuleMgr.prototype,"GameModuleMgr");var GameMoudleInfo=function(){function t(){this.key="",this.loaded=!1,this.loadedProtoConfig=!1,this.isLoadedEXML=!1,this.isRoDLoaded=!1,this.isGameLoaded=!1,this.mArrGameType=[],this.gameName="",this.isOpen=!1,this.isHotGame=!1,this.gameIcon="",this.gameIconAnim="",this.gameIndex=1,this.isDesk=!1,this.isRoom=!1}return Object.defineProperty(t.prototype,"gameType",{get:function(){return this.mArrGameType[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoD",{get:function(){return this.isDesk||this.isRoom},enumerable:!0,configurable:!0}),t}();__reflect(GameMoudleInfo.prototype,"GameMoudleInfo");var GamePlayerMgr=function(){function t(){this._mCurrAccount="",this._mCurrPW="",this._mIsVisiter=!1,this._mIsReconnect=!1,this._mPlayer=new Player,App.MessageCenter.addListener(BaseProxy.Socket_CMD+t.RechargeResult,this.onRechargeBack,this)}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.getPlayer=function(){return this._mPlayer},Object.defineProperty(t.prototype,"isVisiter",{get:function(){return this._mIsVisiter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mCurrAccount",{get:function(){return this._mCurrAccount},enumerable:!0,configurable:!0}),t.prototype.setAP=function(t,e){this._mCurrAccount=t,this._mCurrPW=e},t.prototype.relogin=function(){this._mIsReconnect=!0,this.login(this._mIsVisiter)},t.prototype.login=function(t){this._mIsVisiter=t,t&&this.setAP("",""),App.Socket.isConnecting()?this.login2():(App.MessageCenter.addListener(SocketConst.SOCKET_CONNECT,this.onSocketConnect,this),App.Socket.connect())},t.prototype.web_login=function(t,e,i,o){this.setAP(t,e),this.login(!1),this._mWebCallBack=i,this._mWebCallBackObj=o},t.prototype.onSocketConnect=function(){App.MessageCenter.removeListener(SocketConst.SOCKET_CONNECT,this.onSocketConnect,this),this.login2()},t.prototype.login2=function(){var e=this._mIsVisiter;this._mCurrAccount||(this._mCurrAccount=e?"":this.getAccount1(),this._mCurrPW=e?"":this.getPw1());var i={loginame:this._mCurrAccount,password:this._mCurrPW,usertype:e?2:1,deviceid:e?GameBase.getDeviceId():""};for(var o in i)Log.trace(o,":",i[o]);App.Socket.send({key:t.LoginWeb,body:i}),App.MessageCenter.addListener(BaseProxy.Socket_CMD+t.LoginWeb_Back,this.onLoginBack,this),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this)},t.prototype.onLoginBack=function(e){App.TimerManager.removeAll(this),App.MessageCenter.removeListener(BaseProxy.Socket_CMD+t.LoginWeb_Back,this.onLoginBack,this),Log.trace("onLoginBack:",e),this.saveAcc();var i=this.getPlayer();i.setPlayerInfo(e.role),i.setLoginame(e.loginame),i.setUserId(e.uid),i.setMoney(e.money),i.setSafeMoney(e.safe_money),i.setToken(e.token),i.setIsPwdSeted(e.is_fund_pwd_set),this.getAcIcon1()||this.saveIcon("ui_headImg_1"),this.getAcIconRound1()||this.saveIconRound("ui_headBox_1"),App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginWeb_Success)},t.prototype.saveAcc=function(){if(!this._mIsVisiter){var e=t.i.getAccount1(),i=t.i.getPw1();(this._mCurrAccount!=e||i!=this._mCurrPW)&&(this.saveAccount2(e?e:"",i?i:""),this.saveAccount1(this._mCurrAccount,this._mCurrPW))}},t.prototype.loginLobby=function(){var t=this.getPlayer(),e=this._mIsVisiter;Log.trace("登录大厅",t.getLoginame());var i={login_type:1,token:t.getToken(),user_type:e?2:1,loginame_or_deviceid:e?GameBase.getDeviceId():t.getLoginame(),uid:t.getUserId(),channel:1};App.Socket.send({key:lobby.ProxyKeyConst.Lobby_LoginLobby,body:i}),App.MessageCenter.addListener(BaseProxy.Socket_CMD+lobby.ProxyKeyConst.Lobby_LoginLobby_Back,this.loginLobbyBack,this),App.MessageCenter.removeListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this)
},t.prototype.loginLobbyBack=function(t){Log.trace("LobbyProxy onLoginWebBack:",t),this._mIsReconnect=!1,App.MessageCenter.removeListener(BaseProxy.Socket_CMD+lobby.ProxyKeyConst.Lobby_LoginLobby_Back,this.loginLobbyBack,this),App.isInLoading||App.isInLogin||App.isInLobby||App.isInRoom?((App.isInLoading||App.isInLogin)&&App.SceneManager.runScene(SceneConsts.Lobby),t.scene_type>0&&(web_showPrompt(1),GameModuleMgr.i.saveBack2GameInfo(t.scene_type,t.table_id),App.TimerManager.doFrame(10,1,function(){App.PromTipsView.show("您有未完成的游戏，是否前往继续？",function(){GameModuleMgr.i.back2GameFromLobby()},function(){GameModuleMgr.i.back2GameCancel()},this,!0)},this)),App.EasyLoading.hideLoading()):App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginLobby_Success,t),this._mWebCallBack&&this._mWebCallBack.call(this._mWebCallBackObj)},t.prototype.changeLogin=function(t){Log.trace("切换账户1"),t=t?t:2;var e=1==t?this.getAccount1():this.getAccount2(),i=1==t?this.getPw1():this.getPw2();if(e){var o=this.getPlayer(),n={usertype:this._mIsVisiter?2:1,loginame_or_deviceid:this._mIsVisiter?GameBase.getDeviceId():o.getLoginame(),uid:o.getUserId(),token:o.getToken()};App.Socket.send({key:lobby.ProxyKeyConst.Lobby_webLogOut,body:n}),App.MessageCenter.addListener(BaseProxy.Socket_CMD+lobby.ProxyKeyConst.Lobby_webLogOut_Back,this.changeLoginAck,this),App.EasyLoading.showLoading(),this.setAP(e,i)}},t.prototype.changeLoginAck=function(){Log.trace("切换账户2"),App.MessageCenter.removeListener(BaseProxy.Socket_CMD+lobby.ProxyKeyConst.Lobby_webLogOut_Back,this.changeLoginAck,this),App.EasyLoading.hideLoading(),this.login(!1)},t.prototype.onRechargeBack=function(t){Log.trace("充值结果返回",t),this.getPlayer().setMoney(t.balance),App.MessageCenter.dispatch(GameConsEvent.Game_UserMoneyChange,t)},t.prototype.getAccount1=function(){return GameBase.getLocalData("Game_Login_Account1")},t.prototype.getAccount2=function(){return GameBase.getLocalData("Game_Login_Account2")},t.prototype.getPw1=function(){return GameBase.getLocalData("Game_Login_Password1")},t.prototype.getPw2=function(){return GameBase.getLocalData("Game_Login_Password2")},t.prototype.getCurrPw=function(){return GameBase.getLocalData("Game_Login_CurrPassword")},t.prototype.saveAccount1=function(t,e){GameBase.saveLocalData("Game_Login_Account1",t?t:""),GameBase.saveLocalData("Game_Login_Password1",e?e:"")},t.prototype.saveAccount2=function(t,e){GameBase.saveLocalData("Game_Login_Account2",t?t:""),GameBase.saveLocalData("Game_Login_Password2",e?e:"")},t.prototype.getAcIcon1=function(){return GameBase.getLocalData(this.getAccount1()+"_icon")},t.prototype.getAcIcon2=function(){return GameBase.getLocalData(this.getAccount2()+"_icon")},t.prototype.getAcIconRound1=function(){return GameBase.getLocalData(this.getAccount1()+"_round")},t.prototype.getAcIconRound2=function(){return GameBase.getLocalData(this.getAccount2()+"_round")},t.prototype.saveIcon=function(t){GameBase.saveLocalData(this._mCurrAccount+"_icon",t)},t.prototype.saveIconRound=function(t){GameBase.saveLocalData(this._mCurrAccount+"_round",t)},t._i=null,t.LoginWeb="10110",t.LoginWeb_Back="10111",t.RechargeResult="10150",t}();__reflect(GamePlayerMgr.prototype,"GamePlayerMgr");var base;!function(t){function e(t){return t||(t=ControllerConst.Game),App.ControllerManager.getController(t)}t.getController=e}(base||(base={}));var HotUpdateMgr=function(){function t(){this._mCurrList=[],this._mLoadedList=[],this._mNewVerInfo=null,this._updateCallBack=null,this._updateErrorCall=null,this._thisObj=null,this._currUpdateInfo={},this._mCheckTimes=0,this._mCheckTimesUG=0,this._mupdateCallBack=null,this._mupdateErrorCall=null,this._mthisObj=null}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.initUrls=function(){for(var e=RES.getRes(t.UAName).data.u,i=0;i<e.length;i++)t.UrlList.push(e[i]);console.log("UrlList",t.UrlList)},t.prototype.initUrlsUg=function(){for(var e=RES.getRes(t.UGName).data.u,i=0;i<e.length;i++)t.GameUrlList.push(e[i]);console.log("UrlListUG",t.GameUrlList)},Object.defineProperty(t.prototype,"ug",{get:function(){this._mCheckTimesUG++;var e=t.GameUrlList;if(this._mCheckTimesUG>e.length){var i=this._mupdateErrorCall;return i&&i.call(this),!1}return egret.log("game url check times：",this._mCheckTimesUG),GameBase.saveGameServerIp(e[this._mCheckTimesUG-1]),App.Socket.initServerUrl(GameBase.GameServerIp),!0},enumerable:!0,configurable:!0}),t.prototype.u=function(t,e,i){this._mupdateCallBack=t,this._mupdateErrorCall=e,this._mthisObj=i,this.getUA()},t.prototype.getUA=function(){var e=t.getUpdateBaseUrl()+"u_a.f_z".split("_").join("")+"?v="+Math.random();HttpDownload.i.download(e,function(e){if(e&&e.u){for(var i=t.UrlList;i.length;)i.pop();for(var o=0;o<e.u.length;o++)t.UrlList.push(e.u[o]);this.getUG()}}.bind(this),function(){egret.log("checkNewUrl checkNewUrl checkNewUrl"),this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),this)},t.prototype.getUG=function(){var e=t.getUpdateBaseUrl()+"u_g.f_z".split("_").join("")+"?v="+Math.random();HttpDownload.i.download(e,function(e){if(e&&e.u){for(var i=t.GameUrlList;i.length;)i.pop();for(var o=0;o<e.u.length;o++)i.push(e.u[o]);var n=this._mupdateCallBack;n&&n.call(this._mthisObj)}}.bind(this),null,this)},t.prototype.checkNewUrl=function(e,i,o){if(this._mCheckTimes++,this._mCheckTimes>t.UrlList.length){var n=this._mupdateErrorCall;return void(n&&n.call(this._mthisObj))}egret.log("assets url check times：",this._mCheckTimes),GameBase.saveResoureServerIp(t.UrlList[this._mCheckTimes-1]),this.u(e,i,o)},t.prototype.checkUpdate=function(e,i,o){var n=this;this._updateCallBack=e,this._updateErrorCall=i,this._thisObj=o;var s=t.getUpdateBaseUrl()+"manifest_last_ver.json?v="+Math.random();HttpDownload.i.download(s,function(e){if(e&&e.version)if(Log.trace("最新版本：",e.version),e.apk&&e.apk.length>0){var i=t.getUpdateBaseUrl()+e.apk;App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,100,100),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命下载新安装包..."),GameNative.sendToNative(GameNative.GameApkUpgrade,i)}else n.update(e.verNum);else egret.log("更新文件读取错误！"),this._updateErrorCall&&this._updateErrorCall.call(this._thisObj)},function(t){},this)},t.prototype.update=function(e){var i=this,o=t.getUpdateBaseUrl()+"manifest.json?v="+e;HttpDownload.i.download(o,function(t){i.initNewVersion(t)},function(t){i._updateErrorCall&&i._updateErrorCall.call(i._thisObj)},this)},t.prototype.initNewVersion=function(t){this._mNewVerInfo=t,this.checkMainVersion()||this._updateCallBack&&this._updateCallBack.call(this._thisObj)},t.prototype.checkMainVersion=function(){var e=this._mNewVerInfo;if(!e||!e.main||!e.main.new_ver_num)return!1;var i=e.main,o=this._currUpdateInfo,n=GameBase.getLocalData("last_main_version");n||(n=1==i.new_ver_num?"0":"1");var s=i.new_ver_num>0?i.new_ver_num:"1";if(s==n){var r=i["index_"+s],a=this.getVerMainMd5();if(!r||!r.md5||!a||r&&a==r.md5)return!1}var h=parseInt(n)+1,l=i["index_"+h];if(l||(l=i["index_"+n]),l){var p=l.ver.split("-")[1];o.main=""+s,o.main_ver=""+p,o.main_md5=""+i["index_"+i.new_ver_num].md5;var c=t.getUpdateBaseUrl()+"main/"+l.res;return GameNative.sendToNative(GameNative.GameStartUpdate,c),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在下载更新...请稍等"),!0}return egret.warn("Main不存在可更新资源","lastMainVerIndex:",n,"newMainVerIndex:",s),!1},t.prototype.getVerMainMd5=function(){return GameBase.getLocalData("last_main_version_md5")||""},t.prototype.setVerMainMd5=function(t){GameBase.saveLocalData("last_main_version_md5",t)},t.prototype.getVerGameMd5=function(t){return GameBase.getLocalData("last_"+t+"_version_md5")||""},t.prototype.setVerGameMd5=function(t,e){GameBase.saveLocalData("last_"+t+"_version_md5",e)},t.prototype.checkGameUpdate=function(t){var e=this._mNewVerInfo,i=this._currUpdateInfo;if(!(e&&e.games&&e.games[t]&&e.games[t].new_ver_num))return!1;if(i[t])return!0;var o=e.games[t],n=GameBase.getLocalData("last_"+t+"_version")||"0",s=o.new_ver_num;if(s==n){var r=o["index_"+s],a=this.getVerGameMd5(t);if(!r||!r.md5||!a||r&&a==r.md5)return!1}var h=""+(parseInt(n)+1),l=o["index_"+h];if(l||(l=o["index_"+n]),l){var p=l.ver.split("-")[1];return i[t]=""+s,i[t+"ver"]=""+p,i[t+"res"]=""+l.res,i[t+"md5"]=""+o["index_"+o.new_ver_num].md5,!0}return egret.warn("Game不存在可更新资源","lastGameVerIndex",n,"newIndex:",h),!1},t.prototype.loadGameUpdate=function(e){var i=this._currUpdateInfo;if(!(i[e+"updateing"]||(this._mLoadedList.indexOf(e)<0&&this._mLoadedList.push(e),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:e,progress:0,total:1}),this._mCurrList.length>=t.Max_Load_Num))){this._mCurrList.push(e),this._mLoadedList.splice(this._mLoadedList.indexOf(e),1),i[e+"updateing"]="100000";var o=t.getUpdateBaseUrl()+"games/"+e+"/"+i[e+"res"];GameNative.sendToNative(GameNative.GameStartUpdate,o),egret.log("开始下载：",e,"len:",this._mLoadedList.length)}},t.prototype.saveVersion=function(t){var e=this._currUpdateInfo;if(t.indexOf("main")>-1){if(GameBase.saveLocalData("last_main_version",e.main),GameBase.saveLocalData("last_main_version_s",e.main_ver),this.setVerMainMd5(e.main_md5),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),this.checkMainVersion())return;egret.log("Main热更新完成，重启游戏"),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"更新完成，正在准备游戏资源..."),App.TimerManager.doTimer(2e3,1,function(){GameNative.sendToNative(GameNative.GameRestartApp,"GameRestartApp")},this),e.main=void 0,e.main_ver=void 0,e.main_md5=void 0}else if(t.indexOf("games")>-1){var i=t.split("/"),o=i.indexOf("games")+1,n=i[o],s=e[n],r=e[n+"ver"];Log.trace("saveVersion:",n,s,r),GameBase.saveLocalData("last_"+n+"_version",s),GameBase.saveLocalData("last_"+n+"_version_s",r),this.setVerGameMd5(n,e[n+"md5"]),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Version,n),e[n]=void 0,e[n+"res"]=void 0,e[n+"md5"]=void 0,e[n+"updateing"]=void 0;var a=this._mCurrList.indexOf(n);if(this._mCurrList.splice(a,1),egret.log("下载完成x：","_mCurrList len:",this._mCurrList.length,"_mLoadedList len:",this._mLoadedList.length),t.indexOf("public")>-1?App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Public_Complete):App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Complete,n),this._mLoadedList.length>0){var h=this._mLoadedList.shift();this.checkGameUpdate(h)&&this.loadGameUpdate(h)}}},t.getUpdateBaseUrl=function(){return"http://"+GameBase.AssetsServerIp+"/hotUpdate/"+GameBase.CurrAppVersion+"/"},t._instance=null,t.Max_Load_Num=2,t.UrlList=[],t.GameUrlList=[],t.UAName="u.a._.f.z".split(".").join(""),t.UGName="u.g._.f.z".split(".").join(""),t}();__reflect(HotUpdateMgr.prototype,"HotUpdateMgr");var App=function(){function t(){}return Object.defineProperty(t,"platformMoudel",{get:function(){return t.DeviceUtils.IsNative?0:web_platform()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLoading",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLogin",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Login},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLobby",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Lobby},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInRoom",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Room},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInDesk",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Desk},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInGame",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Game},enumerable:!0,configurable:!0}),t.setOpenLog=function(t){egret.Logger.logLevel=t?egret.Logger.ALL:egret.Logger.WARN},Object.defineProperty(t,"Http",{get:function(){return Http.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Socket",{get:function(){return Socket.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ControllerManager",{get:function(){return ControllerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ViewManager",{get:function(){return ViewManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SceneManager",{get:function(){return SceneManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DebugUtils",{get:function(){return DebugUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MessageCenter",{get:function(){return MessageCenter.getInstance(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EffectUtils",{get:function(){return EffectUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NotificationCenter",{get:function(){return null==t._notificationCenter&&(t._notificationCenter=new MessageCenter(0)),t._notificationCenter},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EasyLoading",{get:function(){return EasyLoading.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DragonBonesFactory",{get:function(){return DragonBonesFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MovieClipFactory",{get:function(){return MovieClipFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HitUtils",{get:function(){return HitUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GeometryUtils",{get:function(){return GeometryUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PromTipsView",{get:function(){return PromTipsView.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ScrollTxtTips",{get:function(){return ScrollTxtTips.i},enumerable:!0,configurable:!0}),t.Init=function(){egret.log("当前引擎版本: ",egret.Capabilities.engineVersion),t.GlobalData=RES.getRes("global"),t.DebugUtils.isOpen(t.GlobalData.IsDebug),GameBase.IsTest=t.GlobalData.IsTest,t.IsSimulate=t.GlobalData.IsSimulate,t.DebugUtils.setThreshold(5);var e=RES.getRes(t.GlobalData.ProtoConfig);t.Socket.initServer(t.GlobalData.SocketServer,t.GlobalData.SocketPort,new ByteArrayMsgByProtobuf),t.Socket.addProtocolNum(e)},t.GlobalData=null,t.IsSimulate=!1,t.IsOpenToolView=!1,t}();__reflect(App.prototype,"App");var R;!function(t){function e(t){App.DeviceUtils.IsNative?GameNative.openUrl(t):window.open(t)}function i(t,e){function i(i){App.MessageCenter.removeAll(this),t.call(e,i)}App.MessageCenter.addListener(GameNative.GameGetClipboardInfo,i,this),GameNative.sendToNative(GameNative.GameGetClipboardInfo,"")}function o(t){GameNative.sendToNative(GameNative.GameSetClipboardInfo,t)}function n(t){for(var e in r){var i=t.indexOf(e);if(i>=0)return r[e]}return 10}function s(e){t.setTimeOut(function(){a--,App.Socket.send({key:10159,body:{module:n(e),event_name:e}})},this,16*a++)}t.openUrl=e,t.getClipboardInfo=i,t.setClipboardInfo=o;var r={App:10,Lobby:11,Brnn1:101,Brnn2:102,Baccarat1:201,Baccarat2:202,HHDZ:301,DDZ:401,SHZ:601,SGJ:701,LHD1:801,LHD2:802},a=1;t.sendPlayerAction=s}(R||(R={}));var GameNative=function(){function t(){}return t.initNativeExternal=function(){this.addCallback(t.GameConstInit),this.addCallback(t.GameUpdateProgress),this.addCallback(t.GameUpdateComplete),this.addCallback(t.GameDownloadFail),this.addCallback(t.GameDownloadZipFail),this.addCallback(t.GameDeviceIdInit),this.addCallback(t.GameAndroidBackKey),this.addCallback(t.GameGetClipboardInfo)},t.addCallback=function(e){egret.ExternalInterface.addCallback(e,function(i){t.GameEventList.push({funcName:e,value:i}),App.TimerManager.doFrame(1,1,function(){for(var e=t.GameEventList;e.length>0;){var i=e.shift();App.MessageCenter.dispatch(i.funcName,i.value)}},this)})},t.sendToNative=function(t,e){egret.ExternalInterface.call(t,e)},t.openUrl=function(e){t.sendToNative(t.GameGotoWebUrl,e)},t.appGameExit=function(){t.sendToNative(t.GameAndroidExit,"")},t.GameConstInit="GameConstInit",t.GameApkUpgrade="GameApkUpgrade",t.GameReadyComplete="GameReadyComplete",t.GameDeviceIdInit="GameDeviceIdInit",t.GameStartUpdate="GameStartUpdate",t.GameUpdateProgress="GameUpdateProgress",t.GameUpdateComplete="GameUpdateComplete",t.GameRestartApp="GameRestartApp",t.GameAndroidBackKey="GameAndroidBackKey",t.GameAndroidExit="GameAndroidExit",t.GameGotoWebUrl="GameGotoWebUrl",t.GameGetClipboardInfo="GameGetClipboardInfo",t.GameSetClipboardInfo="GameSetClipboardInfo",t.GameDownloadFail="GameDownloadFail",t.GameDownloadZipFail="GameDownloadZipFail",t.GameEventList=[],t}();__reflect(GameNative.prototype,"GameNative");var web;!function(t){function e(){return GamePlayerMgr.i.getPlayer()}function i(t){GameModuleMgr.i.startGame(t)}function o(t){t?GameModuleMgr.i.back2GameFromLobby():GameModuleMgr.i.back2GameCancel()}function n(t,e,i,o){GamePlayerMgr.i.web_login(t,e,i,o)}t.game_getPlayer=e,t.game_startGame=i,t.game_back2GameFromLobby=o,t.game_login=n}(web||(web={}));var base;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(BaseEuiComponent);t.ComponentView=e,__reflect(e.prototype,"base.ComponentView")}(base||(base={}));var BankModel=function(){function t(){this.bankName="",this.bankCard="",this.name="",this.idcard="",this.province="",this.city="",this.subbranch=""}return t}();__reflect(BankModel.prototype,"BankModel");var base;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(BaseSpriteView);t.GameSprite=e,__reflect(e.prototype,"base.GameSprite")}(base||(base={}));var Player=function(){function t(){this.uid=0,this.loginame="",this.nickname="赵日天",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token=""}return t.prototype.setPlayerInfo=function(t){t&&(this.playerInfo=t,this.nickname=t.nickname,0!=t.sex&&(this.sex=t.sex),0!=t.avatar&&(this.avatar=t.avatar>0?t.avatar:1),0!=t.avatar_box&&(this.avatar_box=t.avatar_box>0?t.avatar_box:1),this.vip=t.vip,this.honor=t.honor)},t.prototype.getPlayerInfo=function(){return this.playerInfo},t.prototype.setLoginame=function(t){t&&(this.loginame=t)},t.prototype.getLoginame=function(){return this.loginame},t.prototype.setNickName=function(t){t&&(this.nickname=t)},t.prototype.getNickName=function(){return this.nickname},t.prototype.setUserId=function(t){this.uid=t},t.prototype.getUserId=function(){return this.uid},t.prototype.setSex=function(t){this.sex=t},t.prototype.getSex=function(t){return this.sex},t.prototype.setAvatar=function(t){this.avatar=t},t.prototype.getAvatar=function(){return this.avatar},t.prototype.setAvatarBox=function(t){this.avatar_box=t},t.prototype.getAvatarBox=function(){return this.avatar_box},t.prototype.setMoney=function(t){this.money=t},t.prototype.getMoney=function(){return this.money},t.prototype.setSafeMoney=function(t){this.safe_money=t},t.prototype.getSafeMoney=function(){return this.safe_money},t.prototype.setVip=function(t){this.vip=t},t.prototype.getVip=function(){return this.vip},t.prototype.setHonor=function(t){this.honor=t},t.prototype.getHonor=function(){return this.honor},t.prototype.setToken=function(t){this.token=t},t.prototype.getToken=function(){return this.token},t.prototype.setIsPwdSeted=function(t){this.isPwdSeted=t},t.prototype.getIsPwdSeted=function(){return this.isPwdSeted},t.prototype.resetPlayer=function(){this.uid=0,this.loginame="",this.nickname="赵日天",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token=""},t}();__reflect(Player.prototype,"Player");var ZhifubaoModel=function(){function t(){this.account="",this.name="",this.locked=!1}return t}();__reflect(ZhifubaoModel.prototype,"ZhifubaoModel");var brnn;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.brnn=i,__reflect(i.prototype,"brnn.Entrance.brnn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnBetBox")||this;return i.coinBox=[],i}return __extends(i,e),i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;4>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.showBetMoney=function(t,e){console.log("显示所有投注额及筹码"),console.log(this.coinBox),console.log(t),console.log(e),t.forEach(function(t,e){console.log(t.place);var i=App.CommonUtils.money(t.total_bet_money),o=App.CommonUtils.money(this._mMoudel._betInfoNotify[e].total_bet_money),n=this._mMoudel._betInfoNotify[e].place;this["betMoney"+t.place].text=Math.floor(i),i>0&&(R.setTimeOnce(function(){this.showCoin(t.place,i)},this,150),this.onlineShake(),-1==this._mMoudel._allBetPos.indexOf(t.place)&&this._mMoudel._allBetPos.push(t.place),i>o&&t.place==n&&(this.numShake(t.place),this.createFlyCoin(t.place,4,t.chart_id)))}.bind(this)),e=[],e=t,console.log(e)},i.prototype.showCoin=function(e,i){var o=t.conFun.getNumObj(i),n=Object.keys(o),s=this["regionlist"+e].$children[0],r=this["regionlist"+e].$children[1],a=this["regionlist"+e].$children[2];this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),4>e&&(n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0))},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?(console.log("renderCoinType"),console.log(t,e,i,o),console.log(e),console.log(i._coinNum),e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i))):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_t100000_png",n=1e5;break;case"w":s="common_ui_4_png",n=1e4;break;case"q":s="common_ui_8_png",n=1e3;break;case"b":s="common_ui_6_png",n=100;break;case"s":s="common_ui_3_png",n=10;break;case"g":s="common_ui_0_png",n=1}for(var r=0,a=-100,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(this.randomNum()>.65){var i=this.randomNum();h=i>.5?2.5:-2.5}else h=0;egret.Tween.get(l[e]).wait(200*e).to({y:o._currentY,x:h},200).call(function(){App.SoundManager.playEffect("betcoin_mp3")}.bind(this)),function(t){App.TimerManager.doTimer(200*t,1,function(){l[t].alpha=1},this)}(e),o._currentY-=5}.bind(this))},i.prototype.randomNum=function(){return Math.random()},i.prototype.numShake=function(t){console.log("总投注数字抖动"),console.log(t);var e=this["betMoney"+t];egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},i.prototype.clearCoin=function(){},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.clearPreBet=function(){},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.coinBox=void 0},i}(BaseEuiComponent);t.BrnnBetBox=e,__reflect(e.prototype,"brnn.BrnnBetBox")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"BrnnCard")||this;return i._pokerlist=[],i.pokerposs=[],i.pokerAllList=[],i}return __extends(e,t),e.prototype.newPoker=function(){var t=0;this.clearPoker();for(var e=0;25>e;e++){var i=new eui.Image;i.source="common_ui_cardback_png",i.width=90,i.height=121,i.scaleX=.8,i.scaleY=.8,i.alpha=0,i.name=e+"";var o=Math.floor(e/5),n=Math.floor(e%5);i.x=this.card.x,i.y=this.card.y,this.cardlist.addChild(i),this._pokerlist.push(i),console.log("index--newPoker",t);var s={x:this["card_"+o].x+t,y:this["card_"+o].y};this.pokerposs.push(s),t+=33,n>=4&&(t=0)}},e.prototype.directDisplayFapai=function(){var t=this;this.initializationcardPos(),this._pokerlist.forEach(function(e,i){var o=e;egret.Tween.removeTweens(e);var n=Math.floor(i/5),s=Math.floor(i%5);egret.Tween.get(e).wait(50*s+250*n).to({x:t.pokerposs[i].x,y:t.pokerposs[i].y,alpha:1,rotation:360},800,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("sendcard_mp3"),24==Number(o.name)&&(console.log("card.name",Number(o.name)),App.SoundManager.playEffect("alert_mp3"))}.bind(t))})},e.prototype.directFapai=function(){var t=this;this.initializationcardPos(),App.SoundManager.playEffect("sendcard_mp3"),this._pokerlist.forEach(function(e,i){e.x=t.pokerposs[i].x,e.y=t.pokerposs[i].y,e.alpha=1})},e.prototype.initializationcardPos=function(){var t=this;this._pokerlist&&this._pokerlist.length&&this._pokerlist.forEach(function(e,i){Math.floor(i/5);e.x=t.card.x,e.y=t.card.y,e.scaleX=.8,e.scaleY=.8,e.source="common_ui_cardback_png",e.alpha=0})},e.prototype.clearPoker=function(){if(this._pokerlist.length)for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];e.parent&&(egret.Tween.removeTweens(e),e.parent.removeChild(e))}this._pokerlist=[],this.pokerposs=[]},e.prototype.pospoker=function(t){for(var e=0;e<t.numChildren;e++){var i={x:t.getChildAt(e).x,y:t.getChildAt(e).y};this.pokerposs.push(i)}},e.prototype.getcardsrc=function(t){var e=this;this.pokerAllList=[],this.pokerAllList.length=0,t.forEach(function(t){e.pokerAllList.push(e.getCardWithNum(t))})},e.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(egret.log("hua:",e,"number:",o,"cardNum:",t),0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s="",egret.warn("cardNum:",t)),egret.log("cardStr:",s),s},e.prototype.kaipaiAnimation=function(){var t=this,e=0;console.log(this.pokerAllList),this.initializationcardPos(),this.directFapai(),this._pokerlist.forEach(function(i,o){egret.Tween.removeTweens(i);egret.Tween.get(i).wait(100*e).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){i.source=t.pokerAllList[i.name],egret.Tween.get(i).to({scaleX:.8},300,egret.Ease.sineInOut)}),e++})},e.prototype.directKaipai=function(){var t=this;this.initializationcardPos(),this.directFapai(),this._pokerlist.forEach(function(e,i){e.source=t.pokerAllList[i]})},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this.clearPoker(),egret.Tween.removeTweens(this)},e}(BaseEuiComponent);t.BrnnCardView=e,__reflect(e.prototype,"brnn.BrnnCardView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnChangeTable")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.changeBg.visible=!0,this.changeMenu.scaleX=this.changeMenu.scaleY=0,App.EffectUtils.showUI(this.changeMenu)},i.prototype.closePoput=function(){this.applyFunc("oncloseGameBrnn"),this.changeBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.changeMenu,300,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/public/euiSkins/BrnnRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.createLement=function(e,i){this.reMoveLement(),console.log("生成场次");for(var o=0;o<e.length;o++){var n=e[o],s=e[o].table_id,r=e[o].table_type,a=t.BrnnRoom.create();a.init(n),a.x=0,a.y=0+195*o,s==i?a.setGOGameImg(1):a.setGOGameImg(0),this._addList.addChild(a),this._lementList.push(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,s,r),this)}},i.prototype.touchBtn=function(t,e){console.log(t),this.applyFunc("onEnterGameBrnn",t,e)},i.prototype.ChangeGameChartList=function(t,e){console.log("ChangeChartList2"),console.log(e);for(var i=0;i<this._lementList.length;i++){var o=this._lementList[i].getTableId();o==t.table_id&&this._lementList[i].ChangeChartList(e)}},i.prototype.ChangeGameStatusList=function(t){console.log("ChangeStatusList2"),console.log(t);for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();i==t.table_id&&this._lementList[e].ChangeStatusList(t)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.BrnnRoom.release(e))}},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement(),t.BrnnRoom.cleanRoomBtnPool()},i}(BaseEuiComponent);t.BrnnChangeTable=e,__reflect(e.prototype,"brnn.BrnnChangeTable")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnHelpSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.helpBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)
},i.prototype.closePoput=function(){this.helpBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RankMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(){var t=[{img0:"brnn_ui_paixing_png",img1:"brnn_ui_paixingbijiao_png",img2:"brnn_ui_ruheshengshengchu_png",img3:"brnn_ui_jingdianpeilv_png",img4:"brnn_ui_wanfa_png",img5:"brnn_ui_caipei_png"}],e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e),this.showPopup()},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnHelpIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/brnn/euiSkins/BrnnHelpIcon.exml",this.scrollerItem.viewport.scrollV=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.moveScroller=function(){console.log("点击按钮后改变滚动的位置");this.scrollerItem},i.prototype.moveMeun=function(t){t.localY;console.log("moveMeun"),console.log(t.localY)},i.prototype.beginMeun=function(t){console.log("beginMeun"),console.log(t.localY);t.localY},i.prototype.endMeun=function(t){console.log("endMeun"),console.log(t.localY);this.scrollerItem,t.localY},i.prototype.outMeun=function(t){console.log("outMeun"),console.log(t.localY);t.localY},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.scrollerItem.viewport.validateNow(),this.addEvent()},i.prototype.addEvent=function(){this.helpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.helpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.BrnnHelp=e,__reflect(e.prototype,"brnn.BrnnHelp")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),console.log("this.data"),console.log(this.data),this.data)for(var e=0;6>e;e++)this["ruleimg"+e].texture=RES.getRes(this.data["img"+e])},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.BrnnHelpIcon=e,__reflect(e.prototype,"brnn.BrnnHelpIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){return t.call(this,"BrnnLotteryResults")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BrnnLotteryResults=e,__reflect(e.prototype,"brnn.BrnnLotteryResults")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnOpenRecord")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RrcordBg.visible=!0,this.RrcordMenu.scaleX=this.RrcordMenu.scaleY=0,App.EffectUtils.showUI(this.RrcordMenu)},i.prototype.closePoput=function(){this.RrcordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.RrcordMenu,300,0,function(){t.visible=!1,t.reMoveRecordLement()})},i.prototype.rankData=function(t){},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/brnn/euiSkins/BrnnRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.createLement=function(e){this.reMoveRecordLement(),console.log("生成彩票开奖记录"),console.log(e);for(var i=0;i<e.length;i++){var o=e[i],n=(e[i].table_id,t.BrnnRecord.create());n.setrankingId(i),n.init(o),n.x=0,n.y=0+38.67*i,this._addList.addChild(n),this._lementList.push(n),console.log(n)}},i.prototype.reMoveRecordLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&t.BrnnRecord.release(e)}this._lementList.length=0},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.Close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.Close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveRecordLement(),t.BrnnRecord.cleanRecordBtnPool()},i}(BaseEuiComponent);t.brnnOpenRecord=e,__reflect(e.prototype,"brnn.brnnOpenRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this,"BrnnPlaceIsWin")||this}return __extends(e,t),e.prototype.init=function(){},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.niuji=function(t,e,i){console.log("牛几接口"),console.log(t,e,i),this["beefCard"+e].source="brnn_ui_"+(i?"H_":"L_")+t+"_png"},e.prototype.showniuji=function(t){var e=0;console.log("展示每个区域牛几"),console.log(t),this.cleanwinAndlose(),App.TimerManager.doTimer(600,5,function(){if(0==e)App.SoundManager.playEffect("cow"+t.banker_open_type+"_mp3"),this.niuji(t.banker_open_type,e,!0),this["Lottery"+e].visible=!0;else if(t.place_results[e-1].place==e-1){var i=t.place_results[e-1].open_type,o=t.place_results[e-1].is_win;this.niuji(i,e,o),this["Lottery"+e].visible=!0,i>=10?App.SoundManager.playEffect("cow10_mp3"):App.SoundManager.playEffect("cow"+i+"_mp3")}e++},this,function(){this.applyFunc("openwinloseOpen",t)},this)},e.prototype.winlossRun=function(t){var e=this.bunko4;e.visible=!1,e.source=4==t?"brnn_ui_tongpei_png":"brnn_ui_tongsha_png",e.visible=!0,egret.Tween.get(e).to({y:e.y-50},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({y:e.y+50},100,egret.Ease.sineInOut)},this)},e.prototype.directniuji=function(t){console.log("直接显示牛几",t),this.cleanwinAndlose();for(var e=0;5>e;e++)if(4>e){var i=t.place_results[e].open_type,o=t.place_results[e].is_win;this.niuji(i,e,o),this["Lottery"+e].visible=!0}else this.niuji(t.banker_open_type,e,!0),this["Lottery"+e].visible=!0},e.prototype.cleanwinAndlose=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this);for(var t=0;5>t;t++)this["bunko"+t].visible=!1,this["Lottery"+t].visible=!1,this["beefCard"+t].source=""},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.warn("Brnn brnnPlaceIsWin destroy"),this.cleanwinAndlose(),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this.removeEvent()},e}(BaseEuiComponent);t.brnnPlaceIsWin=e,__reflect(e.prototype,"brnn.brnnPlaceIsWin")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="brnnPopupSkin",o._prompt.initComponent(e),o._setchip.initComponent(e),o._brnnchangeTable.initComponent(e),o._brnnOpenRecord.initComponent(e),o}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.createSetChip=function(){this._setchip.getcoordinate(),this._setchip.createChip()},e.prototype.setDefaultChip=function(t){this._setchip.setDefaultChip(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._setchip.addEvent(),this._brnnTakeNum.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._setchip.removeEvent(),this._brnnTakeNum.removeEvent()},e.prototype.showchangePopup=function(){this._brnnchangeTable.showPopup()},e.prototype.closechangePopup=function(){this._brnnchangeTable.closePoput()},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("brnn销毁popupView"),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this._winandlose.destroy(),this._setchip.destroy(),this._brnnchangeTable.destroy()},e}(BaseEuiView);t.brnnPopupView=e,__reflect(e.prototype,"brnn.brnnPopupView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.recordPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createRecord=function(){var e=t.recordPool.pop();return e||(e=new i),e.initup(),e},t.prototype.releaseRecord=function(e){return egret.is(e,"BrnnRecord")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.recordPool.unshift(e)):void egret.warn(e,"is not BrnnRecord")},t.prototype.clear=function(){for(;t.recordPool.length;)t.recordPool.pop().destroy()},t._i=null,t.recordPool=null,t}();t.recordFactory=e,__reflect(e.prototype,"brnn.recordFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._rankingId=0,e._isRelease=!1,e.skinName="BrnnRecordIcon",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.BrnnRecord");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanRecordBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRecord","destroy")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.initup=function(){this._isRelease=!1},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){if(t){console.log(t),this._lssue.text=t.issue_id,this.time.text=t.time,0==this._rankingId&&(this._lssue.textColor=16711935,this.time.textColor=16711935);for(var e=t.place_info,i=0;i<e.length;i++){var o=e[i].place_id;this["openNum"+o].text=e[i].open_number,this["openType"+o].text=0==e[i].open_type?"无牛":10==e[i].open_type?"牛牛":11==e[i].open_type?"五花牛牛":"牛"+e[i].open_type;var n=e[i].is_win;n&&4!=i&&(this["lssueWin"+o].visible=!0)}for(var s=t.issue_number.split(","),r=0;r<s.length;r++)this._numList.getChildAt(r).source=s[r]+"_png"}},e.prototype.setrankingId=function(t){this._rankingId=t},e.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),console.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.clean=function(){this._isRelease=!0,R.removeFromParent(this),egret.Tween.removeTweens(this),console.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.BrnnRecord=i,__reflect(i.prototype,"brnn.BrnnRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),console.log("this.data"),console.log(this.data),this.data){this._lssue.text=this.data.issue_id,this.time.text=this.data.time,this.data.rankNum&&1==this.data.rankNum&&(this._lssue.textColor=16711935,this.time.textColor=16711935);for(var e=this.data.place_info,i=0;i<e.length;i++){var o=e[i].place_id;this["openNum"+o].text=e[i].open_number,this["openType"+o].text=0==e[i].open_type?"无牛":10==e[i].open_type?"牛牛":11==e[i].open_type?"五花牛牛":"牛"+e[i].open_type;var n=e[i].is_win;n&&4!=i&&(this["lssueWin"+o].visible=!0)}for(var s=this.data.issue_number.split(","),r=0;r<s.length;r++)this._numList.getChildAt(r).source=s[r]+"_png"}},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.BrnnRecordIcon=e,__reflect(e.prototype,"brnn.BrnnRecordIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._mRender=new common.comBones,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.brnnSpecial");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t.clear(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("brnn.brnnSpecial","destroy")},e.prototype.init=function(t){this.parent||(t.addChild(this),this.addChild(this._mRender))},e.prototype.play=function(t){this._mRender.play(t)},e.prototype.renderUpdateId=function(t){this._mRender.updateId("star_1")},e.prototype.findXY=function(t,e){this.callBack=t,this.thisObj=e,App.TimerManager.doTimer(80,999,this.callBackFind,this)},e.prototype.callBackFind=function(){console.log("findXY"),this.callBack&&this.callBack.call(this.thisObj)},e.prototype.clearfind=function(){App.TimerManager.removeAll(this)},e.prototype.clear=function(){this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren()},e.prototype.destroy=function(){this._mRender&&this._mRender.destroy(),this._mRender=void 0,this.callBack=void 0,this.thisObj=void 0},e}(ActionExpand);t.brnnSpecial=e,__reflect(e.prototype,"brnn.brnnSpecial")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"BrnnTakeNum")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.addEvent=function(){this.takeclose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){this.takeclose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.showPopup=function(){this._takeNum.scaleX=this._takeNum.scaleY=0,this.visible=!0,this.RankBg.visible=!0,console.log(this._takeNum.scaleX),App.EffectUtils.showUI(this._takeNum)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideUI(this._takeNum,200,0,function(){t.visible=!1,t.RankBg.visible=!1})},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.BrnnTakeNum=e,__reflect(e.prototype,"brnn.BrnnTakeNum")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(i){var o=e.call(this,"brnnTimeSkin")||this;return o.index=0,o.visible=!1,o.stopTimeType=t.BrnnGameTypeConst.Classic,o}return __extends(i,e),i.prototype.startTimer2=function(t){this.index=0;var e=Math.round(t/1e3);this.LabelTip1.text=e+"",this.visible=!0,this.index=e,this.scaleY=this.scaleX=1,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){if(this.stopTimeType==t.BrnnGameTypeConst.Classic){if(this.index--,this.index<=3&&this.index>0&&(App.SoundManager.playEffect("countdown_mp3"),this.numShake()),this.index<0)return this.index=0,this.LabelTip1.text=this.index+"",void App.TimerManager.removeAll(this);this.LabelTip1.text=3==this.index?"w":2==this.index?"m":1==this.index?"n":this.index+"",console.log("LabelTip1",this.LabelTip1.text)}else this.cleanIssueTime()},i.prototype.over=function(){this.index=0,this.LabelTip1.text="0",this.visible=!1,this.recoverySize(),this.stopTimeType==t.BrnnGameTypeConst.Classic&&this.applyFunc("onOver")},i.prototype.numShake=function(){console.log("time数字抖动");var t=this.LabelTip1;egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut).call(function(){},this),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.recoverySize=function(){var t=this.LabelTip1;t.scaleX=1,t.scaleY=1},i.prototype.cleanIssueTime=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this.recoverySize(),this.index=0,this.LabelTip1.text="0",this.visible=!1},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),console.log("partAdded")},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),console.log("childrenCreated")},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this)},i}(BaseEuiComponent);t.brnnTime=e,__reflect(e.prototype,"brnn.brnnTime")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="chipSkin",e}return __extends(e,t),e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this)},e}(eui.Component);t.chip=e,__reflect(e.prototype,"brnn.chip")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"winandloseSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.addEvent=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.showPopup=function(){console.log("Open走势图走势图"),this.winpop.scaleX=this.winpop.scaleY=0,this.visible=!0,console.log(this.winpop.scaleX),console.log(this.winpop.scaleX),App.EffectUtils.showUI(this.winpop)},e.prototype.closePoput=function(){console.log("关闭走势图走势图");var t=this;App.EffectUtils.hideUI(this.winpop,200,0,function(){t.visible=!1})},e.prototype.runChart=function(t){if(this.rightWrongVisible(),console.log("走势图",t),t.length){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].is_win.length;i++)this["region_"+t[e].place].getChildAt(i).source=0==t[e].is_win[i]?"brnn_ui_cuo_png":"brnn_ui_dui_png",this["region_"+t[e].place].getChildAt(i).visible=!0;var o=t[0].is_win.length-1,n=this._movelist.getChildAt(o);console.log(n),this._latestLogo.x=n.x-25+3.5,this._latestLogo.y=n.y-29-13,this._latestLogo.visible=!0}},e.prototype.rightWrongVisible=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++)this["region_"+t].getChildAt(e).source="",this["region_"+t].getChildAt(e).visible=!1;this._latestLogo.visible=!1},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.winandloseView=e,__reflect(e.prototype,"brnn.winandloseView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"brnnWinPopup")||this;return i.visible=!1,console.log("this.visible",i.visible),i}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.winpopupOpen=function(t){App.SoundManager.playEffect("win_mp3"),this.winGroup.scaleX=this.winGroup.scaleY=0,this.wintext.text="+"+t,this.visible=!0,egret.Tween.get(this.winGroup).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut).call(function(){App.TimerManager.doTimer(2e3,1,function(){egret.Tween.get(this.winGroup).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.visible=!1}.bind(this))},this)}.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.winpopup=e,__reflect(e.prototype,"brnn.winpopup")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.register(),o}return __extends(i,e),i.prototype.register=function(){this.addListener(t.ControllerCon.NET_MSG.ENTER_GAME_R,this.onEnterGame,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_NOTIFY,this.onIssueNotify,this),this.addListener(t.ControllerCon.NET_MSG.LIMIT_NOTIFY,this.onLimitNotify,this),this.addListener(t.ControllerCon.NET_MSG.STATENOTIFY,this.onStateNotify,this),this.addListener(t.ControllerCon.NET_MSG.EXCHANGE_NOTIFY,this.onExchangeNotify,this),this.addListener(t.ControllerCon.NET_MSG.BET_RESPONSE,this.onBetResponse,this),this.addListener(t.ControllerCon.NET_MSG.PLAYER_BET_INFONOTIFY,this.onPlayerBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_BET_INFO_NOTIFY,this.onGameBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.ControllerCon.NET_MSG.CHART_NOTIFY,this.onChartNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_RESULT_NOTIFY,this.onGameResultNotify,this),this.addListener(t.ControllerCon.NET_MSG.WIN_RECORD_RES,this.onWinningRecordRes,this),this.addListener(t.ControllerCon.NET_MSG.RANKING_LIST_RES,this.onrankinglistres,this),this.addListener(t.ControllerCon.NET_MSG.LEAVE_SCENE_RES,this.onLeaveSceneRes,this)},i.prototype.onEnterGame=function(e){Log.trace("收到进入游戏消息:",e),this.applyFunc(t.ControllerCon.Const_onEnterGameCallBack,e)},i.prototype.onIssueNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onIssueNotifyBack,e)},i.prototype.onLimitNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onLimitNotifyBack,e)},i.prototype.onStateNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onStateNotifyyBack,e)},i.prototype.onExchangeNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onExchangeNotifyBack,e)},i.prototype.onBetResponse=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onBetResponseBack,e)},i.prototype.onPlayerBetInfoNotify=function(e){this.applyFunc(t.ControllerCon.onPlayerBetInfoNotifyBack,e)},i.prototype.onGameBetInfoNotify=function(e){this.applyFunc(t.ControllerCon.onGameBetInfoNotify,e)},i.prototype.onOnLineNum=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onOnlineNumCallBack,e)},i.prototype.onChartNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onChartNotifyBack,e)},i.prototype.onGameResultNotify=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onGameResultNotifyBack,e)},i.prototype.onWinningRecordRes=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onWinningRecordResBack,e)},i.prototype.onrankinglistres=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onrankinglistresBack,e)},i.prototype.onLeaveSceneRes=function(e){this.applyControllerFunc(ControllerConst.Game,t.ControllerCon.onLeaveSceneResBack,e)},i.prototype.onSpecialPlayerActionRes=function(t){},i.prototype.requestEnterGame=function(){var e={userName:"tom",merchantId:1e3,token:"123456789",gameId:101,roomId:1,tableId:1,from:1};this.send(t.ControllerCon.NET_MSG.ENTER_GAME,e)},i.prototype.requestBet=function(e){this.send(t.ControllerCon.NET_MSG.ME_BET,e)},i.prototype.requestExitRoom=function(e){this.send(t.ControllerCon.NET_MSG.LWAVE_SCENE_REQ,e)},i.prototype.winRecord=function(e){this.send(t.ControllerCon.NET_MSG.WIN_RECORD_REQ,e)},i.prototype.ranking=function(e){this.send(t.ControllerCon.NET_MSG.RANKING_LIST_REQ,e)},i.prototype.chartlist=function(e){this.send(t.ControllerCon.NET_MSG.CHART_REQ,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeListener(t.ControllerCon.NET_MSG.ENTER_GAME_R,this.onEnterGame,this),this.removeListener(t.ControllerCon.NET_MSG.ISSUE_NOTIFY,this.onIssueNotify,this),this.removeListener(t.ControllerCon.NET_MSG.LIMIT_NOTIFY,this.onLimitNotify,this),this.removeListener(t.ControllerCon.NET_MSG.STATENOTIFY,this.onStateNotify,this),this.removeListener(t.ControllerCon.NET_MSG.EXCHANGE_NOTIFY,this.onExchangeNotify,this),this.removeListener(t.ControllerCon.NET_MSG.BET_RESPONSE,this.onBetResponse,this),this.removeListener(t.ControllerCon.NET_MSG.PLAYER_BET_INFONOTIFY,this.onPlayerBetInfoNotify,this),this.removeListener(t.ControllerCon.NET_MSG.GAME_BET_INFO_NOTIFY,this.onGameBetInfoNotify,this),this.removeListener(t.ControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.removeListener(t.ControllerCon.NET_MSG.CHART_NOTIFY,this.onChartNotify,this),this.removeListener(t.ControllerCon.NET_MSG.GAME_RESULT_NOTIFY,this.onGameResultNotify,this),this.removeListener(t.ControllerCon.NET_MSG.WIN_RECORD_RES,this.onWinningRecordRes,this),this.removeListener(t.ControllerCon.NET_MSG.RANKING_LIST_RES,this.onrankinglistres,this),this.removeListener(t.ControllerCon.NET_MSG.LEAVE_SCENE_RES,this.onLeaveSceneRes,this)},i}(BaseProxy);t.brnnNet=e,__reflect(e.prototype,"brnn.brnnNet")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.NET_MSG={ENTER_GAME:"10000",ENTER_GAME_R:"10601",ISSUE_NOTIFY:"10603",LIMIT_NOTIFY:"10605",ONLINE_NUM:"10602",STATENOTIFY:"10604",EXCHANGE_NOTIFY:"10611",GAME_RESULT_NOTIFY:"10610",ME_BET:"10606",WIN_RECORD_REQ:"10614",WIN_RECORD_RES:"10615",RANKING_LIST_REQ:"10616",RANKING_LIST_RES:"10617",DEBUG_SET_CARD_REQ:"10618",DEBUG_SET_CARD_RES:"10619",SPECIAL_PLAYER_RES:"10620",SPECIAL_PLAYER_ACTION_RES:"10621",CHIPS_RECORD_REQ:"10622",CHIPS_RECORD_NOTIFY:"10623",HALL_CHART_REQ:"10624",HALL_CHART_RES:"10625",HALL_CHART_NOTIFY:"10626",HALL_STATUS_NOTIFY:"10627",ISSUE_HISTORY_REQ:"10628",ISSUE_HISTORY_RES:"10629",SWITCH_TABLE_REQ:"10630",ENTER_TABLE_REQ:"10632",ENTER_TABLE_RES:"10633",BET_RESPONSE:"10607",PLAYER_BET_INFONOTIFY:"10608",GAME_BET_INFO_NOTIFY:"10609",CHART_REQ:"10612",CHART_NOTIFY:"10613",LWAVE_SCENE_REQ:"10148",LEAVE_SCENE_RES:"10149",RECHARGE_TYPE_REQ:"10118",RECHARGE_TYPE_RES:"10119",OTHER_BET:"1003",SHOW_HAND:"1004",BET_START_R:"10101",REWARD_START_R:"10112",RESULT_START_R:"10113"},t.Const_onEnterGameCallBack="Const_1001",t.onIssueNotifyBack="1001",t.onLimitNotifyBack="1002",t.onStateNotifyyBack="1003",t.onExchangeNotifyBack="1004",t.onSelfBetCallBack="1005",t.onBetResponseBack="1006",t.onPlayerBetInfoNotifyBack="1007",t.onGameBetInfoNotify="1008",t.onOnlineNumCallBack="1009",t.onChartNotifyBack="1010",t.onGameResultNotifyBack="1011",t.onWinningRecordResBack="1012",t.onrankinglistresBack="1013",t.onLeaveSceneResBack="1014",t.ReturnBet=[{place:0,bet_money:0},{place:1,bet_money:0},{place:2,bet_money:0},{place:3,bet_money:0}],t.Special_Player="Special_Player",t.Special_Player_Action="Special_Player_Action",t.Chips_Record_Notify="Chips_Record_Notify",t.rechargeMoney="CrechargeMoney",t.HallChartNotify="HallChartNotify",t.btnHallcharTReq="btnHallcharTReq",t.createHallChart="createHallChart",t.createGameHallChart="createGameHallChart",t.changeHallChart="changeHallChart",t.changeGameChart="changeGameChart",t.changeHallstaus="changeHallstaus",t.changeGamestaus="changeGamestaus",t.closeHallChart="closeHallChart",t.getEnterTableRes="getEnterTableRes",t.getIssueHistory="getIssueHistory",t.smallChip="t_",t}();t.ControllerCon=e,__reflect(e.prototype,"brnn.ControllerCon");var i;!function(t){t[t.Const_onEnterGameCallBack=10001]="Const_onEnterGameCallBack",t[t.onIssueNotifyBack=10002]="onIssueNotifyBack",t[t.onLimitNotifyBack=10003]="onLimitNotifyBack",t[t.onStateNotifyyBack=10004]="onStateNotifyyBack",t[t.onExchangeNotifyBack=10005]="onExchangeNotifyBack",t[t.onSelfBetCallBack=10006]="onSelfBetCallBack",t[t.onBetResponseBack=10007]="onBetResponseBack",t[t.onPlayerBetInfoNotifyBack=10008]="onPlayerBetInfoNotifyBack",t[t.onGameBetInfoNotify=10009]="onGameBetInfoNotify",t[t.onOnlineNumCallBack=10010]="onOnlineNumCallBack",t[t.onChartNotifyBack=10011]="onChartNotifyBack",t[t.onGameResultNotifyBack=10012]="onGameResultNotifyBack",t[t.onWinningRecordResBack=10013]="onWinningRecordResBack",t[t.onrankinglistresBack=10014]="onrankinglistresBack",t[t.onLeaveSceneResBack=10015]="onLeaveSceneResBack"}(i=t.CallBackConst||(t.CallBackConst={}));var o=function(){function t(){this.Brnn1counter_pick1="Brnn1counter_pick1",this.Brnn1counter_pick2="Brnn1counter_pick2",this.Brnn1counter_pick5="Brnn1counter_pick5",this.Brnn1counter_pick10="Brnn1counter_pick10",this.Brnn1counter_pick50="Brnn1counter_pick50",this.Brnn1counter_pick100="Brnn1counter_pick100",this.Brnn1counter_pick500="Brnn1counter_pick500",this.Brnn1counter_pick1000="Brnn1counter_pick1000",this.Brnn1counter_pickAllin="Brnn1counter_pickAllin",this.Brnn1counter_bet1="Brnn1counter_bet1",this.Brnn1counter_bet10="Brnn1counter_bet10",this.Brnn1counter_bet50="Brnn1counter_bet50",this.Brnn1counter_bet100="Brnn1counter_bet100",this.Brnn1counter_bet500="Brnn1counter_bet500",this.Brnn1counter_bet1000="Brnn1counter_bet1000",this.Brnn1counter_betallin="Brnn1counter_betallin",this.Brnn1operate_buttoncancel="Brnn1operate_buttoncancel",this.Brnn1operate_buttonrepeat="Brnn1operate_buttonrepeat",this.Brnn1operate_buttonconfirm="Brnn1operate_buttonconfirm",this.Brnn1operate_autoconfirm="Brnn1operate_autoconfirm",this.Brnn1operate_setcounter="Brnn1operate_setcounter",this.Brnn1operate_addcounter="Brnn1operate_addcounter",this.Brnn1bets_east="Brnn1bets_east",this.Brnn1bets_south="Brnn1bets_south",this.Brnn1bets_west="Brnn1bets_west",this.Brnn1bets_north="Brnn1bets_north",this.Brnn1direct_maps="Brnn1direct_maps",this.Brnn1leaderboard_button="Brnn1leaderboard_button",this.Brnn1menu_button="Brnn1menu_button",this.Brnn1menu_help_button="Brnn1menu_help_button",this.Brnn1menu_set_button="Brnn1menu_set_button",this.Brnn1menu_record_button="Brnn1menu_record_button",this.Brnn1menu_back_button="Brnn1menu_back_button"}return t}();t.buryPointConst=o,__reflect(o.prototype,"brnn.buryPointConst");var n;!function(t){t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North"}(n=t.BrnnPlaceConst||(t.BrnnPlaceConst={}));var s;!function(t){t[t.Classic=1]="Classic",t[t.Lottery=2]="Lottery",t[t.AllFields=3]="AllFields"}(s=t.BrnnGameTypeConst||(t.BrnnGameTypeConst={}));var r;!function(t){t[t.PLUTE0=0]="PLUTE0",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.ONLINE=4]="ONLINE",t[t.SELF=5]="SELF"}(r=t.BrnnPlayerConst||(t.BrnnPlayerConst={}))}(brnn||(brnn={}));var Data=function(){function t(){}return t.worldCoordinate=function(t,e){return t.localToGlobal(t.getChildAt(e).x,t.getChildAt(e).y)},t.gramelist={GameName:"Cow",Action:"Join",UserId:256,Banker:{Position:0,TableStatus:!0,UserId:123,UserName:"追风",UserMoney:1200,UserSrc:"ui_headImg_9_png",UserFrame:"ui_headBox_png",onOnline:567},UserList:[{Position:0,Ready:!1,UserId:123,UserName:"追风",UserMoney:324,UserSrc:"ui_headImg_9_png",UserFrame:"ui_headBox_png",onOnline:567},{Position:1,Ready:!1,UserId:256,UserName:"枫叶",UserMoney:118,UserSrc:"ui_headImg_9_png",UserFrame:"ui_headBox_png",onOnline:567},{Position:2,Ready:!1,UserId:331,UserName:"浪子彦",UserMoney:502,UserSrc:"ui_headImg_9_png",UserFrame:"ui_headBox_png",onOnline:567}]},t.grasslist={GameName:"Cow",Action:"Bet",UserList:[{Position:0,UserId:123,UserName:"追风",UserMoney:324,UserSrc:"icon_face_1",BetTMoney:300},{Position:1,UserId:256,UserName:"枫叶",UserMoney:118,UserSrc:"icon_face_1",BetTMoney:100},{Position:2,UserId:331,UserName:"浪子彦",UserMoney:502,UserSrc:"icon_face_1",RobTimes:2,BetTMoney:500}]},t.msg={status:"1",data:{time:10,TimeType:"空闲时间"}},t.deallist={GameName:"Cow",Action:"Deal",UserList:[{UserId:123,Position:0,TableStatus:!0,UserMoney:324,UserSrc:"icon_face_1",UserName:"追风",Rob:!0,RobTimes:2,Banker:!0,CardList:[{PropColor:"heart",PropNum:1},{PropColor:"flower",PropNum:3},{PropColor:"heart",PropNum:8},{PropColor:"square",PropNum:10},{PropColor:"black",PropNum:2}]},{CardList:[{PropColor:"heart",PropNum:9},{PropColor:"flower",PropNum:3},{PropColor:"black",PropNum:8},{PropColor:"square",PropNum:8},{PropColor:"black",PropNum:2},{PropColor:"flower",PropNum:1},{PropColor:"square",PropNum:3},{PropColor:"heart",PropNum:8},{PropColor:"square",PropNum:5},{PropColor:"square",PropNum:2},{PropColor:"heart",PropNum:1},{PropColor:"flower",PropNum:3},{PropColor:"heart",PropNum:8},{PropColor:"square",PropNum:3},{PropColor:"black",PropNum:2},{PropColor:"heart",PropNum:1},{PropColor:"heart",PropNum:1},{PropColor:"heart",PropNum:8},{PropColor:"square",PropNum:2},{PropColor:"flower",PropNum:2}]}]},t.accountlist={GameName:"Cow",Action:"Account",UserList:[{Position:0,Ready:!1,UserId:123,UserName:"追风",UserMoney:344,Currentlist:{0:30,1:0,2:-20,3:10},CurrentMoney:300,UserSrc:"icon_face_1"},{Position:1,Ready:!1,UserId:256,UserName:"枫叶",UserMoney:158,Currentlist:{0:30,1:0,2:-20,3:10},CurrentMoney:200,UserSrc:"icon_face_1"},{Position:2,Ready:!1,UserId:331,UserName:"浪子彦",UserMoney:442,Currentlist:{0:30,1:0,2:-20,3:10},CurrentMoney:200,UserSrc:"icon_face_1"}]},t.trendlist=[[1,0,0,1,0,1,1],[0,0,1,1,0,1,1],[1,1,0,0,0,1,0],[1,0,0,1,1,1,0]],t
}();__reflect(Data.prototype,"Data");var brnn;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"brnn.DataNotify")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t}();t.ProxyKeyConst=e,__reflect(e.prototype,"brnn.ProxyKeyConst")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.goToWash(),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this.armature=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,-1),this.removeEffect(),this.setState(e.ACTION_WASH)},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:0,x:StageUtils.getInstance().getWidth()/10*3,scaleX:0,scaleY:0,rotation:-45},400,egret.Ease.sineInOut).call(function(){this.destroy()}.bind(this)),this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.prototype.die=function(){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"brnn.Shuffle")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.brnnGg=0]="brnnGg",t[t.Base=1300]="Base",t[t.brnnPopup=1301]="brnnPopup",t[t.Recharge=1302]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._brnnNet=null,t._brnnPopupView=null,t._shuffle=null,t._winningRecord=null,t._ranking=null,t._gameSet=null,t._brnnModel=null,t.chiplist=[1,2,5,10,20,50,100,500,1e3,0],t.time3=0,t.isFly=!0,t.currentMoney=[],t.chipMoney=[1,10,100,1e3],t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),Log.trace("GameController init()"),this.registers(),egret.log("房间带入：",i),console.log(this.currDeskId),this._brnnModel.tableId=this.currDeskId,this._brnnModel.isLottery=this.currDeskType,App.ViewManager.open(t.ViewConst.Base,this._brnnModel),App.ViewManager.open(t.ViewConst.brnnPopup),App.SoundManager.playBg("bg_mp3"),this._brnnPopupView.createSetChip(),this._view.displayUI()},i.prototype.inits=function(){e.prototype.inits.call(this),this._brnnModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._brnnModel),this._brnnNet=new t.brnnNet(this,this._brnnModel),this._view=new t.GameView(this),this._brnnPopupView=new t.brnnPopupView(this,LayerManager.UI_Message),this._brnnPopupView.GameSet.initSet(),this.addEventListeners(),this._view.newPoker(),this._view.initCoinBox(),this._brnnModel.UserMoney=this.player.getMoney(),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.brnnPopup,this._brnnPopupView),this.registerRecharge()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent(),this._brnnPopupView._winandlose.addEvent(),this.registerFunc("onOver",this.betOver,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("touch",this.gamesite,this),this.registerFunc("ShowHandBtn",this.showhandPost,this),this.registerFunc("Betpost",this.Betpost,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("opentrendps",this.TrendTu,this),this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("openwinPopup",this.openwinPopup,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("brnnChangeTable",this.brnnChangeTable,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc(t.ControllerCon.Special_Player,this.specialPlayer,this),this.registerFunc(t.ControllerCon.Special_Player_Action,this.specialPlayerAction,this),this.registerFunc(t.ControllerCon.Chips_Record_Notify,this.ChipsRecordNotify,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("btnOpenRecord",this.btnOpenRecord,this),this.registerFunc("openLotteryHelp",this.openLotteryHelp,this),this.registerFunc(t.ControllerCon.createGameHallChart,this.createGameHallChart,this),this.registerFunc("onEnterGameBrnn",this.onEnterGameBrnn,this),this.registerFunc(t.ControllerCon.getIssueHistory,this.getIssueHistory,this),this.registerFunc(t.ControllerCon.changeGamestaus,this.changeGamestaus,this),this.registerFunc(t.ControllerCon.changeGameChart,this.changeGameChart,this),this.registerFunc("oncloseGameBrnn",this.oncloseGameBrnn,this),this.registerFunc(t.ControllerCon.getEnterTableRes,this.getEnterTableRes,this),this.registerFunc("openwinloseOpen",this.openwinloseOpen,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc("confirmShowLimitBet",this.confirmShowLimitBet,this),this.registerFunc("operateAddcounter",this.operateAddcounter,this),this.registerFunc("btnShowMenu",this.btnShowMenu,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this)},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent(),this._brnnPopupView._winandlose.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.addEventListeners=function(){this.registerFunc(t.ControllerCon.Const_onEnterGameCallBack,this.onEnterGameCallBack,this),this.registerFunc(t.ControllerCon.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.ControllerCon.onLimitNotifyBack,this.onLimitNotifyBack,this),this.registerFunc(t.ControllerCon.onStateNotifyyBack,this.onStateNotifyyBack,this),this.registerFunc(t.ControllerCon.onExchangeNotifyBack,this.onExchangeNotifyBack,this),this.registerFunc(t.ControllerCon.onBetResponseBack,this.onBetResponseBack,this),this.registerFunc(t.ControllerCon.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.ControllerCon.onGameBetInfoNotify,this.onGameBetInfoNotify,this),this.registerFunc(t.ControllerCon.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.ControllerCon.onChartNotifyBack,this.onChartNotifyBack,this),this.registerFunc(t.ControllerCon.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.ControllerCon.onWinningRecordResBack,this.onWinningRecordResBack,this),this.registerFunc(t.ControllerCon.onrankinglistresBack,this.onrankinglistresBack,this),this.registerFunc(t.ControllerCon.onLeaveSceneResBack,this.onLeaveSceneResBack,this),this.registerFunc(t.ControllerCon.onLeaveSceneResBack,this.ononSpecialPlayerActionResBack,this)},i.prototype.TrendTu=function(){console.log("进入走势图");var e={table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._brnnNet.chartlist(e),this._brnnPopupView._winandlose.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1direct_maps"):R.sendPlayerAction("Brnn2direct_maps")},i.prototype.showRank=function(){this._brnnNet.ranking({begin_idx:0,req_count:100,table_id:this._brnnModel.tableId}),App.EasyLoading.showOnTimeOut(),this._brnnPopupView.Ranking.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1leaderboard_button"):R.sendPlayerAction("Brnn2leaderboard_button")},i.prototype.showRecord=function(){this._brnnPopupView.WinningRecord.showPopup();var e=this._brnnModel.recordList;e.length&&this._brnnPopupView.WinningRecord.rankData(e),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_record_button"):R.sendPlayerAction("Brnn2menu_record_button")},i.prototype.showGameSet=function(){this._brnnPopupView.GameSet.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_set_button"):R.sendPlayerAction("Brnn2menu_set_button")},i.prototype.goRecharge=function(){App.SoundManager.playEffect("click_mp3"),console.log("前往充值页面")},i.prototype.backToLobby=function(){({table_id:this._brnnModel.tableId});this._proxy.sendLeaveDesk(this._brnnModel.tableId),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_back_button"):R.sendPlayerAction("Brnn2menu_back_button")},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},i.prototype.openwinPopup=function(t){this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._view.winChipControl(t)},i.prototype.showHelp=function(){this._brnnPopupView._brnnHelp.showPopup(),this._brnnPopupView._brnnHelp.rankData(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_help_button"):R.sendPlayerAction("Brnn2menu_help_button")},i.prototype.confirmShowhand=function(){var e=this._brnnModel.UserMoney;this._brnnModel.limitBet.forEach(function(i){i.place==this._brnnModel.BetRegion&&(e<i.limit_min_money?t.conFun.textReminder(2):this.Betpost(this._brnnModel.BetRegion,e))}.bind(this))},i.prototype.ShowsetChip=function(){this._brnnPopupView._setchip.showMenu(),this._brnnPopupView.setDefaultChip(this._brnnModel._chipNum),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_setcounter"):R.sendPlayerAction("Brnn2operate_setcounter")},i.prototype.brnnChangeTable=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!0};App.EasyLoading.showOnTimeOut(),this._proxy.getGameChart(t),this._brnnPopupView.showchangePopup()},i.prototype.changeMultiple=function(t){this._brnnModel._multiple=t,this._view.setchipValue(t)},i.prototype.getFiveChip=function(t){this._brnnModel._chipNum=[].concat(t),this._view.setBtnChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple);var e=JSON.stringify(this._brnnModel._chipNum),i={chips:e,table_id:this._brnnModel.tableId};this._proxy.requestChip(i)},i.prototype.getChipValue=function(e){this._brnnModel._chipMoney=[],this._brnnModel._chipMoney=e;for(var i=0;i<e.length;i++){var o=e[i];this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterPick(o):t.conFun.Brnn2counterPick(o)}},i.prototype.specialPlayer=function(t){for(var e=0;e<t.length;e++)this._view.setInformation(t[e])},i.prototype.specialPlayerAction=function(t){if(console.log("specialPlayerAction",t),t)if(t.play_action){for(var e=0,i=0;i<t.bets.length;i++)t.bets[i].money>0&&(this._view.createWinChip(t.bets[i].place,t.play_role),e+=t.bets[i].money,-1==this._brnnModel._specialPlayer.indexOf(t.play_role)&&this._brnnModel._specialPlayer.push(t.play_role));this._view.playerWinMoney(App.CommonUtils.money2Str(e),t.play_role)}else{var o=App.CommonUtils.money2Str(t.balance);if(console.log(t.play_role),this._view.avatarShake(t.play_role),this._view.specialPlayerMoney(o,t.play_role),!t.play_role)for(var i=0;i<t.bets.length;i++){var n=t.bets[i].place;this._view.starRun(n)}for(var s=0;s<t.bets.length;s++)this._view.createFlyCoin(t.play_role,t.bets[s].place,t.bets[s].money)}},i.prototype.ChipsRecordNotify=function(){this._view.createChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple)},i.prototype.onClickBackRoom=function(){this.goBack2Room()},i.prototype.rechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.btnOpenRecord=function(){var t={begin_idx:0,req_count:20,table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._proxy.requestHallHistoryReq(t),this._brnnPopupView._brnnOpenRecord.showPopup(),R.sendPlayerAction("Brnn2operate_historyaward")},i.prototype.openLotteryHelp=function(){this._brnnPopupView._brnnTakeNum.showPopup(),R.sendPlayerAction("Brnn2operate_rulehint")},i.prototype.createGameHallChart=function(t){console.log("createGameHallChart"),this._brnnPopupView._brnnchangeTable.createLement(t,this._brnnModel.tableId)},i.prototype.onEnterGameBrnn=function(t,e){if(this.setCurrDeskId(t),this.setCurrDeskType(e),t==this._brnnModel.tableId)console.log("进入当前房间"),this._brnnPopupView._brnnchangeTable.closePoput();else{var i={table_id_old:this._brnnModel.tableId,table_id_new:t};console.log("进入其他房间"),console.log(i),App.EasyLoading.showOnTimeOut(),this._proxy.requestDesk(i),this._brnnPopupView._brnnchangeTable.closePoput()}},i.prototype.getIssueHistory=function(t){this._brnnPopupView._brnnOpenRecord.createLement(t)},i.prototype.changeGamestaus=function(t){this._brnnPopupView._brnnchangeTable.ChangeGameStatusList(t)},i.prototype.changeGameChart=function(t){var e=this._brnnModel.gameChartList;this._brnnPopupView._brnnchangeTable.ChangeGameChartList(t,e)},i.prototype.oncloseGameBrnn=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!1};this._proxy.getGameChart(t)},i.prototype.getEnterTableRes=function(e){this._view.displayUI(),this.initDesktopData(),this._view.closeConfirmFrame(),this._brnnModel.isLottery=e.table_type,this._brnnModel.tableId=e.table_id_new,this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery&&this.cleanShuffleTime()},i.prototype.openwinloseOpen=function(t){this._view.winloseOpen(t)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.confirmShowLimitBet=function(){if(this._brnnModel.checktext){var t=[],e=this._brnnModel._chipNum[this._brnnModel.chipitem],i=this._brnnModel.limitBet[this._brnnModel.BetRegion];t.push({place:this._brnnModel.BetRegion,bet_money:i,table_id:this._brnnModel.tableId,chart_id:e});var o={bets:t,table_id:this._brnnModel.tableId};this._brnnNet.requestBet(o)}else this._brnnModel.preBetList[this._brnnModel.BetRegion]+=this._brnnModel.oldIimitMoney,this._view.prepare(this._brnnModel.BetRegion,Math.floor(this._brnnModel.preBetList[this._brnnModel.BetRegion]/1e4))},i.prototype.operateAddcounter=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_addcounter"):R.sendPlayerAction("Brnn2operate_addcounter")},i.prototype.btnShowMenu=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_button"):R.sendPlayerAction("Brnn2menu_button")},i.prototype.confirmLimitBet=function(){this._brnnModel.limitBetMoney&&this.Betpost(this._brnnModel.BetRegion,this._brnnModel.limitBetMoney)},i.prototype.onEnterGameCallBack=function(t){console.log("onEnterGameCallBack",t),t.table_id==this._brnnModel.tableId&&this.gameJoin(t)},i.prototype.onIssueNotifyBack=function(e){if(e.table_id==this._brnnModel.tableId){if(this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery){if(this._view.Issuenum.text=e.issue+"期:",e.issue_number){var i=e.issue_number.split(",");i.length&&(this._brnnModel.ballList=i)}}else this._view.Issuenumber.text=e.issue;this._brnnModel.issueId=e.issue}},i.prototype.onLimitNotifyBack=function(t){if(console.log("onLimitNotifyBack",t),t.table_id==this._brnnModel.tableId){this._brnnModel.limitBet=t.limits;for(var e=0;e<t.limits.length;e++)this._brnnModel.betList[t.limits[e].place]=0,this._brnnModel.preBetList[t.limits[e].place]=0}},i.prototype.onStateNotifyyBack=function(e){if(console.log("onStateNotifyyBack",e),e.table_id==this._brnnModel.tableId)if(1==e.state);else if(2==e.state&&0==e.state_index){App.SoundManager.playEffect("start_mp3"),this.next(),this._view.initializationcardPos(),console.log(this._brnnModel.upperBureauchip),this._brnnModel.idBet=!0,this._view.initCoinBox(),this._view.clearCoin(),this.gamebet(),this._brnnModel.truebet.length?this._view.enabledRepeatBet():this._view.disabledRepeatBet();var i=e.remaining_time;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?this._view.lotteyTimer(i):this._view.time.startTimer2(i),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?e.remaining_time>=14699?this.ShuffleTime():e.remaining_time>=12200?this._view.directDisplayFapai():this._view.directFapai():(this._view.initializationcardPos(),this.cleanShuffleTime()),i>9800&&this._view.playAni(0)}else 3==e.state&&(this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?(this._view.stopTimes(),0==e.state_index&&(this._view.closeDiceAnimation(),this._view.createspot()),1==e.state_index&&(this.time3=e.remaining_time)):1==e.state_index&&(this.time3=e.remaining_time,this._view.directFapai(),e.remaining_time>6800&&App.SoundManager.playEffect("alert_mp3")),this.betOverCallback())},i.prototype.onOnlineNumCallBack=function(t){console.log("onOnlineNumCallBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnModel._online=t.online_count,this._view._toolBar.changeOnlineNum(t.online_count))},i.prototype.onExchangeNotifyBack=function(e){if(console.log("onExchangeNotifyBack",e),e.table_id==this._brnnModel.tableId){this._brnnModel.winBalance=0,this._brnnModel.ExchangeMoney=0,this._brnnModel.winBalance=e.balance,this._brnnModel.UserMoney=e.balance;var i={};this._brnnModel._winPos=[],this._brnnModel._winpleNum=[],this._brnnModel._winLightPos=[];for(var o=0,n=0;n<e.place_exchanges.length;n++){var s=e.place_exchanges[n].prize_money,r=e.place_exchanges[n].bet_money;this._brnnModel.ExchangeMoney+=s,i={place:e.place_exchanges[n].place,money:s},this._brnnModel._winPos.push(i),s>0&&!this._view.isFly&&(-1==this._brnnModel._specialPlayer.indexOf(4)&&this._brnnModel._specialPlayer.push(4),this._view.createWinChip(e.place_exchanges[n].place,5)),o+=r}if(o>0){this._brnnModel.truebet.length=0;for(var a=0;a<e.place_exchanges.length;a++){var r=e.place_exchanges[a].bet_money,h=e.place_exchanges[a].place,l=t.conFun.createSkin(App.CommonUtils.money(r)),p={place:h,bet_money:r,table_id:this._brnnModel.tableId,chart_id:l};p.bet_money>0&&this._brnnModel.truebet.push(p)}}this._brnnModel._winLightPos.push(4);var c=App.CommonUtils.money2Str(this._brnnModel.ExchangeMoney);this._view.playerWinMoney(c,4),this._brnnModel.ExchangeMoney>0&&this.setRecordInit(c)}},i.prototype.onBetResponseBack=function(t){console.log("onBetResponseBack",t),t.table_id==this._brnnModel.tableId&&(this.betShow(t),this._view.avatarShake(4))},i.prototype.onPlayerBetInfoNotifyBack=function(t){var e=this;console.log("onPlayerBetInfoNotifyBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnModel.allMoney=0,t.infos.forEach(function(t,i){t.bet_money;e._view["readyMoney"+i].text=Math.floor(App.CommonUtils.money(t.bet_money)),e._brnnModel.betList[t.place]=t.bet_money}),this._view._messageInfo.setUserBet(App.CommonUtils.money2Str(this._brnnModel.allMoney)))},i.prototype.onGameBetInfoNotify=function(t){console.log("onGameBetInfoNotify",t),t.table_id==this._brnnModel.tableId&&this._view.betChipControl(t.infos)},i.prototype.onRewardStartCallBack=function(t){console.log("onRewardStartCallBack",t)},i.prototype.onResultCallBack=function(t){console.log("onResultCallBack",t),t.table_id==this._brnnModel.tableId&&this.accountshow(t)},i.prototype.onChartNotifyBack=function(t){console.log("onChartNotifyBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView._winandlose.runChart(t.charts),App.EasyLoading.hideLoading())},i.prototype.onGameResultNotifyBack=function(e){if(console.log("onGameResultNotifyBack",e),e.table_id==this._brnnModel.tableId){var i=[];if(!e.place_results.length)return;console.log(e.place_results[1].cards),i=i.concat(e.banker_cards);for(var o=0;4>o;o++)i=i.concat(e.place_results[o].cards);console.log("cardlist",i),this._view.getcardsrc(i),console.log(this.time3);var n=this;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?this.time3>9800?(this._view.dropCard(this._brnnModel.ballList,1),R.setTimeOnce(function(){n._view.kaipaiAnimation(e)},this,4500)):(this._view.dropCard(this._brnnModel.ballList,0),this._view.directKaipai(e)):this.time3>6e3?this._view.kaipaiAnimation(e):this._view.directKaipai(e)}},i.prototype.onWinningRecordResBack=function(t){console.log("onWinningRecordResBack",t),t.table_id==this._brnnModel.tableId},i.prototype.onrankinglistresBack=function(t){console.log("onrankinglistresBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView.Ranking.rankData(t.infos),App.EasyLoading.hideLoading())},i.prototype.onLeaveSceneResBack=function(t){console.log("onLeaveSceneResBack",t)},i.prototype.ononSpecialPlayerActionResBack=function(t){console.log("ononSpecialPlayerActionResBack",t)},i.prototype.gameJoin=function(t){console.log("进入游戏，页面信息显示");var e=this.player;this._brnnModel.checktext=!0,this._view._loginBtn.setAutoConfirm(!0),this._brnnModel.userId=t.user_id,this._brnnModel.UserMoney=t.balance,this._view._messageInfo.setUserName(t.nick_name),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._view._messageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view._messageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox())},i.prototype.setAutoBet=function(e){App.SoundManager.playEffect("click_mp3"),this._brnnModel.checktext=e,this._brnnModel.idBet&&this._view._loginBtn.trueBet(e),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_autoconfirm"):R.sendPlayerAction("Brnn2operate_autoconfirm"),e&&this.confirmBet()},i.prototype.ShuffleTime=function(){this._shuffle=new t.Shuffle(this),this._shuffle.init(),this._shuffle.anchorOffsetX=this._shuffle.width/2,this._shuffle.anchorOffsetX=this._shuffle.height/2,this._shuffle.x=StageUtils.getInstance().getWidth()/10*5.2,this._shuffle.y=StageUtils.getInstance().getHeight()/10*6,this._view._Shuffle.addChild(this._shuffle),this._shuffle.addPlayEndCallBack(function(){this._view.directDisplayFapai()},this)},i.prototype.cleanShuffleTime=function(){this._shuffle&&this._shuffle.parent&&this._shuffle.parent.removeChild(this._shuffle)},i.prototype.gamebet=function(){this._view.startRegion(),this._view._loginBtn.trueBet(this._brnnModel.checktext),this._brnnModel.UserMoney>1&&this._view._jeButton.toggleBtn(this._brnnModel.chipitem)},i.prototype.gamesite=function(t,e){App.SoundManager.playEffect("click_mp3"),console.log("选中筹码"),console.log(t),this._view._jeButton.toggleBtn(t),this._brnnModel.chipitem=t,this._brnnModel._chipid=e},i.prototype.Betpost=function(e,i){this._brnnModel.BetRegion=e;var o=i?i:1e4*this._brnnModel._chipMoney[this._brnnModel.chipitem],n=this._brnnModel._chipNum[this._brnnModel.chipitem];if(console.log("点击下注区域"),console.log(e),console.log(o),o){if(this.isLimit(e,o))return;var s={place:e,bet_money:o,table_id:this._brnnModel.tableId,chart_id:n};this._brnnModel.checktext?this.autoBet([s]):(this._brnnModel.preBetList[e]+=o,this._view.showMyPreBet(this._brnnModel.preBetList),this._view._loginBtn.ConserBet.enabled=!0)}else this._brnnPopupView._prompt.showPrompt(2,App.CommonUtils.money(this._brnnModel.UserMoney));this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction(t.conFun.brnn1betseast[e]):R.sendPlayerAction(t.conFun.brnn2betseast[e])},i.prototype.autoBet=function(t){var e=t,i={bets:e,table_id:this._brnnModel.tableId};this._brnnNet.requestBet(i)},i.prototype.isLimit=function(e,i){console.log("返回是否超限红"),console.log(e),console.log(i);var o=!1;return this._brnnModel.limitBet.forEach(function(n){if(n.place==e){var s=i,r=this._brnnModel.betList[e],a=this._brnnModel.preBetList[e],h=this._brnnModel.UserMoney;console.log(r),console.log(a),i>h?(this._popView.Prompt.showPromptBrnn(6),o=!0):r+a>=n.limit_max_money?(t.conFun.textReminder(4),o=!0):s+r+a>n.limit_max_money&&(this._brnnModel.isRepeat||this._brnnModel.isPredict?t.conFun.textReminder(4):(this._brnnModel.limitBetMoney=n.limit_max_money-(r+a),console.log("showPrompt1"),console.log(this._brnnModel.limitBetMoney),this._brnnPopupView._prompt.showPrompt(1,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money))),o=!0)}}.bind(this)),console.log(o),o},i.prototype.betShow=function(e){console.log("=================betShow=================");var i=e.code;e.bets;if(console.log(i),0!=i){if(4==i){if(this._brnnModel.isPredict||this._brnnModel.isRepeat)return void t.conFun.textReminder(i);console.log("单个区域投注");var o=this._brnnModel.betList[this._brnnModel.BetRegion],n=this._brnnModel.limitBet[this._brnnModel.BetRegion];return console.log(this._brnnModel.limitBet[this._brnnModel.BetRegion]),void(o>=n.limit_max_money?t.conFun.textReminder(i):(this._brnnModel.limitBetMoney=n.limit_max_money-o,this._brnnPopupView._prompt.showPrompt(1,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money))))}return 6==i?void this._brnnPopupView._prompt.showPromptBrnn(6):void t.conFun.textReminder(i)}for(var s=0;s<e.bets.length;s++){var r=e.bets[s].place,a=e.bets[s].bet_money,h=Math.floor(a/1e4);App.CommonUtils.money2Str(a),e.bets[s].chart_id;this._view.createFlyCoin(t.BrnnPlayerConst.SELF,r,a),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(h):t.conFun.Brnn2counterBet(h)}var l=this._brnnModel._chipMoney[this._brnnModel.chipitem];0==l&&(this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(l):t.conFun.Brnn2counterBet(l)),this._brnnModel.isRepeat&&(this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonrepeat"):R.sendPlayerAction("Brnn2operate_buttonrepeat")),this._brnnModel.UserMoney=e.balance,console.log("bets",e.bets),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._brnnModel.predict=[],this._brnnModel.isRepeat=!1,this._brnnModel.isPredict=!1,this._view._loginBtn.ConserBet.enabled=!1;for(var p=0;4>p;p++)this._view["setMoney"+p].text="",this._brnnModel.preBetList[p]=0},i.prototype.confirmBet=function(){var e=[];console.log("确认投注"),console.log(this._brnnModel.preBetList);for(var i in this._brnnModel.preBetList){var o=this._brnnModel.preBetList[i];if(o){var n=t.conFun.createSkin(o),s={place:Number(i),bet_money:o,table_id:this._brnnModel.tableId,chart_id:n};e.push(s),e.length>1&&(this._brnnModel.isPredict=!0)}}if(e.length>0){var r={bets:e,table_id:this._brnnModel.tableId};console.log(e),this._brnnNet.requestBet(r)}this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonconfirm"):R.sendPlayerAction("Brnn2operate_buttonconfirm")},i.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3");for(var t=0;4>t;t++)this._view["setMoney"+t].text="",this._brnnModel.preBetList[t]=0;this._brnnModel.predict=[],this._brnnModel.allsetMoney=0,this._view._loginBtn.ConserBet.enabled=!1,R.sendPlayerAction("Brnn2operate_buttoncancel")},i.prototype.repeatBet=function(){if(console.log("重复投注"),console.log(this._brnnModel.truebet),this._brnnModel.truebet.length){this._brnnModel.truebet.length>1&&(this._brnnModel.isRepeat=!0);for(var t=0;t<this._brnnModel.truebet.length;t++){var e=this._brnnModel.truebet[t];if(this.isLimit(e.place,e.bet_money))return}this._brnnModel.checktext?this.autoBet(this._brnnModel.truebet):(this._brnnModel.truebet.forEach(function(t,e){this.Betpost(t.place,t.bet_money)}.bind(this)),this._view.showMyPreBet(this._brnnModel.preBetList))}},i.prototype.showhandPost=function(t){this._view._jeButton.ShowHandlightBtn(),this._brnnModel.chipitem=t},i.prototype.betOver=function(){App.SoundManager.playEffect("stop_mp3"),this._view.playAni(1),this.betOverCallback()},i.prototype.betOverCallback=function(){this._brnnModel.predict=[],this._brnnModel.idBet=!1,this._brnnPopupView._prompt.closePoput(),this._view.cleanIssueTime(),this._view.stopRegion(),this._brnnModel.allsetMoney=0,this._view._loginBtn.betAsh(),this._view.disabledRepeatBet(),this._brnnModel.readyeachMoney=0;for(var t=0;4>t;t++)this._view["setMoney"+t].text="",this._brnnModel.preBetList[t]=0,this._brnnModel.betList[t]=0},i.prototype.accountshow=function(t){if(t.playerBetResultInfoList.length)for(var e=0;e<t.playerBetResultInfoList.length;e++)t.playerBetResultInfoList[e].resultMoney>0&&4>e||(t.playerBetResultInfoList[e].resultMoney=0);this._brnnModel.UserMoney=t.balance},i.prototype.next=function(){this._view.initializationcardPos(),this._view._messageInfo.setUserBet(0),this._view.clearCoin(),this._view.clearstate3(),this._brnnModel.idBet=!1},i.prototype.totalbet=function(e,i){var o=t.conFun.createSkin(App.CommonUtils.money(e)),n={place:i,bet_money:e,table_id:this._brnnModel.tableId,chart_id:o};n.bet_money>0&&this._brnnModel.truebet.push(n),this._brnnModel.allMoney+=e},i.prototype.setallbet=function(){this._brnnModel.allsetMoney=0,this._brnnModel.predict=[];for(var e=0,i=0;4>i;i++){var o=this._brnnModel.preBetList[i];e=t.conFun.createSkin(o);var n={place:i,bet_money:o,table_id:this._brnnModel.tableId,chart_id:e};n.bet_money>0&&this._brnnModel.predict.push(n),this._brnnModel.allsetMoney+=o}},i.prototype.gamehui=function(){var t=this,e=Number(App.CommonUtils.money2Str(this._brnnModel.UserMoney));return 0>=e?void console.log("=============================注意，大厅余额为0======================================="):void this._brnnModel._chipMoney.forEach(function(i,o){e>=i&&t._view._jeButton.chiplight(o)})},i.prototype.setRecordInit=function(t){var e=this._brnnModel.issueId,i=t,o={issue:e,hit_money:i};this._brnnModel.recordList.unshift(o),console.log("recordList"),console.log(this._brnnModel.recordList)},i.prototype.resetLimitBet=function(){for(var t=0;4>t;t++)this._brnnModel.limitBet[t]=this._brnnModel.limitOldBet[t],this._brnnModel.betList[t]=0},i.prototype.setPlaceLimitBet=function(t,e){this._brnnModel.limitBet[t]=this._brnnModel.limitBet[t]-e+1e4*this._brnnModel.preBetList[t],this._brnnModel.setMoneyLimit[t]=this._brnnModel.setMoneyLimit[t]-e+1e4*this._brnnModel.preBetList[t]},i.prototype.initDesktopData=function(){this._brnnModel.clearModelData(),this._view.clearCard(),this._view.clearCoin(),this._view.initializationcardPos(),App.TimerManager.removeAll(this),this._brnnModel.truebet=[],this._brnnModel.recordList.length=0,this._view.cleanTweenAN(),this._view.time.cleanIssueTime()},i.prototype.destroy=function(){e.prototype.destroy.call(this),Log.trace("brnn销毁Controller"),common.StarExpand.cleanFormPool(),App.TimerManager.removeAll(this),this._brnnPopupView.destroy(),this._brnnNet.destroy(),this._proxy.destroy(),this._view.destroy(),this._brnnModel.destroy(),common.chipBtn.cleanchipBtnPool(),t.BrnnRoom.cleanRoomBtnPool(),t.BrnnRecord.cleanRecordBtnPool(),this._view=void 0,this._proxy=void 0,this._gameSet=void 0,this._brnnPopupView=void 0,this._brnnNet=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"brnn.GameController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;
return i.checktext=!0,i.allsetMoney=0,i.initData(),i.initDataNotify(),i}return __extends(e,t),e.prototype.initData=function(){this.userId=0,this.UserMoney=0,this.checktext=!0,this.chipitem=0,this.ExchangeMoney=0,this.winBalance=0,this.upperBureauchip=[],this.readyeachMoney=0,this.allMoney=0,this.truebet=[],this._chipNum=[0,3,6,8,9],this._chipMoney=[],this._winPos=[],this._winpleNum=[],this._winLightPos=[],this._online=0,this.showMoney=0,this.BetRegion=0,this.idBet=!1,this._isFlylist=[],this._specialPlayer=[],this._allBetPos=[],this.setMoneyLimit={},this._betInfoNotify=[{place:0,total_bet_money:0},{place:1,total_bet_money:0},{place:2,total_bet_money:0},{place:3,total_bet_money:0}],this._multiple=1,this.isLottery=0,this.recordList=[],this.tableId=103,this.gameChartList=[],this.ballList=[],this.issueId=0,this.betList={},this.limitOldBet={},this.limitBet=[],this.predict=[],this.preBetList={},this.isRepeat=!1,this.isPredict=!1,this.oldIimitMoney=0,this.limitBetMoney=0},e.prototype.initDataNotify=function(){},e.prototype.changeGameChartList=function(){this.gameChartList.length>9&&this.gameChartList.splice(0,1)},e.prototype.clearModelData=function(){this.initData()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"brnn.GameModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getModel=function(){return this._model},i.prototype.onSpecialPlayerResBack=function(e){console.log("onSpecialPlayerResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player,e.special_player)},i.prototype.onSpecialPlayerActionResBack=function(e){console.log("onSpecialPlayerActionResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player_Action,e)},i.prototype.onChipsRecordNotifyBack=function(e){if(console.log("onChipsRecordNotifyBack",e),e.table_id==this.getModel().tableId){if(e.chips){var i=JSON.parse(e.chips);console.log(i),console.log(this.getModel()),this.getModel()._chipNum=i}this.applyFunc(t.ControllerCon.Chips_Record_Notify)}},i.prototype.onIssueHistoryResBack=function(e){console.log("onIssueHistoryResBack",e),e.table_id==this.getModel().tableId&&(console.log(e.infos[0]),this.applyFunc(t.ControllerCon.getIssueHistory,e.infos)),App.EasyLoading.hideLoading()},i.prototype.onGameChartResBack=function(e){console.log("onGameChartResBack",e),e&&(this.getModel().gameChartList=e.table_info_list[0].charts,this.applyFunc(t.ControllerCon.createGameHallChart,e.table_info_list),App.EasyLoading.hideLoading())},i.prototype.onGameStatusNotifyBack=function(e){console.log("onGameStatusNotifyBack",e),e&&this.applyFunc(t.ControllerCon.changeGamestaus,e)},i.prototype.onGameChartNotifyBack=function(e){console.log("onGameChartNotifyBack",e),e.charts&&(this.getModel().gameChartList.push(e.charts[0]),this.getModel().changeGameChartList(),this.applyFunc(t.ControllerCon.changeGameChart,e))},i.prototype.onEnterTableResBack=function(e){console.log("onEnterTableResBack",e),e.is_success&&(this.getModel().tableId=e.table_id_new,this.getModel().isLottery=e.table_type,this.applyFunc(t.ControllerCon.getEnterTableRes,e),App.EasyLoading.hideLoading())},i.prototype.onRechargeTypeResBack=function(t){console.log("onRechargeTypeResBack",t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_RES,this.onSpecialPlayerResBack,this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_ACTION_RES,this.onSpecialPlayerActionResBack,this),this.addListener(t.ControllerCon.NET_MSG.CHIPS_RECORD_NOTIFY,this.onChipsRecordNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_HISTORY_RES,this.onIssueHistoryResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onGameChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onGameStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onGameChartNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ENTER_TABLE_RES,this.onEnterTableResBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.requestChip=function(e){this.send(t.ControllerCon.NET_MSG.CHIPS_RECORD_REQ,e)},i.prototype.requestHallHistoryReq=function(e){this.send(t.ControllerCon.NET_MSG.ISSUE_HISTORY_REQ,e)},i.prototype.getGameChart=function(e){this.send(t.ControllerCon.NET_MSG.SWITCH_TABLE_REQ,e)},i.prototype.requestDesk=function(e){this.send(t.ControllerCon.NET_MSG.ENTER_TABLE_REQ,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"brnn.GameProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.catName=function(t){for(var e=t.toString().split(""),i=[],o=0;o<e.length;o++)i.push(Number(e[o]));return i},t.chipArr=function(t){for(var e=[],i=[],o={},n=0;n<t.length;n++)0!=t[n]&&(o={digit:t[n],bit:n},e.push(o)),e.length>=3?(i=e.slice(0,3),console.log(i)):i=e;return i},t.createSkin=function(t){return 10>t?0:100>t?3:1e3>t?6:1e4>t?8:1e5>t?4:t>=1e5?9:void 0},t.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},t.textReminder=function(t){switch(t){case 1:App.ScrollTxtTips.showTip("下注位置错误");break;case 2:App.ScrollTxtTips.showTip("下注金额未达到最低限红");break;case 3:App.ScrollTxtTips.showTip("非投注阶段，请稍后");break;case 4:App.ScrollTxtTips.showTip("超出单人限额");break;case 5:App.ScrollTxtTips.showTip("超出所有人总共限额");break;case 6:App.ScrollTxtTips.showTip("没有足够的余额");break;case 7:App.ScrollTxtTips.showTip("充值接口后期统一制作")}},t.Brnn1counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_pick1");break;case 10:R.sendPlayerAction("Brnn1counter_pick10");break;case 50:R.sendPlayerAction("Brnn1counter_pick50");break;case 100:R.sendPlayerAction("Brnn1counter_pick100");break;case 500:R.sendPlayerAction("Brnn1counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn1counter_pick1000");break;case 2e3:R.sendPlayerAction("Brnn1counter_pick2000");break;case 5e3:R.sendPlayerAction("Brnn1counter_pick5000");break;case 1e4:R.sendPlayerAction("Brnn1counter_pick10000");break;case 0:R.sendPlayerAction("Brnn1counter_pickAllin")}},t.Brnn2counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_pick1");break;case 10:R.sendPlayerAction("Brnn2counter_pick10");break;case 50:R.sendPlayerAction("Brnn2counter_pick50");break;case 100:R.sendPlayerAction("Brnn2counter_pick100");break;case 500:R.sendPlayerAction("Brnn2counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn2counter_pick1000");break;case 2e3:R.sendPlayerAction("Brnn2counter_pick2000");break;case 5e3:R.sendPlayerAction("Brnn2counter_pick5000");break;case 1e4:R.sendPlayerAction("Brnn2counter_pick10000");break;case 0:R.sendPlayerAction("Brnn2counter_pickAllin")}},t.Brnn1counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_bet1");break;case 10:R.sendPlayerAction("Brnn1counter_bet10");break;case 50:R.sendPlayerAction("Brnn1counter_bet50");break;case 100:R.sendPlayerAction("Brnn1counter_bet100");break;case 500:R.sendPlayerAction("Brnn1counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn1counter_bet1000");break;case 2e3:R.sendPlayerAction("Brnn1counter_bet2000");break;case 5e3:R.sendPlayerAction("Brnn1counter_bet5000");break;case 1e4:R.sendPlayerAction("Brnn1counter_bet10000");break;case 0:R.sendPlayerAction("Brnn1counter_betallin")}},t.Brnn2counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_bet1");break;case 10:R.sendPlayerAction("Brnn2counter_bet10");break;case 50:R.sendPlayerAction("Brnn2counter_bet50");break;case 100:R.sendPlayerAction("Brnn2counter_bet100");break;case 500:R.sendPlayerAction("Brnn2counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn2counter_bet1000");break;case 2e3:R.sendPlayerAction("Brnn2counter_bet2000");break;case 5e3:R.sendPlayerAction("Brnn2counter_bet5000");break;case 1e4:R.sendPlayerAction("Brnn2counter_bet10000");break;case 0:R.sendPlayerAction("Brnn2counter_betallin")}},t.brnn1betseast=["Brnn1bets_east","Brnn1bets_south","Brnn1bets_west","Brnn1bets_north"],t.brnn2betseast=["Brnn2bets_east","Brnn2bets_south","Brnn2bets_west","Brnn2bets_north"],t.data1=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,0,0,1,1,0],place:1},{is_win:[0,1,1,0,0,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:7,state:2,table:1,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:6,state:1,table:3,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:8,state:1,table:4,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:9,state:1,table:5,isLottery:0}],t.data2=[{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:1},{charts:[{is_win:[0,1,1,1,0],place:0},{is_win:[0,0,1,1,0],place:1},{is_win:[0,1,0,1,0],place:2},{is_win:[0,1,1,1,0],place:3}],time:8,state:1,table:1,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:3,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:4,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:5,isLottery:1}],t.data3=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1}],t}();t.conFun=e,__reflect(e.prototype,"brnn.conFun")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"brnn","GameSkin")||this;return i.coinBox=[],i.winpos=[],i._posList={},i.index=0,i._cardflaylist=[],i.spotanim=null,i._approach=null,i.allChipFlyList=[],i.isFly=!1,i.allChipList=[],i._mPlace={},i._mResultPoint=new egret.Point,i.time.initComponent(t),i._loginBtn.initComponent(t),i._jeButton.initComponent(t),i._toolBar.initComponent(t),i._messageInfo.initComponent(t),i._brnnCardView.initComponent(t),i._brnnPlaceIsWin.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t,console.log("初始化界面信息"),console.log(t),this._mMoudel._chipid=this._mMoudel._chipNum[0],this._messageInfo.initInfo(),this.flyCoordinate(),this.starvisible(),this.changeTablebtnEffect(),this._toolBar.reChargeEffect(),this.displayUI(),this._posList=[];for(var i=this.MenuBox.getChildAt(1),o=0;10>o;o++)this._posList[o]={x:i.x+28.66*o,y:i.y};this._loginBtn.open(),console.log("初始化跑马灯信息"),this.initBroadcast(this)},i.prototype.displayUI=function(){if(this._mMoudel.isLottery==t.BrnnGameTypeConst.Classic){this._classic.visible=!0,this._lottery.visible=!1,this.lotteryClick.visible=!1;for(var e=0;4>e;e++)this["_odds"+e].source="brnn_ui_x1.95_png";this.closeDiceAnimation(),this.lotteryhead.visible=!1}else{this._classic.visible=!1,this._lottery.visible=!0,this.lotteryClick.visible=!1;for(var e=0;4>e;e++)this["_odds"+e].source="brnn_ui_x2_png";this.lotteryhead.visible=!1}this.time.stopTimeType=this._mMoudel.isLottery},i.prototype.lotteyTimer=function(t){this.index=0;var e=Math.round(t/1e3);this.timeSecond.text=e>=10?t+"":"0"+t,this.lotteryClick.visible=!0,this.index=e,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){if(this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery){if(this.index--,this.index<=3&&this.index>0&&App.SoundManager.playEffect("countdown_mp3"),this.index<0)return this.index=0,this.timeSecond.text=this.index>=10?this.index+"":"0"+this.index,void App.TimerManager.removeAll(this);this.timeSecond.text=this.index>=10?this.index+"":"0"+this.index,console.log("彩票倒计时",this.timeSecond.text)}else this.stopTimes()},i.prototype.over=function(){this.index=0,this.timeSecond.text=this.index>=10?this.index+"":"0"+this.index,this.lotteryClick.visible=!1,this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&(this.createspot(),this.applyFunc("onOver"))},i.prototype.stopTimes=function(){this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&this.index>0&&(this.createspot(),this.applyFunc("onOver")),App.TimerManager.removeAll(this),this.index=0,this.timeSecond.text=this.index>=10?this.index+"":"0"+this.index,this.lotteryClick.visible=!1},i.prototype.recordCardDisplay=function(t,e){this.clearCard(),this._cardflaylist=[];for(var i=this.MenuBox.getChildAt(0),o=0;o<t.length;o++){var n=new eui.Image;n.source="common_ui_cp"+t[o]+"_png",n.width=28,n.height=29,n.x=i.x+14,n.y=i.y+14.5,n.anchorOffsetX=14,n.anchorOffsetY=14.5,this.MenuBox.addChild(n),this._cardflaylist.push(n)}e>0?this.colorBallRotate(this._cardflaylist):this.createBall(this._cardflaylist)},i.prototype.colorBallRotate=function(t){for(var e=this,i=0;i<t.length;i++){var o=t[i];egret.Tween.removeTweens(o),egret.Tween.get(o).wait(100*i).to({x:this._posList[i].x+14,y:this._posList[i].y+14.5,rotation:360},300,egret.Ease.sineInOut).call(function(){}.bind(this))}R.setTimeOnce(function(){e.directDisplayFapai(),e.closeDiceAnimation()},this,1200)},i.prototype.createBall=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.x=this._posList[e].x+14,i.y=this._posList[e].y+14.5}this.directFapai(),this.closeDiceAnimation()},i.prototype.dropCard=function(t,e){var i=this;if(this._cardflaylist.length){this._cardflaylist.reverse();for(var o=0;o<this._cardflaylist.length;o++){var n=this._cardflaylist[o];egret.Tween.removeTweens(n),egret.Tween.get(n).wait(100*o).to({y:200,alpha:0},300,egret.Ease.sineInOut)}R.setTimeOnce(function(){i.recordCardDisplay(t,e)},this,1200)}else this.recordCardDisplay(t,e)},i.prototype.clearCard=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&e.parent.removeChild(e)}this._cardflaylist=[]}},i.prototype.createspot=function(){console.log("createspot"),this.lotteryhead.visible=!0,this.spotInit(),this.spotInitRenders(),this.spotanim.play(999)},i.prototype.spotInit=function(){this.spotanim||(this.spotanim=new common.comBones)},i.prototype.spotInitRenders=function(){if(!this.spotanim.parent){var t="spot";this.lotteryhead.addChild(this.spotanim),this.spotanim.updateId(t);var e=this.lotteryhead.getChildAt(0).x+105,i=this.lotteryhead.getChildAt(0).y+13;this.spotanim.setPosition(e,i)}},i.prototype.closeDiceAnimation=function(){this.spotanim&&this.spotanim.parent&&(this.spotanim.stopGame(),this.lotteryhead.removeChild(this.spotanim)),this.lotteryhead.visible=!1},i.prototype.setUserMoney=function(t){this._messageInfo.setUserMoney(t)},i.prototype.createChip=function(t){this._jeButton.createChip(t)},i.prototype.setBtnChip=function(t){this._jeButton.setBtnChip(t)},i.prototype.enableBtn=function(){this._jeButton.enableBtn()},i.prototype.avatarShake=function(t){console.log("cow头像抖动效果"),this._messageInfo.avatarShake(t)},i.prototype.setInformation=function(t){var e=t.nick_name,i="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),o=App.CommonUtils.money(t.balance),n=t.play_role;this._messageInfo.setPluteImage(i,n),this._messageInfo.setPluteName(e,n),this.specialPlayerMoney(o,n),this._messageInfo.playerDisplay(n)},i.prototype.specialPlayerMoney=function(t,e){this._messageInfo.specialPlayerMoney(t,e)},i.prototype.playerWinMoney=function(t,e){this._messageInfo.playerWinMoney(t,e)},i.prototype.getMoneyLight=function(t){this._messageInfo.getMoneyLight(t)},i.prototype.getAllMoneyLight=function(){this._toolBar.getAllMoneyLight()},i.prototype.disabledRepeatBet=function(){this._loginBtn.disabledRepeatBet()},i.prototype.enabledRepeatBet=function(){this._loginBtn.enabledRepeatBet()},i.prototype.playAni=function(t){this._betAnimation.playAni(t)},i.prototype.changeTablebtnEffect=function(){this.diceInit(),this.diceInitRenders(),this._approach.play(0)},i.prototype.closeConfirmFrame=function(){this._loginBtn.closeConfirmFrame()},i.prototype.diceInit=function(){this._approach||(this._approach=new common.comBones)},i.prototype.diceInitRenders=function(){if(!this._approach.parent){var t="table";this.chipBanker.addChild(this._approach),this._approach.updateId(t);var e=this._changeTable.x+43,i=this._changeTable.y+47.5;this._approach.setPosition(e,i)}},i.prototype.cancel1=function(){this.applyFunc("cancelone")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,t),this);App.CommonUtils.effectButton(this.trendps,this.opentrendps,this),this._changeTable.addEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,t),this);App.CommonUtils.removeButton(this.trendps),this._changeTable.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this)},i.prototype.closePopup=function(){this._loginBtn._closeUI.visible=!0},i.prototype.stopRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!1},i.prototype.startRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!0},i.prototype.setchipValue=function(t){this._jeButton.setchipValue(t)},i.prototype.getChipValue=function(t){this._jeButton.getChipValue(t)},i.prototype.onlineShake=function(){this._toolBar.onlineShake()},i.prototype.newPoker=function(){this._brnnCardView.newPoker()},i.prototype.directDisplayFapai=function(){this._brnnCardView.directDisplayFapai()},i.prototype.directFapai=function(){this._brnnCardView.directFapai()},i.prototype.initializationcardPos=function(){this._brnnCardView.initializationcardPos()},i.prototype.clearPoker=function(){this._brnnCardView.clearPoker()},i.prototype.numShake=function(t){var e=this["betMoney"+t];egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;4>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.showBetMoney=function(e){console.log("显示所有投注额及筹码"),console.log(this.coinBox),console.log(e),console.log(this._mMoudel._betInfoNotify),e.forEach(function(e,i){console.log(e.place);var o=App.CommonUtils.money(e.total_bet_money),n=(Math.floor(e.total_bet_money/1e4),App.CommonUtils.money(this._mMoudel._betInfoNotify[i].total_bet_money)),s=this._mMoudel._betInfoNotify[i].place;if(this["betMoney"+e.place].text=Math.floor(o),o>0&&(this.showCoin(e.place,o),this.onlineShake(),-1==this._mMoudel._allBetPos.indexOf(e.place)&&this._mMoudel._allBetPos.push(e.place),o>n&&e.place==s)){this.numShake(e.place);var r=1e4*(o-n);this.createFlyCoin(t.BrnnPlayerConst.ONLINE,e.place,r)}}.bind(this)),this._mMoudel._betInfoNotify.length=0,this._mMoudel._betInfoNotify=[].concat(e),console.log(this._mMoudel._betInfoNotify)},i.prototype.showCoin=function(e,i){var o=t.conFun.getNumObj(i),n=Object.keys(o),s=this["regionlist"+e].$children[0],r=this["regionlist"+e].$children[1],a=this["regionlist"+e].$children[2];this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),4>e&&(n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0))},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?(console.log("renderCoinType"),console.log(t,e,i,o),console.log(e),console.log(i._coinNum),e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i))):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_t_9_png",n=1e5;break;case"w":s="common_ui_t_4_png",n=1e4;break;case"q":s="common_ui_t_8_png",n=1e3;break;case"b":s="common_ui_t_5_png",n=100;break;case"s":s="common_ui_t_2_png",n=10;break;case"g":s="common_ui_t_0_png",n=1}for(var r=0,a=-100,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(this.randomNum()>.65){var i=this.randomNum();h=i>.5?2.5:-2.5}else h=0;egret.Tween.get(l[e]).wait(150*e).to({y:o._currentY,x:h},150).call(function(){App.SoundManager.playEffect("betcoin_mp3")}.bind(this)),function(t){App.TimerManager.doTimer(150*t,1,function(){l[t].alpha=1},this)}(e),o._currentY-=5}.bind(this))},i.prototype.randomNum=function(){return Math.random()},i.prototype.flyBetMoney=function(){console.log("flyBetMoney显示所有投注额及筹码");this._mMoudel.BetRegion},i.prototype.createFlyCoin=function(e,i,o,n){console.log("投注飞筹码动画"),console.log(e,i,o,n);var s=App.CommonUtils.money(o).toFixed(),r=void 0!=n?n:this.createChipNum(s),a=Number(s[0]),h=this.winpos[e];console.log(r,a);for(var l=this["regionlist"+i].globalToLocal(h.x,h.y),p=0;a>p;p++){var c=common.chipBtn.create();this["regionlist"+i].addChild(c),c.init(r,t.ControllerCon.smallChip),c.scaleX=1,c.scaleY=1,c.x=l.x,c.y=l.y;var u=this["regionlist"+i].getChildAt(1).x,d=this["regionlist"+i].getChildAt(1).y-150;c.setFlyChipX(u),c.setFlyChipY(d),c.moveToPlace(50*p)}},i.prototype.createChipNum=function(t){var e,i=[0,2,5,8,4,9];return e=i[t.length-1]},i.prototype.flyWinCoin=function(){console.log("flyWinChip"),console.log(this.allChipFlyList);for(var t=0;t<this._mMoudel._winPos.length;t++){var e=this._mMoudel._winPos[t].place;if(this._mMoudel._winPos[t].money>0)for(var i=0;i<this.allChipFlyList.length;i++){var o=this.allChipFlyList[i];o.getplaceId()==e&&o.moveFlyhead()}}R.setTimeOnce(function(){this.clearChip()},this,300)},i.prototype.clearChip=function(){for(var t=this.allChipFlyList;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.betChipControl=function(t){this.isFly||this.showBetMoney(t)},i.prototype.winChipControl=function(t){this.isFly?this.flyWinCoin():this.chipFlyColumn(t)},i.prototype.clearCoin=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this);for(var t=0;4>t;t++){this["betMoney"+t].text=0,this["readyMoney"+t].text=0,this["setMoney"+t].text="";for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))}this.clearChip(),this.clearFlyWinChip(),this._brnnPlaceIsWin.cleanwinAndlose(),this.time.visible=!1,this.starvisible(),this._mMoudel._specialPlayer=[],this._mMoudel._allBetPos=[]},i.prototype.clearAllChip=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))},i.prototype.cleanIssueTime=function(){this.time.cleanIssueTime(),this.time.visible=!1},i.prototype.chipFlyColumn=function(t){if(console.log("筹码柱消失，飞筹码"),t){this.chipColumn();var e=this._mMoudel._specialPlayer;R.setTimeOnce(function(){this.clearAllChip(),this.flyWinChip(),this.chipStopColumn()},this,150),R.setTimeOnce(function(){for(var t=0;t<e.length;t++)this.getMoneyLight(e[t]);this.getAllMoneyLight()},this,650)}},i.prototype.chipColumn=function(){console.log("筹码柱闪烁"),console.log(this._mMoudel._winPos),this._mMoudel._winPos.forEach(function(t){if(t.money>0){console.log(t.place);for(var e=0;3>e;e++){var i=this["regionlist"+t.place].getChildAt(e);egret.Tween.get(i).to({alpha:0},120)}}}.bind(this))},i.prototype.chipStopColumn=function(){this._mMoudel._winPos.forEach(function(t){if(t.money>0)for(var e=0;3>e;e++){var i=this["regionlist"+t.place].getChildAt(e);i.alpha=1}}.bind(this))},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.clearstate3=function(){this.cleanIssueTime(),this.stopRegion();for(var t=0;4>t;t++)this["setMoney"+t].text=""},i.prototype.prepare=function(t,e){this["setMoney"+t].text=e+""},i.prototype.showMyPreBet=function(t){for(var e=0;4>e;e++)this["setMoney"+e].text=t[e]?""+Math.round(App.CommonUtils.money(t[e])):""},i.prototype.getcardsrc=function(t){this._brnnCardView.getcardsrc(t)},i.prototype.kaipaiAnimation=function(t){this._brnnCardView.kaipaiAnimation(),this._brnnPlaceIsWin.showniuji(t)},i.prototype.directKaipai=function(t){this._brnnCardView.directKaipai(),this.directniuji(t),this.winloseOpen(t)},i.prototype.winloseOpen=function(t){console.log("赢钱总金额计算"),console.log(t);for(var e=[],i=[],o=!0,n=[],s=[],r=0;4>r;r++){this["bunko"+r];t.place_results[r].is_win?(e.push(r),n.push(t.place_results[r].is_win)):s.push(t.place_results[r].is_win)}e=e.concat(this._mMoudel._allBetPos).sort();for(var a=0;a<e.length;a++)e[a]==e[a+1]&&i.push(e[a]);for(var h=0;h<i.length;h++)this.createWinChip(i[h],4);o=i.length?!0:!1,R.setTimeOnce(function(){if(4==n.length||4==s.length){var t=n.length;this.winlossRun(t)}this.applyFunc("openwinPopup",o)},this,200)},i.prototype.winlossRun=function(t){this._brnnPlaceIsWin.winlossRun(t)},i.prototype.directniuji=function(t){this._brnnPlaceIsWin.directniuji(t)},i.prototype.createWinChip=function(t,e){var i=this["regionlist"+t],o=this["_chipPos"+t];console.log("createWinChip"),console.log(o),console.log("赢的位置：",e);var n=this.winpos[e];console.log("赢的坐标：",n);var s=this.cardlist.globalToLocal(n.x,n.y);console.log("赢的转换的坐标：",s);for(var r=0;5>r;r++){var a=App.MathUtils.random(0,170),h=App.MathUtils.random(0,127);console.log("headPos",s);var l=common.chipBtn.create();l.init(r),l.setNameNum(e);var p=Math.floor(o.x+a),c=Math.floor(o.y+h),u=Math.floor(s.x),d=Math.floor(s.y);this.cardlist.addChild(l),l.x=i.x+61,l.y=i.y+41.5,l.scaleX=.5,l.scaleY=.5,l.alpha=0,l.setScore(),l.setFlyX(p),l.setFlyY(c),l.setFlyChipX(u),l.setFlyChipY(d),this.allChipList.push(l)}},i.prototype.flyWinChip=function(){console.log("flyWinChip"),console.log(this.allChipList);for(var t=0;t<this.allChipList.length;t++){var e=this.allChipList[t];console.log("飞筹码: ",e),e.moveTo()}},i.prototype.clearFlyWinChip=function(){for(var t=this.allChipList;t.length;){var e=t.pop();common.chipBtn.release(e)}},i.prototype.clearFlyWinChipBox=function(){for(var t=this.coinBox;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.flyCoordinate=function(){for(var t=0;6>t;t++){var e=this["_chip"+t],i=e.x,o=e.y;2==t?(i=App.StageUtils.getWidth()-24,o=App.StageUtils.getHeight()/2-146):3==t&&(i=App.StageUtils.getWidth()-24,o=App.StageUtils.getHeight()/2);var n=this._chipGroupPos.localToGlobal(i,o);console.log("_mResultPoint:",n,e),this.winpos.push(n)}},i.prototype.starRun=function(t){console.log("神算子飞小星星动画",t);var e=this._messageInfo.getPoint(),i=this.getparabolicPoint(t),o=this.getMPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=400+150*t;n.run(e,i,o,s,function(){this["_chipStarPos"+t].visible=!0,this._mPlace[t]=null}.bind(this),this)}},i.prototype.starTrailing=function(t,e){var i=new common.comBones;i.parent||(this.addChild(i),i.updateId("star_0"),i.setPosition(t,e),i.play(1),i.addPlayEndCallBack(function(){i.parent&&(i.stopGame(),i.parent.removeChild(i))},this))},i.prototype.overParabolic=function(t){console.log(t),this["_chipStarPos"+t].visible=!0,App.TimerManager.removeAll(this)},i.prototype.starvisible=function(){for(var t=0;4>t;t++)this["_chipStarPos"+t].visible=!1},i.prototype.touchBtn=function(t){this.applyFunc("Betpost",t)},i.prototype.opentrendps=function(){this.applyFunc("opentrendps")},i.prototype.brnnChangeTable=function(){console.log("brnnChangeTable"),App.SoundManager.playEffect("click_mp3"),this.applyFunc("brnnChangeTable")},i.prototype.btnOpenRecord=function(){console.log("btnOpenRecord"),this.applyFunc("btnOpenRecord")},i.prototype.openLotteryHelp=function(){console.log("openLotteryHelp"),this.applyFunc("openLotteryHelp")},i.prototype.getMPoint=function(t){var e=this["_chipStarPos"+t],i=this.cardlist.localToGlobal(e.x,e.y);return i},i.prototype.getparabolicPoint=function(t){var e=this["_starParabolic"+t],i=this.cardlist.localToGlobal(e.x,e.y);return i},i.prototype.cleanTweenAN=function(){egret.Tween.removeTweens(this),App.TimerManager.removeAll(this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),Log.trace("brnn销毁GameView"),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this.time.destroy(),this._loginBtn.destroy(),this._jeButton.destroy(),this._toolBar.destroy(),this._brnnCardView.destroy(),this._brnnPlaceIsWin.destroy(),this.coinBox.length=0,this.clearFlyWinChip(),this.removeEvent(),this.clearPoker(),this.allChipList=void 0,this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),this.spotanim&&(this.spotanim.clean(),this.spotanim.destroy(),this.spotanim=void 0),this.clearCard())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"brnn.GameView")}(brnn||(brnn={}));var ddz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.ddz=i,__reflect(i.prototype,"ddz.Entrance.ddz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("ddz.CardTypeBones");return t._mIsInPool=!1,t
},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("ddz.CardTypeBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.CardTypeBones=e,__reflect(e.prototype,"ddz.CardTypeBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"BalanceViewSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.farmerWin=function(){this.visible=!0,this.RecordBg.visible=!0,this.BossWin.visible=!1,this.FarmerWin.visible=!0,this.BoxWinner.visible=!0,this.BoxBalance.visible=!1,this.BoxWinner.alpha=0,egret.Tween.get(this.BoxWinner).to({alpha:1},100)},i.prototype.exchangePoput=function(){this.visible=!0,this.BoxBalance.visible=!0,this.BoxBalance.scaleX=this.BoxBalance.scaleY=0,App.EffectUtils.showUI(this.BoxBalance)},i.prototype.closeExcangePoput=function(){this.BoxBalance.visible=!1;var t=this;App.EffectUtils.hideUI(t.BoxBalance,200,0,function(){t.visible=!1})},i.prototype.setSelfName=function(t){this.UserName.text=t},i.prototype.setSelfHead=function(t){this.UserImage.source=t},i.prototype.setSelfFrame=function(t){this.UserFrame.source=t},i.prototype.setPlayerName=function(t,e){this["UserName_"+t].text=e},i.prototype.setPlayerBaseScore=function(t,e){this["BaseScore_"+t].text=e},i.prototype.setPlayerTimes=function(t,e){this["Times_"+t].text=e},i.prototype.setPlayerMoney=function(t,e){e>0?(this["MoneyAdd_"+t].text=String(e),this["MoneyMinus_"+t].visible=!1,this["MoneyAdd_"+t].visible=!0):(this["MoneyMinus_"+t].text=String(e),this["MoneyAdd_"+t].visible=!1,this["MoneyMinus_"+t].visible=!0)},i.prototype.setPlayerIsBoss=function(t,e){t==e?(this["BossBg_"+t].visible=!0,this["BossHat_"+t].visible=!0):(this["BossBg_"+t].visible=!1,this["BossHat_"+t].visible=!1)},i.prototype.hideWinner=function(){this.BoxWinner.visible=!1},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.BalanceView=e,__reflect(e.prototype,"ddz.BalanceView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardViewSkin")||this;return t.index=0,t.startIndex=-1,t.hoverIndex=-1,t.endIndex=0,t.isDepsit=!1,t.isCardPlayer=!1,t.cardNumber_1=1,t.cardNumber_2=1,t.cardNumberAll_1=0,t.cardNumberAll_2=0,t.openCardIndex_1=0,t.openCardIndex_2=0,t.hoverIndexs=[],t.selectedCards=[],t.cardList=[],t.cardList_1=[],t.cardList_2=[],t.dealCardIndex_1=0,t.dealCardIndex_2=0,t.cardArr=[],t.bottomCardList=[],t.outList_0=[],t.outList_1=[],t.outList_2=[],t}return __extends(i,e),i.prototype.init=function(){this.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.hideBottomBg(),this.hideCardPlayer(),this.GroupOutCardLeft.alpha=0,this.GroupOutCardRight.alpha=0},i.prototype.showCard=function(t){this.cardList=t,this.GroupCard.removeChildren();var e=this.getCardPoints(this.GroupCard,this.cardList,124,46);this.cardList.forEach(function(t,i){t.x=e[i],t.y=t.isSelected?-30:0,t.add2Stage(this.GroupCard),t.setDeposit(this.isDepsit),t.isDeposit&&t.setDepositMask()}.bind(this))},i.prototype.clearCard=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.clearSeatCard(this.cardList),this.index=0,this.clearSeatCard(this.cardArr);break;case t.DDZPosition.POSITION_RIGHT:this.clearSeatCard(this.cardList_1),this.dealCardIndex_1=0,this.openCardIndex_1=0;break;case t.DDZPosition.POSITION_LEFT:this.clearSeatCard(this.cardList_2),this.dealCardIndex_2=0,this.openCardIndex_2=0}},i.prototype.clearSeatCard=function(e){for(;e&&e.length>0;){var i=e.pop();t.Poker.realese(i)}},i.prototype.showBottomBg=function(){this.BottomCards.visible=!0},i.prototype.hideBottomBg=function(){this.BottomCards.visible=!1},i.prototype.setCardPlayer=function(t,e){this["CardPlayerNumber_"+e].text=t},i.prototype.showCardPlayer=function(){this.isCardPlayer=!0,this.GroupCardPlayer.visible=!0},i.prototype.hideCardPlayer=function(){this.isCardPlayer=!1,this.GroupCardPlayer.visible=!1},i.prototype.showBtnCardPlayer=function(){this.BtnCardPlayer.visible=!0},i.prototype.hideBtnCardPlayer=function(){this.BtnCardPlayer.visible=!1},i.prototype.setCardDown=function(){this.cardList.length>0&&this.cardList.forEach(function(t){t.isSelected&&(egret.Tween.get(t).wait(1e3).to({y:0},100),App.TimerManager.doTimer(1e3,1,function(){t.setSelected(!1)},this))})},i.prototype.showTableCard=function(t){this.GroupOutCard.removeChildren();var e=this.getCardPoints(this.GroupOutCard,t,111,35);t.forEach(function(t,i){t.x=e[i],t.y=0,t.scaleX=.7,t.scaleY=.7,t.add2Stage(this.GroupOutCard)}.bind(this))},i.prototype.cleanTableCard=function(e){for(var i=this["outList_"+e];i&&i.length>0;){var o=i.pop();t.Poker.realese(o)}},i.prototype.getCardPoints=function(t,e,i,o){var n=[],s=t.width/2-(i/2+o/2*(e.length-1));if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s+o*r;n.push(a)}return n},i.prototype.dealCard=function(t){this.cardList=t,App.TimerManager.doTimer(250,0,this.refresh,this)},i.prototype.refresh=function(){this.index<this.cardList.length?(this.cardArr.push(this.cardList[this.index]),this.index++,this.refreshCard(this.cardArr),App.SoundManager.playEffect("ddz_flipcard_mp3")):App.TimerManager.remove(this.refresh,this)},i.prototype.refreshCard=function(t){var e=this.getCardPoints(this.GroupCard,t,124,46),i=t[t.length-1],o=this.GroupCard.numChildren;1>o?i.x=e[0]:i.x=this.GroupCard.getChildAt(o-1).x,i.scaleX=1,i.scaleY=1,i.y=0,i.setDeposit(this.isDepsit),i.isDeposit&&i.setDepositMask(),i.add2Stage(this.GroupCard);for(var n=0;n<this.GroupCard.numChildren;n++){var s=this.GroupCard.getChildAt(n);egret.Tween.get(s).to({x:e[n]},250)}},i.prototype.dealOpenCard=function(e,i,o){if(this["dealCardIndex_"+e]=0,this["GroupShowCard"+e].removeChildren(),this["cardList_"+e]=i,this["cardList_"+e].length>0){var n=[];if(this["cardList_"+e].length>1)if(this["cardList_"+e].length>9){var s={x:0,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a=10>r?{x:s.x+25*r,y:0}:{x:s.x+25*(r-10),y:45},n.push(a)}}else if(e==t.DDZPosition.POSITION_RIGHT){var s={x:225,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a={x:s.x-25*r,y:0},n.push(a)}n.reverse()}else{var s={x:0,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a={x:s.x+25*r,y:0},n.push(a)}}this["cardList_"+e].forEach(function(t,i){t.setSelected(!1),n[i]&&(t.x=n[i].x,t.y=n[i].y),o&&(t.alpha=0),t.addSPokerToStage(this["GroupShowCard"+e])}.bind(this)),o&&(this["cardList_"+e][this["dealCardIndex_"+e]].alpha=1,App.TimerManager.doTimer(250,0,this["deal"+e],this))}},i.prototype.deal1=function(){this.dealCardIndex_1<this.cardList_1.length-1?(this.dealCardIndex_1++,this.cardList_1[this.dealCardIndex_1].alpha=1):App.TimerManager.remove(this.deal1,this)},i.prototype.deal2=function(){this.dealCardIndex_2<this.cardList_2.length-1?(this.dealCardIndex_2++,this.cardList_2[this.dealCardIndex_2].alpha=1):App.TimerManager.remove(this.deal2,this)},i.prototype.showOthersOpenCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!1,this["GroupShowCard"+t].visible=!0},i.prototype.showOthersCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!0,this["GroupShowCard"+t].visible=!1},i.prototype.hideOthersCards=function(t){this["GroupCardNum"+t].visible=!1},i.prototype.showOthersCardsNumber=function(t,e){this["CardNum"+t].text=e},i.prototype.dealCardOthers=function(t,e){this["cardNumber_"+t]=0,this["cardNumberAll_"+t]=e,this["CardNum"+t].text=this["cardNumber_"+t],App.TimerManager.doTimer(250,0,this["refreshCardNumber"+t],this)},i.prototype.refreshCardNumber1=function(){this.cardNumber_1<this.cardNumberAll_1?(this.cardNumber_1++,this.CardNum1.text=String(this.cardNumber_1)):App.TimerManager.doTimer(250,0,this.refreshCardNumber1,this)},i.prototype.refreshCardNumber2=function(){this.cardNumber_2<this.cardNumberAll_2?(this.cardNumber_2++,this.CardNum2.text=String(this.cardNumber_2)):App.TimerManager.doTimer(250,0,this.refreshCardNumber2,this)},i.prototype.setCardNumber=function(t,e){this["cardNumberAll_"+t]=e,this["CardNum"+t].text=e},i.prototype.showBottomCard=function(e){this.clearBottomCard(),this.GroupBottomCards.horizontalCenter=0;for(var i=[28,88,148],o=0;3>o;o++){var n=t.Poker.create();n.init(0,0,-1,!1),n.x=i[o],n.y=38,n.scaleX=.45,n.scaleY=.45,n.anchorOffsetX=62,n.anchorOffsetY=82,this.bottomCardList.push(n),n.add2Stage(this.GroupBottomCards)}},i.prototype.openBottomCard=function(t){this.showBottomCard(!1),this.bottomCardList.forEach(function(e,i){egret.Tween.get(e).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){e.setColor(t[i].color),e.setValue(t[i].value),e.setNumber(t[i].number),e.refresh(),egret.Tween.get(e).to({scaleX:.45},200,egret.Ease.sineInOut)}.bind(this))})},i.prototype.clearBottomCard=function(){for(var e=this.bottomCardList;e.length;){var i=e.pop();t.Poker.realese(i)}},i.prototype.deposit=function(){this.isDepsit=!0},i.prototype.cancerDeposit=function(){this.isDepsit=!1},i.prototype.showDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!0),t.setDepositMask(),t.setSelected(!1),t.y=0})},i.prototype.hideDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!1),t.hideDepositMask()})},i.prototype.hoverCard=function(t){this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||this.cardList[t].showMask())}.bind(this))},i.prototype.toggleCardType=function(t){App.SoundManager.playEffect("ddz_s_selectcard_mp3"),this.hoverIndexs.length=0,this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||(this.cardList[t].isSelected?(this.cardList[t].setSelected(!1),this.cardList[t].y=0):(this.cardList[t].setSelected(!0),this.cardList[t].y=-30)))}.bind(this))},i.prototype.showTipCards=function(t){this.cardList.forEach(function(t){t.setSelected(!1)}),t.forEach(function(t){t.setSelected(!0)}),this.showCard(this.cardList)},i.prototype.moveCard=function(t){for(var e=this.getCardPoints(this.GroupCard,t,124,46),i=0;i<t.length;i++)egret.Tween.get(t[i]).to({x:e[i]},200)},i.prototype.showSelfCard=function(e){e.forEach(function(e){var i=t.Poker.create();this.outList_0.push(i),i.init(e.color,e.value,e.number,!1)}.bind(this)),this.showTableCard(this.outList_0)},i.prototype.playCardSelf=function(t){var e=[];t.forEach(function(t){e.push(t.number)});var i=[];if(this.cardList.forEach(function(t){e.indexOf(t.number)>-1&&(t.setSelected(!0),i.push(t))}.bind(this)),i.length>0){for(var o=0;o<this.cardList.length;o++)this.cardList[o].isSelected&&(this.cardList.splice(o,1),o--);this.moveCardToTable(i),this.moveCard(this.cardList)}},i.prototype.playCard=function(){if(this.cardList.forEach(function(t,e){t.isSelected&&this.selectedCards.push(t)}.bind(this)),this.selectedCards.length>0){for(var t=0;t<this.cardList.length;t++)this.cardList[t].isSelected&&(this.cardList.splice(t,1),t--);this.moveCardToTable(this.selectedCards),this.moveCard(this.cardList)}},i.prototype.moveCardToTable=function(e){if(e.length>0){var i=this.getCardPoints(this.GroupOutCard,e,111,30);i.forEach(function(t,i){var o=this.GroupOutCard.localToGlobal(t,0),n=this.GroupCard.globalToLocal(o.x,o.y);e[i]&&(e[i].hideDepositMask(),egret.Tween.get(e[i]).to({x:n.x,y:n.y,scaleX:.7,scaleY:.7},50))}.bind(this)),App.TimerManager.doTimer(200,1,function(){for(;e.length;){var i=e.pop(),o=t.Poker.create();this.outList_0.push(o),o.init(i.color,i.val,i.number,!1),t.Poker.realese(i)}this.outList_0.reverse(),this.showTableCard(this.outList_0),this.showCard(this.cardList)}.bind(this),this)}},i.prototype.getSelectedCard=function(){var t=[];return this.cardList.forEach(function(e){e.isSelected&&t.push(e)}.bind(this)),t},i.prototype.createTableCard=function(e,i,o){var n=[];if(o==t.DDZPosition.POSITION_RIGHT){this.GroupOutCardRight.right=i;var s=259;if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s-30*r;n.push(a)}n.reverse()}else if(o==t.DDZPosition.POSITION_LEFT){this.GroupOutCardLeft.left=i;var s=0;if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s+30*r;n.push(a)}}e.forEach(function(e,i){var s=t.Poker.create();s.init(e.color,e.value,e.number,!1),s.x=n[i],s.y=0,s.scaleX=.7,s.scaleY=.7,o==t.DDZPosition.POSITION_RIGHT?(this.outList_1.push(s),s.add2Stage(this.GroupOutCardRight)):o==t.DDZPosition.POSITION_LEFT&&(this.outList_2.push(s),s.add2Stage(this.GroupOutCardLeft))}.bind(this)),o==t.DDZPosition.POSITION_RIGHT?this.GroupOutCardRight.alpha=1:o==t.DDZPosition.POSITION_LEFT&&(this.GroupOutCardLeft.alpha=1)},i.prototype.showRightCard=function(e){this.createTableCard(e,168,t.DDZPosition.POSITION_RIGHT)},i.prototype.playCardRight=function(e){var i=50;if(this.createTableCard(e,58,t.DDZPosition.POSITION_RIGHT),egret.Tween.get(this.GroupOutCardRight).to({right:168,alpha:1},i),this.cardList_1.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var n=[];this.cardList_1.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),n.push(t))}.bind(this));for(var s=0;s<this.cardList_1.length;s++)this.cardList_1[s].isSelected&&(this.cardList_1.splice(s,1),s--);this.dealOpenCard(t.DDZPosition.POSITION_RIGHT,this.cardList_1,!1)}},i.prototype.showLeftCard=function(e){this.createTableCard(e,168,t.DDZPosition.POSITION_LEFT)},i.prototype.playCardLeft=function(e){var i=50;if(this.createTableCard(e,58,t.DDZPosition.POSITION_LEFT),egret.Tween.get(this.GroupOutCardLeft).to({left:168,alpha:1},i),this.cardList_2.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var n=[];this.cardList_2.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),n.push(t))}.bind(this));for(var s=0;s<this.cardList_2.length;s++)this.cardList_2[s].isSelected&&(this.cardList_2.splice(s,1),s--);this.dealOpenCard(t.DDZPosition.POSITION_LEFT,this.cardList_2,!1)}},i.prototype.getOutCard=function(t){return this["outList_"+t]},i.prototype.openCard=function(t,e){if(this["cardList_"+t]=e,e.length>0){var i=[],o={x:0,y:0};if(i.push(o),e.length>1)for(var n=1;n<e.length;n++){var s=void 0;s=10>n?{x:o.x+30*n,y:0}:{x:o.x+30*(n-10),y:48},i.push(s)}e.forEach(function(e,o){e.x=i[o].x,e.y=i[o].y,e.scaleX=.7,e.scaleY=.7,e.alpha=0,e.add2Stage(this["GroupOpenCard"+t])}.bind(this)),this["cardList_"+t][this["openCardIndex_"+t]].alpha=1,App.TimerManager.doTimer(50,0,this["open"+t],this)}},i.prototype.open1=function(){this.openCardIndex_1<this.cardList_1.length-1?(this.openCardIndex_1++,this.cardList_1[this.openCardIndex_1].alpha=1):App.TimerManager.remove(this.open1,this)},i.prototype.open2=function(){this.openCardIndex_2<this.cardList_2.length-1?(this.openCardIndex_2++,this.cardList_2[this.openCardIndex_2].alpha=1):App.TimerManager.remove(this.open2,this)},i.prototype.touchBegin=function(e){this.isDepsit||(this.startIndex=this.checkIndex(e.localX,this.startIndex),this.startIndex>-1&&(egret.log(this.startIndex),this.applyFunc(t.EVENT.TOUCH_CARD_BEGIN,this.startIndex)))},i.prototype.touchEnd=function(e){this.isDepsit||(this.endIndex=this.checkIndex(e.localX,this.endIndex),this.applyFunc(t.EVENT.TOUCH_CARD_END))},i.prototype.touchMove=function(e){if(!this.isDepsit){this.hoverIndex=this.checkIndex(e.localX,this.hoverIndex),this.hoverIndexs.push(this.hoverIndex);var i=this.hoverIndexs[this.hoverIndexs.length-1];this.applyFunc(t.EVENT.TOUCH_CARD_MOVE,i)}},i.prototype.touchOutside=function(e){this.isDepsit||this.applyFunc(t.EVENT.TOUCH_CARD_END)},i.prototype.checkIndex=function(t,e){for(var i=0;i<this.GroupCard.numChildren;i++)i<this.GroupCard.numChildren-1?t>this.GroupCard.getChildAt(i).x&&t<this.GroupCard.getChildAt(i+1).x&&(e=i):t>this.GroupCard.getChildAt(i).x&&(e=i);return e},i.prototype.toggleCardPlayer=function(){this.isCardPlayer?(this.hideCardPlayer(),this.showBottomBg()):(this.hideBottomBg(),this.showCardPlayer()),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CARDPLAYER)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),App.CommonUtils.effectButton(this.BtnCardPlayer,this.toggleCardPlayer,this)},i.prototype.removeEvent=function(){this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),App.CommonUtils.removeButton(this.BtnCardPlayer)},i.prototype.destroy=function(){e.prototype.destroy.call(this),egret.warn("斗地主 CardView destroy"),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),App.TimerManager.remove(this.refresh,this),App.TimerManager.remove(this.deal1,this),App.TimerManager.remove(this.deal2,this),App.TimerManager.remove(this.open1,this),App.TimerManager.remove(this.open2,this),this.removeEvent(),this.selectedCards=void 0,this.cardList=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.cardArr=void 0,this.bottomCardList=void 0,this.outList_0=void 0,this.outList_1=void 0,this.outList_2=void 0},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"ddz.CardView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"ClosePoputSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.openPopup=function(){this.visible=!0,this.PoputBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},i.prototype.closePopup=function(){this.PoputBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},i.prototype.exitRoom=function(){this.applyFunc(t.EVENT.EXIT_ROOM)},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ClosePoput=e,__reflect(e.prototype,"ddz.ClosePoput")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"DDZBonesSkin")||this;return t._approach=null,t}return __extends(i,e),i.prototype.playAni=function(t){this.diceAnimation(t)},i.prototype.diceAnimation=function(t){this.diceInit(),this.diceInitRenders(t),this._approach.play(1),this.overDiceAnimation()},i.prototype.diceInit=function(){this._approach||(this._approach=new t.CardTypeBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="CardBone_"+t;this.GroupBones.addChild(this._approach),this._approach.updateId(e);var i=StageUtils.getInstance().getWidth()/2,o=StageUtils.getInstance().getHeight()/2;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this.GroupBones.removeChild(this._approach))},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._approach&&(this._approach.destroy(),this._approach=void 0)},i}(BaseEuiComponent);t.DDZBones=e,__reflect(e.prototype,"ddz.DDZBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,"DDZGameSetSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.Effect.alpha=0},e.prototype.openPopup=function(){this.visible=!0,this.GameSetBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePopup=function(){this.GameSetBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},e.prototype.setVoiceMin=function(){this.VoiceSlider.value=0;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setVoiceMax=function(){this.VoiceSlider.value=100;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setMusicMin=function(){this.MusicSlider.value=0;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.setMusicMax=function(){this.MusicSlider.value=100;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.toggleEffect=function(){this.Effect.selected?this.Effect.alpha=1:this.Effect.alpha=0},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.VoiceMin,this.setVoiceMin,this),App.CommonUtils.effectButton(this.VoiceMax,this.setVoiceMax,this),App.CommonUtils.effectButton(this.MusicMin,this.setMusicMin,this),App.CommonUtils.effectButton(this.MusicMax,this.setMusicMax,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),App.CommonUtils.removeButton(this.VoiceMin),App.CommonUtils.removeButton(this.VoiceMax),App.CommonUtils.removeButton(this.MusicMin),App.CommonUtils.removeButton(this.MusicMax)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"ddz.GameSet")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.HelpMenu.scaleX=this.HelpMenu.scaleY=0,App.EffectUtils.showUI(this.HelpMenu)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(this.HelpMenu,200,0,function(){t.visible=!1})},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"ddz.Help")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.HelpItem=e,__reflect(e.prototype,"ddz.HelpItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"MenuViewSkin")||this;return t.spotNumber=0,t.timerCallBankerNumber=0,t.menuType=!1,t}return __extends(i,e),i.prototype.init=function(){this.hideStartBtn(),this.hideDeposit(),this.hideRobBox(),this.hideDoubleBox(),this.setHidePlayBox(),this.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideBtnEffect(),this.BoxMatching.visible=!1,this.BoxGameStart.x=-555,this.BoxGameStart.alpha=0,this.MenuBox.y=-300},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.CallBanker=function(e){var i=e.currentTarget,o=i==this.NoCall?t.OperateType.OPER_NOROB:i==this.CallScore1?t.OperateType.OPER_ROBONE:i==this.CallScore2?t.OperateType.OPER_ROBTWO:t.OperateType.OPER_ROBTHREE;this.applyFunc(t.EVENT.OPERATE_REQ,o)},i.prototype.onMatch=function(){this.BoxMatching.visible=!0,this.hideSpot(),App.TimerManager.doTimer(300,0,this.refreshSpot,this)},i.prototype.refreshSpot=function(){this.spotNumber<6?this.spotNumber++:this.spotNumber=0,this.hideSpot();for(var t=0;t<this.spotNumber;t++)this.BoxSpot.getChildAt(t).visible=!0},i.prototype.hideSpot=function(){for(var t=0;t<this.BoxSpot.numChildren;t++)this.BoxSpot.getChildAt(t).visible=!1},i.prototype.filishMatch=function(){this.BoxMatching.visible=!1,App.TimerManager.remove(this.refreshSpot,this),this.spotNumber=0},i.prototype.showStartBtn=function(){this.BtnBoxOpenCard.visible=!0,this.BtnBoxGameStart.visible=!0},i.prototype.hideStartBtn=function(){this.BtnBoxOpenCard.visible=!1,this.BtnBoxGameStart.visible=!1},i.prototype.showRobBox=function(){this.CallBankerBox.visible=!0},i.prototype.hideRobBox=function(){this.CallBankerBox.visible=!1},i.prototype.showDeposit=function(){this.Deposit.visible=!0},i.prototype.hideDeposit=function(){this.Deposit.visible=!1},i.prototype.showCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!0}},i.prototype.hideCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!1}},i.prototype.startTimer=function(e,i,o,n){if(e==t.DDZPosition.POSITION_SELF)switch(o){case t.TypeConst.TYPE_ROB:this.Timer_0.horizontalCenter=-145;break;case t.TypeConst.TYPE_DOUBLE:this.Timer_0.horizontalCenter=-8;break;case t.TypeConst.TYPE_PLAY:n?this.Timer_0.horizontalCenter=-56:this.Timer_0.horizontalCenter=-12}this["Timer_"+e].showTime(i,e,o)},i.prototype.stopTimer=function(t){this["Timer_"+t].stopTime()},i.prototype.showDoubleBox=function(){this.BoxDouble.visible=!0},i.prototype.hideDoubleBox=function(){this.BoxDouble.visible=!1},i.prototype.setVisiblePlayBox=function(e){switch(e){case t.PlayBtnConst.PLAYBTN_ONE:this.BoxPlay.x=376,this.BoxNoPlay.visible=!1,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!0;break;case t.PlayBtnConst.PLAYBTN_TWO:this.BoxNoPlay.x=376,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!1;break;case t.PlayBtnConst.PLAYBTN_THREE:this.BoxNoPlay.x=82,this.BoxPlayTip.x=342,this.BoxPlay.x=486,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!0,this.BoxPlay.visible=!0}this.BoxPlayCard.visible=!0},i.prototype.setHidePlayBox=function(){this.BoxPlayCard.visible=!1},i.prototype.hideOperBtn=function(){this.CallBankerBox.visible=!1,this.BoxDouble.visible=!1,this.BoxPlayCard.visible=!1},i.prototype.playCard=function(e){switch(e.currentTarget){case this.Play:this.applyFunc(t.EVENT.PLAY_CARD);break;case this.NoPlay:this.applyFunc(t.EVENT.NO_PLAY_CARD)}},i.prototype.playTip=function(){this.applyFunc(t.EVENT.PLAY_TIP)},i.prototype["double"]=function(e){var i;switch(e.currentTarget){case this.Double:i=t.OperateType.OPER_DOUBLE;break;case this.NoDouble:i=t.OperateType.OPER_NODOUBLE}this.applyFunc(t.EVENT.OPERATE_REQ,i)},i.prototype.deposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_DEPOSIT)},i.prototype.cancerDeposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_CANCER_DEP)},i.prototype.showMenu=function(){this.menuType=0==this.menuType?!0:!1,this.menuType?egret.Tween.get(this.MenuBox).to({y:0},100):egret.Tween.get(this.MenuBox).to({y:-300},100).call(function(){this.hideBtnEffect()}.bind(this)),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_MENU)},i.prototype.menuItem=function(e){switch(App.SoundManager.playEffect("click_mp3"),this.hideBtnEffect(),e.currentTarget){case this.BtnHelp:this.BtnHelp_Mask.visible=!0,this.applyFunc(t.EVENT.HELP),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_HELP);break;case this.BtnSet:this.BtnSet_Mask.visible=!0,this.applyFunc(t.EVENT.GAME_SET),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_SET);break;case this.BtnRecord:this.BtnRecord_Mask.visible=!0,this.applyFunc(t.EVENT.RECORD)}},i.prototype.exitRoom=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc(t.EVENT.EXIT_POPUT)},i.prototype.hideBtnEffect=function(){this.BtnHelp_Mask.visible=!1,this.BtnRecord_Mask.visible=!1,this.BtnSet_Mask.visible=!1},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.effectButton(this.BtnReturn,this.exitRoom,this),App.CommonUtils.effectButton(this.Deposit,this.deposit,this),App.CommonUtils.effectButton(this.BoxCancer,this.cancerDeposit,this),App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this)
},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.Deposit),App.CommonUtils.removeButton(this.BoxCancer),App.CommonUtils.removeButton(this.ShowMenu)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.Timer_0.destroy(),this.Timer_1.destroy(),this.Timer_2.destroy()},i}(BaseEuiComponent);t.MenuView=e,__reflect(e.prototype,"ddz.MenuView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return e.call(this,"PlayerMessageSkin")||this}return __extends(i,e),i.prototype.init=function(){this.hideUser(t.DDZPosition.POSITION_SELF),this.hideUser(t.DDZPosition.POSITION_RIGHT),this.hideUser(t.DDZPosition.POSITION_LEFT)},i.prototype.setUserName=function(t,e){this["UserName_"+t].text=e},i.prototype.getUserName=function(t){return this["UserName_"+t].text},i.prototype.setUserMoney=function(t,e){this["UserMoney_"+t].text=e},i.prototype.setUserHead=function(t,e){this["UserImage_"+t].source=e},i.prototype.setUserFrame=function(t,e){this["UserFrame_"+t].source=e},i.prototype.showUser=function(t){this["GroupInfo_"+t].visible=!0},i.prototype.hideUser=function(t){this["GroupInfo_"+t].visible=!1},i}(BaseEuiComponent);t.PlayerMessage=e,__reflect(e.prototype,"ddz.PlayerMessage")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,"RecordSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},i.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordItem,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/ddz/components/RecordItem.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.Record=e,__reflect(e.prototype,"ddz.Record")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Time.text=this.data.date_time,this.Identify.text=this.data.is_landlord?"地主":"农民",this.Money.text=this.data.amount>0?"+"+App.CommonUtils.money(this.data.amount):""+App.CommonUtils.money(this.data.amount))},e}(eui.ItemRenderer);t.RecordItem=e,__reflect(e.prototype,"ddz.RecordItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TimerSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.showTime=function(t,e,i){this.visible=!0,this.position=e,this.timeType=i,this.timerNumber=t,this.TimerLable.text=String(this.timerNumber),App.TimerManager.doTimer(1e3,0,this.refreshTimer,this)},i.prototype.refreshTimer=function(){this.timerNumber>0?(this.timerNumber--,this.TimerLable.text=String(this.timerNumber),this.timeType==t.TypeConst.TYPE_PLAY&&(this.position==t.DDZPosition.POSITION_SELF&&App.SoundManager.playEffect("ddz_s_countdown_mp3"),3==this.timerNumber&&App.SoundManager.playEffect("ddz_s_alert_mp3"))):(App.TimerManager.remove(this.refreshTimer,this),this.visible=!1)},i.prototype.stopTime=function(){App.TimerManager.remove(this.refreshTimer,this),this.visible=!1},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.remove(this.refreshTimer,this)},i}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"ddz.Timer")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TypeBoxSkin")||this;return t.alarmIndex_0=0,t.alarmIndex_1=0,t.alarmIndex_2=0,t}return __extends(i,e),i.prototype.init=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.hideTab(t.DDZPosition.POSITION_RIGHT),this.hideTab(t.DDZPosition.POSITION_LEFT),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT),this.hideTips()},i.prototype.showType=function(e,i){var o=this.getType(i);this["Type_"+e].source=RES.getRes(o),e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!0:this["Type_"+e].visible=!0},i.prototype.hideType=function(e){e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!1:this["Type_"+e].visible=!1},i.prototype.showTab=function(t){this["DepositTab_"+t].visible=!0},i.prototype.hideTab=function(t){this["DepositTab_"+t].visible=!1},i.prototype.showBoss=function(t){this["BossHat_"+t].visible=!0},i.prototype.hideBoss=function(t){this["BossHat_"+t].visible=!1},i.prototype.showAlarm=function(t){this["Alarm_"+t].visible=!0,App.TimerManager.doTimer(300,0,this["alarmAni_"+t],this)},i.prototype.alarmAni_0=function(){this.alarmAni(t.DDZPosition.POSITION_SELF)},i.prototype.alarmAni_1=function(){this.alarmAni(t.DDZPosition.POSITION_RIGHT)},i.prototype.alarmAni_2=function(){this.alarmAni(t.DDZPosition.POSITION_LEFT)},i.prototype.alarmAni=function(t){this["alarmIndex_"+t]++,this["alarmIndex_"+t]%2==0?this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi"):this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi2")},i.prototype.hideAlarm=function(t){this["Alarm_"+t].visible&&(this["Alarm_"+t].visible=!1,App.TimerManager.remove(this["alarmAni_"+t],this),this["alarmIndex_"+t]=0)},i.prototype.getType=function(t){var e;return e="Dou-dizhu_text"+String(t)},i.prototype.showTips=function(e){switch(e){case t.TipConst.TIP_ONE:this.TipText.text="不符合出牌规则";break;case t.TipConst.TIP_TWO:this.TipText.text="没有大过上家的牌"}egret.Tween.get(this.PlayTips).to({alpha:1},100),App.TimerManager.doTimer(3e3,1,function(){egret.Tween.get(this.PlayTips).to({alpha:0},100)},this)},i.prototype.hideTips=function(){this.PlayTips.alpha=0},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT)},i}(BaseEuiComponent);t.TypeBox=e,__reflect(e.prototype,"ddz.TypeBox")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POSITION_UNDEFINE=-1]="POSITION_UNDEFINE",t[t.POSITION_SELF=0]="POSITION_SELF",t[t.POSITION_RIGHT=1]="POSITION_RIGHT",t[t.POSITION_LEFT=2]="POSITION_LEFT"}(e=t.DDZPosition||(t.DDZPosition={}));var i;!function(t){t[t.STATE_UNDEFINED=-1]="STATE_UNDEFINED",t[t.STATE_IDLE=0]="STATE_IDLE",t[t.STATE_MATCH=1]="STATE_MATCH",t[t.STATE_DEAL=2]="STATE_DEAL",t[t.STATE_ROB=3]="STATE_ROB",t[t.STATE_DEAL_BOTTOM=4]="STATE_DEAL_BOTTOM",t[t.STATE_DOUBLE=5]="STATE_DOUBLE",t[t.STATE_DISCARD=6]="STATE_DISCARD",t[t.STATE_EXCHANGE=7]="STATE_EXCHANGE"}(i=t.GameStateConst||(t.GameStateConst={}));var o;!function(t){t[t.OPER_READY=25]="OPER_READY",t[t.OPER_STARTGAME=100]="OPER_STARTGAME",t[t.OPER_STARTGAMESEEN=101]="OPER_STARTGAMESEEN",t[t.OPER_NOROB=200]="OPER_NOROB",t[t.OPER_ROBONE=201]="OPER_ROBONE",t[t.OPER_ROBTWO=202]="OPER_ROBTWO",t[t.OPER_ROBTHREE=203]="OPER_ROBTHREE",t[t.OPER_NODOUBLE=300]="OPER_NODOUBLE",t[t.OPER_DOUBLE=301]="OPER_DOUBLE",t[t.OPER_DEPOSIT=400]="OPER_DEPOSIT",t[t.OPER_CANCER_DEP=401]="OPER_CANCER_DEP",t[t.OPER_DESTROY_IDLE=502]="OPER_DESTROY_IDLE",t[t.OPER_DESTROY_MATCH=503]="OPER_DESTROY_MATCH",t[t.OPER_NODISCARD=44]="OPER_NODISCARD"}(o=t.OperateType||(t.OperateType={}));var n;!function(t){t[t.EXIT_ROOM=10104]="EXIT_ROOM",t[t.EXIT_ROOM_R=10105]="EXIT_ROOM_R",t[t.BOTTOM_SCORE_N=11001]="BOTTOM_SCORE_N",t[t.STATE_R=11002]="STATE_R",t[t.SEAT_INFO=11003]="SEAT_INFO",t[t.SEAT_R=11004]="SEAT_R",t[t.ACTION_Q=11005]="ACTION_Q",t[t.ACTION_R=11006]="ACTION_R",t[t.ACTION_N=11007]="ACTION_N",t[t.CARD_INFO_R=11008]="CARD_INFO_R",t[t.MULTIPLE_N=11009]="MULTIPLE_N",t[t.BOTTOM_CARD_R=11010]="BOTTOM_CARD_R",t[t.DISCARD_Q=11011]="DISCARD_Q",t[t.DISCARD_R=11012]="DISCARD_R",t[t.DISCARD_N=11013]="DISCARD_N",t[t.DISCARD_RECORD_N=11014]="DISCARD_RECORD_N",t[t.EXCHANGE_N=11015]="EXCHANGE_N",t[t.COMBAT_RECORD_Q=11018]="COMBAT_RECORD_Q",t[t.COMBAT_RECORD_R=11019]="COMBAT_RECORD_R"}(n=t.ProxyConst||(t.ProxyConst={}));var s;!function(t){t[t.onBottomScoreCallBack=10001]="onBottomScoreCallBack",t[t.onStateCallBack=10002]="onStateCallBack",t[t.onActionCallBack=10003]="onActionCallBack",t[t.onSeatCallBack=10004]="onSeatCallBack",t[t.onSeatInfoCallBack=10005]="onSeatInfoCallBack",t[t.onCardInfoCallBack=10006]="onCardInfoCallBack",t[t.onActionNotifyCallBack=10007]="onActionNotifyCallBack",t[t.onBottomCardCallBack=10008]="onBottomCardCallBack",t[t.onDiscardCallBack=10009]="onDiscardCallBack",t[t.onDiscardNotifyCallBack=10010]="onDiscardNotifyCallBack",t[t.onExchangeNotifyCallBack=10011]="onExchangeNotifyCallBack",t[t.onExitRoomCallBack=10012]="onExitRoomCallBack",t[t.onMultipleCalBack=10013]="onMultipleCalBack",t[t.onDiscardRecordCallBack=10014]="onDiscardRecordCallBack",t[t.onCombatRecordCallBack=10015]="onCombatRecordCallBack"}(s=t.CallBacks||(t.CallBacks={}));var r;!function(t){t[t.OPERATE_REQ=1001]="OPERATE_REQ",t[t.TOUCH_CARD_END=1002]="TOUCH_CARD_END",t[t.TOUCH_CARD_MOVE=1003]="TOUCH_CARD_MOVE",t[t.TOUCH_CARD_BEGIN=1004]="TOUCH_CARD_BEGIN",t[t.PLAY_CARD=1005]="PLAY_CARD",t[t.NO_PLAY_CARD=1006]="NO_PLAY_CARD",t[t.PLAY_TIP=1007]="PLAY_TIP",t[t.EXIT_ROOM=1008]="EXIT_ROOM",t[t.GAME_SET=1009]="GAME_SET",t[t.HELP=1010]="HELP",t[t.RECORD=1011]="RECORD",t[t.EXIT_POPUT=1012]="EXIT_POPUT"}(r=t.EVENT||(t.EVENT={}));var a;!function(t){t[t.START=1]="START",t[t.ROCKET=2]="ROCKET",t[t.BOMB=3]="BOMB",t[t.LIANDUI=4]="LIANDUI",t[t.SHUNZI=5]="SHUNZI",t[t.PLANE=6]="PLANE",t[t.SPRING=7]="SPRING",t[t.BOSSWIN=8]="BOSSWIN",t[t.FARMERWIN=9]="FARMERWIN"}(a=t.BonesConst||(t.BonesConst={}));var h=function(){function t(){}return t.DDZ_POINT={START_CLEARCARD:"DDZstart_clearcard",START_NORMAL:"DDZstart_normal",ROB_201BEI:"DDZrob_1bei",ROB_202BEI:"DDZrob_2bei",ROB_203BEI:"DDZrob_3bei",ROB_200BEI:"DDZrob_no",DOUBLE_300:"DDZdouble_no",DOUBLE_301:"DDZdouble_yes",PANEL_NULTIPLE:"DDZpanel_multiple",BUTTON_CARDPLAYER:"DDZbutton_cardplayer",PANEL_CARDPLAYER:"DDZpanel_cardplayer",BUTTON_MENU:"DDZbutton_menu",BUTTON_BACK:"DDZbutton_back",BUTTON_HELP:"DDZbutton_help",BUTTON_SET:"DDZbutton_set",BUTTON_TIPS:"DDZbutton_tips",BUTTON_DEPOSIT:"DDZbutton_deposit",BUTTON_CANCLEDEPOSIT:"DDZbutton_cancledeposit",EVENT_CONSECUTIVE:"DDZevent_consecutive",EVENT_DISBAND:"DDZevent_disband",EVENT_MATCH:"DDZevent_match",EVENT_MATCHS:"DDZevent_matches",EVENT_BOMB:"DDZevent_bomb",EVENT_SPRING:"DDZevent_spring"},t}();t.PointConst=h,__reflect(h.prototype,"ddz.PointConst")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.CODE_ZERO=0]="CODE_ZERO"}(e=t.ErrorConst||(t.ErrorConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.PLAYBTN_UNDEFINED=0]="PLAYBTN_UNDEFINED",t[t.PLAYBTN_ONE=1]="PLAYBTN_ONE",t[t.PLAYBTN_TWO=2]="PLAYBTN_TWO",t[t.PLAYBTN_THREE=3]="PLAYBTN_THREE"}(e=t.PlayBtnConst||(t.PlayBtnConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){}return t}();t.ProxyKeyConst=e,__reflect(e.prototype,"ddz.ProxyKeyConst")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.MALE=1]="MALE",t[t.FAMALE=2]="FAMALE"}(e=t.SexConst||(t.SexConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.TIP_UNDEFINED=0]="TIP_UNDEFINED",t[t.TIP_ONE=1]="TIP_ONE",t[t.TIP_TWO=2]="TIP_TWO"}(e=t.TipConst||(t.TipConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.TYPE_UNDEFINED=0]="TYPE_UNDEFINED",t[t.TYPE_ROB=1]="TYPE_ROB",t[t.TYPE_DOUBLE=2]="TYPE_DOUBLE",t[t.TYPE_PLAY=3]="TYPE_PLAY"}(e=t.TypeConst||(t.TypeConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Ani=1101]="Ani",t[t.Popup=1102]="Popup",t[t.CommonTest=1102]="CommonTest"}(e=t.ViewConst||(t.ViewConst={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.PHT_ERROR=-1]="PHT_ERROR",t[t.PHT_NODISCARD=0]="PHT_NODISCARD",t[t.PHT_SINGLE=1]="PHT_SINGLE",t[t.PHT_PAIR=2]="PHT_PAIR",t[t.PHT_THREE=3]="PHT_THREE",t[t.PHT_THREE_ONE=4]="PHT_THREE_ONE",t[t.PHT_THREE_TWO=5]="PHT_THREE_TWO",t[t.PHT_FOUR_TWO=6]="PHT_FOUR_TWO",t[t.PHT_FOUR_TWO_TWO=7]="PHT_FOUR_TWO_TWO",t[t.PHT_SHUNZI=8]="PHT_SHUNZI",t[t.PHT_PAIR_SHUNZI=9]="PHT_PAIR_SHUNZI",t[t.PHT_PLANE=10]="PHT_PLANE",t[t.PHT_PLANE_WING=11]="PHT_PLANE_WING",t[t.PHT_PLANE_WING_TWO=12]="PHT_PLANE_WING_TWO",t[t.PHT_BOMB=13]="PHT_BOMB",t[t.PHT_ROCKET=14]="PHT_ROCKET"}(e=t.PHandsType||(t.PHandsType={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_COLOR_UNDEFINE=0]="POKER_COLOR_UNDEFINE",t[t.POKER_COLOR_DIAMONDS=1]="POKER_COLOR_DIAMONDS",t[t.POKER_COLOR_COLVERS=2]="POKER_COLOR_COLVERS",t[t.POKER_COLOR_HEARTS=3]="POKER_COLOR_HEARTS",t[t.POKER_COLOR_SPADES=4]="POKER_COLOR_SPADES"}(e=t.PokerColor||(t.PokerColor={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_VALUE_UNDEFINE=0]="POKER_VALUE_UNDEFINE",t[t.POKER_VALUE_THREE=1]="POKER_VALUE_THREE",t[t.POKER_VALUE_FOUR=2]="POKER_VALUE_FOUR",t[t.POKER_VALUE_FIVE=3]="POKER_VALUE_FIVE",t[t.POKER_VALUE_SIX=4]="POKER_VALUE_SIX",t[t.POKER_VALUE_SEVEN=5]="POKER_VALUE_SEVEN",t[t.POKER_VALUE_EIGHT=6]="POKER_VALUE_EIGHT",t[t.POKER_VALUE_NINE=7]="POKER_VALUE_NINE",t[t.POKER_VALUE_TEN=8]="POKER_VALUE_TEN",t[t.POKER_VALUE_JACK=9]="POKER_VALUE_JACK",t[t.POKER_VALUE_QUEEN=10]="POKER_VALUE_QUEEN",t[t.POKER_VALUE_KING=11]="POKER_VALUE_KING",t[t.POKER_VALUE_ACE=12]="POKER_VALUE_ACE",t[t.POKER_VALUE_TWO=13]="POKER_VALUE_TWO",t[t.POKER_VALUE_BLACK_JOKER=14]="POKER_VALUE_BLACK_JOKER",t[t.POKER_VALUE_RED_JOKER=15]="POKER_VALUE_RED_JOKER"}(e=t.PokerValue||(t.PokerValue={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,t._popView=null,t._ddzModel=null,t._proxy=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.mGameUtil=new t.GameUtil,this.mGameTipsUtil=new t.GameTipsUtil,this.inits(),this.addListeners(),this.addEventListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._ddzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._ddzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView)},i.prototype.addEventListeners=function(){this.registerFunc(t.CallBacks.onBottomScoreCallBack,this.onBottomScoreCallBack,this),this.registerFunc(t.CallBacks.onStateCallBack,this.onStateCallBack,this),this.registerFunc(t.CallBacks.onActionCallBack,this.onActionCallBack,this),this.registerFunc(t.CallBacks.onActionNotifyCallBack,this.onActionNotifyCallBack,this),this.registerFunc(t.CallBacks.onSeatCallBack,this.onSeatCallBack,this),this.registerFunc(t.CallBacks.onSeatInfoCallBack,this.onSeatInfoCallBack,this),this.registerFunc(t.CallBacks.onCardInfoCallBack,this.onCardInfoCallBack,this),this.registerFunc(t.CallBacks.onBottomCardCallBack,this.onBottomCardCallBack,this),this.registerFunc(t.CallBacks.onDiscardCallBack,this.onDiscardCallBack,this),this.registerFunc(t.CallBacks.onDiscardNotifyCallBack,this.onDiscardNotifyCallBack,this),this.registerFunc(t.CallBacks.onExchangeNotifyCallBack,this.onExchangeNotifyCallBack,this),this.registerFunc(t.CallBacks.onExitRoomCallBack,this.onExitRoomCallBack,this),this.registerFunc(t.CallBacks.onMultipleCalBack,this.onMultipleCalBack,this),this.registerFunc(t.CallBacks.onDiscardRecordCallBack,this.onDiscardRecordCallBack,this),this.registerFunc(t.CallBacks.onCombatRecordCallBack,this.onCombatRecordCallBack,this),this.registerFunc(t.EVENT.OPERATE_REQ,this.operateReq,this),this.registerFunc(t.EVENT.TOUCH_CARD_END,this.touchCardEnd,this),this.registerFunc(t.EVENT.TOUCH_CARD_MOVE,this.touchCardMove,this),this.registerFunc(t.EVENT.TOUCH_CARD_BEGIN,this.touchCardBegin,this),this.registerFunc(t.EVENT.PLAY_CARD,this.playCard,this),this.registerFunc(t.EVENT.NO_PLAY_CARD,this.noPlay,this),this.registerFunc(t.EVENT.PLAY_TIP,this.playTis,this),this.registerFunc(t.EVENT.EXIT_ROOM,this.exitRoom,this),this.registerFunc(t.EVENT.GAME_SET,this.gameSet,this),this.registerFunc(t.EVENT.HELP,this.help,this),this.registerFunc(t.EVENT.RECORD,this.record,this),this.registerFunc(t.EVENT.EXIT_POPUT,this.exitPoput,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("ddz_bg_mp3"),this._player=GamePlayerMgr.i.getPlayer(),this._view.setUserName(t.DDZPosition.POSITION_SELF,this._player.getNickName()),this._view.setUserMoney(t.DDZPosition.POSITION_SELF,""+App.CommonUtils.money(this._player.getMoney())),this._view.setUserHead(t.DDZPosition.POSITION_SELF,"ui_headImg_"+this._player.getAvatar()),this._view.setUserFrame(t.DDZPosition.POSITION_SELF,"ui_headBox_"+this._player.getAvatarBox()),this._view.showUser(t.DDZPosition.POSITION_SELF)},i.prototype.onBottomScoreCallBack=function(t){this._ddzModel.baseScore=t.bottom_score},i.prototype.onStateCallBack=function(e){switch(this._ddzModel.gameState=e.state,e.state){case t.GameStateConst.STATE_IDLE:this.onWait();break;case t.GameStateConst.STATE_MATCH:this.onMatch();break;case t.GameStateConst.STATE_DEAL:this.onDeal(e);break;case t.GameStateConst.STATE_ROB:this.onRob(e);break;case t.GameStateConst.STATE_DOUBLE:this.onDouble(e);break;case t.GameStateConst.STATE_DISCARD:this.onDiscard(e)}},i.prototype.onWait=function(){this._view.waitGame(),this._popView.hideWinner()},i.prototype.onMatch=function(){this._view.onMatch(),this._popView.closeExcangePoput(),this._popView.hideWinner(),this._ddzModel.isContinuity=!1},i.prototype.onDeal=function(t){this._ddzModel.isOpenCard_1=!1,this._ddzModel.isOpenCard_2=!1,this._ddzModel.isDealAni=t.remaining_time==t.total_time?!0:!1,this._ddzModel.isDealAni&&this._view.startDeal(),this._ddzModel.isContinuity&&this.continuityPoint(),this.matchPoint()},i.prototype.onRob=function(e){this._view.showBottomCard(!1),this._view.hideBtnCardPlayer(),this._view.showBottomBg(),this._view.showDeposit();var i=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition);this._view.hideType(i),i==t.DDZPosition.POSITION_SELF&&this._view.showRobBox();var o=Math.round(e.total_time/1e3);this._view.startTimer(i,o,t.TypeConst.TYPE_ROB)},i.prototype.onDouble=function(e){this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._view.showDeposit(),this._view.showDoubleBox();var i=Math.round(e.remaining_time/1e3);this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_RIGHT,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_LEFT,i,t.TypeConst.TYPE_DOUBLE)},i.prototype.onDiscard=function(e){this._ddzModel.isDiscarded||(this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._ddzModel.isDiscarded=!0),this._view.showDeposit();var i=Math.round(e.remaining_time/1e3),o=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition),n=this.mGameUtil.resetPosition(e.cmp_seat,this._ddzModel.selfPosition);if(void 0==this._ddzModel.lastPlayPostion&&(this._view.hideTypeAll(),this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),this.rendenCardPlayer(),this._view.showCardPlayer(),this._view.showBtnCardPlayer())),this._ddzModel.lastPlayPostion=n,this._view.cleanTableCard(o),this._view.hideType(o),e.turn_seat==this._ddzModel.selfPosition)if(e.turn_seat==e.cmp_seat)this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_ONE),this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_PLAY,!1);else{var s=this._view.getOutCard(n),r=this.mGameTipsUtil.getTipPokerList(s,this._ddzModel.cardList_0,this._ddzModel.lastCardType);r?(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!0),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_THREE)):(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!1),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_TWO),this._ddzModel.isDeposit||this._view.showTips(t.TipConst.TIP_TWO))}else this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY);this.mGameTipsUtil.clean()},i.prototype.onSeatCallBack=function(t){this._ddzModel.selfPosition=t.seat,this._view.filishMatch()},i.prototype.onSeatInfoCallBack=function(e){this._view.showBaseScore(this._ddzModel.baseScore);var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._view.setUserName(i,e.nick_name),this._view.setUserMoney(i,""+App.CommonUtils.money(e.balance));var o=e.head?e.head:1;if(this._view.setUserHead(i,"ui_headImg_"+o),this._view.setUserFrame(i,"ui_headBox_"+e.head_frame),this._view.showUser(i),this._ddzModel["sex_"+i]=e.sex?e.sex:1,e.seat==this._ddzModel.selfPosition&&(this._ddzModel.vip=e.vip),e.is_trusteeship&&(e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0),this._view.deposit(i)),e.last_discard_type!=t.PHandsType.PHT_ERROR)if(e.last_discard_type==t.PHandsType.PHT_NODISCARD)this._view.showType(i,t.OperateType.OPER_NODISCARD);else{this._ddzModel.lastPlayPostion=i,this._ddzModel.lastCardType=e.last_discard_type;var n=[];e.lately_valid_discard.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);n.push(e)}.bind(this)),e.last_discard_type==t.PHandsType.PHT_SHUNZI&&n.reverse(),this._view.showTableCard(i,n)}switch(this._ddzModel.gameState){case t.GameStateConst.STATE_ROB:switch(e.rob_landlord_val){case 0:this._view.showType(i,t.OperateType.OPER_NOROB);break;case 1:this._view.showType(i,t.OperateType.OPER_ROBONE);break;case 2:this._view.showType(i,t.OperateType.OPER_ROBTWO);break;case 3:this._view.showType(i,t.OperateType.OPER_ROBTHREE)}break;case t.GameStateConst.STATE_DOUBLE:switch(e.double_val){case 0:this._view.showType(i,t.OperateType.OPER_NODOUBLE);break;case 1:this._view.showType(i,t.OperateType.OPER_DOUBLE)}}},i.prototype.onCardInfoCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._ddzModel.gameState==t.GameStateConst.STATE_DEAL?(this._ddzModel["cardNumber_"+i]=e.count,i==t.DDZPosition.POSITION_SELF?(this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealCard(this._ddzModel.cardList_0):this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!0):this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._ddzModel.isDealAni?this._view.dealCardOthers(i,e.count):this._view.showCardNumberOthers(i,e.count)):this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?e.seat!=this._ddzModel.selfPosition&&(this._ddzModel["isOpenCard_"+i]||(this.createCard(i,e.cards,!1),this._view.openCard(i,this._ddzModel["cardList_"+i]))):(this._ddzModel["cardNumber_"+i]=e.count,e.seat==this._ddzModel.selfPosition?(this.createCard(i,e.cards,!1),this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.showCardNumberOthers(i,e.count),2==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i),1==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i))},i.prototype.createCard=function(e,i,o){i.length>0&&(o||this._view.clearCard(e),i.forEach(function(i){var n=this.mGameUtil.getCardWithNum(i),s=t.Poker.create();s.init(n.color,n.value,i,o),this._ddzModel["cardList_"+e].push(s)}.bind(this)),t.PokerUtil.sort(this._ddzModel["cardList_"+e]))},i.prototype.onActionCallBack=function(e){if(e.code==t.ErrorConst.CODE_ZERO)switch(e.oper){case t.OperateType.OPER_STARTGAME:this._view.startGameReq(),this.startGamePoint();break;case t.OperateType.OPER_STARTGAMESEEN:this._view.startGameReq(),this.startGameSeenPoint();break;case t.OperateType.OPER_NOROB:this.robReturn(e);break;case t.OperateType.OPER_ROBONE:this.robReturn(e);break;case t.OperateType.OPER_ROBTWO:this.robReturn(e);break;case t.OperateType.OPER_ROBTHREE:this.robReturn(e);break;case t.OperateType.OPER_NODOUBLE:this.doubleReturn(e);break;case t.OperateType.OPER_DOUBLE:this.doubleReturn(e)}},i.prototype.onActionNotifyCallBack=function(e){e.seat==this._ddzModel.selfPosition&&this._view.hideOperBtn();var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);switch(this._view.stopTimer(i),e.oper){case t.OperateType.OPER_STARTGAME:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_STARTGAMESEEN:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_NOROB:this._view.showType(i,t.OperateType.OPER_NOROB),App.SoundManager.playEffect("ddz_rob_0_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBONE:this._view.showType(i,t.OperateType.OPER_ROBONE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTWO:this._view.showType(i,t.OperateType.OPER_ROBTWO),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTHREE:this._view.showType(i,t.OperateType.OPER_ROBTHREE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_NODOUBLE:this._view.showType(i,t.OperateType.OPER_NODOUBLE),App.SoundManager.playEffect("ddz_no_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DOUBLE:this._view.showType(i,t.OperateType.OPER_DOUBLE),App.SoundManager.playEffect("ddz_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DEPOSIT:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0,this.depositPoint()),this._view.deposit(i);break;case t.OperateType.OPER_CANCER_DEP:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!1,this.cancleDepositPoint()),this._view.canserDeposit(i);break;case t.OperateType.OPER_DESTROY_IDLE:e.seat!=this._ddzModel.selfPosition&&(this._view.hideUser(i),this.disbandPoint());break;case t.OperateType.OPER_DESTROY_MATCH:e.seat!=this._ddzModel.selfPosition&&(this._view.hideUser(i),this.disbandPoint())}},i.prototype.robReturn=function(e){this._view.hideRobBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.robPoint(e.oper)},i.prototype.onBottomCardCallBack=function(e){var i=this.mGameUtil.resetPosition(e.landlord_seat,this._ddzModel.selfPosition);if(this._ddzModel.bossSeat=i,this._view.showBoss(i),this._ddzModel.gameState==t.GameStateConst.STATE_DEAL_BOTTOM&&this._view.hideTypeAll(),this._ddzModel.bottomCardList.length=0,e.bottom_cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel.bottomCardList.push(e)}.bind(this)),this._view.openBottomCard(this._ddzModel.bottomCardList),e.insert_hand_card)if(this._ddzModel["cardNumber_"+i]+=e.bottom_cards.length,i==t.DDZPosition.POSITION_SELF)this._ddzModel.isInsertBottom||(this.createCard(i,e.bottom_cards,!0),App.TimerManager.doTimer(500,1,function(){this._view.showCard(this._ddzModel.cardList_0)}.bind(this),this));else{var o=this._ddzModel["cardNumber_"+i];this._ddzModel["isOpenCard_"+i]?(this.createCard(i,e.bottom_cards,!0),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.setCardNumber(i,o)}},i.prototype.doubleReturn=function(e){this._view.hideDoubleBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.doublePoint(e.oper)},i.prototype.onDiscardCallBack=function(e){e.code==t.ErrorConst.CODE_ZERO?(this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.hideBtnPlayBox(),this._ddzModel.isDiscard?this._view.playCard():this._view.showType(t.DDZPosition.POSITION_SELF,t.OperateType.OPER_NODISCARD)):this._view.showTips(t.TipConst.TIP_ONE)},i.prototype.onDiscardNotifyCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);if(this._view.stopTimer(i),this._ddzModel["cardNumber_"+i]-=e.cards.length,e.seat==this._ddzModel.selfPosition)this._view.hideBtnPlayBox();else{var o=this._ddzModel["cardNumber_"+i];this._view.setCardNumber(i,o)}if(e.type==t.PHandsType.PHT_NODISCARD&&(this._view.showType(i,t.OperateType.OPER_NODISCARD),App.SoundManager.playEffect("ddz_pass_"+this._ddzModel["sex_"+i]+"_mp3")),e.type!=t.PHandsType.PHT_NODISCARD){this._ddzModel.lastCardType=e.type;var n=[];switch(e.cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--,n.push(e)}.bind(this)),this._ddzModel.vip>0&&this.rendenCardPlayer(),e.type){case t.PHandsType.PHT_SINGLE:App.SoundManager.playEffect("ddz_single"+n[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PAIR:App.SoundManager.playEffect("ddz_pair"+n[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE:App.SoundManager.playEffect("ddz_triple_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_ONE:App.SoundManager.playEffect("ddz_3and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_TWO:App.SoundManager.playEffect("ddz_3and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO:App.SoundManager.playEffect("ddz_4and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO_TWO:App.SoundManager.playEffect("ddz_4and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_SHUNZI:this._view.playBoneAni(t.BonesConst.SHUNZI),App.SoundManager.playEffect("ddz_straight_"+this._ddzModel["sex_"+i]+"_mp3"),n.reverse();
break;case t.PHandsType.PHT_PAIR_SHUNZI:this._view.playBoneAni(t.BonesConst.LIANDUI),App.SoundManager.playEffect("ddz_doubelstraight_"+this._ddzModel["sex_"+i]+"_mp3"),n.reverse();break;case t.PHandsType.PHT_PLANE:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_plane_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING_TWO:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_BOMB:this._view.playBoneAni(t.BonesConst.BOMB),App.SoundManager.playEffect("ddz_bomb_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint();break;case t.PHandsType.PHT_ROCKET:this._view.playBoneAni(t.BonesConst.ROCKET),App.SoundManager.playEffect("ddz_rocket_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint()}this._view.playCardNotify(i,n),2==this._ddzModel["cardNumber_"+i]&&(this._view.showAlarm(i),App.SoundManager.playEffect("ddz_left2_"+this._ddzModel["sex_"+i]+"_mp3")),1==this._ddzModel["cardNumber_"+i]&&(this._view.showAlarm(i),App.SoundManager.playEffect("ddz_left1_"+this._ddzModel["sex_"+i]+"_mp3"))}},i.prototype.onExchangeNotifyCallBack=function(e){this._view.hideTypeAll(),this._view.cleanTableCard(t.DDZPosition.POSITION_SELF),this._view.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this._view.cleanTableCard(t.DDZPosition.POSITION_LEFT),this._view.canserDeposit(t.DDZPosition.POSITION_SELF),this._view.canserDeposit(t.DDZPosition.POSITION_RIGHT),this._view.canserDeposit(t.DDZPosition.POSITION_LEFT),this._view.hideAlarm(t.DDZPosition.POSITION_SELF),this._view.hideAlarm(t.DDZPosition.POSITION_RIGHT),this._view.hideAlarm(t.DDZPosition.POSITION_LEFT),this._ddzModel.isDeposit=!1,this._ddzModel.isDiscarded=!1,this._ddzModel.isInsertBottom=!1,this._ddzModel.lastPlayPostion=void 0,this._ddzModel.isContinuity=!0,e.is_landlord_win?this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.BOSSWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_win_mp3"):App.SoundManager.playEffect("ddz_lose_mp3")):this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.FARMERWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_lose_mp3"):App.SoundManager.playEffect("ddz_win_mp3")),this._ddzModel.isSprint=!1,this._popView.setSelfName(this._player.getNickName()),this._popView.setSelfHead("ui_headImg_"+this._player.getAvatar()),this._popView.setSelfFrame("ui_headBox_"+this._player.getAvatarBox()),e.infos.forEach(function(t){var e=this.mGameUtil.resetPosition(t.seat,this._ddzModel.selfPosition);this._popView.setPlayerName(e,this._view.getUserName(e)),this._popView.setPlayerBaseScore(e,this._ddzModel.baseScore),this._popView.setPlayerTimes(e,t.multiple),this._popView.setPlayerMoney(e,""+App.CommonUtils.money(t.change_money)),this._popView.setPlayerIsBoss(e,this._ddzModel.bossSeat),this._view.setUserMoney(e,""+App.CommonUtils.money(t.balance))}.bind(this)),App.TimerManager.doTimer(2e3,1,function(){this._popView.exchangePoput()}.bind(this),this),this.matchsPoint()},i.prototype.onMultipleCalBack=function(e){this._view.setMultipleDetails(e),(e.spring_mul||e.contrary_spring_mul)&&(this._ddzModel.isSprint=!0,this._view.playBoneAni(t.BonesConst.SPRING),App.SoundManager.playEffect("ddz_s_spring_mp3"),this.springPoint())},i.prototype.onDiscardRecordCallBack=function(t){this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),t.record.length&&t.record.forEach(function(t){t.cards.length&&t.cards.forEach(function(t){if(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--}}.bind(this))}.bind(this)),this._view.showCardPlayer(),this._view.showBtnCardPlayer(),this.rendenCardPlayer())},i.prototype.onCombatRecordCallBack=function(t){t.records&&t.records.length&&this._popView.renderRecord(t.records)},i.prototype.onExitRoomCallBack=function(){this.goBack2Room()},i.prototype.rendenCardPlayer=function(){for(var t=1;16>t;t++)this._view.setCardPlayer(this._ddzModel["cardPlayerNum_"+t],t)},i.prototype.operateReq=function(t){this._proxy.actionRequest(t)},i.prototype.exitRoom=function(){this._proxy.requestExitRoom()},i.prototype.gameSet=function(){this._popView.openSet()},i.prototype.help=function(){this._popView.openHelp()},i.prototype.record=function(){this._popView.openRecord();var t={begin_idx:0,req_count:100};this._proxy.requestRecord(t)},i.prototype.exitPoput=function(){this._ddzModel.gameState==t.GameStateConst.STATE_IDLE||this._ddzModel.gameState==t.GameStateConst.STATE_MATCH||this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?this._proxy.requestExitRoom():this._popView.openExitPoput()},i.prototype.touchCardEnd=function(){this._ddzModel.cardBeginIndex=-1,this._view.toggleCardType(this._ddzModel.selectedCards),this._ddzModel.selectedCards.length=0},i.prototype.touchCardMove=function(t){if(this._ddzModel.selectedCards.length=0,this._ddzModel.cardBeginIndex>-1){if(this._ddzModel.cardBeginIndex>t)for(var e=this._ddzModel.cardBeginIndex;e>t-1;e--)this._ddzModel.selectedCards.push(e);else for(var i=this._ddzModel.cardBeginIndex;t+1>i;i++)this._ddzModel.selectedCards.push(i);this._view.hoverCard(this._ddzModel.selectedCards)}},i.prototype.touchCardBegin=function(t){this._ddzModel.cardBeginIndex=t,this._ddzModel.selectedCards.push(this._ddzModel.cardBeginIndex),this._view.hoverCard(this._ddzModel.selectedCards)},i.prototype.playCard=function(){this._ddzModel.isDiscard=!0;var e=this._view.getSelectedCard();if(e.length>0){var i=this.mGameTipsUtil.getPHandsTypeByResult(e);if(i==t.PHandsType.PHT_ERROR)this._view.showTips(t.TipConst.TIP_ONE);else{var o=[];e.forEach(function(t){o.push(t.number)}.bind(this));var n={type:i,cards:o};this._proxy.discardRequest(n)}}},i.prototype.noPlay=function(){this._ddzModel.isDiscard=!1;var e={type:t.PHandsType.PHT_NODISCARD};this._proxy.discardRequest(e)},i.prototype.playTis=function(){var t=this._view.getOutCard(this._ddzModel.lastPlayPostion),e=this.mGameTipsUtil.getTipPokerList(t,this._ddzModel.cardList_0,this._ddzModel.lastCardType);this._view.showTipCards(e),this.tipsPoint()},i.prototype.startGamePoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_NORMAL)},i.prototype.startGameSeenPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_CLEARCARD)},i.prototype.robPoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["ROB_"+e+"BEI"])},i.prototype.doublePoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["DOUBLE_"+e])},i.prototype.tipsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_TIPS)},i.prototype.depositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_DEPOSIT)},i.prototype.cancleDepositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CANCLEDEPOSIT)},i.prototype.continuityPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_CONSECUTIVE)},i.prototype.disbandPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_DISBAND)},i.prototype.matchPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCH)},i.prototype.matchsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCHS)},i.prototype.bombPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_BOMB)},i.prototype.springPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_SPRING)},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.PokerTextures.cleanAll(),ObjectPool.clearClass("ddz.Poker","destroy"),App.TimerManager.removeAll(this),this._view.destroy(),this._popView.destroy(),this._ddzModel.destroy(),this._proxy.destroy(),this._view=void 0,this._popView=void 0,this._ddzModel=void 0,this._proxy=void 0,this.mGameUtil=void 0,this.mGameTipsUtil=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"ddz.GameController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i}return __extends(i,e),i.prototype.initData=function(){this.bossSeat=-1,this.cardList_0=[],this.cardList_1=[],this.cardList_2=[],this.callBossTimes=1,this.farmerDoubleTimes=0,this.bossDoubleTimes=0,this.bottomCardList=[],this.selectedCards=[],this.cardNumber_0=0,this.cardNumber_1=0,this.cardNumber_2=0,this.cardBeginIndex=-1,this.isDealAni=!1,this.lastPlayPostion=void 0,this.selfPosition=0,this.lastCardList=[],this.isInsertBottom=!1,this.sex_0=t.SexConst.MALE,this.sex_1=t.SexConst.MALE,this.sex_2=t.SexConst.MALE},i.prototype.initCardPlayer=function(){this.cardPlayerNum_1=4,this.cardPlayerNum_2=4,this.cardPlayerNum_3=4,this.cardPlayerNum_4=4,this.cardPlayerNum_5=4,this.cardPlayerNum_6=4,this.cardPlayerNum_7=4,this.cardPlayerNum_8=4,this.cardPlayerNum_9=4,this.cardPlayerNum_10=4,this.cardPlayerNum_11=4,this.cardPlayerNum_12=4,this.cardPlayerNum_13=4,this.cardPlayerNum_14=1,this.cardPlayerNum_15=1},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.cardList_0=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.bottomCardList=void 0,this.selectedCards=void 0,this.lastCardList=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"ddz.GameModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mInit=!1,this._mIsPool=!1,this.onCreate()}return e.create=function(){var t=ObjectPool.pop("ddz.Poker");return t},e.realese=function(t){return t._mIsPool?void egret.warn("Poker was in pool!",t):(t.clean(),t._mIsPool=!0,void ObjectPool.push(t))},e.prototype.onCreate=function(){this._mData=new t.PokerData,this._mIcon=new t.PokerIcon},e.prototype.init=function(t,e,i,o){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setColor(t),this._mData.setValue(e),this._mData.setNumber(i),this.setSelected(o),this._mIsPool=!1)},e.prototype.add2Stage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.hideMask()))},e.prototype.addSPokerToStage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refreshSPoker()))},e.prototype.addEvent=function(){},e.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},e.prototype.refreshSPoker=function(){this._mInit&&this._mIcon.refreshSIcon(this._mData)},e.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},e.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},e.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},e.prototype.setSelected=function(t){this._mInit&&this._mData.setSeleced(t)},e.prototype.setDeposit=function(t){this._mInit&&this._mData.setDeposit(t)},e.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mIcon.parent&&this._mIcon.parent.removeChild(this._mIcon))},Object.defineProperty(e.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this._mData.getNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._mIcon.x},set:function(t){this._mIcon.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._mIcon.y},set:function(t){this._mIcon.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(t){this._mIcon.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(t){this._mIcon.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(t){this._mIcon.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(t){this._mIcon.anchorOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(t){this._mIcon.anchorOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._mData.getSelected()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeposit",{get:function(){return this._mData.getDeposit()},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){this._mData.setColor(t)},e.prototype.setValue=function(t){this._mData.setValue(t)},e.prototype.setNumber=function(t){this._mData.setNumber(t)},e.prototype.setIsBottom=function(t){this._mIsBottom=t},e.prototype.setDepositMask=function(){this._mIcon.showDepsit()},e.prototype.hideDepositMask=function(){this._mIcon.hideDeposit()},e.prototype.getData=function(){return this._mData},e.prototype.getIcon=function(){return this._mIcon},e.prototype.destroy=function(){this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mParent=void 0,this._mData=void 0,this._mIcon=void 0},e}();t.Poker=e,__reflect(e.prototype,"ddz.Poker")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this.mIsDeposit=!1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1}return e.prototype.init=function(){this._mPokerColor=t.PokerColor.POKER_COLOR_UNDEFINE,this._mPokerValue=t.PokerValue.POKER_VALUE_UNDEFINE,this._mPokerNumber=-1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1},e.prototype.getTexture=function(){return t.PokerTextures.getPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.getSTexture=function(){return t.PokerTextures.getSPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.setBoss=function(t){this.mIsBoss=t},e.prototype.setColor=function(t){this._mPokerColor=t},e.prototype.setValue=function(t){this._mPokerValue=t},e.prototype.setNumber=function(t){this._mPokerNumber=t},e.prototype.setSeleced=function(t){this.mIsSelected=t},e.prototype.setDeposit=function(t){this.mIsDeposit=t},e.prototype.getColor=function(){return this._mPokerColor},e.prototype.getValue=function(){return this._mPokerValue},e.prototype.getNumber=function(){return this._mPokerNumber},e.prototype.getSelected=function(){return this.mIsSelected},e.prototype.getDeposit=function(){return this.mIsDeposit},e.prototype.destroy=function(){},e}();t.PokerData=e,__reflect(e.prototype,"ddz.PokerData")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._mInit=!0,this._mIcon=new eui.Image,this.addChild(this._mIcon),this._mMask=new eui.Image,this.addChild(this._mMask)},e.prototype.refreshIcon=function(t){this._mIcon.texture=t.getTexture()},e.prototype.refreshSIcon=function(t){this._mIcon.texture=t.getSTexture()},e.prototype.addMask=function(){this._mMask.texture=RES.getRes("card_ddz_mask"),this._mMask.alpha=.5},e.prototype.showDepsit=function(){this._mMask.alpha=1,this._mMask.visible=!0},e.prototype.hideDeposit=function(){this._mMask.visible=!1},e.prototype.showMask=function(){this._mMask.alpha=.5,this._mMask.visible=!0},e.prototype.hideMask=function(){this._mMask.alpha=.5,this._mMask.visible=!1},e.prototype.clean=function(){this._mIcon.texture=void 0,this._mMask.texture=void 0},e.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean())},e}(eui.Component);t.PokerIcon=e,__reflect(e.prototype,"ddz.PokerIcon")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){}return e.getPokerTexture=function(i,o){var n;if(o==t.PokerValue.POKER_VALUE_UNDEFINE)n="card_ddz_bg";else if(o==t.PokerValue.POKER_VALUE_RED_JOKER)n="card_ddz_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)n="card_ddz_78";else{var s=o+2>13?o-11:o+2;n="card_ddz_"+(i-1)+"_"+s}var r=e._mPokerTextures;return r[n]||(r[n]=RES.getRes(n)),r[n]},e.getSPokerTexture=function(i,o){var n;if(o==t.PokerValue.POKER_VALUE_RED_JOKER)n="scard_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)n="scard_78";else{var s=o+2>13?o-11:o+2;n="scard_"+(i-1)+"_"+s}var r=e._mSPokerTextures;return r[n]||(r[n]=RES.getRes(n)),r[n]},e.cleanAll=function(){var t=e._mPokerTextures,i=e._mSPokerTextures;for(var o in t)t[o]=void 0;for(var n in i)i[n]=void 0},e._mPokerTextures={},e._mSPokerTextures={},e}();t.PokerTextures=e,__reflect(e.prototype,"ddz.PokerTextures")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onBottomScore=function(e){this.applyFunc(t.CallBacks.onBottomScoreCallBack,e)},i.prototype.onState=function(e){this.applyFunc(t.CallBacks.onStateCallBack,e)},i.prototype.onAction=function(e){this.applyFunc(t.CallBacks.onActionCallBack,e)},i.prototype.onActionNotify=function(e){this.applyFunc(t.CallBacks.onActionNotifyCallBack,e)},i.prototype.onSeat=function(e){this.applyFunc(t.CallBacks.onSeatCallBack,e)},i.prototype.onSeatInfo=function(e){this.applyFunc(t.CallBacks.onSeatInfoCallBack,e)},i.prototype.onCardInfo=function(e){this.applyFunc(t.CallBacks.onCardInfoCallBack,e)},i.prototype.onBottomCard=function(e){this.applyFunc(t.CallBacks.onBottomCardCallBack,e)},i.prototype.onDiscard=function(e){this.applyFunc(t.CallBacks.onDiscardCallBack,e)},i.prototype.onDiscardNotify=function(e){this.applyFunc(t.CallBacks.onDiscardNotifyCallBack,e)},i.prototype.onExchangeNotify=function(e){this.applyFunc(t.CallBacks.onExchangeNotifyCallBack,e)},i.prototype.onExitRoomCallBack=function(e){this.applyFunc(t.CallBacks.onExitRoomCallBack,e)},i.prototype.onMultipleCalBack=function(e){this.applyFunc(t.CallBacks.onMultipleCalBack,e)},i.prototype.onDiscardRecord=function(e){this.applyFunc(t.CallBacks.onDiscardRecordCallBack,e)},i.prototype.onCombatRecord=function(e){this.applyFunc(t.CallBacks.onCombatRecordCallBack,e)},i.prototype.actionRequest=function(e){var i={oper:e};this.send(t.ProxyConst.ACTION_Q,i)},i.prototype.discardRequest=function(e){this.send(t.ProxyConst.DISCARD_Q,e)},i.prototype.requestExitRoom=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.requestRecord=function(e){this.send(t.ProxyConst.COMBAT_RECORD_Q,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.addListener(t.ProxyConst.STATE_R,this.onState,this),this.addListener(t.ProxyConst.ACTION_R,this.onAction,this),this.addListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.addListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.addListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.addListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.addListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.addListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.addListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.addListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.addListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.addListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.addListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.removeListener(t.ProxyConst.STATE_R,this.onState,this),this.removeListener(t.ProxyConst.ACTION_R,this.onAction,this),this.removeListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.removeListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.removeListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.removeListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.removeListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.removeListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.removeListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.removeListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.removeListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.removeListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.removeListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"ddz.GameProxy")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMatchMainListMinor=[],this._mPHandsType=0,this._mMatchMainListRecover=[],this._mMatchMainListMinorRecover=[],this._mTipsTimes=0,this.init()}return e.prototype.init=function(){this._mPokerTipsUtil=new t.PokerUtil},e.prototype.getTipPokerList=function(e,i,o){if(o!=t.PHandsType.PHT_ROCKET){var n=this.getRound(e,i,o);return n||(n=this._mMatchMainListRecover.shift()),n||(this.rest(),n=this.getRound([],i,t.PHandsType.PHT_BOMB)),n&&this._mMatchMainListRecover.push(n),console.log(n),n}},e.prototype.getRound=function(t,e,i){var o=egret.getTimer();this._mMatchMainList||this.analysisPokerList(t,e,i);var n=this.getWinList(t);if(this._mMatchMainList)for(;!n&&this._mMatchMainList.length>0;)n=this.getWinList(t);return egret.log("used time:",egret.getTimer()-o,"\n"),n},e.prototype.analysisPokerList=function(t,e,i){this._mPHandsType=this._mPokerTipsUtil.analysisPokerList(e,t,i),this._mMatchMainList=this._mPokerTipsUtil.getMatchMain(),this._mMatchMainListMinor=this._mPokerTipsUtil.getMatchMinor()},e.prototype.getWinList=function(e){var i,o=this._mMatchMainList,n=this._mMatchMainListMinor;if(o&&o.length>0&&(i=o.shift()),i){var s,r,a=this._mPHandsType;if(a==t.PHandsType.PHT_FOUR_TWO||a==t.PHandsType.PHT_FOUR_TWO_TWO)r=this.getMinor(n,i,2),s=r.index>=2?[].concat(i,r):[].concat(i);else if(a==t.PHandsType.PHT_PLANE_WING||a==t.PHandsType.PHT_PLANE_WING_TWO){var h=Math.floor(i.length/3);if(r=this.getMinor(n,i,h),!(r.index>=h))return void egret.warn("没有大过的飞机");s=[].concat(i,r)}else r=this.getMinor(n,i,1),s=[].concat(i,r);var l=this.compare(e,s,this._mPHandsType);return l?s:void 0}},e.prototype.getMinor=function(t,e,i){var o=[],n=0;if(t&&t.length>0)for(var s=0;s<t.length;s++){for(var r=t[s],a=!0,h=0;h<e.length;h++)if(r[0].val==e[h].val){a=!1;break}if(a&&(n++,o=o.concat(r),n>=i))break}return o.index=n,o},e.prototype.compare=function(e,i,o){var n=o;if(n==t.PHandsType.PHT_ROCKET)return!1;var s=e,r=i,a=s.length,h=r.length;if(2==h){if(r[0].val+r[1].val==29)return!0;if(2==a)return r[0].val>s[0].val}if(n==t.PHandsType.PHT_BOMB){if(0==s.length)return!0;if(4==a&&4==h)return r[0].val>s[0].val}if(1==a&&1==h)return r[0].val>s[0].val;if(3==a&&3==h)return r[0].val>s[0].val;if(t.PokerUtil.sort(s),t.PokerUtil.sort(r),n==t.PHandsType.PHT_SHUNZI||n==t.PHandsType.PHT_PAIR_SHUNZI||n==t.PHandsType.PHT_PLANE)return r[0].val>s[0].val;var l=t.PokerUtil.map(s),p=t.PokerUtil.map(r);if(l){var c=(l.length,0);for(var u in l){var d=l[u].length;d>c&&(c=d)}if(p){var m=p.length,y=0;for(var u in p){var _=p[u].length;_>y&&(y=_)}if(1==m&&4==y)return!0;if(n==t.PHandsType.PHT_THREE_ONE||n==t.PHandsType.PHT_THREE_TWO){var g=l[0].length>=3?l[0][0].val:l[1][0].val,f=p[0].length>=3?p[0][0].val:p[1][0].val;return f>g}if(n==t.PHandsType.PHT_FOUR_TWO||n==t.PHandsType.PHT_FOUR_TWO_TWO||n==t.PHandsType.PHT_PLANE_WING||n==t.PHandsType.PHT_PLANE_WING_TWO){for(var g=0,u=0,v=l.length;v>u;u++){var C=l[u];if(C.length>=3){g=C[0].val;break}}for(var f=0,u=0,b=p.length;b>u;u++){var T=p[u];if(T.length>=3){f=T[0].val;break}}return f>g}return egret.warn("匹配不对牌型",s,s),!1}}},e.prototype.getPHandsTypeByResult=function(e){var i=t.PokerUtil.map(t.PokerUtil.sort(e));return this._mPokerTipsUtil.getPHandsTypeByResult(i)},e.prototype.rest=function(){this._mMatchMainListRecover.splice(0),this._mMatchMainListMinorRecover.splice(0),this._mTipsTimes=0,this._mPHandsType=void 0,this._mMatchMainList=void 0,this._mMatchMainListMinor=void 0},e.prototype.clean=function(){this.rest()},e.prototype.destroy=function(){this.rest(),this._mPokerTipsUtil.destroy(),this._mPokerTipsUtil=void 0},e}();t.GameTipsUtil=e,__reflect(e.prototype,"ddz.GameTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){}return t.prototype.resetPosition=function(t,e){var i=t-e;return i=0>i?i+3:i},t.prototype.resetCardList=function(t){return t.forEach(function(t){4==t.color?t.value=14:5==t.color?t.value=15:t.value<3?t.value+=11:t.value>2&&t.value<14&&(t.value-=2)}.bind(this)),t},t.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o={value:i,color:e,number:t};return 4==o.color?o.value=14:5==o.color?o.value=15:(o.value<3?o.value+=11:o.value>2&&o.value<14&&(o.value-=2),o.color++),o},t}();t.GameUtil=e,__reflect(e.prototype,"ddz.GameUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){this._mMapPoker=[]}return t.prototype.sort=function(t){t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val})},t.prototype.tips=function(t){},t.prototype.showPokerByType=function(t,e){this._mMapPoker.splice(0),this.map(t)},t.prototype.showSZ=function(){},t.prototype.map=function(t){if(!(t.length<=0)){for(var e=this._mMapPoker,i=t,o=-1,n=0,s=i.length;s>n;n++){var r=i[0].val;o!=r&&e.push([r]),e[e.length].push(r)}egret.log("map:",e)}},t.prototype.destroy=function(){this._mMapPoker=void 0},t}();t.PokerTipsUtil=e,__reflect(e.prototype,"ddz.PokerTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMapPoker=[],this._mCombComm=new t.CombComm,this._mCombShunZi=new t.CombShunZi,this._mCombSanDai=new t.CombSanDai,this._mCombSiDai=new t.CombSiDai,this._mCombZhaDan=new t.CombZhaDan,this._mCombFeiJi=new t.CombFeiJi}return e.sort=function(t){return t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val}),t},e.prototype.sort=function(t){return e.sort(t)},e.prototype.tips=function(t){},e.prototype.analysisPokerList=function(t,e,i){this._mCurrComb=void 0,this._mMapPoker=this.map(t);var o=this.map(this.sort(e));return egret.log("重新赋值 PokerList"),i||(i=this.getPHandsTypeByResult(o)),this.matchType(i,o),i},e.prototype.getMatchMain=function(){return this._mCurrComb?this._mCurrComb.getMatch():void egret.warn("要先执行分析方法  analysisPokerList() ")},e.prototype.getMatchMinor=function(){return this._mCurrComb?this._mCurrComb.getMatchMinor():void 0},e.prototype.getPHandsTypeByResult=function(e){var i=e,o=i.length,n=0;for(var s in i){var r=i[s].length;r>n&&(n=r)}if(1==n){if(1==o){if(this._mCombComm.checkValidityOne(i))return t.PHandsType.PHT_SINGLE}else if(2==o){if(this._mCombZhaDan.checkValidityHJ(i))return t.PHandsType.PHT_ROCKET}else if(o>=5&&this._mCombShunZi.checkValidityOne(i))return t.PHandsType.PHT_SHUNZI}else if(2==n){if(1==o){if(this._mCombComm.checkValidityTwo(i))return t.PHandsType.PHT_PAIR}else if(o>=3&&this._mCombShunZi.checkValidityTwo(i))return t.PHandsType.PHT_PAIR_SHUNZI}else if(3==n){if(1==o&&this._mCombComm.checkValidityThree(i))return t.PHandsType.PHT_THREE;if(2==o){if(this._mCombSanDai.checkValidityOne(i))return t.PHandsType.PHT_THREE_ONE;if(this._mCombSanDai.checkValidityTwo(i))return t.PHandsType.PHT_THREE_TWO}else if(o>3&&this._mCombFeiJi.checkValidityTwo(i))return t.PHandsType.PHT_PLANE_WING_TWO;if(this._mCombShunZi.checkValidityThree(i))return t.PHandsType.PHT_PLANE;if(this._mCombFeiJi.checkValidityOne(i,3))return t.PHandsType.PHT_PLANE_WING}else if(4==n){if(2==o||3==o){if(this._mCombSiDai.checkValidityOne(i))return t.PHandsType.PHT_FOUR_TWO;if(this._mCombSiDai.checkValidityTwo(i))return t.PHandsType.PHT_FOUR_TWO_TWO}else if(1==o&&this._mCombZhaDan.checkValidityZD(i))return t.PHandsType.PHT_BOMB;if(this._mCombFeiJi.checkValidityOne(i,4))return t.PHandsType.PHT_PLANE_WING}return t.PHandsType.PHT_ERROR},e.prototype.matchType=function(e,o){var n;switch(e){case t.PHandsType.PHT_SINGLE:this._mCombComm.match(this.match(i.One),this.match(i.One,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_PAIR:this._mCombComm.match(this.match(i.Two),this.match(i.Two,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_THREE:this._mCombComm.match(this.match(i.Three),this.match(i.Three,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_SHUNZI:this._mCombShunZi.match(this.match(i.One,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PAIR_SHUNZI:this._mCombShunZi.match(this.match(i.Two,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PLANE:this._mCombShunZi.match(this.match(i.Three,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_THREE_ONE:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.One)),this._mCombSanDai.matchMore([],this.match(i.One,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_THREE_TWO:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.Two)),this._mCombSanDai.matchMore([],this.match(i.Two,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_FOUR_TWO:n=this.match(i.One),this._mCombSiDai.match(this.match(i.Four),n),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_FOUR_TWO_TWO:n=this.match(i.Two),this._mCombSiDai.match(this.match(i.Four),n),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_BOMB:case t.PHandsType.PHT_ROCKET:this._mCombZhaDan.match(this.match(i.Four),this.match(i.One)),this._mCombZhaDan.matchList(o),this._mCurrComb=this._mCombZhaDan;break;case t.PHandsType.PHT_PLANE_WING:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.One)),this._mCombFeiJi.matchMore([],this.match(i.One,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi;break;case t.PHandsType.PHT_PLANE_WING_TWO:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.Two)),this._mCombFeiJi.matchMore([],this.match(i.Two,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi}},e.prototype.map=function(t){return e.map(t)},e.map=function(t){var e=t;if(!(e.length<=0)){for(var i=[],o=-1,n=0,s=e.length;s>n;n++){var r=e[n],a=r.val;o==a?i[i.length-1].push(r):(o=a,i.push([r]))}return egret.log("map:",i),i}},e.prototype.match=function(t,e){void 0===e&&(e=!1);var i=this._mMapPoker,o=[];for(var n in i){var s=i[n],r=s.length,a=e?r>=t:t==r;if(a){var h=s.slice(0,t);o.push(h)}}return o},e.prototype.reset=function(){this._mMapPoker.splice(0),this._mCurrComb=void 0},e.prototype.destroy=function(){this._mMapPoker=void 0,this._mCurrComb=void 0},e}();t.PokerUtil=e,__reflect(e.prototype,"ddz.PokerUtil");var i;!function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four"}(i||(i={}))}(ddz||(ddz={}));var ControllerConst;!function(t){t[t.Loading=999900]="Loading",t[t.Login=999901]="Login",t[t.Lobby=999902]="Lobby",t[t.Game=999903]="Game",t[t.Room=999904]="Room",t[t.Desk=999905]="Desk"}(ControllerConst||(ControllerConst={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){var e=t,i=e[0].length;return e.length>1?!1:1==i},e.prototype.checkValidityTwo=function(t){var e=t,i=e[0].length;return e.length>1?!1:2==i},e.prototype.checkValidityThree=function(t){var e=t,i=e[0].length;return e.length>1?!1:3==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);
for(var o=this._mMapMinor;o.length;)e.push(o.pop());return this._mMapMinor=void 0,e},e}(t.CombBase);t.CombComm=e,__reflect(e.prototype,"ddz.CombComm")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t,e){var i=t;if(4==e||3==i.length){i=[].concat(t);for(var o=i.length,n=o-1;n>=0;n--){var s=i[n];(4==s.length||2==s.length)&&i.push([s.pop()])}}return this.checkValidityX(i,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i.length;if(4>o||o%2!=0)return!1;for(var n=0,s=0,r=0;o>r;r++){var a=i[r].length;3==a&&n++,a==e&&s++}return n==s},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(this.matchListX(t))),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.matchListX=function(t){for(var e=[].concat(t),i=e.length,o=i-1;o>=0;o--){var n=e[o];4==n.length?n.pop():3>n.length&&e.splice(o,1)}return e},e}(t.CombBase);t.CombFeiJi=e,__reflect(e.prototype,"ddz.CombFeiJi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,n=i[1].length;return i.length>2?!1:3==o&&n==e||3==n&&o==e?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSanDai=e,__reflect(e.prototype,"ddz.CombSanDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.checkValidity=function(t){return!1},i.prototype.checkValidityOne=function(t){var e=t,i=e.length;if(5>i)return!1;for(var o=i-1;o>=5;o--)for(var n=void 0,s=void 0,r=o;r>0;r--)if(n=e[r][0].val,s=e[r-1][0].val,s!=n+1)return!1;return!0},i.prototype.checkValidityTwo=function(t){var e=t,i=e.length;if(3>i)return!1;for(var o=i-1;o>=0;o--)if(2!=e[o].length)return!1;for(var n=i-1;n>=3;n--)for(var s=void 0,r=void 0,o=i-1;o>0;o--)if(s=e[o][0],r=e[o-1][0],r.val!=s.val+1)return!1;return!0},i.prototype.checkValidityThree=function(t){var e=t,i=e.length;if(2>i)return!1;for(var o=i-1;o>=0;o--)if(3!=e[o].length)return!1;for(var n=i-1;n>=2;n--)for(var s=void 0,r=void 0,o=n;o>0;o--)if(s=e[o][0],r=e[o-1][0],r.val!=s.val+1)return!1;return!0},i.prototype.match=function(i,o){this.clean(),e.prototype.match.call(this,i,o);for(var n=this._mMapMain,s=n.length-1;s>=0;s--){var r=n[s][0];r.val>=t.PokerValue.POKER_VALUE_TWO&&n.splice(s,1)}return!0},i.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(t))},i}(t.CombBase);t.CombShunZi=e,__reflect(e.prototype,"ddz.CombShunZi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return 2==t.length?this.checkValidityXX(t,1):this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return 2==t.length?this.checkValidityXX(t,2):this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,n=i[1].length,s=i[2].length;return i.length>3?!1:4==o&&n==e&&s==e||4==n&&o==e&&s==e||4==s&&o==e&&n==e?!0:!1},e.prototype.checkValidityXX=function(t,e){var i=t,o=i[0].length,n=i[1].length;return i.length>2?!1:4==o&&n==2*e||o==2*e&&4==n?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),this.removeKing(i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSiDai=e,__reflect(e.prototype,"ddz.CombSiDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityZD=function(t){var e=t,i=e[0].length;return e.length>1?!1:4==i},e.prototype.checkValidityHJ=function(t){var e=t,i=e[0][0].val+e[1][0].val;return 29==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);var o=this._mMapMinor;if(o&&o.length>1){var n=o[0][0],s=o[1][0];n.val+s.val==29&&e.push([n,s])}return e},e}(t.CombBase);t.CombZhaDan=e,__reflect(e.prototype,"ddz.CombZhaDan")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"ddz","DDZGameSkin")||this;return i.isMultipleOpen=!1,i.MenuView.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){this.ImageCenter.visible=!1,this.Mask.visible=!1,this.hideBaseScore(),this.hideTimes(),this.hideMultiple(),this.MenuView.init(),this.PlayerMessage.init(),this.CardView.init(),this.TypeBox.init(),this.hideBtnCardPlayer(),this.initBroadcast(this)},i.prototype.showBaseScore=function(t){this.BaseScore.text=String(t),this.BaseScoreBox.visible=!0},i.prototype.hideBaseScore=function(){this.BaseScoreBox.visible=!1},i.prototype.setTimes=function(t){this.Times.text="X "+t,this.TimesBox.visible=!0},i.prototype.hideTimes=function(){this.TimesBox.visible=!1},i.prototype.hideMultiple=function(){this.MultipleDetails.y=-this.MultipleDetails.height},i.prototype.setMultipleDetails=function(t){var e=t.self_mul,i=t.public_mul,o=t.enemy_mul?t.enemy_mul:1,n=e*i*o;this.setTimes(n),this.MulOpenStart.text=t.seenseencard_mul?"X "+t.seenseencard_mul:"- -",this.MulRob.text=t.roblandlord_mul?"X "+t.roblandlord_mul:"- -",this.MulDouble.text=t.double_mul?"X "+t.double_mul:"- -",this.MulSpring.text=t.spring_mul?"X "+t.spring_mul:"- -",this.MulConSpring.text=t.contrary_spring_mul?"X "+t.contrary_spring_mul:"- -",this.MulBomb.text=t.bomb_mul?"X "+t.bomb_mul:"- -",this.MulAll.text=e+" X "+i+" X "+o+" = "+n},i.prototype.setUserName=function(t,e){this.PlayerMessage.setUserName(t,e)},i.prototype.getUserName=function(t){return this.PlayerMessage.getUserName(t)},i.prototype.setUserMoney=function(t,e){this.PlayerMessage.setUserMoney(t,e)},i.prototype.setUserHead=function(t,e){this.PlayerMessage.setUserHead(t,e)},i.prototype.setUserFrame=function(t,e){this.PlayerMessage.setUserFrame(t,e)},i.prototype.showUser=function(t){this.PlayerMessage.showUser(t)},i.prototype.hideUser=function(t){this.PlayerMessage.hideUser(t)},i.prototype.waitGame=function(){this.hideBaseScore(),this.MenuView.showStartBtn(),this.CardView.hideBottomBg(),this.MenuView.filishMatch(),this.MenuView.hideDeposit(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideTimes(),this.TypeBox.hideTips(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.hideTypeAll(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.ImageCenter.visible=!0,this.Mask.visible=!0},i.prototype.startGameReq=function(){this.MenuView.hideStartBtn(),this.ImageCenter.visible=!1,this.Mask.visible=!1},i.prototype.onReady=function(){ObjectPool.clearClass("ddz.Poker","destroy"),this.CardView.hideCardPlayer(),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),t.PokerTextures.cleanAll(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.MenuView.hideDeposit(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF)},i.prototype.onMatch=function(){ObjectPool.clearClass("ddz.Poker","destroy"),t.PokerTextures.cleanAll(),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.MenuView.hideDeposit(),this.MenuView.onMatch(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.hideTypeAll()},i.prototype.filishMatch=function(){this.MenuView.filishMatch()},i.prototype.startDeal=function(){this.showBottomBg(),this.hideTypeAll(),this.playBoneAni(t.BonesConst.START)},i.prototype.showBottomBg=function(){this.CardView.showBottomBg()},i.prototype.setCardPlayer=function(t,e){this.CardView.setCardPlayer(t,e)},i.prototype.showCardPlayer=function(){this.CardView.showCardPlayer()},i.prototype.hideBtnCardPlayer=function(){this.CardView.hideBtnCardPlayer()},i.prototype.showBtnCardPlayer=function(){this.CardView.showBtnCardPlayer()},i.prototype.deposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.deposit(),this.MenuView.showCancerDepsit(e),this.CardView.showDepositMask(e)):this.TypeBox.showTab(e)},i.prototype.canserDeposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.cancerDeposit(),this.MenuView.hideCancerDepsit(e),this.CardView.hideDepositMask(e)):this.TypeBox.hideTab(e)},i.prototype.dealCard=function(t){this.CardView.dealCard(t)},i.prototype.clearCard=function(t){this.CardView.clearCard(t)},i.prototype.clearBottomCard=function(){this.CardView.clearBottomCard()},i.prototype.dealOthersOpenCard=function(t,e,i){this.CardView.showOthersOpenCards(t),this.CardView.dealOpenCard(t,e,i)},i.prototype.dealCardOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.dealCardOthers(t,e)},i.prototype.showCardNumberOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.showOthersCardsNumber(t,e)},i.prototype.setCardNumber=function(t,e){this.CardView.setCardNumber(t,e)},i.prototype.showRobBox=function(){this.MenuView.showRobBox()},i.prototype.hideRobBox=function(){this.MenuView.hideRobBox()},i.prototype.startTimer=function(t,e,i,o){this.MenuView.startTimer(t,e,i,o)},i.prototype.stopTimer=function(t){this.MenuView.stopTimer(t)},i.prototype.showDoubleBox=function(){this.MenuView.showDoubleBox()},i.prototype.hideDoubleBox=function(){this.MenuView.hideDoubleBox()},i.prototype.showDeposit=function(){this.MenuView.showDeposit()},i.prototype.hideDeposit=function(){this.MenuView.hideDeposit()},i.prototype.hideOperBtn=function(){this.MenuView.hideOperBtn()},i.prototype.showAlarm=function(t){this.TypeBox.showAlarm(t)},i.prototype.hideAlarm=function(t){this.TypeBox.hideAlarm(t)},i.prototype.showType=function(t,e){this.TypeBox.showType(t,e)},i.prototype.hideType=function(t){this.TypeBox.hideType(t)},i.prototype.hideTypeAll=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT)},i.prototype.showBoss=function(t){this.TypeBox.showBoss(t)},i.prototype.hideBoss=function(t){this.TypeBox.hideBoss(t)},i.prototype.showCard=function(t){this.CardView.showCard(t),this.CardView.setCardDown()},i.prototype.showBottomCard=function(t){this.CardView.showBottomCard(t)},i.prototype.openBottomCard=function(t){this.CardView.openBottomCard(t)},i.prototype.hoverCard=function(t){this.CardView.hoverCard(t)},i.prototype.showTipCards=function(t){this.CardView.showTipCards(t)},i.prototype.toggleCardType=function(t){this.CardView.toggleCardType(t)},i.prototype.getSelectedCard=function(){return this.CardView.getSelectedCard()},i.prototype.showPlayBox=function(t){this.MenuView.setVisiblePlayBox(t)},i.prototype.hideBtnPlayBox=function(){this.MenuView.setHidePlayBox()},i.prototype.playCard=function(){this.CardView.playCard()},i.prototype.playCardNotify=function(e,i){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.playCardRight(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.playCardLeft(i);break;case t.DDZPosition.POSITION_SELF:this.CardView.playCardSelf(i)}},i.prototype.showTableCard=function(e,i){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.showRightCard(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.showLeftCard(i);break;case t.DDZPosition.POSITION_SELF:this.CardView.showSelfCard(i)}},i.prototype.openCard=function(t,e){this.CardView.openCard(t,e)},i.prototype.showTips=function(t){this.TypeBox.showTips(t)},i.prototype.getOutCard=function(t){return this.CardView.getOutCard(t)},i.prototype.cleanTableCard=function(t){this.CardView.cleanTableCard(t)},i.prototype.playBoneAni=function(t){this.DDZBones.playAni(t)},i.prototype.toggleMultipleDetails=function(){this.isMultipleOpen=this.isMultipleOpen?!1:!0,this.isMultipleOpen?egret.Tween.get(this.MultipleDetails).to({y:0},100):egret.Tween.get(this.MultipleDetails).to({y:-this.MultipleDetails.height},100),R.sendPlayerAction(t.PointConst.DDZ_POINT.PANEL_NULTIPLE)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.TimesBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.TimesBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("斗地主 GameView destroy"),this.MenuView.destroy(),this.CardView.destroy(),this.DDZBones.destroy())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"ddz.GameView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"ddz","DDZPopSkin")||this;return i.BalanceView.initComponent(e),i.ClosePoput.initComponent(e),i.init(),i}return __extends(e,t),e.prototype.init=function(){this.GameSet.initSet(),this.Help.initUI()},e.prototype.openHelp=function(){this.Help.showPopup()},e.prototype.openSet=function(){this.GameSet.openPopup()},e.prototype.exchangePoput=function(){this.BalanceView.exchangePoput()},e.prototype.closeExcangePoput=function(){this.BalanceView.closeExcangePoput()},e.prototype.openRecord=function(){this.Record.showPopup()},e.prototype.renderRecord=function(t){this.Record.rankData(t)},e.prototype.openExitPoput=function(){this.ClosePoput.openPopup()},e.prototype.farmerWin=function(){this.BalanceView.farmerWin()},e.prototype.hideWinner=function(){this.BalanceView.hideWinner()},e.prototype.setSelfName=function(t){this.BalanceView.setSelfName(t)},e.prototype.setSelfHead=function(t){this.BalanceView.setSelfHead(t)},e.prototype.setSelfFrame=function(t){this.BalanceView.setSelfFrame(t)},e.prototype.setPlayerName=function(t,e){this.BalanceView.setPlayerName(t,e)},e.prototype.setPlayerBaseScore=function(t,e){this.BalanceView.setPlayerBaseScore(t,e)},e.prototype.setPlayerTimes=function(t,e){this.BalanceView.setPlayerTimes(t,e)},e.prototype.setPlayerMoney=function(t,e){this.BalanceView.setPlayerMoney(t,e)},e.prototype.setPlayerIsBoss=function(t,e){this.BalanceView.setPlayerIsBoss(t,e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.Help.destroy(),this.GameSet.destroy(),this.Record.destroy(),this.BalanceView.destroy(),this.ClosePoput.destroy()},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"ddz.PopView")}(ddz||(ddz={}));var fishjoy;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&GameBase.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){GameBase.setScaleModeNormal()},e}();e.fishjoy=i,__reflect(i.prototype,"fishjoy.Entrance.fishjoy",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(fishjoy||(fishjoy={}));var GameConsEvent=function(){function t(){}return t.Game_Frame_Pause="Game_Frame_Pause_Event",t.Game_Frame_Resume="Game_Frame_Resume_Event",t.Game_Player_LoginWeb_Success="Game_Player_LoginWeb_Success_Event",t.Game_Player_LoginLobby_Success="Game_Player_LoginLobby_Success_Event",t.Game_Maintain_Const="Game_Maintain_Const_Event",t.Game_Broadcast_Notification="Game_Broadcast_Notification_Event",t.Game_UserMoneyChange="UserMoneyChange",t}();__reflect(GameConsEvent.prototype,"GameConsEvent");var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._mIcon=null,o._mHitRect=null,o._mHitPoint=null,o._mNetId=0,o._mIsMaster=!1,o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.Bullet",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mIcon=new eui.Image,this._mHitRect=new egret.Shape,this._mHitPoint=new egret.Point,this.mSpeed=10,this._mHitRect.graphics.beginFill(65280,.6),this._mHitRect.graphics.drawRect(0,0,5,5),this._mHitRect.graphics.endFill(),this._mHitRect.cacheAsBitmap=!0,this._mHitRect.anchorOffsetX=this._mHitRect.width/2,this._mHitRect.anchorOffsetY=this._mHitRect.height/2},i.prototype.refresh=function(i){e.prototype.refresh.call(this,i),this._mRender.parent||(this._mParent.addChild(this._mRender),this._mRender.addChild(this._mIcon),this._mRender.addChild(this._mHitRect)),this._mHitRect.visible=t.FishConst.mIsShowFishHit;var o=t.FishUtil.getCannonConfigById(this.mId);this.mSpeed=o.bullet_speed,this._mIcon.texture=RES.getRes("fishjoy_cannon_json."+o.bullet_assets),this._mIcon.anchorOffsetX=this._mIcon.width/2,this._mIcon.anchorOffsetY=this._mIcon.height/2},i.prototype.updateNetId=function(t){this._mNetId=t},i.prototype.setMaster=function(t){this._mIsMaster=t},i.prototype.update=function(t){e.prototype.update.call(this,t);var i=this.it();if(!(this.isDead()||0>=i)){if(i>30)return void this.updateAddByTime(i);var o=this.mSpeed*i/16;if(this.x<0||this.x>GameBase.GameWidth?(this.x<=0&&(this.x=0),this.x>=GameBase.GameWidth&&(this.x=GameBase.GameWidth),this.mSpeedX=-this.mSpeedX,this.rebound(o)):(this.y<0||this.y>GameBase.GameHeight)&&(this.y<=0&&(this.y=0),this.y>=GameBase.GameHeight&&(this.y=GameBase.GameHeight),this.mSpeedY=-this.mSpeedY,this.rebound(o)),this.getLockFishSId()>0){var n=this._mFish,s=n.getX(),r=n.getY();n.isOut()||!n.isLive?this.setFish(null):this.setRotation(App.MathUtils.getAngle2(this.x,this.y,s,r))}var a=this.x+o*Math.cos(this.mRadian)*this.mSpeedX,h=this.y+o*Math.sin(this.mRadian)*this.mSpeedY;this.setPos(a,h)}},i.prototype.rebound=function(t){var e=this.x+Math.cos(this.mRadian)*this.mSpeedX,i=this.y+Math.sin(this.mRadian)*this.mSpeedY;this.mRotation=App.MathUtils.getAngle2(this.x,this.y,e,i),this.updateDisplayAngel()},i.prototype.setRotation=function(t){this.mRotation=t,this.mRadian=App.MathUtils.getRadian(t),this.updateDisplayAngel()},i.prototype.updateDisplayAngel=function(){this._mRender.rotation=this.mRotation+90},i.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e,this._mHitPoint.x=t,this._mHitPoint.y=e},i.prototype.getHitBound=function(){return this._mHitPoint},i.prototype.getNetId=function(){return this._mNetId},i.prototype.getLockFishSId=function(){return this._mFish?this._mFish.getServerId():0},i.prototype.setFish=function(t){this._mFish=t,this.mSpeedX=1,this.mSpeedY=1},Object.defineProperty(i.prototype,"mIsMaster",{get:function(){return this._mIsMaster},enumerable:!0,configurable:!0}),i.prototype.clean=function(){e.prototype.clean.call(this),this._mIcon&&(this._mIcon.texture=void 0,this._mIcon.$bitmapData=void 0),this._mNetId=0,this._mFish=void 0,this._mIsMaster=!1},i.prototype.destroy=function(){this._mIsDestroy||(this.clean(),e.prototype.destroy.call(this),this._mIcon=void 0)},i}(t.FishJoyBase);t.Bullet=e,__reflect(e.prototype,"fishjoy.Bullet")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this,null)||this;return t._mCurrId=0,t}return __extends(i,e),i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.updateId=function(e){if(this._mCurrId!=e){this._mCurrId=e;var o=t.FishUtil.getCannonConfigById(e),n=o.gun_assets;this.initDBRes(n),this.armature=this.createArmature("Armature",n,i._mActionList)}},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},i.prototype.play=function(){this.armature.play(i.Animation,1)},i.prototype.clean=function(){e.prototype.clean.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mCurrId=0,this.armature=void 0},i.Animation="fire",i._mActionList=[i.Animation],i}(base.BaseGameObject);t.CannonBones=e,__reflect(e.prototype,"fishjoy.CannonBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.__PoolId=0,o.speedCoefficient=1e4,o._mFishBones=null,o._mCurrPointIndex=0,o._mPath={},o._mBitHit=0,o._mIsRunAways=!1,o._mIsTideFish=!1,o._mRenderNum=0,o._mCurrAngel=0,o._mNextAngel=0,o._mDealAngel=0,o._mHitFilter=[ColorFilters.FilterGray],o._mBounds=new egret.Rectangle,o.init(),o.__PoolId=t,o}return __extends(i,e),i.create=function(t,e){var o,n=i.__mFishPool["FishPool_"+t];return n&&(o=n.shift()),o||(o=new i(t,e)),o.setParent(e),o},i.release=function(t){var e=i.__mFishPool["FishPool_"+t.__PoolId];e||(e=[]),t.clean(),e.push(t),i.__mFishPool["FishPool_"+t.__PoolId]=e},i.clearPool=function(){var t=i.__mFishPool;for(var e in t){for(var o=t[e];o.length;){var n=o.pop();n.destroy()}delete t[e]}},i.prototype.init=function(){e.prototype.init.call(this),this._mHitPointList=[],this._mFishBones=new t.FishBones,this._mTxtId=new egret.TextField,this._mTxtId.size=16,this._mTxtId.width=200,this._mTxtId.anchorOffsetX=100,this._mTxtId.textAlign=egret.HorizontalAlign.CENTER,this._mIconArm=new eui.Image},i.prototype.initRenders=function(){this._mRender.visible=!0,this._mRender.parent&&R.removeFromParent(this._mRender),this._mParent.addChild(this._mRender),this._mRender.addChild(this._mFishBones),this._mRender.addChild(this._mTxtId),this._mFishBones.updateId("fish_"+this.mId),this.refreshHitPoints(),this._mTxtId.text=""+this.getServerId(),this._mTxtId.visible=t.FishConst.mIsShowFishHit},i.prototype.refreshHitPoints=function(){var e=t.FishUtil.getFishHitRect(this.mId);if(!e)return void egret.error("没有碰撞配置 type:",this.mId);for(var i=this._mHitPointList,o=0,n=e.length-1;n>=o;o++){var s=e[o],r=s.radius,a=i[o];a||(a=new egret.Shape,i.push(a)),a.cacheAsBitmap=!1,a.graphics.clear(),a.graphics.beginFill(16711680,.3),a.graphics.drawCircle(0,0,r),a.graphics.endFill(),a.x=s.dot.x,a.y=s.dot.y,a.m_r=r,this._mBitHit<s.dot.x+r&&(this._mBitHit=s.dot.x+r),this._mBitHit<s.dot.y+r&&(this._mBitHit=s.dot.y+r),a.visible=t.FishConst.mIsShowFishHit,this._mRender.addChild(a),a.cacheAsBitmap=!0}},i.prototype.refreshHitRect=function(){for(var e=this._mHitPointList,i=e.length-1;i>=0;i--){var o=e[i];o.visible=t.FishConst.mIsShowFishHit}this._mTxtId.visible=t.FishConst.mIsShowFishHit},i.prototype.refreshFish=function(i,o,n,s){e.prototype.refresh.call(this,i),this._mPath=o,this._mIsTideFish=null==o,this._mIsTideFish||(this.speedCoefficient=t.FishUtil.getFishSpeedCoef(this.mId)),this.initRenders(),this.updatePos(0,n,s,-1),this.play(),this.__PoolId=i},i.prototype.play=function(){this._mFishBones.play()},i.prototype.playDead=function(t){this.tideDied(t),this.setOver(),this.clearArmIcon(),this._mFishBones.dead(),this._mFishBones.initPlayedEndCallBack(this.playEnd,this)},i.prototype.tideDied=function(t){this._mIsTideFish&&t&&(this.removeRender(),this._mParent=t,this._mParent.addChild(this._mRender),this.setPos(this.getX(),this.getY()),this._mIsTideFish=!1)},i.prototype.playEnd=function(){this.setDead()},i.prototype.updatePos=function(t,e,o,n){if(!this._mIsTideFish&&t>=0){this._mCurrPointIndex=t;var s=this.getPoint(this._mCurrPointIndex);this.mSpeed=-1==n?s.s/i.D_Speed:n,this.mSpeed=this.mSpeed*(this.speedCoefficient/1e4),this.mAddSpeed=s.a/i.D_Speed,this.setPos(e?e:s.x,o?o:s.y)}},i.prototype.update=function(t){e.prototype.update.call(this,t);var o=this.it();if(this._mRenderNum++,!(this.isDead()||this.isOver()||0>=o||(this.check(),this._mIsTideFish))){if(o>30)return void this.updateAddByTime(o);if(!this._mIsRunAways&&(this.mRadian=this.checkIsArrive()?this.nextRadian():this.mRadian,this.mRotation+=this._mDealAngel,this.setRotation(),this.mRadian==i.Err_Value))return void this.setDead();this.mSpeed+=this.mAddSpeed;var n=this.mSpeed*o/16,s=this.getX()+n*Math.cos(this.mRadian),r=this.getY()+n*Math.sin(this.mRadian);this.setPos(s,r)}},i.prototype.runAway=function(){this._mIsRunAways=!0,this.mAddSpeed=.5,this._mFishBones.play(5),this.isOut()&&this.setDead()},i.prototype.check=function(){if(this._mRenderNum%5==0){var t=this.getX(),e=this.getY(),i=this.getBounds().width/2,o=this.getBounds().height/2,n=-i>t||t>GameBase.GameWidth+i||-o>e||e>GameBase.GameHeight+o;if(this._mIsTideFish){var s=this._mRender.scaleX;(1==s&&t>GameBase.GameWidth+i||-1==s&&-i>t)&&this.setDead()}else(-500>t||t>GameBase.GameWidth+500||-500>e||e>GameBase.GameHeight+500)&&this.setDead();this._mRender.visible=!n}},i.prototype.setRotation=function(){this._mRender.rotation=this.mRotation},i.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e},i.prototype.setDirection=function(t){this._mRender.scaleX=t},i.prototype.setTideGroup=function(t){this._mTideGroup=t},i.prototype.checkIsArrive=function(){var t=this.getPoint(this._mCurrPointIndex),e=App.MathUtils.getDistance(t.x,t.y,this.getX(),this.getY());return e<this.mSpeed*this.it()/16||1>e},i.prototype.nextRadian=function(){var t=this.getPoint(this._mCurrPointIndex++),e=this.getPoint(this._mCurrPointIndex),o=this.getPoint(this._mCurrPointIndex+1);if(!e)return i.Err_Value;var n=Math.atan2(e.y-t.y,e.x-t.x);if(this._mCurrAngel=App.MathUtils.getAngle360(n),this._mNextAngel=this._mCurrAngel,o){var s=Math.atan2(o.y-e.y,o.x-e.x);this._mNextAngel=App.MathUtils.getAngle360(s)}return this.mRotation=this._mCurrAngel,this.mSpeed=t.s/i.D_Speed,this.mSpeed=this.mSpeed*(this.speedCoefficient/1e4),this.mAddSpeed=t.a/i.D_Speed,this.setPos(t.x,t.y),this._mDealAngel=this.getAngelRotation(n),this._mRender.scaleY=e.x-t.x<0?-1:1,n},i.prototype.getAngelRotation=function(t){var e=this._mNextAngel-this._mCurrAngel;return e>180?e-=360:-180>e&&(e+=360),e/this.getFrames(t)},i.prototype.getFrames=function(t){for(var e=1,i=this.mSpeed,o=this.getX(),n=this.getY(),s=this.mAddSpeed,r=this.getPoint(this._mCurrPointIndex),a=Math.cos(t),h=Math.sin(t);9999>e;e++){i+=s,o+=i*a,n+=i*h;var l=App.MathUtils.getDistance(r.x,r.y,o,n);if(i>l)break}return e},i.prototype.getPoint=function(t){return this._mPath["data_"+t]},i.prototype.hitAction=function(){this._mFishBones.filters=this._mHitFilter,R.setTimeOnce(function(){this._mFishBones.filters=void 0},this,100)},i.prototype.hitTest=function(t){var e=this.getX(),i=this.getY();if(!App.HitUtils.pointHitCircle(t.x,t.y,e,i,this._mBitHit))return!1;for(var o=this._mHitPointList,n=o.length-1;n>=0;n--){var s=o[n];if(s.parent&&App.HitUtils.pointHitCircle(t.x,t.y,e+s.x,i+s.y,s.m_r))return!0}return!1},i.prototype.getX=function(){return this._mIsTideFish?this.x+this._mTideGroup.x:this.x},i.prototype.getY=function(){return this._mIsTideFish?this.y+this._mTideGroup.y:this.y},i.prototype.isOut=function(){var t=this.getX(),e=this.getY();return 0>t||t>GameBase.GameWidth||0>e||e>GameBase.GameHeight},i.prototype.hitTouch=function(t,e){if(this.isDead()||this.isOver())return!1;var i=this.getX(),o=this.getY();if(this.isOut())return!1;for(var n=this._mHitPointList,s=n.length-1;s>=0;s--){var r=n[s];if(r.parent&&App.HitUtils.pointHitCircle(t,e,i+r.x,o+r.y,r.m_r))return!0}return!1},i.prototype.setLock=function(t){t?this._mIconArm.parent||(this._mRender.addChild(this._mIconArm),this._mIconArm.texture=RES.getRes("grabfish_ui_arm"),this._mIconArm.x=-this._mIconArm.width/2,this._mIconArm.y=-this._mIconArm.height/2):this.clearArmIcon()},i.prototype.clearArmIcon=function(){R.removeFromParent(this._mIconArm)},Object.defineProperty(i.prototype,"isLockedFish",{get:function(){var t=!1;return this._mIconArm&&this._mIconArm.parent&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mIsTideFish",{get:function(){return this._mIsTideFish},enumerable:!0,configurable:!0}),i.prototype.getBounds=function(){return this._mBounds.width<=0&&this._mFishBones.getBounds(this._mBounds),this._mBounds},i.prototype.clean=function(){e.prototype.clean.call(this),this._mFishBones.clean(),this.clearArmIcon(),this._mRenderNum=0,this._mBounds.width=0,this._mRender.visible=!1,this._mIsRunAways=!1,this._mIsTideFish=!1,this._mFishBones.filters=void 0,this._mIconArm.texture=void 0,this._mParent=void 0,this._mTideGroup=void 0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mIconArm=null,this._mHitPointList.length=0,this._mFishBones.destroy(),this._mIsRunAways=!1,this._mIsTideFish=!1,this._mPath=void 0,this._mParent=void 0,this._mFishBones=void 0,this._mRender=void 0,this._mHitPointList=void 0,this._mHitFilter=void 0,this._mTideGroup=void 0,this._mBounds=void 0},i.__mFishPool={},i.Err_Value=999999,i.D_Speed=1e4,i}(t.FishJoyBase);t.Fish=e,__reflect(e.prototype,"fishjoy.Fish")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsOver=!1,e}return __extends(e,t),e.create=function(){return ObjectPool.pop("fishjoy.FishBigEffBone")},e.release=function(t){t.clean(),ObjectPool.push(t)},Object.defineProperty(e.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.initRes(this.boneName),this._mIsOver=!1},e.prototype.initRes=function(t){var i=t;this.initDBRes(i),this.alpha=.6,this.armature=this.createArmature("ani",i,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)
},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.visible=!1,egret.Tween.get(this).wait(200).call(function(){this.visible=!0,this.armature.play(e.Animation,1)}.bind(this),this)},e.prototype.clean=function(){t.prototype.clean.call(this),egret.Tween.removeTweens(this)},e.prototype.armaturePlayEnd=function(t){this._mIsOver=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this),this.armature=void 0},e.Animation="play",e.big_boom="fish_big_boom",e.small_boom="fish_boom",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.FishBigEffBone=e,__reflect(e.prototype,"fishjoy.FishBigEffBone")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return t.call(this,null)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.alpha=1,this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){void 0===t&&(t=1),this.armature.play(e.Animation,999999,t)},e.prototype.dead=function(){this.armature.play(e.AnimationDead,2)},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&egret.Tween.get(this).to({alpha:0},500).call(function(){this._mCallBack&&this._mCallBack.call(this._mThisobj)}.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.FishBones=e,__reflect(e.prototype,"fishjoy.FishBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function e(){this._mIsMaster=!1,this._mPlayerUid=0,this._mPlayerServerIndex=0,this._mPlayerClientIndex=0,this._mCannonId=0,this.mMoney=0,this._mNickName="",this._mCurrBulletCost=0}return e.prototype.initRender=function(t){this._mRender=t,this.refreshMaster()},e.prototype.initPlayerInfo=function(e){this._mPlayerServerIndex=e.server_index,this._mPlayerClientIndex=e.client_index,this._mIsMaster=e.server_index==e.masterIndex,this._mCannonId=e.paoId,this._mNickName=e.nick_name,this.mMoney=e.money,this._mPlayerUid=e.uid,t.FishPlayerController.SeaMap[e.server_index]=e.client_index,this.updateCannonCfg()},e.prototype.getRender=function(){return this._mRender},e.prototype.playerExit=function(){this._mNickName="",this.mMoney=0,this._mPlayerUid=0,this._mCannonId=0,this._mPlayerServerIndex=0,this._mPlayerClientIndex=0,this.updateInfo()},Object.defineProperty(e.prototype,"mPlayerSeaNumber",{get:function(){return this._mPlayerServerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mPlayerClientIndex",{get:function(){return this._mPlayerClientIndex},enumerable:!0,configurable:!0}),e.prototype.refreshMaster=function(){this._mRender.checkMaster(this._mIsMaster),this.updateInfo()},e.prototype.stopHeatEffect=function(){this._mRender.stopHeatEffect()},e.prototype.showChatMessage=function(t){this._mRender.showBubble(t)},e.prototype.updateInfo=function(){this._mRender.updateCannon(this._mCannonId),this._mRender.updateMoney(this.mMoney),this._mRender.updateName(this._mNickName)},e.prototype.updateCannon=function(t){this._mCannonId=t,this._mRender.updateCannon(this._mCannonId),this.updateCannonCfg()},e.prototype.updateMoney=function(t){var e=this.mMoney;this.mMoney=t,this._mRender.updateMoney(this.mMoney),egret.log("更新余额：",this.mMoney,"，变更前：",e)},e.prototype.getCannonCfg=function(){return this._mCurrCannonCfg},e.prototype.updateCannonCfg=function(){if(!(this._mCannonId<=0)){var e=t.FishUtil.getCannonConfigById(this._mCannonId);this._mCurrCannonCfg=e,this._mCurrBulletCost=e.gun_cost}},e.prototype.cost=function(){var e=this.fireNeedMoney(),i=this.mMoney;this.mMoney-=e,egret.log("开炮成功，原始钱",i,"减后：",this.mMoney,"已减：",i-this.mMoney,"应减钱：",e+",基础消耗=",this._mCurrBulletCost,",本场倍率：",t.FishUtil.mFishBaseMultiple),this.updateMoney(this.mMoney)},e.prototype.fireNeedMoney=function(){var e=this._mCurrBulletCost;return e*t.FishUtil.mFishBaseMultiple},e.prototype.fire=function(){this.getRender().fire()},e.prototype.getCannonId=function(){return this._mCannonId},Object.defineProperty(e.prototype,"mIsMaster",{get:function(){return this._mIsMaster},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mNickName",{get:function(){return this._mNickName},enumerable:!0,configurable:!0}),e.prototype.getBulletCost=function(){return this._mCurrBulletCost},e.prototype.getBulletId=function(){return this._mCannonId},e.prototype.getNetId=function(){return this._mCannonId},e.prototype.destroy=function(){this._mRender=void 0,this._mCurrCannonCfg=void 0},e}();t.FishPlayer=e,__reflect(e.prototype,"fishjoy.FishPlayer")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mCurrCannonId=0,t.isShowHeart=!1,t.cali_r=86,t.level=-1,t._mCurrMaxPaoLv=1,t.isChangeByMove=!1,t.cali_step=22.5,t}return __extends(i,e),i.prototype.initComponent=function(t){e.prototype.initComponent.call(this,t),this.labelLevel.font="fishjoy_font_2_fnt",this.labelLevel.width=200,this.labelLevel.height=80,this.labelLevel.letterSpacing=-10,this.labelLevel.anchorOffsetX=100,this.labelLevel.anchorOffsetY=40,this.labelLevel.textAlign=egret.HorizontalAlign.CENTER,this.labelLevel.scaleX=this.labelLevel.scaleY=.3,this.initial(),this.initCannon()},i.prototype.initCannon=function(){this.mSptPaotai1.visible=!1,this._mCannonBone=new t.CannonBones,this.mSptPaotai.addChild(this._mCannonBone),this.updateCannon(0)},i.prototype.checkMaster=function(t){this.btnCannonAdd&&(this.btnCannonAdd.visible=t,this.btnCannonSub.visible=t,t&&(this.mSptPaotai.touchEnabled=!1,this.mSptPaotai.touchChildren=!1,this.mSptPaotai1.touchEnabled=!1,this.u_noneTips.touchEnabled=!1,this.labelLevel.touchEnabled=!1,this.u_gCalibration.touchChildren=!0,this.u_gCalibration.touchEnabled=!0,this.btnShowCali&&!this.btnShowCali.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.btnShowCali.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showCap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopHeatEffect,this),this.showSeatBubble())),this.touchEnabled=!1,this.touchChildren=t},i.prototype.updateCannon=function(t){var e=t>0;this.checkNone(e),e&&(this._mCurrCannonId=t,this.updateCannonTxt(t),this._mCannonBone.updateId(t),this.isChangeByMove||this.changeCaliAngle(t),this.fire(),this.setChangeLimit(t))},i.prototype.updateCannonTxt=function(e){var i=t.FishUtil.getCannonConfigById(e);this.labelLevel.text=""+i.gun_cost*t.FishUtil.mFishBaseMultiple/1e4},i.prototype.checkNone=function(t){this.u_info.visible=t,this.u_render.visible=t,this.u_noneTips.visible=!t},i.prototype.updateName=function(t){this.nickName.text=t},i.prototype.initial=function(){this.nickName.text="",this.labelLevel.verticalAlign=egret.VerticalAlign.MIDDLE,this.bubbleGroup.visible=!1,this.bubbleText.text=""},i.prototype.updateMoney=function(t){this.labelCredit.text=""+App.CommonUtils.money2Str(t)},i.prototype.showBubble=function(e){this.bubbleGroup.visible=!0;var i=t.TxtPack.getChatTxtByIndex(e);this.bubbleText.text=i,App.EffectUtils.showUI(this.bubbleGroup,200),R.setTimeOutOnly(this.onCleanBubble,this,2e3)},i.prototype.onCleanBubble=function(){this.bubbleGroup.visible=!1},i.prototype.showSeatBubble=function(){App.EffectUtils.stopHeartEffect(this.bubbleGroup),this.isShowHeart=!0,this.bubbleGroup.visible=!0;var e=t.TxtPack.getExplainTxt("90015");this.bubbleText.text=e,App.EffectUtils.showUI(this.bubbleGroup,200),R.setTimeOutOnly(this.heartEffect,this,250)},i.prototype.heartEffect=function(){App.EffectUtils.startHeartEffect(this.bubbleGroup,400)},i.prototype.stopHeatEffect=function(){this.isShowHeart&&(App.EffectUtils.stopHeartEffect(this.bubbleGroup),this.onCleanBubble())},i.prototype.setChangeLimit=function(e){if(this.btnCannonAdd){this.btnCannonSub.enabled=!0,this.btnCannonAdd.enabled=!0;var i=parseInt((""+e).substr(1)),o=1>=i&&!t.FishUtil.getCannonConfigById(e-1),n=i>1&&!t.FishUtil.getCannonConfigById(e+1);o?this.btnCannonSub.enabled=!1:n&&(this.btnCannonAdd.enabled=!1)}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnCannonAdd&&(this.btnCannonAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnCannonSub.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMin,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMax,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLvByCalib,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.changeLvOnMove,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.changeLvByCalib,this))},i.prototype.onTouchTap=function(e){var i=e.currentTarget==this.btnCannonAdd;(!i||this.btnCannonAdd.enabled)&&(i||this.btnCannonSub.enabled)&&this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:i,levels:-1})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnCannonAdd&&(this.btnCannonAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnCannonSub.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnShowCali.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showCap,this),this.btnMin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMin,this),this.btnMax.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMax,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLvByCalib,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.changeLvOnMove,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.changeLvByCalib,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopHeatEffect,this))},i.prototype.updateCalibration=function(t){if(this.u_gCalibration){var e=t,i=App.MathUtils.getRadian(e),o=Math.cos(i)*this.cali_r+this.lightBg.x,n=Math.sin(i)*this.cali_r+this.lightBg.y;this.u_Calib.x=o,this.u_Calib.y=n,this.u_Calib.rotation=e+90}},i.prototype.setBowAngle=function(t){this.mSptPaotai.rotation=t+90,this.labelLevel.rotation=this.mSptPaotai.rotation},i.prototype.fire=function(){this._mCannonBone.play()},i.prototype.update=function(){},i.prototype.showCap=function(t){void 0===t&&(t=null),this.stopHeatEffect(),this.u_gCalibration.visible?(this.u_gCalibration.alpha=0,egret.Tween.get(this.u_gCalibration).to({y:135},200).call(this.tweenComplete,this)):(this.u_gCalibration.alpha=1,this.initCapData(),egret.Tween.get(this.u_gCalibration).to({y:31},200).call(this.tweenComplete,this))},i.prototype.initCapData=function(){var t=this.getMax();this._mCurrMaxPaoLv=parseInt((""+t).substr(1)),this.cali_step=180/this._mCurrMaxPaoLv},i.prototype.getMax=function(){for(var e=this._mCurrCannonId;;){var i=t.FishUtil.getCannonConfigById(e);if(!i)break;e++}return e-1},i.prototype.tweenComplete=function(){this.u_gCalibration.visible=!this.u_gCalibration.visible},i.prototype.changeLvByCalib=function(e){this.changeLvOnMove(e),this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:this.level})},i.prototype.changeLvOnMove=function(t){this.isChangeByMove=!0;var e=App.MathUtils.getAngle2(this.lightBg.x,this.lightBg.y,t.localX,t.localY);-170>=e&&(e=-170),e>=-11&&(e=-11);var i=App.MathUtils.getRadian(e),o=Math.cos(i)*this.cali_r+this.lightBg.x,n=Math.sin(i)*this.cali_r+this.lightBg.y;this.u_Calib.x=o,this.u_Calib.y=n,this.u_Calib.rotation=e+90,this.level=1e3*Math.floor(this._mCurrCannonId/1e3)+this.getLevelByAngle(e),this.updateCannonTxt(this.level)},i.prototype.changeLevelMin=function(e){this.isChangeByMove=!1;var i=1e3*Math.floor(this._mCurrCannonId/1e3)+1;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i})},i.prototype.changeLevelMax=function(e){this.isChangeByMove=!1;var i=1e3*Math.floor(this._mCurrCannonId/1e3)+this._mCurrMaxPaoLv;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i})},i.prototype.changeCaliAngle=function(t){var e=parseInt((""+t).substr(1)),i=e*this.cali_step+180;i-=11,this.updateCalibration(i)},i.prototype.getLevelByAngle=function(t){var e=-1,i=Math.abs(t);return e=i/this.cali_step,e=this._mCurrMaxPaoLv-Math.floor(e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.btnCannonAdd.filters=void 0,this.btnCannonSub.filters=void 0},i}(BaseEuiComponent);t.FishPlayerRender=e,__reflect(e.prototype,"fishjoy.FishPlayerRender")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._currState="",e}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,3)},e.prototype.stop=function(){this.armature.stop()},e.Animation="move",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.GoldBones=e,__reflect(e.prototype,"fishjoy.GoldBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.GoldEff",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.getGold=function(){var e=i.GoldList.pop();return e||(e=new t.GoldBones),e},i.relGold=function(t){i.GoldList.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mGoldList=[],this._mGoldLabel=new eui.BitmapLabel},i.prototype.setMaster=function(t){this._mRender.filters=t?null:[ColorFilters.FilterGray]},i.prototype.createGoldList=function(t,e){for(var o,n=22*Math.min(e,5),s=e>5?30:0,r=0;e>r;r++){o=i.getGold(),o.updateId("gold_effect"),this._mGoldList.push(o),this._mRender.addChild(o),o.play(),o.m_i=r+1,o.visible=!1,o.x=this.getFixX(2*n)+45*Math.floor(r%5)-n,o.y=this.fixY+66*Math.floor(r/5)-s;var a=App.MathUtils.getDistance(this.x,this.y,t.x,t.y),h=egret.Tween.get(o);h.wait(i.GoldWaitTime+200+r*App.MathUtils.randomInt(15,30)).to({visible:!0}).to({scaleX:.8,scaleY:1.1,y:o.y-80},300,egret.Ease.sineOut).to({scaleX:1.1,scaleY:.8,y:o.y},180).to({scaleX:.8,scaleY:1.1,y:o.y-30},180).to({scaleX:1,scaleY:1,y:o.y},120).wait(100*Math.floor(r%5)).to({x:t.x,y:t.y},a/1.5).call(function(t){t.visible=!1}.bind(this,o))}App.TimerManager.doTimer(3e3,1,this.remove,this)},i.prototype.remove=function(){this.setDead()},i.prototype.createLabel=function(t,e){var o=this._mGoldLabel;e>0?(this._mGoldLabel.font="fishjoy_baoji_fnt",this._mGoldLabel.letterSpacing=-10,o.text=t/1e4+"X"+e):(this._mGoldLabel.font="fishjoy_font_2_fnt",this._mGoldLabel.letterSpacing=-10,o.text=""+t/1e4),o.x=this.getFixX(o.width),o.y=this.fixY,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.scaleX=o.scaleY=o.alpha=0,o.visible=!0,this._mRender.addChild(o),egret.Tween.get(o).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.backOut).wait(i.GoldWaitTime).call(function(t){t.visible=!1}.bind(this,o)),"+0"==o.text&&egret.error("金币=====+0",t)},i.prototype.initRenders=function(){this._mRender.parent||this._mParent.addChild(this._mRender)},i.prototype.refreshGold=function(t,i,o,n){void 0===n&&(n=0),e.prototype.refresh.call(this,0),this.initRenders(),this.createGoldList(t,o),this.createLabel(i,n)},i.prototype.setPos=function(t,e){this.x=t,this.y=e},i.prototype.getFixX=function(t){var e=t/2,i=this.x;return i+e>GameBase.GameWidth?i=GameBase.GameWidth-e:0>i-e&&(i=e),i},Object.defineProperty(i.prototype,"fixY",{get:function(){var t=this.y;return 120>t&&(t=120),t>500&&(t=500),t},enumerable:!0,configurable:!0}),i.prototype.clean=function(){e.prototype.clean.call(this);for(var t=this._mGoldList;t.length;){var o=t.pop();o.clean(),o.stop(),egret.Tween.removeTweens(o),i.relGold(o)}this._mRender.filters=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this);for(var t=i.GoldList;t.length;){var o=t.pop();egret.Tween.removeTweens(o),o.destroy()}this._mGoldLabel&&(this._mGoldLabel.parent&&this._mGoldLabel.parent.removeChild(this._mGoldLabel),this._mGoldLabel=void 0),this._mGoldList=void 0},i.GoldList=[],i.GoldWaitTime=800,i}(t.FishJoyBase);t.GoldEff=e,__reflect(e.prototype,"fishjoy.GoldEff")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.GoldSpecial",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mGoldBone=new t.GoldSpecialBone,this._mGoldLabel=new eui.BitmapLabel,this._mGoldLabel.font="fishjoy_font_2_fnt",this._mGoldLabel.letterSpacing=-10,this._mGoldLabel.width=200,this._mGoldLabel.height=50,this._mGoldLabel.textAlign=egret.HorizontalAlign.CENTER,this._mGoldLabel.anchorOffsetX=100,this._mGoldLabel.anchorOffsetY=25},i.prototype.updateBone=function(t){this._mRender.addChild(this._mGoldBone),this._mGoldBone.updateId(t),this._mGoldBone.addCallBack(this.callBack,this)},i.prototype.callBack=function(){this.setDead()},i.prototype.createLabel=function(t){var e=this._mGoldLabel;e.text=""+t/1e4,e.scaleX=e.scaleY=e.alpha=0,e.y=62,this._mRender.addChild(e)},i.prototype.initRenders=function(){this._mRender.parent||this._mParent.addChild(this._mRender)},i.prototype.refreshGold=function(t,i){e.prototype.refresh.call(this,0),this.initRenders(),egret.log("刷新大鱼特效动画资源"),this.updateBone(i),this.createLabel(t),R.setTimeOut(this.play,this,800)},i.prototype.play=function(){egret.log("大鱼特效动画播放"),this._mGoldBone.play(),egret.Tween.get(this._mGoldLabel).to({scaleX:.6,scaleY:.6,alpha:1},200,egret.Ease.backOut)},i.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e},i.prototype.clean=function(){e.prototype.clean.call(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this._mGoldLabel),this._mGoldBone.clean(),this._mRender.filters=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mGoldBone.destroy(),this._mGoldBone=void 0},i}(t.FishJoyBase);t.GoldSpecial=e,__reflect(e.prototype,"fishjoy.GoldSpecial")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.getAni="",e.stayAni="",e._mId=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.visible=!1,this._mId=t,e.__Name[""+this._mId]||(egret.error("没有这个鱼的动画 type：",this._mId),this._mId=5002),this.getAni=e.__Name[""+this._mId].get,this.stayAni=e.__Name[""+this._mId].stay,egret.log("大鱼特效getName:"+this.getAni+",stayAni:"+this.stayAni);var i="goldSpecial";this.initDBRes(i),this.armature=this.createArmature("badge-anim",i,e._mActionList),this.armature.addCompleteCallFunc(this.callBack,this)},e.prototype.callBack=function(t){egret.log("大鱼奖励转圈圈动画："+this.stayAni+",aniName:"+t.animationName),t.animationName==this.getAni?this.armature.play(this.stayAni,20):this._mCallBack&&this._mCallBack.call(this._mThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.visible=!0,this.armature.play(this.getAni,1)},e.prototype.addCallBack=function(t,e){this._mCallBack=t,this._mThisObj=e},e.prototype.stop=function(){this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this),this.stop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.resName="goldSpecial",e.boneName="badge-anim",e._mActionList=["badge dragon","badge girl","badge fish","badge dragon1","badge girl1","badge fish1"],e.__Name={5003:{get:"badge dragon",stay:"badge dragon1"},5002:{get:"badge girl",stay:"badge girl1"},5001:{get:"badge fish",stay:"badge fish1"}},e}(base.BaseGameObject);t.GoldSpecialBone=e,__reflect(e.prototype,"fishjoy.GoldSpecialBone")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._mNetBones=null,o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.Net",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mNetBones=new t.NetBones},i.prototype.initRenders=function(){this._mRender.parent||(this._mParent.addChild(this._mRender),this._mRender.addChild(this._mNetBones)),this._mNetBones.updateId(this.mId)},i.prototype.refreshNet=function(t){e.prototype.refresh.call(this,t),this.initRenders(),this.play()},i.prototype.play=function(){this._mNetBones.play(),this._mNetBones.initPlayedEndCallBack(this.playEnd,this)},i.prototype.playEnd=function(){this.setDead()},i.prototype.setPos=function(t,e){this._mRender.x=this.x=t,this._mRender.y=this.y=e},i.prototype.clean=function(){e.prototype.clean.call(this),this._mNetBones.clean()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mNetBones.destroy(),this._mNetBones=void 0},i}(t.FishJoyBase);t.Net=e,__reflect(e.prototype,"fishjoy.Net")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){return e.call(this,null)||this}return __extends(i,e),i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.updateId=function(e){var o=t.FishUtil.getCannonConfigById(e),n=o.bullet_net_assets;this.initDBRes(n),this.armature=this.createArmature("Armature",n,i._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},i.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},i.prototype.play=function(){this.armature.play(i.Animation,1)},i.prototype.armaturePlayEnd=function(t){t.animationName==i.Animation&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},i.Animation="open",i._mActionList=[i.Animation],i}(base.BaseGameObject);t.NetBones=e,__reflect(e.prototype,"fishjoy.NetBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=1;27>=e;e++){var i=10>e?"0"+e:""+e;t.push("shui00"+i+"_jpg")}this.initMc(t,10),this.blendMode=egret.BlendMode.ADD},e}(SpriteMovieClip);t.WaterMC=e,__reflect(e.prototype,"fishjoy.WaterMC")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.touchEnabled=!1,this.touchChildren=!1,this._mPartcile=new BaseParticleObj,this._mPartcile.init("fish_bulb"),this.addChild(this._mPartcile),this._mTideWave=new BaseParticleObj,this._mTideWave.init("transPartical"),this._mTideWave.y=70,this.addChild(this._mTideWave),this._mTideWave.visible=!1,this._mTxtTip=new eui.Image,this._mTxtTip.texture=RES.getRes("grabfish_ui_text01_png"),this._mTxtTip.anchorOffsetX=this._mTxtTip.width/2,this._mTxtTip.anchorOffsetY=this._mTxtTip.height,this._mTxtTip.x=GameBase.GameWidth/2,this._mTxtTip.y=GameBase.GameHeight-300,this.addChild(this._mTxtTip)},e.prototype.play=function(t){this._directionss=t,this.visible=!0,this.playTxtEff()},e.prototype.playTxtEff=function(){this._mTxtTip.visible=!0,this._mTxtTip.alpha=1,this._mTxtTip.scaleX=this._mTxtTip.scaleY=0,egret.Tween.removeTweens(this._mTxtTip),egret.Tween.get(this._mTxtTip).to({scaleX:1,scaleY:1},300,egret.Ease.backOut).wait(800).to({alpha:0},300).wait(500).call(function(){this._mTxtTip.visible=!1,this.playWave()}.bind(this),this)},e.prototype.playWave=function(){this.dispatchEvent(new egret.Event(e.WAVE_START)),this._mPartcile.play(),this._mPartcile.x=-120,this._mPartcile.y=-180,this.waveParti()},e.prototype.waveParti=function(){this._mTideWave.visible=!0;var t=this._directionss;this._mTideWave.x=t>0?-300:1520,this._mTideWave.scaleX=-t,this._mTideWave.play(),this._mTideWave&&egret.Tween.removeTweens(this._mTideWave),egret.Tween.get(this._mTideWave,{onChange:this.waveMove,onChangeObj:this}).to({x:t>0?1520:-300},2200).call(this.stopWave,this)},e.prototype.waveMove=function(){var t=this._mTideWave.x;this.dispatchEvent(new egret.Event(e.WAVE_MOVE,!1,!1,t))},e.prototype.stopWave=function(){this.dispatchEvent(new egret.Event(egret.Event.COMPLETE)),this._mTideWave.stop(),this._mTideWave.visible=!1,this.visible=!1},e.prototype.destroy=function(){egret.Tween.removeTweens(this._mTxtTip),R.removeFromParent(this),this.removeChildren(),this._mTideWave.destroy(),this._mPartcile.destroy(),this._mTxtTip.texture=void 0,this._mTxtTip=void 0,this._mPartcile=void 0,this._mTideWave=void 0},e.WAVE_MOVE="wave_move",e.WAVE_START="wave_start",e}(egret.DisplayObjectContainer);t.TideWave=e,__reflect(e.prototype,"fishjoy.TideWave")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.mIsShowFishHit=!1,t.CannonPosList=[[],[369,595],[751,595],[755,36],[348,36]],t.onPlayerEnterCallBack="11001",t.onPlayerLeaveCallBack="11002",t.onDistributeCallBack="11003",t.onPlayerFireCallBack="11004",t.onGameStatusCallBack="11005",t.onDeadFishsCallBack="11006",t.onTideComingPrepareCallBack="11007",t.onSwitchSceneCallBack="11008",t.onChangeGunCallBack="11009",t.onReConnetCallBack="11010",t.onBossComingCallBack="11011",t.onFishTimeSyscCallBack="11012",t.onFishUnlockCallBack="11013",t.onFishChatBack="11014",t.onOffsetFishNotify="11015",t.boLangChange="boLangChange",t.Player_Change_Cannon="Player_Change_Cannon",t.CLICKBACKROOM="ClickBackRoom",t.CLICKBACKLOBBY="ClickBackLobby",t.PLAYER_CHAT="playerChat",t}();t.FishConst=e,__reflect(e.prototype,"fishjoy.FishConst")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.ScFishPlayerEnterNotifyType=11201]="ScFishPlayerEnterNotifyType",t[t.ScFishPlayerLeaveNotifyType=11202]="ScFishPlayerLeaveNotifyType",t[t.CsFishPlayerReadyReqType=11203]="CsFishPlayerReadyReqType",t[t.ScFishDistributeNotifyType=11204]="ScFishDistributeNotifyType",t[t.CsFishPlayerFireReqType=11205]="CsFishPlayerFireReqType",t[t.ScFishFireNotifyType=11206]="ScFishFireNotifyType",t[t.ScFishGameStatusNotifyType=11207]="ScFishGameStatusNotifyType",t[t.CsFishCollidedNotifyType=11208]="CsFishCollidedNotifyType",t[t.ScFishDeadFishesNotifyType=11209]="ScFishDeadFishesNotifyType",t[t.ScFishSwitchSceneNotifyType=11210]="ScFishSwitchSceneNotifyType",t[t.CsFishChangeGunReqType=11211]="CsFishChangeGunReqType",t[t.ScFishChangeGunNotifyType=11212]="ScFishChangeGunNotifyType",t[t.ScFishBossComingNotifyType=11213]="ScFishBossComingNotifyType",t[t.CsFishChatReqType=11214]="CsFishChatReqType",t[t.ScFishChatNotifyType=11215]="ScFishChatNotifyType",t[t.ScFishOffsetGroupNotifyType=11216]="ScFishOffsetGroupNotifyType"}(e=t.ProxyConst||(t.ProxyConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Guide=1102]="Guide",t[t.Setting=1103]="Setting",t[t.ChangeCanon=1104]="ChangeCanon",t[t.help=1105]="help",t[t.recharg=1106]="recharg"}(e=t.ViewsConst||(t.ViewsConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mBulletList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mBulletList=[]},i.prototype.createBullet=function(e,i,o,n,s,r,a,h,l,p){if(!(GameBase.getCurrServerTime()-p>6e5)){var c=t.Bullet.create(i,n);c.setRotation(a),c.refresh(i),c.setServerId(e),c.setPos(s,r),c.updateNetId(o),c.setFish(h),c.setMaster(l),c.setTime(p),this._mBulletList.push(c)}},i.prototype.removeBullet=function(t){for(var e=this._mBulletList.length-1;e>=0;e--){var i=this._mBulletList[e];if(i.getServerId()==t)return void i.setDead()}},i.prototype.getBulletByIndex=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];if(o.getServerId()==t)return o}return null},i.prototype.cleanBulletFish=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];o.getLockFishSId()==t&&o.setFish(void 0)}},i.prototype.gotoHitFish=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];o.mIsMaster&&o.isLive&&o.setFish(t)}},i.prototype.update=function(e){for(var i=this._mBulletList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()?(this._mBulletList.splice(o,1),t.Bullet.release(n)):n.update(e)}},i.prototype.getList=function(){return this._mBulletList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mBulletList;e.length;){var i=e.pop();t.Bullet.release(i)}},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=this._mBulletList;t.length;){var i=t.pop();i.destroy()}this._mBulletList=void 0,ObjectPool.clearClass("fishjoy.Bullet","destroy")},i}(base.GameSeparateCtrl);t.BulletController=e,__reflect(e.prototype,"fishjoy.BulletController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mPathList={},i._mIsMirror=!1,i.__ct=0,i._mTideSpeed=0,i._mTideDirection=0,i._mTideDuration=0,i._mTideStartTime=0,i._mTideId=0,i._mTideInited=!1,i._mTideRunning=!1,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mFishList=[]},i.prototype.createFish=function(e,i,o,n,s,r,a){var h,l=t.Fish.create(i,n);if(!r){if(!(o>0))return void egret.error("路径配置 pathId：",o);h=a?this.getOffsetPath(o,a):this.getPath(o)}return l.setServerId(e),l.refreshFish(i,h),l.setTime(s),this._mFishList.push(l),l},i.prototype.getPath=function(t){var e=this._mPathList["fish_path"+t];if(e)return e;var i=RES.getRes("fish_path"+t+"_json");if(!i||!i.data||i.data.length<=0)return void egret.warn("没有这个路径配置：",t);var o=i.data;e={};for(var n=0,s=o.length;s>n;n++)e["data_"+n]=App.CommonUtils.copyDataHandler(o[n]);if(this._mIsMirror)for(var r in e)e[r].y=GameBase.GameHeight-e[r].y;return this._mPathList["fish_path"+t]=e,e},i.prototype.getOffsetPath=function(t,e){var i=this._mPathList["fish_path"+t],o=RES.getRes("fish_path"+t+"_json");if(!o||!o.data||o.data.length<=0)return void egret.warn("没有这个路径配置：",t);var n=o.data;i={};for(var s=0,r=n.length;r>s;s++)i["data_"+s]=App.CommonUtils.copyDataHandler(n[s]);for(var a in i)i[a].x=i[a].x+e.x,i[a].y=i[a].y+e.y;if(this._mIsMirror)for(var a in i)i[a].y=GameBase.GameHeight-i[a].y;return i},i.prototype.setMirror=function(t){this._mIsMirror=t},i.prototype.removeFish=function(t){var e=this.getFish(t);e&&e.setDead()},i.prototype.getFish=function(t){for(var e=this._mFishList,i=e.length-1;i>=0;i--){var o=e[i];if(o.getServerId()==t)return o}return null},i.prototype.getTouchFish=function(t,e){for(var i=this._mFishList,o=i.length-1;o>=0;o--){var n=i[o];if(n.hitTouch(t,e))return n}return null},i.prototype.getHightFish=function(){for(var t,e=this._mFishList,i=0,o=0,n=e.length-1;n>=o;o++){var s=e[o];!s.isOut()&&s.isLive&&s.mId>i&&(i=s.mId,t=s)}return t},i.prototype.clearArmIcon=function(){for(var t=this._mFishList,e=t.length,i=0;e>i;i++){var o=t[i];o.clearArmIcon()}},i.prototype.update=function(e){for(var i=this.dt(e),o=this._mFishList,n=o.length-1;n>=0;n--){var s=o[n];s.isDead()?(o.splice(n,1),t.Fish.release(s)):s.update(e)}this.updateTide(i)},i.prototype.dt=function(t){var e=this.__ct-t;return e=e>0?e:16,this.__ct=t,e},i.prototype.runAway=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--){var i=t[e];
i&&i.isLive&&i.runAway()}},i.prototype.refreshHitRect=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--)t[e].refreshHitRect()},i.prototype.clean=function(){for(var e=this._mFishList;e.length;){var i=e.pop();t.Fish.release(i)}},Object.defineProperty(i.prototype,"gameController",{get:function(){return this.getController()},enumerable:!0,configurable:!0}),i.prototype.getList=function(){return this._mFishList},i.prototype.destroy=function(){this.cleanTide(),e.prototype.destroy.call(this);for(var i=this._mFishList;i.length;)this._mFishList.pop().destroy();this._mFishList=void 0,this._mPathList=void 0,t.Fish.clearPool(),ObjectPool.clearClass("fishjoy.Fish","destroy")},i.prototype.tideInitData=function(t){var e=t;this._mTideSpeed=e.speed/1e4,this._mTideDuration=e.duration,this._mTideDirection=e.direction,this._mTideInitFishList=[].concat(e.list),this._mTideInitFishList.sort(function(t,e){return Math.abs(t.x)==Math.abs(e.x)?Math.abs(t.y)-Math.abs(e.y):Math.abs(e.x)-Math.abs(t.x)})},i.prototype.onTideInitFish=function(){var t=this._mTideInitFishList;if(t&&!(t.length<=0)){for(var e=this.gameController.gameView,i=e.mFishGroupTide,o=this._mTideDirection,n=i.x,s=egret.getTimer(),r=t.length-1;r>=0;r--){var a=t[r],h=n+a.x;if(1==o&&h>1380||-1==o&&-260>h||!this.isFishLiveTide(a.fish_id))t.splice(r,1);else if(h>=-260&&1380>=h){t.splice(r,1);var l=a.fish_type,p=this.createFish(a.fish_id,l,-1,e.getFishLay(l,!0),0,!0),c=this._mIsMirror?GameBase.GameHeight-a.y:a.y;if(p.setPos(a.x,c),p.setTideGroup(i),p.setDirection(o),egret.getTimer()-s>5)break}}t.length<=0&&egret.warn("----------------------- 鱼潮刷新完成完成！ -----------------------")}},i.prototype.isFishLiveTide=function(t){return!this._mTideFishs||this._mTideFishs&&1==this._mTideFishs[""+t]},i.prototype.tideGo=function(t,e,i){this.cleanTide(),this._mTideStartTime=t,this._mTideId=e,this.pTideFishs(i),this._mTideInited=!0,App.TimerManager.doFrame(1,999999,this.tideStart,this)},i.prototype.pTideFishs=function(t){if(t){this._mTideFishs={};for(var e=t.length-1;e>=0;e--){var i=t[e];this._mTideFishs[""+i.fish_id]=1}}},i.prototype.tideStart=function(){if(!(GameBase.getCurrServerTime()-this._mTideStartTime<0)){App.TimerManager.remove(this.tideStart,this);var t=RES.getRes("fish_tide"+this._mTideId+"_json");if(!t)return void egret.error("没有鱼潮配置：",this._mTideId);this.tideInitData(t);var e=this.gameController.gameView,i=e.mFishGroupTide;i.x=1==this._mTideDirection?0:1120,this.synchronize(),this.onTideInitFish(),this._mTideRunning=!0,App.TimerManager.doTimer(1e3,999,this.onTestHandle,this)}},i.prototype.onTestHandle=function(){var t=this.gameController.gameView,e=t.mFishGroupTide,i=GameBase.getCurrServerTime();egret.log("鱼潮剩余时间："+Math.floor(this._mTideDuration-(i-this._mTideStartTime)/1e3),"fishGroupX:",Math.floor(e.x))},i.prototype.synchronize=function(){var t=GameBase.getCurrServerTime()-this._mTideStartTime;egret.log("鱼潮同步位置，_mTideStartTime="+this._mTideStartTime);for(var e=Math.floor(t/16),i=this.gameController.gameView,o=i.mFishGroupTide,n=0;e>n;n++)o.x+=this._mTideDirection*this._mTideSpeed},i.prototype.updateTide=function(t){if(this._mTideRunning){this.onTideInitFish();var e=GameBase.getCurrServerTime();if(e-this._mTideStartTime>1e3*this._mTideDuration)return this.cleanTide(),this._mTideRunning=!1,void egret.log("----------------------- 鱼潮结束！ -----------------------");var i=this.gameController.gameView,o=i.mFishGroupTide;o.x+=this._mTideDirection*this._mTideSpeed*t/16}},Object.defineProperty(i.prototype,"mIsTideRunning",{get:function(){return this._mTideRunning||this._mTideInited},enumerable:!0,configurable:!0}),i.prototype.cleanTideFish=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--){var i=t[e];i.mIsTideFish&&i.setDead()}},i.prototype.cleanTide=function(){App.TimerManager.remove(this.onTestHandle,this),this.cleanTideFish();var t=this.gameController.gameView;t.mFishGroupTide.removeChildren(),t.mFishGroupTide.x=0,this._mTideRunning=!1,this._mTideSpeed=0,this._mTideDuration=0,this._mTideDirection=0,this._mTideStartTime=0,this._mTideInited=!1,this._mTideFishs=void 0,this._mTideInitFishList=void 0},i}(base.GameSeparateCtrl);t.FishController=e,__reflect(e.prototype,"fishjoy.FishController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mMasterIndexWorld=1,i._mMasterIndex=0,i._mMaster=null,i._mFishPlayers=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mFishPlayers=[null];for(var i=0;4>i;i++)this._mFishPlayers.push(new t.FishPlayer)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this)},i.prototype.initFishPlayerRender=function(t,e){var i=this.getPlayer(t);i.initRender(e),t>2&&i.getRender().setBowAngle(90)},i.prototype.addPlayer=function(t,e){var i=this.getPlayer(t);i.initPlayerInfo(e),i.updateInfo()},i.prototype.exitPlayer=function(t){this.getPlayer(t).playerExit()},i.prototype.refreshPlayer=function(t){this.getPlayer(t).updateInfo()},i.prototype.masterFire=function(t){var e=this.master;e.fire(),e.getRender().setBowAngle(t),this.hideCali()},i.prototype.checkMoneyEnough=function(){var t=!0,e=this.master;return(e.mMoney<=0||e.mMoney<e.fireNeedMoney())&&(t=!1),t},i.prototype.hideCali=function(){var t=this.master;1==t.getRender().u_gCalibration.visible&&t.getRender().showCap()},Object.defineProperty(i.prototype,"masterIndex",{get:function(){return this.master.mPlayerClientIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"masterServerSeaNumber",{get:function(){return this.master.mPlayerSeaNumber},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"master",{get:function(){if(this._mMaster)return this._mMaster;for(var t=this._mFishPlayers.length-1;t>=1;t--){var e=this._mFishPlayers[t];if(e.mIsMaster)return e.stopHeatEffect(),this._mMaster=e,this._mMaster}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"masterPos",{get:function(){return this.getPlayerPos(this.masterIndex)},enumerable:!0,configurable:!0}),i.prototype.masterUpdateAngle=function(t){this.master.getRender().setBowAngle(t)},i.prototype.getPlayer=function(t){return this._mFishPlayers[t]},i.prototype.getPlayerBySeaNumber=function(t){var e=i.SeaMap[t+1];return this._mFishPlayers[e]},i.prototype.getPlayerByUID=function(t){for(var e,i=this._mFishPlayers.length,o=1;i>o;o++)if(t==this._mFishPlayers[o]._mPlayerUid){e=this._mFishPlayers[o];break}return e},i.prototype.getPlayerPos=function(e){return t.FishConst.CannonPosList[e]},i.prototype.updateAngle=function(t,e){this.getPlayer(t).getRender().setBowAngle(e)},i.prototype.updateCannonId=function(t,e){this.getPlayer(t).updateCannon(e)},i.prototype.fire=function(t,e){var i=this.getPlayer(t);i.fire(),i.getRender().setBowAngle(e)},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mFishPlayers.length;){var t=this._mFishPlayers.pop();t&&t.destroy()}this._mFishPlayers=void 0},i.SeaMap=[1,2,3,4],i}(base.GameSeparateCtrl);t.FishPlayerController=e,__reflect(e.prototype,"fishjoy.FishPlayerController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mProxy=null,t._view=null,t._guideView=null,t._settingView=null,t._changeCannonView=null,t._helpView=null,t._mCtrlBullet=null,t._mCtrlFishPlayer=null,t._mCtrlFish=null,t._mCtrlGoldEff=null,t._mCtrlNet=null,t._mRechargeCtrl=null,t._bgManager=null,t._mIsMirror=!1,t._mIsDataInited=!1,t._mCurrTime=0,t._tempServer=0,t._tempGoldServerId=1,t._tempNetServerId=1,t._mInitArrFish=[],t._mInitArrBullet=[],t._mCountMove=0,t._mIsTouchShoot=!1,t._mCurrAShootAngle=0,t._mIsAutoShoot=!1,t._isLockFish=!1,t._mLockFishId=0,t._mInitArrFish2=[],t.testBgID=501,t.checkCount=0,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners(),this._mIsDataInited=!1,this._mFishDeadCache=[]},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),t.TxtPack.parsTxt(),t.FishUtil.parseFishCfg(),t.FishUtil.parseFishTideCfg(),t.BgConfig.parsBgConfig(),this.gameInit(),this._mCurrTime=GameBase.getCurrServerTime(),App.TimerManager.doFrame(1,0,this.update,this),this.onPlayerReady(),App.SoundManager.stopBg(),App.SoundManager.playBg("FisheryBGM_mp3"),this._bgManager.inits(this._view),this._bgManager.startMvOnEnter()},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),egret.log("场景中掉线重回..."),this.cleanAll(),this.onPlayerReady()},i.prototype.cleanAll=function(){egret.log("清场"),this._mCtrlFish.clean(),this._mCtrlBullet.clean(),this._mCtrlNet.clean(),this._mCtrlGoldEff.clean()},i.prototype.inits=function(){e.prototype.inits.call(this),this._mCtrlFish=new t.FishController(this),this._mCtrlBullet=new t.BulletController(this),this._mCtrlGoldEff=new t.GoldEffController(this),this._mCtrlNet=new t.NetController(this),this._mCtrlFishPlayer=new t.FishPlayerController(this),this._mCtrlBullet.inits(),this._mCtrlFishPlayer.inits(),this._mCtrlFish.inits(),this._mCtrlGoldEff.inits(),this._mCtrlNet.inits(),this._mRechargeCtrl=new lobby.RechargeController,this._model=new t.GameModel(this),this._mProxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._guideView=new t.GuideView(this),this._settingView=new t.SettingView(this),this._changeCannonView=new t.ChangeCannonView(this),this._helpView=new t.HelpView(this),this._bgManager=new t.BgManagers},i.prototype.onPlayerReady=function(){var t={client_tick:this._mCurrTime};this._mProxy.reqPlayerReady(t)},i.prototype.sendFire=function(e,i,o){this._mProxy.reqPlayerFire(e,this._mIsMirror?t.FishUtil.getMirrorAngle(i):i,o)},i.prototype.onClickCard=function(t){egret.log(t)},i.prototype.registers=function(){e.prototype.registers.call(this),this._mCtrlBullet.registers(),this._mCtrlFishPlayer.registers(),this._mCtrlFish.registers(),this._mCtrlGoldEff.registers(),this._mCtrlNet.registers(),this._mRechargeCtrl.registers(),App.ViewManager.register(t.ViewsConst.Base,this._view),App.ViewManager.register(t.ViewsConst.Guide,this._guideView),App.ViewManager.register(t.ViewsConst.Setting,this._settingView),App.ViewManager.register(t.ViewsConst.ChangeCanon,this._changeCannonView),App.ViewManager.register(t.ViewsConst.help,this._helpView),App.ViewManager.register(t.ViewsConst.recharg,this._mRechargeCtrl.rechargeView),this.registerFunc("onTouchBegin",this.onTouchBegin,this),this.registerFunc("onTouchEnd",this.onTouchEnd,this),this.registerFunc("onTouchMove",this.onTouchMove,this),this.registerFunc("onBtnYu",this.onBtnYu,this),this.registerFunc("onAutoShoot",this.onClickAutoShoot,this),this.registerFunc("onLockFish",this.lockFish,this),this.registerFunc("GuideClickFunc",this.onGuideClickFunc,this),this.registerFunc("SettingClickFunc",this.onSettingClickFunc,this),this.registerFunc("ChangeCannonClickFunc",this.onChangeCannonClickFunc,this),this.registerFunc("HelpClickFunc",this.onHelpClickFunc,this),this.registerFunc("screenshots",this.screenshots,this),this.registerFunc("changeBgPos",this.changeBgPos,this),this.registerFunc("waveEnd",this.waveEnd,this),this.registerFunc(t.FishConst.CLICKBACKROOM,this.onBack2Room,this),this.registerFunc(t.FishConst.PLAYER_CHAT,this.sendChat,this),this.registerFunc(t.FishConst.onPlayerEnterCallBack,this.onPlayerEnterCallBack,this),this.registerFunc(t.FishConst.onPlayerLeaveCallBack,this.onPlayerLeaveCallBack,this),this.registerFunc(t.FishConst.onDistributeCallBack,this.onDistributeCallBack,this),this.registerFunc(t.FishConst.onPlayerFireCallBack,this.onPlayerFireCallBack,this),this.registerFunc(t.FishConst.onGameStatusCallBack,this.onGameStatusCallBack,this),this.registerFunc(t.FishConst.onDeadFishsCallBack,this.onDeadFishsCallBack,this),this.registerFunc(t.FishConst.onSwitchSceneCallBack,this.onSwitchSceneCallBack,this),this.registerFunc(t.FishConst.onChangeGunCallBack,this.onChangeGunCallBack,this),this.registerFunc(t.FishConst.onReConnetCallBack,this.onReConnetCallBack,this),this.registerFunc(t.FishConst.onBossComingCallBack,this.onBossComingCallBack,this),this.registerFunc(t.FishConst.onFishTimeSyscCallBack,this.onFishTimeSyscCallBack,this),this.registerFunc(t.FishConst.onFishUnlockCallBack,this.onFishUnlockCallBack,this),this.registerFunc(t.FishConst.Player_Change_Cannon,this.onPlayerChangeCannon,this),this.registerFunc(t.FishConst.onFishChatBack,this.onChatNotify,this),this.registerFunc(t.FishConst.onOffsetFishNotify,this.onOffsetFishNotify,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewsConst.Base);for(var e=1;4>=e;e++)this._mCtrlFishPlayer.initFishPlayerRender(e,this._view.getPlayerRender(e))},i.prototype.onGameStatusCallBack=function(t){egret.log("发送准备请求，服务器返回进场数据，玩家数据等"),this.initConfig(t),this.initPlayers(t),this.initFishsAndBullet(t),this.initTide(t),this._bgManager.setBgIndexOnEnter(t)},i.prototype.initConfig=function(e){var i=e.game_config;t.FishUtil.setFishBaseConfig(i)},i.prototype.initPlayers=function(t){var e=t.masterIndex,i=t.infoList;this.mirror(i,e),this._mIsMirror=e>2,this._mCtrlFish.setMirror(this._mIsMirror);for(var o=1;4>=o;o++){var n=i[o-1];this._mCtrlFishPlayer.getPlayer(o).initPlayerInfo(n),this._mCtrlFishPlayer.initFishPlayerRender(o,this._view.getPlayerRender(o))}this._view.setChatPos(this._mCtrlFishPlayer.masterIndex)},i.prototype.initFishsAndBullet=function(t){for(var e=t.fish_tide.next_scene,i=e>0?[]:t.current_fishes,o=0,n=i.length;n>o;o++)this._mInitArrFish.push(i[o]);for(var s=t.current_bullets,o=0,n=s.length;n>o;o++)this._mInitArrBullet.push(s[o]);var r=t.offset_group;this.parseGroupFish(r),App.TimerManager.doFrame(1,999,this.onFrameInit,this),this.onFrameInit(0)},i.prototype.parseGroupFish=function(t){for(var e=0,i=t.length;i>e;e++)this.parseSignlGroupFish(t[e])},i.prototype.parseSignlGroupFish=function(t){for(var e=t.path_id,i=t.created_at,o=t.fish_group,n=0,s=o.length;s>n;n++){var r={};r.fish_type=o[n].fish_type,r.fish_id=o[n].fish_id,r.fish_pos_index=o[n].fish_pos_index,r.elapsed=o[n].elapsed,r.path_id=e,r.created_at=i,r.offset=o[n].offset,this._mInitArrFish.push(r)}},i.prototype.onFrameInit=function(t){var e=this._mInitArrFish,i=this._mInitArrBullet;egret.log("listFish len:",e.length),egret.log("bulletList len:",i.length),this.generateFish();for(var o=egret.getTimer();e.length<=0&&i.length&&!(egret.getTimer()-o>5);)this.createBullet(i.shift());e.length<=0&&i.length<=0&&(this._mIsDataInited=!0,App.TimerManager.remove(this.onFrameInit,this),this.dataRefreshInited())},i.prototype.generateFish=function(){var t=this._mInitArrFish;if(t.length>0)for(var e=egret.getTimer();t.length&&!(egret.getTimer()-e>5);)this.createFish(t.shift())},i.prototype.mirror=function(t,e){for(var i=t.length-1;i>=0;i--){var o=t[i];this.mirrorPos(o,e)}t.sort(function(t,e){return t.client_index-e.client_index})},i.prototype.mirrorPos=function(t,e){var i=t,o=i.server_index;e>2&&(o=1==o?4:2==o?3:3==o?2:1),i.client_index=o,i.masterIndex=e},i.prototype.dataRefreshInited=function(){egret.log("--- 鱼池信息初始化完成 ---");for(var t=this._mFishDeadCache;t.length;)this.onDeadFishsCallBack(t.shift())},i.prototype.initTide=function(t){var e=t.fish_tide,i=e.next_scene;if(!(0>=i)){console.info("initTide info",e);var o=e.start_time,n=[].concat(t.current_fishes);this._mCtrlFish.runAway(),this._mCtrlFish.tideGo(o,i,n)}},i.prototype.onGuideClickFunc=function(){App.ViewManager.open(t.ViewsConst.Guide)},i.prototype.onSettingClickFunc=function(){App.ViewManager.open(t.ViewsConst.Setting)},i.prototype.onChangeCannonClickFunc=function(){App.ViewManager.open(t.ViewsConst.ChangeCanon,this._mCtrlFishPlayer.master.getCannonId())},i.prototype.onHelpClickFunc=function(){App.ViewManager.open(t.ViewsConst.help)},i.prototype.screenshots=function(){this._bgManager.screenShotBeforStart()},i.prototype.changeBgPos=function(t){egret.log("改变背景位置,",t),this._bgManager.changeBgPos(t)},i.prototype.waveEnd=function(){this._bgManager.onComplete()},i.prototype.showRecharge=function(){App.ViewManager.open(t.ViewsConst.recharg,LayerManager.UI_Popup)},i.prototype.onBtnYu=function(){this._mCtrlFish.refreshHitRect();var t=Math.random()>.5?-1:1,e=this.testBgID;e++,e>505&&(e=501),this.testBgID=e,this._bgManager.changeBg(e,t),this._view.playTideWave(t)},i.prototype.sendChat=function(t){var e={uid:this.player.getUserId(),text_id:t};egret.log("向服务器发送聊天请求---userid:"+e.uid),this._mProxy.reqFishChat(e)},i.prototype.onChatNotify=function(t){var e=t.uid,i=t.text_id;egret.log("聊天广播：seatIndex="+e+",text="+i);var o=this._mCtrlFishPlayer.getPlayerByUID(e);o.showChatMessage(i)},i.prototype.onBack2Room=function(){egret.log("返回房间列表"),App.PromTipsView.show("是否现在退出捕鱼游戏？",function(){App.TimerManager.removeAll(this),this._mProxy.sendLeaveGame()}.bind(this),null,this,!0)},i.prototype.onExitGame=function(){this.goBack2Room()},i.prototype.fire=function(t,e,i,o,n,s){var r=this._mCtrlFishPlayer.getPlayerPos(e),a=this._mCtrlFishPlayer.getPlayer(e);if(!a)return void egret.warn("玩家 index:",e," 不存在");var h;o>0&&(h=this._mCtrlFish.getFish(o),h&&(i=App.MathUtils.getAngle2(r[0],r[1],h.getX(),h.getY())));var l=App.MathUtils.getRadian(i),p=50*Math.cos(l)+r[0],c=50*Math.sin(l)+r[1],u=a.getBulletId(),d=a.getNetId();a.mIsMaster||this._mCtrlFishPlayer.fire(e,i),this._mCtrlBullet.createBullet(t,u,d,this._view.bulletGroup,p,c,i,h,a.mIsMaster,n),a.mIsMaster&&App.SoundManager.playEffect("CannonSE_mp3"),a.updateMoney(s)},i.prototype.onTouchBegin=function(t,e){var i=this._mCtrlFishPlayer.master.getCannonCfg();R.intervalTime(i.gun_rate,"fish_touch_shoot")&&(this._isLockFish?this.setLockFish(t,e):this.goTouchShoot(t,e),this._view.hideMenu())},i.prototype.onTouchEnd=function(t,e){this.removeTouchFire()},i.prototype.removeTouchFire=function(){this._mCountMove=0,this._mIsTouchShoot=!1,App.TimerManager.remove(this.onCountAutoShoot,this),App.TimerManager.remove(this.onTouchShoot,this)},i.prototype.onTouchMove=function(t,e){++this._mCountMove%3==0&&this.changeAngle(t,e)},i.prototype.changeAngle=function(t,e){var i=this._mCtrlFishPlayer.masterPos,o=App.MathUtils.getAngle2(i[0],i[1],t,e);o>=-5||-175>=o||(this._mCtrlFishPlayer.masterUpdateAngle(o),this._mCurrAShootAngle=o)},i.prototype.goTouchShoot=function(t,e){var i=this._mCtrlFishPlayer.masterPos,o=App.MathUtils.getAngle2(i[0],i[1],t,e);o>=-5||-175>=o||this.checkMoney()&&(this._mCtrlFishPlayer.masterFire(o),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),o),this._mCurrAShootAngle=o,App.TimerManager.doTimer(500,1,this.onCountAutoShoot,this))},i.prototype.onCountAutoShoot=function(){this._mIsTouchShoot=!0;var t=this._mCtrlFishPlayer.master.getCannonCfg();App.TimerManager.doTimer(t.gun_rate,99999,this.onTouchShoot,this),this.onTouchShoot()},i.prototype.onTouchShoot=function(){if(this._mIsTouchShoot){if(!this.checkMoney())return;this._mCtrlFishPlayer.masterFire(this._mCurrAShootAngle),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),this._mCurrAShootAngle)}},i.prototype.onClickAutoShoot=function(t){if(this._mIsAutoShoot=t,t){this._mLockFishId=0;var e=this._mCtrlFishPlayer.master.getCannonCfg();App.TimerManager.doTimer(e.gun_rate,0,this.onAutoShoot,this)}else this.onRemoveAutoShoot()},i.prototype.onRemoveAutoShoot=function(){this._mIsAutoShoot=!1,App.TimerManager.remove(this.onAutoShoot,this)},i.prototype.lockFish=function(t){this._isLockFish=t,t||this.onRemoveLockFish()},i.prototype.onRemoveLockFish=function(){var t=this._mCtrlFish.getFish(this._mLockFishId);t&&t.isLive&&t.setLock(!1),this._mLockFishId=-1},i.prototype.setLockFish=function(t,e){var i=this._mCtrlFish.getTouchFish(t,e);i&&i.isLive&&!i.isOut()&&(this._mCtrlFish.clearArmIcon(),this._mLockFishId=i.getServerId(),i.setLock(!0))},i.prototype.onAutoShoot=function(){if(this._mIsAutoShoot&&this.checkMoney())if(this._isLockFish&&this._mLockFishId>0){var t=this._mCtrlFish.getFish(this._mLockFishId);if(t&&t.isLive&&!t.isOut()){var e=this._mCtrlFishPlayer.masterPos,i=App.MathUtils.getAngle2(e[0],e[1],t.getX(),t.getY());this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),i,t.getServerId()),this._mCtrlFishPlayer.masterFire(i)}else this.clearBulletLock(this._mLockFishId)}else this._mCtrlFishPlayer.masterFire(this._mCurrAShootAngle),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),this._mCurrAShootAngle)},i.prototype.checkMoney=function(){if(this._mIsDataInited){var t=this._mCtrlFishPlayer.checkMoneyEnough();return t||(this.checkCount++,this._mIsAutoShoot&&(this.onRemoveAutoShoot(),this._view.resetAutoUI()),this._mIsTouchShoot&&this.removeTouchFire(),this.checkCount<=1&&this.showRecharge()),t}},i.prototype.chooseLockFish=function(){var t=this._mCtrlFish.getHightFish();return t},i.prototype.updateTime=function(t){if(t>0)for(var e=Math.floor(t/16),i=0;e>i;i++)this.update(16)},i.prototype.update=function(t){if(t>30)return void this.updateTime(t);var e=this._mCurrTime+t;this._mCtrlBullet.update(e),this._mCtrlFish.update(e),this._mCtrlNet.update(e),this._mCtrlGoldEff.update(e);for(var i=this._mCtrlFish.getList(),o=this._mCtrlBullet.getList(),n=i.length-1;n>=0;n--){var s=i[n];if(!s.isDead()&&!s.isOver()){s.isLockedFish&&this.changeAngle(s.x,s.y);for(var r=o.length-1;r>=0;r--){var a=o[r];a.isDead()||a.isOver()||a.getLockFishSId()>0&&a.getLockFishSId()!=s.getServerId()||s.hitTest(a.getHitBound())&&(s.hitAction(),a.mIsMaster&&this._mProxy.reqHitFish(s.getServerId(),s.mId,a.getServerId()),a.setDead(),this.showNet(a))}}}this._mCurrTime=e,this._mIsDataInited&&this.generateFish()},i.prototype.showNet=function(t){this._mCtrlNet.createNet(t.getNetId(),this._view.bulletGroup,t.x,t.y)},i.prototype.showGoldEffect=function(e,i,o,n,s){var r=t.FishConst.CannonPosList[o],a=t.FishUtil.getFishGoldCoins(e.mId),h=egret.Point.create(e.getX(),e.getY()),l=egret.Point.create(r[0],r[1]);e.mId>5e3?(this._mCtrlGoldEff.createBFEff(e.mId,this._view.effectGroup,h.x,h.y),this._mCtrlGoldEff.createGoldSpecial(e.mId,i,this._view.effectGroup,r[0],r[1])):e.mId>4e3&&e.mId<4005&&this._mCtrlGoldEff.createBFEff(e.mId,this._view.effectGroup,h.x,h.y),this._mCtrlGoldEff.createGold(h,l,i,a,this._view.effectGroup,n,e.mId,s)},i.prototype.onPlayerEnterCallBack=function(t){egret.log("玩家加入----------");var e=t.info;this.mirrorPos(e,this._mCtrlFishPlayer.masterServerSeaNumber);var i=e.client_index;this._mCtrlFishPlayer.addPlayer(i,e)},i.prototype.onPlayerLeaveCallBack=function(t){egret.log("玩家离开----------");var e=this._mCtrlFishPlayer.getPlayerBySeaNumber(t.seat_number);e.playerExit()},i.prototype.onDistributeCallBack=function(t){this._mInitArrFish.push(t)},i.prototype.onOffsetFishNotify=function(t){egret.log("收到偏移鱼组消息"),this.parseSignlGroupFish(t)},i.prototype.createFish=function(t){var e=t,i=e.fish_type,o=e.fish_id,n=e.path_id,s=e.created_at;this._mCtrlFish.mIsTideRunning||(e.offset?(egret.log("controller.createFish,有偏移值生成，fishId："+o+",pathID=",n+",fishType=",i),this._mCtrlFish.createFish(o,i,n,this._view.getFishLay(i),s,!1,e.offset)):(egret.log("controller.createFish,无偏移值生成"),this._mCtrlFish.createFish(o,i,n,this._view.getFishLay(i),s)))},i.prototype.onPlayerFireCallBack=function(t){this.createBullet(t)},i.prototype.createBullet=function(e){var i=e,o=this._mCtrlFishPlayer.getPlayerBySeaNumber(i.seat_number);if(!o)return void egret.warn("玩家 seat_number:",i.seat_number," 不存在");i.angle=i.angle?i.angle:App.MathUtils.random(30,150);var n=i.bullet_id,s=i.locked_fish_id,r=this._mIsMirror?t.FishUtil.getMirrorAngle(i.angle):i.angle,a=i.created_at,h=i.balance;this.fire(n,o.mPlayerClientIndex,r,s,a,h)},i.prototype.onDeadFishsCallBack=function(t){var e=t.fish_catched,i=t.balance,o=t.seat_number,n=this._mCtrlFishPlayer.getPlayerBySeaNumber(o);for(var s in e){var r=e[s];this._mIsDataInited?this.showFishResult(n,r):this._mFishDeadCache.push(t)}this._mIsDataInited&&R.setTimeOnce(function(){n.updateMoney(i)}.bind(this),this,1e3)},i.prototype.showFishResult=function(t,e){var i=e,o=t,n=i.fish_id,s=i.money,r=i.crit_multiple,a=this._mCtrlFish.getFish(n);a?(a.playDead(this._view.mFishGroup),this.showGoldEffect(a,s,o.mPlayerClientIndex,r,o.mIsMaster),egret.log("打中鱼了 id:",n,"money:",s,"暴击倍数：",r,i),100>=s&&egret.error("金币小于100:",i)):egret.warn("玩家 ",o.mPlayerClientIndex,"打中了没有的鱼 ID：",n),n==this._mLockFishId&&this.clearBulletLock(n)},i.prototype.clearBulletLock=function(t){this._mCtrlBullet.cleanBulletFish(t),this._mLockFishId=-1},i.prototype.onPlayerChangeCannon=function(e){if(R.intervalTime(200,"ChangeCannon")){var i=this._mCtrlFishPlayer.master,o=i.getCannonId();if(e.levels>0)o=e.levels;else if(e.isAddStr){var n=t.FishUtil.getCannonConfigById(o+1);n&&o++}else{var n=t.FishUtil.getCannonConfigById(o-1);n&&o--}this._mProxy.reqChangePao(o)}},i.prototype.onChangeGunCallBack=function(t){var e=this._mCtrlFishPlayer.getPlayerBySeaNumber(t.seat_number);e.updateCannon(t.gun_type),this._changeCannonView.refreshListOnChange(t.gun_type)},i.prototype.onSwitchSceneCallBack=function(t){var e=t.next_scene,i=t.start_time,o=t.background_id;this._mCtrlFish.runAway(),this._mCtrlFish.tideGo(i,e),this.playTideWaveAni(e,o),egret.log("鱼潮来临，切背景ID："+o)},i.prototype.playTideWaveAni=function(t,e){var i=RES.getRes("fish_tide"+t+"_json");if(i){var o=i.direction;this._bgManager.changeBg(e,o),this._view.playTideWave(o)}},i.prototype.onReConnetCallBack=function(t){},i.prototype.onBossComingCallBack=function(t){},i.prototype.onFishTimeSyscCallBack=function(t){},i.prototype.onFishUnlockCallBack=function(t){},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._mProxy.addEvent(),this._mCtrlFish.addListeners(),this._mCtrlBullet.addListeners(),this._mCtrlGoldEff.addListeners(),this._mCtrlFishPlayer.addListeners()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._mCtrlFish.removeListeners(),this._mCtrlBullet.removeListeners(),this._mCtrlGoldEff.removeListeners(),this._mCtrlFishPlayer.removeListeners(),this._mProxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},Object.defineProperty(i.prototype,"gameView",{get:function(){return this._view},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),t.FishUtil.clear(),t.BgConfig.clear(),t.TxtPack.clear(),this._mCtrlBullet.destroy(),this._mCtrlFishPlayer.destroy(),this._mCtrlFish.destroy(),this._mCtrlGoldEff.destroy(),this._mCtrlNet.destroy(),this._mRechargeCtrl.destroy(),this._model.destroy(),this._mProxy.destroy(),this._view.destroy(),this._bgManager&&(this._bgManager.stopMoveBg(),this._bgManager.desdroyss(),this._bgManager=void 0),this._mCtrlFish=void 0,this._mCtrlBullet=void 0,this._mCtrlGoldEff=void 0,this._mCtrlFishPlayer=void 0,this._view=void 0,this._model=void 0,this._mProxy=void 0,this._mCtrlNet=void 0,this._mInitArrFish=void 0,this._mInitArrBullet=void 0,this._mFishDeadCache=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"fishjoy.GameController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mGoldEffList=null,i._mGoldSpecialList=null,i._mGoldBFEffList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mGoldEffList=[],this._mGoldSpecialList=[],this._mGoldBFEffList=[]},i.prototype.createGold=function(e,i,o,n,s,r,a,h){var l=t.GoldEff.create(0,s);l.setPos(e.x,e.y),r>0&&(o=t.FishUtil.getFishValue(a)*t.FishUtil.mFishBaseMultiple),l.refreshGold(i,o,n,r),l.setMaster(h),this._mGoldEffList.push(l),egret.Point.release(e),egret.Point.release(i)},i.prototype.createGoldSpecial=function(e,i,o,n,s){var r=t.GoldSpecial.create(0,o);r.setPos(n,100>s?s+160:s-160),r.refreshGold(i,e),this._mGoldSpecialList.push(r)},i.prototype.createBFEff=function(e,i,o,n){var s=t.FishBigEffBone.create();s.setPosition(o,n),e>5e3?s.boneName=t.FishBigEffBone.big_boom:e>4e3&&4005>e&&(s.boneName=t.FishBigEffBone.small_boom),s.init(),s.play(),s.parent||i.addChild(s),this._mGoldBFEffList.push(s)},i.prototype.update=function(e){for(var i=this._mGoldEffList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()&&(i.splice(o,1),t.GoldEff.release(n))}for(var s=this._mGoldSpecialList,o=s.length-1;o>=0;o--){var n=s[o];n.isDead()&&(s.splice(o,1),t.GoldSpecial.release(n))}for(var r=this._mGoldBFEffList,o=r.length-1;o>=0;o--){var n=r[o];n.isOver&&(r.splice(o,1),t.FishBigEffBone.release(n))}},i.prototype.getList=function(){return this._mGoldEffList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mGoldEffList;e.length;){var i=e.pop();t.GoldEff.release(i)}for(var o=this._mGoldSpecialList;o.length;){var i=o.pop();t.GoldSpecial.release(i)}for(var n=this._mGoldBFEffList;n.length;){var i=n.pop();t.FishBigEffBone.release(i)}},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mGoldEffList.length;){var t=this._mGoldEffList.shift();t.destroy()}for(this._mGoldEffList=null,ObjectPool.clearClass("fishjoy.GoldEff","destroy");this._mGoldSpecialList.length;){var t=this._mGoldSpecialList.shift();t.destroy()}this._mGoldSpecialList=null,ObjectPool.clearClass("fishjoy.GoldSpecial","destroy");for(var i=this._mGoldBFEffList;i.length;){var o=i.pop();o.destroy()}this._mGoldBFEffList=null,ObjectPool.clearClass("fishjoy.FishBigEffBone","destroy")},i}(base.GameSeparateCtrl);t.GoldEffController=e,__reflect(e.prototype,"fishjoy.GoldEffController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mNetList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mNetList=[]},i.prototype.createNet=function(e,i,o,n){var s=t.Net.create(e,i);s.refreshNet(e),s.setServerId(e),s.setPos(o,n),this._mNetList.push(s)},i.prototype.update=function(e){for(var i=this._mNetList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()&&(i.splice(o,1),t.Net.release(n))}},i.prototype.getList=function(){return this._mNetList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mNetList;e.length;){var i=e.pop();t.Net.release(i)}},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mNetList.length;){var t=this._mNetList.pop();t.destroy()}this._mNetList=null,ObjectPool.clearClass("fishjoy.Net","destroy")},i}(base.GameSeparateCtrl);t.NetController=e,__reflect(e.prototype,"fishjoy.NetController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(base.GameModel);t.FishPlayerMoudel=e,__reflect(e.prototype,"fishjoy.FishPlayerMoudel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"fishjoy.GameModel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.ScFishPlayerEnterNotifyType,this.onPlayerEnter,this),this.addListener(t.ProxyConst.ScFishPlayerLeaveNotifyType,this.onPlayerLeave,this),this.addListener(t.ProxyConst.ScFishDistributeNotifyType,this.onDistribute,this),this.addListener(t.ProxyConst.ScFishFireNotifyType,this.onPlayerFire,this),this.addListener(t.ProxyConst.ScFishGameStatusNotifyType,this.onGameStatus,this),this.addListener(t.ProxyConst.ScFishDeadFishesNotifyType,this.onDeadFishes,this),this.addListener(t.ProxyConst.ScFishSwitchSceneNotifyType,this.onSwitchScene,this),this.addListener(t.ProxyConst.ScFishChangeGunNotifyType,this.onChangeGun,this),this.addListener(t.ProxyConst.ScFishBossComingNotifyType,this.onBossComing,this),this.addListener(t.ProxyConst.ScFishChatNotifyType,this.onChatNotify,this),this.addListener(t.ProxyConst.ScFishOffsetGroupNotifyType,this.onOffsetFishNotify,this)
},i.prototype.onGameStatus=function(e){for(var i,o=e.players,n=this.getMasterServerIndex(o),s=[],r=1;4>=r;r++){var a=this.getPlayerFromServer(r,o);i=a?{uid:a.uid,server_index:a.seat_number+1,paoId:a.gun_type,nick_name:a.nickname,money:a.money,vip:a.vip}:{uid:-1,server_index:r,paoId:0,nick_name:"",money:0},s.push(i)}e.infoList=s,e.masterIndex=n,this.applyFunc(t.FishConst.onGameStatusCallBack,e)},i.prototype.getPlayerFromServer=function(t,e){for(var i in e){var o=e[i];if(t==o.seat_number+1)return o}return null},i.prototype.getMasterServerIndex=function(t){var e=this.player;for(var i in t){var o=t[i];if(e.getUserId()==o.uid)return o.seat_number+1}return 0},i.prototype.onPlayerEnter=function(e){var i=e.new_player,o={uid:i.uid,server_index:i.seat_number+1,paoId:i.gun_type,nick_name:i.nickname,money:i.money,vip:i.vip};e.info=o,this.applyFunc(t.FishConst.onPlayerEnterCallBack,e)},i.prototype.onPlayerLeave=function(e){this.applyFunc(t.FishConst.onPlayerLeaveCallBack,e)},i.prototype.onDistribute=function(e){this.applyFunc(t.FishConst.onDistributeCallBack,e)},i.prototype.onPlayerFire=function(e){this.applyFunc(t.FishConst.onPlayerFireCallBack,e)},i.prototype.onDeadFishes=function(e){this.applyFunc(t.FishConst.onDeadFishsCallBack,e)},i.prototype.onSwitchScene=function(e){this.applyFunc(t.FishConst.onSwitchSceneCallBack,e)},i.prototype.onChangeGun=function(e){this.applyFunc(t.FishConst.onChangeGunCallBack,e)},i.prototype.onReconnect=function(e){this.applyFunc(t.FishConst.onReConnetCallBack,e)},i.prototype.onBossComing=function(e){this.applyFunc(t.FishConst.onBossComingCallBack,e)},i.prototype.onOffsetFishNotify=function(e){this.applyFunc(t.FishConst.onOffsetFishNotify,e)},i.prototype.onTimeSync=function(e){this.applyFunc(t.FishConst.onFishTimeSyscCallBack,e)},i.prototype.onFishUnlock=function(e){this.applyFunc(t.FishConst.onFishUnlockCallBack,e)},i.prototype.onChatNotify=function(e){this.applyFunc(t.FishConst.onFishChatBack,e)},i.prototype.reqFishChat=function(e){this.send(t.ProxyConst.CsFishChatReqType,e)},i.prototype.reqPlayerReady=function(e){this.send(t.ProxyConst.CsFishPlayerReadyReqType,e)},i.prototype.reqPlayerFire=function(e,i,o){var n={gun_multiple:e,angle:i,locked_fish_id:o?o:0,client_tick:GameBase.getCurrServerTime()};this.send(t.ProxyConst.CsFishPlayerFireReqType,n)},i.prototype.reqChangePao=function(e){var i={gun_type:e};this.send(t.ProxyConst.CsFishChangeGunReqType,i)},i.prototype.reqHitFish=function(e,i,o){var n={fish_id:e,fish_type:i,bullet_id:o};this.send(t.ProxyConst.CsFishCollidedNotifyType,n)},i.prototype.reqTimeSync=function(t){},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"fishjoy.GameProxy")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.parsBgConfig=function(){var t=RES.getRes("Backgrounds_json");egret.log("背景配置解析：",t),this.bgDic=t;for(var e in t){var i=t[e].bulbPosition,o=i.split("|"),n=[];for(var s in o){var r={},a=o[s].split(","),h=Number(a[0]),l=Number(a[1]);r.dot={},r.dot.x=h,r.dot.y=l,n.push(r)}t[e].pList=n}},t.getBgDataByIndex=function(t){return this.bgDic["data_"+t]||""},t.clear=function(){t.bgDic=void 0},t.bgDic=null,t}();t.BgConfig=e,__reflect(e.prototype,"fishjoy.BgConfig")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.getCannonConfigById=function(e){t._mCannonConfig||(t._mCannonConfig=RES.getRes("gun_config_json"));var i=t._mCannonConfig["data_"+e];return i},t.parseFishTideCfg=function(){var e=RES.getRes("fishTidePath_json"),i=-1;for(var o in e){i=parseInt(o.split("_")[1]);var n={};n.speed=e[o].speed;var s=e[o].startPoint.split(","),r=new egret.Point(parseInt(s[0]),parseInt(s[1])),a=e[o].endPoint.split(","),h=new egret.Point(parseInt(a[0]),parseInt(a[1]));n.startPoint=r,n.endPoint=h;var l=e[o].fishList.split("|"),p=[],c=0,u=l.length;for(c=0;u>c;c++){var d={},m=l[c].split(",");d.fishID=parseInt(m[0]);var y=m[1].split("-"),_=parseInt(y[0]),g=parseInt(y[1]),f=new egret.Point(_,g);d.posi=f;var v=m[2].split("-"),C=parseInt(v[0]),b=parseInt(v[1]),T=new egret.Point(C,b);d.offset=T;var B=m[3].split("-"),E=parseInt(B[0]),L=parseInt(B[1]),A=parseInt(B[2]);d.centerPos=[E,L,A],p.push(d)}n.list=p,t._fishTidess["tide_"+i]=n}},t.getFishTideCfg=function(e){return t._fishTidess["tide_"+e]},t.parseFishCfg=function(){var e,i=RES.getRes("fish_json");for(var o in i){e=o.split("_")[1];var n=i[o].FishCollide,s=n.split("|"),r=[];for(var a in s){var h=s[a].split(","),l={},p=Number(h[0]),c=Number(h[1]);l.dot={},l.dot.x=p,l.dot.y=c,l.radius=Number(h[2]),r.push(l)}t.initFishHitRect(e,r),t.initFishGoldCoins(e,i[o].GoldCoins),t.initFishSpeedCoef(e,i[o].SpeedCoefficient),t.initFishValue(e,i[o].FishValue)}},t.initFishGoldCoins=function(e,i){var o=t._mFishBaseConfig;o.GoldCoins||(o.GoldCoins={}),o.GoldCoins["cfg_"+e]=i},t.initFishValue=function(e,i){var o=t._mFishBaseConfig;o.fishValues||(o.fishValues={}),o.fishValues["cfg_"+e]=i},t.getFishValue=function(e){return t._mFishBaseConfig.fishValues["cfg_"+e]},t.initFishSpeedCoef=function(e,i){var o=t._mFishBaseConfig;o.speedCoef||(o.speedCoef={}),o.speedCoef["cfg_"+e]=i},t.getFishSpeedCoef=function(e){return t._mFishBaseConfig.speedCoef["cfg_"+e]},t.getFishGoldCoins=function(e){return t._mFishBaseConfig.GoldCoins["cfg_"+e]},t.initFishHitRect=function(e,i){var o=t._mFishBaseConfig;o.hitRect||(o.hitRect={}),o.hitRect["cfg_"+e]=i},t.getFishHitRect=function(e){return t._mFishBaseConfig.hitRect["cfg_"+e]},t.getMirrorAngle=function(t){return-t},t.setFishBaseConfig=function(e){t._mFishBaseConfig.cfg=e},Object.defineProperty(t,"mFishBaseMultiple",{get:function(){var e=t._mFishBaseConfig.cfg;return e?e.multiple:1},enumerable:!0,configurable:!0}),t.clear=function(){t._mFishBaseConfig={},t._fishTidess={},t._mCannonConfig=void 0},t._mFishBaseConfig={},t._fishTidess={},t}();t.FishUtil=e,__reflect(e.prototype,"fishjoy.FishUtil")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.parsTxt=function(){var e=RES.getRes("textPack_fishjoy_json");t.lockDic=e.lockTxts,t.chatTxtss=e.chatTxts,t.explainTxtss=e.explainTxts,t.lockTxtIDArr=[];for(var i in t.lockDic)t.lockTxtIDArr.push(i);t.chatTxtIDArr=[];for(var i in t.chatTxtss)t.chatTxtIDArr.push(i)},t.getLockTxt=function(e){return t.lockDic[e]||""},t.getChatTxt=function(e){return t.chatTxtss[e]||""},t.getChatTxtByIndex=function(e){var i="9009";switch(e){case 0:i="9009";break;case 1:i="90010";break;case 2:i="90011";break;case 3:i="90012";break;case 4:i="90013"}return t.getChatTxt(i)},t.getExplainTxt=function(e){return t.explainTxtss[e]},t.clear=function(){t.lockDic=void 0,t.lockTxtIDArr=null,t.chatTxtss=void 0,t.chatTxtIDArr=null,t.explainTxtss=void 0},t.lockDic=null,t.lockTxtIDArr=null,t.chatTxtss=null,t.chatTxtIDArr=null,t.explainTxtss=null,t}();t.TxtPack=e,__reflect(e.prototype,"fishjoy.TxtPack")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){this._bgIndex=0,this._leftBorder=-1450,this._rightBorder=1450,this._pointX=400,this._delayTime=2e5,this._bitmap=null,this._bitMask=null}return t.prototype.inits=function(t){this._gameView=t,this._bgIndex=GameModuleMgr.i.getCurrSceneType();var e=this._bgIndex;this._gameView.foreBg.setBgData(e),this._gameView.foreBg1.setBgData(e),this._gameView.backGroup2.visible=!1,this._gameView.changeBg.visible=!1},t.prototype.setBgIndexOnEnter=function(t){var e=t.fish_tide;this._bgIndex=e.background_id,egret.log("初始进入，房间数据状态广播： bgID=",e.background_id)},t.prototype.startMvOnEnter=function(){this.stopMoveBg();var t=this._bgIndex;this._gameView.foreBg.setBgData(t),this._gameView.foreBg1.setBgData(t),this._gameView.foreBg.x=0,this._gameView.foreBg1.x=this._rightBorder,this._gameView.backGroup2.visible=!1,this.moveImg(this._gameView.foreBg,0),this.moveImg(this._gameView.foreBg1,this._rightBorder)},t.prototype.BgMove=function(){this.stopMoveBg(),this.moveImg(this._gameView.foreBg,0),this.moveImg(this._gameView.foreBg1,this._rightBorder)},t.prototype.moveImg=function(t,e){t.x=e;var i=this.getMut(t);egret.Tween.get(t).to({x:this._leftBorder},i).call(this.moveImg,this,[t,this._rightBorder-2])},t.prototype.stopMoveBg=function(){this._gameView&&this._gameView.foreBg&&egret.Tween.removeTweens(this._gameView.foreBg),this._gameView&&this._gameView.foreBg1&&egret.Tween.removeTweens(this._gameView.foreBg1),this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null)},t.prototype.getMut=function(t){var e;return e=Math.round((t.x-this._leftBorder)/this._rightBorder)*this._delayTime},t.prototype.changeBg=function(t,e){this._bgIndex=t,this._dirction=e},t.prototype.screenShotBeforStart=function(){this.stopMoveBg(),this._bitmap||(this._bitmap=new egret.Bitmap);var t=App.StageUtils.getWidth(),e=App.StageUtils.getHeight();this._bitMask=new egret.Shape,this._bitMask.graphics.beginFill(16711935),this._bitMask.graphics.drawRect(0,0,t,e),this._bitMask.graphics.endFill(),this._gameView.backGroup2.addChild(this._bitMask),this._bitmap.mask=this._bitMask;var i=new egret.RenderTexture;i.drawToTexture(this._gameView.backGroup,new egret.Rectangle(0,0,t,e));this._bitmap.texture=i,this._gameView.backGroup2.addChild(this._bitmap),this._dirction>0?(this._bitMask.x=t,this._bitMask.scaleX=-1):(this._bitMask.x=0,this._bitMask.scaleX=1),this._gameView.backGroup2.visible=!0,this._gameView.foreBg.x=0,this._gameView.foreBg1.x=this._rightBorder,this._gameView.foreBg.setBgData(this._bgIndex),this._gameView.foreBg1.setBgData(this._bgIndex)},t.prototype.changeBgPos=function(t){var e=this._dirction,i=App.StageUtils.getWidth();if(!(e>0&&t-208>=i||0>e&&0>=t+208)){var o=1;o=0>e?(t+208)/i:(t-208)/i-1,this._bitMask.scaleX=o}},t.prototype.onComplete=function(){this._bitmap&&this._bitmap.parent&&(this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null),this._gameView.backGroup2.visible=!1,this.BgMove()},t.prototype.desdroyss=function(){this._gameView&&this._gameView.foreBg&&egret.Tween.removeTweens(this._gameView.foreBg),this._gameView&&this._gameView.foreBg1&&egret.Tween.removeTweens(this._gameView.foreBg1),this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null),this._gameView&&(this._gameView=void 0)},t}();t.BgManagers=e,__reflect(e.prototype,"fishjoy.BgManagers")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.bubbleList=[],t.skinName="BgUISkin",t}return __extends(i,e),i.prototype.initComponent=function(t){e.prototype.initComponent.call(this,t),this.touchEnabled=!1,this.touchChildren=!1},i.prototype.setBgData=function(e){this.clearBubList(),this.bubbleList=[];var i=t.BgConfig.getBgDataByIndex(e);this.bgData=i,egret.log("背景小组件，图片资源：",i.backGArt,i,"pointList:"),this.bgImg.source=i.backGArt;for(var o=i.pList,n=o.length,s=0;n>s;s++){var r=new eui.Group,a=new BaseParticleObj;a.init(i.bulbGArt),r.addChild(a),a.x=-208,a.y=-300,a.play(),a.touchEnabled=!1,a.touchChildren=!1,r.touchEnabled=!1,r.touchChildren=!1,this.addChild(r),r.x=o[s].dot.x,r.y=o[s].dot.y,this.bubbleList.push(r)}},i.prototype.clearBubList=function(){if(this.bubbleList){for(var t=this.bubbleList.length,e=0;t>e;e++){var i=this.bubbleList[e].removeChildAt(0);i.destroy(),i=null,this.bubbleList[e]=void 0}this.bubbleList.length=0}this.bubbleList=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearBubList(),this.bgData&&(this.bgData=null),this.bgImg&&this.bgImg.parent&&(this.bgImg.parent.removeChild(this.bgImg),this.bgImg=null)},i}(BaseEuiComponent);t.BgUI=e,__reflect(e.prototype,"fishjoy.BgUI")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsAddEvent=!1,e}return __extends(e,t),e.prototype.init=function(){this._mIsAddEvent||(this._mIsAddEvent=!0,App.EffectUtils.addEffectBtn(this.btnWei,this.onWeiTouchTap,this),App.EffectUtils.addEffectBtn(this.btnYi,this.onYiTouchTap,this),App.EffectUtils.addEffectBtn(this.btnLocked,this.onLockedTouchTap,this),this.addEventListener(egret.Event.REMOVED,this.onRemove,this))},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){this.init(),this.btnWei.visible=this.btnLocked.visible=this.btnYi.visible=!1;var e=this.data.isUnLock;this.cannonImg.source=this.data.res,this.cannonLabel.text=this.data.txt,this.lockedImg.visible=!e,this.btnLocked.visible=!e,this.btnWei.visible=e&&!this.data.isCurr,this.btnYi.visible=e&&this.data.isCurr}},e.prototype.onWeiTouchTap=function(t){this.data.isCurr||this.data.onItemTap&&this.data.onItemTap.call(this.data.onThisObj,this.data)},e.prototype.onLockedTouchTap=function(t){},e.prototype.onYiTouchTap=function(t){},e.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED,this.onRemove,this),this.destroy()},e.prototype.destroy=function(){egret.log("ChangeCannonItem destroy.. "),App.EffectUtils.removeEffectBtn(this.btnWei,this.onWeiTouchTap,this),App.EffectUtils.removeEffectBtn(this.btnYi,this.onYiTouchTap,this),App.EffectUtils.removeEffectBtn(this.btnLocked,this.onLockedTouchTap,this),this.data.onItemTap=void 0,this.data.onThisObj=void 0,this.data=void 0,this._mIsAddEvent=!1},e}(eui.ItemRenderer);t.ChangeCannonItem=e,__reflect(e.prototype,"fishjoy.ChangeCannonItem")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","ChangeCannonSkin")||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.initDatass(),this.refreshGameList(),this.changeItem.dataProvider=this._mArrData},i.prototype.initDatass=function(){for(var e=[],i=1;2>=i;i++){var o={};o.id=i,o.res=1==i?"grabfish_ui_gun1":"grabfish_ui_gun5",o.txt=t.TxtPack.getLockTxt(""+(9e3+i)),o.isUnLock=!1,o.isCurr=!1,o.onItemTap=this.onItemTap,o.onThisObj=this,e.push(o)}e[0].isUnLock=!0,e[1].isUnLock=!0,this._mArrData=new eui.ArrayCollection(e)},i.prototype.open=function(t){e.prototype.open.call(this,t);for(var i=Math.floor(t/1e3),o=this._mArrData,n=this._mArrData.length,s=0;n>s;s++){var r=o.getItemAt(s);r.isCurr=r.id==i}egret.log("type",i,"data",t),this._mArrData.refresh(),App.EffectUtils.showView(this),this.changeItem.dataProvider=this._mArrData},i.prototype.refreshListOnChange=function(t){var e=Math.floor(t/1e3);this._mArrData||this.initDatass();for(var i=this._mArrData,o=this._mArrData.length,n=0;o>n;n++){var s=i.getItemAt(n);s.isCurr=s.id==e}egret.log("type",e,"data",t),this._mArrData.refresh(),this.changeItem.dataProvider=this._mArrData},i.prototype.refreshGameList=function(){this.changeItem.itemRenderer=t.ChangeCannonItem,this.changeItem.itemRendererSkinName="resource/games/fishjoy/skins/component/ChangeCannonItemSkin.exml",this.changeScroller.viewport.scrollH=0,this.changeScroller.viewport=this.changeItem},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.mainGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.groupClick,this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandle,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.mainGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.groupClick,this),App.EffectUtils.removeEffectBtn(this.btnClose,this.closeHandle,this)},i.prototype.groupClick=function(t){},i.prototype.onItemTap=function(e){var i=1e3*e.id+1;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i}),egret.log("换炮onItemTap ",e,i)},i.prototype.closeHandle=function(e){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.ChangeCanon)},this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.changeItem.removeChildren())},i}(base.GameView);t.ChangeCannonView=e,__reflect(e.prototype,"fishjoy.ChangeCannonView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","FishJoyGameSkin")||this}return __extends(i,e),i.prototype.getFishLay=function(t,e){var i=e?this.fishTide:this.fishGroup;if(i.numChildren<1)for(var o=0;10>o;o++)i.addChild(new egret.DisplayObjectContainer);return i.getChildAt(Math.floor(t/1e3))},Object.defineProperty(i.prototype,"mFishGroup",{get:function(){return this.fishGroup},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mFishGroupTide",{get:function(){return this.fishTide},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){this.backGroup.touchEnabled=!0,this.backGroup.touchChildren=!1,this.backGroup2.touchEnabled=!1,this.backGroup2.touchChildren=!1,this.fishGroup.touchEnabled=!1,this.fishGroup.touchChildren=!1,this.bulletGroup.touchChildren=!1,this.bulletGroup.touchEnabled=!1,this.effectGroup.touchChildren=!1,this.effectGroup.touchEnabled=!1,this.playerGroup.touchEnabled=!1,this.chatGroup.visible=!1,this.menuGroup.visible=!1;for(var e=1;4>=e;e++)this.getPlayerRender(e).initComponent(this._controller);this.foreBg.initComponent(this._controller),this.foreBg1.initComponent(this._controller),this.changeBg.initComponent(this._controller),this._mTideWave=new t.TideWave,this._mTideWave.init(),this._mWaterMc=new t.WaterMC,this._mWaterMc.init(),this._mWaterMc.alpha=.4,this._mWaterMc.setPosition(App.StageUtils.getWidth()/2,App.StageUtils.getHeight()/2),this.addChildAt(this._mWaterMc,this.getChildIndex(this.backGroup2)+1),this._mWaterMc.play(999999999999),this._mWaterMc.touchEnabled=!1,this._mWaterMc.touchChildren=!1,this.initBroadcast(this)},i.prototype.setTouchEnable=function(t){this.playerGroup.touchChildren=t,this.uiGroup.touchChildren=t},i.prototype.setChatPos=function(t){1==t?(this.chatGroup.x=2,this.btnChat.x=2):2==t&&(this.chatGroup.x=1048,this.btnChat.x=1048)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnYu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYu,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.btnMenu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenu,this),this.btnChat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChat,this),this.menuGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenuGroup,this),this.chatGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroup,this),this.btnAutoShoot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoShoot,this),this.btnLock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockFish,this),App.CommonUtils.effectButton(this.btnExit,this.onGameExit,this);for(var t=1;4>=t;t++)this.getPlayerRender(t).addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnYu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYu,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.btnMenu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenu,this),this.btnChat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChat,this),this.menuGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenuGroup,this),this.chatGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroup,this),this.btnAutoShoot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoShoot,this),this.btnLock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockFish,this),App.CommonUtils.removeButton(this.btnExit);for(var t=1;4>=t;t++)this.getPlayerRender(t).removeEvent()},i.prototype.onAutoShoot=function(t){this.applyFunc("onAutoShoot",this.btnAutoShoot.selected)},i.prototype.onLockFish=function(t){this.applyFunc("onLockFish",this.btnLock.selected)},i.prototype.resetAutoUI=function(){this.btnAutoShoot.selected=!1},i.prototype.resetLockFishBtn=function(){this.btnLock.selected=!1},i.prototype.hideMenu=function(){this.menuGroup.visible=!1},i.prototype.onMenu=function(){this.menuGroup.visible=!this.menuGroup.visible,this.chatGroup.visible=!1},i.prototype.onChat=function(){this.chatGroup.visible=!this.chatGroup.visible,this.hideMenu()},i.prototype.onMenuGroup=function(t){switch(t.target.name){case"btnGuide":this.applyFunc("GuideClickFunc");break;case"btnSetting":this.applyFunc("SettingClickFunc");break;case"btnChangeCannon":this.applyFunc("ChangeCannonClickFunc");break;case"btnhelp":egret.log("帮助按钮点击"),this.applyFunc("HelpClickFunc");break;case"btnChat":this.chatGroup.visible=!this.chatGroup.visible}},i.prototype.onGameExit=function(){this.onBack()},i.prototype.onChatGroup=function(e){var i,o;i=e.target.name,o=i.split("_"),egret.log("聊天选择条点击，index="+o[1]),this.applyFunc(t.FishConst.PLAYER_CHAT,o[1]),this.chatGroup.visible=!1},i.prototype.getPlayerRender=function(t){var e=this;return e["player"+(t-1)]},i.prototype.onBack=function(){this.applyFunc(t.FishConst.CLICKBACKROOM)},i.prototype.onTouchBegin=function(t){this.setTouchEnable(!1),this.applyFunc("onTouchBegin",t.localX,t.localY)},i.prototype.onTouchEnd=function(t){this.setTouchEnable(!0),this.applyFunc("onTouchEnd",t.localX,t.localY)},i.prototype.onTouchMove=function(t){this.applyFunc("onTouchMove",t.localX,t.localY)},i.prototype.onBtnYu=function(e){t.FishConst.mIsShowFishHit=!t.FishConst.mIsShowFishHit,this.txtShowHit.text=t.FishConst.mIsShowFishHit?"关闭显示碰撞区域":"打开显示碰撞区域",this.applyFunc("onBtnYu"),lobby.BroadcastView.testPlay()},i.prototype.onBtnPaoRemove=function(t){this.applyFunc("onBtnPaoRemove")},i.prototype.onBtnPaoAdd=function(t){this.applyFunc("onBtnPaoAdd")},i.prototype.playTideWave=function(e){this._mTideWave.parent||this.effectGroup.addChild(this._mTideWave),this._mTideWave.addEventListener(t.TideWave.WAVE_START,this.waveStart,this),this._mTideWave.addEventListener(t.TideWave.WAVE_MOVE,this.waveMove,this),this._mTideWave.addEventListener(egret.Event.COMPLETE,this.waveEnd,this),this._mTideWave.play(e)},i.prototype.waveEnd=function(e){this._mTideWave&&(this._mTideWave.removeEventListener(t.TideWave.WAVE_START,this.waveStart,this),this._mTideWave.removeEventListener(t.TideWave.WAVE_MOVE,this.waveMove,this),this._mTideWave.removeEventListener(egret.Event.COMPLETE,this.waveEnd,this)),this.applyFunc("waveEnd")},i.prototype.waveStart=function(t){this.applyFunc("screenshots")},i.prototype.waveMove=function(t){this.applyFunc("changeBgPos",t.data)},i.prototype.removeTideWave=function(){this._mTideWave&&(this._mTideWave.destroy(),this._mTideWave=void 0)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeTideWave(),this.fishGroup.removeChildren(),this._mWaterMc&&(this._mWaterMc.removeFormParent(),this._mWaterMc.destroy()),Log.trace("销毁 fishjoy.GameView"))},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"fishjoy.GameView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GuideItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.cannonImg.source=this.data.FishUI,this.labelGold.text="+ "+CommonUtils.getInstance().money2StrTwo(this.data.FishValue*t.FishUtil.mFishBaseMultiple))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i}(eui.ItemRenderer);t.GuideItem=e,__reflect(e.prototype,"fishjoy.GuideItem")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","GuideSkin")||this}return __extends(i,e),i.prototype.open=function(){e.prototype.open.call(this);var i=t.TxtPack.getExplainTxt("90014");this.tips_lable.text=i,this.refreshGameList(),App.EffectUtils.showView(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandle,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnClose)},i.prototype.refreshGameList=function(){var e=RES.getRes("fish_json"),i=new eui.ArrayCollection;for(var o in e)i.addItem(e[o]);this.guideList.itemRenderer=t.GuideItem,this.guideList.dataProvider=i,this.guideScorller.viewport.scrollH=0,this.guideScorller.viewport=this.guideList},i.prototype.closeHandle=function(){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.Guide)},this)},i}(base.GameView);t.GuideView=e,__reflect(e.prototype,"fishjoy.GuideView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"fishjoy","SettingSkin")||this;return i.vMultiple=100,i}return __extends(i,e),i.prototype.initUI=function(){},i.prototype.open=function(){e.prototype.open.call(this),this.initSet(),App.EffectUtils.showView(this)},i.prototype.initSet=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0),this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=this.vMultiple,this.VoiceSlider.value=App.SoundManager.getEffectVolume()*this.vMultiple,this.MusicSlider.minimum=0,this.MusicSlider.maximum=this.vMultiple,this.MusicSlider.value=App.SoundManager.getBgVolume()*this.vMultiple},i.prototype.addEvent=function(){this.mainGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mainGroupClick,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btn_musicOff.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_musicOn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOff.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this)},i.prototype.removeEvent=function(){this.mainGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mainGroupClick,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this),this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btn_musicOff.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_musicOn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOff.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this)},i.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/this.vMultiple,App.SoundManager.setEffectVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/this.vMultiple,App.SoundManager.setBgVolume(e)}},i.prototype.onOpen=function(t){switch(t.currentTarget){case this.btn_musicOff:App.SoundManager.setBgOn(!1),this.voiceHandler(0,!1);break;case this.btn_musicOn:App.SoundManager.setBgOn(!0),this.voiceHandler(100,!1);break;case this.btn_soundOff:App.SoundManager.setEffectOn(!1),this.voiceHandler(0,!0);break;case this.btn_soundOn:App.SoundManager.setEffectOn(!0),this.voiceHandler(100,!0)}},i.prototype.voiceHandler=function(t,e){e?(this.VoiceSlider.value=t,App.SoundManager.setEffectVolume(t/this.vMultiple)):(this.MusicSlider.value=t,App.SoundManager.setBgVolume(t/this.vMultiple))},i.prototype.mainGroupClick=function(t){},i.prototype.closeHandle=function(e){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.Setting)},this)},i}(base.GameView);t.SettingView=e,__reflect(e.prototype,"fishjoy.SettingView")}(fishjoy||(fishjoy={}));var hhdz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.hhdz=i,__reflect(i.prototype,"hhdz.Entrance.hhdz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,-1),this.setState(e.ACTION_WASH),App.SoundManager.playEffect("cardwash_mp3")},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:-270,scaleX:.5,scaleY:.5},400,egret.Ease.sineInOut).call(function(){this.alpha=0,this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)}.bind(this))},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.prototype.die=function(){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"hhdz.Shuffle")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"BetBtn")||this;return i.coinBox=[],i.winpos=[],i.allChipList=[],i}return __extends(i,e),i.prototype.betBlack=function(){this.applyFunc("bet",1),App.SoundManager.playEffect("click_mp3")},i.prototype.betRed=function(){this.applyFunc("bet",0),App.SoundManager.playEffect("click_mp3")},i.prototype.betLucky=function(){this.applyFunc("bet",2),App.SoundManager.playEffect("click_mp3")},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.showBetMoney=function(e){this.TotalBetRed.text=e[t.PlaceConst.RED]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])):"",this.TotalBetBlack.text=e[t.PlaceConst.BLACK]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])):"",this.TotalBetLucky.text=e[t.PlaceConst.LUCKY]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY])):"";for(var i=0;i<e.length;i++)e[i]&&(this["isBet_"+i]=!0,this.showCoin(i,App.CommonUtils.money(e[i])))},i.prototype.showCoin=function(e,i){var o=t.Application.getNumObj(i),n=Object.keys(o),s=1==e?this.CoinBoxBlack1:0==e?this.CoinBoxRed1:this.CoinBoxLucky1,r=1==e?this.CoinBoxBlack2:0==e?this.CoinBoxRed2:this.CoinBoxLucky2,a=1==e?this.CoinBoxBlack3:0==e?this.CoinBoxRed3:this.CoinBoxLucky3;
this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0)},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_t100000_png",n=1e5;break;case"w":s="common_ui_4_png",n=1e4;break;case"q":s="common_ui_8_png",n=1e3;break;case"b":s="common_ui_6_png",n=100;break;case"s":s="common_ui_3_png",n=10;break;case"g":s="common_ui_0_png",n=1}for(var r=0,a=-60,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(this.randomNum()>.65){var i=this.randomNum();h=i>.5?2:-2}else h=0;egret.Tween.get(l[e]).wait(150*e).to({y:o._currentY,x:h},150,egret.Ease.sineInOut),function(t){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[t].alpha=1},this,150*t)}(e),o._currentY-=5}.bind(this))},i.prototype.randomNum=function(){return Math.random()},i.prototype.coinFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];egret.Tween.get(o).to({alpha:0},120)}}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];o.alpha=1}}.bind(this))},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.createWinChip=function(e,i){var o=e==t.PlaceConst.BLACK?"Black":e==t.PlaceConst.RED?"Red":"Lucky";if(this["isBet_"+e]){var n=this["BetBox"+o],s=this["ChipPos"+e],r=void 0,a=void 0;r=App.StageUtils.getWidth()/2+s.horizontalCenter,a=App.StageUtils.getHeight()-s.bottom-s.height;for(var h=this.winpos[i],l=this.GroupChip.globalToLocal(h.x,h.y),p=0;5>p;p++){var c=App.MathUtils.random(0,n.width),u=App.MathUtils.random(0,n.height),d=common.chipBtn.create();d.init(p),d.setNameNum(i);var m=Math.floor(r+c),y=Math.floor(a+u),_=Math.floor(l.x),g=Math.floor(l.y);this.GroupChip.addChild(d),d.x=n.x+n.width/2,d.y=n.y+n.height/2,d.scaleX=.5,d.scaleY=.5,d.alpha=0,d.setScore(),d.setFlyX(m),d.setFlyY(y),d.setFlyChipX(_),d.setFlyChipY(g),this.allChipList.push(d)}}},i.prototype.betToPlaceAni=function(t,e,i){for(var o=String(App.CommonUtils.money(i)),n=this.createChip(o),s=Number(o[0]),r=0;s>r;r++){var a=common.chipBtn.create(),h=this.winpos[t],l=this.GroupChip.globalToLocal(h.x,h.y);this.GroupChip.addChild(a),a.init(n),a.scaleX=.5,a.scaleY=.5,a.x=l.x,a.y=l.y;var p=this["BetPoint_"+e];a.setFlyChipX(p.x),a.setFlyChipY(p.y),a.moveToPlace(50*r)}},i.prototype.createChip=function(t){var e,i=[0,3,6,8,4];return e=i[t.length-1]},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()})},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.clearCoin=function(){for(var t=1;4>t;t++)this.removeCoins(this["CoinBoxBlack"+t]),this.removeCoins(this["CoinBoxRed"+t]),this.removeCoins(this["CoinBoxLucky"+t]);this.isBet_0=!1,this.isBet_1=!1,this.isBet_2=!1,this.TotalBetBlack.text="",this.TotalBetRed.text="",this.TotalBetLucky.text="",this.MyBetBlack.text="",this.MyBetRed.text="",this.MyBetLucky.text="",this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,150)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.showMyPreBet=function(e){this.MyPreBetRed.text=e[t.PlaceConst.RED]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])):"",this.MyPreBetBlack.text=e[t.PlaceConst.BLACK]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])):"",this.MyPreBetLucky.text=e[t.PlaceConst.LUCKY]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY])):""},i.prototype.showSelfBet=function(e){this.MyBetRed.text=e[t.PlaceConst.RED]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])):"",this.MyBetBlack.text=e[t.PlaceConst.BLACK]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])):"",this.MyBetLucky.text=e[t.PlaceConst.LUCKY]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY])):""},i.prototype.clearPreBet=function(){this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){this.StarPos_0.visible=!1,this.StarPos_1.visible=!1,this.StarPos_2.visible=!1},i.prototype.hideTableLight=function(){this.TouchBlack.alpha=0,this.TouchRed.alpha=0,this.TouchLucky.alpha=0},i.prototype.showTableLight=function(e){e.forEach(function(e){var i=e==t.PlaceConst.RED?"Red":e==t.PlaceConst.BLACK?"Black":"Lucky",o=this["Touch"+i];egret.Tween.get(o).wait(0).to({alpha:1},0),egret.Tween.get(o).wait(100).to({alpha:.7},400),egret.Tween.get(o).wait(550).to({alpha:1},0),egret.Tween.get(o).wait(650).to({alpha:.7},400),egret.Tween.get(o).wait(1050).to({alpha:1},0)}.bind(this))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.TouchBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.removeEvent=function(){this.TouchBlack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearFlyWinChip(),this.coinBox=void 0,this.winpos=void 0,this.allChipList=void 0},i}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"hhdz.BetBox")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initComponent=function(e){t.prototype.initComponent.call(this,e),this.JeButton.initComponent(e),this._LogicBtn=new common.LoginBtn(null),this._LogicBtn.initComponent(e,this),this._LogicBtn.bottom=this._LogicBtn.right=0},e.prototype.open=function(){this._LogicBtn.open()},e.prototype.serJeButtonData=function(t){this.JeButton.createChip(t),this.setchipValue(1)},e.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},Object.defineProperty(e.prototype,"LogicBtn",{get:function(){return this._LogicBtn},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this._LogicBtn.destroy(),this._LogicBtn=void 0)},e}(BaseEuiComponent);t.BottomView=e,__reflect(e.prototype,"hhdz.BottomView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardSkin")||this;return t.WAIT_CARD_TIME=350,t.blackList=[],t.redList=[],t}return __extends(i,e),i.prototype.clearCard=function(){var t=this;this.blackList&&this.blackList.length&&(this.blackList.forEach(function(e){t.GroupCardBlack.removeChild(e)}),this.blackList.length=0),this.redList&&this.redList.length&&(this.redList.forEach(function(e){t.GroupCardRed.removeChild(e)}),this.redList.length=0),this.CardTypeBlack.alpha=0,this.CardTypeRed.alpha=0},i.prototype.dealCard=function(e){this.initPoint();for(var i=0;6>i;i++){var o=new eui.Image;o.source="common_ui_cardback_png",o.scaleX=.5,o.scaleY=.5,3>i?(o.x=this.blackPoint.x,o.y=this.blackPoint.y,this.GroupCardBlack.addChild(o),this.blackList.push(o)):(o.x=this.redPoint.x,o.y=this.redPoint.y,this.GroupCardRed.addChild(o),this.redList.push(o))}e?(t.Application.dealCard(this.blackList,this.blackPoints,this.WAIT_CARD_TIME),App.TimerManager.doTimer(this.WAIT_CARD_TIME/2,1,this.dealRed,this)):(t.Application.showCard(this.blackList,this.blackPoints),t.Application.showCard(this.redList,this.redPoints))},i.prototype.dealRed=function(){t.Application.dealCard(this.redList,this.redPoints,this.WAIT_CARD_TIME)},i.prototype.opencard=function(e,i,o){var n="black"==i?this.blackList:"red"==i?this.redList:"";o?t.Application.openCard(e,n,this.WAIT_CARD_TIME):t.Application.openCardInstant(e,n)},i.prototype.showCardType=function(t,e){var i="black"==t?this.CardTypeBlack:"red"==t?this.CardTypeRed:"",o="black"==t?this.CardTypeSourceBlack:this.CardTypeSourceRed,n=0==e?"single_mp3":1==e?"pairs_mp3":2==e?"straight_mp3":3==e?"gold_flower_mp3":4==e?"straight_gold_mp3":"panther_mp3";o.source=0==e?"ui_card_type_json.redblank-ui-danzhang":1==e?"ui_card_type_json.redblank-ui-duizi":2==e?"ui_card_type_json.redblank-ui-shunzi":3==e?"ui_card_type_json.redblank-ui-jinhua":4==e?"ui_card_type_json.redblank-ui-shunjin":"ui_card_type_json.redblank-ui-baozi",App.SoundManager.playEffect(n),egret.Tween.get(i).to({alpha:1},200,egret.Ease.sineInOut)},i.prototype.showWinner=function(t){this.WinnerBox.scaleX=0,this.WinnerBox.scaleY=0,this.WinnerBox.alpha=1,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0),egret.Tween.get(this.WinnerBox).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},i.prototype.showWinnerPromp=function(t){this.WinnerBox.scaleX=1,this.WinnerBox.scaleY=1,this.WinnerBox.alpha=0,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0)},i.prototype.hideWinner=function(){this.WinnerBox.alpha=0},i.prototype.initPoint=function(){var e=this.GroupDeal.localToGlobal(this.GroupDeal.getChildAt(0).x,this.GroupDeal.getChildAt(0).y);this.blackPoint=this.GroupCardBlack.globalToLocal(e.x,e.y),this.redPoint=this.GroupCardRed.globalToLocal(e.x,e.y),this.blackPoints=t.Application.getPoints(this.GroupCardBlack),this.redPoints=t.Application.getPoints(this.GroupCardRed)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.remove(this.dealRed,this),this.clearCard(),this.blackList=void 0,this.redList=void 0,this.blackPoint=void 0,this.redPoint=void 0,this.blackPoints=void 0,this.redPoints=void 0},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"hhdz.CardView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ChartSkin")||this;return i.isOpen=!1,i.record=[],i.detailRecord=[],i}return __extends(i,e),i.prototype.showChart=function(e){this.record.length=0,this.record=JSON.parse(JSON.stringify(e)),this.record.compare_values.length>20&&this.record.compare_values.splice(0,this.record.compare_values.length-20),this.record.open_types.length>10&&this.record.open_types.splice(0,this.record.open_types.length-10),this.CompareBox.removeChildren(),this.OpenTypeBox.removeChildren(),this.OpenTypeTextBox.removeChildren();var i=2,o=0,n=0,s=0,r=8,a=1;this.record.compare_values.forEach(function(t){var e=new eui.Image;e.x=i,e.y=o,e.source=1==t?"ui_card_type_json.redblank-ui-liangxing":"ui_card_type_json.redblank-ui-huixing",i+=27,this.CompareBox.addChild(e)}.bind(this)),this.record.open_types.forEach(function(e){var i=new eui.Image;i.x=n,i.y=s,i.source=0==e?"redblank-ui-1_png":"redblank-ui-2_png",this.OpenTypeBox.addChild(i);var o=new eui.Label;o.fontFamily="Microsoft YaHei",o.size=16,o.x=r,o.y=a,o.text=t.CardTypeTxt.TypeTxt_LIST[e],this.OpenTypeTextBox.addChild(o),n+=54,r+=54}.bind(this))},i.prototype.toggleApproach=function(){this.isOpen=this.isOpen?!1:!0,this.isOpen?this.openApproach():this.closeApproach()},i.prototype.renderChartDetail=function(t){this.detailRecord.length=0,this.winRedCount=0,this.winBlackCount=0,this.allCount=0;for(var e=0;e<t.length;e++)this.detailRecord[e]=1==t[e]?0:1;this.detailRecord.length&&(this.detailRecord.length>50&&this.detailRecord.splice(0,50),this.detailRecord.forEach(function(t){0==t?this.winRedCount+=1:this.winBlackCount+=1}.bind(this)),this.allCount=this.detailRecord.length,this.setWinCountRed(this.winRedCount),this.setWinCountBlack(this.winBlackCount),this.setCountAll(this.allCount),this.ChartBead.renderBead(this.detailRecord,"hhdz"),this.ChartOther.renderOtherChart(this.detailRecord,"hhdz"))},i.prototype.setWinCountRed=function(t){this.CountRed.text=t},i.prototype.setWinCountBlack=function(t){this.CountBlack.text=t},i.prototype.setCountAll=function(t){this.CountAll.text=t},i.prototype.openApproach=function(){egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut)},i.prototype.closeApproach=function(){egret.Tween.get(this.GroupChart).to({right:-260},200,egret.Ease.sineInOut)},i.prototype.hideApproach=function(){this.GroupChart.right=-260},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleApproach,this)},i.prototype.removeEvent=function(){this.BtnChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleApproach,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.record=void 0,this.detailRecord=void 0,this.removeEvent()},i}(BaseEuiComponent);t.Chart=e,__reflect(e.prototype,"hhdz.Chart")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HhdzHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1})},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"hhdz.Help")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,"TimeClockSkin")||this;return console.log(e),i}return __extends(e,t),e.prototype.showTime=function(t){this._currentSecond=t.time,this._currentStatus=t.status,2!=this._currentStatus?this.GroupClock.alpha=1:this.GroupClock.alpha=0,t.time>0&&(this.TimeLbL.text=t.time,this.GameStatus.text=0==t.status?"发牌中":1==t.status?"下注中":"等待中",App.TimerManager.doTimer(500,0,this.timerFunc,this))},e.prototype.timerFunc=function(){if(this._currentSecond>.5){if(2==this._currentStatus)switch(this._currentSecond){case 10:this.applyFunc("openBlackCard");break;case 8.5:this.applyFunc("openRedCard");break;case 6.5:this.applyFunc("showWinner");break;case 4:this.applyFunc("hideCard"),this.GroupClock.alpha=1}this._currentSecond-=.5}else App.TimerManager.remove(this.timerFunc,this),this.GroupClock.alpha=0;this._currentSecond>0&&this._currentSecond%1===0&&(this.TimeLbL.text=""+this._currentSecond,1==this._currentStatus&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+"",this._currentSecond<4&&this.numShake()))},e.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},e.prototype.removeTime=function(){App.TimerManager.remove(this.timerFunc,this),this.GroupClock.alpha=0},e.prototype.hideTime=function(){this.GroupClock.alpha=0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeTime()},e}(BaseEuiComponent);t.TimeClockView=e,__reflect(e.prototype,"hhdz.TimeClockView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,"WinPopupSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.showWinPopup=function(t){this.visible=!0,this.winGroup.alpha=0,this.winMoney.text="+"+t,egret.Tween.get(this.winGroup).to({alpha:1},300,egret.Ease.sineInOut),App.TimerManager.doTimer(2e3,1,function(){egret.Tween.get(this.winGroup).to({alpha:0},300,egret.Ease.sineInOut).call(function(){this.visible=!1}.bind(this))}.bind(this),this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.WinPopup=e,__reflect(e.prototype,"hhdz.WinPopup")}(hhdz||(hhdz={}));var hhdz;!function(t){var e;!function(t){t[t.Base=1400]="Base",t[t.Popup=1401]="Popup",t[t.Recharge=1402]="Recharge"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.LEAVE_GAME=10104]="LEAVE_GAME",t[t.LEAVE_GAME_R=10105]="LEAVE_GAME_R",t[t.ONLINE_COUNT_R=10402]="ONLINE_COUNT_R",t[t.ISSUE_N=10403]="ISSUE_N",t[t.GAME_STATE_R=10404]="GAME_STATE_R",t[t.LIMIT_N=10405]="LIMIT_N",t[t.ME_BET=10406]="ME_BET",t[t.ME_BET_R=10407]="ME_BET_R",t[t.PLAYER_BET_R=10408]="PLAYER_BET_R",t[t.GAME_BET_R=10409]="GAME_BET_R",t[t.GAME_RESULT_R=10410]="GAME_RESULT_R",t[t.EXCHANGE_R=10411]="EXCHANGE_R",t[t.CHART_R=10412]="CHART_R",t[t.RANKING=10415]="RANKING",t[t.RANKING_R=10416]="RANKING_R",t[t.SPECIAL_PLAYER_N=10419]="SPECIAL_PLAYER_N",t[t.BET_ACTION_N=10420]="BET_ACTION_N",t[t.CHIPS_RECORD_Q=10421]="CHIPS_RECORD_Q",t[t.CHIPS_RECORD_R=10422]="CHIPS_RECORD_R"}(i=t.ProxyConst||(t.ProxyConst={}));var o;!function(t){t[t.onGameStateCallBack=1001]="onGameStateCallBack",t[t.onChartCallBack=1002]="onChartCallBack",t[t.onGameResultCallBack=1003]="onGameResultCallBack",t[t.onOnlineCountCallBack=1004]="onOnlineCountCallBack",t[t.onPlayerBetCallBack=1005]="onPlayerBetCallBack",t[t.onSelfBetCallBack=1006]="onSelfBetCallBack",t[t.onGameBetCallBack=1007]="onGameBetCallBack",t[t.onExchangeCallBack=1008]="onExchangeCallBack",t[t.onRankingCallBack=1009]="onRankingCallBack",t[t.onWinningRecordCallBack=1010]="onWinningRecordCallBack",t[t.onLeaveGameCallBack=1011]="onLeaveGameCallBack",t[t.onBetActionCallBack=1012]="onBetActionCallBack",t[t.onSpecialPlayerCallBack=1013]="onSpecialPlayerCallBack",t[t.onChipsRecordCallBack=1014]="onChipsRecordCallBack",t[t.dealCard=1015]="dealCard"}(o=t.CallBacks||(t.CallBacks={}));var n;!function(t){t[t.DEALING=1]="DEALING",t[t.BETTING=2]="BETTING",t[t.EXCHANGE=3]="EXCHANGE"}(n=t.GameState||(t.GameState={}));var s;!function(t){t[t.RED=0]="RED",t[t.BLACK=1]="BLACK",t[t.LUCKY=2]="LUCKY"}(s=t.PlaceConst||(t.PlaceConst={}));var r;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(r=t.PlayerConst||(t.PlayerConst={}));var a=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额未达到最低限红","不在下注状态","超出单人最高限红","超出该投注区域最高限红","没有足够的余额"],t}();t.CodeErrorTxt=a,__reflect(a.prototype,"hhdz.CodeErrorTxt");var h=function(){function t(){}return t.TypeTxt_LIST=["单 张","对 子","顺 子","金 花","顺 金","豹 子"],t}();t.CardTypeTxt=h,__reflect(h.prototype,"hhdz.CardTypeTxt");var l=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"HHDZcounter_pick1",COUNTER_PICK5:"HHDZcounter_pick5",COUNTER_PICK10:"HHDZcounter_pick10",COUNTER_PICK20:"HHDZcounter_pick20",COUNTER_PICK50:"HHDZcounter_pick50",COUNTER_PICK100:"HHDZcounter_pick100",COUNTER_PICK200:"HHDZcounter_pick200",COUNTER_PICK500:"HHDZcounter_pick500",COUNTER_PICK1000:"HHDZcounter_pick1000",COUNTER_PICK0:"HHDZcounter_pickAllin",COUNTER_BET1:"HHDZcounter_bet1",COUNTER_BET5:"HHDZcounter_bet5",COUNTER_BET10:"HHDZcounter_bet10",COUNTER_BET20:"HHDZcounter_bet20",COUNTER_BET50:"HHDZcounter_bet50",COUNTER_BET100:"HHDZcounter_bet100",COUNTER_BET200:"HHDZcounter_bet200",COUNTER_BET500:"HHDZcounter_bet500",COUNTER_BET1000:"HHDZcounter_bet1000",COUNTER_BET0:"HHDZcounter_betallin",OPERATE_BUTTONCANCEL:"HHDZoperate_buttoncancel",OPERATE_BUTTONREPEAT:"HHDZoperate_buttonrepeat",OPERATE_BUTTONCONFIRM:"HHDZoperate_buttonconfirm",OPERATE_AUTOCONFIRM:"HHDZoperate_autoconfirm",OPERATE_SETCOUNTER:"HHDZoperate_setcounter",OPERATE_ADDCOUNTER:"HHDZoperate_addcounter",BETS_0:"HHDZbets_red",BETS_1:"HHDZbets_black",BETS_2:"HHDZbets_luck",DIRECT_MAPS:"HHDZdirect_maps",LEADERBOARD_BUTTON:"HHDZleaderboard_button",MENU_BUTTON:"HHDZmenu_button",MENU_HELP_BUTTON:"HHDZmenu_help_button",MENU_SET_BUTTON:"HHDZmenu_set_button",MENU_RECORD_BUTTON:"HHDZmenu_record_button",MENU_BACK_BUTTON:"HHDZmenu_back_button"},t}();t.PointConst=l,__reflect(l.prototype,"hhdz.PointConst")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._mTempMultiple=1,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.addListeners(),this.addEventListeners(),this.addDataListeners(),this.registers(),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._hhdzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._hhdzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this),this._rechargeView=new lobby.RechargeView(this,LayerManager.UI_Message)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),App.ViewManager.register(t.ViewConst.Recharge,this._rechargeView)},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("clearTable",this.clearTable,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("openBlackCard",this.openBlackCard,this),this.registerFunc("openRedCard",this.openRedCard,this),this.registerFunc("showWinner",this.showWinner,this),this.registerFunc("hideCard",this.hideCard,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc(t.CallBacks.onGameStateCallBack,this.onGameStateCallBack,this),this.registerFunc(t.CallBacks.onChartCallBack,this.onChartCallBack,this),this.registerFunc(t.CallBacks.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.CallBacks.onOnlineCountCallBack,this.onOnlineCountCallBack,this),this.registerFunc(t.CallBacks.onPlayerBetCallBack,this.onPlayerBetCallBack,this),this.registerFunc(t.CallBacks.onBetActionCallBack,this.onBetActionCallBack,this),this.registerFunc(t.CallBacks.onSelfBetCallBack,this.onSelfBetCallBack,this),this.registerFunc(t.CallBacks.onGameBetCallBack,this.onGameBetCallBack,this),this.registerFunc(t.CallBacks.onExchangeCallBack,this.onExchangeCallBack,this),this.registerFunc(t.CallBacks.onRankingCallBack,this.onRankingCallBack,this),this.registerFunc(t.CallBacks.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.CallBacks.onChipsRecordCallBack,this.onChipsRecordCallBack,this),this.registerFunc(t.CallBacks.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(t.CallBacks.dealCard,this.dealCard,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.addDataListeners=function(){this._hhdzModel.selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("bg_mp3"),this.initUserInfo()},i.prototype.initJebutton=function(){this._view.Bottom.serJeButtonData(this._hhdzModel.chipArr),this._popView.getChipSetView().setDefaultChip(this._hhdzModel.chipArr),this.selBtnIndexCallBack()},i.prototype.initUserInfo=function(){var e=GamePlayerMgr.i.getPlayer();this._view.MessageInfo.setUserName(e.getNickName()),this._hhdzModel.playerMoneys[t.PlayerConst.SELF]=App.CommonUtils.money(e.getMoney()),this._hhdzModel.playerIds[t.PlayerConst.SELF]=e.getUserId(),this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.getMoney())),this._view.MessageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view.MessageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox())},i.prototype.onGameStateCallBack=function(e){var i=this.resetTime(e);switch(this._hhdzModel.isDeal=!1,this._view.TimeClock.removeTime(),e.state){case t.GameState.DEALING:this.dealing(i);break;case t.GameState.BETTING:this.betting(i);break;case t.GameState.EXCHANGE:this.exchanging(i)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:-1};return o},i.prototype.dealing=function(t){t.status=0,this.hideCard(),this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._view.BetBox.clearCoin(),this._hhdzModel.isBet=1,t.time==t.allTime?this._hhdzModel.isDeal||this._view.shuffleAni():(this._hhdzModel.isDeal||(this._view.CardView.dealCard(!1),this._hhdzModel.isDeal=!0),this._view.TimeClock.showTime(t))},i.prototype.dealCard=function(){this._hhdzModel.isDeal||(this._view.CardView.dealCard(!0),this._hhdzModel.isDeal=!0)},i.prototype.betting=function(t){this.hideCard(),t.status=1,this._hhdzModel.betTimes++,this._view.TimeClock.showTime(t),this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._hhdzModel.isDeal||(this._view.CardView.dealCard(!1),this._hhdzModel.isDeal=!0),this._view.BetBox.initCoinBox(),this.enabledBtn(),this._hhdzModel.isBet=2,t.time==t.allTime&&(this._view.BetAnimation.playAni(0),App.SoundManager.playEffect("start_mp3"))},i.prototype.exchanging=function(t){t.status=2,this._hhdzModel.rewardTimeDif=t.allTime-t.time,this._view.TimeClock.showTime(t),this._view.CardView.hideWinner(),this.disabledBtn(),this._hhdzModel.isBet=1,this._view.CardView.clearCard(),this._hhdzModel.isDeal||(this._view.CardView.dealCard(!1),this._hhdzModel.isDeal=!0),t.time==t.allTime&&(this._view.BetAnimation.playAni(1),App.SoundManager.playEffect("stop_mp3"))},i.prototype.disabledBtn=function(){this._view.Bottom.LogicBtn.disabledRepeatBet(),this._view.Bottom.LogicBtn.disabledConfirmBet(),this._view.Bottom.LogicBtn.disabledConserBet()},i.prototype.enabledBtn=function(){this._view.Bottom.LogicBtn.enabledRepeatBet(),this._view.Bottom.LogicBtn.enabledConfirmBet(),this._view.Bottom.LogicBtn.enabledConserBet()},i.prototype.onChartCallBack=function(t){t.compare_values.length&&t.compare_values.forEach(function(t){this._hhdzModel.historyRecord.compare_values.push(t)}.bind(this)),t.open_types.length&&t.open_types.forEach(function(t){this._hhdzModel.historyRecord.open_types.push(t)}.bind(this)),this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail()},i.prototype.renderChartDetail=function(){this._hhdzModel.historyRecord.compare_values.length&&this._view.renderChartDetail(this._hhdzModel.historyRecord.compare_values)},i.prototype.onGameResultCallBack=function(e){if(this._hhdzModel.gameResult=e,this._hhdzModel.winPos.length=0,e.place_results.forEach(function(e){e.is_hit&&(this._hhdzModel.winPos.push(e.place),this._view.createWinChip(e.place,t.PlayerConst.ONLINE))}.bind(this)),this._hhdzModel.betTimes){var i=e.compare_value;this._hhdzModel.historyRecord.compare_values.push(i);var o=e.red_open_type>e.black_open_type?e.red_open_type:e.black_open_type;this._hhdzModel.historyRecord.open_types.push(o),this._hhdzModel.historyRecord.compare_values.length>70&&this._hhdzModel.historyRecord.compare_values.splice(0,50)}this._hhdzModel.rewardTimeDif&&(this._hhdzModel.rewardTimeDif<2?(this._view.CardView.opencard(e.black_cards,"black",!1),this._view.CardView.showCardType("black",e.black_open_type)):this._hhdzModel.rewardTimeDif<4?(this._view.CardView.opencard(e.black_cards,"black",!1),this._view.CardView.showCardType("black",e.black_open_type),this._view.CardView.opencard(e.red_cards,"red",!1),this._view.CardView.showCardType("red",e.red_open_type)):this._hhdzModel.rewardTimeDif<6?(this._view.CardView.opencard(e.black_cards,"black",!1),this._view.CardView.showCardType("black",e.black_open_type),this._view.CardView.opencard(e.red_cards,"red",!1),this._view.CardView.showCardType("red",e.red_open_type),this._view.CardView.showWinnerPromp(e.compare_value)):(this.hideCard(),this._view.TimeClock.GroupClock.alpha=1))},i.prototype.onOnlineCountCallBack=function(t){this._view.ToolBar.changeOnlineNum(t.online_count)},i.prototype.onSelfBetCallBack=function(e){return e.code?void App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[e.code]):(this._hhdzModel.hasBet=!0,this.resetPerBet(),void this.betPoints())},i.prototype.onPlayerBetCallBack=function(e){if(e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var i=0;e.infos.forEach(function(t){i+=t.bet_money,this._hhdzModel.betList[t.place]=t.bet_money}.bind(this)),this._view.BetBox.showSelfBet(this._hhdzModel.betList),this._view.MessageInfo.setUserBet(App.CommonUtils.money(i))}},i.prototype.onBetActionCallBack=function(e){var i=this._hhdzModel.playerIds;i.forEach(function(i,o){e.user_id==i&&(this._hhdzModel.playerMoneys[o]=App.CommonUtils.money(e.balance),e.bets.forEach(function(t){this._view.betToPlaceAni(o,t.place,t.bet_money)}.bind(this)),o==t.PlayerConst.SELF?this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.balance)):(this._view.avatarShake(o),this._view.specialPlayerMoney(App.CommonUtils.money(e.balance),o)),o==t.PlayerConst.PSYCHIC&&e.bets.forEach(function(t){this._view.starFly(t.place)
}.bind(this)))}.bind(this))},i.prototype.onGameBetCallBack=function(e){e.infos.forEach(function(e,i){var o=e.total_bet_money-this._hhdzModel.allBetList[e.place];this._view.betToPlaceAni(t.PlayerConst.ONLINE,e.place,o),this._hhdzModel.allBetList[e.place]=e.total_bet_money}.bind(this)),this._view.BetBox.showBetMoney(this._hhdzModel.allBetList)},i.prototype.onExchangeCallBack=function(e){this._hhdzModel.hasBet&&(this._hhdzModel.lastBetRecord.length=0),this.resetWinMoney(),this._hhdzModel.winPlayer.length=0,e.infos.length&&e.infos.forEach(function(e){e.place_exchanges.length&&e.place_exchanges.forEach(function(i){if(i.prize_money&&this.createWinChip(i.place,e.user_id,i.prize_money),e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var o={place:i.place,bet_money:i.bet_money};this._hhdzModel.lastBetRecord.push(o)}}.bind(this)),this.createMoney(e)}.bind(this))},i.prototype.createWinChip=function(t,e,i){var o=this._hhdzModel.playerIds;o.forEach(function(o,n){e==o&&(this._view.createWinChip(t,n),-1==this._hhdzModel.winPlayer.indexOf(n)&&this._hhdzModel.winPlayer.push(n),this._hhdzModel.winMoneys[n]+=App.CommonUtils.money(i))}.bind(this))},i.prototype.resetWinMoney=function(){for(var t=0;t<this._hhdzModel.winMoneys.length;t++)this._hhdzModel.winMoneys[t]=0},i.prototype.createMoney=function(t){var e=this._hhdzModel.playerIds;e.forEach(function(e,i){e==t.user_id&&(this._hhdzModel.playerMoneys[i]=App.CommonUtils.money(t.balance)),this._hhdzModel.winMoneys[i]&&this._view.MessageInfo.playerWinMoney(this._hhdzModel.winMoneys[i],i)}.bind(this))},i.prototype.onRankingCallBack=function(t){t.infos.length>0&&this._popView.Ranking.rankData(t.infos)},i.prototype.onSpecialPlayerCallBack=function(t){t.special_players&&t.special_players.forEach(function(t){this._hhdzModel.playerIds[t.play_role]=t.user_id,this._hhdzModel.playerMoneys[t.play_role]=App.CommonUtils.money(t.balance),this._view.setPluteName(t.nick_name,t.play_role);var e=t.head?t.head:1;this._view.setPluteImage("ui_headImg_"+e,t.play_role),this._view.specialPlayerMoney(""+App.CommonUtils.money(t.balance),t.play_role),this._view.playerDisplay(t.play_role)}.bind(this))},i.prototype.onChipsRecordCallBack=function(t){t.chips.length?this._hhdzModel.chipArr=JSON.parse(t.chips):this._hhdzModel.chipArr=[0,3,6,8,9],this.initJebutton()},i.prototype.onLeaveGameCallBack=function(t){App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.armaturePlayEnd=function(){this._view.CardView.dealCard(!0)},i.prototype.backToLobby=function(){this._proxy.sendLeaveGame(),this.backPoints()},i.prototype.bet=function(e,i){if(2==this._hhdzModel.isBet){var o=i?i:1e4*this._hhdzModel.betNum;if(this._hhdzModel.betPlace=e,o){if(this.isLimit(e,o))return;var n={bet_money:o,place:e};this._hhdzModel.isAutoBet?this.autoBet([n]):(this._hhdzModel.preBetList[e]+=o,this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList))}else this._popView.Prompt.showPrompt(2,this._hhdzModel.playerMoneys[t.PlayerConst.SELF]);this._hhdzModel.betPoints.push(this._hhdzModel.betNum),this.betPlacePoints(e)}},i.prototype.autoBet=function(t){var e=t,i={bets:e};this._proxy.requestBet(i)},i.prototype.isLimit=function(e,i){var o=!1;return this._hhdzModel.limits.forEach(function(n){if(n.place==e){var s=i,r=this._hhdzModel.betList[e],a=this._hhdzModel.preBetList[e];i>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):r+a>=n.limit_max_money?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),o=!0):s+r+a>n.limit_max_money&&(this._hhdzModel.limitBetMoney=n.limit_max_money-(r+a),this._popView.Prompt.showPrompt(1,App.CommonUtils.money(this._hhdzModel.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)),o=!0)}}.bind(this)),o},i.prototype.touch=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.ShowHandBtn=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.setAutoBet=function(t){this._hhdzModel.isAutoBet=t,this.autoBetPoints()},i.prototype.repeatBet=function(){if(this._hhdzModel.lastBetRecord.length){if(this.isLimitRepeat())return;this._hhdzModel.isAutoBet?this.autoBet(this._hhdzModel.lastBetRecord):(this._hhdzModel.lastBetRecord.forEach(function(t,e){this._hhdzModel.preBetList[t.place]+=t.bet_money}.bind(this)),this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList))}this.repeatBetPoints()},i.prototype.isLimitRepeat=function(){var e=!1,i=this._hhdzModel.preBetList,o=this._hhdzModel.betList,n=this._hhdzModel.limits;return this._hhdzModel.lastBetRecord.forEach(function(s){var r=s.bet_money+o[s.place]+i[s.place];n.forEach(function(i){s.place==i.place&&(s.bet_money>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),e=!0):r>i.limit_max_money&&(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),e=!0))}.bind(this))}.bind(this)),e},i.prototype.confirmBet=function(){var t=[];if(this._hhdzModel.preBetList.forEach(function(e,i){if(e){var o={place:i,bet_money:e};t.push(o)}}.bind(this)),t.length>0){var e={bets:t};this._proxy.requestBet(e)}this.confirmBetPoints()},i.prototype.conserBet=function(){this.resetPerBet(),this.concerBetPoints()},i.prototype.resetPerBet=function(){for(var t=0;t<this._hhdzModel.preBetList.length;t++)this._hhdzModel.preBetList[t]=0;this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList)},i.prototype.resetBet=function(){for(var t=0;t<this._hhdzModel.betList.length;t++)this._hhdzModel.betList[t]=0},i.prototype.resetAllBet=function(){for(var t=0;t<this._hhdzModel.allBetList.length;t++)this._hhdzModel.allBetList[t]=0},i.prototype.clearTable=function(){this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._hhdzModel.hasBet=!1},i.prototype.showRank=function(){this._popView.Ranking.showPopup();var t={begin_idx:0,req_count:100};this._proxy.requestRanking(t)},i.prototype.showRecord=function(){this._popView.WinningRecord.showPopup(),this._hhdzModel.winningRecord.length&&this._popView.WinningRecord.rankData(this._hhdzModel.winningRecord),this.winningRecordPoints()},i.prototype.showGameSet=function(){this._popView.GameSet.initSet(),this._popView.GameSet.showPopup(),this.gameSetPoints()},i.prototype.showHelp=function(){this._popView.Help.showPopup(),this.helpPoints()},i.prototype.openBlackCard=function(){this._view.CardView.opencard(this._hhdzModel.gameResult.black_cards,"black",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("black",this._hhdzModel.gameResult.black_open_type)}.bind(this),this)},i.prototype.openRedCard=function(){this._view.CardView.opencard(this._hhdzModel.gameResult.red_cards,"red",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("red",this._hhdzModel.gameResult.red_open_type)}.bind(this),this)},i.prototype.showWinner=function(){if(this._view.coinAniClear(this._hhdzModel.winPos,this._hhdzModel.winPlayer),this._view.showTableLight(this._hhdzModel.winPos),this._hhdzModel.betTimes&&(this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail()),this._view.CardView.showWinner(this._hhdzModel.gameResult.compare_value),this._hhdzModel.winMoneys[t.PlayerConst.SELF]){var e={issue:this._hhdzModel.issue,hit_money:this._hhdzModel.winMoneys[t.PlayerConst.SELF]};this._hhdzModel.winningRecord.unshift(e),App.SoundManager.playEffect("win_game_mp3")}},i.prototype.hideCard=function(){this.clearTable(),this._view.hideStar(),this._view.hideTableLight(),this._view.MessageInfo.setUserBet(0),this._view.MessageInfo.setUserMoney(this._hhdzModel.playerMoneys[t.PlayerConst.SELF]),this.resetPerBet(),this.resetBet(),this.resetAllBet(),this._view.BetBox.clearCoin();for(var e=0;4>e;e++)this._hhdzModel.playerMoneys[e]&&this._view.specialPlayerMoney(""+this._hhdzModel.playerMoneys[e],e)},i.prototype.confirmShowhand=function(){this._hhdzModel.betNum=0;var e=1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF];this._hhdzModel.limits.forEach(function(t){t.place==this._hhdzModel.betPlace&&(e<t.limit_min_money?this._popView.Prompt.showPrompt(6):this.bet(this._hhdzModel.betPlace,e))}.bind(this))},i.prototype.confirmLimitBet=function(){this._hhdzModel.limitBetMoney&&this.bet(this._hhdzModel.betPlace,this._hhdzModel.limitBetMoney)},i.prototype.ShowsetChip=function(){var t=this._popView.getChipSetView();t.showMenu(),t.setDefaultChip(this._hhdzModel.chipArr),this.setCounterBtnPoints()},i.prototype.getFiveChip=function(t){var e=JSON.stringify(this._hhdzModel.chipArr),i={chips:e};this._proxy.requestChip(i)},i.prototype.getChipValue=function(t){this._mTempChipMoney=t,this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],this.setCounterPoints()},i.prototype.changeMultiple=function(t){var e=this._view.Bottom;e.setchipValue(t),this._mTempMultiple=t},i.prototype.selBtnIndexCallBack=function(){this._view.Bottom.JeButton.toggleBtn(this._hhdzModel.selBtnIndex-1),this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],0==this._hhdzModel.betNum&&this._view.Bottom.JeButton.ShowHandlightBtn()},i.prototype.betPoints=function(){this._hhdzModel.betPoints.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+e])}.bind(this)),this._hhdzModel.betPoints.length=0},i.prototype.setCounterPoints=function(){this._mTempChipMoney.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e])}.bind(this))},i.prototype.concerBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL)},i.prototype.repeatBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT)},i.prototype.confirmBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM)},i.prototype.autoBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM)},i.prototype.setCounterBtnPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER)},i.prototype.addCounterPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER)},i.prototype.betPlacePoints=function(e){R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e])},i.prototype.menuPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON)},i.prototype.rechargeMoney=function(){App.ViewManager.open(t.ViewConst.Recharge,LayerManager.UI_Popup)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(t.ViewConst.Recharge,LayerManager.UI_Popup)},i.prototype.helpPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON)},i.prototype.gameSetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON)},i.prototype.winningRecordPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON)},i.prototype.backPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON)},i.prototype.destroy=function(){e.prototype.destroy.call(this),common.StarExpand.cleanFormPool(),App.TimerManager.removeAll(this),this._hhdzModel.destroy(),this._proxy.destroy(),this._view.destroy(),this._popView.destroy(),this._hhdzModel=void 0,this._proxy=void 0,this._view=void 0,this._popView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"hhdz.GameController")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.initData=function(){this.winMoneys=[0,0,0,0,0],this.playerIds=[-1,-1,-1,-1,-1],this.playerMoneys=[0,0,0,0,0],this.isDeal=!1,this.selBtnIndex=1,this.WAIT_CARD_TIME=300,this.isBet=1,this.isAutoBet=!0,this.preBetList=[0,0,0],this.betList=[0,0,0],this.allBetList=[0,0,0],this.lastBetRecord=[],this.gameResult={},this.historyRecord={compare_values:[],open_types:[]},this.winPos=[],this.winPlayer=[],this.winningRecord=[],this.chipArr=[0,3,6,8,9],this.betTimes=0,this.betPlace=0,this.betPoints=[],this.hasBet=!1,this.limits=[],this.betNum=1e4,this.limitPlace=-1},i.prototype.initDataNotify=function(){this.selBtnIndexNotify=t.DataNotify.create(this.selBtnIndex)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._shuffle&&(this._shuffle.destroy(),this._shuffle=void 0),this.preBetList=void 0,this.betList=void 0,this.lastBetRecord=void 0,this.gameResult=void 0,this.historyRecord=void 0,this.winPos=void 0,this.winningRecord=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"hhdz.GameModel")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onGameState=function(e){this.applyFunc(t.CallBacks.onGameStateCallBack,e)},i.prototype.onOnlineCount=function(e){this.applyFunc(t.CallBacks.onOnlineCountCallBack,e)},i.prototype.onChart=function(e){this.applyFunc(t.CallBacks.onChartCallBack,e)},i.prototype.onGameResult=function(e){this.applyFunc(t.CallBacks.onGameResultCallBack,e)},i.prototype.onSelfBet=function(e){this.applyFunc(t.CallBacks.onSelfBetCallBack,e)},i.prototype.onPlayerBet=function(e){this.applyFunc(t.CallBacks.onPlayerBetCallBack,e)},i.prototype.onBetAction=function(e){this.applyFunc(t.CallBacks.onBetActionCallBack,e)},i.prototype.onGameBet=function(e){this.applyFunc(t.CallBacks.onGameBetCallBack,e)},i.prototype.onExchange=function(e){this.applyFunc(t.CallBacks.onExchangeCallBack,e)},i.prototype.onRanking=function(e){this.applyFunc(t.CallBacks.onRankingCallBack,e)},i.prototype.onWinningRecord=function(e){this.applyFunc(t.CallBacks.onWinningRecordCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.CallBacks.onSpecialPlayerCallBack,e)},i.prototype.onChipsRecord=function(e){this.applyFunc(t.CallBacks.onChipsRecordCallBack,e)},i.prototype.onIssue=function(t){this.model.issue=t.issue},i.prototype.onExitRoom=function(e){this.applyFunc(t.CallBacks.onLeaveGameCallBack,e)},i.prototype.onLimit=function(t){this.model.limits=t.limits},i.prototype.requestBet=function(e){this.send(t.ProxyConst.ME_BET,e)},i.prototype.requestRanking=function(e){this.send(t.ProxyConst.RANKING,e)},i.prototype.requestChip=function(e){this.send(t.ProxyConst.CHIPS_RECORD_Q,e)},i.prototype.sendLeaveGame=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.addListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.addListener(t.ProxyConst.CHART_R,this.onChart,this),this.addListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.addListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.addListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.addListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.addListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.addListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.addListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.addListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.addListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.addListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.addListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.addListener(t.ProxyConst.LIMIT_N,this.onLimit,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.removeListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.removeListener(t.ProxyConst.CHART_R,this.onChart,this),this.removeListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.removeListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.removeListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.removeListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.removeListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.removeListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.removeListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.removeListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.removeListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.removeListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.removeListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.removeListener(t.ProxyConst.LIMIT_N,this.onLimit,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"hhdz.GameProxy")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(){}return t.randomPoint=function(t){var e={x:0,y:0};return e.x=Math.floor(Math.random()*t.width),e.y=Math.floor(Math.random()*t.height),e},t.dealCard=function(t,e,i){var o=0;t.forEach(function(t){3>o&&(egret.Tween.removeTweens(t),egret.Tween.get(t).wait(i*o*1.5).to({x:e[o].x,y:e[o].y,horizontalCenter:e[o].h,scaleX:1,scaleY:1,rotation:0},i).call(function(){App.SoundManager.playEffect("sendcard_mp3")}),o++)})},t.showCard=function(t,e){t.forEach(function(t,i){t.x=e[i].x,t.y=e[i].y,t.horizontalCenter=e[i].h,t.scaleX=1,t.scaleY=1})},t.openCard=function(t,e,i){var o=this;if(t&&t.length){var n=0,s=0;e.forEach(function(e){egret.Tween.get(e).wait(i*n).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("flipcard_mp3"),e.source=this.getCardWithNum(t[s]),egret.Tween.get(e).to({scaleX:1},200,egret.Ease.sineInOut),s++}.bind(o)),n++})}},t.openCardInstant=function(t,e){var i=this;t&&t.length&&e.forEach(function(e,o){e.source=i.getCardWithNum(t[o]),e.scaleX=1,e.scaleY=1})},t.getPoints=function(t){for(var e=[],i=0;3>i;i++){var o={x:t.getChildAt(i).x,y:t.getChildAt(i).y,h:t.getChildAt(i).horizontalCenter};e.push(o)}return e},t.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(egret.log("hua:",e,"number:",o,"cardNum:",t),0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s="",egret.warn("cardNum:",t)),egret.log("cardStr:",s),s},t.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},t.getBetNum=function(t,e){t.forEach(function(t){1==t.betType?e.black+=t.betNum:2==t.betType?e.red+=t.betNum:e.lucky+=t.betNum})},t}();t.Application=e,__reflect(e.prototype,"hhdz.Application")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"hhdz.DataNotify")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"hhdz","GameSkin")||this;return i.BetBox.initComponent(t),i.Bottom.initComponent(t),i.TimeClock.initComponent(t),i.ToolBar.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.open.call(this),this.Bottom.open(),this.MessageInfo.initInfo(),this.MessageInfo.allPlayerDisplay(),this.MessageInfo.setUserBet(0),this.ToolBar.moveCharge(),this.BetBox.createHeadPosition(),this.BetBox.initCoinBox(),this.ToolBar.reChargeEffect(),this.Chart.hideApproach(),this.hideTableLight(),this.TimeClock.hideTime(),this.initBroadcast(this)},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle(this._controller),this.GroupShuffle.addChild(this.shuffle)),this.shuffle.init(),this.shuffle.x=0,this.shuffle.y=0,this.shuffle.scaleX=this.shuffle.scaleY=1,this.shuffle.alpha=1,this.shuffle.goToWash(),this.shuffle.addPlayEndCallBack(function(){this.applyFunc(t.CallBacks.dealCard)}.bind(this),this._controller)},i.prototype.betToPlaceAni=function(t,e,i){this.BetBox.betToPlaceAni(t,e,i)},i.prototype.playerDisplay=function(t){this.MessageInfo.playerDisplay(t)},i.prototype.setPluteImage=function(t,e){this.MessageInfo.setPluteImage(t,e)},i.prototype.setPluteName=function(t,e){this.MessageInfo.setPluteName(t,e)},i.prototype.specialPlayerMoney=function(t,e){this.MessageInfo.specialPlayerMoney(t,e)},i.prototype.avatarShake=function(t){this.MessageInfo.avatarShake(t)},i.prototype.starFly=function(t){var e=this.MessageInfo.getPoint(),i=this.BetBox.getParabolicPoint(t),o=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,i,o,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},i.prototype.hideStar=function(){this.BetBox.hideStar()},i.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},i.prototype.coinAniClear=function(t,e){this.BetBox.coinAniClear(t),R.setTimeOnce(function(){e.forEach(function(t){this.MessageInfo.getMoneyLight(t)}.bind(this))},this,600)},i.prototype.playerWinMoney=function(t,e){this.MessageInfo.playerWinMoney(t,e)},i.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},i.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},i.prototype.renderChartDetail=function(t){this.Chart.renderChartDetail(t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.BetBox.destroy(),this.Bottom.LogicBtn.destroy(),this.Bottom.JeButton.destroy(),this.TimeClock.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.Chart.destroy()},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"hhdz.GameView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"hhdz","PopSkin")||this;return i.Ranking.initComponent(e),i.WinningRecord.initComponent(e),i.GameSet.initComponent(e),i.Prompt.initComponent(e),i._mChipSetView=new common.SetChip(null),i._mChipSetView.initComponent(e,i),i._mChipSetView.top=i._mChipSetView.left=0,i._mChipSetView.bottom=i._mChipSetView.right=0,i}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.Help.initUI(),this._mChipSetView.getcoordinate(),this._mChipSetView.createChip()},e.prototype.showChipSetView=function(){this._mChipSetView.showMenu()},e.prototype.getChipSetView=function(){return this._mChipSetView},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mChipSetView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mChipSetView.removeEvent()},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Ranking.destroy(),this.WinningRecord.destroy(),this.GameSet.destroy(),this.Prompt.destroy(),this._mChipSetView.destroy(),this._mChipSetView=void 0)},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"hhdz.PopView")}(hhdz||(hhdz={}));var lhd;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.lhd=i,__reflect(i.prototype,"lhd.Entrance.lhd",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var o=e.call(this,t)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,i._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(i,e),i.prototype.getState=function(){return this._currState},i.prototype.setState=function(t){this._currState=t},i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEffect(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.goToWash=function(){this.armature.play(i.ACTION_WASH,-1),this.removeEffect(),this.setState(i.ACTION_WASH),App.SoundManager.playEffect(t.SoundConst.CARD_WASH)},i.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:-240,scaleX:.5,scaleY:.5},400,egret.Ease.sineInOut).call(function(){this.alpha=0,this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)}.bind(this))},i.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},i.prototype.removeEffect=function(){},i.prototype.playEffect=function(t){},i.prototype.die=function(){},i.ACTION_WASH="clean",i._mActionList=[i.ACTION_WASH],i}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"lhd.Shuffle")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this,"LhdBetBox")||this;return t.coinArr=[],t.winpos=[],t.allChipList=[],t}return __extends(i,e),i.prototype.bet=function(e){this.applyFunc(t.CallBacks.bet,e)},i.prototype.initCoinArr=function(){this.coinArr.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinArr.push(e)}},i.prototype.showSelfBet=function(t){for(var e=0;e<t.length;e++)t[e]?this["MyBet_"+e].text=""+Math.floor(App.CommonUtils.money(t[e])):this["MyBet_"+e].text=""},i.prototype.showMyPreBet=function(t){for(var e=0;e<t.length;e++)t[e]?this["MyPreBet_"+e].text=""+Math.floor(App.CommonUtils.money(t[e])):this["MyPreBet_"+e].text=""},i.prototype.showBetMoney=function(t){for(var e=0;e<t.length;e++)if(t[e]){var i=Math.floor(App.CommonUtils.money(t[e]));this["TotalBet_"+e].text=""+i,this["isBet_"+e]=!0,this.showCoin(e,i)}else this["TotalBet_"+e].text=""},i.prototype.showCoin=function(t,e){var i=this.getNumObj(e),o=Object.keys(i),n=this["CoinBox_"+t+"_1"],s=this["CoinBox_"+t+"_2"],r=this["CoinBox_"+t+"_3"];this.renderCoinType(o[0],i[o[0]],this.coinArr[t].coinBoxObj0,n),o.length>1?this.renderCoinType(o[1],i[o[1]],this.coinArr[t].coinBoxObj1,s):(s.removeChildren(),this.coinArr[t].coinBoxObj1._coinType="",this.coinArr[t].coinBoxObj1._coinNum=0,this.coinArr[t].coinBoxObj1._currentY=0),o.length>2?this.renderCoinType(o[2],i[o[2]],this.coinArr[t].coinBoxObj2,r):(r.removeChildren(),this.coinArr[t].coinBoxObj2._coinType="",this.coinArr[t].coinBoxObj2._coinNum=0,this.coinArr[t].coinBoxObj2._currentY=0)},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.addCoin=function(e,i,o,n){var s,r="";switch(i){case"sw":r="common_ui_t100000_png",s=1e5;break;case"w":r="common_ui_4_png",s=1e4;break;case"q":r="common_ui_8_png",s=1e3;break;case"b":r="common_ui_6_png",s=100;break;case"s":r="common_ui_3_png",s=10;break;case"g":r="common_ui_0_png",s=1}for(var a=0,h=-60,l=0,p=[],c=0;o>c;c++){var u=common.CoinFactory.i.createCoin();u.refresh(r,s,a,h),u.alpha=0,p.push(u),e.addChild(u)}p.forEach(function(e,i){if(0==n._currentY)l=0;else if(this.randomNum()>.65){var o=this.randomNum();l=o>.5?2:-2}else l=0;egret.Tween.get(p[i]).wait(150*i).to({y:n._currentY,x:l},150,egret.Ease.sineInOut),function(e){R.setTimeOnce(function(){App.SoundManager.playEffect(t.SoundConst.BET),p[e].alpha=1},this,150*e)}(i),n._currentY-=5}.bind(this))},i.prototype.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},i.prototype.randomNum=function(){return Math.random()},i.prototype.coinFlicker=function(t){t.forEach(function(t){for(var e=1;4>e;e++){var i=this["CoinBox_"+t+"_"+e];egret.Tween.get(i).to({alpha:0},150)}}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){for(var e=1;4>e;e++){var i=this["CoinBox_"+t+"_"+e];i.alpha=1}}.bind(this))},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.betToPlaceAni=function(t,e,i){for(var o=String(App.CommonUtils.money(i)),n=this.createChip(o),s=Number(o[0]),r=0;s>r;r++){var a=common.chipBtn.create(),h=this.winpos[t],l=this.GroupChip.globalToLocal(h.x,h.y);this.GroupChip.addChild(a),a.init(n),a.scaleX=.5,a.scaleY=.5,a.x=l.x,a.y=l.y;var p=this["BetPoint_"+e];a.setFlyChipX(p.x),a.setFlyChipY(p.y),a.moveToPlace(50*r)}},i.prototype.createChip=function(t){var e,i=[0,3,6,8,4];return e=i[t.length-1]},i.prototype.createWinChip=function(t,e){if(this["isBet_"+t]){var i=this["BetBox_"+t],o=this["ChipPos"+t],n=void 0,s=void 0;n=App.StageUtils.getWidth()/2+o.horizontalCenter,s=App.StageUtils.getHeight()-o.bottom-o.height;for(var r=this.winpos[e],a=this.GroupChip.globalToLocal(r.x,r.y),h=0;5>h;h++){var l=App.MathUtils.random(0,i.width),p=App.MathUtils.random(0,i.height),c=common.chipBtn.create();c.init(h),c.setNameNum(e);var u=Math.floor(n+l),d=Math.floor(s+p),m=Math.floor(a.x),y=Math.floor(a.y);this.GroupChip.addChild(c),c.x=i.x+i.width/2,c.y=i.y+i.height/2,c.scaleX=.5,c.scaleY=.5,c.alpha=0,c.setScore(),c.setFlyX(u),c.setFlyY(d),c.setFlyChipX(m),c.setFlyChipY(y),this.allChipList.push(c)}}},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&(this.allChipList.forEach(function(t){t.moveTo()}),(this.isBet_0||this.isBet_1||this.isBet_2)&&App.SoundManager.playEffect(t.SoundConst.WIN_BET))},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();
common.chipBtn.release(t)}},i.prototype.clearCoin=function(){for(var t=0;3>t;t++){this["isBet_"+t]=!1,this["TotalBet_"+t].text="",this["MyBet_"+t].text="",this["MyPreBet_"+t].text="";for(var e=1;4>e;e++)this.removeCoins(this["CoinBox_"+t+"_"+e])}},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,200)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,350)},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){this.StarPos_0.visible=!1,this.StarPos_1.visible=!1,this.StarPos_2.visible=!1},i.prototype.hideTableLight=function(){this.TouchBtn_0.alpha=0,this.TouchBtn_1.alpha=0,this.TouchBtn_2.alpha=0},i.prototype.showTableLight=function(t){t.forEach(function(t){var e=this["TouchBtn_"+t];egret.Tween.get(e).wait(0).to({alpha:1},0),egret.Tween.get(e).wait(100).to({alpha:.7},400),egret.Tween.get(e).wait(550).to({alpha:1},0),egret.Tween.get(e).wait(650).to({alpha:.7},400),egret.Tween.get(e).wait(1050).to({alpha:1},0)}.bind(this))},i.prototype.addEvent=function(){for(var t=0;3>t;t++)this["TouchBtn_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.bet.bind(this,t),this)},i.prototype.removeEvent=function(){for(var t=0;3>t;t++)this["TouchBtn_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bet.bind(this,t),this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFlyWinChip(),this.allChipList=void 0,this.coinArr=void 0,this.winpos=void 0},i}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"lhd.BetBox")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){return e.call(this,"LhdCardSkin")||this}return __extends(i,e),i.prototype.open=function(){this.clearWinner()},i.prototype.clearCard=function(){this.cardLong&&this.cardLong.parent&&(this.cardLong.parent.removeChild(this.cardLong),this.cardLong=void 0),this.cardHu&&this.cardHu.parent&&(this.cardHu.parent.removeChild(this.cardHu),this.cardHu=void 0)},i.prototype.clearWinner=function(){this.HuWin.visible=!1,this.LongWin.visible=!1,this.He.visible=!1},i.prototype.dealCard=function(){this.createNewCard(),this.cardLong.x=this.longPoint.x,this.cardLong.y=this.longPoint.y,this.cardHu.x=this.huPoint.x,this.cardHu.y=this.huPoint.y,this.dealAni(this.cardLong,0),this.dealAni(this.cardHu,600)},i.prototype.putCard=function(){this.createNewCard(),this.put(this.cardLong),this.put(this.cardHu)},i.prototype.createNewCard=function(){this.clearCard(),this.initPoint(),this.cardLong=this.createCard(),this.cardHu=this.createCard(),this.GroupLong.addChild(this.cardLong),this.GroupHu.addChild(this.cardHu)},i.prototype.dealAni=function(e,i){egret.Tween.get(e).wait(i).to({x:45,y:60,scaleX:1,scaleY:1,rotation:180,anchorOffsetX:45,anchorOffsetY:60},400).call(function(){App.SoundManager.playEffect(t.SoundConst.DEAL),e.rotation=0,i&&this.applyFunc(t.CallBacks.onShowTimerCallBack)}.bind(this))},i.prototype.put=function(t){t.x=45,t.y=60,t.scaleX=t.scaleY=1,t.anchorOffsetX=45,t.anchorOffsetY=60},i.prototype.createCard=function(){var t=new eui.Image;return t.source="common_ui_cardback_png",t.scaleX=.5,t.scaleY=.5,t},i.prototype.initPoint=function(){var t=this.GroupDeal.localToGlobal(0,0);this.longPoint=this.GroupLong.globalToLocal(t.x,t.y),this.huPoint=this.GroupHu.globalToLocal(t.x,t.y)},i.prototype.openCard=function(e,i){egret.Tween.get(this.cardLong).to({scaleX:0},250,egret.Ease.sineInOut).call(function(){this.cardLong.source=this.getCardWithNum(e),App.SoundManager.playEffect(t.SoundConst.SHOW),egret.Tween.get(this.cardLong).to({scaleX:1},250,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect(t.SoundConst.RESULT[this.getCardNumber(e)])}.bind(this))}.bind(this)),egret.Tween.get(this.cardHu).wait(1500).to({scaleX:0},250,egret.Ease.sineInOut).call(function(){this.cardHu.source=this.getCardWithNum(i),App.SoundManager.playEffect(t.SoundConst.SHOW),egret.Tween.get(this.cardHu).to({scaleX:1},250,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect(t.SoundConst.RESULT[this.getCardNumber(i)]),R.setTimeOnce(function(){this.applyFunc(t.CallBacks.onRunWinnerCallBack)}.bind(this),this,800)}.bind(this))}.bind(this))},i.prototype.showCard=function(t,e){this.cardLong.source=this.getCardWithNum(t),this.cardHu.source=this.getCardWithNum(e)},i.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(egret.log("hua:",e,"number:",o,"cardNum:",t),0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s="",egret.warn("cardNum:",t)),egret.log("cardStr:",s),s},i.prototype.getCardNumber=function(t){var e=15&t;return e},i.prototype.runWinner=function(t){this.showWinner(t),this.GroupWin.scaleX=this.GroupWin.scaleY=4,egret.Tween.get(this.GroupWin).to({scaleX:1,scaleY:1},150,egret.Ease.sineInOut)},i.prototype.showWinner=function(e){switch(e){case t.TypeConst.LOONG:this.LongWin.visible=!0,this.HuWin.visible=!1,this.He.visible=!1;break;case t.TypeConst.TIGER:this.LongWin.visible=!1,this.HuWin.visible=!0,this.He.visible=!1;break;case t.TypeConst.TIE:this.LongWin.visible=!1,this.HuWin.visible=!1,this.He.visible=!0}},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"lhd.CardView")}(lhd||(lhd={}));var HotGame=function(){function t(){this._isPreloaded=!1,this._isUpdateComplete=!1,this._mHeartTimer=null,this._mIsUAGEnd=!1,this._mReconnetErrorTimes=0,this._mTimeOutTimes=0,this._mHeartInterval=0,this._currFrame=0,this._isBegin=!1,App.setOpenLog(!0),GameBase.setScaleModeNormal(),App.StageUtils.setFrameRate(30),App.StageUtils.getStage().setContentSize(GameBase.GameWidth,GameBase.GameHeight),App.StageUtils.setOrientationMode(egret.OrientationMode.LANDSCAPE),this.addEvent()}return t.prototype.initScene=function(){App.SceneManager.register(SceneConsts.Loading,new LoadingScene),App.SceneManager.register(SceneConsts.Login,new lobby.LoginScene),App.SceneManager.register(SceneConsts.Lobby,new lobby.LobbyScene),App.SceneManager.register(SceneConsts.Room,new RoomScene),App.SceneManager.register(SceneConsts.Desk,new DeskScene),App.SceneManager.register(SceneConsts.Game,new GameScene),App.StageUtils.getStage().addChild(LayerManager.Game_Bg),App.StageUtils.getStage().addChild(LayerManager.Game_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Popup),App.StageUtils.getStage().addChild(LayerManager.UI_Message),App.StageUtils.getStage().addChild(LayerManager.UI_Tips)},t.prototype.showLoading=function(){App.SceneManager.runScene(SceneConsts.Loading)},t.prototype.start=function(){Log.trace("Start 资源加载"),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"开始玩命加载资源");var t=["preload","sounds"];App.ResourceUtils.loadGroups("Game_Preload",t,this.onResourceLoadComplete,this.onResourceLoadProgress,this),App.TimerManager.doFrame(1,0,this.updateFrame,this),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version)},t.prototype.onResourceLoadComplete=function(){this._isPreloaded=!0,this._isUpdateComplete=!0,GameModuleMgr.i.initGameMoudle(),this.checkGamePublic()},t.prototype.checkGamePublic=function(){App.DeviceUtils.IsNative&&HotUpdateMgr.getInstance().checkGameUpdate("public")?HotUpdateMgr.getInstance().loadGameUpdate("public"):this.onUpPublicComplete()},t.prototype.addEvent=function(){App.MessageCenter.addListener(SocketConst.SOCKET_CLOSE,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_CONNECT,this.onSocketConnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_RECONNECT,this.onSocketReconnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_NOCONNECT,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_SEND_TIME_OUT,this.onSocketSendTimeOut,this),App.MessageCenter.addListener(GameNative.GameConstInit,this.onGameConstInit,this),App.MessageCenter.addListener(GameNative.GameAndroidBackKey,this.onGameAndroidBackKey,this),App.MessageCenter.addListener(GameNative.GameUpdateProgress,this.onGameUpdateProgress,this),App.MessageCenter.addListener(GameNative.GameUpdateComplete,this.onGameUpdateComplete,this),App.MessageCenter.addListener(GameNative.GameDownloadFail,this.onGameDownloadFail,this),App.MessageCenter.addListener(GameNative.GameDownloadZipFail,this.onGameDownloadZipFail,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10002),this.onHeartBack,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10101),this.onPMDBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorMsgTipsShow,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.onUpdateGameComplete,this)},t.prototype.onGameAndroidBackKey=function(t){egret.log("Click BackKey CallBack ")},t.prototype.onGameConstInit=function(t){Log.trace("onGameConstInit:",t),GameBase.initCurrAppVersion(t),GameBase.getDeviceId()||(App.MessageCenter.addListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this),GameNative.sendToNative(GameNative.GameDeviceIdInit,"")),GameBase.AssetsServerIp||GameBase.saveResoureServerIp(App.GlobalData.ResoureServerUrl),GameBase.GameServerIp||GameBase.saveGameServerIp(App.GlobalData.SocketServer+":"+App.GlobalData.SocketPort),GameNative.initNativeExternal(),HotUpdateMgr.getInstance().u(function(){this.getUAGend()}.bind(this),function(){App.PromTipsView.show("更新服务器获取失败！",function(){GameNative.appGameExit()})},this),App.Socket.initServerUrl(GameBase.GameServerIp),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),App.TimerManager.doFrame(1,99999999,this.startHotUpdate,this)},t.prototype.startHotUpdate=function(){this._mIsUAGEnd&&(this._mIsUAGEnd=!1,App.TimerManager.remove(this.startHotUpdate,this),this.hotUpdate())},t.prototype.getUAGend=function(){egret.log("获取urls完成！"),this._mIsUAGEnd=!0},t.prototype.onGameDeviceIdInit=function(t){App.MessageCenter.removeListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this);var e=(new md5).hex_md5(t);GameBase.saveLocalData("GameDeviceId",e)},t.prototype.hotUpdate=function(){App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在获取版本信息..."),HotUpdateMgr.getInstance().checkUpdate(this.hotUpdateComplete,this.hotUpdateError,this)},t.prototype.hotUpdateComplete=function(){Log.trace("热更新完成"),this._isUpdateComplete=!0,this.start()},t.prototype.onUpdateGameComplete=function(t){var e=GameModuleMgr.i.getGameByName(t);e&&App.ScrollTxtTips.showTip(e.gameName+"游戏下载更新完成")},t.prototype.hotUpdateError=function(){R.setTimeOut(function(){var t="服务器获取失败，请检查网络设置后重试";App.PromTipsView.show(t,function(){this.hotUpdate()},function(){App.EasyLoading.hideLoading(),GameNative.appGameExit()},this,!0)}.bind(this),this,2e3)},t.prototype.onUpPublicComplete=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),GameBase.mIsPublicDownloaded=!0},t.prototype.onSocketConnect=function(){this.startHeart()},t.prototype.onSocketReconnect=function(){Log.trace("重连成功"),this._mReconnetErrorTimes=0,this.startHeart(),GamePlayerMgr.i.relogin()},t.prototype.onSocketClose=function(){return this.checkGameUrl()?void 0:void R.setTimeOut(this.showReconnetTips,this,2e3)},t.prototype.checkGameUrl=function(){return HotUpdateMgr.getInstance().ug?(this._mReconnetErrorTimes=0,this.removeHeart(),App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),!0):!1},t.prototype.showReconnetTips=function(){App.EasyLoading.hideLoading(),this.removeHeart();var t="";t=this._mReconnetErrorTimes>=1?"服务器连接失败，请检查网络设置":"服务器连接已断开，是否重连？",App.PromTipsView.show(t,function(){App.EasyLoading.showReconnetTip(),App.Socket.reconnect()},function(){App.isInLogin||(App.SceneManager.runScene(SceneConsts.Login),GameModuleMgr.i.exitRoom()),App.EasyLoading.hideLoading()},this,!0),this._mReconnetErrorTimes++},t.prototype.onSocketSendTimeOut=function(){var t=++this._mTimeOutTimes;1==t?this.onHeart():2==t&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},t.prototype.startHeart=function(){this._mHeartTimer||(this._mHeartTimer=new egret.Timer(25e3,0),this._mHeartTimer.addEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.start()),this.onHeart()},t.prototype.removeHeart=function(){this._mHeartTimer&&(this._mHeartTimer.removeEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.stop(),this._mHeartTimer=null)},t.prototype.onHeart=function(){App.Socket.send({key:10001,body:{}}),this._mHeartInterval=egret.getTimer()},t.prototype.onHeartBack=function(t){var e=t.heartbeat_at,i=egret.getTimer()-this._mHeartInterval;(300>i||GameBase.getCurrServerTime()<1e7)&&GameBase.saveCurrServerTime(e),this._mTimeOutTimes=0},t.prototype.onPMDBack=function(t){App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,t)},t.prototype.updateFrame=function(){if(this._currFrame++,(!(this._currFrame<10)||this._isBegin)&&(this._isBegin||(this._isBegin=!0,this._currFrame=0),this._currFrame>t.Time_Delay)){if(!this._isPreloaded||!this._isUpdateComplete)return;return App.TimerManager.remove(this.updateFrame,this),void this.enterLobby()}},t.prototype.enterLobby=function(){if(GameBase.IsTest)App.SceneManager.runScene(SceneConsts.Login);else if(App.platformMoudel<=0){App.EasyLoading.showLoading();var t=GamePlayerMgr.i,e=t.getAccount1();t.login(!(e&&e.length>0))}App.platformMoudel&&web_gameInited()},t.prototype.onGameUpdateProgress=function(t){var e=t.split("&"),i=e[3],o=i.indexOf("games")>-1?"games":"main",n=i.indexOf("newApk")>-1;if("main"==o){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,parseInt(e[1]),parseInt(e[2]));var s=(parseInt(e[1])/1024/1024).toFixed(2)+"M/"+(parseInt(e[2])/1024/1024).toFixed(2)+"M",r="正在玩命下载更新..."+s;n&&(r="正在玩命下载新版本安装包..."+s),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,r)}else{var a=i.split("/"),h=a[a.indexOf("games")+1];Log.trace("游戏",h,"下载：",e[0]),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:h,progress:e[1],total:parseInt(e[2])})}},t.prototype.onGameUpdateComplete=function(t){Log.trace("热更新完成："),HotUpdateMgr.getInstance().saveVersion(t)},t.prototype.onGameDownloadFail=function(t){Log.trace("文件下载失败！",t),App.PromTipsView.show("文件下载失败,请重新进入游戏",function(){GameNative.appGameExit()})},t.prototype.onGameDownloadZipFail=function(t){Log.trace("文件解压失败！",t),App.PromTipsView.show("文件解压失败,请重新进入游戏",function(){GameNative.appGameExit()})},t.prototype.onResourceLoadProgress=function(t,e){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,t,e),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命加载中...请稍等")},t.prototype.onErrorMsgTipsShow=function(t){web_errorCallBack(t);var e=ErrorManager.i.getErrorByData(t);this.showSpecial(t.code,e)||App.PromTipsView.show(e),App.EasyLoading.hideLoading(),egret.log("onErrorMsgTipsShow：",t)},t.prototype.showSpecial=function(t,e){return 999==t||t==ErrorManager.ec.LoggedOnAnotherDevice?(App.Socket.isConnecting()&&(this.removeHeart(),App.Socket.close()),App.PromTipsView.show(e,function(){App.SceneManager.runScene(SceneConsts.Login)}),!0):998==t||t==ErrorManager.ec.UnavailableService||t==ErrorManager.ec.ServerMaintain?(App.PromTipsView.show(e,function(){App.MessageCenter.dispatch(GameConsEvent.Game_Maintain_Const,t)}),!0):!1},t.Time_Delay=1e3/33,t}();__reflect(HotGame.prototype,"HotGame");var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,"LhdHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1})},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.HelpView=e,__reflect(e.prototype,"lhd.HelpView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){return e.call(this,"LhdTimerSkin")||this}return __extends(i,e),i.prototype.open=function(){this.hideTimer()},i.prototype.startTimer=function(e){this._currentSecond=e.time,this._currentState=e.status,this._currentState==t.GameStateConst.BETTING&&(this.GameStatus.text="投注中"),this._currentSecond>0&&(this.TimeLbL.text=""+this._currentSecond,App.TimerManager.doTimer(1e3,this._currentSecond,this.timerFunc,this))},i.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.showTimer=function(){this.GroupClock.visible=!0},i.prototype.hideTimer=function(){this.GroupClock.visible=!1},i.prototype.timerFunc=function(){this._currentSecond?(this._currentSecond--,this._currentState==t.GameStateConst.BETTING&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+"",this._currentSecond<4&&(App.SoundManager.playEffect(t.SoundConst.ALERT),this.numShake()),this.GroupClock.visible&&this._currentSecond>3&&App.SoundManager.playEffect(t.SoundConst.COUNT_DOWN))):this.stopTimer()},i.prototype.stopTimer=function(){App.TimerManager.remove(this.timerFunc,this),this.GroupClock.visible=!1},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.stopTimer()},i}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"lhd.Timer")}(lhd||(lhd={}));var lhd;!function(t){var e;!function(t){t[t.Base=1200]="Base",t[t.Popup=1201]="Popup"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.BET_SUCC=0]="BET_SUCC",t[t.BET_ERROR_PLACE=1]="BET_ERROR_PLACE",t[t.BET_ERROR_MONEY=2]="BET_ERROR_MONEY",t[t.BET_ERROR_STATE=3]="BET_ERROR_STATE",t[t.BET_ERROR_OUTLIMIT=4]="BET_ERROR_OUTLIMIT",t[t.BET_ERROR_OUTTOTALLIMIT=5]="BET_ERROR_OUTTOTALLIMIT",t[t.BET_ERROR_NOENOUGH_MONEY=6]="BET_ERROR_NOENOUGH_MONEY"}(i=t.BetCodeConst||(t.BetCodeConst={}));var o=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额太小或太大溢出","不在下注状态","超出单人限额","超出所有人总共限额","没有足够的余额"],t}();t.CodeErrorTxt=o,__reflect(o.prototype,"lhd.CodeErrorTxt");var n;!function(t){t[t.BETTING=1]="BETTING",t[t.EXCHANGE=2]="EXCHANGE"}(n=t.GameStateConst||(t.GameStateConst={}));var s;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(s=t.PlayerConst||(t.PlayerConst={}));var r;!function(t){t[t.LOONG=0]="LOONG",t[t.TIGER=1]="TIGER",t[t.TIE=2]="TIE"}(r=t.TypeConst||(t.TypeConst={}));var a;!function(t){t[t.CHIPS_RECORD_Q=11604]="CHIPS_RECORD_Q",t[t.CHIPS_RECORD_N=11605]="CHIPS_RECORD_N",t[t.RANKING_Q=11606]="RANKING_Q",t[t.RANKING_R=11607]="RANKING_R",t[t.ONLINE_COUNT_N=11608]="ONLINE_COUNT_N",t[t.ISSUE_N=11609]="ISSUE_N",t[t.SPECIAL_PLAYER_N=11610]="SPECIAL_PLAYER_N",t[t.GAME_STATE_N=11611]="GAME_STATE_N",t[t.CHART_N=11612]="CHART_N",t[t.LIMIT_N=11613]="LIMIT_N",t[t.BET_Q=11614]="BET_Q",t[t.BET_R=11615]="BET_R",t[t.BET_ACTION_N=11616]="BET_ACTION_N",t[t.BET_INFO_N=11617]="BET_INFO_N",t[t.GAME_BET_INFO_N=11618]="GAME_BET_INFO_N",t[t.GAME_RESULT_N=11619]="GAME_RESULT_N",t[t.EXCHANGE_N=11620]="EXCHANGE_N"}(a=t.ProxyConst||(t.ProxyConst={}));var h;!function(t){t[t.bet=3e4]="bet",t[t.onIssueCallBack=30001]="onIssueCallBack",t[t.onGameStateCallBack=30002]="onGameStateCallBack",t[t.onChipsRecordCallBack=30003]="onChipsRecordCallBack",t[t.onShowTimerCallBack=30004]="onShowTimerCallBack",t[t.onSpecialPlayerCallBack=30005]="onSpecialPlayerCallBack",t[t.onGameResultCallBack=30006]="onGameResultCallBack",t[t.onRunWinnerCallBack=30007]="onRunWinnerCallBack",t[t.onBetCallBack=30008]="onBetCallBack",t[t.onBetActionCallBack=30009]="onBetActionCallBack",t[t.onBetInfoCallBack=30010]="onBetInfoCallBack",t[t.onGameBetInfoCallBack=30011]="onGameBetInfoCallBack",t[t.onExchangeCallBack=30012]="onExchangeCallBack",t[t.onChartCallBack=30013]="onChartCallBack",t[t.onRankingCallBack=30014]="onRankingCallBack",t[t.onOnlineCountCallBack=30015]="onOnlineCountCallBack"}(h=t.CallBacks||(t.CallBacks={}));var l=function(){function t(){}return t.BG="lhd_bg_mp3",t.CARD_WASH="lhd_cardwash_mp3",t.DEAL="lhd_flipcard_mp3",t.START="lhd_start_mp3",t.STOP="lhd_stop_mp3",t.COUNT_DOWN="lhd_countdown_mp3",t.ALERT="lhd_alert_mp3",t.BET="lhd_bet_mp3",t.SHOW="lhd_show_mp3",t.LONG_WIN="lhd_long_win_mp3",t.HU_WIN="lhd_hu_win_mp3",t.HE="lhd_he_mp3",t.WIN_BET="lhd_win_bet_mp3",t.WIN_GAME="lhd_win_game_mp3",t.RESULT=["","lhb_p_1_mp3","lhb_p_2_mp3","lhb_p_3_mp3","lhb_p_4_mp3","lhb_p_5_mp3","lhb_p_6_mp3","lhb_p_7_mp3","lhb_p_8_mp3","lhb_p_9_mp3","lhb_p_10_mp3","lhb_p_11_mp3","lhb_p_12_mp3","lhb_p_13_mp3"],t}();t.SoundConst=l,__reflect(l.prototype,"lhd.SoundConst");var p=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"LHD1counter_pick1",COUNTER_PICK5:"LHD1counter_pick5",COUNTER_PICK10:"LHD1counter_pick10",COUNTER_PICK20:"LHD1counter_pick20",COUNTER_PICK50:"LHD1counter_pick50",COUNTER_PICK100:"LHD1counter_pick100",COUNTER_PICK200:"LHD1counter_pick200",COUNTER_PICK500:"LHD1counter_pick500",COUNTER_PICK1000:"LHD1counter_pick1000",COUNTER_PICK0:"LHD1counter_pickAllin",COUNTER_BET1:"LHD1counter_bet1",COUNTER_BET5:"LHD1counter_bet5",COUNTER_BET10:"LHD1counter_bet10",COUNTER_BET20:"LHD1counter_bet20",COUNTER_BET50:"LHD1counter_bet50",COUNTER_BET100:"LHD1counter_bet100",COUNTER_BET200:"LHD1counter_bet200",COUNTER_BET500:"LHD1counter_bet500",COUNTER_BET1000:"LHD1counter_bet1000",COUNTER_BET0:"LHD1counter_betallin",OPERATE_BUTTONCANCEL:"LHD1operate_buttoncancel",OPERATE_BUTTONREPEAT:"LHD1operate_buttonrepeat",OPERATE_BUTTONCONFIRM:"LHD1operate_buttonconfirm",OPERATE_AUTOCONFIRM:"LHD1operate_autoconfirm",OPERATE_SETCOUNTER:"LHD1operate_setcounter",OPERATE_ADDCOUNTER:"LHD1operate_addcounter",BETS_0:"LHD1bets_dragon",BETS_1:"LHD1bets_tiger",BETS_2:"LHD1bets_tie",DIRECT_MAPS:"LHD1direct_maps",LEADERBOARD_BUTTON:"LHD1leaderboard_button",MENU_BUTTON:"LHD1menu_button",MENU_HELP_BUTTON:"LHD1menu_help_button",MENU_SET_BUTTON:"LHD1menu_set_button",MENU_RECORD_BUTTON:"LHD1menu_record_button",MENU_BACK_BUTTON:"LHD1menu_back_button"},t}();t.PointConst=p,__reflect(p.prototype,"lhd.PointConst")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._popView=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(t){e.prototype.onInit.call(this),this.registers(),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerFunc("backToLobby",this.exitGameReq,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc(t.CallBacks.onShowTimerCallBack,this.onShowTimerCallBack,this),this.registerFunc(t.CallBacks.onRunWinnerCallBack,this.onRunWinnerCallBack,this),this.registerFunc(t.CallBacks.bet,this.bet,this),this.registerFunc(t.CallBacks.onIssueCallBack,this.onIssueCallBack,this),this.registerFunc(t.CallBacks.onGameStateCallBack,this.onGameStateCallBack,this),this.registerFunc(t.CallBacks.onChipsRecordCallBack,this.onChipsRecordCallBack,this),this.registerFunc(t.CallBacks.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.CallBacks.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.CallBacks.onBetCallBack,this.onBetCallBack,this),this.registerFunc(t.CallBacks.onBetActionCallBack,this.onBetActionCallBack,this),this.registerFunc(t.CallBacks.onBetInfoCallBack,this.onBetInfoCallBack,this),this.registerFunc(t.CallBacks.onGameBetInfoCallBack,this.onGameBetInfoCallBack,this),this.registerFunc(t.CallBacks.onExchangeCallBack,this.onExchangeCallBack,this),this.registerFunc(t.CallBacks.onChartCallBack,this.onChartCallBack,this),this.registerFunc(t.CallBacks.onRankingCallBack,this.onRankingCallBack,this),this.registerFunc(t.CallBacks.onOnlineCountCallBack,this.onOnlineCountCallBack,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},Object.defineProperty(i.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),this.initUserInfo(),this.initJebutton(),this._view.initCoinArr(),App.SoundManager.playBg(t.SoundConst.BG)},i.prototype.initUserInfo=function(){var e=GamePlayerMgr.i.getPlayer();this.model.playerIds[t.PlayerConst.SELF]=e.getUserId(),this.model.playerMoneys[t.PlayerConst.SELF]=e.getMoney(),this._view.setUserInfo(e)},i.prototype.initJebutton=function(){this.model.chipArr=JSON.parse(t.LhdChips.i.Chips),this._view.setJeButton(this.model.chipArr),this._popView.setDefaultChip(this.model.chipArr),this.touch(this.model.selBtnIndex)},i.prototype.clearTable=function(){this.model.hasBet=!1,this._view.clearCard(),this._view.clearWinner(),this._view.hideTableLight(),this._view.clearCoin(),this.resetBet(),this.resetPerBet(),this.resetAllBet()},i.prototype.onIssueCallBack=function(t){this.model.issue=t.issue,this._view.setIssue(t.issue)},i.prototype.onChipsRecordCallBack=function(e){""!=e.chips&&(t.LhdChips.i.setChips(e.chips),this.initJebutton())},i.prototype.onGameStateCallBack=function(e){switch(this.model.timerInfo=this.resetTime(e),this._view.hideTimer(),this._view.startTimer(this.model.timerInfo),this._view.initCoinArr(),e.state){case t.GameStateConst.BETTING:this.onBetting(e);break;case t.GameStateConst.EXCHANGE:this.onExchange(e)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:t.state};return o},i.prototype.onBetting=function(e){this.model.betTimes=!0,this.clearTable(),this.model.isBet=!0;var i=this.model.timerInfo;this._view.hideTimer(),this._view.startTimer(this.model.timerInfo),i.time==i.allTime?(this._view.shuffleAni(),this._view.betStartAni(),App.SoundManager.playEffect(t.SoundConst.START)):(this._view.putCard(),this._view.showTimer())},i.prototype.onExchange=function(e){this.model.isBet=!1;var i=this.model.timerInfo;this._view.hideTimer(),i.time==i.allTime&&(this._view.betStopAni(),App.SoundManager.playEffect(t.SoundConst.STOP))},i.prototype.onSpecialPlayerCallBack=function(t){t.special_players.length&&t.special_players.forEach(function(t){this.model.playerIds[t.play_role]=t.user_id,this.model.playerMoneys[t.play_role]=t.balance,this._view.setPluteName(t.nick_name,t.play_role);var e=t.head?t.head:1;this._view.setPluteImage("ui_headImg_"+e,t.play_role),this._view.specialPlayerMoney(""+App.CommonUtils.money(t.balance),t.play_role),this._view.playerDisplay(t.play_role)}.bind(this))},i.prototype.onGameResultCallBack=function(e){var i=this.model.timerInfo;this.model.winner=e.open_type,this.model.winPos.length=0,this.model.winPos.push(e.open_type),this._view.createWinChip(e.open_type,t.PlayerConst.ONLINE),this.model.betTimes&&this.addToChart(e.open_type),i.status==t.GameStateConst.EXCHANGE&&(this._view.putCard(),i.time==i.allTime?R.setTimeOnce(function(){this._view.openCard(e.loong_card,e.tiger_card)}.bind(this),this,500):(this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type)))},i.prototype.addToChart=function(t){this.model.betTimes&&(this.model.historyRecord.push(t),this.model.historyRecord.length>69&&this.model.historyRecord.splice(0,50))},i.prototype.onBetCallBack=function(e){return e.code?void App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[e.code]):(this.model.hasBet=!0,this.resetPerBet(),void this.betPoints())},i.prototype.onBetActionCallBack=function(e){var i=this.model.playerIds;i.forEach(function(i,o){e.user_id==i&&(this.model.playerMoneys[o]=e.balance,e.bets.forEach(function(e){this._view.betToPlaceAni(o,e.place,e.bet_money),o==t.PlayerConst.PSYCHIC&&this._view.starFly(e.place)}.bind(this)),o==t.PlayerConst.SELF?this._view.setUserMoney(App.CommonUtils.money2Str(e.balance)):(this._view.avatarShake(o),this._view.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),o)))}.bind(this))},i.prototype.onBetInfoCallBack=function(e){if(e.user_id==this.model.playerIds[t.PlayerConst.SELF]){var i=0;e.infos.forEach(function(t){i+=t.bet_money,this.model.betList[t.place]=t.bet_money}.bind(this)),this._view.showSelfBet(this.model.betList),this._view.setUserBet(App.CommonUtils.money(i))}},i.prototype.onGameBetInfoCallBack=function(e){e.infos.length&&(e.infos.forEach(function(e,i){var o=e.total_bet_money-this.model.allBetList[e.place];this._view.betToPlaceAni(t.PlayerConst.ONLINE,e.place,o),this.model.allBetList[e.place]=e.total_bet_money}.bind(this)),this._view.showBetMoney(this.model.allBetList))},i.prototype.onExchangeCallBack=function(e){this.model.hasBet&&(this.model.lastBetRecord.length=0),this.model.winPlayer.length=0,this.resetWinMoney(),e.infos.length&&e.infos.forEach(function(e){e.place_exchanges.length&&e.place_exchanges.forEach(function(i){if(i.prize_money&&this.createWinChip(i.place,e.user_id,i.prize_money),e.user_id==this.model.playerIds[t.PlayerConst.SELF]){var o={place:i.place,bet_money:i.bet_money};this.model.lastBetRecord.push(o)}}.bind(this)),this.createMoney(e)}.bind(this))},i.prototype.resetWinMoney=function(){this.model.winMoneys.forEach(function(t,e){this.model.winMoneys[e]=0
}.bind(this))},i.prototype.createWinChip=function(t,e,i){var o=this.model.playerIds;o.forEach(function(o,n){e==o&&(this._view.createWinChip(t,n),-1==this.model.winPlayer.indexOf(n)&&this.model.winPlayer.push(n),this.model.winMoneys[n]+=i)}.bind(this))},i.prototype.createMoney=function(t){var e=this.model.playerIds;e.forEach(function(e,i){e==t.user_id&&(this.model.playerMoneys[i]=t.balance),this.model.winMoneys[i]&&this._view.playerWinMoney(this.model.winMoneys[i],i)}.bind(this))},i.prototype.onChartCallBack=function(t){this.model.historyRecord=t.open_types,this._view.renderApproach(this.model.historyRecord),this._view.renderChart(this.model.historyRecord)},i.prototype.onRankingCallBack=function(t){t.infos.length&&this._popView.renderRanking(t.infos)},i.prototype.onOnlineCountCallBack=function(t){this._view.changeOnlineNum(t.online_count)},i.prototype.touch=function(t){this.model.selBtnIndex=t,this._view.toggleBtn(this.model.selBtnIndex),this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex],0==this.model.betNum&&this._view.ShowHandlightBtn()},i.prototype.ShowsetChip=function(){this._popView.showChipSet(),this._popView.setDefaultChip(this.model.chipArr),this.setCounterBtnPoints()},i.prototype.getFiveChip=function(t){var e={chips:JSON.stringify(t)};this._proxy.requestChip(e)},i.prototype.getChipValue=function(t){this.model._mTempChipMoney=t,this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex],this.setCounterPoints()},i.prototype.changeMultiple=function(t){this._view.setchipValue(t),this.model._mTempMultiple=t},i.prototype.showHelp=function(){this._popView.showHelp(),this.helpPoints()},i.prototype.showRecord=function(){this._popView.showWinRecord(),this.winningRecordPoints()},i.prototype.showGameSet=function(){this._popView.initGameSet(),this._popView.showGameSet(),this.gameSetPoints()},i.prototype.showRank=function(){this._popView.showRanking();var t={begin_idx:0,req_count:100};this._proxy.requestRanking(t)},i.prototype.confirmShowhand=function(){var t=this.model.betMoney;this.model.limits.forEach(function(e){e.place==this.model.betPlace&&(t<e.limit_min_money?this._popView.Prompt.showPrompt(6):this.bet(this.model.betPlace,t))}.bind(this))},i.prototype.confirmLimitBet=function(){this.model.betMoney&&this.bet(this.model.betPlace,this.model.betMoney)},i.prototype.onShowTimerCallBack=function(){this._view.showTimer()},i.prototype.onRunWinnerCallBack=function(){this._view.runWinner(this.model.winner),this.createWinRecord(),R.setTimeOnce(function(){this.CoinAnimation()}.bind(this),this,1e3);var e=this.model.winner==t.TypeConst.LOONG?t.SoundConst.LONG_WIN:this.model.winner==t.TypeConst.TIGER?t.SoundConst.HU_WIN:t.SoundConst.HE;App.SoundManager.playEffect(e)},i.prototype.CoinAnimation=function(){this._view.renderApproach(this.model.historyRecord),this._view.renderChart(this.model.historyRecord),this._view.coinAniClear(this.model.winPos,this.model.winPlayer),this._view.showTableLight(this.model.winPos),R.setTimeOnce(function(){this.refreshPlayerMoney()}.bind(this),this,1e3),this.model.winMoneys[t.PlayerConst.SELF]&&App.SoundManager.playEffect(t.SoundConst.WIN_GAME)},i.prototype.refreshPlayerMoney=function(){this._view.hideStar(),this._view.setUserBet(0);var e=this.model.playerIds;e.forEach(function(e,i){i==t.PlayerConst.SELF?this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[i])):this._view.specialPlayerMoney(App.CommonUtils.money2Str(this.model.playerMoneys[i]),i)}.bind(this)),R.setTimeOnce(function(){this.clearTable()}.bind(this),this,3e3)},i.prototype.createWinRecord=function(){var e=this.model.winMoneys[t.PlayerConst.SELF];if(e){var i={issue:this.model.issue,hit_money:App.CommonUtils.money(e)};this.model.winningRecord.unshift(i),this._popView.renderWinRecord(this.model.winningRecord)}},i.prototype.bet=function(e,i){if(this.model.isBet){this.model.betPlace=e;var o=i?i:1e4*this.model.betNum;if(o){if(this.isLimit(e,o))return;var n={place:e,bet_money:o};this.model.isAutoBet?this.autoBet([n]):this.manualBet(e,o)}else this.model.betMoney=this.model.playerMoneys[t.PlayerConst.SELF],this._popView.showPrompt(2,App.CommonUtils.money(this.model.betMoney));this.model.betPoints.push(this.model.betNum),this.betPlacePoints(e)}},i.prototype.isLimit=function(e,i){var o=!1;return this.model.limits.forEach(function(n){if(n.place==e){var s=i,r=this.model.betList[e],a=this.model.preBetList[e],h=App.CommonUtils.money(n.limit_min_money),l=App.CommonUtils.money(n.limit_max_money);i>this.model.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):r+a>=n.limit_max_money?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[t.BetCodeConst.BET_ERROR_OUTLIMIT]),o=!0):s+r+a>n.limit_max_money&&(this.model.betMoney=n.limit_max_money-(r+a),this._popView.Prompt.showPrompt(1,App.CommonUtils.money(this.model.betMoney),h,l),o=!0)}}.bind(this)),o},i.prototype.autoBet=function(t){var e=t,i={bets:e};this._proxy.requestBet(i)},i.prototype.manualBet=function(t,e){this.model.preBetList[t]+=e,this._view.showMyPreBet(this.model.preBetList)},i.prototype.setAutoBet=function(t){this.model.isAutoBet=t,this.autoBetPoints()},i.prototype.confirmBet=function(){var t=[];if(this.model.preBetList.forEach(function(e,i){if(e){var o={place:i,bet_money:e};t.push(o)}}.bind(this)),t.length){var e={bets:t};this._proxy.requestBet(e)}this.confirmBetPoints()},i.prototype.conserBet=function(){this.resetPerBet(),this.concerBetPoints()},i.prototype.resetPerBet=function(){for(var t=0;t<this.model.preBetList.length;t++)this.model.preBetList[t]=0;this._view.showMyPreBet(this.model.preBetList)},i.prototype.resetBet=function(){for(var t=0;t<this.model.betList.length;t++)this.model.betList[t]=0},i.prototype.resetAllBet=function(){for(var t=0;t<this.model.allBetList.length;t++)this.model.allBetList[t]=0},i.prototype.repeatBet=function(){this.model.lastBetRecord.length&&(this.model.isAutoBet?this.autoBet(this.model.lastBetRecord):(this.model.lastBetRecord.forEach(function(t,e){this.model.preBetList[t.place]+=t.bet_money}.bind(this)),this._view.BetBox.showMyPreBet(this.model.preBetList))),this.repeatBetPoints()},i.prototype.exitGameReq=function(){this._proxy.requestExitDesk(),this.backPoints()},i.prototype.betPoints=function(){this.model.betPoints.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+e])}.bind(this)),this.model.betPoints.length=0},i.prototype.setCounterPoints=function(){this.model._mTempChipMoney.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e])}.bind(this))},i.prototype.concerBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL)},i.prototype.repeatBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT)},i.prototype.confirmBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM)},i.prototype.autoBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM)},i.prototype.setCounterBtnPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER)},i.prototype.addCounterPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER)},i.prototype.betPlacePoints=function(e){R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e])},i.prototype.menuPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON)},i.prototype.helpPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON)},i.prototype.gameSetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON)},i.prototype.winningRecordPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON)},i.prototype.backPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),common.StarExpand.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._popView.destroy(),this._model=void 0,this._proxy=void 0,this._view=void 0,this._popView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"lhd.GameController")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.initData(),i}return __extends(e,t),e.prototype.initData=function(){this.betNum=1,this.selBtnIndex=0,this.isBet=!1,this.hasBet=!1,this.isAutoBet=!0,this.winPos=[],this.playerIds=[-1,-1,-1,-1,-1],this.playerMoneys=[0,0,0,0,0],this.winMoneys=[0,0,0,0,0],this.winPlayer=[],this.lastBetRecord=[],this.historyRecord=[],this.winningRecord=[],this.betPoints=[],this.preBetList=[0,0,0],this.betList=[0,0,0],this.allBetList=[0,0,0]},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"lhd.GameModel")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onIssue=function(e){this.applyFunc(t.CallBacks.onIssueCallBack,e)},i.prototype.onGameState=function(e){this.applyFunc(t.CallBacks.onGameStateCallBack,e)},i.prototype.onChipsRecord=function(e){this.applyFunc(t.CallBacks.onChipsRecordCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.CallBacks.onSpecialPlayerCallBack,e)},i.prototype.onGameResult=function(e){this.applyFunc(t.CallBacks.onGameResultCallBack,e)},i.prototype.onBet=function(e){this.applyFunc(t.CallBacks.onBetCallBack,e)},i.prototype.onBetAction=function(e){this.applyFunc(t.CallBacks.onBetActionCallBack,e)},i.prototype.onBetInfo=function(e){this.applyFunc(t.CallBacks.onBetInfoCallBack,e)},i.prototype.onGameBetInfo=function(e){this.applyFunc(t.CallBacks.onGameBetInfoCallBack,e)},i.prototype.onExchange=function(e){this.applyFunc(t.CallBacks.onExchangeCallBack,e)},i.prototype.onChart=function(e){this.applyFunc(t.CallBacks.onChartCallBack,e)},i.prototype.onRanking=function(e){this.applyFunc(t.CallBacks.onRankingCallBack,e)},i.prototype.onOnlineCount=function(e){this.applyFunc(t.CallBacks.onOnlineCountCallBack,e)},i.prototype.onLimit=function(t){this.model.limits=t.limits},i.prototype.requestExitDesk=function(){this.sendLeaveDesk(GameModuleMgr.i.getCurrDeskId())},i.prototype.requestChip=function(e){this.send(t.ProxyConst.CHIPS_RECORD_Q,e)},i.prototype.requestBet=function(e){this.send(t.ProxyConst.BET_Q,e)},i.prototype.requestRanking=function(e){this.send(t.ProxyConst.RANKING_Q,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.addListener(t.ProxyConst.GAME_STATE_N,this.onGameState,this),this.addListener(t.ProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.addListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.addListener(t.ProxyConst.GAME_RESULT_N,this.onGameResult,this),this.addListener(t.ProxyConst.BET_R,this.onBet,this),this.addListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.addListener(t.ProxyConst.BET_INFO_N,this.onBetInfo,this),this.addListener(t.ProxyConst.GAME_BET_INFO_N,this.onGameBetInfo,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchange,this),this.addListener(t.ProxyConst.CHART_N,this.onChart,this),this.addListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.addListener(t.ProxyConst.ONLINE_COUNT_N,this.onOnlineCount,this),this.addListener(t.ProxyConst.LIMIT_N,this.onLimit,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.removeListener(t.ProxyConst.GAME_STATE_N,this.onGameState,this),this.removeListener(t.ProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.removeListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.removeListener(t.ProxyConst.GAME_RESULT_N,this.onGameResult,this),this.removeListener(t.ProxyConst.BET_R,this.onBet,this),this.removeListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.removeListener(t.ProxyConst.BET_INFO_N,this.onBetInfo,this),this.removeListener(t.ProxyConst.GAME_BET_INFO_N,this.onGameBetInfo,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchange,this),this.removeListener(t.ProxyConst.CHART_N,this.onChart,this),this.removeListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.removeListener(t.ProxyConst.ONLINE_COUNT_N,this.onOnlineCount,this),this.removeListener(t.ProxyConst.LIMIT_N,this.onLimit,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"lhd.GameProxy")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"lhd","GameSkin")||this;return i.starArr=[],i.BetBox.initComponent(t),i.JeButton.initComponent(t),i.LoginBtn.initComponent(t),i.ToolBar.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){this.MsgInfo.allPlayerDisplay(),this.MsgInfo.initInfo(),this.BetBox.createHeadPosition(),this.LoginBtn.open(),this.CardView.open(),this.Timer.open(),this.initBroadcast(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BetBox.addEvent(),this.ChartView.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BetBox.removeEvent(),this.ChartView.removeEvent()},i.prototype.setUserInfo=function(t){this.MsgInfo.setUserName(t.getNickName()),this.MsgInfo.setUserImage("ui_headImg_"+t.getAvatar()),this.MsgInfo.setUserFrame("ui_headBox_"+t.getAvatarBox()),this.setUserMoney(App.CommonUtils.money2Str(t.getMoney()))},i.prototype.changeOnlineNum=function(t){this.ToolBar.changeOnlineNum(""+t)},i.prototype.setUserBet=function(t){this.MsgInfo.setUserBet(""+t)},i.prototype.playerDisplay=function(t){this.MsgInfo.playerDisplay(t)},i.prototype.setPluteImage=function(t,e){this.MsgInfo.setPluteImage(t,e)},i.prototype.setPluteName=function(t,e){this.MsgInfo.setPluteName(t,e)},i.prototype.specialPlayerMoney=function(t,e){this.MsgInfo.specialPlayerMoney(t,e)},i.prototype.avatarShake=function(t){this.MsgInfo.avatarShake(t)},i.prototype.starFly=function(t){var e=this.MsgInfo.getPoint(),i=this.BetBox.getParabolicPoint(t),o=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,i,o,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},i.prototype.hideStar=function(){this.BetBox.hideStar()},i.prototype.setUserMoney=function(t){this.MsgInfo.setUserMoney(t)},i.prototype.setIssue=function(t){this.Issue.text="期号:"+t},i.prototype.setJeButton=function(t){this.JeButton.createChip(t),this.setchipValue(1)},i.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},i.prototype.betStartAni=function(){this.BetAnimation.playAni(0)},i.prototype.betStopAni=function(){this.BetAnimation.playAni(1)},i.prototype.startTimer=function(t){this.Timer.startTimer(t)},i.prototype.showTimer=function(){this.Timer.showTimer()},i.prototype.hideTimer=function(){this.Timer.hideTimer()},i.prototype.toggleBtn=function(t){this.JeButton.toggleBtn(t)},i.prototype.ShowHandlightBtn=function(){this.JeButton.ShowHandlightBtn()},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle(this._controller),this.GroupShuffle.addChild(this.shuffle)),this.shuffle.init(),this.shuffle.x=0,this.shuffle.y=0,this.shuffle.scaleX=this.shuffle.scaleY=1,this.shuffle.alpha=1,this.shuffle.goToWash(),this.shuffle.addPlayEndCallBack(function(){this.dealCard()}.bind(this),this._controller)},i.prototype.dealCard=function(){this.CardView.dealCard()},i.prototype.putCard=function(){this.CardView.putCard()},i.prototype.openCard=function(t,e){this.CardView.openCard(t,e)},i.prototype.showCard=function(t,e){this.CardView.showCard(t,e)},i.prototype.runWinner=function(t){this.CardView.runWinner(t)},i.prototype.showWinner=function(t){this.CardView.showWinner(t)},i.prototype.clearCard=function(){this.CardView.clearCard()},i.prototype.clearWinner=function(){this.CardView.clearWinner()},i.prototype.showBetMoney=function(t){this.BetBox.showBetMoney(t)},i.prototype.showSelfBet=function(t){this.BetBox.showSelfBet(t)},i.prototype.showMyPreBet=function(t){this.BetBox.showMyPreBet(t)},i.prototype.initCoinArr=function(){this.BetBox.initCoinArr()},i.prototype.playerWinMoney=function(t,e){this.MsgInfo.playerWinMoney(App.CommonUtils.money(t),e)},i.prototype.betToPlaceAni=function(t,e,i){this.BetBox.betToPlaceAni(t,e,i)},i.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},i.prototype.coinAniClear=function(t,e){this.BetBox.coinAniClear(t),R.setTimeOnce(function(){e.forEach(function(t){this.MsgInfo.getMoneyLight(t)}.bind(this))},this,600)},i.prototype.clearCoin=function(){this.BetBox.clearCoin()},i.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},i.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},i.prototype.renderChart=function(t){this.ChartView.renderChart(t)},i.prototype.renderApproach=function(t){this.ChartView.renderApproach(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shuffle&&(this.shuffle.destroy(),this.shuffle=void 0),this.BetBox.destroy(),this.JeButton.destroy(),this.LoginBtn.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.Timer.destroy()},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"lhd.GameView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"lhd","PopSkin")||this;return i.SetChip.initComponent(e),i.Prompt.initComponent(e),i}return __extends(e,t),e.prototype.initUI=function(){this.SetChip.getcoordinate(),this.SetChip.createChip(),this.Help.initUI()},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.SetChip.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.SetChip.removeEvent()},e.prototype.showChipSet=function(){this.SetChip.showMenu()},e.prototype.setDefaultChip=function(t){this.SetChip.setDefaultChip(t)},e.prototype.initGameSet=function(){this.GameSet.initSet()},e.prototype.showHelp=function(){this.Help.showPopup()},e.prototype.showGameSet=function(){this.GameSet.showPopup()},e.prototype.showWinRecord=function(){this.WinningRecord.showPopup()},e.prototype.renderWinRecord=function(t){this.WinningRecord.rankData(t)},e.prototype.showRanking=function(){this.Ranking.showPopup()},e.prototype.renderRanking=function(t){this.Ranking.rankData(t)},e.prototype.showPrompt=function(t,e,i,o){this.Prompt.showPrompt(t,e,i,o)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.SetChip.destroy(),this.Prompt.destroy()},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"lhd.PopView")}(lhd||(lhd={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("common.comBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("common.comBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.comBones=e,__reflect(e.prototype,"common.comBones")}(common||(common={}));var common;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mIndex=0,i._mIsInPool=!1,i.touchEnabled=!1,i.touchChildren=!1,i._mRender=t.comBones.create(),i._mRender.updateId("star_1"),i._mStarList=[],i}return __extends(i,e),i.create=function(){if(!(i.StarList.length>3)){var t=ObjectPool.pop("common.StarExpand");return t._mIsInPool=!1,i.StarList.push(t),t}},i.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clear(),i.c(),ObjectPool.push(t))},i.c=function(t){void 0===t&&(t=!1);for(var e=i.StarList,o=e.length,n=o-1;n>=0;n--){var s=e[n];t?(e.splice(n,1),s.destroy()):s._mIsInPool&&e.splice(n,1)}},i.cleanFormPool=function(){t.comBones.cleanFormPool(),i.c(!0),ObjectPool.clearClass("common.StarExpand","destroy")},i.prototype.init=function(t){this._mParent=t,this._mParent&&!this.parent&&(this._mParent.addChild(this),this.addChild(this._mRender))},i.prototype.run=function(t,e,o,n,s,r,a){this.play(),this.runParabola(t,e,o,n,function(){i.realese(this),s&&s.call(r,a)}.bind(this),this)},i.prototype.play=function(){this._mRender.play(999),this._mIndex=0,App.TimerManager.doTimer(80,999,this.callBackFind,this)},i.prototype.callBackFind=function(){var e=this._mStarList,i=e[this._mIndex++];i||(i=t.comBones.create(),i.blendMode=egret.BlendMode.ADD,i.updateId("star_0"),this._mStarList.push(i)),i.parent||this._mParent.addChild(i),i.setPosition(this.x,this.y),i.play(1,2),i.addPlayEndCallBack(function(t){R.removeFromParent(i)}.bind(this,i),this)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren(),this._mIndex=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mRender&&this._mRender.destroy();for(var t=this._mStarList;t.length;){var i=t.pop();i&&i.destroy()}this._mRender=void 0,this._mParent=void 0,this._mStarList=void 0},i.StarList=[],i}(ActionExpand);t.StarExpand=e,__reflect(e.prototype,"common.StarExpand")}(common||(common={}));var common;!function(t){var e=function(){function e(){}return e.prototype.init=function(){this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this._mchipColor=0,this._mchipValue=0,this.mIsX=0,this.mIsY=0},e.prototype.setChipId=function(t){this._mChipId=t},e.prototype.getChipId=function(){return this._mChipId},e.prototype.setplaceId=function(t){this._placeId=t},e.prototype.getplaceId=function(){return this._placeId},e.prototype.getTexture=function(){return t.ChipTextures.getPokerTexture(this._mchipValue)},e.prototype.getText=function(){return this.chiplist[this._mchipValue]},e.prototype.setColor=function(t){this._mchipColor=t},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.chipAura=function(t){this._mchipAura=t},e.prototype.setValue=function(t){this._mchipValue=t},e.prototype.getColor=function(){return this._mchipColor},e.prototype.getchipAura=function(){return this._mchipAura},e.prototype.getValue=function(){return this._mchipValue},e.prototype.destroy=function(){},e}();t.ChipData=e,__reflect(e.prototype,"common.ChipData")}(common||(common={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._mInit=!0,this._mchipAura=new eui.Image,this.addChild(this._mchipAura),this._mIcon=new eui.Image,this.addChild(this._mIcon),this.BtnText=new eui.Label,this.addChild(this.BtnText),this._mMask=new eui.Image,this.addChild(this._mMask)},e.prototype.refreshIcon=function(t){this._mIcon.texture=t.getTexture(),this.BtnText.text=t.getText()?t.getText():""},e.prototype.addEvent=function(){},e.prototype.addMask=function(){this._mMask.texture=RES.getRes("bjl_common_json.common_ui_zhezhao"),this._mMask.alpha=0,this._mMask.touchEnabled=!1},e.prototype.addAura=function(){this._mchipAura.texture=RES.getRes("bjl_common_json.common_ui_g1"),this._mchipAura.alpha=0,this._mchipAura.touchEnabled=!1},e.prototype.setopennes=function(t){this._mIcon.alpha=t},e.prototype.setTextField=function(){this.BtnText.horizontalCenter=-3,this.BtnText.verticalCenter=-5,this.BtnText.width=80,this.BtnText.fontFamily="Microsoft YaHei",this.BtnText.size=22,this.BtnText.textColor=16777215,this.BtnText.textAlign=egret.HorizontalAlign.CENTER,this.BtnText.touchEnabled=!1},e.prototype.showMask=function(){this._mMask.visible=!0},e.prototype.hideMask=function(){this._mMask.visible=!1},e.prototype.touchIcon=function(){this._mIcon.touchEnabled=!0},e.prototype.Iconclose=function(){this._mIcon.touchEnabled=!1},e.prototype.clean=function(){this._mIcon.texture=void 0},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean(),this.removeChild(this._mIcon))},e}(eui.Component);t.ChipIcon=e,__reflect(e.prototype,"common.ChipIcon")}(common||(common={}));var common;!function(t){var e=function(){function t(){}return t.getPokerTexture=function(e){var i;i="common_ui_"+e+"_png";var o=t._mPokerTextures;return o[i]||(o[i]=RES.getRes(i)),o[i]},t.cleanAll=function(){var e=t._mPokerTextures;for(var i in e)e[i]=void 0},t._mPokerTextures={},t}();t.ChipTextures=e,__reflect(e.prototype,"common.ChipTextures")}(common||(common={}));var common;!function(t){var e=function(){function e(t,e){this._mInit=!1,this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this.onCreate(),this.init(t,e)}return e.prototype.onCreate=function(){this._mData=new t.ChipData,this._mIcon=new t.ChipIcon},e.prototype.init=function(t,e){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setValue(t),this.setChipId(e))},e.prototype.add2Stage=function(t){this._mInit&&(this._mParent=t,console.log("添加到舞台",this._mParent,this._mIcon),this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.addAura(),this.setTextField(),this.hideMask()))},e.prototype.removeFromParent=function(){this._mInit&&this._mIcon.parent&&this._mParent.removeChild(this._mIcon)},e.prototype.addToContainer=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||this._mParent.addChild(this._mIcon))},e.prototype.setChipId=function(t){this._mData.setChipId(t)},e.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},e.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},e.prototype.addAura=function(){this._mInit&&this._mIcon.addAura()},e.prototype.moveTo=function(){console.log("moveTo"),console.log(this._mIcon.parent);var t=this._mData.getFlyX(),e=this._mData.getFlyY(),i=this._mData.getFlyChipX(),o=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:t,y:e,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this._mIcon).to({x:i,y:o},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))}.bind(this))},e.prototype.moveFlyBet=function(){var t=this._mData.getFlyX(),e=this._mData.getFlyY();egret.Tween.get(this._mIcon).to({x:t,y:e},300,egret.Ease.sineInOut)},e.prototype.moveFlyhead=function(){var t=this._mData.getFlyChipX(),e=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:t,y:e},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))},e.prototype.setTextField=function(){this._mInit&&this._mIcon.setTextField()},e.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},e.prototype.touchIcon=function(){this._mIcon&&(this._mIcon.touchEnabled=!0,this._mIcon.touchChildren=!0)},e.prototype.Iconclose=function(){this._mIcon&&(this._mIcon.touchEnabled=!1,this._mIcon.touchChildren=!1)},e.prototype.setopennes=function(t){this._mIcon.setopennes(t)},e.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},e.prototype.setScore=function(){this._mIcon.setScore()},e.prototype.setFlyX=function(t){this._mData.setFlyX(t)},e.prototype.setFlyY=function(t){this._mData.setFlyY(t)},e.prototype.getFlyX=function(){return this._mData.getFlyX()},e.prototype.getFlyY=function(){return this._mData.getFlyY()},e.prototype.setFlyChipX=function(t){this._mData.setFlyChipX(t)},e.prototype.setFlyChipY=function(t){this._mData.setFlyChipY(t)},e.prototype.getFlyChipX=function(){return this._mData.getFlyChipX()},e.prototype.getFlyChipY=function(){return this._mData.getFlyChipY()},e.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mParent.removeChild(this._mIcon),console.log("this._mIcon  clean",this))},Object.defineProperty(e.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),e.prototype.getChipId=function(){return this._mData.getChipId()},e.prototype.setplaceId=function(t){this._mData.setplaceId(t)},e.prototype.getplaceId=function(){return this._mData.getplaceId()},Object.defineProperty(e.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._mIcon.x},set:function(t){this._mIcon.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._mIcon.y},set:function(t){this._mIcon.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(t){this._mIcon.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(t){this._mIcon.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(t){this._mIcon.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(t){this._mIcon.anchorOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(t){this._mIcon.anchorOffsetY=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){this._mData.setColor(t)},e.prototype.setValue=function(t){this._mData.setValue(t)},e.prototype.setIsBottom=function(t){this._mIsBottom=t},e.prototype.getData=function(){return this._mData},e.prototype.getIcon=function(){return this._mIcon},e.prototype.destroy=function(){this._mIcon&&egret.Tween.removeTweens(this._mIcon),this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mData=void 0,this._mIcon=void 0,this._mParent=void 0},e}();t.chipUIBtn=e,__reflect(e.prototype,"common.chipUIBtn")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"BetAnimationSkin")||this;return i._approach=null,i}return __extends(i,e),i.prototype.playAni=function(t){this.diceAnimation(t)},i.prototype.diceAnimation=function(t){this.diceInit(t),this.diceInitRenders(t),this._approach.play(1),this.overDiceAnimation()},i.prototype.diceInit=function(e){this._approach||(this._approach=new t.comBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="bet_"+t;this._betPos.addChild(this._approach),this._approach.updateId(e);var i=this._betPos.width/2,o=this._betPos.height/2;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this._betPos.removeChild(this._approach))
},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._approach.destroy(),this._approach=void 0},i}(BaseEuiComponent);t.BetAnimation=e,__reflect(e.prototype,"common.BetAnimation")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){return t.call(this,"ChartBead")||this}return __extends(e,t),e.prototype.renderBead=function(t,e){this.GroupBead.removeChildren();var i=0,o=0;t.length&&t.forEach(function(t,n){var s=new eui.Image,r=n/6;i=24*parseInt(String(r)),n%6==0&&(o=0),s.x=i,s.y=o,s.source=e+"_ui_bead_"+t+"_png",o+=24,this.GroupBead.addChild(s)}.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.ChartBead=e,__reflect(e.prototype,"common.ChartBead")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"ChartOther")||this;return i.curWinner=-1,i.largeArr=[],i.copyLargeArr=[],i.bigEyeResultArr=[],i.bigEyeEndArr=[],i.smallResultArr=[],i.smallEndArr=[],i.xiaoQiangResultArr=[],i.xiaoQiangEndArr=[],i}return __extends(e,t),e.prototype.renderOtherChart=function(t,e){this.renderLargeRoad(e,t),this.renderBigEyeRoad(e),this.renderSmallRoad(e),this.renderXiaoQiangRoad(e)},e.prototype.renderLargeRoad=function(t,e){this.copyLargeArr.length=0,this.GroupLargeRoad.removeChildren(),this.createLargeRoadPos(e),this.copyLargeArr.length&&this.copyLargeArr.forEach(function(e){e.forEach(function(e){var i=new eui.Image;i.x=12*(e.x-1),i.y=12*(e.y-1),i.source=t+"_ui_dl_"+e.winner+"_png",this.GroupLargeRoad.addChild(i)}.bind(this))}.bind(this))},e.prototype.renderBigEyeRoad=function(t){this.bigEyeResultArr.length=0,this.bigEyeEndArr.length=0,this.GroupBigEyeRoad.removeChildren(),this.createBigEyeRoadResult(),this.bigEyeEndArr.forEach(function(e){e.forEach(function(e){var i=new eui.Image;i.x=6*(e.x-1),i.y=6*(e.y-1),i.source=t+"_ui_dyl_"+e.winner+"_png",this.GroupBigEyeRoad.addChild(i)}.bind(this))}.bind(this))},e.prototype.renderSmallRoad=function(t){this.smallResultArr.length=0,this.smallEndArr.length=0,this.GroupSmallRoad.removeChildren(),this.createSmallRoadResult(),this.smallEndArr.forEach(function(e){e.forEach(function(e){var i=new eui.Image;i.x=6*(e.x-1),i.y=6*(e.y-1),i.source=t+"_ui_xl_"+e.winner+"_png",this.GroupSmallRoad.addChild(i)}.bind(this))}.bind(this))},e.prototype.renderXiaoQiangRoad=function(t){this.xiaoQiangResultArr.length=0,this.xiaoQiangEndArr.length=0,this.GroupXiaoQiangRoad.removeChildren(),this.createXiaoQiangRoadResult(),this.xiaoQiangEndArr.forEach(function(e){e.forEach(function(e){var i=new eui.Image;i.x=6*(e.x-1),i.y=6*(e.y-1),i.source=t+"_ui_xql_"+e.winner+"_png",this.GroupXiaoQiangRoad.addChild(i)}.bind(this))}.bind(this))},e.prototype.createLargeRoadPos=function(t){this.createArr(t,this.largeArr),this.copyLargeArr=JSON.parse(JSON.stringify(this.largeArr)),this.removeLargeData(this.copyLargeArr,20)},e.prototype.createArr=function(t,e){e.length=0,this.curWinner=-1;var i=[];e.push(i),t.length&&t.forEach(function(t,o){if(-1==this.curWinner){var n={x:1,y:1,winner:t};i.push(n),2!=t&&(this.curWinner=t)}else if(t==this.curWinner)this.rederLargeCurrentList(t,e),this.curWinner=t;else if(2==t){var s=e[e.length-1],r=s[s.length-1].x,a=s[s.length-1].y,n={x:r,y:a,winner:t};s.push(n)}else{var h=[],l=e.indexOf(e[e.length-1]),n={x:l+2,y:1,winner:t};h.push(n),e.push(h),this.curWinner=t}}.bind(this))},e.prototype.createBigEyeEndArr=function(t){this.createArr(t,this.bigEyeEndArr),this.removeLargeData(this.bigEyeEndArr,40)},e.prototype.createSmallEndArr=function(t){this.createArr(t,this.smallEndArr),this.removeLargeData(this.smallEndArr,20)},e.prototype.createXiaoQiangEndArr=function(t){this.createArr(t,this.xiaoQiangEndArr),this.removeLargeData(this.xiaoQiangEndArr,20)},e.prototype.reformLargeArr=function(){var t=JSON.parse(JSON.stringify(this.largeArr));return t.forEach(function(t){t.forEach(function(e,i){2==e.winner&&t.splice(i,1)}.bind(this))}.bind(this)),t},e.prototype.createBigEyeRoadResult=function(){var t=this.reformLargeArr();this.createResultArr(t,this.bigEyeResultArr,1),this.createBigEyeEndArr(this.bigEyeResultArr)},e.prototype.createSmallRoadResult=function(){var t=this.reformLargeArr();this.createResultArr(t,this.smallResultArr,2),this.createSmallEndArr(this.smallResultArr)},e.prototype.createXiaoQiangRoadResult=function(){var t=this.reformLargeArr();this.createResultArr(t,this.xiaoQiangResultArr,3),this.createXiaoQiangEndArr(this.xiaoQiangResultArr)},e.prototype.createResultArr=function(t,e,i){var o=i;if(t.length>o)for(var n=o;n<t.length;n++)for(var s=0;s<t[n].length;s++)if(n==o){if(s>0){var r=void 0;r=t[n-o].length==s?1:0,e.push(r)}}else{var r=void 0;r=0==s?t[n-o-1].length==t[n-1].length?0:1:t[n-o].length==s?1:0,e.push(r)}},e.prototype.rederLargeCurrentList=function(t,e){var i,o=e[e.length-1],n=o[o.length-1].x,s=o[o.length-1].y;i=6>s&&2==this.isRenderListLine(n,s+1,t,e)?{x:n,y:s+1,winner:t}:{x:n+1,y:s,winner:t},o.push(i)},e.prototype.isRenderListLine=function(t,e,i,o){var n,s,r;if(o.length>1){var a=o[0];if(o.length>2)for(var h=1;h<o.length-1;h++)a=a.concat(o[h]);var l=[];a.forEach(function(o){l.push(o.x),s=l.indexOf(t),r=l.indexOf(t-1),n=s>-1?a[s].y==e?1:a[s].y==e+1&&a[s].winner==i?1:2:r>-1&&a[r].y==e&&a[r].winner==i?1:2})}else n=2;return n},e.prototype.removeLargeData=function(t,e){t.length&&t.forEach(function(i){i.length&&i[i.length-1].x>e&&(t.splice(0,1),this.moveLeftLarge(t),this.removeLargeData(t,e))}.bind(this))},e.prototype.moveLeftLarge=function(t){t.forEach(function(t){t.forEach(function(t){t.x--})})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.largeArr=void 0,this.copyLargeArr=void 0,this.bigEyeResultArr=void 0,this.bigEyeEndArr=void 0,this.smallResultArr=void 0,this.smallEndArr=void 0,this.xiaoQiangResultArr=void 0,this.xiaoQiangEndArr=void 0},e}(BaseEuiComponent);t.ChartOther=e,__reflect(e.prototype,"common.ChartOther")}(common||(common={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e.chiplist=[1,5,10,20,50,100,200,500,1e3,0],e.skinName="chipBtn",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("common.chipBtn");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanchipBtnPool=function(){ObjectPool.clearClass("common.chipBtn","destroy")},e.prototype.init=function(t,e){this.setNameNum(t),this.setBtnValue(t),this.setBtntextValue(),this.setBtnChip(t,e)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.setBtnText=function(t){this.BtnText.text=this._mchipValue?this._mchipValue*t+"":""},e.prototype.setBtnValue=function(t){this._mchipValue=this.chiplist[t]},e.prototype.setBtntextValue=function(){this.BtnText.text=this._mchipValue?this._mchipValue+"":""},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.moveTo=function(){var t=this.mIsX,e=this.mIsY,i=this._flyX,o=this._flyY;egret.Tween.get(this).to({x:t,y:e,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this).to({x:i,y:o},300,egret.Ease.sineInOut).call(function(){this.destroy()}.bind(this))}.bind(this))},e.prototype.moveToPlace=function(t){this.setScore(),egret.Tween.get(this).wait(t).to({x:this._flyX,y:this._flyY,alpha:1},350,egret.Ease.sineInOut).call(function(){this.destroy()}.bind(this))},e.prototype.setBtnChip=function(t,e){this._chip.source="common_ui_"+(e?e+t:t)+"_png",this.BtnLight.source="common_ui_g"+t+"_png"},e.prototype.setNameNum=function(t){this._mChipId=t},e.prototype.getNameNum=function(){return this._mChipId},e.prototype.getChipNum=function(t){return this._mchipValue*t},e.prototype.stopChip=function(){this._btnchip.touchEnabled=!1},e.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._chip.$bitmapData=void 0,this._chip.texture=void 0,this._chip.source=void 0,this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mchipValue=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.chipBtn=e,__reflect(e.prototype,"common.chipBtn")}(common||(common={}));var common;!function(t){var e=function(){function t(){t.CoinPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createCoin=function(){var e=t.CoinPool.pop();return e||(e=new i),e.init(),e},t.prototype.releaseCoin=function(e){return egret.is(e,"Coin")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.CoinPool.unshift(e)):void egret.warn(e,"is not Coin")},t.prototype.clear=function(){for(;t.CoinPool.length;)t.CoinPool.pop().destroy()},t._i=null,t.CoinPool=null,t}();t.CoinFactory=e,__reflect(e.prototype,"common.CoinFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._isRelease=!1,e.skinName="CoinSkin",e}return __extends(e,t),e.prototype.init=function(){this._isRelease=!1},e.prototype.refresh=function(t,e,i,o){this.coinSrc.source=t,this.coinText.text=""+e,i&&(this.x=i),o&&(this.y=o)},Object.defineProperty(e.prototype,"isRelease",{get:function(){return this._isRelease},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._isRelease=!0,this.coinSrc.source=void 0,this.coinSrc.texture=void 0,R.removeFromParent(this),egret.Tween.removeTweens(this)},e.prototype.destroy=function(){this.clear()},e}(eui.Component);__reflect(i.prototype,"Coin")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"GameSetSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initSet=function(){this.openMusic(),this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},e.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},e.prototype.showPopup=function(){this.visible=!0,this.SetBg.visible=!0,this.SetMenu.scaleX=this.SetMenu.scaleY=0,App.EffectUtils.showUI(this.SetMenu)},e.prototype.closePoput=function(){this.SetBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.SetMenu,200,0,function(){t.visible=!1})},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.onOpen=function(t){App.SoundManager.playEffect("click_mp3"),console.log("onOpen"),console.log(t.currentTarget)},e.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0)},e.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0)},e.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1)},e.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.removeEvent=function(){this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"common.GameSet")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"JeButtonSkin")||this;return i._chipList=[],i}return __extends(i,e),i.prototype.createChip=function(e){this.reMoveChip();for(var i=0;5>i;i++){var o=e[i],n=this["_btn_"+i],s=t.chipBtn.create();s.init(o),s.x=0,s.y=0,n.addChild(s),this._chipList.push(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,i,o),this)}},i.prototype.reMoveChip=function(){for(;this._chipList.length;){var e=this._chipList.pop();e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.chipBtn.release(e)}},i.prototype.touchBtn=function(t,e){App.SoundManager.playEffect("click_mp3"),this.applyFunc("touch",t,e)},i.prototype.setBtnChip=function(t){if(this._chipList.length)for(var e=0;e<this._chipList.length;e++){var i=this._chipList[e];i.setBtnChip(t[e]),i.setBtnValue(t[e])}},i.prototype.getBtnNum=function(t){return Math.pow(10,t)},i.prototype.toggleBtn=function(t){this.resetBtn(),this.GroupBtn.getChildAt(t).y=-12,this._chipList[t].BtnLight.alpha=1},i.prototype.resetBtn=function(){for(var t=0;5>t;t++)this.GroupBtn.getChildAt(t).y=3,this._chipList[t].BtnLight.alpha=0},i.prototype.disabledBtn=function(){console.log("按钮禁用置灰"),this.resetBtn();for(var t=0;5>t;t++)this._chipList[t].BtnShade.alpha=1,this.GroupBtn.getChildAt(t).touchChildren=!1,this._chipList[t].BtnLight.alpha=0},i.prototype.enableBtn=function(){console.log("按钮启用");for(var t=0;5>t;t++)this._chipList[t].BtnShade.alpha=0,this.GroupBtn.getChildAt(t).touchChildren=!0},i.prototype.chiplight=function(t){this._chipList[t].BtnShade.alpha=0,this.GroupBtn.getChildAt(t).touchChildren=!0},i.prototype.ShowHandBtn=function(t){this.applyFunc("ShowHandBtn",t)},i.prototype.ShowHandlightBtn=function(){},i.prototype.setchipValue=function(t){for(var e=0;5>e;e++)this._chipList[e].setBtnText(t);this.getChipValue(t)},i.prototype.getChipValue=function(t){for(var e=[],i=0,o=0;5>o;o++)i=this._chipList[o].getChipNum(t),e.push(i);this.applyFunc("getChipValue",e)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.reMoveChip(),this.removeEvent(),this.reMoveChip()},i}(BaseEuiComponent);t.JeButton=e,__reflect(e.prototype,"common.JeButton")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"LogicBtnSkin")||this;return i.BtnType=0,i._maskRct=new egret.Rectangle(0,233,30,233),i._rectYYlist=[],i}return __extends(e,t),e.prototype.open=function(){this._closeUI.visible=!1,this._mandi.mask=this._maskRct,this.setAutoConfirm(!0)},e.prototype.confirmBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("confirmBet")},e.prototype.disabledConfirmBet=function(){this.ComfirmBet.enabled=!1},e.prototype.enabledConfirmBet=function(){this.ComfirmBet.enabled=!0},e.prototype.autoConfirm=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("setAutoBet",this.AutoConfirm.selected),console.log("自动投注"),console.log(this.AutoConfirm.selected),this.confirmFrame()},e.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("conserBet")},e.prototype.disabledConserBet=function(){this.ConserBet.enabled=!1},e.prototype.enabledConserBet=function(){this.ConserBet.enabled=!0},e.prototype.setAutoConfirm=function(t){this.AutoConfirm.selected=t},e.prototype.trueBet=function(t){this.ComfirmBet.enabled=!t},e.prototype.betAsh=function(){this.ConserBet.enabled=!1,this.ComfirmBet.enabled=!1},e.prototype.confirmFrame=function(){App.SoundManager.playEffect("click_mp3");var t=this.AutoConfirm.selected;0==t?egret.Tween.get(this._confirmList).to({x:0},100):this.closeConfirmFrame()},e.prototype.closeConfirmFrame=function(){egret.Tween.get(this._confirmList).to({x:221},100)},e.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},e.prototype.showMenu=function(){console.log("加码组件"),App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):(this._closeUI.visible=!1,egret.Tween.get(this.MenuBox0).to({y:297},100)),this.applyFunc("operateAddcounter")},e.prototype.moveMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.setVSlide=function(t){this._thumb.y=t},e.prototype.setCoordinate=function(t,e,i){var o=i?t-18.62:t-28.5,n=i?t-6.62:t-17.5,s=i?t+12.5:t;this.setVSlide(o),this.setMask(s),this.setCardCoordinate(n,e)},e.prototype.setENDCoordinate=function(t,e){for(var i=0;i<this._rectYYlist.length;i++)t>=236?(t=e?this._rectYYlist[0]:235,this.setCoordinate(t,0,e)):t>=this._rectYYlist[9]&&t<this._rectYYlist[8]||t<this._rectYYlist[9]?(t=e?this._rectYYlist[9]:10,this.setCoordinate(t,9,e)):t>=this._rectYYlist[i]&&t<this._rectYYlist[i-1]&&(t=e?this._rectYYlist[i]:t,this.setCoordinate(t,i,e))},e.prototype.setCardCoordinate=function(t,e){var i=e+1;this._LabelMutiple0.text=i+"倍",this._GroupTip.y=t,this.applyFunc("changeMultiple",i)},e.prototype.countHeight=function(t){return this._rect_0.y-Number(this._rect_0.height/2)-t},e.prototype.smailBoxnate=function(){for(var t=0;10>t;t++)this._rectYYlist.push(this["_rect_"+t].y);console.log(this._rectYYlist)},e.prototype.beginMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.endMeun=function(t){var e=t.localY,i=!0;this.setENDCoordinate(e,i),this.retractMenu()},e.prototype.outMeun=function(t){var e=t.localY;if(e>0){var i=235,o=!0;this.setENDCoordinate(i,o)}else{var n=this._rectYYlist[9]+10,o=!0;this.setENDCoordinate(n,o)}},e.prototype.setMask=function(t){var e=233-(251-t);0>=e?e=0:e>=233&&(e=233),this._maskRct.y=e,this._mandi.mask=this._maskRct},e.prototype.ShowsetChip=function(t){this.applyFunc("ShowsetChip")},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0},e.prototype.testtest=function(){console.log("testtest")},e.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},e.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.btnAutoConfirm=function(){this.AutoConfirm.selected=this.AutoConfirm.selected?!1:!0,this.autoConfirm()},e.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ComfirmBet,this.confirmBet,this),App.CommonUtils.effectButton(this.ConserBet,this.conserBet,this),App.CommonUtils.effectButton(this.RepeatBet,this.repeatBet,this),App.CommonUtils.effectButton(this._plusbtn,this.showMenu,this),App.CommonUtils.effectButton(this._setChip,this.ShowsetChip,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this.btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this),this.smailBoxnate()},e.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ComfirmBet),App.CommonUtils.removeButton(this.ConserBet),App.CommonUtils.removeButton(this.RepeatBet),App.CommonUtils.removeButton(this._plusbtn),App.CommonUtils.removeButton(this._setChip),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this.btnAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.LoginBtn=e,__reflect(e.prototype,"common.LoginBtn")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"MessageInfoSkin")||this;return i._mResultPoint=new egret.Point,i}return __extends(i,e),i.prototype.setUserName=function(t){this.UserName.text=t},i.prototype.setUserImage=function(t){this.UserImage.source=t},i.prototype.setUserFrame=function(t){this.UserFrame.source=t},i.prototype.setUserMoney=function(t){this.UserMoney.text=t+""},i.prototype.setUserBet=function(t){this.UserBet.text=t},i.prototype.avatarShake=function(t){console.log("头像抖动效果");var e=this["_Plute"+t],i=(e.x,0);i=1>=t||4==t?10:-10,egret.Tween.get(e).to({rotation:i},50).call(function(){egret.Tween.get(e).to({rotation:0},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.setPluteImage=function(t,e){this["PluteImage"+e].source=t},i.prototype.setPluteName=function(t,e){this["PluteName"+e].text=t},i.prototype.specialPlayerMoney=function(t,e){this["PluteMoney"+e].text=t+""},i.prototype.playerWinMoney=function(t,e){console.log("玩家赢钱金额显示",t,e),this["PluteWinMoney"+e].text="+"+t},i.prototype.playerDisplay=function(t){this.allPlayerDisplay();for(var e=0;t+1>e;e++)this["Plute"+e].visible=!0},i.prototype.allPlayerDisplay=function(){for(var t=0;4>t;t++)this["Plute"+t].visible=!1},i.prototype.getPoint=function(){return this.localToGlobal(this.starPos.x,this.starPos.y,this._mResultPoint),egret.log("_mResultPoint:",this._mResultPoint),this._mResultPoint},i.prototype.initInfo=function(){for(var t=0;5>t;t++)this["PluteWinMoney"+t].alpha=0,this["PluteWinMoney"+t].scaleX=.5,this["PluteWinMoney"+t].scaleY=.5},i.prototype.fontEnlarge=function(t){var e=this["PluteWinMoney"+t];egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({y:e.y-50,alpha:0},300,egret.Ease.sineInOut).call(function(){e.y=e.y+50}.bind(this))},this,1200)},i.prototype.getMoneyLight=function(e){var i=new t.comBones;if(!i.parent){var o=void 0,n=void 0;4==e?(o=this.GroupInfo,n=this.UserImage):(o=this["_Plute"+e],n=this["PluteImage"+e]),o.addChild(i),i.updateId("money_linght"),i.blendMode=egret.BlendMode.ADD;var s=n.x+44,r=n.y+44.5;i.setPosition(s,r),i.play(1),i.addPlayEndCallBack(function(){i.parent&&(i.stopGame(),i.parent.removeChild(i))},this),this.fontEnlarge(e)}},i.prototype.flyCoordinate=function(){for(var t=[],e=0;5>e;e++){var i=this["starPos"+e];i=4>e?this["PluteImage"+e]:this.UserImage;var o=this.localToGlobal(i.x,i.y);egret.log("_mResultPoint:",o),t.push(o)}return t},i.prototype.setInformation=function(t,e,i){if(console.log("setInformation",t,e,i),t){0==t.avatar&&(t.avatar=1),this["PluteImage"+e].source="ui_headImg_"+t.avatar,this["PluteName"+e].text=t.nickname,this["Plute"+e].visible=!0,this.specialPlayerMoney((t.userbalance/1e4).toFixed(2),e);for(var o=3;o>=i;o--)this["Plute"+o].visible=!1}},i}(BaseEuiComponent);t.MessageInfo=e,__reflect(e.prototype,"common.MessageInfo")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"MutipleScrollerSkin")||this;return i.BtnType=0,console.log("controller"),console.log(e),i}return __extends(e,t),e.prototype.showMenu=function(){console.log("加码组件"),App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(console.log(this.applyFunc),this.applyFunc("openVSlider"),egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:315},100)},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:315},100),this.BtnType=0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},e.prototype.removeEvent=function(){this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.MutipleScrller=e,__reflect(e.prototype,"common.MutipleScrller")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"PromptSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.closePoput=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.PromptMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.prompIsShow||(this.visible=!1)}.bind(this))},e.prototype.closeTip=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,egret.Tween.get(this.PromptTip).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.visible=!1}.bind(this))},e.prototype.confirmPoput=function(){App.SoundManager.playEffect("click_mp3"),this.closePoput(),1==this.promptType&&this.applyFunc("confirmLimitBet"),2==this.promptType&&this.applyFunc("confirmShowhand"),6==this.promptType&&this.applyFunc("confirmShowRecharge"),4==this.promptType&&this.applyFunc("confirmShowLimitBet")},e.prototype.showPrompt=function(t,e,i,o){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 1:this.renderType1(e,i,o);break;case 2:this.renderType2(e);break;case 3:this.renderType3(),R.setTimeOnce(function(){this.closePoput()}.bind(this),this,1500)}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this.PromptMenu),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},e.prototype.renderText=function(){this.visible=!0},e.prototype.renderType1=function(t,e,i){this.BtnBox.visible=!0;var o=this.getTextField(39);o.textFlow=[{text:"当前牌桌投注限红为"},{text:e+""},{text:"~"},{text:i+""}],o.x=this.TextBox.width/2-o.textWidth/2,this.TextBox.addChild(o);var n=this.getTextField(80);n.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(n),n.x=this.TextBox.width/2-n.textWidth/2},e.prototype.renderType2=function(t){this.BtnBox.visible=!0;var e=this.getTextField(39);e.textFlow=[{text:"投注金额 "},{text:t,style:{textColor:16045931}}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e);var i=this.getTextField(80);i.textFlow=[{text:"是否梭哈?"}],this.TextBox.addChild(i),i.x=this.TextBox.width/2-i.textWidth/2},e.prototype.renderType3=function(){this.BtnBox.visible=!1;var t=this.getTextField(87);t.textFlow=[{text:"当前牌桌投注限红为"},{text:1e3},{text:"~"},{text:1e4}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},e.prototype.getTextField=function(t){var e=new egret.TextField;return e.y=t,e.fontFamily="Microsoft YaHei",e.size=22,e.textColor=16777215,e.textAlign=egret.HorizontalAlign.CENTER,e},e.prototype.showPromptBrnn=function(t,e){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 4:this.renderBrnnType4(e);break;case 6:this.renderBrnnType6()}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},e.prototype.renderBrnnType4=function(t){console.log("renderBrnnType4"),console.log(t),this.BtnBox.visible=!0;var e=this.getTextField(39);e.textFlow=[{text:"当前牌桌投注限红为"},{text:1},{text:"~"},{text:1e5}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e);var i=this.getTextField(80);i.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(i),i.x=this.TextBox.width/2-i.textWidth/2},e.prototype.renderBrnnType6=function(){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"余额不足，是否前往充值？"}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},e.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Prompt=e,__reflect(e.prototype,"common.Prompt")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"PulsBtn")||this;return i.BtnType=0,i._maskRct=new egret.Rectangle(0,233,30,233),i._rectYYlist=[],i._closeUI.visible=!1,i._mandi.mask=i._maskRct,i}return __extends(e,t),e.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},e.prototype.showMenu=function(){console.log("加码组件"),App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:297},100)},e.prototype.moveMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.setVSlide=function(t){this._thumb.y=t},e.prototype.setCoordinate=function(t,e,i){var o=i?t-18.62:t-28.5,n=i?t-6.62:t-17.5,s=i?t+12.5:t;this.setVSlide(o),this.setMask(s),this.setCardCoordinate(n,e)},e.prototype.setENDCoordinate=function(t,e){for(var i=0;i<this._rectYYlist.length;i++)t>=236?(t=e?this._rectYYlist[0]:235,this.setCoordinate(t,0,e)):t>=this._rectYYlist[9]&&t<this._rectYYlist[8]||t<this._rectYYlist[9]?(t=e?this._rectYYlist[9]:10,this.setCoordinate(t,9,e)):t>=this._rectYYlist[i]&&t<this._rectYYlist[i-1]&&(t=e?this._rectYYlist[i]:t,this.setCoordinate(t,i,e))},e.prototype.setCardCoordinate=function(t,e){var i=e+1;this._LabelMutiple0.text=i+"倍",this._GroupTip.y=t,this.applyFunc("changeMultiple",i)},e.prototype.countHeight=function(t){return this._rect_0.y-Number(this._rect_0.height/2)-t},e.prototype.smailBoxnate=function(){for(var t=0;10>t;t++)this._rectYYlist.push(this["_rect_"+t].y);console.log(this._rectYYlist)},e.prototype.beginMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.endMeun=function(t){var e=t.localY,i=!0;this.setENDCoordinate(e,i),this.retractMenu()},e.prototype.outMeun=function(t){var e=t.localY;if(e>0){var i=235,o=!0;this.setENDCoordinate(i,o)}else{var n=this._rectYYlist[9]+10,o=!0;this.setENDCoordinate(n,o)}},e.prototype.setMask=function(t){var e=233-(251-t);0>=e?e=0:e>=233&&(e=233),this._maskRct.y=e,this._mandi.mask=this._maskRct},e.prototype.ShowsetChip=function(t){this.applyFunc("ShowsetChip")},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0
},e.prototype.testtest=function(){console.log("testtest")},e.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},e.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.RepeatBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this._setChip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this),this.smailBoxnate()},e.prototype.removeEvent=function(){this.RepeatBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._setChip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.PulsBtn=e,__reflect(e.prototype,"common.PulsBtn")}(common||(common={}));var common;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=""+App.CommonUtils.money2Str(this.data.win_money),this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="ui_common_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.RankIcon=e,__reflect(e.prototype,"common.RankIcon")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"RankingSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RankBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)},i.prototype.closePoput=function(){this.RankBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.RankMenu,300,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/public/skins/RankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RankClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RankClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.Ranking=e,__reflect(e.prototype,"common.Ranking")}(common||(common={}));var common;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Issue.text=this.data.issue,this.Winning.text=""+this.data.hit_money)},e}(eui.ItemRenderer);t.RecordIcon=e,__reflect(e.prototype,"common.RecordIcon")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"SetChip")||this;return i.BtnType=0,i.selectPos={},i.pickPos={},i._chipList=[],i._fiyChip=[],i.visible=!1,i._fiyChip=[],i}return __extends(i,e),i.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.pickChip.scaleX=this.pickChip.scaleY=0,this.visible=!0,App.EffectUtils.showUI(this.pickChip)},i.prototype.closePopup=function(){this.retractMenu()},i.prototype.confirmPoput=function(){this._fiyChip.length>=5?(this.applyFunc("getFiveChip",this._fiyChip),this.retractMenu()):App.ScrollTxtTips.showTip("请选择5个筹码，再点击确定，谢谢。")},i.prototype.retractMenu=function(){var t=this;App.EffectUtils.hideUI(this.pickChip,200,0,function(){t.visible=!1})},i.prototype.createChip=function(){for(var e=0;10>e;e++){var i=t.chipBtn.create();i.init(e),i.x=this.pickPos[e].x,i.y=this.pickPos[e].y,this.GroupBtn.addChild(i),this._chipList.push(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,e),this),console.log("生成10个筹码"),console.log(this._chipList)}},i.prototype.touchBtn=function(t){if(App.SoundManager.playEffect("click_mp3"),this._fiyChip.length<6){for(var e=0;e<this._fiyChip.length;e++)if(this._fiyChip[e]==t)return this._fiyChip.splice(e,1),this.setFlyPos(),void this.flyChip(t);this._fiyChip.length<5&&(this._fiyChip.push(t),this.setFlyPos(),this.flyChip(t))}},i.prototype.getFiveChip=function(){return this._fiyChip},i.prototype.initChip=function(){for(var t=0;t<this._fiyChip.length;t++){var e=this._fiyChip[t],i=this._chipList[e],o=this.pickPos[e].x,n=this.pickPos[e].y;i.x=o,i.y=n}this._fiyChip=[]},i.prototype.getcoordinate=function(){for(var t=this._pickChip,e=this._pickChip0,i=this._selectChip,o=0;5>o;o++)this.pickPos[o+0]={x:t.x+99.67*o,y:t.y},this.pickPos[o+5]={x:e.x+99.67*o,y:e.y},this.selectPos[o+0]={x:i.x+105.35*o,y:i.y};console.log("筹码坐标"),console.log(this.pickPos),console.log(this.selectPos)},i.prototype.flyChip=function(t){console.log("飞筹码");var e=0,i=0;if(-1==this._fiyChip.indexOf(t)){this.initialPos(t);for(var o=0;o<this._fiyChip.length;o++)this.horizontalMove(o)}else for(var n=0;n<this._fiyChip.length;n++){var s=this._chipList[t];this._fiyChip[n]==t?(console.log("this._fiyChip[k] == _index"),console.log(n),console.log(s),console.log(this._chipList),e=this.selectPos[n].x,i=this.selectPos[n].y,egret.Tween.get(s).to({x:e,y:i},300,egret.Ease.sineInOut)):this.horizontalMove(n)}console.log(this._fiyChip)},i.prototype.initialPos=function(t){var e=this._chipList[t],i=this.pickPos[t].x,o=this.pickPos[t].y;egret.Tween.get(e).to({x:i,y:o},300,egret.Ease.sineInOut)},i.prototype.horizontalMove=function(t){var e=this._chipList[this._fiyChip[t]],i=this.selectPos[t].x,o=this.selectPos[t].y;egret.Tween.get(e).to({x:i,y:o},300,egret.Ease.sineInOut)},i.prototype.setFlyPos=function(){this._fiyChip.length>=2&&this._fiyChip.sort()},i.prototype.setDefaultChip=function(t){this.initChip();for(var e=0;e<t.length;e++){var i=t[e],o=this._chipList[i];o.x=this.selectPos[e].x,o.y=this.selectPos[e].y}this._fiyChip=[].concat(t)},i.prototype.clearChip=function(){for(var e=this._chipList;e.length;){var i=e.pop();i&&t.chipBtn.release(i)}},i.prototype.clearflyChip=function(){this._fiyChip.length=0},i.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},i.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearChip(),this.clearflyChip(),this.selectPos={},this.pickPos={},t.chipBtn.cleanchipBtnPool()},i}(BaseEuiComponent);t.SetChip=e,__reflect(e.prototype,"common.SetChip")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"ToolBarSkin")||this;return i.BtnType=0,i._approach=null,i.boneList=[],i.boneName=["light","sweep"],i}return __extends(i,e),i.prototype.showMenu=function(t){var e=t.currentTarget;this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(e.source="ui_set_json.common_ui_xlh",egret.Tween.get(this.MenuBox).to({y:0},100)):(e.source="ui_set_json.common_ui_xl",egret.Tween.get(this.MenuBox).to({y:-245},100)),this.applyFunc("btnShowMenu")},i.prototype.moveCharge=function(){this.moneyGroup.right=112},i.prototype.changeOnlineNum=function(t){this.OnlineNum.text=t},i.prototype.hideBtnOnlineNum=function(){this.BtnOnline.visible=!1},i.prototype.backToLobby=function(){this.applyFunc("backToLobby")},i.prototype.showHelp=function(){this.applyFunc("showHelp")},i.prototype.showRank=function(){this.applyFunc("showRank")},i.prototype.showRecord=function(){this.applyFunc("showRecord")},i.prototype.showGameSet=function(){this.applyFunc("showGameSet")},i.prototype.rechargeMoney=function(){console.log("充值接口"),this.applyFunc("rechargeMoney")},i.prototype.onlineShake=function(){console.log("在线人数抖动效果");var t=this.BtnOnline,e=t.x,i=10,o=15;egret.Tween.get(t).to({rotation:i,x:o},50).call(function(){egret.Tween.get(t).to({rotation:0,x:e},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.getAllMoneyLight=function(){var e=new t.comBones;if(!e.parent){this.BtnOnline.addChild(e),e.updateId("money_linght"),e.blendMode=egret.BlendMode.ADD;var i=this.BtnOnline.getChildAt(0).x+44,o=this.BtnOnline.getChildAt(0).y+44.5;e.setPosition(i,o),e.play(1),e.addPlayEndCallBack(function(){e.parent&&(e.stopGame(),e.parent.removeChild(e))},this)}},i.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},i.prototype.diceInit=function(){if(!this.boneList.length)for(var e=0;2>e;e++){var i=t.comBones.create();this.boneList.push(i)}},i.prototype.diceInitRenders=function(){for(var t=0;2>t;t++)if(!this.boneList[t].parent){var e=this.boneName[t];this.moneyGroup.addChild(this.boneList[t]),this.boneList[t].updateId(e);var i=this._recharge.x+43.5,o=this._recharge.y+43.5;this.boneList[t].setPosition(i,o),this.boneList[t].play(0)}},i.prototype.individualAward=function(){for(var e=function(){var e=new t.comBones,n="sweep"+o;e.updateId(n),i.moneyGroup.addChild(e);var s=i._recharge.x,r=i._recharge.y;e.setPosition(s,r),e.play(1),e.addPlayEndCallBack(function(){e.parent&&this.moneyGroup.removeChild(e)},i)},i=this,o=0;2>o;o++)e()},i.prototype.clearbone=function(){for(var e=this.boneList;e.length;){var i=e.pop();t.comBones.realese(i)}},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this,{}),App.CommonUtils.effectButton(this.BtnOnline,this.showRank,this,{}),App.CommonUtils.effectButton(this.BtnRecord,this.showRecord,this,{}),App.CommonUtils.effectButton(this.BtnSet,this.showGameSet,this,{}),App.CommonUtils.effectButton(this.BtnBack,this.backToLobby,this,{}),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this,{}),App.CommonUtils.effectButton(this._recharge,this.rechargeMoney,this,{})},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.BtnOnline),App.CommonUtils.removeButton(this.BtnRecord),App.CommonUtils.removeButton(this.BtnSet),App.CommonUtils.removeButton(this.BtnBack),App.CommonUtils.removeButton(this.BtnHelp),App.CommonUtils.removeButton(this._recharge)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),App.TimerManager.removeAll(this),this.clearbone()},i}(BaseEuiComponent);t.ToolBar=e,__reflect(e.prototype,"common.ToolBar")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){return t.call(this,"VSliderSkin")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(BaseEuiComponent);t.VSliderSkin=e,__reflect(e.prototype,"common.VSliderSkin")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"WinningRecordSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.RecordMenu.scaleX=this.RecordMenu.scaleY=0,App.EffectUtils.showUI(this.RecordMenu)},i.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.RecordMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/public/skins/RecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RecordClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RecordClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.WinningRecord=e,__reflect(e.prototype,"common.WinningRecord")}(common||(common={}));var qznn;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.qznn=i,__reflect(i.prototype,"qznn.Entrance.qznn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t}();t.ProxyKeyConst=e,__reflect(e.prototype,"qznn.ProxyKeyConst")}(qznn||(qznn={}));var qznn;!function(t){var e;!function(t){t[t.Base=1200]="Base"}(e=t.ViewConst||(t.ViewConst={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),this.registers(),egret.log("房间带入：",i.sceneType),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onClickBackRoom,this),this.registerFunc("onClickBackLobby",this.onClickBackLobby,this)},i.prototype.onClickBackRoom=function(){this.goBack2Room()},i.prototype.onClickBackLobby=function(){this.goBack2Lobby()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"qznn.GameController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"qznn.GameModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"qznn.GameProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e){return t.call(this,e,LayerManager.Game_Bg,"qznn","GameSkin")||this}return __extends(e,t),e.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},e.prototype.onClickBackLobby=function(){this.applyFunc("onClickBackLobby")},e.prototype.addEvent=function(){this.btnBackRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBackLobby,this)},e.prototype.removeEvent=function(){this.btnBackRoom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBackLobby,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameView);t.GameView=e,__reflect(e.prototype,"qznn.GameView")}(qznn||(qznn={}));var sgj;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&GameBase.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){GameBase.setScaleModeNormal()},e}();e.sgj=i,__reflect(i.prototype,"sgj.Entrance.sgj",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("sgj.sgjBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("sgj.sgjBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.sgjBones=e,__reflect(e.prototype,"sgj.sgjBones")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mIndex=0,i._mIsInPool=!1,i.touchEnabled=!1,i.touchChildren=!1,i._mRender=t.sgjBones.create(),i._mRender.updateId("star_1"),i._mStarList=[],i}return __extends(i,e),i.create=function(){if(!(i.StarList.length>8)){var t=ObjectPool.pop("sgj.StarExpand");return t._mIsInPool=!1,i.StarList.push(t),t}},i.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clear(),i.c(),ObjectPool.push(t))},i.c=function(t){void 0===t&&(t=!1);for(var e=i.StarList,o=e.length,n=o-1;n>=0;n--){var s=e[n];t?(e.splice(n,1),s.destroy()):s._mIsInPool&&e.splice(n,1)}},i.cleanFormPool=function(){t.sgjBones.cleanFormPool(),i.c(!0),ObjectPool.clearClass("sgj.StarExpand","destroy")},i.prototype.init=function(t){this._mParent=t,this._mParent&&!this.parent&&(this._mParent.addChild(this),this.addChild(this._mRender))},i.prototype.run=function(t,e,o,n,s,r,a){this.play(),this.runParabola(t,e,o,n,function(){i.realese(this),s&&s.call(r,a)}.bind(this),this)},i.prototype.play=function(){this._mRender.play(999),this._mIndex=0,App.TimerManager.doTimer(80,999,this.callBackFind,this)},i.prototype.callBackFind=function(){var e=this._mStarList,i=e[this._mIndex++];i||(i=t.sgjBones.create(),i.blendMode=egret.BlendMode.ADD,i.updateId("star_0"),this._mStarList.push(i)),i.parent||this._mParent.addChild(i),i.setPosition(this.x,this.y),i.play(1,2),i.addPlayEndCallBack(function(t){R.removeFromParent(i)}.bind(this,i),this)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren(),this._mIndex=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mRender&&this._mRender.destroy();for(var t=this._mStarList;t.length;){var i=t.pop();i&&i.destroy()}this._mRender=void 0,this._mParent=void 0,this._mStarList=void 0},i.StarList=[],i}(ActionExpand);t.StarExpand=e,__reflect(e.prototype,"sgj.StarExpand")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzAwardAnimation")||this;return t._sgjBones=null,t._mxx=0,t._myy=0,t.visible=!1,t}return __extends(i,e),i.prototype.init=function(){this._sgjBones||(this._sgjBones=t.sgjBones.create())},i.prototype.initRenders=function(){if(!this._sgjBones.parent){this.settlement.addChild(this._sgjBones),this._sgjBones.updateId("fruit");var t=this.sunImage.x+258.5,e=this.sunImage.y+257.5;this._sgjBones.setPosition(t,e),this._sgjBones.play(99999)}},i.prototype.bonesMotion=function(t,e){console.log("bonesMotion"),egret.Tween.get(this._sgjBones).to({x:this._mxx},700,egret.Ease.sineInOut).call(function(){this.openWinpopup(t),this.winName.visible=!0,this.winName.source="reward"+e+"_png",this.winBack.visible=!0}.bind(this))},i.prototype.settlementAnimation=function(){this.init(),this.initRenders()},i.prototype.closeSettlementAnimation=function(){egret.Tween.removeTweens(this),this.visible=!1,this.vanishFruits()},i.prototype.vanishFruits=function(){for(var t=0;8>t;t++)this["_double"+t].visible=!1,7>t&&(this["_single"+t].visible=!1)},i.prototype.setFruitIcon=function(t){this.visible=!0,this.vanishFruits();var e=t.length%2;console.log("展示水果"),console.log(t);for(var i=function(){var i=null;e?(console.log("num==1"),i=o["_single"+n],console.log(i)):(console.log("num==0"),i=o["_double"+n],console.log(i)),i.source="fruit_"+t[n]+"_png",console.log(t[n]),R.setTimeOnce(function(){this.winlossRun(i)},o,200*n)},o=this,n=0;n<t.length;n++)i()},i.prototype.winlossRun=function(t){t.visible=!0,egret.Tween.get(t).to({y:t.y-35},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+35},100,egret.Ease.sineInOut)},this)},i.prototype.clear=function(){this._sgjBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this)},i}(BaseEuiComponent);t.SgjAwardAnimation=e,__reflect(e.prototype,"sgj.SgjAwardAnimation")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"sgjBetAnimation")||this;return i._approach=null,i.visible=!1,i}return __extends(i,e),i.prototype.playAni=function(t){console.log("投注动画"),console.log(t);var e=App.StageUtils.getWidth();App.StageUtils.getHeight();this.BetStartAni.source=2==t?"xysgj_ui_tingzhitouzhu_png":"xysgj_ui_kaishixiazhu_png";var i=this._betPos,o=i.width;i.x=-o,console.log(i),console.log(i.x),i.alpha=1,this.visible=!0,egret.Tween.get(i).to({x:e/2-o/2},350,egret.Ease.sineInOut).wait(1e3).to({x:e},350,egret.Ease.sineOut).call(function(){i.x=-o,i.alpha=0,this.visible=!1}.bind(this))},i.prototype.diceAnimation=function(t){this.visible=!0,this.BetStartAni.source=2==t?"xysgj_ui_tingzhitouzhu_png":"xysgj_ui_kaishixiazhu_png",R.setTimeOnce(function(){this.visible=!1},this,800)},i.prototype.diceInit=function(e){this._approach||(this._approach=new t.sgjBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="bet_"+t;this._betPos.addChild(this._approach),this._approach.updateId(e);var i=this._betPos.getChildAt(0).x+211,o=this._betPos.getChildAt(0).y+42.5;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this._betPos.removeChild(this._approach))},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._approach&&this._approach.destroy(),this._approach=void 0,egret.Tween.removeTweens(this)},i}(BaseEuiComponent);t.sgjBetAnimation=e,__reflect(e.prototype,"sgj.sgjBetAnimation")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"sgjButton")||this;return t.BtnType=0,t.winpos=[],t.allChipList=[],t}return __extends(i,e),i.prototype.showMenu=function(t){console.log("按钮下拉"),App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(console.log(this.BtnType),egret.Tween.get(this.zidongUp0).to({y:0},100)):(console.log(this.BtnType),this.retractMenu())},i.prototype.retractMenu=function(){egret.Tween.get(this.zidongUp0).to({y:198},100),this.BtnType=0},i.prototype.clearAllBetMoney=function(){for(var t=0;8>t;t++)this["placeAllBet"+t].text="0.0",this["placeBet"+t].text="0.0";this.closeWinLight()},i.prototype.closeWinLight=function(){for(var t=0;8>t;t++)this["_winLight"+t].visible=!1},i.prototype.scaleAllBetMoney=function(){for(var t=0;8>t;t++)this["placeAllBet"+t].scaleX=1,this["placeAllBet"+t].scaleY=1,this["placeBet"+t].scaleX=1,this["placeBet"+t].scaleY=1},i.prototype.clearBetMoney=function(){for(var t=0;8>t;t++)this["placeBet"+t].text="0.0"},i.prototype.allButtonAshed=function(){for(var t=0;8>t;t++)this["btnBet"+t].enabled=!1;this.continueBetAshed(),this.revokeBetAshed()},i.prototype.allButtonLight=function(){for(var t=0;8>t;t++)this["btnBet"+t].enabled=!0},i.prototype.continueBetLight=function(){this.continueBet.enabled=!0},i.prototype.continueBetAshed=function(){this.continueBet.enabled=!1},i.prototype.revokeBetAshed=function(){this.revokeBet.enabled=!1},i.prototype.revokeBetLight=function(){this.revokeBet.enabled=!0},i.prototype.setPersonalBetMoney=function(t,e){console.log("设置个人投注金额"),console.log(t,e),this["placeBet"+t].text=e+""},i.prototype.setentireBetMoney=function(t,e){this["placeAllBet"+t].text=e+""},i.prototype.setMultipleNum=function(t){this._multiple.text=t+""},i.prototype.setWinLight=function(t){this["_winLight"+t].visible=!0},i.prototype.setTimeNum=function(t,e){this["timeNum_"+t].text=e+""},i.prototype.btnNumShake=function(e,i){console.log("总投注数字抖动"),console.log(i);var o=1==i?this["placeBet"+e]:this["placeAllBet"+e];t.conFun.numShake(o)},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.createHeadPosition=function(){for(var t=0;6>t;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=App.StageUtils.getWidth()-this.HeadPos4.right,i=App.StageUtils.getHeight()/2+this.HeadPos4.verticalCenter;break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.createWinChip=function(e,i){var o,n,s=this["ChipPos"+e];o=App.StageUtils.getWidth()/2+s.horizontalCenter,n=App.StageUtils.getHeight()-s.bottom-s.height;var r=this.winpos[i];console.warn(this.winpos),console.warn(this.winpos[i]);for(var a=this.GroupChipPos.globalToLocal(r.x,r.y),h=0;10>h;h++){var l=t.sgjchipBtn.create();l.init(h),l.setNameNum(i);var p=Math.floor(a.x),c=Math.floor(a.y);this.GroupChipPos.addChild(l),l.x=s.x,l.y=s.y,l.alpha=0,l.setFlyChipX(p),l.setFlyChipY(c),this.allChipList.push(l)}},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()})},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){for(var t=0;8>t;t++)this["StarPos_"+t].visible=!1},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var e=this.allChipList.pop();t.sgjchipBtn.release(e)}},i.prototype.createFlyCoin=function(e,i){console.log("下注飞筹码部分"),console.log(e),console.log(i);var o=this.winpos[i],n=this.GroupChipPos.globalToLocal(o.x,o.y),s=this["ChipPos"+e].x,r=this["ChipPos"+e].y,a=t.sgjchipBtn.create();a.x=n.x,a.y=n.y,a.alpha=1,this.GroupChipPos.addChild(a),egret.Tween.get(a).to({x:s,y:r},350).call(function(){a.parent.removeChild(a)}.bind(this))},i.prototype.onClickBtnBetTAP=function(t){console.log("TOUCH_TAP"),this.applyFunc("onClickBtnBetTAP",t)},i.prototype.onClickBtnBetBEGIN=function(t){console.log("TOUCH_TAP"),console.log(this["btnBet"+t].currentState),this.applyFunc("onClickBtnBetBEGIN",t)},i.prototype.onClickBtnEndBetENDOUT=function(t){console.log("TOUCH_END"),this.applyFunc("onClickBtnEndBetENDOUT",t)},i.prototype.changeInitBet=function(t){App.SoundManager.playEffect("anniu_mp3"),this.retractMenu(),this.applyFunc("changeInitBet",t),R.sendPlayerAction("SGJantes_switch")},i.prototype.revokeBetMoney=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("revokeBetMoney"),R.sendPlayerAction("SGJbet_cancel")},i.prototype.btnContinueBet=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("btnContinueBet"),R.sendPlayerAction("SGJbet_renew")},i.prototype.addEvent=function(){for(var t=0;8>t;t++){this["btnBet"+t];
this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBetTAP.bind(this,t),this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBtnBetBEGIN.bind(this,t),this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_END,this.onClickBtnEndBetENDOUT.bind(this,t),this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickBtnEndBetENDOUT.bind(this,t),this)}for(var e=0;4>e;e++)this["time_"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeInitBet.bind(this,e),this);this.continueBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnContinueBet,this),this.revokeBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.revokeBetMoney,this),this.initBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},i.prototype.removeEvent=function(){for(var t=0;8>t;t++)this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBetTAP.bind(this,t),this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBtnBetBEGIN.bind(this,t),this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickBtnEndBetENDOUT.bind(this,t),this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickBtnEndBetENDOUT.bind(this,t),this);for(var e=0;4>e;e++)this["time_"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeInitBet,this);this.continueBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnContinueBet,this),this.revokeBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.revokeBetMoney,this),this.initBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearFlyWinChip()},i}(BaseEuiComponent);t.sgjButtonView=e,__reflect(e.prototype,"sgj.sgjButtonView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIndex=0,e.chiplist=[1,2,5,10,20,50,100,500,1e3,0],e.skinName="sgjchipBtn",e}return __extends(e,t),e.create=function(){var t=e.sgjchipBtnPool.pop();return t||(t=new e),t},e.release=function(t){t instanceof e?(t.clean(),e.sgjchipBtnPool.push()):egret.error("chip is not the instance of sgjchipBtn!")},e.prototype.init=function(t){this._mIndex=t},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.setBtnText=function(t){this.BtnText.text=this._mchipValue?this._mchipValue*t+"":""},e.prototype.setBtnValue=function(t){this._mchipValue=this.chiplist[t]},e.prototype.setBtntextValue=function(){console.log("BtnText"),console.log(this),this.BtnText.text=this._mchipValue?this._mchipValue+"":""},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.moveTo=function(){var t=this._flyX,e=this._flyY;console.log("_flyX",t),console.log("_flyY",e),egret.Tween.get(this).wait(100*this._mIndex).to({x:t,y:e,alpha:1},500,egret.Ease.sineInOut).call(function(){this.destroy()}.bind(this))},e.prototype.setBtnChip=function(t){this._chip.source="common_ui_"+t+"_png",this.BtnLight.source="common_ui_g"+t+"_png"},e.prototype.setNameNum=function(t){this._mChipId=t},e.prototype.getNameNum=function(){return this._mChipId},e.prototype.getChipNum=function(t){return this._mchipValue*t},e.prototype.stopChip=function(){this._btnchip.touchEnabled=!1},e.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e.sgjchipBtnPool=[],e}(eui.Component);t.sgjchipBtn=e,__reflect(e.prototype,"sgj.sgjchipBtn")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(){t.FuitPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createSgjFuits=function(){var e=t.FuitPool.pop();return e||(e=new i),e.init(),e},t.prototype.releaseSgjFuits=function(e){return egret.is(e,"SgjFuits")?e.isRelease?void egret.error("SgjFuits 重复回收"):(e.clear(),void t.FuitPool.unshift(e)):void egret.warn(e,"is not SgjFuits")},t.prototype.clear=function(){for(;t.FuitPool.length;)t.FuitPool.pop().destroy()},t._i=null,t.FuitPool=null,t}();t.FuitFactory=e,__reflect(e.prototype,"sgj.FuitFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._isRelease=!1,e.skinName="SgjFruit",e}return __extends(e,t),e.prototype.init=function(){this._isRelease=!1},Object.defineProperty(e.prototype,"isRelease",{get:function(){return this._isRelease},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),egret.Tween.removeTweens(this)},e.prototype.destroy=function(){this.clear()},e}(eui.Component);__reflect(i.prototype,"SgjFuits")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,"SgjGameSet")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},e.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},e.prototype.showPopup=function(){this.visible=!0,this.SetBg.visible=!0,this.SetMenu.scaleX=this.SetMenu.scaleY=0,App.EffectUtils.showUI(this.SetMenu)},e.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.SetBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.SetMenu,200,0,function(){t.visible=!1})},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.onOpen=function(t){switch(t.currentTarget){case this.ToggleVoice:App.SoundManager.setBgOn(this.ToggleVoice.selected);break;case this.ToggleMusic:App.SoundManager.setEffectOn(this.ToggleMusic.selected)}},e.prototype.effectSwitch=function(t){console.log("effectSwitch"),console.log(t.currentTarget.selected);var e=t.currentTarget.selected;this.applyFunc("effectSwitch",e),e&&R.sendPlayerAction("SGJeffect_without"),R.sendPlayerAction("SGJeffect_with")},e.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0),R.sendPlayerAction("SGJmusic_without")},e.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0),R.sendPlayerAction("SGJsound_without")},e.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1),R.sendPlayerAction("SGJmusic_with")},e.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1),R.sendPlayerAction("SGJsound_with")},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this._effectSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.removeEvent=function(){this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this._effectSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.SgjGameSet=e,__reflect(e.prototype,"sgj.SgjGameSet")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjHelpSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.helpBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)},i.prototype.closePoput=function(){this.helpBg.visible=!1,App.SoundManager.playEffect("anniu_mp3");var t=this;App.EffectUtils.hideUI(this.RankMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(){var t=[{img0:"xysgj_ui_bangzhu4_png",img1:"xysgj_ui_bangzhu5_png"}],e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e),this.showPopup()},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.sgjHelpIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjHelpIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.helpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.helpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.sgjHelp=e,__reflect(e.prototype,"sgj.sgjHelp")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),console.log("this.data"),console.log(this.data),this.data)for(var e=0;2>e;e++)this["ruleimg"+e].texture=RES.getRes(this.data["img"+e])},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.sgjHelpIcon=e,__reflect(e.prototype,"sgj.sgjHelpIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"sgjMessageInfoSkin")||this;return i._mResultPoint=new egret.Point,i}return __extends(i,e),i.prototype.setUserName=function(t){this.UserName.text=t},i.prototype.setUserImage=function(t){this.UserImage.source=t},i.prototype.setUserFrame=function(t){this.UserFrame.source=t},i.prototype.gameSetMoney=function(t){this.UserMoney.text=t+""},i.prototype.gameGetMoney=function(){return this.UserMoney.text},i.prototype.setUserBet=function(t){this._betMoney.text=t+""},i.prototype.avatarShake=function(t){console.log("头像抖动效果");var e=this["_Plute"+t],i=(e.x,0);i=1>=t||4==t?10:-10,egret.Tween.get(e).to({rotation:i},50).call(function(){egret.Tween.get(e).to({rotation:0},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.setPluteImage=function(t,e){this["PluteImage"+e].source=t},i.prototype.setPluteName=function(t,e){this["PluteName"+e].text=t},i.prototype.specialPlayerMoney=function(t,e){this["PluteMoney"+e].text=t+""},i.prototype.playerWinMoney=function(t,e){console.log("玩家赢钱金额显示",t,e),this["PluteWinMoney"+e].text="+"+t},i.prototype.playerDisplay=function(t){this.allPlayerDisplay();for(var e=0;t+1>e;e++)this["Plute"+e].visible=!0},i.prototype.allPlayerDisplay=function(){for(var t=0;4>t;t++)this["Plute"+t].visible=!1},i.prototype.getPoint=function(){return this.localToGlobal(this.starPos.x,this.starPos.y,this._mResultPoint),egret.log("_mResultPoint:",this._mResultPoint),this._mResultPoint},i.prototype.initInfo=function(){for(var t=0;5>t;t++)this["PluteWinMoney"+t].alpha=0,this["PluteWinMoney"+t].scaleX=.5,this["PluteWinMoney"+t].scaleY=.5},i.prototype.fontEnlarge=function(t){var e=this["PluteWinMoney"+t];egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({y:e.y-50,alpha:0},300,egret.Ease.sineInOut).call(function(){e.y=e.y+50}.bind(this))},this,1200)},i.prototype.getMoneyLight=function(e){var i=new t.sgjBones;if(!i.parent){var o=void 0,n=void 0;4==e?(o=this.GroupInfo,n=this.UserImage):(o=this["_Plute"+e],n=this["PluteImage"+e]),o.addChild(i),i.updateId("money_linght"),i.blendMode=egret.BlendMode.ADD;var s=n.x+44,r=n.y+44.5;i.setPosition(s,r),i.play(1),i.addPlayEndCallBack(function(){i.parent&&(i.stopGame(),i.parent.removeChild(i))},this),this.fontEnlarge(e)}},i.prototype.flyCoordinate=function(){for(var t=[],e=0;5>e;e++){var i=this["starPos"+e];i=4>e?this["PluteImage"+e]:this.UserImage;var o=this.localToGlobal(i.x,i.y);egret.log("_mResultPoint:",o),t.push(o)}return t},i.prototype.setInformation=function(t,e,i){if(console.log("setInformation",t,e,i),t){0==t.avatar&&(t.avatar=1),this["PluteImage"+e].source="ui_headImg_"+t.avatar,this["PluteName"+e].text=t.nickname,this["Plute"+e].visible=!0,this.specialPlayerMoney((t.userbalance/1e4).toFixed(2),e);for(var o=3;o>=i;o--)this["Plute"+o].visible=!1}},i}(BaseEuiComponent);t.sgjMessageView=e,__reflect(e.prototype,"sgj.sgjMessageView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this,"SgjOuterLight")||this}return __extends(e,t),e.prototype.outerShowLight=function(){for(var t=0;4>t;t++){var e=t%2,i=this.outerLight1.getChildAt(t);0==e?this.outerLight1.getChildAt(t).source="xysgj_ui_waiweicaideng1_png"==i.source?"xysgj_ui_waiweicaideng2_png":"xysgj_ui_waiweicaideng1_png":this.outerLight1.getChildAt(t).source="xysgj_ui_waiweicaideng3_png"==i.source?"xysgj_ui_waiweicaideng4_png":"xysgj_ui_waiweicaideng3_png"}},e.prototype.runouterShowLight=function(){App.TimerManager.doTimer(500,0,function(){this.outerShowLight()},this)},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this)},e}(BaseEuiComponent);t.SgjOuterLight=e,__reflect(e.prototype,"sgj.SgjOuterLight")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="sgjPopupskin",o._sgjAward.initComponent(e),o._sgjBetAnimation.initComponent(e),o._sgjWait.initComponent(e),o._sgjRanking.initComponent(e),o._sgjPrompt.initComponent(e),o._sgjWinningRecord.initComponent(e),o._sgjGameSet.initComponent(e),o._sgjHelp.initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){egret.log(" SgjPopupView SgjPopupView initUI"),this._sgjAward.vanishFruits()},e.prototype.waitGameOver=function(){this._sgjWait.waitGameOver()},e.prototype.closeWaitGameOver=function(){this._sgjWait.closeWaitGameOver()},e.prototype.diceAnimation=function(t){this._sgjBetAnimation.playAni(t)},e.prototype.closeSettlementAnimation=function(){this._sgjAward.closeSettlementAnimation()},e.prototype.setFruitIcon=function(t){this._sgjAward.setFruitIcon(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._sgjPrompt.addEvent(),this._sgjAward.addEvent(),this._sgjBetAnimation.addEvent(),this._sgjWait.addEvent(),this._sgjRanking.addEvent(),this._sgjPrompt.addEvent(),this._sgjWinningRecord.addEvent(),this._sgjGameSet.addEvent(),this._sgjHelp.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._sgjPrompt.removeEvent(),this._sgjAward.removeEvent(),this._sgjBetAnimation.removeEvent(),this._sgjWait.removeEvent(),this._sgjRanking.removeEvent(),this._sgjPrompt.removeEvent(),this._sgjWinningRecord.removeEvent(),this._sgjGameSet.removeEvent(),this._sgjHelp.removeEvent()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this._sgjAward.destroy(),this._sgjBetAnimation.destroy(),this._sgjWait.destroy(),this._sgjRanking.destroy(),this._sgjPrompt.destroy(),this._sgjWinningRecord.destroy(),this._sgjGameSet.destroy(),this._sgjHelp.destroy()},e}(BaseEuiView);t.SgjPopupView=e,__reflect(e.prototype,"sgj.SgjPopupView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this,"SgjPrompt")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.showMenu=function(){this.visible=!0,this.PromptBg.visible=!0,this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu)},e.prototype.closePoput=function(){this.PromptBg.visible=!1,this.prompIsShow=!1;var t=this;App.EffectUtils.hideUI(this.PromptMenu,200,0,function(){t.prompIsShow||(t.visible=!1)})},e.prototype.showPromptSgj=function(t,e,i,o){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 4:this.renderBrnnType4(e,i,o);break;case 6:this.renderBrnnType6()}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu)},e.prototype.renderBrnnType4=function(t,e,i){console.log("renderBrnnType4"),console.log(t,e,i),this.BtnBox.visible=!0;var o=this.getTextField(39);o.textFlow=[{text:"当前牌桌投注限红为"},{text:e?e+"":"0"},{text:"~"},{text:i}],o.x=this.TextBox.width/2-o.textWidth/2,this.TextBox.addChild(o);var n=this.getTextField(80);n.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(n),n.x=this.TextBox.width/2-n.textWidth/2},e.prototype.renderBrnnType6=function(){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"余额不足，是否前往充值？"}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},e.prototype.getTextField=function(t){var e=new egret.TextField;return e.y=t,e.fontFamily="Microsoft YaHei",e.size=22,e.textColor=16777215,e.textAlign=egret.HorizontalAlign.CENTER,e},e.prototype.ConfirmMoney=function(){this.closePoput(),4==this.promptType&&this.applyFunc("confirmShowLimitBet"),6==this.promptType&&this.applyFunc("ConfirmMoney")},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},e.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.SgjPrompt=e,__reflect(e.prototype,"sgj.SgjPrompt")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=App.CommonUtils.money(this.data.win_money)+"",this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="bjl_ui_jin_png",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="bjl_ui_yin_png",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="bjl_ui_tong_png",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.SgjRankIcon=e,__reflect(e.prototype,"sgj.SgjRankIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjRanking")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RankBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.RankBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RankMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.SgjRankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjRankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RankClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RankClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.SgjRanking=e,__reflect(e.prototype,"sgj.SgjRanking")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._maskRct=new egret.Rectangle(0,0,88,17),e.skinName="SgjRecordIcon",e}return __extends(e,t),e.create=function(){var t=e._lementBtnPool.pop();return t||(t=new e),t},e.release=function(t){t instanceof e?(t.clean(),e._lementBtnPool.push(t)):egret.error("_lement is not the instance of _lementBtn!")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){console.log("this.data"),console.log(t),t.charts&&(this.Issue.text=App.DateUtils.getFormatBySecond(t.time,2),this.Winning.text=t.money)},e.prototype.clean=function(){R.removeFromParent(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e._lementBtnPool=[],e}(eui.Component);t.SgjRecord=e,__reflect(e.prototype,"sgj.SgjRecord")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(console.log("中奖记录数据组件"),console.log(this.data),this.times.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Winning.text=App.CommonUtils.money2Str(this.data.hit_money)+"")},e}(eui.ItemRenderer);t.SgjRecordIcon=e,__reflect(e.prototype,"sgj.SgjRecordIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"SgjToolBar")||this;return t._copeImageList={},t.detailRecord=[],t._ImagePos={},t.moveNum=0,t.indexNum=50,t.listNew=[5,7.9,11],t._cardflaylist=[],t.newIamge=[],t.BtnType=0,t.BtnFruitType=0,t}return __extends(i,e),i.prototype.toolInitUI=function(){for(var t=0;11>t;t++)this._ImagePos[t]={x:0+59*t,y:3};console.log("_ImagePos"),console.log(this._ImagePos)},i.prototype.recordFuitflay=function(e){console.log("水果机最新开奖");var i=(this._cardflaylist.length?this._cardflaylist.length:1)-1;this.moveNum=e.length-(11-this._cardflaylist.length),console.log(this._cardflaylist),console.log(this._cardflaylist.length),console.log(i),console.log(this._ImagePos),console.log(this._copeImageList),console.log(this._ImagePos[i]),console.log(this._ImagePos[i].x),console.log(e);var o=0;this.cleanNewImge();for(var n,s=function(){n=t.FuitFactory.i.createSgjFuits(),n.x=650+59*a,n.y=3;var s=e[a].open_num%2,h=e[a].open_type;e[e.length-1].open_num==e[a].open_num?(n.sgjNew.source="xysgj_ui_new_png",r.indexNum=s):n.sgjNew.source="",n.fruitBg.source=1==s?"xysgj_ui_kaijiangjilu4_png":"xysgj_ui_kaijiangjilu3_png",n._fruits.source="xysgj_ui_icon"+r._copeImageList[e[a].open_place]+"_png",n.fruitType.source=0==h?"xysgj_ui_luck_png":2==h?"xysgj_ui_train_png":"";var l=r,p=r._ImagePos[i].x+59+59*a;r.RegularDisplay.addChild(n),r._cardflaylist.push(n),console.log(r._cardflaylist),console.log(n),console.log(e[a].open_place),console.log(r._copeImageList[e[a].open_place]),egret.Tween.get(n).to({x:p},800,egret.Ease.sineInOut).call(function(){o++,console.log("index"),console.log(o),console.log(e.length),console.log(l.moveNum),o>=e.length&&l.moveNum>0&&(console.log("AllCardMove"),l.AllCardMove())}.bind(r))},r=this,a=0;a<e.length;a++)s()},i.prototype.cleanNewImge=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e.sgjNew.source=""}},i.prototype.AllCardMove=function(){console.log("所有水果机移动"),console.log(this._cardflaylist);for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t],i=e.x-59*this.moveNum;egret.Tween.get(e).to({x:i},800,egret.Ease.sineInOut)}R.setTimeOnce(function(){this.dropCard()},this,900)},i.prototype.dropCard=function(){console.log("水果机清除"),console.log(this._cardflaylist),console.log(this.moveNum);for(var e=0;e<this._cardflaylist.length;e++){var i=this._cardflaylist[e];e<this.moveNum&&t.FuitFactory.i.releaseSgjFuits(i)}this._cardflaylist.length>11&&this._cardflaylist.splice(0,this.moveNum),console.log("多余的水果机清除"),console.log(this._cardflaylist)},i.prototype.recordCardDisplay=function(e){console.log("水果机显示"),console.log(this._cardflaylist),console.log(e),this.clearCard(),this._cardflaylist=[];for(var i=0;i<e.length;i++){var o=t.FuitFactory.i.createSgjFuits(),n=e[i].open_num%2,s=e[i].open_type;e[e.length-1].open_num==e[i].open_num?(o.sgjNew.source="xysgj_ui_new_png",this.indexNum=n):o.sgjNew.source="",o.fruitBg.source=1==n?"xysgj_ui_kaijiangjilu4_png":"xysgj_ui_kaijiangjilu3_png",o._fruits.source="xysgj_ui_icon"+this._copeImageList[e[i].open_place]+"_png",o.fruitType.source=0==s?"xysgj_ui_luck_png":2==s?"xysgj_ui_train_png":"",console.log(i),console.log(this._ImagePos),console.log(this._copeImageList[e[i].open_place]),console.log(o),o.x=this._ImagePos[i].x,o.y=this._ImagePos[i].y,this.RegularDisplay.addChild(o),this._cardflaylist.push(o)}console.log("_cardflaylist1"),console.log(this._cardflaylist)},i.prototype.getIndexNum=function(){return this.indexNum},i.prototype.clearCard=function(){if(this._cardflaylist.length){for(var e=0;e<this._cardflaylist.length;e++){var i=this._cardflaylist[e];i&&i.parent&&t.FuitFactory.i.releaseSgjFuits(i)}this._cardflaylist=[]}},i.prototype.dealRenderBead=function(t){console.log("处理水果机历史记录最新结果"),console.log(t),console.log(this.detailRecord);for(var e=0;e<t.length;e++){var i=t[e];console.log(i),this.detailRecord.unshift(i)}console.log(this.detailRecord),this.renderBead(this.detailRecord)},i.prototype.renderBead=function(e){e.length&&(e.length>50?this.detailRecord=e.splice(0,50):this.detailRecord=e),console.log("水果机路子图"),console.log(this.detailRecord),console.log(e),this.indexNum+=1,this.clearCard(),console.log(this._cardflaylist),this.renderNewBead(this.detailRecord);var i=535,o=0;this.detailRecord.length>0&&this.detailRecord.forEach(function(e,n){if(n>9){var s=t.FuitFactory.i.createSgjFuits(),r=n/10;o=-45+46*parseInt(String(r)),n%10==0&&(i=535),s.x=i,s.y=o;var a=e.open_num%2,h=e.open_type;s.sgjNew.source="",s.fruitBg.source=1==a?"xysgj_ui_kaijiangjilu4_png":"xysgj_ui_kaijiangjilu3_png",s._fruits.source="xysgj_ui_icon"+this._copeImageList[e.open_place]+"_png",s.fruitType.source=0==h?"xysgj_ui_luck_png":2==h?"xysgj_ui_train_png":"",i-=59,this.GroupBead.addChild(s),this._cardflaylist.push(s)}}.bind(this))},i.prototype.renderNewBead=function(e){var i=533,o=4;e.length>0&&e.forEach(function(e,n){if(9>=n){var s=t.FuitFactory.i.createSgjFuits();s.x=i,s.y=o;var r=e.open_num%2,a=e.open_type;this.detailRecord[0].open_num==e.open_num?(s.sgjNew.source="xysgj_ui_new_png",s.alpha=0,this.winlossRun(s)):s.sgjNew.source="",s.fruitBg.source=1==r?"xysgj_ui_kaijiangjilu4_png":"xysgj_ui_kaijiangjilu3_png",s._fruits.source="xysgj_ui_icon"+this._copeImageList[e.open_place]+"_png",s.fruitType.source=0==a?"xysgj_ui_luck_png":2==a?"xysgj_ui_train_png":"",i-=59,this.RegularDisplay.addChild(s),this._cardflaylist.push(s)}}.bind(this))},i.prototype.winlossRun=function(t){t.alpha=1,egret.Tween.get(t).to({y:t.y-46},50,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+92},800,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y-46},100,egret.Ease.sineInOut)},this)},this)},i.prototype.removeCoins=function(e){for(;e.numChildren;){var i=e.removeChildAt(0);t.FuitFactory.i.releaseSgjFuits(i)}},i.prototype.showMenu=function(t){App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?egret.Tween.get(this.MenuBox).to({y:0},100):egret.Tween.get(this.MenuBox).to({y:-176},100),R.sendPlayerAction("SGJrecord_open")},i.prototype.showFruitMenu=function(t){App.SoundManager.playEffect("anniu_mp3"),this.BtnFruitType=0==this.BtnFruitType?1:0,1==this.BtnFruitType?egret.Tween.get(this.fruitUp).to({y:0},100):egret.Tween.get(this.fruitUp).to({y:-195},100)},i.prototype.setonlineNum=function(t){this.OnlineNum.text=""+t},i.prototype.showHelp=function(){console.log("showHelp"),App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showHelp"),R.sendPlayerAction("SGJhelp_open")},i.prototype.showGameSet=function(){console.log("showGameSet"),App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showGameSet"),R.sendPlayerAction("SGJset_open")},i.prototype.showranking=function(){console.log("showranking"),App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showranking"),R.sendPlayerAction("SGJrank_open")},i.prototype.showRecord=function(){console.log("showRecord"),App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showRecord"),R.sendPlayerAction("record_open")},i.prototype.payMoney=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("sgjGoRechargeMoney")},i.prototype.onlineShake=function(){console.log("在线人数抖动效果");var t=this.BtnOnline,e=(t.x,-10);egret.Tween.get(t).to({rotation:e},50).call(function(){egret.Tween.get(t).to({rotation:0},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.getAllMoneyLight=function(){var e=new t.sgjBones;if(!e.parent){this.BtnOnline.addChild(e),e.updateId("money_linght"),e.blendMode=egret.BlendMode.ADD;var i=this.BtnOnline.getChildAt(0).x+24,o=this.BtnOnline.getChildAt(0).y+23.5;e.setPosition(i,o),e.play(1),e.addPlayEndCallBack(function(){e.parent&&(e.stopGame(),e.parent.removeChild(e))},this)}},i.prototype.backBody=function(){this.applyFunc("onClickBackLobby")},i.prototype.onHotIconBegin=function(t){egret.Tween.get(t).to({scaleX:.8,scaleY:.8},80).to({scaleX:1,scaleY:1},80)},i.prototype.addEvent=function(){this.menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelp,this),this.ButtonSetup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),App.CommonUtils.effectButton(this.ButtonPay,this.payMoney,this,{}),App.CommonUtils.effectButton(this.btnDrop,this.showFruitMenu,this,{}),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.backBtn),this),this.ButtonHelp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.ButtonHelpBtn),this),this.ButtonSetup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.ButtonSetupBtn),this),this.ranking.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.rankBtn),this),this.menu.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.menuBtn),this),this.Record.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin.bind(this,this.Recordbtn),this)
},i.prototype.removeEvent=function(){this.menu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonSetup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),App.CommonUtils.removeButton(this.ButtonPay),App.CommonUtils.removeButton(this.btnDrop),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonHelp.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonSetup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.menu.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.Record.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearCard()},i}(BaseEuiComponent);t.sgjToolBar=e,__reflect(e.prototype,"sgj.sgjToolBar")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,"SgjWaitGame")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.waitGameOver=function(){this.visible=!0,this.waitGameGilf(),App.TimerManager.doTimer(2e3,99,function(){this.waitGameGilf()},this)},e.prototype.waitGameGilf=function(){for(var t=function(){var t=e._wiatGame.getChildAt(i);R.setTimeOnce(function(){this.waitGameRun(t)},e,200*i)},e=this,i=0;10>i;i++)t()},e.prototype.waitGameRun=function(t){egret.Tween.get(t).to({y:t.y-8},80,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+8},80,egret.Ease.sineInOut)},this)},e.prototype.closeWaitGameOver=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this.visible=!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this)},e}(BaseEuiComponent);t.SgjWaitGame=e,__reflect(e.prototype,"sgj.SgjWaitGame")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjWinningRecord")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.RecordMenu.scaleX=this.RecordMenu.scaleY=0,App.EffectUtils.showUI(this.RecordMenu)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.RecordBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RecordMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e),this.createLement(t)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.SgjRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.createLement=function(e){this.reMoveLement(),console.log("生成场次");for(var i=0;i<e.length;i++){var o=e[i],n=t.SgjRecord.create();n.init(o),n.x=0,n.y=0+38.67*i,this._addList.addChild(n),this._lementList.push(n)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();t.SgjRecord.release(e)}},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RecordClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RecordClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement()},i}(BaseEuiComponent);t.SgjWinningRecord=e,__reflect(e.prototype,"sgj.SgjWinningRecord")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(){}return t.onOnlineCountNotifyBack="onOnlineCountNotifyBack",t.onCancelBetResBack="onCancelBetResBack",t.onPlayerInfoNotifyBack="onPlayerInfoNotifyBack",t.onIssueNotifyBack="onIssueNotifyBack",t.onStateNotifyBack="onStateNotifyBack",t.onSpecialPlayerNotifyBack="onSpecialPlayerNotifyBack",t.onLastBetNotifyBack="onLastBetNotifyBack",t.onBetResBack="onBetResBack",t.onPlayerBetInfoNotifyBack="onPlayerBetInfoNotifyBack",t.onGameResultNotifyBack="onGameResultNotifyBack",t.onGameBetInfoNotifyBack="onGameBetInfoNotifyBack",t.settlementStage="settlementStage",t.onChartResBack="onChartResBack",t.onSpecialPlayerActionNotifyBack="onSpecialPlayerActionNotifyBack",t.onRankingListResBack="onRankingListResBack",t.NET_MSG={PLAYER_INFO_NOTIFY:"11401",Online_Count_Notify:"11402",Issue_Notify:"11403",State_Notify:"11404",Limit_Notify:"11405",Bet_Req:"11406",Bet_Res:"11407",Player_Bet_Info_Notify:"11408",Game_Bet_Info_Notify:"11409",Game_Result_Notify:"11410",Chart_Req:"11411",Chart_Res:"11412",Ranking_List_Req:"11413",Ranking_List_Res:"11414",Special_Player_Notify:"11415",Special_Player_Action_Notify:"11416",Cancel_Bet_Req:"11417",Cancel_Bet_Res:"11418",Last_Bet_Notify:"11419",LWAVE_SCENE_REQ:"10104",LEAVE_SCENE_RES:"10105"},t}();t.sgjControllerCon=e,__reflect(e.prototype,"sgj.sgjControllerCon");var i;!function(t){t[t.PLUTE0=0]="PLUTE0",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.ONLINE=4]="ONLINE",t[t.SELF=5]="SELF"}(i=t.PlayerConst||(t.PlayerConst={}));var o;!function(t){t[t["do"]=0]="do",t[t.re=1]="re",t[t.mi=2]="mi",t[t.fa=3]="fa",t[t.sol=4]="sol",t[t.la=5]="la",t[t.si=6]="si",t[t.dodo=7]="dodo"}(o=t.SgjPlaceConst||(t.SgjPlaceConst={}))}(sgj||(sgj={}));var sgj;!function(t){var e;!function(t){t[t.Base=6100]="Base",t[t.Popup=6101]="Popup",t[t.Recharge=6102]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,t._PopupView=null,t._proxy=null,t._sgjModel=null,t.betpingguo=["SGJbet_pingguo","SGJbet_juzi","SGJbet_mangguo","SGJbet_lingdang","SGJbet_xigua","SGJbet_shuangxing","SGJbet_shuangqi","SGJbet_bar"],t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners(),this.addEventListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),App.ViewManager.open(t.ViewConst.Base,this.getModel()),App.ViewManager.open(t.ViewConst.Popup,this.getModel()),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._PopupView=new t.SgjPopupView(this,LayerManager.UI_Popup),this.getSgjModel().userMoney=this.player.getMoney()},i.prototype.getSgjModel=function(){return this._model},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._PopupView),this.registerRecharge()},i.prototype.addEventListeners=function(){this.registerFunc("onClickBackLobby",this.onClickBackLobby,this),this.registerFunc("onClickBtnBetTAP",this.onClickBtnBetTAP,this),this.registerFunc("onClickBtnBetBEGIN",this.onClickBtnBetBEGIN,this),this.registerFunc("onClickBtnEndBetENDOUT",this.onClickBtnEndBetENDOUT,this),this.registerFunc("revokeBetMoney",this.revokeBetMoney,this),this.registerFunc("btnContinueBet",this.btnContinueBet,this),this.registerFunc("changeInitBet",this.changeInitBet,this),this.registerFunc(t.sgjControllerCon.onOnlineCountNotifyBack,this.onOnlineCountNotifyBack,this),this.registerFunc(t.sgjControllerCon.onCancelBetResBack,this.onCancelBetResBack,this),this.registerFunc(t.sgjControllerCon.onPlayerInfoNotifyBack,this.onPlayerInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.sgjControllerCon.onStateNotifyBack,this.onStateNotifyBack,this),this.registerFunc(t.sgjControllerCon.onSpecialPlayerNotifyBack,this.onSpecialPlayerNotifyBack,this),this.registerFunc(t.sgjControllerCon.onLastBetNotifyBack,this.onLastBetNotifyBack,this),this.registerFunc(t.sgjControllerCon.onBetResBack,this.onBetResBack,this),this.registerFunc(t.sgjControllerCon.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.sgjControllerCon.onGameBetInfoNotifyBack,this.onGameBetInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.settlementStage,this.settlementStage,this),this.registerFunc("showranking",this.showranking,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc(t.sgjControllerCon.onChartResBack,this.onChartResBack,this),this.registerFunc(t.sgjControllerCon.onSpecialPlayerActionNotifyBack,this.onSpecialPlayerActionNotifyBack,this),this.registerFunc(t.sgjControllerCon.onRankingListResBack,this.onRankingListResBack,this),this.registerFunc("requestWinRecord",this.requestWinRecord,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowLimitBet",this.confirmShowLimitBet,this),this.registerFunc("ConfirmMoney",this.ConfirmMoney,this),this.registerFunc("effectSwitch",this.effectSwitch,this),this.registerFunc("sgjGoRechargeMoney",this.sgjGoRechargeMoney,this)},i.prototype.gameInit=function(){},i.prototype.onClickBackLobby=function(){this._proxy.sendLeaveGame()},i.prototype.onClickBtnBetTAP=function(t){R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this.betshow(t)},i.prototype.onClickBtnBetBEGIN=function(t){R.removeAllTimeOut(this),App.TimerManager.removeAll(this),R.setTimeOnce(function(){App.TimerManager.doTimer(200,99999,function(){this.betshow(t)},this)},this,1e3)},i.prototype.onClickBtnEndBetENDOUT=function(t){R.removeAllTimeOut(this),App.TimerManager.removeAll(this)},i.prototype.betshow=function(e,i){console.log("押注位置"),console.log(e);var o=[],n=this.getSgjModel();n.isRepeat=!1,n.betPlace=e;var s=i?i:1e4*n.multipleBet;if(t.conFun.setBetMusic(e),!this.isLimit(e,s)){R.sendPlayerAction(this.betpingguo[e]),o.push({place:n.betPlace,bet_money:s});var r={bets:o,table_id:0};this._proxy.requestBet(r)}},i.prototype.isLimit=function(e,i){console.log("返回是否超限红"),console.log(e),console.log(i),console.log(this.getSgjModel().betList),console.log(this.getSgjModel().limitBet);var o=!1;return this.getSgjModel().limitBet.forEach(function(n){if(n.place==e){var s=i,r=this.getSgjModel().betList[e],a=this.getSgjModel().UserMoney;console.log(r),i>a&&(this._PopupView._sgjPrompt.showPromptSgj(6),o=!0),r>=n.limit_max_money?(t.conFun.textReminder(4),o=!0):s+r>n.limit_max_money&&(console.log(this.getSgjModel().upperBureauchip.length),console.log(this.getSgjModel().isRepeat),this.getSgjModel().isRepeat&&this.getSgjModel().upperBureauchip.length>=2?t.conFun.textReminder(4):(this.getSgjModel().limitBetMoney=n.limit_max_money-r,console.log("showPrompt1"),console.log(this.getSgjModel().limitBetMoney),this._PopupView._sgjPrompt.showPromptSgj(4,App.CommonUtils.money(this.getSgjModel().limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money))),o=!0)}}.bind(this)),console.log(o),o},i.prototype.revokeBetMoney=function(){console.log("发送撤销投注"),this._proxy.requestRevokeBet()},i.prototype.btnContinueBet=function(){this.repeatBet()},i.prototype.changeInitBet=function(t){this.getSgjModel().multipleBet=this.getSgjModel().initBetList[t],console.log("切换底注"),console.log(this.getSgjModel().multipleBet),this._view.setMultipleNum(this.getSgjModel().multipleBet)},i.prototype.onOnlineCountNotifyBack=function(t){this._view.setonlineNum(t.online_count)},i.prototype.onCancelBetResBack=function(e){this.getSgjModel().userMoney=e.balance;var i=App.CommonUtils.money2Str(e.balance);this._view.gameSetMoney(i),this.getSgjModel().truebet=[],this._view.setUserBet(0),this._view.clearBetMoney(),this._view.revokeBetAshed(),this._view.cleanBetList();for(var o in this.getSgjModel().specialMoney)this.getSgjModel().playerIds[o]==this.getSgjModel().playerIds[t.PlayerConst.SELF]&&(this.getSgjModel().specialMoney[o]=e.balance,this._view.specialPlayerMoney(i,o))},i.prototype.onPlayerInfoNotifyBack=function(t){var e=App.CommonUtils.money2Str(t.balance);this._view.gameSetMoney(e)},i.prototype.onIssueNotifyBack=function(t){},i.prototype.onStateNotifyBack=function(t){if(1==t.state){console.log("游戏状态一"),this._view.setUserBet(0),this._view.cleanBetList(),App.TimerManager.removeAll(this._view),this.getSgjModel().isFirtGame=!1,this._PopupView.closeWaitGameOver(),this._PopupView.closeSettlementAnimation(),this._view.closetAnimation(),this._view.cleanState1(),this._PopupView.diceAnimation(1);var e=t.remaining_time;this._view.sgjCountdownTimer(e);var i=this;R.setTimeOnce(function(){i._view._winpos=i.getSgjModel()._mAwardList.length?i.getSgjModel()._mAwardList[0].open_place:5,i._view.startGameLight()},this,300)}else if(2==t.state){if(console.log("游戏状态二"),this._view.scaleAllBetMoney(),this._PopupView._sgjPrompt.closePoput(),this._view.timeGroup.visible=!1,App.TimerManager.removeAll(this._view),this.getSgjModel().isFirtGame)return void this._PopupView.waitGameOver();this._PopupView.closeSettlementAnimation(),this._view.closetAnimation(),this.onClickBtnEndBetENDOUT({}),this._view.overBet(),this._PopupView.diceAnimation(2)}},i.prototype.onSpecialPlayerNotifyBack=function(t){var e=t.special_player;if(console.log("num"),console.log(t),e.length)for(var i=0;i<e.length;i++){var o=e[i];this._view.setInformation(o),this.getSgjModel().playerIds[o.play_role]=o.user_id,this.getSgjModel().specialMoney[o.play_role]=o.balance}},i.prototype.onLastBetNotifyBack=function(t){var e=t.open_places;this._view.InitUpdateImage(e)},i.prototype.onBetResBack=function(e){var i=e.code;if(i){if(4==i){if(this.getSgjModel().isRepeat&&this.getSgjModel().upperBureauchip.length>1)return void t.conFun.textReminder(i);console.log("单个区域投注");var o=this.getSgjModel().betList[this.getSgjModel().betPlace],n=this.getSgjModel().limitBet[this.getSgjModel().betPlace];return console.log(this.getSgjModel().limitBet[this.getSgjModel().betPlace]),void(o>=n.limit_max_money?t.conFun.textReminder(i):(this.getSgjModel().limitBetMoney=n.limit_max_money-o,this._PopupView._sgjPrompt.showPromptSgj(4,App.CommonUtils.money(this.getSgjModel().limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money))))}return 6==i?void this._PopupView._sgjPrompt.showPromptSgj(i):void t.conFun.textReminder(i)}for(var s=e.bets,r=0;r<s.length;r++){s[r].place,s[r].bet_money}1==s.length&&R.sendPlayerAction("SGJantes_bet"+this.getSgjModel().multipleBet),this.getSgjModel().isRepeat=!1;var a=App.CommonUtils.money2Str(e.balance);this._view.gameSetMoney(a),this._view.revokeBetLight(),this._view.avatarShake(4)},i.prototype.onPlayerBetInfoNotifyBack=function(t){this.getSgjModel().allMoney=0,this.getSgjModel().truebet=[],t.infos.forEach(function(t,e){var i=t.bet_money,o=this.getSgjModel()._betInfoNotify[e].bet_money,n=this.getSgjModel()._betInfoNotify[e].place;console.log("toFixed"),console.log(i),this._view.setPersonalBetMoney(e,App.CommonUtils.money(i).toFixed(1)),i>o&&t.place==n&&(this._view.btnNumShake(t.place,1),this._view.createFlyCoin(t.place,5)),this.totalbet(i,e),this.getSgjModel().betList[t.place]=t.bet_money}.bind(this)),this.getSgjModel()._betInfoNotify=[],this.getSgjModel()._betInfoNotify=t.infos,this._view.setUserBet(App.CommonUtils.money2Str(this.getSgjModel().allMoney))},i.prototype.onGameResultNotifyBack=function(t){this._view.marryStartUp();for(var e=this.getSgjModel()._mAwardList,i=0;i<e.length;i++){var o=e[i].win_money;o>0&&(-1==this.getSgjModel()._specialPlayer.indexOf(4)&&this.getSgjModel()._specialPlayer.push(4),this._view.createWinChip(e[i].place,5))}},i.prototype.onGameBetInfoNotifyBack=function(e){var i=0;e.infos.forEach(function(o,n){var s=o.total_bet_money,r=this.getSgjModel()._allBetInfoNotify[n].total_bet_money,a=this.getSgjModel()._allBetInfoNotify[n].place;i+=s,this._view.setentireBetMoney(n,App.CommonUtils.money(s).toFixed(1)),s>r&&o.place==a&&(this._view.btnNumShake(o.place,2),this._view.createFlyCoin(o.place,4)),s>0&&(this._view.onlineShake(),-1==this.getSgjModel()._allBetPos.indexOf(o.place)&&this.getSgjModel()._allBetPos.push(o.place)),e.user_id==this.getSgjModel().playerIds[t.PlayerConst.PLUTE0]&&r>s&&this._view.hideStar()}.bind(this)),this.getSgjModel()._allBetInfoNotify=[],this.getSgjModel()._allBetInfoNotify=e.infos,this._view.betTotalScore.text=App.CommonUtils.money(i).toFixed(1)+"",this._view.btnAllNumShake()},i.prototype.settlementStage=function(t){var e=t.length,i=e%2,o=Math.floor(e/2),n=-1,s=-1,r=[];if(t.length>2)if(i){n=o,s=o,r.push(t[o]);for(var a=0;o>a;a++){n-=1,s+=1;for(var h=0;2>h;h++)r.push(t[0==h?n:s])}}else{n=o-1,s=o;for(var l=0;o>l;l++){for(var h=0;2>h;h++)r.push(t[0==h?n:s]);n-=1,s+=1}}else r=t;this._PopupView.setFruitIcon(r),this.getSgjModel().isEffect||this._view.settlementAnimation();var p=this,c=App.CommonUtils.money2Str(this.getSgjModel()._mTotalScore),u=this.getSgjModel().specialMoney;this._view.playerWinMoney(c,4),R.setTimeOnce(function(){p._PopupView.closeSettlementAnimation(),p._view.closetAnimation(),p._view.flyWinChip(),p.playGetScore();for(var t in u){var e=u[t];p._view.specialPlayerMoney(App.CommonUtils.money2Str(e),t)}},this,3e3)},i.prototype.showranking=function(){this._proxy.ranking({begin_idx:0,req_count:100}),App.EasyLoading.showOnTimeOut(),console.log("this._proxy.ranking"),this._PopupView._sgjRanking.showPopup()},i.prototype.showRecord=function(){this._PopupView._sgjWinningRecord.showPopup();var t=this.getSgjModel().recordList;t.length&&this._PopupView._sgjWinningRecord.rankData(t)},i.prototype.showGameSet=function(){this._PopupView._sgjGameSet.initSet(),this._PopupView._sgjGameSet.showPopup()},i.prototype.onChartResBack=function(){this._view.recordCardDisplay(this.getSgjModel()._recordHistory)},i.prototype.onSpecialPlayerActionNotifyBack=function(t){if(t)if(t.play_action){for(var e=0,i=0;i<t.bets.length;i++)console.log("data.bets[i]",t.bets[i],t.bets[i].money),t.bets[i].money>0&&(this._view.createWinChip(t.bets[i].place,t.play_role),e+=t.bets[i].money,-1==this.getSgjModel()._specialPlayer.indexOf(t.play_role)&&this.getSgjModel()._specialPlayer.push(t.play_role));this._view.playerWinMoney(App.CommonUtils.money2Str(e),t.play_role),this.getSgjModel().specialMoney[t.play_role]=t.balance}else{var o=App.CommonUtils.money2Str(t.balance);if(console.log(t.play_role),this._view.avatarShake(t.play_role),this._view.specialPlayerMoney(o,t.play_role),!t.play_role)for(var i=0;i<t.bets.length;i++){var n=t.bets[i].place;this._view.starFly(n)}for(var s=0;s<t.bets.length;s++)this._view.createFlyCoin(t.bets[s].place,t.play_role)}},i.prototype.onRankingListResBack=function(t){this._PopupView._sgjRanking.rankData(t.infos)},i.prototype.requestWinRecord=function(){this._proxy.winRecord()},i.prototype.showHelp=function(){this._PopupView._sgjHelp.rankData()},i.prototype.confirmShowLimitBet=function(){this.getSgjModel().limitBetMoney&&this.betshow(this.getSgjModel().betPlace,this.getSgjModel().limitBetMoney)},i.prototype.ConfirmMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.effectSwitch=function(t){this.getSgjModel().isEffect=t},i.prototype.sgjGoRechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.repeatBet=function(){if(console.log("upperBureauchip",this.getSgjModel().upperBureauchip),this.getSgjModel().upperBureauchip.length){this.getSgjModel().isRepeat=!0;for(var t=[],e=0;e<this.getSgjModel().upperBureauchip.length;e++){var i=this.getSgjModel().upperBureauchip[e];if(this.isLimit(i.place,i.bet_money))return}this.getSgjModel().upperBureauchip.forEach(function(e){e.bet_money>0&&t.push(e)}.bind(this));var o={bets:t,table_id:0};t.length>0&&this._proxy.requestBet(o)}},i.prototype.repeatReadyBet=function(){this.getSgjModel().upperBureauchip.forEach(function(t,e){console.log("upperBureauchip-chip"),this.repeatbetexpect(t)}.bind(this))},i.prototype.playGetScore=function(){egret.log("开始播放水果机得分动画!");var t=Number(this._view.gameGetMoney());console.log(this._view.gameGetMoney());var e=Number(App.CommonUtils.money2Str(this.getSgjModel()._mTotalScore)),i=e/30;console.log(t),console.log(e),this.setRecordInit(this.getSgjModel()._mTotalScore),App.TimerManager.doTimer(32,999,function(){App.SoundManager.playEffect("defen_mp3"),t+=i,e-=i,console.log(e),this._view.gameSetMoney(App.CommonUtils.moneyself(t)),this._view.setWinTotalScore(1e4*e),i>=e&&(App.SoundManager.stopEff("defen_mp3"),this._view.setWinTotalScore(0),this._view.gameSetMoney(App.CommonUtils.money2Str(this.getSgjModel()._balance)),App.TimerManager.removeAll(this))},this)},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=t;if(i>0){var o={time:e,hit_money:i};this.getSgjModel().recordList.unshift(o)}this.getSgjModel().changerecordList(),console.log("sgj战绩数据统计"),console.log(this.getSgjModel().recordList)},i.prototype.totalbet=function(t,e){var i={place:e,bet_money:t};i.bet_money>0&&this.getSgjModel().truebet.push(i),this.getSgjModel().allMoney+=t,console.log("truebet",this.getSgjModel().truebet),console.log(this.getSgjModel().allMoney)},i.prototype.resetLimitBet=function(){for(var t=0;8>t;t++)this.getSgjModel().limitBet[t]=this.getSgjModel().limitOldBet[t]},i.prototype.setPlaceLimitBet=function(t,e){console.log("每个区域时时限红金额"),this.getSgjModel().limitBet[t]=this.getSgjModel().limitBet[t]-e,console.log(this.getSgjModel().limitBet)},i.prototype.resetUserIdMoney=function(){for(var e=0;6>e;e++)this.getSgjModel().specialMoney[e]=0,t.PlayerConst.SELF!=e&&(this.getSgjModel().playerIds[e]=0);console.log("重置特效玩家User_id"),console.log(this.getSgjModel().playerIds),console.log(this.getSgjModel().specialMoney)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),Log.trace("sgj销毁Controller"),t.StarExpand.cleanFormPool(),this._view.destroy(),this._model.destroy(),this._proxy.destroy(),this._PopupView.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0,this._PopupView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"sgj.GameController")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.initData(),i}return __extends(e,t),e.prototype.initData=function(){this.multipleBet=.1,this.drawsNum=[],this.lotteryType=0,this._balance=0,this.recordList=[],this.betPlace=0,this.truebet=[],this.userMoney=0,this._betInfoNotify=[{place:0,bet_money:0},{place:1,bet_money:0},{place:2,bet_money:0},{place:3,bet_money:0},{place:4,bet_money:0},{place:5,bet_money:0},{place:6,bet_money:0},{place:7,bet_money:0}],this._allBetInfoNotify=[{place:0,total_bet_money:0},{place:1,total_bet_money:0},{place:2,total_bet_money:0},{place:3,total_bet_money:0},{place:4,total_bet_money:0},{place:5,total_bet_money:0},{place:6,total_bet_money:0},{place:7,total_bet_money:0}],this._winpos=5,this.upperBureauchip=[],this._mAwardList=[],this.openPlace=[],this._winBtnPos=[],this._mScoreAward=0,this._mTotalScore=0,this.isFirtGame=!0,this._recordHistory=[],this.historyNum=0,this._specialPlayer=[],this._allBetPos=[],this.limitBet=[],this.limitOldBet={},this.isRepeat=!1,this.playerIds={},this.isEffect=!1,this.specialMoney={},this.initBetList=[.1,1,10,100],this.betList={},this.limitBetMoney=0},e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.countTotalScore=function(t){if(!(t>=this._mAwardList.length)){var e=this._mAwardList[t].win_money;this._mScoreAward+=e,egret.log("当前奖励分数：",this._mScoreAward)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"sgj.GameModel")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getSgjModel=function(){return this._model},i.prototype.onPlayerInfoNotifyBack=function(e){console.log("onPlayerInfoNotifyBack",e),this.getSgjModel()._balance=e.balance,this.applyFunc(t.sgjControllerCon.onPlayerInfoNotifyBack,e)},i.prototype.onOnlineCountNotifyBack=function(e){console.log("onOnlineCountNotifyBack",e),this.applyFunc(t.sgjControllerCon.onOnlineCountNotifyBack,e)},i.prototype.onIssueNotifyBack=function(e){console.log("onIssueNotifyBack",e),this.applyFunc(t.sgjControllerCon.onIssueNotifyBack,e)},i.prototype.onStateNotifyBack=function(e){console.log("onStateNotifyBack",e),this.applyFunc(t.sgjControllerCon.onStateNotifyBack,e)},i.prototype.onLimitNotifyBack=function(t){console.log("onLimitNotifyBack",t),this.getSgjModel().limitBet=t.limits;for(var e=0;e<t.limits.length;e++)this.getSgjModel().betList[t.limits[e].place]=0;console.log(this.getSgjModel().limitBet),console.log(this.getSgjModel().betList)},i.prototype.onBetResBack=function(e){console.log("onBetResBack",e),this.getSgjModel()._balance=e.balance,this.applyFunc(t.sgjControllerCon.onBetResBack,e)},i.prototype.onGameBetInfoNotifyBack=function(e){console.log("onGameBetInfoNotifyBack",e),this.applyFunc(t.sgjControllerCon.onGameBetInfoNotifyBack,e)},i.prototype.onPlayerBetInfoNotifyBack=function(e){console.log("onPlayerBetInfoNotifyBack",e),this.applyFunc(t.sgjControllerCon.onPlayerBetInfoNotifyBack,e)},i.prototype.onGameResultNotifyBack=function(e){console.log("onGameResultNotifyBack",e),this.getSgjModel().lotteryType=e.open_type,this.getSgjModel()._mTotalScore=e.total_win_money,this.getSgjModel()._mAwardList=[],this.getSgjModel()._mScoreAward=0,this.getSgjModel()._balance=e.balance;for(var i=0;i<e.open_place_results.length;i++){var o=e.open_place_results[i],n={place:o.place,open_place:o.open_place,win_money:o.win_money};this.getSgjModel()._mAwardList.push(n)}console.log(this.getSgjModel()._mAwardList),this.applyFunc(t.sgjControllerCon.onGameResultNotifyBack,e)},i.prototype.onChartResBack=function(e){if(console.log("onChartResBack",e),e.chart_infos.length){this.getSgjModel()._mAwardList=[];var i=e.chart_infos[0].open_places;this.getSgjModel().drawsNum=i,this.getSgjModel()._winpos=i[0];for(var o=0;o<i.length;o++){var n=i[o],s={place:0,open_place:n,win_money:0};this.getSgjModel()._mAwardList.push(s)}console.log(this.getSgjModel()._mAwardList),e.chart_infos.length>50&&e.chart_infos.splice(0,50);var r=[];e.chart_infos.forEach(function(t){for(var e=0;e<t.open_places.length;e++)if(12!=t.open_places[e]&&24!=t.open_places[e]){var i={open_place:t.open_places[e],open_type:t.open_type,open_num:this.getSgjModel().historyNum};r.push(i),this.getSgjModel()._recordHistory.push(i)}this.getSgjModel().historyNum+=1}.bind(this)),r.length>50?this.getSgjModel()._recordHistory=r.splice(0,50):this.getSgjModel()._recordHistory=r}console.log(this.getSgjModel()._recordHistory),this.applyFunc(t.sgjControllerCon.onChartResBack)},i.prototype.onRankingListResBack=function(e){console.log("onRankingListResBack",e),this.applyFunc(t.sgjControllerCon.onRankingListResBack,e),App.EasyLoading.hideLoading()},i.prototype.onSpecialPlayerNotifyBack=function(e){console.log("onSpecialPlayerNotifyBack",e),this.applyFunc(t.sgjControllerCon.onSpecialPlayerNotifyBack,e)},i.prototype.onSpecialPlayerActionNotifyBack=function(e){console.log("onSpecialPlayerActionNotifyBack",e),this.applyFunc(t.sgjControllerCon.onSpecialPlayerActionNotifyBack,e)},i.prototype.onCancelBetResBack=function(e){console.log("onCancelBetResBack",e),this.getSgjModel()._balance=e.balance,this.applyFunc(t.sgjControllerCon.onCancelBetResBack,e)},i.prototype.onLastBetNotifyBack=function(e){console.log("onLastBetNotifyBack",e),this.applyFunc(t.sgjControllerCon.onLastBetNotifyBack,e)},i.prototype.onLeaveSceneRes=function(t){console.log("onLeaveSceneRes",t),App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.sgjControllerCon.NET_MSG.PLAYER_INFO_NOTIFY,this.onPlayerInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Online_Count_Notify,this.onOnlineCountNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Issue_Notify,this.onIssueNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.State_Notify,this.onStateNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Limit_Notify,this.onLimitNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Bet_Res,this.onBetResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Player_Bet_Info_Notify,this.onPlayerBetInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Game_Bet_Info_Notify,this.onGameBetInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Game_Result_Notify,this.onGameResultNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Chart_Res,this.onChartResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Ranking_List_Res,this.onRankingListResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Special_Player_Notify,this.onSpecialPlayerNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Special_Player_Action_Notify,this.onSpecialPlayerActionNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Cancel_Bet_Res,this.onCancelBetResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Last_Bet_Notify,this.onLastBetNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.LEAVE_SCENE_RES,this.onLeaveSceneRes,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.requestBet=function(e){this.send(t.sgjControllerCon.NET_MSG.Bet_Req,e)},i.prototype.requestExitRoom=function(){this.send(t.sgjControllerCon.NET_MSG.LWAVE_SCENE_REQ)},i.prototype.requestRevokeBet=function(){this.send(t.sgjControllerCon.NET_MSG.Cancel_Bet_Req)},i.prototype.winRecord=function(){this.send(t.sgjControllerCon.NET_MSG.Chart_Req,{table_id:0})},i.prototype.ranking=function(e){this.send(t.sgjControllerCon.NET_MSG.Ranking_List_Req,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"sgj.GameProxy")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(){}return t.numShake=function(t){console.log("数字抖动放大展示后再缩小"),egret.Tween.get(t).to({scaleX:1.1,scaleY:1.1},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},t.setBetMusic=function(t){switch(t){case 0:App.SoundManager.playEffect("xiazhu1_mp3");break;case 1:App.SoundManager.playEffect("xiazhu2_mp3");break;case 2:App.SoundManager.playEffect("xiazhu3_mp3");break;case 3:App.SoundManager.playEffect("xiazhu4_mp3");break;case 4:App.SoundManager.playEffect("xiazhu5_mp3");break;case 5:App.SoundManager.playEffect("xiazhu6_mp3");break;case 6:App.SoundManager.playEffect("xiazhu7_mp3");break;case 7:App.SoundManager.playEffect("xiazhu8_mp3")}},t.textReminder=function(t){switch(t){case 1:App.ScrollTxtTips.showTip("下注位置错误");break;case 2:App.ScrollTxtTips.showTip("下注金额太小或太大溢出");break;case 3:App.ScrollTxtTips.showTip("非投注阶段，请稍后");break;case 4:App.ScrollTxtTips.showTip("超出单人限额");break;case 5:App.ScrollTxtTips.showTip("超出所有人总共限额");break;case 6:App.ScrollTxtTips.showTip("没有足够的余额");break;case 7:App.ScrollTxtTips.showTip("充值接口后期统一制作")}},t.sgjcounterBet=function(t){switch(t){case.1:R.sendPlayerAction("Brnn2counter_bet1");break;case 1:R.sendPlayerAction("Brnn2counter_bet10");break;case 10:R.sendPlayerAction("Brnn2counter_bet50");break;
case 100:R.sendPlayerAction("Brnn2counter_bet100")}},t.btnList={},t.lotterylist={overlist:["shz_card_0_png","shz_card_0_png","shz_card_0__png","shz_card_1_png","shz_card_1__png","shz_card_2__png","shz_card_3__png","shz_card_4__png","shz_card_5__png","shz_card_6__png","shz_card_7__png","shz_card_8__png"]},t}();t.conFun=e,__reflect(e.prototype,"sgj.conFun")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"sgj.DataNotify")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"sgj","GameSkin")||this;return i.winImgList=[],i.fuitIconList=[],i._mPlace={},i.index=0,i._ringlist=[],i.SingleList=[],i._winpos=5,i._index=1,i.imgPos=0,i.imgHighPos=0,i.maxOne=App.MathUtils.randomInt(1,24),i.nonAward=[],i.randomNum=[2,3,4],i.randomResult=[],i.randomNon=[5,15,21],i.randomWin=[],i.thirdLight=[],i.ThirdIndex=0,i.ThirdNum=0,i.ThirdLength=0,i.trainPos=[],i.randomLuckResult=[],i.luckType=1,i.lightList=[{n:1,m:5},{n:2,m:6},{n:3,m:7},{n:4,m:8},{n:3,m:7},{n:2,m:6},{n:1,m:5}],i.lightList2=[[4,5],[3,4,5,6],[2,3,4,5,6,7],[1,2,3,4,5,6,7,8]],i.lightList3=[[1],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4,5],[1,2,3,4,5,6],[1,2,3,4,5,6,7],[1,2,3,4,5,6,7,8]],i.lightList5=[1,2,3,4,5,6,7,8],i.lightList6={1:8,2:7,3:6,4:5,5:4,6:3,7:2,8:1},i.lightIndex=0,i.lightIndex2=0,i.lightIndex3=0,i.lightIndex6=0,i.lightIndex7=0,i.indextype=0,i.indextypePos=[],i._sgjBones=null,i._sgjMessage.initComponent(t),i._sgjButtonBtn.initComponent(t),i._sgjToorBar.initComponent(t),i._sgjOuterLight.initComponent(t),i._posList={},i._imageList={},i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.createHeadPosition();for(var t=1;3>=t;t++)this._posList[t+0]={x:229.33,y:176.06-50*(t-1)},this._posList[t+3]={x:322.33+93*(t-1),y:77.06},this._posList[t+6]={x:600.33+93*(t-1),y:77.06},this._posList[t+9]={x:789.33,y:127.06+50*(t-1)},this._posList[t+12]={x:789.33,y:276.06+50*(t-1)},this._posList[t+15]={x:695.33-93*(t-1),y:375.06},this._posList[t+18]={x:416.33-93*(t-1),y:375.06},this._posList[t+21]={x:229.33,y:326.06-50*(t-1)};console.log("_posList"),console.log(this._posList);var i=this._imageList;i[1]=i[7]=i[13]=i[19]=0,i[8]=1,i[3]=i[15]=2,i[14]=3,i[9]=i[21]=4,i[20]=5,i[4]=i[16]=6,i[2]=7,i[10]=8,i[11]=9,i[22]=10,i[23]=11,i[18]=12,i[17]=13,i[6]=14,i[5]=15,this._sgjToorBar._copeImageList=this._imageList;var o=this.fuitIconList;o[1]=o[7]=o[8]=o[13]=o[19]=0,o[3]=o[14]=o[15]=1,o[9]=o[20]=o[21]=2,o[2]=o[4]=o[16]=3,o[10]=o[11]=4,o[22]=o[23]=5,o[17]=o[18]=6,o[5]=o[6]=7,this.initBroadcast(this)},i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t;var i=this;i.createAperture(),i.runouterShowLight(),i.betInitData(),i.upUserInfo(),i._sgjToorBar.toolInitUI(),this._sgjMessage.initInfo(),this.setUserBet(0),this.applyFunc("requestWinRecord"),App.SoundManager.playBg("bgm_mp3");for(var o=this._mMoudel.initBetList,n=0;n<o.length;n++)if(4>n){var s=o[n];this._sgjButtonBtn.setTimeNum(n,s)}},i.prototype.init=function(){},i.prototype.upUserInfo=function(){this._mMoudel.playerIds[t.PlayerConst.SELF]=this._mMoudel.player.getUserId(),this._sgjMessage.setUserImage("ui_headImg_"+this._mMoudel.player.getAvatar()),this._sgjMessage.setUserFrame("ui_headBox_"+this._mMoudel.player.getAvatarBox()),this._sgjMessage.setUserName(this._mMoudel.player.getNickName()),this.gameSetMoney(App.CommonUtils.money2Str(this._mMoudel.player.getMoney()))},i.prototype.createHeadPosition=function(){this._sgjButtonBtn.createHeadPosition()},i.prototype.startGameLight=function(){console.log("进入游戏跑马灯亮起情况"),this.stopAllTwinkleAperture(),this.hideAllAperture();var t=this._mMoudel._mAwardList;console.log(t);for(var e=0;e<t.length;e++){var i=t[e].open_place-1,o=this.imageLight.getChildAt(i);o.visible=!0,o.alpha=1}},i.prototype.InitUpdateImage=function(t){this.hideAllAperture();for(var e=0;t>e;e++){var i=t[e]-1,o=this.imageLight.getChildAt(i);o.alpha=1}},i.prototype.avatarShake=function(t){console.log("cow头像抖动效果"),this._sgjMessage.avatarShake(t)},i.prototype.setInformation=function(t){var e=t.nick_name,i="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),o=App.CommonUtils.money2Str(t.balance),n=t.play_role;this._sgjMessage.setPluteImage(i,n),this._sgjMessage.setPluteName(e,n),this.specialPlayerMoney(o,n),this._sgjMessage.playerDisplay(n)},i.prototype.specialPlayerMoney=function(t,e){this._sgjMessage.specialPlayerMoney(t,e)},i.prototype.playerWinMoney=function(t,e){this._sgjMessage.playerWinMoney(t,e)},i.prototype.getMoneyLight=function(t){this._sgjMessage.getMoneyLight(t)},i.prototype.getAllMoneyLight=function(){this._sgjToorBar.getAllMoneyLight()},i.prototype.starFly=function(e){console.log("神算子投注特效"),console.log(e);var i=this._sgjMessage.getPoint(),o=this._sgjButtonBtn.getParabolicPoint(e),n=this._sgjButtonBtn.getStarEndPoint(e),s=t.StarExpand.create();if(console.log(s),s){s.init(this);var r=500+50*e;s.run(i,o,n,r,function(){this._sgjButtonBtn.showStar(e),this._mPlace[e]=null}.bind(this),this)}},i.prototype.hideStar=function(){this._sgjButtonBtn.hideStar()},i.prototype.gameGetMoney=function(){return this._sgjMessage.gameGetMoney()},i.prototype.gameSetMoney=function(t){this._sgjMessage.gameSetMoney(t)},i.prototype.setUserBet=function(t){this._sgjMessage.setUserBet(t)},i.prototype.setWinTotalScore=function(t){this.winTotalScore.text=App.CommonUtils.money(t).toFixed(1)+""},i.prototype.setPersonalBetMoney=function(t,e){this._sgjButtonBtn.setPersonalBetMoney(t,e)},i.prototype.setentireBetMoney=function(t,e){this._sgjButtonBtn.setentireBetMoney(t,e)},i.prototype.setMultipleNum=function(t){this._sgjButtonBtn.setMultipleNum(t)},i.prototype.setonlineNum=function(t){this._sgjToorBar.setonlineNum(t)},i.prototype.onlineShake=function(){this._sgjToorBar.onlineShake()},i.prototype.allButtonAshed=function(){this._sgjButtonBtn.allButtonAshed()},i.prototype.allButtonLight=function(){this._sgjButtonBtn.allButtonLight()},i.prototype.continueBetLight=function(){this._sgjButtonBtn.continueBetLight()},i.prototype.continueBetAshed=function(){this._sgjButtonBtn.continueBetAshed()},i.prototype.revokeBetAshed=function(){this._sgjButtonBtn.revokeBetAshed()},i.prototype.revokeBetLight=function(){this._sgjButtonBtn.revokeBetLight()},i.prototype.overBet=function(){this._mMoudel.truebet.length&&(this._mMoudel.upperBureauchip=[],this._mMoudel.upperBureauchip=JSON.parse(JSON.stringify(this._mMoudel.truebet))),egret.Tween.removeTweens(this),this.allButtonAshed(),this.stopTimes(),this.cleanBetList()},i.prototype.cleanBetList=function(){for(var t=0;8>t;t++)this._mMoudel.betList[t]=0},i.prototype.recordCardDisplay=function(t){this._sgjToorBar.renderBead(t)},i.prototype.cleanState1=function(){egret.Tween.removeTweens(this),this.betInitData(),this.allButtonLight(),this.revokeBetAshed(),this._mMoudel.upperBureauchip.length?this.continueBetLight():this.continueBetAshed(),this._mMoudel._specialPlayer=[],this._mMoudel._allBetPos=[],this.hideStar()},i.prototype.betInitData=function(){this._sgjButtonBtn.clearAllBetMoney(),this.betTotalScore.text="0.0",this.winTotalScore.text="0.0"},i.prototype.clearBetMoney=function(){this._sgjButtonBtn.clearBetMoney()},i.prototype.btnNumShake=function(t,e){this._sgjButtonBtn.btnNumShake(t,e)},i.prototype.btnAllNumShake=function(){var e=this.betTotalScore;t.conFun.numShake(e)},i.prototype.btnRewardNumShake=function(){var e=this.winTotalScore;t.conFun.numShake(e)},i.prototype.marryRunNumShake=function(t){if(!(t>=this._mMoudel._mAwardList.length)){var e=this._mMoudel._mAwardList[t].win_money;e>0&&this.btnRewardNumShake()}},i.prototype.scaleAllBetMoney=function(){this._sgjButtonBtn.scaleAllBetMoney(),this.winTotalScore.scaleX=1,this.winTotalScore.scaleY=1,this.betTotalScore.scaleX=1,this.betTotalScore.scaleY=1},i.prototype.flyWinChip=function(){this._sgjButtonBtn.flyWinChip()},i.prototype.createFlyCoin=function(t,e){this._sgjButtonBtn.createFlyCoin(t,e)},i.prototype.createWinChip=function(t,e){this._sgjButtonBtn.createWinChip(t,e)},i.prototype.outerShowLight=function(){for(var t=0;34>t;t++){var e=this.outerLight1.getChildAt(t);this.outerLight1.getChildAt(t).source="xysgj_ui_waiweicaideng1_png"==e.source?"xysgj_ui_waiweicaideng2_png":"xysgj_ui_waiweicaideng1_png"}},i.prototype.runouterShowLight=function(){this._sgjOuterLight.runouterShowLight()},i.prototype.sgjCountdownTimer=function(t){this.index=0;var e=Math.round(t/1e3);console.log("倒计时"),console.log(e),this.sgjTime.text=e+"",this.timeGroup.visible=!0,this.index=e,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){return this.index--,this.index<=5&&this.index>0?(this.sgjTime.textColor=16711680,t.conFun.numShake(this.sgjTime),App.SoundManager.playEffect("daojishi_mp3")):this.sgjTime.textColor=16777215,this.index<0?(this.index=0,this.sgjTime.text=""+this.index,void App.TimerManager.removeAll(this)):(this.sgjTime.text=""+this.index,void console.log("倒计时",this.sgjTime.text))},i.prototype.over=function(){this.index=0,this.sgjTime.text="",this.timeGroup.visible=!1,this.sgjTime.textColor=16777215,this.overBet()},i.prototype.stopTimes=function(){App.TimerManager.removeAll(this),this.index=0,this.sgjTime.text="",this.timeGroup.visible=!1,this.sgjTime.textColor=16777215},i.prototype.createAperture=function(){this.clearAperture();for(var t=0;6>t;t++){var e=new eui.Image;e.source="xysgj_ui_paodengkuang_png",e.width=101,e.height=57,e.alpha=0,e.name=t+"",e.x=0,e.y=0,this.GroupMain.addChild(e),this._ringlist.push(e)}},i.prototype.createSingleAperture=function(t){var e=new eui.Image;e.source="xysgj_ui_paodengkuang_png",e.width=101,e.height=57,e.alpha=1,e.x=this._posList[t].x,e.y=this._posList[t].y,this.GroupMain.addChild(e),this.SingleList.push(e)},i.prototype.SingletwinkleAperture=function(){for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];App.EffectUtils.startFlicker(e,100)}},i.prototype.SingleStoptwinkleAperture=function(){for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];App.EffectUtils.stopFlicker(e)}},i.prototype.SingclearAperture=function(){if(this.SingleList.length)for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];e.parent&&e.parent.removeChild(e)}this.SingleList=[]},i.prototype.clearAperture=function(){if(this._ringlist.length)for(var t=0;t<this._ringlist.length;t++){var e=this._ringlist[t];e.parent&&e.parent.removeChild(e)}this._ringlist=[]},i.prototype.hideAperture=function(){for(var t=1;t<this._ringlist.length;t++){var e=this._ringlist[t];e.alpha=0}},i.prototype.twinkleAperture=function(){for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t],i=e.open_place-1,o=this.imageLight.getChildAt(i);e.win_money>0&&(console.log("光圈闪烁 num.win_money>0"),App.EffectUtils.startFlicker(o,100))}},i.prototype.stopTwinkleAperture=function(){for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);App.EffectUtils.stopFlicker(i),i.alpha=1}},i.prototype.stopAllTwinkleAperture=function(){for(var t=0;24>t;t++){var e=this.imageLight.getChildAt(t);App.EffectUtils.stopFlicker(e),e.alpha=0}},i.prototype.getnum=function(t){for(var e in this._imageList)if(this._imageList[e]==t)return e},i.prototype.marryStartUp=function(){var t=0,e=this;t=this._winpos-1,this.winImgList=[],this.nonAward=[],this.thirdLight=[],this.winImgList.length=0,this.nonAward.length=0,console.log("跑马灯启动"),console.log(this.winImgList),console.log(this.nonAward),App.TimerManager.removeAll(this),App.SoundManager.playEffect("qidong_mp3"),App.TimerManager.doTimer(320,5,function(){var i=++t%24+1;e._index+=1,e.imgPos=i,e._index<3?e.updateImage(i,e._index):e.updateImage(i,3),console.log("sl._index"),console.log(e._index)},this,function(){App.TimerManager.removeAll(this),this.marryHighSpeed(this.imgPos),e._index=1},this)},i.prototype.marryHighSpeed=function(t){var e=t-1,i=this,o=0,n=this._mMoudel._mAwardList[0].open_place;this.winImgList.push(n),this.createLuckRandomNum(n);var s=n-e,r=0;s>0&&8>=s?r=72+(24-(8-s)):s>0&&s>8?r=72+(s-8):0>s?r=72+(24-(8-s)):0==s&&(r=88),console.log("times",r),console.log("max",n),App.SoundManager.playEffect("gaosu_mp3"),App.TimerManager.doFrame(1.5,r,function(){var t=++e%24+1;o+=1,console.log("_num"),console.log(o),i.imgHighPos=t,2>=o?i.updateImage(t,3+o):i.updateImage(t,5),console.log("reslutType1")},this,function(){App.TimerManager.removeAll(this),i.updateMarry(this.imgHighPos,n)},this)},i.prototype.updateMarry=function(t,e){var i=t-1,o=this;this._mMoudel.countTotalScore(0),App.SoundManager.stopEff("gaosu_mp3"),App.SoundManager.playEffect("jiansu_mp3"),App.TimerManager.doTimer(190,99,function(){var t=++i%24+1;console.log("跑马灯开跑"),o.updateImage(t,1),t==e&&(this._winpos=t,App.TimerManager.removeAll(this),this.createRandomNum(t),R.setTimeOnce(function(){this.resultScore()},this,200))},this)},i.prototype.resultScore=function(){this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(0);var t=this._mMoudel._mAwardList.length;1==t&&3==this._mMoudel.lotteryType?this.singleOpen(this._mMoudel._mScoreAward):2==t&&1==this._mMoudel.lotteryType?(App.SoundManager.playEffect("duokaichufa_mp3"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.moreOpenOne()},this,1500)):t>2&&4>=t&&1==this._mMoudel.lotteryType?(console.log("跑马灯结束 表现形式二"),App.SoundManager.playEffect("duokaichufa_mp3"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.moreOpenTwo()},this,1500)):t>4&&1==this._mMoudel.lotteryType?(App.SoundManager.playEffect("duokaichufa_mp3"),console.log("跑马灯结束 表现形式三"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.thirdLight.push(this._winpos),this.moreOpenThird(this._winpos,this._mMoudel._mAwardList[1].open_place)},this,1500)):t>=4&&2==this._mMoudel.lotteryType?(App.SoundManager.playEffect("huochechufa_mp3"),console.log("跑马灯结束 开火车"),App.TimerManager.doTimer(100,29,function(){this.changeInLight2()},this),R.setTimeOnce(function(){console.log("this._mMoudel._mAwardList",this._mMoudel._mAwardList);var t=this._mMoudel._mAwardList.length-1;this.runningTrain(t)},this,3e3)):0==this._mMoudel.lotteryType&&(App.SoundManager.playEffect("luckchufa_mp3"),App.TimerManager.doTimer(100,20,function(){this.changeInLight2()},this),this.luckSendLight())},i.prototype.singleOpen=function(t){R.removeAllTimeOut(this),t>0&&(this.twinkleAperture(),App.TimerManager.doTimer(100,19,function(){this.changeInLight()},this)),R.setTimeOnce(function(){this.stopTwinkleAperture(),console.log("停止闪烁，进入结算阶段"),this.settlementStage()},this,2e3)},i.prototype.settlementStage=function(){R.removeAllTimeOut(this);for(var e=this.getLotteryResults(),i=[],o=this._mMoudel._specialPlayer,n=0;n<e.length;n++){var s=this._imageList[e[n]];i.push(s)}console.log("结算阶段"),console.log(e),console.log(i),this.applyFunc(t.sgjControllerCon.settlementStage,i);for(var r=this.getIndexNum(),a=[],h=0;h<e.length;h++){var l={open_place:e[h],open_type:this._mMoudel.lotteryType,open_num:r};a.push(l)}console.log(a),this.recordFuitflay(a);for(var p=[],c=[],u=0;u<e.length;u++){var s=this.fuitIconList[e[u]],d=this.findNum(p,s);d||p.push(s)}p=p.concat(this._mMoudel._allBetPos).sort();for(var m=0;m<p.length;m++)p[m]==p[m+1]&&c.push(p[m]);console.log("is_winList"),console.log(e),console.log(this._mMoudel._allBetPos),console.log(p),console.log(c);var y=this._mMoudel._mAwardList;if(c.length){for(var _=0;_<c.length;_++)this.createWinChip(c[_],4);R.setTimeOnce(function(){for(var t=0;t<o.length;t++)this.getMoneyLight(o[t]);this.getAllMoneyLight()},this,4500),R.setTimeOnce(function(){for(var t=0;t<y.length;t++){var e=y[t].win_money;e>0&&this._sgjButtonBtn.setWinLight(y[t].place)}},this,3e3)}},i.prototype.recordFuitflay=function(t){this._sgjToorBar.dealRenderBead(t)},i.prototype.getIndexNum=function(){return this._sgjToorBar.getIndexNum()},i.prototype.getLotteryResults=function(){for(var t=[],e=this._mMoudel._mAwardList,i=0;i<e.length;i++){var o=e[i].open_place,n=this.findNum(t,o);n||12==o||24==o||t.push(o)}return t},i.prototype.moreOpenOne=function(){var t=this,e=this._mMoudel._mAwardList[1].open_place;this.winImgList.push(e);var i=this._winpos,o=e-i,n=0;o>0&&(n=o),this._mMoudel.countTotalScore(1),App.TimerManager.removeAll(this),App.SoundManager.playEffect("duokai1_mp3"),App.TimerManager.doFrame(4,99,function(){var o=--i;console.log("moreOpenOne"),console.log(o),console.log(e),console.log(this.winImgList),0==o&&(o=i=24),t.updatemoreOpenOneImage(o,e),o==e&&(App.SoundManager.stopEff("duokai1_mp3"),App.SoundManager.playEffect("duokaikaitu_mp3"),App.TimerManager.removeAll(this),this.closemoreOpenOneImage(),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(1),R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200))},this)},i.prototype.updatemoreOpenOneImage=function(t,e){var i=t-1,o=this.imageLight.getChildAt(i);o.alpha=1,t!=e&&this.nonAward.push(i),console.log("this.nonAward"),console.log(this.nonAward),this.changeInLight3()},i.prototype.closemoreOpenOneImage=function(){for(var t=0;t<this.nonAward.length;t++){var e=this.nonAward[t],i=this.imageLight.getChildAt(e);i.alpha=0}},i.prototype.moreOpenTwo=function(){var t=0;App.TimerManager.removeAll(this),App.TimerManager.doTimer(500,8,function(){t++,8==t?App.SoundManager.playEffect("duokaikaitu_mp3"):App.SoundManager.playEffect("duokai2_mp3");var e=this.getRandomNum();console.log("brr"),console.log(e),this.hideAllAperture();var i=this._winpos-1,o=this.imageLight.getChildAt(i);o.alpha=1;for(var n=0;n<e.length;n++){var s=e[n]-1,r=this.imageLight.getChildAt(s);r.alpha=1}console.log("music"),console.log(t)},this,function(){this.changeWinImg()},this)},i.prototype.changeWinImg=function(){this.hideAllAperture();for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);i.alpha=1,this._mMoudel.countTotalScore(t+1),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(t+1)}R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200)},i.prototype.getRandomNum=function(){var t=[],e=App.MathUtils.randomArray(this.randomNum);this.changeInLight5(e);for(var i=0;e>i;i++){var o=App.MathUtils.randomArray(this.randomResult),n=this.findNum(t,o);n?i-=1:t.push(o)}return t},i.prototype.findNum=function(t,e){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1},i.prototype.createRandomNum=function(t){this.randomResult=[];for(var e=1;25>e;e++)12!=e&&24!=e&&e!=t&&this.randomResult.push(e);console.log("this.randomResult"),console.log(this.randomResult)},i.prototype.moreOpenThird=function(t,e){var i=t-1;this.ThirdLength=0,console.log("moreOpenThird"),console.log(t),console.log(e),console.log(this.ThirdIndex);var o=e-t,n=0;this.ThirdIndex?o>0&&12>o?n=24+o:o>0&&o>=12?n=o:0>o&&-12>o?n=24+(24+o):0>o&&o>=-12?n=24+o:0==o&&(n=24):o>0?n=24+o:0>o?n=24+(24+o):0==o&&(n=24),console.log(n),console.log(o),this._mMoudel.countTotalScore(this.ThirdIndex+1),this.SingletwinkleAperture();var s=this._mMoudel._mAwardList.length-1;App.TimerManager.removeAll(this),App.SoundManager.playEffect("duokai3_mp3"),App.TimerManager.doFrame(4,n,function(){var t=++i%24+1;if(this.ThirdNum=t,this.ThirdLength++,this.changeInLight6(),0==this.ThirdIndex)if(this.ThirdLength<=2*s){var e=(this.ThirdLength%2,Math.floor(this.ThirdLength/2));this.upThirddateImage(t,e)}else this.upThirddateImage(t,s);else this.upThirddateImage(t,s-this.ThirdIndex)},this,function(){if(App.TimerManager.removeAll(this),this.ThirdIndex++,console.log("this.ThirdNum"),console.log(this.ThirdNum),App.SoundManager.stopEff("duokai3_mp3"),App.SoundManager.playEffect("duokaikaitu_mp3"),this.thirdLight.push(this.ThirdNum),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(this.ThirdIndex),this.ThirdIndex==s)return this.ThirdIndex=0,this.lightIndex6=0,this.stopTwinkleAperture(),void this.changeLotteryResults();var t=this._mMoudel._mAwardList[this.ThirdIndex+1].open_place;this.moreOpenThird(this.ThirdNum,t)},this)},i.prototype.countAllCycleNum=function(t){for(var e=1;e<this._mMoudel._mAwardList.length;e++){var i=this._mMoudel._mAwardList[e];if(1==e){var o=i-t,n=0;o>0?n=24+o:0>o?n=24+(24-o):0==o&&(n=24)}}},i.prototype.changeLotteryResults=function(){this.hideAllAperture();for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);i.alpha=1}R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200)},i.prototype.upThirddateImage=function(t,e){this.stopAllTwinkleAperture(),this.hideAllAperture(),this.lotteryAfterLight();var i=t-1,o=this.imageLight.getChildAt(i);if(o.alpha=1,App.EffectUtils.startFlicker(o,100),e>1)for(var n=0;e>n;n++){var s=t-2*n,r=s>=1?s-1:24+s-1;console.log("pos"),console.log(s),console.log(t),console.log(r),console.log(e);var a=this.imageLight.getChildAt(r);a.alpha=1,App.EffectUtils.startFlicker(a,100)}},i.prototype.lotteryAfterLight=function(){for(var t=0;t<this.thirdLight.length;t++){var e=this.thirdLight[t]-1,i=this.imageLight.getChildAt(e);i.alpha=1}},i.prototype.runningTrain=function(t){var e=0;e=this._winpos-1,this.allInLightNormal(),this.lightIndex7=0,App.TimerManager.removeAll(this),App.TimerManager.doTimer(500,t,function(){App.SoundManager.playEffect("huochezengjia_mp3");var t=++e%24+1;this.imgPos=t;var i=t-1,o=this.imageLight.getChildAt(i);o.alpha=1,App.EffectUtils.startFlicker(o,100),this.lightIndex7++,this["inLight"+this.lightList6[this.lightIndex7]].source="xysgj_ui_zhongyangcaideng2_png"},this,function(){this.stopAllTwinkleAperture(),this.updateTrainImage(this.imgPos,t),this.trainStart(this.imgPos,t)},this)},i.prototype.trainStart=function(t,e){console.log("火车启动"),App.TimerManager.removeAll(this),console.log(t),console.log(e);var i=t-1,o=0;App.TimerManager.doFrame(9,4,function(){0==o&&App.SoundManager.playEffect("huochezhuandong_mp3"),o++;var t=++i%24+1;this.imgPos=t,this.updateTrainImage(t,e),this.changeInLight7(e)},this,function(){App.TimerManager.removeAll(this),this.trainMediumSpeed(this.imgPos,e)},this)},i.prototype.trainMediumSpeed=function(t,e){console.log("火车中速"),console.log(t),console.log(e);var i=t-1,o=this,n=this._mMoudel._mAwardList[1].open_place,s=n-i,r=0;s>0&&8>=s?r=168+(24-(8-s)):s>0&&s>8?r=168+(s-8):0>s?r=168+(24-(8-s)):0==s&&(r=184),console.log("times",r),console.log("max",n),App.SoundManager.stopBg(),App.TimerManager.doFrame(3,r,function(){var t=++i%24+1;this.imgPos=t,o.updateTrainImage(t,e),o.changeInLight7(e)},this,function(){App.TimerManager.removeAll(this),o.updateTrainMarry(this.imgPos,n,e)},this)},i.prototype.updateTrainMarry=function(t,e,i){console.log("火车减速"),console.log(t),console.log(i);var o=t-1,n=this;App.TimerManager.doFrame(9,99,function(){var t=++o%24+1;n.imgPos=t,n.updateTrainImage(t,i),n.changeInLight7(i),t==e&&(App.SoundManager.playBg("bgm_mp3"),App.SoundManager.stopEff("huochezhuandong_mp3"),App.TimerManager.removeAll(this),this.lightIndex7=0,R.setTimeOnce(function(){this.resultTwinkle(this.imgPos,i)},this,200))},this)},i.prototype.resultTwinkle=function(t,e){console.log("火车停止后闪烁"),console.log(t),console.log(e),console.log(this.trainPos),this.changeInLightTwoker();for(var i=function(){var t=o.trainPos[n],e=o.imageLight.getChildAt(t);o._mMoudel.countTotalScore(n+1),R.setTimeOnce(function(){App.SoundManager.playEffect("duokaikaitu_mp3"),e.alpha=0,this.winlossTrain(e),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(n+1)},o,500*n)},o=this,n=0;n<this.trainPos.length;n++)i();R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200+500*e)},i.prototype.winlossTrain=function(t){R.setTimeOnce(function(){t.alpha=1},this,500)},i.prototype.updateTrainImage=function(t,e){console.log("更新火车光圈位置"),console.log(t),console.log(e),this.trainPos=[],this.hideAllAperture();var i=this._winpos-1,o=this.imageLight.getChildAt(i);o.alpha=1;var n=t-1,s=this.imageLight.getChildAt(n);if(s.alpha=1,e>1)for(var r=0;e>r;r++){var a=t-r,h=a>=1?a-1:24+a-1;console.log("pos"),console.log(h),this.trainPos.unshift(h);var l=this.imageLight.getChildAt(h);l.alpha=1}},i.prototype.luckSendLight=function(){console.log("LUCK送灯表现"),App.TimerManager.removeAll(this),App.TimerManager.doTimer(290,7,function(){this.hideAllAperture();var t=this.imageLight.getChildAt(this._winpos-1);t.alpha=1,this.luckType=0==this.luckType?1:0,this.changeInLight8(this.luckType);for(var e=0;e<this.randomLuckResult.length;e++){var i=this.randomLuckResult[e],o=i%2,n=i-1;if(0==this.luckType&&0==o){var s=this.imageLight.getChildAt(n);s.alpha=1}else if(1==this.luckType&&1==o){var s=this.imageLight.getChildAt(n);s.alpha=1}}},this,function(){App.TimerManager.removeAll(this),this.luckType=1,this.hideAllAperture();var t=this._winpos-1,e=this.imageLight.getChildAt(t);e.alpha=1,this.luckRunLight()},this)},i.prototype.luckRunLight=function(){var t=this._mMoudel._mAwardList.length;2==t?this.moreOpenOne():t>2&&4>=t?(console.log("luck跑灯 表现形式二"),this.moreOpenTwo()):t>4&&(console.log("luck跑灯 表现形式三"),this.moreOpenThird(this._winpos,this._mMoudel._mAwardList[1].open_place))},i.prototype.createLuckRandomNum=function(t){this.randomLuckResult=[];for(var e=1;25>e;e++)e!=t&&this.randomLuckResult.push(e);console.log("this.createLuckRandomNum"),console.log(this.randomLuckResult)},i.prototype.updateImage=function(t,e){console.log("更新光圈位置"),console.log(t,e),this.hideAllAperture();var i=t-1,o=this.imageLight.getChildAt(i);if(o.alpha=1,e>1)for(var n=0;e>n;n++){var s=t-n,r=s>=1?s-1:24+s-1;console.log("pos"),console.log(r);var a=this.imageLight.getChildAt(r);a.alpha=1}this.changeInLight()},i.prototype.hideAllAperture=function(){for(var t=0;24>t;t++){var e=this.imageLight.getChildAt(t);e.alpha=0}},i.prototype.changeImage=function(t,e){var i=this._ringlist[0];if(i.x=this._posList[t].x,i.y=this._posList[t].y,i.alpha=1,1==e)this.hideAperture();else for(var o=0;e>o;o++){var n=this._ringlist[o+1],s=t-o,r=s>=1?s:24+s;console.log("pos"),console.log(r),n.x=this._posList[r].x,n.y=this._posList[r].y,n.alpha=1}},i.prototype.changeInLight=function(){this.allInLightNormal();var t=this.lightList[this.lightIndex];for(var e in t){var i=t[e];this["inLight"+i].source="xysgj_ui_zhongyangcaideng2_png"}this.lightIndex++,this.lightIndex>=7&&(this.lightIndex=0)},i.prototype.changeInLight2=function(){this.allInLightNormal();for(var t=this.lightList2[this.lightIndex2],e=0;e<t.length;e++){var i=t[e];this["inLight"+i].source="xysgj_ui_zhongyangcaideng2_png"}this.lightIndex2++,this.lightIndex2>=4&&(this.lightIndex2=0)},i.prototype.changeInLight3=function(){this.allInLightNormal();for(var t=this.lightList3[this.lightIndex3],e=0;e<t.length;e++){var i=t[e];this["inLight"+i].source="xysgj_ui_zhongyangcaideng2_png"}this.lightIndex3++,this.lightIndex3>=8&&(this.lightIndex3=0)},i.prototype.changeInLight5=function(t){this.allInLightNormal();for(var e=0;t>e;e++){var i=App.MathUtils.randomArray(this.lightList5);this["inLight"+i].source="xysgj_ui_zhongyangcaideng2_png"}},i.prototype.changeInLight6=function(){var t=++this.lightIndex6%8+1;if(this.lightIndex6<=8){var e=(this.lightIndex6%2,Math.floor(this.lightIndex6/2));this.changeInLight6Img(t,e)}else this.changeInLight6Img(t,4)},i.prototype.changeInLight6Img=function(t,e){if(this.allInLightNormal(),this["inLight"+this.lightList6[t]].source="xysgj_ui_zhongyangcaideng2_png",e>1)for(var i=0;e>i;i++){var o=t-2*i,n=o>=1?o:8+o;console.log("changeInLight6Imgpos"),console.log(o),console.log(t),console.log(n),console.log(e),this["inLight"+this.lightList6[n]].source="xysgj_ui_zhongyangcaideng2_png"}},i.prototype.changeInLight7=function(t){this.allInLightNormal(),this.indextypePos=[];var e=++this.lightIndex7%8+1;if(this["inLight"+this.lightList6[e]].source="xysgj_ui_zhongyangcaideng2_png",t>1)for(var i=0;t>i;i++){var o=e-i,n=o>=1?o:8+o;console.log("changeInLight7"),console.log(o),console.log(e),console.log(n),console.log(t),this.indextypePos.unshift(n),this["inLight"+this.lightList6[n]].source="xysgj_ui_zhongyangcaideng2_png"}},i.prototype.changeInLight8=function(t){this.allInLightNormal();for(var e=1;9>e;e++){var i=e%2;0==t&&0==i?this["inLight"+this.lightList6[e]].source="xysgj_ui_zhongyangcaideng2_png":1==t&&1==i&&(this["inLight"+this.lightList6[e]].source="xysgj_ui_zhongyangcaideng2_png")}},i.prototype.changeInLightTwoker=function(){for(var t=function(){var t=e.indextypePos[i],o=e["inLight"+e.lightList6[t]];e["inLight"+e.lightList6[t]].source="xysgj_ui_zhongyangcaideng2_png",R.setTimeOnce(function(){o.alpha=0,this.winlosschangeInLight(o)},e,500*i)},e=this,i=0;i<this.indextypePos.length;i++)t()},i.prototype.winlosschangeInLight=function(t){R.setTimeOnce(function(){t.alpha=1},this,500)},i.prototype.allInLightNormal=function(){console.log("所有内灯不高亮");for(var t=1;9>t;t++)this["inLight"+t].source="xysgj_ui_zhongyangcaideng1_png"},i.prototype.initBones=function(){this._sgjBones||(this._sgjBones=t.sgjBones.create())},i.prototype.initRenders=function(){if(!this._sgjBones.parent){this.settlement.addChild(this._sgjBones),this._sgjBones.updateId("fruit");var t=this.sunImage.x+258.5,e=this.sunImage.y+257.5;this._sgjBones.setPosition(t,e),this._sgjBones.play(99999)}},i.prototype.settlementAnimation=function(){this.initBones(),this.initRenders()},i.prototype.closetAnimation=function(){this._sgjBones&&this._sgjBones.parent&&(this._sgjBones.stopGame(),this._sgjBones.parent.removeChild(this._sgjBones))},i.prototype.clear=function(){this._sgjBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.onClickBackLobby=function(){this.applyFunc("onClickBackLobby")},i.prototype.onClickBtnBet=function(){this.marryStartUp()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._sgjButtonBtn.addEvent(),this._sgjToorBar.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._sgjButtonBtn.removeEvent(),this._sgjToorBar.removeEvent()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("水果机 GameView destroy"),App.TimerManager.removeAll(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this),this._sgjButtonBtn.destroy(),this._sgjToorBar.destroy(),this._sgjOuterLight.destroy(),this._sgjMessage.destroy(),this.winImgList=[],this.nonAward=[],this._sgjBones&&this._sgjBones.parent&&(this.settlement.removeChild(this._sgjBones),this.clear(),this._sgjBones.destroy()),this._sgjBones=void 0)},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"sgj.GameView")}(sgj||(sgj={}));var shz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&GameBase.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){GameBase.setScaleModeNormal()},e}();e.shz=i,__reflect(i.prototype,"shz.Entrance.shz",["base.IEntranceface"])
}(e=t.Entrance||(t.Entrance={}))}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("shz.BoneAniFlag");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("shz.BoneAniFlag","destroy")},e.prototype.initDBRes=function(i){t.prototype.initDBRes.call(this,i),this.armature=this.createArmature("ani",i,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this),this.visible=!1},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj),this.visible=!1},e.prototype.play=function(){this.visible=!0,this.armature.play(e.Animation)},e.Animation="action1",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.BoneAniFlag=e,__reflect(e.prototype,"shz.BoneAniFlag")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("shz.ShzGoldBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("shz.ShzGoldBones","destroy")},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.ShzGoldBones=e,__reflect(e.prototype,"shz.ShzGoldBones")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=0;40>=e;e++){var i=10>e?"0"+e:""+e;t.push("jiesuanguang_000"+i+"_jpg")}this.initMc(t,30),this.blendMode=egret.BlendMode.ADD},e}(SpriteMovieClip);t.ShzResultMC=e,__reflect(e.prototype,"shz.ShzResultMC")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzAwardAnimation")||this;return t._ShzGoldBones=null,t._mxx=0,t._myy=0,t.visible=!1,t}return __extends(i,e),i.prototype.init=function(){this._ShzGoldBones||(this._ShzGoldBones=t.ShzGoldBones.create())},i.prototype.initRenders=function(t,e){if(!this._ShzGoldBones.parent){this.settlement.addChild(this._ShzGoldBones),this._ShzGoldBones.updateId("setWin");var i=App.StageUtils.getWidth()+458,o=App.StageUtils.getHeight()/2-55;this._mxx=App.StageUtils.getWidth()/2,this._myy=App.StageUtils.getHeight()/2-55,this._ShzGoldBones.setPosition(i,o),this._ShzGoldBones.play(99999),this.bonesMotion(t,e),console.log("initRenders")}},i.prototype.bonesMotion=function(t,e){console.log("bonesMotion"),egret.Tween.get(this._ShzGoldBones).to({x:this._mxx},700,egret.Ease.sineInOut).call(function(){this.openWinpopup(t),this.winName.visible=!0,this.winName.source="reward"+e+"_png",this.winBack.visible=!0}.bind(this))},i.prototype.openWinpopup=function(t){this.winScore0.text=t+"",this.visible=!0,this.winpopup.visible=!0},i.prototype.closeWinPopup=function(){this.winScore0.text="0",this.winpopup.visible=!1},i.prototype.openBonus=function(t){this.winpopup.visible=!1,this.bonusScore.text=t+"",this.visible=!0,this.winBonus.visible=!0},i.prototype.closewinandBonus=function(){egret.Tween.removeTweens(this),this.closeSettlementAnimation(),this.visible=!1,this.winBonus.visible=!1,this.winpopup.visible=!1,this.winScore0.text="0",this.bonusScore.text="0",this.winName.visible=!1,this.winBack.visible=!1},i.prototype.settlementAnimation=function(t,e){this.init(),this.initRenders(t,e),this.visible=!0},i.prototype.closeSettlementAnimation=function(){this._ShzGoldBones.parent&&(this._ShzGoldBones.stopGame(),this._ShzGoldBones.parent.removeChild(this._ShzGoldBones))},i.prototype.clear=function(){this._ShzGoldBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.setAwardScore=function(t){this.winScore0.text=App.CommonUtils.moneyself(t)+""},i.prototype.getAwardScore=function(){return Number(this.winScore0.text)},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this),this.settlement&&this.settlement.removeChild(this._ShzGoldBones),this._ShzGoldBones.destroy(),this._ShzGoldBones=null},i}(BaseEuiComponent);t.AwardAnimationView=e,__reflect(e.prototype,"shz.AwardAnimationView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzBottonButton")||this;return t.index=0,t.thanBone=null,t.startBone=null,t.clickBone=null,t.BtnType=0,t.scorelist=[.1,.2,.5,1,2,5],t}return __extends(i,e),i.prototype.gameHight=function(){this.ButtonGame_0.enabled=!0,this.ButtonGame_0.visible=!0,this.ButtonGame_0.alpha=0,this.ButtonGame_1.enabled=!0,this.ButtonGame_2.enabled=!0,this.startSweep()},i.prototype.gameAsh=function(){this.ButtonGame_0.visible=!1,this.ButtonGame_0.alpha=0,this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1,this.closestartSweep()},i.prototype.winandNotype=function(t){0==t?this.gameoverButtontype():this.ButtonGame_1.enabled=!1},i.prototype.winningtype=function(t){1==t?(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.closethanSweep()):(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanSweep())},i.prototype.generalAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanSweep()},i.prototype.numberAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.closethanSweep()},i.prototype.rotarybuttontype=function(){this.ButtonGame_0.visible=!1,this.ButtonGame_0.alpha=0,this.ButtonGame_1.visible=!0,this.ButtonGame_1.enabled=!0,this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!1,this.closestartSweep()},i.prototype.gameoverButtontype=function(){this.ButtonGame_0.visible=!0,this.ButtonGame_0.alpha=0,this.startSweep(),this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1,Number(this.LabelScore0.text)==this.scorelist[0]?(this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!0):Number(this.LabelScore0.text)==this.scorelist[this.scorelist.length-1]?(this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!1):(this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!0),this.thanTimes0.enabled=!1,this.closethanSweep()},i.prototype.scoreButtonType=function(){this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.closethanSweep()},i.prototype.autoAnteType=function(){this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!1},i.prototype.setUserName=function(t){this._shzUserInfo.setNickName(t)},i.prototype.setUserImage=function(t){this._Iconskin.setUserImage(t)},i.prototype.setUserFrame=function(t){this._Iconskin.setUserFrame(t)},i.prototype.setUserMoney=function(t){this._shzUserInfo.setMoney(t)},i.prototype.getMoney=function(){return Number(this.LabelTotal.text)},i.prototype.getUserMoney=function(){return this._shzUserInfo.getMoney()},i.prototype.setAllBetMoney=function(t){this.LabelTotal.text=t+""},i.prototype.setScore=function(t){this.LabelScore0.text=t+""},i.prototype.setIndex=function(t){this.index=t},i.prototype.getDIScore=function(){return this.LabelScore0.text},i.prototype.showMenu=function(t){R.intervalTime()&&(App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?egret.Tween.get(this.zidongUp0).to({y:0},100):this.retractMenu(),R.sendPlayerAction("SHZauto_startgame"))},i.prototype.retractMenu=function(){egret.Tween.get(this.zidongUp0).to({y:315},100),this.BtnType=0},i.prototype.setcurrentTime=function(t){console.log("当前次数"),console.log(t),"无限"==t?(this.times.text="",this._inginite.visible=!0,this._imgAnto.visible=!1):(this.times.text=t+"",this._inginite.visible=!1,this._imgAnto.visible=!0)},i.prototype.getRabioMoney=function(){return this._shzUserInfo.getMoney()},i.prototype.setRabioMoney=function(t){this._shzUserInfo.setMoney(t)},i.prototype.scoreReduce=function(){if(R.intervalTime()){if(App.SoundManager.playEffect("anniu_mp3"),this.index--,console.log("index--"),console.log(this.index),0==this.index){this.LabelScore0.text=this.scorelist[this.index],this._ScoreReduce.enabled=!1,this.ButtonScoreReduce0.enabled=!1,this.index=0,this.LabelTotal.text=t.conFun.countAllbet(Number(this.LabelScore0.text))+"";var e=Number(this.LabelTotal.text);return this.applyFunc("setbetMoney",e),void R.sendPlayerAction("SHZantes_playafterswitch")}this._ScoreAdd.enabled||(this._ScoreAdd.enabled=!0),this.ButtonScoreAdd0.enabled||(this.ButtonScoreAdd0.enabled=!0),egret.Tween.get(this._ScoreReduce).to({scaleX:.9,scaleY:.9},40).call(function(){egret.Tween.get(this._ScoreReduce).to({scaleX:1,scaleY:1},40)}.bind(this)),this.LabelScore0.text=this.scorelist[this.index],this.LabelTotal.text=t.conFun.countAllbet(Number(this.LabelScore0.text))+"";var i=Number(this.LabelTotal.text);this.applyFunc("setbetMoney",i),R.sendPlayerAction("SHZantes_playafterswitch")}},i.prototype.scoreAdd=function(){if(R.intervalTime()){App.SoundManager.playEffect("anniu_mp3"),this.index++;var e=this.scorelist.length-1;if(console.log("index++"),console.log(this.index),this.index==e){this.LabelScore0.text=this.scorelist[this.index],this._ScoreAdd.enabled=!1,this.ButtonScoreAdd0.enabled=!1,this.index=e,this.LabelTotal.text=t.conFun.countAllbet(Number(this.LabelScore0.text))+"";var i=Number(this.LabelTotal.text);return this.applyFunc("setbetMoney",i),void R.sendPlayerAction("SHZantes_playafterswitch")}this._ScoreReduce.enabled||(this._ScoreReduce.enabled=!0),this.ButtonScoreReduce0.enabled||(this.ButtonScoreReduce0.enabled=!0),egret.Tween.get(this._ScoreAdd).to({scaleX:.9,scaleY:.9},40).call(function(){egret.Tween.get(this._ScoreAdd).to({scaleX:1,scaleY:1},40)}.bind(this)),this.LabelScore0.text=this.scorelist[this.index],this.LabelTotal.text=t.conFun.countAllbet(Number(this.LabelScore0.text))+"";var o=Number(this.LabelTotal.text);this.applyFunc("setbetMoney",o),R.sendPlayerAction("SHZantes_playafterswitch")}},i.prototype.timesButton=function(){this.automaticGroup.visible=!0,this.automatic0.visible=!1,this._autoIcon.visible=!1,this.retractMenu()},i.prototype.stopAutomatic=function(){App.SoundManager.playEffect("anniu_mp3"),this.automaticGroup.visible=!1,this.automatic0.visible=!0,this._autoIcon.visible=!0,this.times.text="",this.applyFunc("stopAllGame"),R.sendPlayerAction("SHZauto_cancel")},i.prototype.thanSweep=function(){if(this.thanBone||(this.thanBone=t.ShzGoldBones.create()),!this.thanBone.parent){this.timesGroup.addChild(this.thanBone),this.thanBone.updateId("specific");var e=this.timesGroup.getChildAt(0).x+65,i=this.timesGroup.getChildAt(0).y+33.5;this.thanBone.setPosition(e,i),this.thanBone.play(99999)}},i.prototype.closethanSweep=function(){this.thanBone&&this.thanBone.parent&&(this.thanBone.stopGame(),this.thanBone.parent.removeChild(this.thanBone))},i.prototype.startSweep=function(){if(this.startBone||(this.startBone=t.ShzGoldBones.create()),!this.startBone.parent){this.goGameGroup.addChild(this.startBone),this.startBone.updateId("goStart");var e=this.timesGroup.getChildAt(0).x+77,i=this.timesGroup.getChildAt(0).y+33.5;this.startBone.setPosition(e,i),this.startBone.play(99999)}},i.prototype.closestartSweep=function(){this.startBone&&this.startBone.parent&&(this.startBone.stopGame(),this.startBone.parent.removeChild(this.startBone))},i.prototype.startclickSweep=function(){if(this.clickBone||(this.clickBone=t.ShzGoldBones.create()),!this.clickBone.parent){this.goGameGroup.addChild(this.clickBone),this.clickBone.updateId("startClick");var e=this.timesGroup.getChildAt(0).x+77,i=this.timesGroup.getChildAt(0).y+33.5;this.clickBone.setPosition(e,i),this.clickBone.play(1),this.clickBone.addPlayEndCallBack(function(){this.closestartclickSweep()},this)}},i.prototype.closestartclickSweep=function(){this.clickBone&&this.clickBone.parent&&(this.clickBone.stopGame(),this.clickBone.parent.removeChild(this.clickBone))},i.prototype.onBack=function(){R.intervalTime()&&(this.stopAutomatic(),this.closethanSweep(),egret.log("进入比倍游戏"),this.applyFunc("RatioGame"),R.sendPlayerAction("SHZratio_enter"))},i.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},i.prototype.startGame=function(){R.intervalTime()&&(this.closestartSweep(),this.startclickSweep(),egret.log("开始游戏"),this.applyFunc("startGame"),R.sendPlayerAction("SHZmanual_startgame"))},i.prototype.stopGame=function(){if(R.intervalTime()){this.stopAutomatic(),App.SoundManager.stopEff("gundong_mp3"),App.SoundManager.playEffect("tingzhi_mp3");for(var t=1;6>t;t++)this.applyFunc("overone",t);this.applyFunc("stopShufflecard"),R.sendPlayerAction("SHZmanual_allstop")}},i.prototype.opensurround=function(t){this.applyFunc("opensurround",t)},i.prototype.scoreGame=function(){R.intervalTime()&&(console.log("得分"),this.stopAutomatic(),this.scoreButtonType(),this.applyFunc("setscoreGame"))},i.prototype.automaticNumber=function(t){R.intervalTime()&&(App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("setAutomaticNumber",t))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.ButtonGame_0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber.bind(this,t),this);this.automatic1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAutomatic,this),this.thanTimes0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},i.prototype.removeEvent=function(){this.ButtonGame_0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber.bind(this,t),this);this.automatic1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopAutomatic,this),this.thanTimes0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.closethanSweep(),this.closestartSweep(),this.closestartclickSweep()},i}(BaseEuiComponent);t.BottonButtonView=e,__reflect(e.prototype,"shz.BottonButtonView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzToolBar")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.cardView=e,__reflect(e.prototype,"shz.cardView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzIconSkin")||this}return __extends(e,t),e.prototype.setUserImage=function(t){this.ImageIcon.source=t},e.prototype.setUserFrame=function(t){this.photoFrame.source=t},e.prototype.changeHead=function(t,e){this.ImageIcon.source=t,this.photoFrame.source=e},e}(BaseEuiComponent);t.IconSkin=e,__reflect(e.prototype,"shz.IconSkin")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,"ShzMessageGameSkin")||this;return e._maskRct=new egret.Rectangle(0,0,518,30),e._mIsMove=!1,e.uTxtBg.visible=!1,e.uTxtBg.mask=e._maskRct,e._mListMsg=[],e}return __extends(e,t),e.prototype.addMsg=function(t){for(console.log("addMsg");t.length;)this._mListMsg.push(t.shift()),console.log(this._mListMsg);this.nextMsg(),App.TimerManager.doFrame(1,999999,this.refreshPos,this)},e.prototype.restartMsg=function(){this.txt.x=this._maskRct.width+10,console.log("重新播放")},e.prototype.nextMsg=function(){if(!this._mIsMove){if(console.log("nextMsg"),this._mListMsg.length<=0)return void this.stop();this.uTxtBg.visible=!0,this._mIsMove=!0,this._mCurrMsg=this._mListMsg.shift(),this.txt.text=this._mCurrMsg.mTxtMsg,console.log(this._mCurrMsg.mCurrTime),this._mCurrMsg.mEndX=-(this.txt.width+20),this.restartMsg()}},e.prototype.refreshPos=function(t){if(this._mIsMove){var i=this._mCurrMsg;this.txt.x-=i.mMoveSpeed*t/16,this.txt.x<i.mEndX&&(console.log(i.mCurrTime),console.log(i.mPlayTimes),this._mIsMove=!1,console.log("msg.mCurrTime >= msg.mPlayTimes"),App.TimerManager.doTimer(e.DealyTimeMove,1,this.nextMsg,this))}},e.prototype.stop=function(){this.txt.text="新优惠活动已上线~欢迎新老会员踊跃参与~",this.txt.x=3,this.txt.y=5,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){for(t.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this);this._mListMsg.length;)this._mListMsg.pop();this._mCurrMsg=void 0},e.DealyTimeMove=100,e}(BaseEuiComponent);t.MessageView=e,__reflect(e.prototype,"shz.MessageView");var i=function(){function t(){this.mTxtMsg="",this.mPriority=0,this.mPlayTimes=1,this.mCurrTime=0,this.mMoveSpeed=1,this.mEndX=0}return t}();t.BroadcastMsg=i,__reflect(i.prototype,"shz.BroadcastMsg")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Issue.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Winning.text=this.data.money+"")},e}(eui.ItemRenderer);t.RecordIcon=e,__reflect(e.prototype,"shz.RecordIcon")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._mStopType=0,this._mCurrType=1,this._mStartTime=0,this._mDealyTime=0,this._flshsecet=!1,this._mIcon=t,this.init()}return t.prototype.init=function(){this._mTexRunList={},this._mTexStopList={};for(var t=2;10>t;t++)this._mTexRunList["tr"+t]=RES.getRes("shuihu_ui_result_"+t+"_1_1_jpg"),this._mTexStopList["ts"+t]=RES.getRes("shuihu_ui_result_"+t+"_jpg")},t.prototype.run=function(t,e,i){egret.log("stopType：",t),this._mStopType=t,this._flshsecet=i,this._mStartTime=egret.getTimer(),this._mDealyTime=e,App.TimerManager.doFrame(2,9999,this.update,this)},t.prototype.update=function(){this.updateType()},t.prototype.updateType=function(){this._mCurrType++,this._mCurrType>=10&&(this._mCurrType=2),console.log("this._mCurrType"),console.log(this._mCurrType),this._mIcon.texture=this._mTexRunList["tr"+this._mCurrType],egret.getTimer()-this._mStartTime>800+this._mDealyTime&&this.stop()},t.prototype.stop=function(){this._mStopType==this._mCurrType&&(App.TimerManager.removeAll(this),this._mIcon.texture=this._mTexStopList["ts"+this._mCurrType])},t.prototype.destroy=function(){App.TimerManager.removeAll(this);for(var t=this._mTexRunList,e=this._mTexStopList,i=1;8>=i;i++)t["tr"+i]=void 0,e["ts"+i]=void 0,delete t["tr"+i],delete e["tr"+i];t=void 0,e=void 0,this._mIcon.texture=void 0,this._mIcon=void 0},t}();t.ShzCaiJinMC=e,__reflect(e.prototype,"shz.ShzCaiJinMC");var i=function(){function t(){}return t.SHZ=0,t.ZYT=1,t.DXTT=2,t.Song=3,t.Lin=4,t.Lu=5,t.DD=6,t.CQ=7,t.FT=8,t}();t.ShzType=i,__reflect(i.prototype,"shz.ShzType")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzDiceSkin")||this}return __extends(e,t),e.prototype.setdicenum=function(t,e){this.num1.source="shz_shake_dice_"+t+"_png",this.num2.source="shz_shake_dice_"+e+"_png"},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ShzDiceSkin=e,__reflect(e.prototype,"shz.ShzDiceSkin")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,"ShzGameSetSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},e.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},e.prototype.showPopup=function(){this.visible=!0,this.SetBg.visible=!0,this.SetMenu.scaleX=this.SetMenu.scaleY=0,App.EffectUtils.showUI(this.SetMenu)},e.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.SetBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.SetMenu,200,0,function(){t.visible=!1})},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.onOpen=function(t){switch(t.currentTarget){case this.ToggleVoice:App.SoundManager.setBgOn(this.ToggleVoice.selected);break;case this.ToggleMusic:App.SoundManager.setEffectOn(this.ToggleMusic.selected)}},e.prototype.effectSwitch=function(t){console.log("effectSwitch"),console.log(t.currentTarget.selected);var e=t.currentTarget.selected;this.applyFunc("effectSwitch",e)},e.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0),R.sendPlayerAction("SHZmusic_without")},e.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0),R.sendPlayerAction("SHZsound_without")},e.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1),R.sendPlayerAction("SHZmusic_with")},e.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1),R.sendPlayerAction("SHZsound_with")},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this._effectSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.removeEvent=function(){this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this._effectSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ShzGameSet=e,__reflect(e.prototype,"shz.ShzGameSet")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,"ShzHelpSkin")||this;return i.index=1,i.visible=!1,i}return __extends(e,t),e.prototype.showPopup=function(){this.visible=!0,this.helpBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)},e.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.helpBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RankMenu,200,0,function(){t.visible=!1})},e.prototype.goRight=function(){return this.index++,4==this.index?(this.shzRight.enabled=!1,this.index=4,void(this.rule.texture=RES.getRes("shuihu_ui_rule0"+this.index+"_png"))):(this.shzLeft.enabled||(this.shzLeft.enabled=!0),void(this.rule.texture=RES.getRes("shuihu_ui_rule0"+this.index+"_png")))},e.prototype.goLeft=function(){return this.index--,1==this.index?(this.shzLeft.enabled=!1,this.index=1,void(this.rule.texture=RES.getRes("shuihu_ui_rule0"+this.index+"_png"))):(this.shzRight.enabled||(this.shzRight.enabled=!0),void(this.rule.texture=RES.getRes("shuihu_ui_rule0"+this.index+"_png")))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.helpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.shzRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goRight,this),this.shzLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goLeft,this)},e.prototype.removeEvent=function(){this.helpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.shzRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goRight,this),this.shzLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goLeft,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ShzHelp=e,__reflect(e.prototype,"shz.ShzHelp")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="ShzPopupskin",o._awardAnimation.initComponent(e),o._shzGameSet.initComponent(e),o._shzPrompt.initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){egret.log(" ShzPopupView ShzPopupView initUI"),this._awardAnimation.init()},e.prototype.openMusic=function(){this._shzGameSet.openMusic()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.closeAwardView=function(){this._awardAnimation.closewinandBonus()},e.prototype.closeWinPopup=function(){this._awardAnimation.closeWinPopup()},e.prototype.setBillingScore=function(t){this._awardAnimation.setAwardScore(t)},e.prototype.getAwardScore=function(){return this._awardAnimation.getAwardScore()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiView);t.ShzPopupView=e,__reflect(e.prototype,"shz.ShzPopupView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,"ShzPromptSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.showMenu=function(){this.visible=!0,this.PromptBg.visible=!0,this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu)},e.prototype.closePoput=function(){this.PromptBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.PromptMenu,200,0,function(){t.visible=!1})},e.prototype.ConfirmMoney=function(){this.applyFunc("ConfirmMoney"),this.closePoput()},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},e.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ShzPrompt=e,__reflect(e.prototype,"shz.ShzPrompt")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=App.CommonUtils.money(this.data.win_money)+"",this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="bjl_ui_jin_png",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="bjl_ui_yin_png",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="bjl_ui_tong_png",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.ShzRankIcon=e,__reflect(e.prototype,"shz.ShzRankIcon")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzRankingSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RankBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.RankBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RankMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.ShzRankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem
},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RankClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RankClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzRanking=e,__reflect(e.prototype,"shz.ShzRanking")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._maskRct=new egret.Rectangle(0,0,88,17),e.skinName="BrnnRoomIcon",e}return __extends(e,t),e.create=function(){var t=e._lementBtnPool.pop();return t||(t=new e),t},e.release=function(t){t instanceof e?(t.clean(),e._lementBtnPool.push(t)):egret.error("_lement is not the instance of _lementBtn!")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){console.log("this.data"),console.log(t),t.charts&&(this.Issue.text=App.DateUtils.getFormatBySecond(t.time,2),this.Winning.text=t.money)},e.prototype.clean=function(){R.removeFromParent(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e._lementBtnPool=[],e}(eui.Component);t.ShzRecord=e,__reflect(e.prototype,"shz.ShzRecord")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){return e.call(this,"ShzThirdButton")||this}return __extends(i,e),i.prototype.onBack=function(){this.applyFunc(t.shzControllerCon.postGetScore)},i.prototype.disabledBtn=function(){this.doubleRatio.enabled=!1,this._ratio.enabled=!1,this._halfRatio.enabled=!1,this._BtnGetScore.enabled=!1},i.prototype.lightbtn=function(){this.doubleRatio.enabled=!0,this._ratio.enabled=!0,this._halfRatio.enabled=!0,this._BtnGetScore.enabled=!0},i.prototype.setBetScore=function(t){this.uTxtTotalScore.text=t+""},i.prototype.getBetScore=function(){return Number(this.uTxtTotalScore.text)},i.prototype.getRabioMoney=function(){return console.log(this._userinfo.getMoney()),this._userinfo.getMoney()},i.prototype.setRabioMoney=function(t){this._userinfo.setMoney(t)},i.prototype.ondoubleBet=function(){R.intervalTime()&&(App.SoundManager.playEffect("lingdang_mp3"),this.applyFunc(t.shzControllerCon.ondoubleBet),R.sendPlayerAction("SHZratio_double"))},i.prototype.onNormalBet=function(){R.intervalTime()&&(App.SoundManager.playEffect("lingdang_mp3"),this.applyFunc(t.shzControllerCon.onNormalBet),R.sendPlayerAction("SHZratio_flat"))},i.prototype.onhalfBet=function(){R.intervalTime()&&(App.SoundManager.playEffect("lingdang_mp3"),this.applyFunc(t.shzControllerCon.onhalfBet),R.sendPlayerAction("SHZratio_half"))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this._BtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ondoubleBet,this),this._ratio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNormalBet,this),this._halfRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onhalfBet,this)},i.prototype.removeEvent=function(){this._BtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ondoubleBet,this),this._ratio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNormalBet,this),this._halfRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onhalfBet,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzThirdButton=e,__reflect(e.prototype,"shz.ShzThirdButton")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzUserInfo")||this}return __extends(e,t),e.prototype.setNickName=function(t){t&&(this.nickName.text=t)},e.prototype.setMoney=function(t){this.curryMoney.text=t+""},e.prototype.getMoney=function(){return console.log(this.curryMoney.text),this.curryMoney.text},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ShzUserInfo=e,__reflect(e.prototype,"shz.ShzUserInfo")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzWinningRecordSkin")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.RecordMenu.scaleX=this.RecordMenu.scaleY=0,App.EffectUtils.showUI(this.RecordMenu)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3"),this.RecordBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.RecordMenu,200,0,function(){t.visible=!1})},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.createLement=function(e){this.reMoveLement(),console.log("生成场次");for(var i=0;i<e.length;i++){var o=e[i],n=t.ShzRecord.create();n.init(o),n.x=0,n.y=0+63*i,this._addList.addChild(n),this._lementList.push(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,i),this)}},i.prototype.touchBtn=function(t){console.log(t),this.applyFunc("onEnterBrnnGame",t)},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.ShzRecord.release(e)}},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RecordClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RecordClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement()},i}(BaseEuiComponent);t.ShzWinningRecord=e,__reflect(e.prototype,"shz.ShzWinningRecord")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,"ShzToolBar")||this;return e.BtnType=0,e}return __extends(e,t),e.prototype.showMenu=function(t){App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?egret.Tween.get(this.MenuBox0).to({y:0},100):egret.Tween.get(this.MenuBox0).to({y:-239},100)},e.prototype.setonlineNum=function(t){this.OnlineNum.text=""+t},e.prototype.showHelp=function(){App.SoundManager.playEffect("anniu_mp3"),console.log("showHelp"),this.applyFunc("showHelp"),R.sendPlayerAction("SHZhelp_open")},e.prototype.showGameSet=function(){App.SoundManager.playEffect("anniu_mp3"),console.log("showGameSet"),this.applyFunc("showGameSet"),R.sendPlayerAction("SHZset_open")},e.prototype.showranking=function(){App.SoundManager.playEffect("anniu_mp3"),console.log("showranking"),this.applyFunc("showranking"),R.sendPlayerAction("SHZrank_open")},e.prototype.showRecord=function(){App.SoundManager.playEffect("anniu_mp3"),console.log("showRecord"),this.applyFunc("showRecord"),R.sendPlayerAction("SHZrecord_open")},e.prototype.payMoney=function(){this.applyFunc("geRechargeMoney")},e.prototype.backBody=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("backBody")},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.menu0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonExit0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonHelp0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelp,this),this.ButtonSetup0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),this.ButtonPay0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.payMoney,this)},e.prototype.removeEvent=function(){this.menu0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonExit0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonSetup0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),this.ButtonPay0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.payMoney,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.ToolBarview=e,__reflect(e.prototype,"shz.ToolBarview")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.test=function(){for(var t in this.linelist){if(this.linelist[t].length>1)for(var e=0;e<this.linelist[t].length;e++)this.shzarr.push(t),this.shzbrr.push(this.linelist[t][e]);else this.shzarr.push(t),this.shzbrr.push(this.linelist[t][0])}},t.Go_To_First_Game="Go_to_First_Game",t.Go_To_Second_Game="Go_to_Second_Game",t.Go_To_Third_Game="Go_to_Third_Game",t.Play_Ani_Flag="Play_Ani_Flag",t.CARD_HALF_WIDTH=74.5,t.CARD_HALF_HEIGHT=67.5,t.cardlist=[{openRole:2,openCardPlace:1},{openRole:1,openCardPlace:2},{openRole:2,openCardPlace:3},{openRole:4,openCardPlace:4},{openRole:1,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:2,openCardPlace:7},{openRole:1,openCardPlace:8},{openRole:2,openCardPlace:9},{openRole:6,openCardPlace:10},{openRole:4,openCardPlace:11},{openRole:8,openCardPlace:12},{openRole:2,openCardPlace:13},{openRole:7,openCardPlace:14},{openRole:1,openCardPlace:15}],t.GenExchange={winScore:1e4,islottery:!1,lotteryNum:0,psGenOpenline:[{openLine:1,shuihuRole:[{shuihuRole:1,openLinePlace:2},{shuihuRole:1,openLinePlace:5},{shuihuRole:1,openLinePlace:8}]},{openLine:4,shuihuRole:[{shuihuRole:2,openLinePlace:1},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:9}]},{openLine:5,shuihuRole:[{shuihuRole:2,openLinePlace:3},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:7}]}]},t.linelist={1:[[1,4,7],[7,10,13]],3:[[3,6,9]]},t.shzarr=[],t.shzbrr=[],t}();t.NoticeConst=e,__reflect(e.prototype,"shz.NoticeConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.CsGenPlayerBetReq=10801,t.ScGenPlayerBetRes=10802,t.CsGenPlayerAllStopReq=10803,t.ScGenRoleCardRes=10804,t.ScGenExchangeRes=10805,t.CsGenGetScoreReq=10806,t.ScGenGetScoreRes=10807,t.ScGenToLotterygameRes=10808,t.CsLotteryCardReq=10809,t.ScLotteryCardAndExchangeRes=10810,t.CsCompReq=10811,t.ScCompRes=10812,t.CsCompGameBetReq=10813,t.ScCompBetRes=10814,t.ScDiceRes=10815,t.ScOnLineNumberRes=10816,t.CsLeaderBoardReq=10817,t.ScLeaderBoardRes=10818,t.CsRecordReq=10819,t.ScRecordRes=10820,t.CsEnterSceneFinishReq=10820,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"shz.ProxyKeyConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.Game_Start_Req="Game_Start_Req",t.Game_Start_Back="Game_Start_Back",t.Get_Score_Req="Get_Score_Req",t.Get_Score_Back="Get_Score_Back",t.getRecordNum="getRecordNum",t}();t.SecondGameConst=e,__reflect(e.prototype,"shz.SecondGameConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.CARD_PREFIX="result_",t.CARD_NORMAL_SUFFIX="_png",t.CARD_ASH_SUFFIX="_1_png",t.CARD_MOVE_SUFFIX="_1_1_png",t.CARD_FLASH_SUFFIX="_2_1_png",t.CARD_WIN_SUFFIX="_3_1_png",t.Game_Enter_Res="Game_Enter_Res",t.ondoubleBet="ondoubleBet",t.onNormalBet="onNormalBet",t.onhalfBet="onhalfBet",t.ondiceBet="ondiceBet",t.betMoneyblack="betMoneyblack",t.dicelotteryresult="dicelotteryresult",t.setRatioScore="setRatioScore",t.postGetScore="postGetScore",t.playGetScore="playGetScore",t.rankingScore="rankingScore",t.winningScore="winningScore",t.NET_MSG={PLAYER_BET_REQ:"10801",PLAYER_BET_RES:"10802",PLAYER_ALL_STOP_REQ:"10803",GENROLE_CARD_RES:"10804",GENEXCHANGE_REQ:"10805",GEN_GET_SCORE_REQ:"10806",GEN_GET_SCORE_RES:"10807",COMP_REQ:"10811",COMP_RES:"10812",COMP_GAME_BET_REQ:"10813",COMP_BET_RES:"10814",DICE_RES:"10815",ONLINE_NUM:"10816",LEADER_BOARD_REQ:"10817",LEADER_BOARD_RES:"10818",RECORD_REQ:"10819",RECORD_RES:"10820",FINISH_REQ:"10821",RESULT_REQ:"10822",RESULT_RES:"10823",LWAVE_SCENE_REQ:"10104",LEAVE_SCENE_RES:"10105",OTHER_BET:"1003",SHOW_HAND:"1004",BET_START_R:"10101",REWARD_START_R:"10112",RESULT_START_R:"10113"},t.onPlayerBetResCallBack="1001",t.onGenRoleCardResCallBack="1002",t.onGenExchangeResCallBack="1003",t.onLeaderBoardResCallBack="1004",t.onOnlineNumCallBack="1005",t.onLeaveSceneResCallBack="1006",t.onGenGetScoreResResCallBack="1007",t.onResultCallBack="1009",t.setJettonCallBack="1008",t}();t.shzControllerCon=e,__reflect(e.prototype,"shz.shzControllerCon")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.register(),o}return __extends(i,e),i.prototype.register=function(){console.log("*********************************进入shzNet注册消息******************************************************"),this.addListener(t.shzControllerCon.NET_MSG.PLAYER_BET_RES,this.onPlayerBetRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENROLE_CARD_RES,this.onGenRoleCardRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENEXCHANGE_REQ,this.onGenExchangeRes,this),this.addListener(t.shzControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.shzControllerCon.NET_MSG.LEAVE_SCENE_RES,this.onLeaveSceneRes,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this)},i.prototype.onPlayerBetRes=function(e){this.applyControllerFunc(ControllerConst.Game,t.shzControllerCon.onPlayerBetResCallBack,e)},i.prototype.onGenRoleCardRes=function(e){this.applyControllerFunc(ControllerConst.Game,t.shzControllerCon.onGenRoleCardResCallBack,e)},i.prototype.onGenExchangeRes=function(e){this.applyFunc(t.shzControllerCon.onGenExchangeResCallBack,e)},i.prototype.onOnLineNum=function(e){this.applyControllerFunc(ControllerConst.Game,t.shzControllerCon.onOnlineNumCallBack,e)},i.prototype.onLeaveSceneRes=function(e){this.applyControllerFunc(ControllerConst.Game,t.shzControllerCon.onLeaveSceneResCallBack,e)},i.prototype.onGenGetScoreResRes=function(e){var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.First&&this.applyControllerFunc(ControllerConst.Game,t.shzControllerCon.onGenGetScoreResResCallBack,e)},i.prototype.requestBet=function(e){this.send(t.shzControllerCon.NET_MSG.PLAYER_BET_REQ,e)},i.prototype.requestExitRoom=function(){this.send(t.shzControllerCon.NET_MSG.LWAVE_SCENE_REQ)},i.prototype.requestonlineNum=function(){this.send(t.shzControllerCon.NET_MSG.FINISH_REQ)},i.prototype.requestScore=function(e){this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeListener(t.shzControllerCon.NET_MSG.PLAYER_BET_RES,this.onPlayerBetRes,this),this.removeListener(t.shzControllerCon.NET_MSG.GENROLE_CARD_RES,this.onGenRoleCardRes,this),this.removeListener(t.shzControllerCon.NET_MSG.GENEXCHANGE_REQ,this.onGenExchangeRes,this),this.removeListener(t.shzControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.removeListener(t.shzControllerCon.NET_MSG.LEAVE_SCENE_RES,this.onLeaveSceneRes,this)},i}(BaseProxy);t.shzNet=e,__reflect(e.prototype,"shz.shzNet")}(shz||(shz={}));var shz;!function(t){var e;!function(t){t[t.Base=6100]="Base",t[t.FistGame=6101]="FistGame",t[t.SecondGame=6102]="SecondGame",t[t.ThirdGame=6103]="ThirdGame",t[t.Tip=6104]="Tip",t[t.brnnPopup=6105]="brnnPopup",t[t.ThirdPopup=6106]="ThirdPopup",t[t.FirstPopup=6107]="FirstPopup",t[t.Marry_Message=6108]="Marry_Message",t[t.Recharge=6109]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.First=1,t.Second=2,t.Third=3,t}();t.GameType=e,__reflect(e.prototype,"shz.GameType");var i=function(i){function o(){var t=i.call(this)||this;return t._proxy=null,t._viewTip=null,t._mCtrlFirst=null,t._mCtrlSecond=null,t._mCtrlThird=null,t._mMarryView=null,t._mCurrGameType=0,t}return __extends(o,i),o.prototype.onCreate=function(){i.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(){i.prototype.onInit.call(this),this.registers(),this.gotoFirstGame({score:0,isBet:!1,isAuto:!1}),App.ViewManager.open(t.ViewConst.Tip),App.ViewManager.open(t.ViewConst.Marry_Message)},o.prototype.onBack2Lobby=function(){this.goBack2Lobby()},o.prototype.inits=function(){i.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._viewTip=new t.GameTipView(this),this._mMarryView=new t.GameMarryView(this),this._mCtrlFirst=new t.GameCtrlFirst(this),this._mCtrlSecond=new t.GameCtrlSecond(this),this._mCtrlThird=new t.GameCtrlThird(this),this._mCtrlFirst.onCreate(),this._mCtrlSecond.inits(),this._mCtrlThird.inits()},o.prototype.gotoFirstGame=function(t){this._mCurrGameType>0&&this.onPlayAniFlag(),console.log("data"),console.log(t),this._mCurrGameType=e.First,this._mCtrlThird.closeGame(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.openGame(t)},o.prototype.gotoSecondGame=function(t){this._mCurrGameType=e.Second,this.onPlayAniFlag(),this._mCtrlThird.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlSecond.openGame(t)},o.prototype.gotoThirdGame=function(t){this._mCurrGameType=e.Third,this.onPlayAniFlag(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlThird.openGame(t)},o.prototype.onPlayAniFlag=function(){this._viewTip.playFlag()},o.prototype.registers=function(){i.prototype.registers.call(this),this._mCtrlFirst.registers(),this._mCtrlSecond.registers(),this._mCtrlThird.registers(),this.registerRecharge(),App.ViewManager.register(t.ViewConst.Tip,this._viewTip),App.ViewManager.register(t.ViewConst.Marry_Message,this._mMarryView),this.registerFunc("onClickBack",this.onBack2Lobby,this),this.registerFunc(t.NoticeConst.Go_To_First_Game,this.gotoFirstGame,this),this.registerFunc(t.NoticeConst.Go_To_Second_Game,this.gotoSecondGame,this),this.registerFunc(t.NoticeConst.Go_To_Third_Game,this.gotoThirdGame,this),this.registerFunc(t.NoticeConst.Play_Ani_Flag,this.onPlayAniFlag,this)},o.prototype.addListeners=function(){i.prototype.addListeners.call(this),this._mCtrlFirst.addListeners(),this._mCtrlSecond.addListeners(),this._mCtrlThird.addListeners(),this._proxy.addEvent()},o.prototype.removeListeners=function(){i.prototype.removeListeners.call(this),this._mCtrlFirst.removeListeners(),this._mCtrlSecond.removeListeners(),this._mCtrlThird.removeListeners(),this._proxy.removeEvent()},o.prototype.getModel=function(){return this._model},o.prototype.getGameType=function(){return this._mCurrGameType},o.prototype.destroy=function(){i.prototype.destroy.call(this),this._mCtrlFirst.destroy(),this._mCtrlSecond.destroy(),this._mCtrlThird.destroy(),this._model.destroy(),this._proxy.destroy(),this._mCtrlFirst=void 0,this._mCtrlSecond=void 0,this._mCtrlThird=void 0,this._model=void 0,this._proxy=void 0},o}(base.GameController);t.GameController=i,__reflect(i.prototype,"shz.GameController")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewFirst=null,i._PopupView=null,i._ShzGoldBones=null,i._model=null,i._proxy=null,i._shzNet=null,i.betSucc=0,i.betMoney=[{bet:.1,money:.9,_index:0},{bet:.2,money:1.8,_index:1},{bet:.5,money:4.5,_index:2},{bet:1,money:9,_index:3},{bet:2,money:18,_index:4},{bet:5,money:45,_index:5}],i.winStype=["彩金游戏","没中奖","一般中奖"],i.setAutomaticList=[25,50,100],i._Goldlist=[],i.arrzhognjiang=[{0:[0,1,0],1:[0,1,0],2:[0,1,0],3:[0,0,0],4:[0,0,0]},{0:[1,0,0],1:[0,1,0],2:[0,0,1],3:[0,0,0],4:[0,0,0]}],i.soundlist=["shuihuzhuan","zhongyitang","titianxingdao","songjiang","linchong","luzhishen","dao","qiang","fu"],i.drawlist=[0,1e4],i.num=0,i.speed=0,i.steen=0,i.numbalance=0,i.speedbalance=0,i.steenbalance=0,i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()")},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModelFirst(this.getController()),this._proxy=new t.GameProxyFirst(this.getController(),this._model),this._shzNet=new t.shzNet(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController(),LayerManager.UI_Popup)},i.prototype.openGame=function(e){null==this._mViewFirst&&(this._mViewFirst=new t.FirstGameView(this.getController()),App.ViewManager.register(t.ViewConst.FistGame,this._mViewFirst),this._mViewFirst.approachAnimation()),console.log("进入游戏1data",e),this._model.init(e.score),App.ViewManager.register(t.ViewConst.FirstPopup,this._PopupView),App.ViewManager.open(t.ViewConst.FistGame,this._model),App.ViewManager.open(t.ViewConst.FirstPopup),App.SoundManager.playBg("bgm1_mp3"),this._model.isEffect=this.getGameController().getModel().isEffect,this._model.isAuto=e.isAuto,e.isBet&&this.restGame(),console.log(this._model.isAuto);R.setTimeOnce(function(){if(this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return this._mViewFirst._bottonButton.stopAutomatic(),void this.restGame();this.post()}else this._mViewFirst.stopAutomatic(),this._mViewFirst.lightVisible();this._shzNet.requestonlineNum()},this,500),this.gameJoin()},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.FistGame)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc("startGame",this.startGame,this),this.registerFunc("stopGame",this.stopGame,this),this.registerFunc("overone",this.overone,this),this.registerFunc("opensurround",this.opensurround,this),this.registerFunc("rotatesurround",this.rotatesurround,this),this.registerFunc("flashcardimg",this.flashcardimg,this),this.registerFunc("backBody",this.backBody,this),this.registerFunc("winningsettype",this.winningsettype,this),this.registerFunc("setscoreGame",this.setscoreGame,this),this.registerFunc("accountAnimation",this.accountAnimation,this),this.registerFunc("gameStart",this.gameStart,this),this.registerFunc("setAutomaticNumber",this.setAutomaticNumber,this),this.registerFunc("setbetMoney",this.setbetMoney,this),this.registerFunc("stopAllGame",this.stopAllGame,this),this.registerFunc("stopShufflecard",this.stopShufflecard,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showranking",this.showranking,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("RatioGame",this.RatioGame,this),this.registerFunc(t.shzControllerCon.Game_Enter_Res,this.gameEnter,this),this.registerFunc(t.shzControllerCon.rankingScore,this.rankingScore,this),this.registerFunc(t.shzControllerCon.winningScore,this.winningScore,this),this.registerFunc("effectSwitch",this.effectSwitch,this),this.registerFunc("geRechargeMoney",this.geRechargeMoney,this),this.registerFunc("ConfirmMoney",this.ConfirmMoney,this),this.shzTest(),this._PopupView.openMusic()},i.prototype.enter2edGame=function(){egret.log("进入彩金游戏");var e=this._mViewFirst._bottonButton.getMoney(),i=this._model._winScore,o=this._model._blance;this._PopupView.closeAwardView();var n=this._model.isAuto;this.applyFunc(t.NoticeConst.Go_To_Second_Game,{score:i,award:0,bet:e,money:o,isAuto:n})},i.prototype.enter3edGame=function(){egret.log("进入比倍游戏");var e=this._model._blance,i=this._model._winScore;console.log(e,i),this._PopupView.closeAwardView(),this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:i,award:0,bet:e})},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.addDataListeners(),this.addEventListeners(),this._proxy.addEvent(),this._shzNet.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent(),this._shzNet.removeEvent()},i.prototype.addDataListeners=function(){this._model.isBetDataNotify.addDataListener(this.isBetCallBack,this),this._model.isAutoBetDataNotify.addDataListener(this.isAutoBetCallBack,this),this._model.automaticTimeNotify.addDataListener(this.automaticTimeCallBack,this)},i.prototype.startGame=function(){this.post(),this._model.isAuto&&this._mViewFirst._bottonButton.stopAutomatic()},i.prototype.post=function(){var t=App.CommonUtils.moneyself(Number(this._mViewFirst._bottonButton.getUserMoney())),e=App.CommonUtils.moneyself(this._mViewFirst._bottonButton.getMoney());if(t>e)this._model.betMoney=1e4*e;else{if(!(t>=.1&&this._model.isAuto))return App.ScrollTxtTips.showTip("余额不足,请切换低注或进行充值,谢谢"),this._model.isAuto&&(this._mViewFirst.stopAutomatic(),this._model.isAuto=!1),void this._mViewFirst._bottonButton.gameoverButtontype();this._model.betMoney=this.autoSwitchbet(t)}var i=[],o={isAuto:this._model.isAuto,betMoney:this._model.betMoney};i.push(o);var n={betinfo:i};this._shzNet.requestBet(n)},i.prototype.autoSwitchbet=function(t){for(var e=0;e<this.betMoney.length;e++){var i=this.betMoney[e];if(t>=i.money)return this._mViewFirst._bottonButton.setAllBetMoney(i.money),this._mViewFirst._bottonButton.setScore(i.bet),this._mViewFirst._bottonButton.setIndex(i._index),i.money}},i.prototype.scorePost=function(){var t={gametype:1};this._shzNet.requestScore(t)},i.prototype.stopGame=function(){},i.prototype.overone=function(t){this.openCard(t)},i.prototype.opensurround=function(t){this._mViewFirst.setsurround(this.arrzhognjiang[t],0)},i.prototype.rotatesurround=function(t){this._mViewFirst.setsurround(this.arrzhognjiang[t],1)},i.prototype.flashcardimg=function(t){this._mViewFirst.flashcardarr(this.arrzhognjiang[t])},i.prototype.backBody=function(){this._proxy.sendLeaveGame()},i.prototype.setScore=function(t){this._PopupView._awardAnimation.openWinpopup(t)},i.prototype.seTNumScore=function(t){this._PopupView._awardAnimation.openWinpopup(t)},i.prototype.winningsettype=function(t){this._mViewFirst._bottonButton.winningtype(t)},i.prototype.setscoreGame=function(){this.scorePost()},i.prototype.accountAnimation=function(){if(!this._model.isEffect){var t=this._mViewFirst.getDIScore,e=App.CommonUtils.money2Str(this._model._winScore),i=App.CommonUtils.moneyself(Number(e)/t),o=0;49>=i?o=0:i>=50&&119>=i?o=1:i>=120&&(o=2),this._PopupView._awardAnimation.settlementAnimation(e,o)}this._model.isAuto&&!this._model._islottery&&App.TimerManager.doTimer(1500,1,function(){this._model.isAuto&&(this.scorePost(),this._mViewFirst.scoreButtonType())},this)},i.prototype.gameStart=function(){this._model.isbet=!0,this._model.isBetDataNotify.setData(this._model.isbet)},i.prototype.setAutomaticNumber=function(t){console.log("setAutomaticNumber"),this._model.isAuto=!0,this._model.selectionTimes=t,3>t&&this._model.isbet?(this._model.automaticTime=this.setAutomaticList[t],R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times"),this.post()):3>t&&!this._model.isbet?(this._mViewFirst._bottonButton.timesButton(),this._model.automaticTime=this.setAutomaticList[t],this._mViewFirst._bottonButton.setcurrentTime(this._model.automaticTime),R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times")):3==t&&this._model.isbet?(this._mViewFirst._bottonButton.setcurrentTime("无限"),this.post(),R.sendPlayerAction("SHZauto_unlimitedtimes"),this._model.automaticTime=-2):3!=t||this._model.isbet||(this._mViewFirst._bottonButton.timesButton(),this._mViewFirst._bottonButton.setcurrentTime("无限"),this._model.automaticTime=-2,R.sendPlayerAction("SHZauto_unlimitedtimes"))},i.prototype.AutomaticReduce=function(){this._model.selectionTimes<3&&this._model.automaticTime>=1&&this._model.automaticTime--},i.prototype.setbetMoney=function(t){this._model.betMoney=t},i.prototype.stopAllGame=function(){this._model.isAuto=!1,this._model.selectionTimes=0,this._model.automaticTime=0},i.prototype.stopShufflecard=function(){this._mViewFirst.stopShuffle()},i.prototype.showHelp=function(){this._PopupView._shzHelp.showPopup()},i.prototype.showGameSet=function(){this._PopupView._shzGameSet.initSet(),this._PopupView._shzGameSet.showPopup()},i.prototype.showranking=function(){this._proxy.ranking({index:0,size:100}),this._PopupView._shzRanking.showPopup()},i.prototype.showRecord=function(){this._PopupView._shzWinningRecord.showPopup();var t=this.getGameController().getModel().recordList;t.length&&this._PopupView._shzWinningRecord.rankData(t)},i.prototype.rankingScore=function(t){this._PopupView._shzRanking.rankData(t)},i.prototype.winningScore=function(t){},i.prototype.effectSwitch=function(t){this.getGameController().getModel().isEffect=t,this._model.isEffect=t,t?(this._mViewFirst.closeEffect(),R.sendPlayerAction("SHZeffect_without")):R.sendPlayerAction("SHZeffect_with")},i.prototype.geRechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.ConfirmMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.isBetCallBack=function(){},i.prototype.isAutoBetCallBack=function(){},i.prototype.automaticTimeCallBack=function(){},i.prototype.addEventListeners=function(){this.registerFunc(t.shzControllerCon.onPlayerBetResCallBack,this.onPlayerBetResCallBack,this),this.registerFunc(t.shzControllerCon.onGenRoleCardResCallBack,this.onGenRoleCardResCallBack,this),this.registerFunc(t.shzControllerCon.onGenExchangeResCallBack,this.onGenExchangeResCallBack,this),this.registerFunc(t.shzControllerCon.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.shzControllerCon.onLeaveSceneResCallBack,this.onLeaveSceneResCallBack,this),this.registerFunc(t.shzControllerCon.onGenGetScoreResResCallBack,this.onGenGetScoreResResCallBack,this),this.registerFunc(t.shzControllerCon.onResultCallBack,this.onResultCallBack,this)},i.prototype.refreshBoard=function(){for(var e=[],i=["恭喜玩家 test001， 中1000倍大奖，获得奖金10000000。","恭喜玩家 test001 ，中全盘1000倍大奖，获得奖金8888888888888。","恭喜玩家 test001 在彩金游戏中，赢得奖金9999999999。","恭喜玩家 test001 在比倍游戏中100连胜，赢得奖金66666666666。","仅仅是测试数据，不要当真。"],o=0;o<i.length;o++){var n=new t.BroadcastMsg;n.mPriority=o,n.mTxtMsg=i[o],n.mPlayTimes=o,e.push(n)}this._mViewFirst.RoleMessage.addMsg(e)},i.prototype.onPlayerBetResCallBack=function(t){if(console.log("onPlayerBetResCallBack",t),1==t.result){var e=App.CommonUtils.money2Str(t.balance);this._model._blance=t.balance,this._mViewFirst.setUserMoney(e),this.getGameController().getModel().startMoney=t.balance,this._model.isAuto&&this._mViewFirst._bottonButton.automatic0.visible&&this._mViewFirst._bottonButton.timesButton(),this.betShow({})}else this._PopupView._shzPrompt.showMenu()},i.prototype.onGenRoleCardResCallBack=function(t){if(console.log("onGenRoleCardResCallBack",t),t){this.resetOpenCard();for(var e=t.rolecard,i=e.toString(),o=[],n=0;n<i.length;n++)o.push(i[n]),this._model.roleList.push(Number(i[n]));this._model.cardlist.forEach(function(t,e){t.openRole=o[e]}.bind(this))}},i.prototype.onGenExchangeResCallBack=function(t){if(console.log("onGenExchangeResCallBack",t),t){this.resetSettlementData(),this._model._winScore=t.winScore,this._model._islottery=t.islottery,this._model._lotteryNum=t.lotteryNum;
var e=JSON.parse(t.openline);console.log(e),console.log(this._model._winScore),console.log(this._model._winScore);for(var i in e){if(e[i].length>1)for(var o=0;o<e[i].length;o++)this._model.winLine.push(i),this._model.winPos.push(e[i][o]);else this._model.winLine.push(i),this._model.winPos.push(e[i][0])}}console.log(this._model.winLine),console.log(this._model.winPos)},i.prototype.onOnlineNumCallBack=function(t){console.log("onOnlineNumCallBack",t),this._mViewFirst._toolBarView.setonlineNum(t.OnlineNumber)},i.prototype.onLeaveSceneResCallBack=function(t){console.log("onLeaveSceneResCallBack",t),App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.onGenGetScoreResResCallBack=function(t){console.log("onGenGetScoreResResCallBack",t),t.balance&&(App.SoundManager.playEffect("defen1_mp3"),this._model._blance=t.balance,console.log(this._model.balance),this.playGetScore())},i.prototype.onResultCallBack=function(t){console.log("onResultCallBack",t)},i.prototype.shzTest=function(){t.NoticeConst.test()},i.prototype.clearGold=function(){var t=this;this._Goldlist&&this._Goldlist.forEach(function(e,i){e.parent&&t._mViewFirst["GroupList"+i].removeChild(e)},this)},i.prototype.winSpecialEffects=function(){for(var t=0;t<this._model.winPos.length;t++)App.TimerManager.doTimer(0+960*t,1,this.effect.bind(this,t),this,this.winSpecialEffectsover.bind(this,t),this)},i.prototype.effect=function(t){var e=this._model.winPos[t],i=this._model.winLine[t],o=this._model.isEffect;console.log("每条中奖线特效_isEffect"),console.log(o),o||(this._mViewFirst.surround(e),this.linefish(e)),this._mViewFirst.lotteryLine(i),this._mViewFirst.lightShow(i),this.oneWinHight(e)},i.prototype.winSpecialEffectsover=function(t){t==this._model.winPos.length-1&&App.TimerManager.doTimer(960,1,function(){this._mViewFirst.closeSurroundOne(),this.allwinAnimation(this._model.winPos),this.alllightTwinkle(this._model.winLine)},this)},i.prototype.settlementResult=function(){App.SoundManager.playEffect("zhanshi_mp3"),this._model.isEffect&&this.setScore(App.CommonUtils.money2Str(this._model._winScore)),this.winningsettype(this._model._islottery),this._model._islottery&&App.TimerManager.doTimer(2e3,1,this.resultLottery,this),this.accountAnimation()},i.prototype.resultLottery=function(){var t=this;this._PopupView.closeWinPopup(),this._PopupView._awardAnimation.openBonus(this._model._lotteryNum),App.TimerManager.doTimer(1500,1,function(){console.log("进入第二个游戏"),this._model._islottery=!1,t.enter2edGame()},this)},i.prototype.RatioGame=function(){this._proxy.reqEnterGame()},i.prototype.gameEnter=function(){console.log("进入第三个游戏"),this.enter3edGame()},i.prototype.overallAward=function(){for(var t=1;10>t;t++)this._mViewFirst.lotteryLine(t),this._mViewFirst.twinklelight(t);this._model.cardlist.forEach(function(t,e){this._mViewFirst.setSurround(t.openCardPlace),this._mViewFirst.flashAnimation(t.openRole,t.openCardPlace)}.bind(this))},i.prototype.overallAwardTest=function(){var e=this._model.isEffect;console.log("全盘奖中奖动画测试"),console.log(e),e||t.conFun.cardlistTest.forEach(function(t,e){this._mViewFirst.setSurround(t.openCardPlace),this._mViewFirst.flashAnimation(t.openRole,t.openCardPlace)}.bind(this));for(var i=1;10>i;i++)this._mViewFirst.lotteryLine(i),this._mViewFirst.twinklelight(i);this.winHight(this._model.winPos),App.TimerManager.doTimer(960,1,function(){this._mViewFirst.closeSurroundOne(),this.allwinAnimation(this._model.winPos),this.alllightTwinkle(this._model.winLine)},this)},i.prototype.linefish=function(t){for(var e=0;e<t.length;e++){var i=Number(t[e]),o=this._model.cardlist[i-1].openRole;this._mViewFirst.flashAnimation(o,i)}},i.prototype.allwinAnimation=function(t){App.TimerManager.removeAll(this),this._mViewFirst.closetime();var e=Math.min.apply(null,this._model.roleList);App.SoundManager.playEffect(this.soundlist[e-1]+"_mp3");for(var i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++){var n=Number(t[i][o]),s=this._model.cardlist[n-1].openRole;this._mViewFirst.individualAward(s,n)}var r=this;R.setTimeOnce(function(){r.settlementResult(),r.stopAllLighttTwinkle()},this,1900),this.winHight(this._model.winPos)},i.prototype.shzLight=function(){for(var t=0;t<this._model.winLine.lenght;t++)this._mViewFirst.oneShzlight(t)},i.prototype.alllightTwinkle=function(t){for(var e=0;e<t.length;e++){var i=Number(t[e]);this._mViewFirst.twinklelight(i)}},i.prototype.stopAllLighttTwinkle=function(){this._model.winLine.forEach(function(t,e){this._mViewFirst.stoptTwinklelight(t)}.bind(this))},i.prototype.betShow=function(t){this._model.isbet=!1,this._mViewFirst._bottonButton.rotarybuttontype(),this._mViewFirst.changeCard(),this._mViewFirst.onebyonelight(),this._model.isAuto&&!this._model.isbet&&this._model.automaticTime>=1&&(this.AutomaticReduce(),this._mViewFirst._bottonButton.setcurrentTime(this._model.automaticTime))},i.prototype.gameJoin=function(){console.log("进入游戏，页面信息显示");var t=this.player;if(this._mViewFirst.setUserName(t.getNickName()),this._model._mFirstScore>0){var e=App.CommonUtils.money2Str(this._model._mFirstScore);this._mViewFirst.gameSetMoney(e)}else{var i=App.CommonUtils.money2Str(t.getMoney());this._mViewFirst.gameSetMoney(i)}this._mViewFirst.setUserImage("ui_headImg_"+t.getAvatar()),this._mViewFirst.setUserFrame("ui_headBox_"+t.getAvatarBox()),this._model._mFirstScore=0},i.prototype.openCard=function(t){var e=this._mViewFirst["GroupList"+t];App.SoundManager.playEffect("tingzhi_mp3"),this._model.cardlist.forEach(function(i){var o=Math.floor((i.openCardPlace-1)/3)+1,n=Math.floor((i.openCardPlace-1)%3);t==o&&(e.getChildAt(n).texture=RES.getRes("shuihu_ui_result_"+i.openRole+"_jpg"),e==this._mViewFirst.GroupList5&&e.getChildAt(n)==this._mViewFirst.GroupList5.getChildAt(2)&&App.TimerManager.doTimer(167,1,function(){this._mViewFirst.stopShuffle(),this.openLottery()},this))}.bind(this))},i.prototype.openLottery=function(){App.TimerManager.removeAll(this),this.setSHZantesPlayat();var t=Number(App.CommonUtils.money2Str(this._model._winScore));if(0!=t)this._mViewFirst._bottonButton.winandNotype(t),Math.max.apply(null,this._model.roleList)===Math.min.apply(null,this._model.roleList)?(console.log("全盘奖1"),this.overallAward()):this._model.roleList.indexOf(1)>-1||this._model.roleList.indexOf(2)>-1||this._model.roleList.indexOf(3)>-1?(console.log("普通奖1"),this.generalAward()):-1==this._model.roleList.indexOf(4)&&-1==this._model.roleList.indexOf(5)&&-1==this._model.roleList.indexOf(6)||-1==this._model.roleList.indexOf(7)&&-1==this._model.roleList.indexOf(8)&&-1==this._model.roleList.indexOf(9)?(console.log("全盘奖2"),this.overallAward()):(console.log("普通奖2"),this.generalAward());else if(console.log("结果未中奖"),this._mViewFirst.lightVisible(),this._mViewFirst._bottonButton.winandNotype(t),this._model.isbet=!0,this.getGameController().getModel().isGameOver=!0,this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return this._mViewFirst._bottonButton.stopAutomatic(),void this.restGame();App.TimerManager.doTimer(1e3,1,function(){this.post()},this)}},i.prototype.setSHZantesPlayat=function(){var t=this._mViewFirst.getDIScore();R.sendPlayerAction("SHZantes_playat"+t)},i.prototype.generalAward=function(){this.winSpecialEffects(),this.cardAahes()},i.prototype.Next=function(){},i.prototype.getsurround=function(t){},i.prototype.cardAahes=function(){this._model.cardlist.forEach(function(t){var e=Math.floor((t.openCardPlace-1)/3)+1,i=Math.floor((t.openCardPlace-1)%3);console.log("开牌结果置灰"),console.log(t.openRole),this._mViewFirst["GroupList"+e].getChildAt(i).texture=RES.getRes("shuihu_ui_result_"+t.openRole+"_1_jpg")}.bind(this))},i.prototype.winHight=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++){var o=Number(t[e][i]),n=this._model.cardlist[o-1].openRole,s=Math.floor((o-1)/3)+1,r=Math.floor((o-1)%3);this._mViewFirst["GroupList"+s].getChildAt(r).texture=RES.getRes("shuihu_ui_result_"+n+"_jpg")}},i.prototype.oneWinHight=function(t){this.cardAahes();for(var e=0;e<t.length;e++){var i=Number(t[e]),o=this._model.cardlist[i-1].openRole,n=Math.floor((i-1)/3)+1,s=Math.floor((i-1)%3);this._mViewFirst["GroupList"+n].getChildAt(s).texture=RES.getRes("shuihu_ui_result_"+o+"_jpg")}},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t-this.getGameController().getModel().startMoney),o={time:e,money:i};this.getGameController().getModel().recordList.unshift(o),this.getGameController().getModel().changerecordList(),console.log("战绩数据统计1"),console.log(this.getGameController().getModel().recordList)},i.prototype.playGetScore=function(){egret.log("开始播放得分动画!"),this._model.isbet=!0;var t=Number(this._mViewFirst.gameGetMoney()),e=Number(App.CommonUtils.money2Str(this._model._winScore)),i=e/30;this.setRecordInit(this._model._blance),App.TimerManager.doTimer(32,999,function(){if(t+=i,e-=i,this._mViewFirst.gameSetMoney(App.CommonUtils.moneyself(t)),this._PopupView.setBillingScore(App.CommonUtils.moneyself(e)),i>=e){if(this._PopupView.setBillingScore(0),this._mViewFirst.gameSetMoney(App.CommonUtils.money2Str(this._model._blance)),this._mViewFirst.lightVisible(),this.restGame(),this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return this._mViewFirst._bottonButton.stopAutomatic(),this.restGame(),void App.TimerManager.removeAll(this);this.automaticNext()}this._model.isAuto||App.TimerManager.removeAll(this)}},this)},i.prototype.shzscorechangeASD=function(){var t=Number(this._mViewFirst.gameGetMoney()),e=Number(App.CommonUtils.money2Str(this._model._winScore)),i=e/30;if(t+=i,e-=i,this._mViewFirst.gameSetMoney(App.CommonUtils.moneyself(t)),this._PopupView.setBillingScore(App.CommonUtils.moneyself(e)),0>=e&&(this._PopupView.setBillingScore(0),this._mViewFirst.gameSetMoney(App.CommonUtils.money2Str(this._model._blance)),this.restGame(),this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime)){if(0==this._model.automaticTime)return this._mViewFirst._bottonButton.stopAutomatic(),void App.TimerManager.removeAll(this);this.automaticNext()}},i.prototype.numberspeed=function(){this._model.isbet=!0,this.num=Number(this._PopupView._awardAnimation.winScore0.text),Number(this._PopupView._awardAnimation.winScore0.text)>=1e4?this.steen=30:Number(this._PopupView._awardAnimation.winScore0.text)>=1e3&&Number(this._PopupView._awardAnimation.winScore0.text)<1e4?this.steen=15:Number(this._PopupView._awardAnimation.winScore0.text)>=10&&Number(this._PopupView._awardAnimation.winScore0.text)<1e3?this.steen=1:Number(this._PopupView._awardAnimation.winScore0.text)>=1&&Number(this._PopupView._awardAnimation.winScore0.text)<10?this.steen=.1:this.steen=.01,App.TimerManager.doTimer(20,99999,this.winscorechange,this)},i.prototype.winscorechange=function(){if(this.speed+=this.steen,this.num-=1*this.speed,this._PopupView._awardAnimation.winScore0.text=App.CommonUtils.moneyself(this.num)+"",this.num<=0){if(this.restGame(),this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return void this._mViewFirst._bottonButton.stopAutomatic();this.automaticNext()}App.TimerManager.remove(this.winscorechange,this)}},i.prototype.restGame=function(){this._PopupView._awardAnimation.winScore0.text="0",this._PopupView.closeAwardView(),this._PopupView._awardAnimation.closeSettlementAnimation(),this._mViewFirst._bottonButton.gameHight(),this._mViewFirst._bottonButton.gameoverButtontype(),this.num=0,this.steen=0,this.speed=0,this._model.isbet=!0,this._model.isAuto&&this._mViewFirst.autoAnteType()},i.prototype.automaticNext=function(){App.TimerManager.doTimer(1e3,1,function(){App.TimerManager.removeAll(this),this.post()},this)},i.prototype.balancespeed=function(){Number(this._PopupView._awardAnimation.winScore0.text)>=1e4?this.steenbalance=30:Number(this._PopupView._awardAnimation.winScore0.text)>=1e3&&Number(this._PopupView._awardAnimation.winScore0.text)<1e4?this.steenbalance=15:Number(this._PopupView._awardAnimation.winScore0.text)>=10&&Number(this._PopupView._awardAnimation.winScore0.text)<1e3?this.steenbalance=1:Number(this._PopupView._awardAnimation.winScore0.text)>=1&&Number(this._PopupView._awardAnimation.winScore0.text)<10?this.steenbalance=.1:this.steenbalance=.01,App.TimerManager.doTimer(20,99999,this.balancechange,this)},i.prototype.balancechange=function(){this.speedbalance+=this.steenbalance,this.numbalance+=1*this.speedbalance,this.numbalance>=this._model.balance&&App.TimerManager.remove(this.balancechange,this)},i.prototype.asdm=function(){var t=App.MovieClipFactory.createMovieClip("winlight");t.x=500,t.y=300,t.blendMode=egret.BlendMode.ADD,this._mViewFirst.addChild(t),t.play(999)},i.prototype.resetSettlementData=function(){this._model._winScore=0,this._model._islottery=!1,this._model._lotteryNum=0,this._model.winPos=[],this._model.winLine=[]},i.prototype.resetOpenCard=function(){this._model.roleList=[],this._model.cardlist.forEach(function(t){t.openRole=0}.bind(this))},i.prototype.getMoudel=function(){return this._model},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._mViewFirst&&this._mViewFirst.destroy(),this._shzNet.destroy(),this._PopupView.destroy(),App.TimerManager.removeAll(this),this._shzNet=void 0,this._PopupView=void 0,this._model=void 0,this._proxy=void 0,this._mViewFirst=void 0},i}(base.GameSeparateCtrl);t.GameCtrlFirst=e,__reflect(e.prototype,"shz.GameCtrlFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewSecond=null,i._model=null,i._proxy=null,i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.inits=function(){this._model=new t.GameModelSecond(this.getController()),this._proxy=new t.GameProxySecond(this.getController(),this._model)},i.prototype.openGame=function(e){null==this._mViewSecond&&(this._mViewSecond=new t.SecondGameView(this.getController()),App.ViewManager.register(t.ViewConst.SecondGame,this._mViewSecond)),console.log("进入游戏2data",e),this._model.init(e.score,e.award,e.bet,e.money,e.isAuto),App.ViewManager.open(t.ViewConst.SecondGame,this._model),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm2_mp3")},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.SecondGame)},i.prototype.onGameStartReq=function(){this._proxy.reqGame()},i.prototype.onGameStartBack=function(){this._mViewSecond&&this._mViewSecond.startGame()},i.prototype.onGetScoreReq=function(){this._proxy.reqGetScore()},i.prototype.onGetScoreBack=function(){this._mViewSecond.playGetScore()},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t-this.getGameController().getModel().startMoney),o={time:e,money:i};this.getGameController().getModel().recordList.unshift(o),this.getGameController().getModel().changerecordList(),console.log("战绩数据统计2"),console.log(this.getGameController().getModel().recordList)},i.prototype.registers=function(){this.registerFunc(t.SecondGameConst.Game_Start_Req,this.onGameStartReq,this),this.registerFunc(t.SecondGameConst.Game_Start_Back,this.onGameStartBack,this),this.registerFunc(t.SecondGameConst.Get_Score_Req,this.onGetScoreReq,this),this.registerFunc(t.SecondGameConst.Get_Score_Back,this.onGetScoreBack,this),this.registerFunc(t.SecondGameConst.getRecordNum,this.setRecordInit,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._mViewSecond&&this._mViewSecond.destroy(),this._model=void 0,this._proxy=void 0,this._mViewSecond=void 0},i}(base.GameSeparateCtrl);t.GameCtrlSecond=e,__reflect(e.prototype,"shz.GameCtrlSecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewThird=null,i._PopupView=null,i._model=null,i._proxy=null,i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.inits=function(){this._model=new t.GameModelThird(this.getController()),this._proxy=new t.GameProxyThird(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController(),LayerManager.UI_Tips)},i.prototype.openGame=function(e){null==this._mViewThird&&(this._mViewThird=new t.ThirdGameView(this.getController()),App.ViewManager.register(t.ViewConst.ThirdGame,this._mViewThird)),console.log("进入游戏3data",e),this._model.init(e.score,e.award,e.bet),App.ViewManager.register(t.ViewConst.ThirdPopup,this._PopupView),App.ViewManager.open(t.ViewConst.ThirdGame,this._model),App.ViewManager.open(t.ViewConst.ThirdPopup),this._PopupView.initUI(),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm3_mp3")},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.ThirdGame)},i.prototype.registers=function(){this.registerFunc(t.shzControllerCon.ondoubleBet,this.ondoubleBet,this),this.registerFunc(t.shzControllerCon.onNormalBet,this.onNormalBet,this),this.registerFunc(t.shzControllerCon.onhalfBet,this.onhalfBet,this),this.registerFunc(t.shzControllerCon.ondiceBet,this.ondiceBet,this),this.registerFunc(t.shzControllerCon.betMoneyblack,this.betMoneyblack,this),this.registerFunc(t.shzControllerCon.dicelotteryresult,this.dicelotteryresult,this),this.registerFunc(t.shzControllerCon.postGetScore,this.postGetScore,this),this.registerFunc(t.shzControllerCon.playGetScore,this.playGetScore,this),this.registerFunc(t.shzControllerCon.setRatioScore,this.setRatioScore,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.ratioStart=function(){this._mViewThird.startBet(),this._PopupView.closeAwardView(),this._mViewThird.oneGameOver(),this._mViewThird.closeDiceAnimation(1),this._mViewThird.diceAnimation(2,1),App.SoundManager.playEffect("yaoshaizi_mp3"),this._mViewThird._approach2.addPlayEndCallBack(function(){this._mViewThird._approach2.parent&&(App.SoundManager.playEffect("shzXiazhu2_mp3"),this._mViewThird._diceBet.visible=!0,this._mViewThird.closeDiceAnimation(2),this._mViewThird.diceAnimation(1,999))},this),R.sendPlayerAction("SHZratio_continueafterwin")},i.prototype.ondoubleBet=function(){var t=this._model.getThirdTotalScore(),e=this._model.getThirdUserMoney(),i=App.CommonUtils.money2Str(2*t);if(Number(i)<=1e5){this.ratioStart();var o=App.CommonUtils.money2Str(e-t);this._mViewThird._thirdButton.setBetScore(i),this._mViewThird._thirdButton._userinfo.setMoney(o),this._mViewThird._thirdButton.disabledBtn(),this._model.betType=3}else App.ScrollTxtTips.showTip("当前限红10万")},i.prototype.onNormalBet=function(){var t=App.CommonUtils.money2Str(this._model.getThirdTotalScore());Number(t)<=1e5?(this.ratioStart(),this._mViewThird._thirdButton.setBetScore(t),this._mViewThird._thirdButton.disabledBtn(),this._model.betType=2):App.ScrollTxtTips.showTip("当前限红10万")},i.prototype.onhalfBet=function(){var t=this._model.getThirdTotalScore()/2,e=this._model.getThirdUserMoney(),i=App.CommonUtils.money2Str(t);if(Number(i)<=1e5){this.ratioStart();var o=App.CommonUtils.money2Str(e+t);this._mViewThird._thirdButton.setBetScore(i),this._mViewThird._thirdButton._userinfo.setMoney(o),this._mViewThird._thirdButton.disabledBtn(),this._model.betType=1}else App.ScrollTxtTips.showTip("当前限红10万")},i.prototype.ondiceBet=function(t){console.log("比倍投注");var e={betType:this._model.betType,compPlace:this._model.compPlace};this._proxy.requestBet(e)},i.prototype.betMoneyblack=function(){var t=App.CommonUtils.money2Str(this._model.getThirdUserMoney());this._mViewThird._thirdButton._userinfo.setMoney(t),this._mViewThird["_betScore"+this._model.tablePlace].visible=!0},i.prototype.dicelotteryresult=function(){this._mViewThird.closeDiceAnimation(1),this._mViewThird.diceAnimation(4,1);var e=App.CommonUtils.money2Str(this._model.getThirdTotalScore());this._mViewThird._approach4.addPlayEndCallBack(function(){if(this._mViewThird._approach4.parent&&Number(e)>0)App.SoundManager.playEffect("wanjiaying_mp3"),this._mViewThird.closeDiceAnimation(4),this._mViewThird.diceAnimation(6,1),this._mViewThird._approach6.addPlayEndCallBack(function(){if(this._mViewThird.closeDiceAnimation(6),this._mViewThird.diceAnimation(1,99999),this._model.isEffec&&(this._PopupView._awardAnimation.openWinpopup(e),this._mViewThird.Scorevisible()),!this._model.isEffect){var t=this._mViewThird._thirdButton.getBetScore(),i=App.CommonUtils.moneyself(Number(e)/t),o=0;49>=i?o=0:i>=50&&119>=i?o=1:i>=120&&(o=2),this._PopupView._awardAnimation.settlementAnimation(e,o),R.setTimeOnce(function(){this._mViewThird.Scorevisible()},this,700)}},this);else if(this._mViewThird._approach4.parent&&0==Number(e)){this._mViewThird.closeDiceAnimation(4),this._mViewThird.diceAnimation(5,2),App.SoundManager.playEffect("wanjiashu_mp3");var i=this;this._mViewThird._approach5.addPlayEndCallBack(function(){i._mViewThird.closeDiceAnimation(5),i._mViewThird.concealCard();var e=i._model.getThirdUserMoney();i.setRecordInit(e),egret.log("进入普通游戏");var o=!0;i.applyFunc(t.NoticeConst.Go_To_First_Game,{score:e,isBet:o,isAuto:!1}),i._mViewThird.clearCard()},this)}},this),this._mViewThird.lotteryResult(),App.SoundManager.playEffect(this._model.otalPoints+"dian_mp3"),R.setTimeOnce(function(){this._mViewThird.recordCardflay()},this,500)},i.prototype.setRatioScore=function(t){var e=App.CommonUtils.money2Str(t);this._mViewThird.gameSetMoney(e)},i.prototype.postGetScore=function(){var t={gametype:3};this._proxy.requestThirdScore(t)},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t-this.getGameController().getModel().startMoney);if(Number(i)>.5){var o={time:e,money:i};console.log(this.getGameController().getModel().recordList),this.getGameController().getModel().recordList.unshift(o)}this.getGameController().getModel().changerecordList(),console.log("战绩数据统计3"),console.log(this.getGameController().getModel().recordList)},i.prototype.playGetScore=function(){egret.log("开始播放得分动画!"),this._mViewThird._thirdButton._BtnGetScore.enabled=!1;var t=this,e=Number(this._mViewThird.gameGetMoney()),i=Number(App.CommonUtils.money2Str(this._model.getThirdTotalScore())),o=this._PopupView.getAwardScore(),n=i/30;t.setRecordInit(this._model.getThirdUserMoney()),App.TimerManager.doFrame(2,100,function(){e+=n,i-=n,t._mViewThird.gameSetMoney(App.CommonUtils.moneyself(e)),o?t._PopupView.setBillingScore(App.CommonUtils.moneyself(i)):t._mViewThird.setBetScore(App.CommonUtils.moneyself(i)),n>=i&&(o?t._PopupView.setBillingScore(0):t._mViewThird.setBetScore(0),t._mViewThird.gameSetMoney(App.CommonUtils.money2Str(t._model.getThirdUserMoney())),App.TimerManager.removeAll(this),this.getScoreEnd())},this)},i.prototype.getScoreEnd=function(){var e=this;e._PopupView.setBillingScore(0),e._PopupView.closeAwardView(),R.setTimeOnce(function(){egret.log("进入普通游戏");var i=e._model.getThirdUserMoney(),o=!0;e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:i,isBet:o,isAuto:!1}),e._mViewThird.clearCard()},this,1e3)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._mViewThird&&this._mViewThird.destroy(),this._model=void 0,this._proxy=void 0,this._mViewThird=void 0},i}(base.GameSeparateCtrl);t.GameCtrlThird=e,__reflect(e.prototype,"shz.GameCtrlThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.isEffect=!1,i.isGameOver=!1,i.startMoney=0,i.overMoney=0,i.recordList=[],i}return __extends(e,t),e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"shz.GameModel")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.isbet=!0,i._mFirstScore=0,i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.init=function(t){this._mFirstScore=t},i.prototype.initData=function(){this.isbet=!0,this.automaticTime=0,this.betMoney=0,this.isAutoBet=!1,this.isAuto=!1,this.selectionTimes=0,this.cardlist=[{openRole:0,openCardPlace:1},{openRole:0,openCardPlace:2},{openRole:0,openCardPlace:3},{openRole:0,openCardPlace:4},{openRole:0,openCardPlace:5},{openRole:0,openCardPlace:6},{openRole:0,openCardPlace:7},{openRole:0,openCardPlace:8},{openRole:0,openCardPlace:9},{openRole:0,openCardPlace:10},{openRole:0,openCardPlace:11},{openRole:0,openCardPlace:12},{openRole:0,openCardPlace:13},{openRole:0,openCardPlace:14},{openRole:0,openCardPlace:15}],this._winScore=0,this._islottery=!1,this.isEffect=!1,this._lotteryNum=0,this.winPos=[],this.balance=0,this.roleList=[],this.winLine=[],this._blance=0},i.prototype.initDataNotify=function(){this.isBetDataNotify=t.DataNotify.create(this.isbet),this.isAutoBetDataNotify=t.DataNotify.create(this.isAutoBet),this.automaticTimeNotify=t.DataNotify.create(this.automaticTime)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameModel);t.GameModelFirst=e,__reflect(e.prototype,"shz.GameModelFirst")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._mScore=20,i._mScoreAward=0,i._mScoreBet=0,i._mTotalScore=0,i.userMoney=0,i.mGameMaxTimes=0,i.mGameLeftTimes=0,i.mPlayerMoney=0,i._rewardScore=0,i._AwardList=[],i._lotteryNum=0,i._centerCardslist=[],i._sidecardslist=[],i.isAuto=!1,i.isEffect=!1,i._mAwardList=[2,0,0,500,20,0],i._mResultList1=[1,2,3,4,5,5,0],i._mResultList2=[],i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i}return __extends(e,t),e.prototype.init=function(t,e,i,o,n){this._mScore=t,this._mScoreBet=i,this._mScoreAward=e,this.mPlayerMoney=o,this.isAuto=n,this._mTotalScore=this._mScore},e.prototype.initRabio=function(){this._AwardList=[],this._lotteryNum=0,this._centerCardslist=[],this._sidecardslist=[],this._mAwardList=[],this._mResultList1=[],this._mResultList2=[]},e.prototype.refresh=function(t,e,i){egret.log("刷新彩金游戏结果 award:",t,"result1:",e,"result2:",i),this._mAwardList=t,this._mResultList1=e,this._mResultList2=i},e.prototype.countTotalScore=function(t){var e=this._mAwardList[t-1];this._rewardScore=e,egret.log("当前奖励分数：",e),this._mTotalScore+=e,this._mScoreAward+=e},e.prototype.getTotalScore=function(){return this._mTotalScore},e.prototype.getScore=function(){return this._mScore},e.prototype.getScoreAward=function(){return this._mScoreAward},e.prototype.getScoreBet=function(){return this._mScoreBet},e.prototype.getAwardList=function(){return this._mAwardList},e.prototype.getResultList1=function(){return this._mResultList1},e.prototype.getResultList2=function(){return this._mResultList2},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mAwardList=void 0,this._mResultList1=void 0,this._mResultList2=void 0},e}(base.GameModel);t.GameModelSecond=e,__reflect(e.prototype,"shz.GameModelSecond")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._tScore=0,i._tScoreAward=0,i._tScoreBet=0,i._tTotalScore=0,i.betType=0,i.compPlace=0,i.dicelist=[],i.otalPoints=0,i.compwinscore=0,i._rabiolist=[],i.tablePlace=0,i.isEffect=!1,i}return __extends(e,t),e.prototype.init=function(t,e,i){console.log(t,e,i),this._tScore=t,this._tScoreBet=i,this._tScoreAward=e,this._tTotalScore=this._tScore},e.prototype.initRabio=function(){},e.prototype.changeRalioList=function(){this._rabiolist.length>10&&this._rabiolist.splice(0,1)},e.prototype.getThirdUserMoney=function(){return console.log(this._tScoreBet),this._tScoreBet},e.prototype.setThirdUserMoney=function(t){console.log(this._tScoreBet),this._tScoreBet=t},e.prototype.getThirdTotalScore=function(){return console.log(this._tScore),this._tScore},e.prototype.setThirdTotalScore=function(t){console.log(this._tScore),this._tScore=t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModelThird=e,__reflect(e.prototype,"shz.GameModelThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"shz.GameProxy")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getModel=function(){return this._model},i.prototype.onGameBack=function(t){var e=this.getModel();e._lotteryNum=t.lotteryNum,e._islottery=e._lotteryNum>0},i.prototype.onEnterGameBack=function(e){console.log("onEnterGameBack",e),e&&this.applyFunc(t.shzControllerCon.Game_Enter_Res)},i.prototype.onLeaderBoardRes=function(e){console.log("onLeaderBoardRes",e),e.LeaderInfo.length&&this.applyFunc(t.shzControllerCon.rankingScore,e.LeaderInfo)},i.prototype.onResultResBack=function(e){console.log("onResultResBack",e),e.winresult.length&&this.applyFunc(t.shzControllerCon.winningScore,e.winresult)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.COMP_RES,this.onEnterGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.LEADER_BOARD_RES,this.onLeaderBoardRes,this),this.addListener(t.shzControllerCon.NET_MSG.RESULT_RES,this.onResultResBack,this),e.prototype.addEvent.call(this)},i.prototype.reqEnterGame=function(){this.send(t.shzControllerCon.NET_MSG.COMP_REQ,{gametype:1})},i.prototype.winRecord=function(e){this.send(t.shzControllerCon.NET_MSG.RESULT_REQ,e)},i.prototype.ranking=function(e){this.send(t.shzControllerCon.NET_MSG.LEADER_BOARD_REQ,e)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxyFirst=e,__reflect(e.prototype,"shz.GameProxyFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getController=function(){return this._controller},i.prototype.getModel=function(){return this._model},i.prototype.onGameBack=function(t){console.log("onGameBack",t),this.getModel().mGameMaxTimes=t.lotteryNum},i.prototype.onGetScoreBack=function(e){console.log("onGetScoreBack",e);var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.Second&&(this.getModel().mPlayerMoney=e.balance,this.applyFunc(t.SecondGameConst.Get_Score_Back))},i.prototype.onResultBack=function(e){console.log("onResultBack",e);var i=this.getModel();i.initRabio();for(var o=e.winScore,n=[],s=[],r=e.rolecoad,a=0,h=r.length;h>a;a++){var l=r[a],p=10==l.sidecards?0:l.sidecards-1,c=10==l.sidecards?1:l.sidecards;n.push(p),i._sidecardslist.push(c);var u=[],d=l.centerCards;i._centerCardslist.push(d);for(var m=0,y=d.length;y>m;m++)u.push(d[m]-1);s.push(u)}i.refresh(o,n,s),i.mGameLeftTimes=e.lotteryNum?e.lotteryNum:0,i._lotteryNum=e.lotteryNum,this.applyFunc(t.SecondGameConst.Game_Start_Back)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.ProxyKeyConst.ScGenGetScoreRes,this.onGetScoreBack,this),this.addListener(t.ProxyKeyConst.ScLotteryCardAndExchangeRes,this.onResultBack,this)
},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.reqGame=function(){this.send(t.ProxyKeyConst.CsLotteryCardReq)},i.prototype.reqGetScore=function(){this.send(t.ProxyKeyConst.CsGenGetScoreReq,{gametype:2})},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxySecond=e,__reflect(e.prototype,"shz.GameProxySecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getController=function(){return this._controller},i.prototype.getModel=function(){return this._model},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.shzControllerCon.NET_MSG.COMP_BET_RES,this.onCompBetResBack,this),this.addListener(t.shzControllerCon.NET_MSG.DICE_RES,this.onDiceResBack,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this)},i.prototype.onCompBetResBack=function(e){console.log("onCompBetResBack",e),e.betState&&(this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.betMoneyblack),this.getModel().setThirdTotalScore(e.compwinscore),this.applyFunc(t.shzControllerCon.setRatioScore,e.balance))},i.prototype.onDiceResBack=function(e){if(console.log("onDiceResBack",e),e.dicenumber){this.getModel().dicelist=[],this.getModel().otalPoints=0;var i=function(t,e){return t-e};this.getModel().dicelist=e.dicenumber.sort(i),this.getModel().otalPoints=e.dicenumber[0]+e.dicenumber[1],console.log(this.getModel().dicelist),this.applyFunc(t.shzControllerCon.dicelotteryresult)}},i.prototype.onGenGetScoreResRes=function(e){var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.Third&&(console.log("onGenGetScoreResRes",e),e.balance&&(App.SoundManager.playEffect("defen1_mp3"),this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.playGetScore)))},i.prototype.requestBet=function(e){this.send(t.shzControllerCon.NET_MSG.COMP_GAME_BET_REQ,e)},i.prototype.requestThirdScore=function(e){this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxyThird=e,__reflect(e.prototype,"shz.GameProxyThird")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.countAllbet=function(t){return 9*t},t.lotterylist={overlist:["shz_card_0_png","shz_card_0_png","shz_card_0__png","shz_card_1_png","shz_card_1__png","shz_card_2__png","shz_card_3__png","shz_card_4__png","shz_card_5__png","shz_card_6__png","shz_card_7__png","shz_card_8__png"]},t.cardlistTest=[{openRole:2,openCardPlace:1},{openRole:3,openCardPlace:2},{openRole:1,openCardPlace:3},{openRole:5,openCardPlace:4},{openRole:4,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:1,openCardPlace:7},{openRole:8,openCardPlace:8},{openRole:9,openCardPlace:9},{openRole:7,openCardPlace:10},{openRole:6,openCardPlace:11},{openRole:9,openCardPlace:12},{openRole:5,openCardPlace:13},{openRole:8,openCardPlace:14},{openRole:7,openCardPlace:15}],t}();t.conFun=e,__reflect(e.prototype,"shz.conFun")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"shz.DataNotify")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameFirst")||this;return i._cont=i._controller,i.maskRct1=new egret.Rectangle(0,0,0,630),i.masklist=[],i.masklist2=[],i.arrlist=[1,2,3,4,5,6,7,8,9],i.overlist=["shuihu_ui_result_1_1_1_jpg","shuihu_ui_result_2_1_1_jpg","shuihu_ui_result_3_1_1_jpg","shuihu_ui_result_4_1_1_jpg","shuihu_ui_result_5_1_1_jpg","shuihu_ui_result_6_1_1_jpg","shuihu_ui_result_7_1_1_jpg","shuihu_ui_result_8_1_1_jpg","shuihu_ui_result_9_1_1_jpg"],i.stoptwink=[],i.linelight=[],i.lightIndex=0,i.surroundindex=0,i._Surroundlist=[],i.index_1=0,i.approachList=[],i._bottonButton.initComponent(t),i._toolBarView.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t},i.prototype.stopAutomatic=function(){this._bottonButton.stopAutomatic()},i.prototype.setUserMoney=function(t){this._bottonButton.setUserMoney(t)},i.prototype.scoreButtonType=function(){this._bottonButton.scoreButtonType()},i.prototype.getDIScore=function(){return this._bottonButton.getDIScore()},i.prototype.createMask=function(){for(var t=0;9>t;t++){var e=new egret.Rectangle(0,0,0,630);this.masklist.push(e),this.masklist2.push(e)}},i.prototype.maskReset=function(){this.masklist.length&&this.masklist.forEach(function(t){t.width=0})},i.prototype.concealLine=function(){for(var t=0;9>t;t++)this["ImageLine"+t].visible=!1},i.prototype.autoAnteType=function(){this._bottonButton.autoAnteType()},i.prototype.changeCard=function(){App.SoundManager.playEffect("gundong_mp3"),App.TimerManager.doTimer(50,40,this.refrsh.bind(this,1),this,this.overone.bind(this,1),this),App.TimerManager.doTimer(50,50,this.refrsh.bind(this,2),this,this.overone.bind(this,2),this),App.TimerManager.doTimer(50,60,this.refrsh.bind(this,3),this,this.overone.bind(this,3),this),App.TimerManager.doTimer(50,70,this.refrsh.bind(this,4),this,this.overone.bind(this,4),this),App.TimerManager.doTimer(50,80,this.refrsh.bind(this,5),this,this.overone.bind(this,5),this)},i.prototype.refrsh=function(t){for(var e=this["GroupList"+t],i=0;i<e.numChildren;i++)e.getChildAt(i).texture=RES.getRes("shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1_jpg")},i.prototype.overone=function(t){this.applyFunc("overone",t)},i.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},i.prototype.twinkle=function(){for(var t=0;t<this.cardlist_0.numChildren;t++)for(var e=0;3>e;e++){var i=this["GroupList"+t].getChildAt(e);"shz_card_0_png"==i.source&&(App.EffectUtils.startFlicker(i,100),this.stoptwink.push(i))}},i.prototype.linetein=function(e){var i=t.NoticeConst.GenExchange.psGenOpenline[e].openLine;this.lotteryLine(i)},i.prototype.lotteryLine=function(e){App.SoundManager.playEffect("xian_mp3");var i=new t.ShzGoldBones,o="xianlight"+e;i.updateId(o),this.GroupLine.addChild(i);var n=this["ImageLine"+e].x+this["ImageLine"+e].width/2,s=this["ImageLine"+e].y+this["ImageLine"+e].height/2;i._index=e,i.setPosition(n,s),i.play(1),i.addPlayEndCallBack(function(){i.parent&&this.GroupLine.removeChild(i)},this)},i.prototype.onebyonelight=function(){App.TimerManager.doTimer(60,66,this.lightone,this,function(){this.lightVisible(),this.lightIndex=0},this)},i.prototype.oneShzlight=function(t){this.light_0.getChildAt(t).visible=!0,this.light_1.getChildAt(t).visible=!0},i.prototype.lightone=function(){this.lightVisible(),this.light_0.getChildAt(this.lightIndex).visible=!0,this.light_1.getChildAt(this.lightIndex).visible=!0,this.lightIndex++,this.lightIndex>=9&&(this.lightIndex=0)},i.prototype.lightVisible=function(){for(var t=0;9>t;t++)this.light_0.getChildAt(t).visible=!1,this.light_1.getChildAt(t).visible=!1},i.prototype.lightTwinkle=function(e){this.lightVisible();for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++){var o=t.NoticeConst.GenExchange.psGenOpenline[i].openLine;this.twinklelight(o)}},i.prototype.twinklelight=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0,App.EffectUtils.startFlicker(this["left_0_"+t],200),App.EffectUtils.startFlicker(this["light_0_"+t],200)},i.prototype.stoplighttTwinkle=function(e){for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++){var o=t.NoticeConst.GenExchange.psGenOpenline[i].openLine;this.stoptTwinklelight(o)}},i.prototype.stoptTwinklelight=function(t){App.EffectUtils.stopFlicker(this["light_0_"+t]),App.EffectUtils.stopFlicker(this["left_0_"+t]),this["light_0_"+t].alpha=1,this["left_0_"+t].alpha=1},i.prototype.lightShow=function(t){this.lightVisible(),this.lightopen(t)},i.prototype.lightopen=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0},i.prototype.linevisible=function(){for(var t=0;t<this.GroupLine.numChildren;t++)this["ImageLine"+t].visible=!1},i.prototype.stoptwinkle=function(){for(var t=0;t<this.stoptwink.length;t++)App.EffectUtils.stopFlicker(this.stoptwink[t])},i.prototype.surround=function(t){for(var e=0;e<t.length;e++)this.setSurround(t[e])},i.prototype.setSurround=function(e){var i=Math.floor((e-1)/3)+1,o=Math.floor((e-1)%3),n=new t.ShzGoldBones;n.updateId("boxlight"),this["surround"+i].addChild(n);var s=this["surround"+i].getChildAt(o).x+116.5,r=this["surround"+i].getChildAt(o).y+103.5;n._index=i,n.setPosition(s,r),n.blendMode=egret.BlendMode.ADD,this.approachList.push(n),n.play(1),n.addPlayEndCallBack(function(){n.parent&&this["surround"+n._index].removeChild(n)},this)},i.prototype.closeSurroundOne=function(){for(var t=0;t<this._Surroundlist.length;t++)this._Surroundlist[t]&&this._Surroundlist[t].parent&&(this._Surroundlist[t].stopGame(),this._Surroundlist[t].parent.removeChild(this._Surroundlist[t]));this._Surroundlist=[]},i.prototype.closeEffect=function(){if(this.approachList.length){for(var t=0;t<this.approachList.length;t++)this.approachList[t]&&this.approachList[t].parent&&(this.approachList[t].stopGame(),this.approachList[t].parent.removeChild(this.approachList[t]));this.approachList=[]}},i.prototype.setsurround=function(t,e){this.surroundvisible(),this.surroundindex++;for(var i=0;i<this.cardlist_1.numChildren;i++)for(var o=0;3>o;o++)0!=t[i][o]&&(this["surround"+i].getChildAt(o).visible=!0,this["surround"+i].getChildAt(o).texture=RES.getRes((0==e?"shuihu_fx_roundlight_":"shuihu_fx_roundlightb_")+this.surroundindex+"_jpg"));0==e?this.surroundindex>=32&&(this.surroundindex=0):this.surroundindex>=20&&(this.surroundindex=0)},i.prototype.fullsurround=function(t){App.TimerManager.doTimer(16,21,this.rotatesurround.bind(this,t),this)},i.prototype.rotatesurround=function(t){this.applyFunc("rotatesurround",t)},i.prototype.surroundvisible=function(){for(var t=1;6>t;t++)for(var e=0;3>e;e++)this["surround"+t].getChildAt(e).visible=!1},i.prototype.flashcard=function(t){},i.prototype.flashAnimation=function(e,i){var o=Math.floor((i-1)/3)+1,n=Math.floor((i-1)%3),s=new t.ShzGoldBones,r="skeleton_"+e;s.updateId(r),this["GroupAMList"+o].addChild(s);var a=this["GroupList"+o].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,h=this["GroupList"+o].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;s._index=o,s.setPosition(a,h),this.approachList.push(s),s.play(3),s.addPlayEndCallBack(function(){s.parent&&this["GroupAMList"+s._index].removeChild(s)},this)},i.prototype.flashcardimg=function(t){this.applyFunc("flashcardimg",t)},i.prototype.flashcardarr=function(t){this.flashvisible(),this.index_1++;for(var e=0;e<this.cardlist_2.numChildren;e++)for(var i=0;3>i;i++)0!=t[e][i]&&(this["GroupAMList"+e].getChildAt(i).visible=!0,this["GroupAMList"+e].getChildAt(i).texture=RES.getRes("shuihu_fx_picalight_"+this.index_1+"_jpg"));this.index_1>=3&&(this.index_1=0)},i.prototype.flashvisible=function(){for(var t=0;t<this.cardlist_2.numChildren;t++)for(var e=0;3>e;e++)this["GroupAMList"+t].getChildAt(e).visible=!1},i.prototype.winAnimation=function(e){for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++)for(var o=0,n=0;n<t.NoticeConst.GenExchange.psGenOpenline[i].shuihuRole.length;n++){var s=t.NoticeConst.GenExchange.psGenOpenline[i].shuihuRole[n].openLinePlace;this.individualAward(o,s)}},i.prototype.individualAward=function(e,i){var o,n=Math.floor((i-1)/3)+1,s=Math.floor((i-1)%3),r=new t.ShzGoldBones,a="skeleton_"+e+"_1",h=this._mMoudel.isEffect;r.updateId(a),this["GroupAMList"+n].addChild(r);var l=this["GroupList"+n].getChildAt(s).x+t.NoticeConst.CARD_HALF_WIDTH,p=this["GroupList"+n].getChildAt(s).y+t.NoticeConst.CARD_HALF_HEIGHT;if(r._index=n,r.setPosition(l,p),r.play(1),console.log("每个中奖动画_mol"),console.log(h),!h){o=new t.ShzGoldBones,o.updateId("boxlight2");var c=this["surround"+n].getChildAt(s).x+116.5,u=this["surround"+n].getChildAt(s).y+103.5;this["surround"+n].addChild(o),o.setPosition(c,u),o.blendMode=egret.BlendMode.ADD,o.play(5),this.approachList.push(r)}r.addPlayEndCallBack(function(){r.parent&&(this["GroupAMList"+r._index].removeChild(r),h||o&&o.parent&&this["surround"+r._index].removeChild(o))},this)},i.prototype.removeWinningAnimation=function(){App.TimerManager.removeAll(this)},i.prototype.approachAnimation=function(){for(var e=1;6>e;e++)for(var i=function(){var i=new t.ShzGoldBones;i.updateId("skeleton_1_1"),o["GroupList"+e].addChild(i);var s=o["GroupList"+e].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,r=o["GroupList"+e].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;i._index=e,i.setPosition(s,r),i.play(1),i.addPlayEndCallBack(function(){i.parent&&(this["GroupList"+i._index].removeChild(i),this.applyFunc("gameStart"),this._bottonButton.ButtonGame_0.enabled=!0,this._bottonButton.ButtonGame_0.alpha=0,this._bottonButton.startSweep())},o)},o=this,n=0;3>n;n++)i()},i.prototype.closetime=function(){App.TimerManager.removeAll(this)},i.prototype.gameGetMoney=function(){return this._bottonButton.getRabioMoney()},i.prototype.gameSetMoney=function(t){this._bottonButton.setRabioMoney(t)},i.prototype.setUserImage=function(t){this._bottonButton.setUserImage(t)},i.prototype.setUserFrame=function(t){this._bottonButton.setUserFrame(t)},i.prototype.setUserName=function(t){this._bottonButton.setUserName(t)},i.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},i.prototype.startGame=function(){this.applyFunc("startGame")},i.prototype.stopGame=function(){App.TimerManager.removeAll(this);for(var t=0;5>t;t++)this.applyFunc("overone",t)},i.prototype.opensurround=function(t){this.applyFunc("opensurround",t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.createMask()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},i.prototype.destroy=function(){if(!this._isDestroy){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._bottonButton.destroy(),this._toolBarView.destroy();for(var t=this.approachList;t.length;){var i=t.pop();i&&i.destroy()}Log.trace("销毁 shz.FirstGameView")}},i}(base.GameView);t.FirstGameView=e,__reflect(e.prototype,"shz.FirstGameView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){return t.call(this,e,LayerManager.UI_Message,"shz","ShzGameSkin")||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),console.log("初始化跑马灯信息"),this.initBroadcast(this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameMarryView=e,__reflect(e.prototype,"shz.GameMarryView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.UI_Tips)||this;return i._mAniFlag=null,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.createFlag()},i.prototype.playFlag=function(){this.createFlag(),this._mAniFlag&&this._mAniFlag.play()},i.prototype.createFlag=function(){this._mAniFlag||(this._mAniFlag=t.BoneAniFlag.create()),this._mAniFlag.parent||(this.addChild(this._mAniFlag),this._mAniFlag.initDBRes("shzAniFlag"),this._mAniFlag.x=App.StageUtils.getWidth()/2,this._mAniFlag.y=App.StageUtils.getHeight()/2)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mAniFlag.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mAniFlag&&this._mAniFlag.destroy(),this._mAniFlag=void 0,Log.trace("销毁 shz.FirstGameView")},i}(BaseEuiView);t.GameTipView=e,__reflect(e.prototype,"shz.GameTipView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){return t.call(this,e,LayerManager.Game_Bg,"shz","ShzGameSkin")||this}return __extends(e,t),e.prototype.onBack=function(){this.applyFunc("onClickBack")},e.prototype.testone=function(){},e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameView=e,__reflect(e.prototype,"shz.GameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameSecond")||this;return i._mCurrTimes=0,i._mMaxTimes=3,i._mCurrRoundTimes=0,i._index=0,i._winpos=0,i.goldList=[],i.goldEffctList=[],i.winpos=[],i.arrlist=[2,3,4,5,6,7,8,9],i.overlist=["shuihu_ui_result_1_1_1_png","shuihu_ui_result_2_1_1_png","shuihu_ui_result_3_1_1_png","shuihu_ui_result_4_1_1_png","shuihu_ui_result_5_1_1_png","shuihu_ui_result_6_1_1_png","shuihu_ui_result_7_1_1_png","shuihu_ui_result_8_1_1_png","shuihu_ui_result_9_1_1_png"],i._posList={},i._imageList={},i._slotList=[],i._shzUserInfo.initComponent(t),i._IconSkin.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);for(var i=1;6>=i;i++)this._posList[i+0]={x:5+157*(i-1),y:2},this._posList[i+6]={x:950,y:2+87*(i-1)},this._posList[i+12]={x:950-157*(i-1),y:527},this._posList[i+18]={x:5,y:527-87*(i-1)};var o=this._imageList;o[1]=o[7]=o[13]=o[19]=0,o[4]=t.ShzType.ZYT,o[12]=o[24]=t.ShzType.DXTT,o[8]=o[18]=t.ShzType.Song,o[14]=o[20]=t.ShzType.Lin,o[2]=o[9]=o[17]=t.ShzType.Lu,o[6]=o[15]=o[23]=t.ShzType.DD,o[3]=o[10]=o[21]=t.ShzType.CQ,o[5]=o[11]=o[16]=o[22]=t.ShzType.FT;for(var n=this,i=1;4>=i;i++)this._slotList.push(new t.ShzCaiJinMC(n["slot"+i]));console.log("this._imageList"),console.log(this._imageList)},i.prototype.open=function(i){e.prototype.open.call(this),this._mMoudel=i;var o=this;o.init(),o.updateTxt(),o.upUserInfo(),o.updateImage(1),R.setTimeOnce(function(){console.log("/** 初始化界面信息 */"),o.applyFunc(t.SecondGameConst.Game_Start_Req)},this,1200),this._mMoudel.initRabio()},i.prototype.init=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shuihu_ui_result_2_jpg");this.Option.y=639,this._mCurrTimes=0,this._mMaxTimes=this._mMoudel.mGameMaxTimes,this.uBtnGetScore.enabled=!0,this.uBtnNextGame.enabled=!0,this._winpos=1,this.uTxtLeftTImes.text=""},i.prototype.shzButtonUp=function(){egret.Tween.get(this.Option).to({y:498},300)},i.prototype.startGame=function(){this._mCurrTimes++,this._mMoudel._lotteryNum<=0||(this._mMoudel.mGameLeftTimes<0&&egret.warn("服务器返回剩余次数小于0"),this._mCurrRoundTimes=0,this.updateTimes(),this.roundStart())},i.prototype.updateTimes=function(){this.uTxtLeftTImes.text=""+this._mMoudel._lotteryNum},i.prototype.updateTxt=function(){var t=this._mMoudel;this.uTxtScore.text=App.CommonUtils.money2Str(t.getScore()),this.uTxtAward.text=""+App.CommonUtils.money2Str(t.getScoreAward()),this.uTxtBet.text=""+t.getScoreBet(),this.uTxtTotalScore.text=""+App.CommonUtils.money2Str(t.getTotalScore())},i.prototype.upUserInfo=function(){this._IconSkin.setUserImage("ui_headImg_"+this._mMoudel.player.getAvatar()),this._IconSkin.setUserFrame("ui_headBox_"+this._mMoudel.player.getAvatarBox()),this._shzUserInfo.setNickName(this._mMoudel.player.getNickName()),this._shzUserInfo.setMoney(App.CommonUtils.money2Str(this._mMoudel.mPlayerMoney))},i.prototype.changeuTxtAward=function(){var t=this,e=Number(this.uTxtAward.text),i=Number(App.CommonUtils.money2Str(this._mMoudel._rewardScore));console.log("changeuTxtAward");var o=i/30;App.TimerManager.doFrame(2,50,function(){e+=o,console.log(e),t.uTxtAward.text=""+Math.floor(100*e)/100,Math.floor(100*e)/100>=Math.floor(t._mMoudel.getScoreAward()/100)/100&&(t.uTxtAward.text=""+App.CommonUtils.money2Str(t._mMoudel.getScoreAward()))},this,this.chengeScoreEnd,this)},i.prototype.chengeScoreEnd=function(){this.updateTxt()},i.prototype.roundStart=function(){this._mCurrRoundTimes++;var e=this._mMoudel.getAwardList();if(this.closeAllDiceAnimation(),this.closedicetwinkle(),egret.log("彩金次数",this._mCurrTimes+"/"+this._mMaxTimes,"的抽奖循环:",this._mCurrRoundTimes+"/"+e.length),this._mCurrRoundTimes>e.length)if(console.log("this._mCurrRoundTimes > list.length && this._mMoudel._lotteryNum >= 2"),console.log(this._mMoudel._lotteryNum),this._mMoudel._lotteryNum>=2)console.log("this.applyFunc(SecondGameConst.Game_Start_Req);"),this.applyFunc(t.SecondGameConst.Game_Start_Req);else{this.uTxtLeftTImes.text="0",this.shzButtonUp();var i=this;this._mMoudel.isAuto&&R.setTimeOnce(function(){this._mMoudel.isAuto&&i.applyFunc(t.SecondGameConst.Get_Score_Req)},this,2e3)}else this.marryRun(),this.slotRun()},i.prototype.getnum=function(t){for(var e in this._imageList)if(this._imageList[e]==t)return e},i.prototype.marryRun=function(){this._index=0;var t=0,e=this;t=this._winpos-1;var i=this._mMoudel.getResultList1(),o=i[this._mCurrRoundTimes-1],n=Number(this.getnum(o)),s=n-this._winpos,r=0;s>0&&8>=s?r=48+(24-(8-s)):s>0&&s>8?r=48+(s-8):0>s?r=48+(24-(8-s)):0==s&&(r=64),this._winpos-1?(this["result"+this._winpos].alpha=1,this.trailingEffect(this._winpos,500)):(this.result1.alpha=1,this.trailingEffect(1,500)),App.SoundManager.playEffect("ding2_mp3"),App.TimerManager.doFrame(1.5,r,function(){var i=++t%24+1;e.updateImage(i),this._index=i},this,function(){e.updateMarry(this._index,n)},this)},i.prototype.updateMarry=function(t,e){var i=t,o=this;App.SoundManager.stopEff("ding2_mp3");var n=this._mMoudel.getResultList1(),s=n[this._mCurrRoundTimes-1];this._imageList;App.TimerManager.doFrame(9,99,function(){var t=++i%24+1;console.log("跑马灯开跑"),App.SoundManager.playEffect("ding_mp3"),o.updateImage(t),t==e&&(this._winpos=t,egret.log("奖励类型:",s),App.TimerManager.removeAll(this),this.resultScore())},this)},i.prototype.resultScore=function(){var t=this._mMoudel.getAwardList(),e=this._mMoudel._centerCardslist[this._mCurrRoundTimes-1],i=t[this._mCurrRoundTimes-1];if(i>0){if(App.SoundManager.playEffect("zhongjiang_mp3"),e[0]==e[1]&&e[0]==e[2]&&e[0]==e[3]||e[0]==e[1]&&e[0]==e[2]||e[1]==e[2]&&e[1]==e[3])for(var o=0;4>o;o++)if(e[2]==e[o]){console.log("拉环内相同card大于等于3");var n=this["_slotRunPos"+o];console.log(n),this.diceAnimation(this._imageGroup,n),this.soltWinAnimation(e[o],o)}if(this.winpos.length){this.dicetwinkle(),this.diceAnimation(this._groupGold,this.imageItem);for(var s=0;s<this.winpos.length;s++){var n=this.winpos[s];this.soltWinAnimation(n[1],n[0])}}R.setTimeOnce(this.roundStart,this,2500),this._mMoudel.countTotalScore(this._mCurrRoundTimes),R.setTimeOnce(function(){this.changeuTxtAward()},this,300)}else App.SoundManager.playEffect("meijiang_mp3"),R.setTimeOnce(this.roundStart,this,1e3)},i.prototype.updateImage=function(t){this.imageItem.x=this._posList[t].x,this.imageItem.y=this._posList[t].y,this.imageIcon.x=this._posList[t].x,this.imageIcon.y=this._posList[t].y;var e=this["result"+t];e.alpha=1,this.trailingEffect(t,500)},i.prototype.trailingEffect=function(t,e){var i=this["result"+t];console.log(i),egret.Tween.get(i).to({alpha:0},e)},i.prototype.createGold=function(){if(!this.goldList.length)for(var e=0;10>e;e++){var i=new t.ShzGoldBones;i._index=e,this.goldList.push(i)}},i.prototype.createEffctGold=function(){this.eEffctlong||(this.eEffctlong=new t.ShzGoldBones)},i.prototype.createSolt=function(){this.soltAnimation||(this.soltAnimation=new t.ShzGoldBones)},i.prototype.soltInitRenders=function(t){if(!this.soltAnimation.parent){var e="skeleton_"+t+"_1";this.GroupCard.addChild(this.soltAnimation),this.soltAnimation.updateId(e)}},i.prototype.diceeEffctInitRenders=function(){if(!this.eEffctlong.parent){this._groupGold.addChild(this.eEffctlong),this.eEffctlong.updateId("coin2"),this.eEffctlong.blendMode=egret.BlendMode.ADD;var t=this._goldPos.x,e=this._goldPos.y;this.eEffctlong.setPosition(t,e)}},i.prototype.diceInitRenders=function(t){for(var e=0;e<this.goldList.length;e++)if(!this.goldList[e].parent){var i="Goldicon";this[t].addChild(this.goldList[e]),this.goldList[e].updateId(i)}},i.prototype.diceAnimation=function(e,i){for(var o=i.x+i.width/2,n=i.y+i.height/2,s=[],r=0;10>r;r++){var a=new t.ShzGoldBones;a._index=r;var h="Goldicon";e.addChild(a),a.updateId(h),a.setPosition(o,n),a.play(99999),s.push(a),this.goldList.push(a)}var l=this;R.setTimeOnce(function(){l.flyGoldCoin(s)},this,300)},i.prototype.diceEffetAnimation=function(){this.createEffctGold(),this.diceeEffctInitRenders(),this.eEffctlong.play(1),this.eEffctlong.addPlayEndCallBack(function(){this.eEffctlong.parent&&(this.eEffctlong.stopGame(),this.eEffctlong.parent.removeChild(this.eEffctlong))},this)},i.prototype.closeAllDiceAnimation=function(){if(!this.goldList.length)for(var t=0;t<this.goldList.length;t++)this.goldList[t].parent&&(this.goldList[t].stopGame(),this.goldList[t].parent.removeChild(this.goldList[t]))},i.prototype.closeDiceAnimation=function(t){t.parent&&(t.stopGame(),t.parent.removeChild(t))},i.prototype.closeSoltAnimation=function(){this.soltAnimation&&this.soltAnimation.parent&&(this.soltAnimation.stopGame(),this.soltAnimation.parent.removeChild(this.soltAnimation))},i.prototype.flyGoldCoin=function(t){App.SoundManager.playEffect("jinbi_mp3");for(var e=function(){var e=t[o],n=i;egret.Tween.removeTweens(e),egret.Tween.get(e).wait(100*o).to({x:i._goldPos.x,y:i._goldPos.y},300,egret.Ease.sineInOut).call(function(){n.closeDiceAnimation(e),9==e._index}.bind(i))},i=this,o=0;o<t.length;o++)e();this._mMoudel.isEffect||App.TimerManager.doTimer(100,10,function(){this.opendiceEffet()},this)},i.prototype.opendiceEffet=function(){var e=new t.ShzGoldBones;if(!e.parent){this._groupGold.addChild(e),e.updateId("coin2"),e.blendMode=egret.BlendMode.ADD;var i=this._goldPos.x,o=this._goldPos.y;e.setPosition(i,o),e.play(1),e.addPlayEndCallBack(function(){e.parent&&(e.stopGame(),e.parent.removeChild(e))},this)}},i.prototype.slotRun=function(){this.winpos=[];var t=this._mMoudel._centerCardslist;console.log("拉环动画"),console.log(t);var e=t[this._mCurrRoundTimes-1];console.log(e);for(var i=0;4>i;i++)if(this._mMoudel._centerCardslist[this._mCurrRoundTimes-1][i]==this._mMoudel._sidecardslist[this._mCurrRoundTimes-1]){this._slotList[i].run(e[i],200*(i+1),!0);var o=e[i],n=[i,o];this.winpos.push(n)}else this._slotList[i].run(e[i],200*(i+1),!1);console.log(this.winpos)},i.prototype.playGetScore=function(){egret.log("开始播放得分动画!"),this.uBtnGetScore.enabled=!1,this.uBtnNextGame.enabled=!1;var e=this,i=Number(this._shzUserInfo.getMoney()),o=Number(App.CommonUtils.money2Str(this._mMoudel.getTotalScore())),n=o/30;this.applyFunc(t.SecondGameConst.getRecordNum,this._mMoudel.mPlayerMoney),App.TimerManager.doTimer(32,100,function(){i+=n,o-=n,e._shzUserInfo.setMoney(Number(i.toFixed(2))),e.uTxtTotalScore.text=""+o.toFixed(0),n>=o&&(e.uTxtTotalScore.text="0",e._shzUserInfo.setMoney(App.CommonUtils.money2Str(e._mMoudel.mPlayerMoney)),e.getScoreEnd())},this)},i.prototype.getScoreEnd=function(){var e=this,i=this._mMoudel.mPlayerMoney,o=!0,n=this._mMoudel.isAuto;R.setTimeOnce(function(){App.TimerManager.removeAll(e),e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:i,isBet:o,isAuto:n});for(var s=1;5>s;s++)e["slot"+s].texture=RES.getRes("shuihu_ui_result_2_jpg")},this,300)},i.prototype.onNextGame=function(){if(R.intervalTime()){egret.log("进入比倍游戏"),this._mMoudel.isAuto=!1,App.SoundManager.playEffect("lingdang_mp3");var e=this._mMoudel.mPlayerMoney,i=this._mMoudel.getTotalScore();console.log(e,i),this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:i,award:0,bet:e})}},i.prototype.onGetScore=function(){R.intervalTime()&&(this._mMoudel.isAuto=!1,this.applyFunc(t.SecondGameConst.Get_Score_Req))},i.prototype.soltWinAnimation=function(e,i){var o=new t.ShzGoldBones,n="skeleton_"+e+"_1";this.GroupCard.addChild(o),o.updateId(n);var s=this.GroupCard.getChildAt(i).x+t.NoticeConst.CARD_HALF_WIDTH,r=this.GroupCard.getChildAt(i).y+t.NoticeConst.CARD_HALF_HEIGHT;o.setPosition(s,r),o.play(1);o.addPlayEndCallBack(function(){o.parent&&(o.stopGame(),o.parent.removeChild(o))},this)},i.prototype.changeCard=function(t){console.log("changeCard"),console.log(t),App.TimerManager.doTimer(50,45,this.refrsh,this,this.overone.bind(this,t),this)},i.prototype.refrsh=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1_png")},i.prototype.overone=function(t){console.log("overone"),console.log(t),console.log(this._mMoudel._centerCardslist);for(var e=this._mMoudel._centerCardslist[t],i=0;i<e.length;i++)this["slot"+(i+1)].texture=RES.getRes("shuihu_ui_result_"+e[i]+"_png")},i.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},i.prototype._runMarquee=function(){for(var t=0;24>t;t++);},i.prototype.dicetwinkle=function(){App.EffectUtils.startFlicker(this.result,100)},i.prototype.closedicetwinkle=function(){App.EffectUtils.stopFlicker(this.result),this.result.alpha=1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.uBtnNextGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextGame,this),this.uBtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.uBtnNextGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextGame,this),this.uBtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},i.prototype.destroy=function(){if(!this._isDestroy){for(e.prototype.destroy.call(this),App.TimerManager.removeAll(this);this._slotList.length;)this._slotList.pop().destroy();this.result.texture=void 0,this._mMoudel=void 0,this._slotList=void 0,this.eEffctlong=void 0,Log.trace("销毁 shz.FirstGameView")}},i}(base.GameView);t.SecondGameView=e,__reflect(e.prototype,"shz.SecondGameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameThird")||this;return i._posList={},i.placecomp=[1,3,2],i.placecompBet=["SHZratio_betbig","SHZratio_betdraw","SHZratio_betsmall"],i._cardflaylist=[],i._approach1=null,i._approach2=null,i._approach3=null,i._approach4=null,i._approach5=null,i._approach6=null,i._dice1.initComponent(t),i._dice2.initComponent(t),i._dice3.initComponent(t),i._thirdButton.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._thMoudel=t;var i=this;i.init(),i.updateInfo(),i.Scorevisible(),R.setTimeOnce(function(){i.diceAnimation(1,999),i.recordCardDisplay()},this,500);for(var o=1;7>o;o++)this["_approach"+o]&&this.closeDiceAnimation(o)},i.prototype.init=function(){this.setInitialization();for(var t=this._cardlist.getChildAt(0),e=0;11>e;e++)this._posList[e]={x:t.x+79*e,y:t.y}},i.prototype.setInitialization=function(){this._diceBet.visible=!1,this._diceRrsult.visible=!1,this.startBet();for(var t=1;4>t;t++)this["_dice"+t].visible=!1,this["_betScore"+t].visible=!1},i.prototype.updateInfo=function(){var t=this._thMoudel;this._thirdButton._userinfo.setNickName(t.player.getNickName()),this._thirdButton._userinfo.setMoney(App.CommonUtils.money2Str(t.getThirdUserMoney())),this._thirdButton._iconskin.setUserImage("ui_headImg_"+t.player.getAvatar()),this._thirdButton._iconskin.setUserFrame("ui_headBox_"+t.player.getAvatarBox()),this.setBetScore(App.CommonUtils.money2Str(t.getThirdTotalScore()))
},i.prototype.setRatioBetScore=function(){this.setBetScore(App.CommonUtils.money2Str(this._thMoudel.compwinscore))},i.prototype.setBetScore=function(t){this._thirdButton.setBetScore(t)},i.prototype.onBack=function(){this.applyFunc(t.NoticeConst.Go_To_First_Game)},i.prototype.ondiceBet=function(e){R.intervalTime()&&(this.prohibitBet(),this._thMoudel.tablePlace=e,this._thMoudel.compPlace=this.placecomp[e-1],this.applyFunc(t.shzControllerCon.ondiceBet,e),R.sendPlayerAction(this.placecompBet[e-1]))},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=1;4>t;t++)this["_diceBet"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet.bind(this,t),this)},i.prototype.prohibitBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!1},i.prototype.startBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!0},i.prototype.recordCardDisplay=function(){this._thMoudel.changeRalioList(),this.clearCard(),this._cardflaylist=[];for(var t=0;t<this._thMoudel._rabiolist.length;t++){var e=new eui.Image;e.source="shz_shake_his_"+this._thMoudel._rabiolist[t]+"_png",e.width=54,e.height=74,e.x=this._posList[t].x,e.y=this._posList[t].y,this._cardlist.addChild(e),this._cardflaylist.push(e)}},i.prototype.recordCardflay=function(){var t=new eui.Image,e=this._thMoudel._rabiolist.length-1;t.source="shz_shake_his_"+this._thMoudel._rabiolist[e]+"_png",t.width=54,t.height=74,t.x=955,t.y=2,this._cardlist.addChild(t),this._cardflaylist.push(t),egret.Tween.removeTweens(t);var i=this,o=this._posList[e].x,n=this._posList[e].y;egret.Tween.get(t).to({x:o,y:n},800,egret.Ease.sineInOut).call(function(){i._cardflaylist.length>10&&i.AllCardMove()}.bind(this))},i.prototype.dropCard=function(){var t=this._cardflaylist[0],e=this;egret.Tween.get(t).to({y:180,alpha:0},800,egret.Ease.sineInOut).call(function(){t.parent.removeChild(t),e._thMoudel.changeRalioList(),e._cardflaylist.length>10&&e._cardflaylist.splice(0,1)}.bind(this))},i.prototype.AllCardMove=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t],i=e.x-79;egret.Tween.get(e).to({x:i},800,egret.Ease.sineInOut)}R.setTimeOnce(function(){this.dropCard()},this,800)},i.prototype.clearCard=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&e.parent.removeChild(e)}this._cardflaylist=[]}},i.prototype.concealCard=function(){},i.prototype.Scorevisible=function(){this._thirdButton.lightbtn()},i.prototype.diceInit=function(e){this["_approach"+e]||(this["_approach"+e]=new t.ShzGoldBones)},i.prototype.diceInitRenders=function(t){if(!this["_approach"+t].parent){var e="dice_"+t;this._diceflash.addChild(this["_approach"+t]),this["_approach"+t].updateId(e);var i=this._diceflash.getChildAt(0).x+165,o=this._diceflash.getChildAt(0).y+5;this["_approach"+t].setPosition(i,o)}},i.prototype.oneGameOver=function(){this._thMoudel.initRabio(),this.setInitialization()},i.prototype.lotteryResult=function(){this._thMoudel.otalPoints>=8?(this._dice1.visible=!0,this._thMoudel._rabiolist.push(0),this._dice1.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]+"_png"):7==this._thMoudel.otalPoints?(this._dice2.visible=!0,this._thMoudel._rabiolist.push(2),this._dice2.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]+"_png"):this._thMoudel.otalPoints<=6&&(this._dice3.visible=!0,this._thMoudel._rabiolist.push(1),this._dice3.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]+"_png")},i.prototype.closeDiceAnimation=function(t){this["_approach"+t].parent&&(this["_approach"+t].stopGame(),this._diceflash.removeChild(this["_approach"+t]))},i.prototype.overDiceAnimation=function(t){this["_approach"+t].addPlayEndCallBack(function(){this["_approach"+t].parent},this)},i.prototype.diceAnimation=function(t,e){this.diceInit(t),this.diceInitRenders(t),this["_approach"+t].play(e)},i.prototype.gameGetMoney=function(){return this._thirdButton.getRabioMoney()},i.prototype.gameSetMoney=function(t){this._thirdButton.setRabioMoney(t)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=1;4>t;t++)this["_diceBet"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet.bind(this,t),this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.clearCard())},i}(base.GameView);t.ThirdGameView=e,__reflect(e.prototype,"shz.ThirdGameView")}(shz||(shz={}));var lobby;!function(t){var e;!function(t){t[t.UserInfo=3e3]="UserInfo",t[t.Recharge=3001]="Recharge",t[t.Bank=3002]="Bank",t[t.Message=3003]="Message",t[t.Activity=3004]="Activity",t[t.Share=3005]="Share",t[t.Setting=3006]="Setting",t[t.Exchange=3007]="Exchange",t[t.HeadImgSetting=3008]="HeadImgSetting"}(e=t.LobbyControllerConst||(t.LobbyControllerConst={}))}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t}();t.LobbyEvent=e,__reflect(e.prototype,"lobby.LobbyEvent")}(lobby||(lobby={}));var lobby;!function(t){var e;!function(t){t[t.UserInfo=2e3]="UserInfo",t[t.Recharge=2001]="Recharge",t[t.Bank=2002]="Bank",t[t.Message=2003]="Message",t[t.Activity=2004]="Activity",t[t.Share=2005]="Share",t[t.Setting=2006]="Setting",t[t.Exchange=2007]="Exchange",t[t.HeadImgSetting=2008]="HeadImgSetting",t[t.MessagePrompt=2009]="MessagePrompt",t[t.ActivityPrompt=2010]="ActivityPrompt",t[t.ResetMoneyPassword=2011]="ResetMoneyPassword",t[t.ResetLoginPassword=2012]="ResetLoginPassword",t[t.Register=2013]="Register"}(e=t.LobbyViewConst||(t.LobbyViewConst={}))}(lobby||(lobby={}));var LoginViewConst;!function(t){t[t.LoginSecondar=3e4]="LoginSecondar",t[t.Register=30001]="Register",t[t.ResetLoginPwd=30002]="ResetLoginPwd"}(LoginViewConst||(LoginViewConst={}));var MainViewConst;!function(t){t[t.Login=1e3]="Login",t[t.Loading=1001]="Loading",t[t.Lobby=1002]="Lobby"}(MainViewConst||(MainViewConst={}));var lobby;!function(t){var e=function(){function t(){}return t.Lobby_LoginLobby="10003",t.Lobby_LoginLobby_Back="10004",t.Lobby_RegisterAccount="10112",t.Lobby_Lobby_RegisterAccount_Back="10113",t.Lobby_ResetLoginPassword="10116",t.Lobby_ResetLoginPassword_Back="10117",t.Lobby_RechargeType="10118",t.Lobby_RechargeType_Back="10119",t.Lobby_RechargeMoney="10120",t.Lobby_RechargeMoney_Back="10121",t.Lobby_Exchange="10122",t.Lobby_Exchange_Back="10123",t.Lobby_SaveMoney="10124",t.Lobby_SaveMoney_Back="10125",t.Lobby_TakeMoney="10126",t.Lobby_TakeMoney_Back="10127",t.Lobby_NoticeList="10128",t.Lobby_NoticeList_Back="10129",t.Lobby_SingleNotice="10130",t.Lobby_SingleNotice_Back="10131",t.Lobby_DeleteSingleNotice="10132",t.Lobby_DeleteSingleNotice_Back="10133",t.Lobby_MailList="10134",t.Lobby_MailList_Back="10135",t.Lobby_SingleMail="10136",t.Lobby_SingleMail_Back="10137",t.Lobby_DeleteSingleMail="10138",t.Lobby_DeleteSingleMail_Back="10139",t.Lobby_ActivityList="10140",t.Lobby_ActivityList_Back="10141",t.Lobby_SingleActivity="10142",t.Lobby_SingleActivity_Back="10143",t.Lobby_webLogOut="10144",t.Lobby_webLogOut_Back="10145",t.Lobby_roleSetting="10146",t.Lobby_roleSetting_Back="10147",t.Lobby_RechargeRecord="10151",t.Lobby_RechargeRecord_Back="10152",t.Lobby_ResetMoneyPwd="10153",t.Lobby_ResetMoneyPwd_Back="10154",t.Lobby_BindBankList="10157",t.Lobby_BindBankList_Back="10158",t}();t.ProxyKeyConst=e,__reflect(e.prototype,"lobby.ProxyKeyConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t.inits(),t.registers(),t.addListeners(),t.refreshView(GamePlayerMgr.i.getPlayer()),t}return __extends(i,e),i.prototype.refreshView=function(t){this.LobbyView.refresh()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.LobbyModel(this),this._proxy=new t.LobbyProxy(this,this.getModel()),this.LobbyView=new t.LobbyView(this,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Lobby,this.LobbyView)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.LobbyConst.ChangeHeadImg,this.changeHeadImg,this),this.registerFunc(t.LobbyConst.ChangeNickName,this.changeNickName,this),this.registerFunc("refreshView",this.refreshView,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.changeHeadImg=function(t,e,i){this.LobbyView.changeLobbyHeadImg(t,e,i)},i.prototype.changeNickName=function(t){this.LobbyView.changeNickName(t)},i.prototype.destroy=function(){console.log("执行销毁大厅基础控制器"),e.prototype.destroy.call(this)},i}(BaseController);t.LobbyController=e,__reflect(e.prototype,"lobby.LobbyController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.activityData=[],i}return __extends(e,t),e.prototype.setListData=function(t){this.activityListData=t},e.prototype.getListData=function(){return this.activityListData},e.prototype.setData=function(t,e){this.activityData[t]=e},e.prototype.getData=function(t){return this.activityData[t]},e.prototype.destroy=function(){for(var t in this.activityData)this.activityData[t]=void 0;this.activityListData=void 0,this.activityData=void 0},e}(BaseModel);t.ActivityModel=e,__reflect(e.prototype,"lobby.ActivityModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.BankModel=e,__reflect(e.prototype,"lobby.BankModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.ExchangeModel=e,__reflect(e.prototype,"lobby.ExchangeModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.LobbyModel=e,__reflect(e.prototype,"lobby.LobbyModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nickname="",e.money=0,e.safe_money=0,e.sex=0,e.vip=0,e.avatar=0,e.avatar_box=0,e}return __extends(e,t),e}(BaseModel);t.LoginModel=e,__reflect(e.prototype,"lobby.LoginModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.annouceData=[],i.mailData=[],i}return __extends(e,t),e.prototype.setListData=function(t,e){1==e&&(this.mailListData=t),2==e&&(this.annouceListData=t)},e.prototype.getListData=function(t){return 1==t?this.mailListData:2==t?this.annouceListData:void 0},e.prototype.deleteListData=function(t,e){1==e&&this.mailListData.list.splice(t,1),2==e&&this.annouceListData.list.splice(t,1)},e.prototype.setData=function(t,e,i){1==i&&(this.mailData[t]=e),2==i&&(this.annouceData[t]=e)},e.prototype.getData=function(t,e){return 1==e?this.mailData[t]:2==e?this.annouceData[t]:void 0},e.prototype.deleteSingleData=function(t,e){1==e&&(this.mailData[t]=void 0),2==e&&(this.annouceData[t]=void 0)},e.prototype.destroy=function(){for(var t in this.annouceData)this.annouceData[t]=void 0;for(var t in this.mailData)this.mailData[t]=void 0;this.annouceData=void 0,this.annouceListData=void 0,this.mailData=void 0,this.mailListData=void 0},e}(BaseModel);t.MessageModel=e,__reflect(e.prototype,"lobby.MessageModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.payTypeListData={},i}return __extends(e,t),e.prototype.savePayTypeList=function(t){for(var e=0;e<t.length;e++){var i=t[e].pay_code;this.payTypeListData[i]=t[e].id}},e.prototype.getCurrPayChanel=function(t){return this.payTypeListData[t]},e.prototype.destroy=function(){this.payTypeListData=void 0},e}(BaseModel);t.RechargeModel=e,__reflect(e.prototype,"lobby.RechargeModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.SettingModel=e,__reflect(e.prototype,"lobby.SettingModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.UserInfoModel=e,__reflect(e.prototype,"lobby.UserInfoModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.DeleteItem=30031,t.ShowContent=30032,t.ActivityListReq=30033,t.SingleActivityReq=30034,t}();t.ActivityConst=e,__reflect(e.prototype,"lobby.ActivityConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return Log.trace("注册活动"),i.inits(),i.initFunc(),i.addListeners(),i.activityView=new t.ActivityView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Activity,i.activityView),i.activityPromptView=new t.ActivityPromptView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ActivityPrompt,i.activityPromptView),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.activityModel=new t.ActivityModel(this),this.activityProxy=new t.ActivityProxy(this,this.activityModel),this.setModel(this.activityModel)},i.prototype.initFunc=function(){this.registerFunc(t.ActivityConst.ActivityListReq,this.onActivityListReq,this),this.registerFunc(t.ActivityConst.SingleActivityReq,this.onActivityReq,this),this.registerFunc(t.ActivityConst.ShowContent,this.showContent,this)},i.prototype.onActivityListReq=function(t){this.activityProxy.activityListReq(t)},i.prototype.onActivityReq=function(t){this.activityProxy.singleActivityReq(t)},i.prototype.showContent=function(t){this.activityPromptView.showContent(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.activityProxy.addEvent()},i.prototype.removeListeners=function(){this.activityProxy.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.activityView.destroy(),this.activityProxy.destroy(),this.activityModel.destroy(),this.activityView=void 0,this.activityProxy=void 0,this.activityModel=void 0},i}(BaseController);t.ActivityController=e,__reflect(e.prototype,"lobby.ActivityController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/component/PromptSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.deleteBtn.visible=!1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn2,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn2)},i.prototype.deleteMessage=function(){var e=this.getBaseController();this.applyFunc(t.MessageConst.DeleteItem,{token:GamePlayerMgr.i.getPlayer().getToken(),id:this.currItemId},e.getMsgType()),App.ViewManager.closeView(this)},i.prototype.showContent=function(t){this.title.text=t.title,this.content.text=t.content,this.currItemId=t.id},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭弹出消息"),App.ViewManager.closeView(this)},i.prototype.clearContent=function(){this.title.text="",this.content.text=""},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ActivityPromptView=e,__reflect(e.prototype,"lobby.ActivityPromptView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ActivitySkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.activityList.itemRenderer=t.ActivityItemRender,this.alCollection=new eui.ArrayCollection;var i=new eui.VerticalLayout;this.activityList.layout=i,this.scrollerActivity.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerActivity.scrollPolicyH=eui.ScrollPolicy.OFF;var o={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};this.applyFunc(t.ActivityConst.ActivityListReq,o)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.MessageCenter.addListener("onActivityListAck",this.createList,this),App.MessageCenter.addListener("onSingleActivityAck",this.showSingleAnnou,this),this.activityList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemClick,this),this.scrollerActivity.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.MessageCenter.removeListener("onActivityListAck",this.createList,this),App.MessageCenter.removeListener("onSingleActivityAck",this.showSingleAnnou,this),this.activityList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemClick,this),this.scrollerActivity.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.initListData=function(t){for(var e=[],i=0;i<t.list.length;i++)e[i]={title:t.list[i].title,date:App.DateUtils.getFormatBySecond(Number(t.list[i].created_at),2),id:t.list[i].id,icon:"activity_favorble"};return e},i.prototype.createList=function(t){Log.trace("创建列表");var t=this.initListData(t);this.alCollection.replaceAll(t),this.activityList.dataProvider=this.alCollection,this.scrollerActivity.viewport=this.activityList,this.alCollection.refresh()},i.prototype.onListItemClick=function(e){var i=this.activityList.selectedIndex,o=this.activityList.getElementAt(i),n=this.getBaseController().getModel();n.getData(o.itemId)?this.showSingleAnnou(n.getData(o.itemId)):this.applyFunc(t.ActivityConst.SingleActivityReq,{token:GamePlayerMgr.i.getPlayer().getToken(),id:o.itemId})},i.prototype.showSingleAnnou=function(e){this.applyFunc(t.ActivityConst.ShowContent,e),App.ViewManager.open(t.LobbyViewConst.ActivityPrompt,LayerManager.UI_Tips)},i.prototype.nextPage=function(){if(!(this.scrollerActivity.viewport.scrollV+this.scrollerActivity.height<this.scrollerActivity.viewport.contentHeight&&this.scrollerActivity.viewport.scrollV>0)&&this.nowPage<this.totalPage){this.nowPage=this.nowPage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:this.nowPage};this.applyFunc(t.ActivityConst.ActivityListReq,e)}},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭活动"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ActivityView=e,__reflect(e.prototype,"lobby.ActivityView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.addListeners(),i.initFunc(),i.bankView=new t.BankView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Bank,i.bankView),Log.trace("注册银行"),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.bankModel=new t.BankModel(this),this.bankProxy=new t.BankProxy(this,this.bankModel)},i.prototype.initFunc=function(){this.registerFunc("saveMoney",this.onSaveMonye,this),this.registerFunc("takeMoney",this.onTakeMonye,this),this.registerFunc("setMoneyPwd",this.onSetMoneyPwd,this)},i.prototype.onSaveMonye=function(t){this.bankProxy.saveMoney(t)},i.prototype.onTakeMonye=function(t){this.bankProxy.takeMoney(t)},i.prototype.onSetMoneyPwd=function(t){this.bankProxy.setMoneyPwd(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.bankProxy.addEvent()},i.prototype.removeListeners=function(){this.bankProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.bankModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.bankView.destroy(),this.bankModel.destroy(),this.bankProxy.destroy(),this.bankView=void 0,this.bankModel=void 0,this.bankProxy=void 0},i}(BaseController);t.BankController=e,__reflect(e.prototype,"lobby.BankController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/BankSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.pwdInput.visible=!1;var e=GamePlayerMgr.i.getPlayer();this.currMoneyTxt.text=""+App.CommonUtils.money2Str(e.getMoney()),this.savedMoneyTxt.text=""+App.CommonUtils.money2Str(e.getSafeMoney()),this.tabSaveBtn.setImage("bankTab_save_sel","bankTab_save_nor"),this.tabTakeBtn.setImage("bankTab_take_sel","bankTab_take_nor"),this.tabSaveBtn.selected=!0,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.optType=2,GamePlayerMgr.i.getPlayer().getIsPwdSeted()||(this.tipTxt.text="请设置资金密码",this.pwdInput.visible=!0)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this);var e;for(var i in this.numBtnGroup1.$children)e=this.numBtnGroup1.$children[i],App.CommonUtils.effectButton(e,this.numBtnOnClick,this,{name:e.name});for(var i in this.numBtnGroup2.$children)e=this.numBtnGroup2.$children[i],App.CommonUtils.effectButton(e,this.pwdBtnOnClick,this,{name:e.name});App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.clear,this.backOne,this),App.CommonUtils.effectButton(this.clearAll,this.clearInput,this),App.CommonUtils.effectButton(this.saveIn,this.onOptClick,this),App.CommonUtils.effectButton(this.takeOut,this.onOptClick,this),App.CommonUtils.effectButton(this.pwdCloseBtn,this.closePwdView,this),App.CommonUtils.effectButton(this.passwordClear,this.pwdBackOne,this),App.CommonUtils.effectButton(this.passwordClearAll,this.clearPwdInput,this),App.CommonUtils.effectButton(this.passwordConfirm,this.confirmOpt,this),App.CommonUtils.effectButton(this.maxBtn,this.onClickMax,this),this.tabTakeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabSaveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.moneySlider.addEventListener(eui.UIEvent.CHANGE,this.onChangeMoney,this),App.MessageCenter.addListener("UserMoneyChange",this.refreshMoney,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this);for(var e in this.numBtnGroup1.$children)App.CommonUtils.removeButton(this.numBtnGroup1.$children[e]);for(var e in this.numBtnGroup2.$children)App.CommonUtils.removeButton(this.numBtnGroup2.$children[e]);App.CommonUtils.removeButton(this.clear),App.CommonUtils.removeButton(this.clearAll),App.CommonUtils.removeButton(this.saveIn),App.CommonUtils.removeButton(this.takeOut),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.pwdCloseBtn),App.CommonUtils.removeButton(this.passwordClear),App.CommonUtils.removeButton(this.passwordClearAll),App.CommonUtils.removeButton(this.passwordConfirm),App.CommonUtils.removeButton(this.maxBtn),this.tabTakeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabSaveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.moneySlider.removeEventListener(eui.UIEvent.CHANGE,this.onChangeMoney,this)},e.prototype.backOne=function(){Log.trace("退格"),this.saveMoneyInput.text=this.saveMoneyInput.text.slice(0,this.saveMoneyInput.text.length-1)},e.prototype.pwdBackOne=function(){Log.trace("密码退格"),this.passwordInput.text=this.passwordInput.text.slice(0,this.passwordInput.text.length-1)},e.prototype.clearInput=function(){this.saveMoneyInput.text="",this.moneySlider.value=0,this.percentage.text="(0%)"},e.prototype.clearPwdInput=function(){this.passwordInput.text=""},e.prototype.onOptClick=function(){this.saveMoneyInput.text||App.ScrollTxtTips.showTip("请输入金额"),this.pwdInput.visible=!0,this.tipTxt.text="请输入资金密码"},e.prototype.takeOnClick=function(t){Log.trace("点击取出"+Number(this.saveMoneyInput.text)),this.pwdInput.visible=!0,this.tipTxt.text="请输入资金密码"},e.prototype.switchTab=function(t){t.currentTarget==this.tabTakeBtn&&!this.takeOut.visible&&this.tabTakeBtn.touchEnabled?(this.tabSaveBtn.selected=!1,this.takeOut.visible=!0,this.saveIn.visible=!1,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.curryMoneyTypeTxt.text="输入取款",this.clearInput(),this.optType=1):t.currentTarget==this.tabSaveBtn&&!this.saveIn.visible&&this.tabSaveBtn.touchEnabled&&(this.tabTakeBtn.selected=!1,this.takeOut.visible=!1,this.saveIn.visible=!0,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.curryMoneyTypeTxt.text="输入存款",this.clearInput(),this.optType=2)},e.prototype.numBtnOnClick=function(t){var e=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));return Number(t.name+this.saveMoneyInput.text)>=e?(App.ScrollTxtTips.showTip("已到达最大值"),this.saveMoneyInput.text=e+"",this.percentage.text="(100%)",void(this.moneySlider.value=100)):void(t&&this.saveMoneyInput.text.length<9&&(this.saveMoneyInput.text=this.saveMoneyInput.text+t.name,this.moneySlider.value=Math.floor(Number(this.saveMoneyInput.text)/e*100),this.percentage.text="("+this.moneySlider.value+"%)"))},e.prototype.pwdBtnOnClick=function(t){t&&this.passwordInput.text.length<6&&(this.passwordInput.text=this.passwordInput.text+t.name)},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),App.EffectUtils.showUI(this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},e.prototype.confirmOpt=function(){if(6!=this.passwordInput.text.length)return Log.trace("this.passwordInput.text.length",this.passwordInput.text.length),void App.ScrollTxtTips.showTip("请输入6位数字的资金密码");if(!GamePlayerMgr.i.getPlayer().getIsPwdSeted()){var t={token:GamePlayerMgr.i.getPlayer().getToken(),password:this.passwordInput.text};return void this.applyFunc("setMoneyPwd",t)}if(1==this.optType){var t={token:GamePlayerMgr.i.getPlayer().getToken(),money:App.CommonUtils.moneyC2S(Number(this.saveMoneyInput.text)),password:this.passwordInput.text};this.applyFunc("takeMoney",t)}else if(2==this.optType){var t={token:GamePlayerMgr.i.getPlayer().getToken(),money:App.CommonUtils.moneyC2S(Number(this.saveMoneyInput.text)),password:this.passwordInput.text};this.applyFunc("saveMoney",t)}this.passwordInput.text=""},e.prototype.refreshMoney=function(t){Log.trace("BankView 刷新金币"),this.currMoneyTxt.text=App.CommonUtils.money2Str(t.balance),(t.deposit||0==t.deposit)&&(this.savedMoneyTxt.text=App.CommonUtils.money2Str(t.deposit)),this.pwdInput.visible=!1,this.passwordInput.text="",this.saveMoneyInput.text=""},e.prototype.onClickMax=function(){var t=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));this.saveMoneyInput.text=t+"",this.moneySlider.value=100,this.percentage.text="(100%)"},e.prototype.onChangeMoney=function(t){var e=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));t.currentTarget==this.saveMoneyInput&&(Log.trace("数值改变",Number(this.saveMoneyInput.text)),Number(this.saveMoneyInput.text)>=e&&(this.saveMoneyInput.text=e+"")),this.percentage.text="("+this.moneySlider.value+"%)",this.saveMoneyInput.text=e*this.moneySlider.value/100+""},e.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭银行"),this.clearInput(),this.passwordInput.text="",App.ViewManager.closeView(this)},e.prototype.closePwdView=function(){return GamePlayerMgr.i.getPlayer().getIsPwdSeted()?void(this.pwdInput.visible=!1):void this.close()},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this)},e}(BaseEuiView);t.BankView=e,__reflect(e.prototype,"lobby.BankView")}(lobby||(lobby={}));var BasePanelView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/PanelSkin.exml",o}return __extends(e,t),e.prototype.setGroup=function(t,e){this.testGroup.width=t,this.testGroup.height=e},Object.defineProperty(e.prototype,"title",{get:function(){return this._text},set:function(t){this._text=t,this.titleText.text=this._text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=this._icon)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"btn",{get:function(){return this._btn},set:function(t){this._btn=t,this.button&&(this.button.visible=!0,this.button.source=this._btn)},enumerable:!0,configurable:!0}),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.closeBtnOnClick,this)},e.prototype.initData=function(){t.prototype.initData.call(this)},e.prototype.closeBtnOnClick=function(t){App.ViewManager.closeView(this)},e}(BaseEuiView);__reflect(BasePanelView.prototype,"BasePanelView");var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.onLoadedData,e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.icon.source=this.data.icon,this.title.text=this.data.title,this.dateLabel=this.data.date)},e.prototype.onLoadedData=function(){Log.trace("初始化完成"+this.data),this.content.visible=!1,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onLoadedData,this)},Object.defineProperty(e.prototype,"itemId",{get:function(){return this.data.id},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){},e}(eui.ItemRenderer);t.ActivityItemRender=e,__reflect(e.prototype,"lobby.ActivityItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),egret.log("dataChanged",this.data),this.data.icon&&(this.headImg.touchEnabled=!0,1==this.data.type&&(this.headImg.source=this.data.icon,this.headImg.visible=!0,this.headImgBox.touchEnabled=!1),2==this.data.type&&(this.headImgBox.source=this.data.icon,this.headImg.visible=!1,this.headImgBox.touchEnabled=!0),this.refreshSign())},e.prototype.refreshSign=function(){this.sign.visible=this.data.isSelected},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),this.data&&i==this.headImg&&(this.headImg.source=this.data.icon)},e}(eui.ItemRenderer);t.HeadImgItemRenderer=e,__reflect(e.prototype,"lobby.HeadImgItemRenderer")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsAddEvent=!1,e.armature=new DragonBonesArmatureContainer,e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.gameIcon.source=this.data.gameIcon,egret.log("图标信息",this.data),this.data.isOpen?(this.gameIcon.filters=void 0,this.gameIcon.touchEnabled=!1,this.updata.visible=HotUpdateMgr.getInstance().checkGameUpdate(this.data.key),this.addEvent()):(this.gameIcon.filters=[ColorFilters.FilterGray],this.gameIcon.touchEnabled=!1),this.data.gameIconAnim&&(this.gameIcon.visible=!1,this.showAnim())
},e.prototype.addEvent=function(){this._mIsAddEvent||(this._mIsAddEvent=!0,this.addEventListener(egret.Event.REMOVED,this.onRemove,this),this.triggerArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onIconBegin,this),this.triggerArea.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this),this.updata.visible&&(App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this)))},e.prototype.updateProgress=function(t){var i=t.gameName;if(i==this.data.key){this.progress.visible=!0,e.mMaxPro<0&&(e.mMaxPro=this.progressBar.width);var o=t.progress/t.total,n=t.progress/t.total*e.mMaxPro;e.mRectMask.width=n,this.progressBar.mask=e.mRectMask,this.progressGg.visible=o>.06&&.939>o,this.progressGg.visible&&(this.progressGg.x=28+n)}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Log.trace("icon初始化处理")},e.prototype.onIconBegin=function(){var t=this.gameIcon.visible?this.gameIcon:this.entranceAnim;egret.Tween.get(t).to({scaleX:.95,scaleY:.95},80).to({scaleX:1,scaleY:1},80)},e.prototype.enterGame=function(){return egret.log("clickIcon:",this.data.gameType,this.data.title),this.data.isOpen?void this.gameIn(this.data.key):void PromTipsView.getInstance().show("游戏暂未开放！")},e.prototype.gameIn=function(t){HotUpdateMgr.getInstance().checkGameUpdate(t)?HotUpdateMgr.getInstance().loadGameUpdate(t):(this.updateOver(t),GameModuleMgr.i.startGame(t))},e.prototype.updateOver=function(t){t==this.data.key&&(Log.trace(t,"更新完成"),this.updata.visible=!1,this.progress.visible=!1,App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this))},e.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED,this.onRemove,this),this.destroy()},e.prototype.showAnim=function(){if(this.data.gameIconAnim){this.armature.scaleX=226/378,this.armature.scaleY=223/378,Log.trace("showAnim",this.data.gameIconAnim);var t=RES.getRes(this.data.gameIconAnim+"_ske_json"),e=RES.getRes(this.data.gameIconAnim+"_tex_json"),i=RES.getRes(this.data.gameIconAnim+"_tex_png");App.DragonBonesFactory.initArmatureFile(t,i,e),this.entranceAnim.addChild(this.armature),this.armature.register(App.DragonBonesFactory.makeArmature("Armature",this.data.gameIconAnim,1),[this.data.gameIconAnim]),this.armature.play(this.data.gameIconAnim,0)}},e.prototype.destroy=function(){Log.trace("销毁 IconRenderer"),this.armature.destroy,this.armature=void 0,this._mIsAddEvent=!1,this.gameIcon.filters=void 0,this.triggerArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onIconBegin,this),this.triggerArea.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this)},e.mRectMask=new egret.Rectangle(0,0,155,30),e.mMaxPro=-1,e}(eui.ItemRenderer);t.IconRenderer=e,__reflect(e.prototype,"lobby.IconRenderer")}(lobby||(lobby={}));var IconView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Button);__reflect(IconView.prototype,"IconView");var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.onLoadedData,t),t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),console.log("dataChanged",this.data),this.data&&(this.dateLabel.text=this.data.date,this.title.text=this.data.title,this.label.selected=this.data.is_readed,this.icon.selected=this.data.is_readed)},i.prototype.refeshSign=function(t){console.log("更新标识"),this.label.selected=t,this.icon.selected=t},i.prototype.onLoadedData=function(){this.item_bg&&(this.item_bg.touchEnabled=!0),this.label&&(this.label.touchEnabled=!1,this.label.setUnSelected("message_check",113,41),this.label.setInSelected("message_checked",79,80)),this.icon&&(this.icon.touchEnabled=!1,this.icon.setUnSelected("message_mail_iconOpen",72,56),this.icon.setInSelected("message_mail_iconClose",67,67)),this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onLoadedData,this)},i.prototype.showMessage=function(e){App.ViewManager.open(t.LobbyViewConst.MessagePrompt,LayerManager.UI_Tips)},Object.defineProperty(i.prototype,"itemId",{get:function(){return this.data.id},enumerable:!0,configurable:!0}),i}(eui.ItemRenderer);t.MessageItemRender=e,__reflect(e.prototype,"lobby.MessageItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/lobby/skins/component/OtherButtonSkin.exml",e.name="share",e}return __extends(e,t),e.prototype.setBtnBg=function(t,e,i){this.btnBg.source=t,e&&(this.btnBg.width=e),i&&(this.btnBg.height=i)},e.prototype.setIcon=function(t,e,i){this.iconDisplay.source=t,e&&(this.btnBg.width=e),i&&(this.btnBg.height=i)},e.prototype.setClick=function(t){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickCancelEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickConfirmEvent,this),this.onClick=t},e.prototype.onClickEvent=function(t){console.log("点击开始"),console.log(t.currentTarget);var e=(t.currentTarget.width-.8*t.currentTarget.width)/2,i=(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:.8,scaleY:.8,x:e,y:i},40)},e.prototype.onClickCancelEvent=function(t){console.log("点击取消");(t.currentTarget.width-.8*t.currentTarget.width)/2,(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1,x:1,y:1},40)},e.prototype.onClickConfirmEvent=function(t){console.log("点击确认"),console.log(t.currentTarget.width);(t.currentTarget.width-.8*t.currentTarget.width)/2,(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1,x:1,y:1},40).call(this.onClickHandler,this,[t.currentTarget])},e.prototype.onClickHandler=function(t){this.onClick(t)},e.prototype.setArg=function(t){this.tempArg=t},e}(eui.Component);t.OtherButton=e,__reflect(e.prototype,"lobby.OtherButton")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="BankButtonSkin",e}return __extends(e,t),e.prototype.setImageBg=function(t,e){this.inSelected.width=t,this.unSelected.width=t-14,this.inSelected.height=null!=e?e:70,this.unSelected.height=null!=e?e:70},e.prototype.setImage=function(t,e,i,o,n,s){t&&(this.txt_inSelected.source=t),e&&(this.txt_unSelected.source=e),i&&(this.txt_inSelected.width=i,this.txt_unSelected.width=i),o&&(this.txt_inSelected.height=o,this.txt_unSelected.height=o),n&&(this.txt_inSelected.x=n,this.txt_unSelected.x=n),s&&(this.txt_inSelected.y=s,this.txt_unSelected.y=s)},e.prototype.setUnSelected=function(t,e,i){this.unSelected.source=t,this.unSelected.width=e,this.unSelected.height=i},e.prototype.setInSelected=function(t,e,i){this.inSelected.source=t,this.inSelected.width=e,this.inSelected.height=i},e.prototype.setName=function(t){this.name=t},e}(eui.ToggleButton);t.OtherToggle=e,__reflect(e.prototype,"lobby.OtherToggle")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.tx=new egret.TextField,e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Log.trace("测试富文本"),this.tx.width=400,this.tx.x=166,this.tx.y=20,this.tx.lineSpacing=10,this.tx.textColor=16777215,this.tx.fontFamily="微软雅黑",this.tx.textAlign=egret.HorizontalAlign.LEFT,this.tx.textFlow=[{text:"银联支付",style:{size:23,textColor:0}},{text:"   9999.99\n",style:{size:23,textColor:16750848}},{text:"12388773888df\n",style:{size:23,textColor:0}},{text:"2019-3-15 21:00:00\n",style:{size:23,textColor:0}},{text:"已支付\n",style:{size:23,textColor:0}}],this.addChild(this.tx)},e}(eui.ItemRenderer);t.RechargeRecordItemRender=e,__reflect(e.prototype,"lobby.RechargeRecordItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ExchangeReq=2007e3,t}();t.ExchangeConst=e,__reflect(e.prototype,"lobby.ExchangeConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.exchangeModel=new t.ExchangeModel(this),this.exchangeProxy=new t.ExchangeProxy(this,this.exchangeModel),this.exchangeView=new t.ExchangeView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Exchange,this.exchangeView),this.setModel(this.exchangeModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.ExchangeConst.ExchangeReq,this.onExchangeReq,this)},i.prototype.onExchangeReq=function(t){this.exchangeProxy.exchangeReq(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.exchangeProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.exchangeProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.exchangeModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.exchangeView.destroy(),this.exchangeProxy.destroy(),this.exchangeModel.destroy(),this.exchangeView=void 0,this.exchangeProxy=void 0,this.exchangeModel=void 0},i}(BaseController);t.ExchangeController=e,__reflect(e.prototype,"lobby.ExchangeController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/ExchangeSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.exchangeMoneyInput.restrict="0-9",this.exchangeMoneyInput.maxChars=8,this.tabBankCard.selected=!0,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.tabAlipay.setImage("exchange_alipay_sel","exchange_alipay_nor",155,30),this.tabBankCard.setImage("exchange_bankcard_sel","exchange_bankcard_nor",155,30);var e=GamePlayerMgr.i.getPlayer();this.currMoney_txt.text=""+App.CommonUtils.money2Str(e.getMoney()),this._timer=new egret.Timer(1e3,1),this.BankCardGroup.visible=!1,this.AddBankCardGroup.visible=!1},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.tabAlipay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabBankCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.add.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.add.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.add.addEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.exchangeMoneyInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.contentInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.effectButton(this.addAlipay,this.openAlipayManager,this),App.CommonUtils.effectButton(this.addBankCard,this.openBankCardManager,this),App.CommonUtils.effectButton(this.bankCardCloseBtn,this.hideBankCardManager,this),App.CommonUtils.effectButton(this.addBankCardBtn,this.openAddBankCard,this),App.CommonUtils.effectButton(this.addBankCardCloseBtn,this.hideAddBankCard,this),App.CommonUtils.effectButton(this.exchangeBtn,this.exchangeReq,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.bankCardCloseBtn,this.close,this),this._timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerEnd,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.tabAlipay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabBankCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.exchangeMoneyInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.removeButton(this.addAlipay),App.CommonUtils.removeButton(this.addBankCard),App.CommonUtils.removeButton(this.addBankCardBtn),App.CommonUtils.removeButton(this.bankCardCloseBtn),App.CommonUtils.removeButton(this.addBankCardCloseBtn),App.CommonUtils.removeButton(this.exchangeBtn),App.CommonUtils.removeButton(this.closeBtn),this._timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerEnd,this)},e.prototype.switchTab=function(t){t.currentTarget==this.tabAlipay&&this.tabAlipay.touchEnabled?(this.tabBankCard.selected=!1,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.contentInput.prompt="输入您的支付宝账号",this.exchangeType_text.text="支付宝账号",this.addAlipay.visible=!0,this.addBankCard.visible=!1,this.clearInput()):t.currentTarget==this.tabBankCard&&this.tabBankCard.touchEnabled&&(this.tabAlipay.selected=!1,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.contentInput.prompt="输入您的银行卡号",this.exchangeType_text.text="收款银行卡",this.addBankCard.visible=!0,this.addAlipay.visible=!1,this.clearInput())},e.prototype.checkInput=function(t){switch(t.currentTarget){case this.exchangeMoneyInput:Number(this.exchangeMoneyInput.text)>=Math.floor(Number(this.currMoney_txt.text))&&(this.exchangeMoneyInput.text=Math.floor(Number(this.currMoney_txt.text))+"",App.ScrollTxtTips.showTip("已达到最大值"));break;case this.contentInput:this.contentInput.text.length>19&&(App.ScrollTxtTips.showTip("最大输入长度为19位"),this.contentInput.text=this.contentInput.text.slice(0,19))}},e.prototype.clearInput=function(){this.exchangeMoneyInput.text=""},e.prototype.openAlipayManager=function(){Log.trace("支付宝管理")},e.prototype.openBankCardManager=function(){App.EffectUtils.showUI(this.BankCardGroup),this.BankCardGroup.visible=!0},e.prototype.hideBankCardManager=function(){this.BankCardGroup.visible=!1},e.prototype.openAddBankCard=function(){App.EffectUtils.showUI(this.AddBankCardGroup),this.AddBankCardGroup.visible=!0,this.BankCardGroup.visible=!1},e.prototype.hideAddBankCard=function(){this.AddBankCardGroup.visible=!1},e.prototype.changeExchangeMoney=function(t){var e;if(t.currentTarget==this.add?e=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100):t.currentTarget==this.reduce&&(e=-Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)),Number(this.exchangeMoneyInput.text)>=0){if(Number(this.exchangeMoneyInput.text)<0)return;Number(this.exchangeMoneyInput.text)+e>=App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())?this.exchangeMoneyInput.text=""+Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())):Number(this.exchangeMoneyInput.text)+e<=0?this.exchangeMoneyInput.text="":this.exchangeMoneyInput.text=""+(Number(this.exchangeMoneyInput.text)+e)}this.removeIncrementChange()},e.prototype.specialChange=function(t){t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:.9,scaleY:.9},40),this._timer.start(),t.currentTarget==this.add?(Log.trace("长按+"),this._optType=1):t.currentTarget==this.reduce&&(Log.trace("长按-"),this._optType=2)},e.prototype.specialChangeEnd=function(t){t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1},40),this.removeIncrementChange(),this._timer.stop(),this._timer.reset()},e.prototype.onTimerEnd=function(){App.TimerManager.doTimer(100,99,this.incrementChange.bind(this),this)},e.prototype.incrementChange=function(){if(!(Number(this.exchangeMoneyInput.text)>=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney()))||Number(this.exchangeMoneyInput.text)<=0)){var t;return 1==this._optType&&(t=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)),2==this._optType&&(t=-Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)),Number(this.exchangeMoneyInput.text)+t<=0?void(this.exchangeMoneyInput.text=""):void(this.exchangeMoneyInput.text=""+(Number(this.exchangeMoneyInput.text)+t))}},e.prototype.exchangeReq=function(){Log.trace("发送兑换请求"),App.ScrollTxtTips.showTip("兑换功能尚未实现")},e.prototype.removeIncrementChange=function(){Log.trace("停止增量"),App.TimerManager.removeAll(this)},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),App.EffectUtils.showUI(this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},e.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭兑换"),App.ViewManager.closeView(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._timer&&(this._timer.stop(),this._timer=null)},e}(BaseEuiView);t.ExchangeView=e,__reflect(e.prototype,"lobby.ExchangeView")}(lobby||(lobby={}));var LoadingConst=function(){function t(){}return t.SetProgress=10001,t}();__reflect(LoadingConst.prototype,"LoadingConst");var LoadingController=function(t){function e(){var e=t.call(this)||this;return e.loadingView=new LoadingView(e,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Loading,e.loadingView),App.ViewManager.open(MainViewConst.Loading,LayerManager.UI_Main),e.registerFunc(LoadingConst.SetProgress,e.setProgress,e),e}return __extends(e,t),e.prototype.setProgress=function(t,e){this.loadingView.setProgress(t,e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.ViewManager.destroy(MainViewConst.Loading),this.loadingView=void 0},e}(BaseController);__reflect(LoadingController.prototype,"LoadingController");var LoadingView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/LoadingUISkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.initDBRes("loading2"),this.armature=new DragonBonesArmatureContainer,this.loadingAnim.addChild(this.armature),this.armature.register(App.DragonBonesFactory.makeArmature("Armature","loading2",1),[e.Animation]),this.loadingProgress.maximum=100,this.loadingProgress.minimum=0,this.txtVer.text=""},e.prototype.initDBRes=function(t){var e=RES.getRes(t+"_ske_json"),i=RES.getRes(t+"_tex_png"),o=RES.getRes(t+"_tex_json");e&&i&&o?App.DragonBonesFactory.initArmatureFile(e,i,o):(Log.trace(e+i+o),egret.error("无法获取龙骨资源:",t,"!"))},e.prototype.setProgress=function(t,e){console.log(t/e*100),this.loadingProgress.value=Math.floor(t/e*100),this.updateLoadingEvent(this.loadingProgress.value+"%"),this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum,this.loadingAnim.x=this.progressBar.x,this.armature.play("loading2",0),this.loadingProgress.value>=100&&(this.armature.visible=!1)},e.prototype.testLoading=function(){this.loadingProgress.value+=1,this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum},e.prototype.updateVersion=function(){this.txtVer.text=GameBase.getMainVersion()},e.prototype.updateLoadingEvent=function(t){this.txtMsg.text=t},e.prototype.addEvent=function(){App.MessageCenter.addListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this)},e.prototype.removeEvent=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature.destroy(),this.parent&&this.parent.removeChild(this),this.armature=void 0},e.Animation="loading2",e}(BaseEuiView);__reflect(LoadingView.prototype,"LoadingView");var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=40001,t.ChangeNickName=40002,t}();t.LobbyConst=e,__reflect(e.prototype,"lobby.LobbyConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/LobbySkin.exml",App.MessageCenter.addListener("UserMoneyChange",o.refreshMoney,o),o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.OFF,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.ON,this.armature=new DragonBonesArmatureContainer,this.ddzArmature=new DragonBonesArmatureContainer,this.initBone("RechargeAnim",this.rechargeAnim,this.armature,"Armature"),this.uProclaim.init(this.getBaseController(),null,SceneConsts.Lobby),this.btnVIPLogin.visible=GamePlayerMgr.i.isVisiter,this.btnProxyEntrace.visible=!GamePlayerMgr.i.isVisiter,this.gameList.itemRenderer=t.IconRenderer,this.gameList.itemRendererSkinName="resource/lobby/skins/component/IconGameSkin.exml",this.scrollerItem.viewport=this.gameList},i.prototype.open=function(){e.prototype.open.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.uProclaim.addEvent(),this.lobby_headImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserInfo,this),this.hotGameTrigger.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHotGame,this),this.hotGameTrigger.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this);for(var t in this.btnGroup.$children){var i=this.btnGroup.$children[t];App.CommonUtils.effectButton(i,this.btnOnClick,this,{name:i.name})}App.CommonUtils.effectButton(this.customerService,this.btnOnClick,this,{name:this.customerService.name}),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this),App.CommonUtils.effectButton(this.btnVIPLogin,this.onVIPLogin,this),App.CommonUtils.effectButton(this.btnProxyEntrace,this.onProxyEntrace,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.uProclaim.removeEvent(),this.lobby_headImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserInfo,this),this.hotGameTrigger.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterHotGame,this),this.hotGameTrigger.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this);for(var t in this.btnGroup.$children)App.CommonUtils.removeButton(this.btnGroup.$children[t]);App.CommonUtils.removeButton(this.customerService),App.CommonUtils.removeButton(this.btnVIPLogin),App.CommonUtils.removeButton(this.btnProxyEntrace),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this)},i.prototype.playSoundEffect=function(){},i.prototype.btnOnClick=function(e){if(e)switch(e.name){case"recharge":Log.trace("打开充值"),App.ViewManager.open(t.LobbyViewConst.Recharge,LayerManager.UI_Popup);break;case"bank":Log.trace("打开保险箱"),App.ViewManager.open(t.LobbyViewConst.Bank,LayerManager.UI_Popup),R.sendPlayerAction("Lobbysafe_clicksafe");break;case"message":Log.trace("打开公告"),App.ViewManager.open(t.LobbyViewConst.Message,LayerManager.UI_Popup);break;case"activity":Log.trace("打开活动"),App.ViewManager.open(t.LobbyViewConst.Activity,LayerManager.UI_Popup);break;case"share":Log.trace("打开分享"),App.ViewManager.open(t.LobbyViewConst.Share,LayerManager.UI_Popup);break;case"setting":Log.trace("打开设置"),App.ViewManager.open(t.LobbyViewConst.Setting,LayerManager.UI_Popup);break;case"exchange":Log.trace("打开兑换"),App.ViewManager.open(t.LobbyViewConst.Exchange,LayerManager.UI_Popup);break;case"customerService":Log.trace("打开客服")}},i.prototype.onVIPLogin=function(){App.SceneManager.runScene(SceneConsts.Login,{isVipLogin:!0})},i.prototype.onProxyEntrace=function(){R.openUrl("http://10.1.101.120:501/")},i.prototype.openUserInfo=function(){Log.trace("打开个人中心"),App.SoundManager.playEffect("click_mp3"),App.ViewManager.open(t.LobbyViewConst.UserInfo)},i.prototype.refreshGameList=function(t){return t.refresh(),this.gameList.dataProvider=t,this.scrollerItem},i.prototype.initData=function(){e.prototype.initData.call(this);for(var t=new eui.ArrayCollection,i=GameModuleMgr.i.MoudleInfo,o=0;o<i.length;o++)i[o].isHotGame?(this.hotGameBtn.source=i[o].gameIcon+"_hot","brnn"==i[o].key?(this.hotGameBtn.x=75,this.hotGameBtn.width=299,this.hotGameBtn.height=440):"ddz"==i[o].key?(this.hotGameBtn.x=55,this.hotGameBtn.width=323,this.hotGameBtn.height=445):"fish"==i[o].key&&(this.hotGameBtn.x=55,this.hotGameBtn.width=320,this.hotGameBtn.height=439),this.hotGameInfo=i[o],this.hotGameBtn.anchorOffsetX=this.hotGameBtn.width/2,this.hotGameBtn.anchorOffsetY=this.hotGameBtn.height/2,this.hotGameBtn.x=this.hotGameBtn.anchorOffsetX+75,this.hotGameBtn.source="",this.initBone("ddzEntranceAnim",this.hotGameAnim,this.ddzArmature,"ddzEntranceAnim")):t.addItem(i[i[o].gameIndex]);this.refreshGameList(t)},i.prototype.changeLobbyHeadImg=function(t,e,i){this.refresh()},i.prototype.changeNickName=function(t){this.lobby_userName.text=t,GamePlayerMgr.i.getPlayer().setNickName(t)},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();this.lobby_headBox.source="ui_headBox_"+t.getAvatarBox(),this.lobby_headImg.source="ui_headImg_"+t.getAvatar(),this.lobby_userName.text=t.getNickName(),this.lobby_userMoney.text=""+App.CommonUtils.money2Str(t.getMoney())},i.prototype.refreshMoney=function(t){this.lobby_userMoney.text=App.CommonUtils.money2Str(t.balance)},i.prototype.onHotIconBegin=function(){egret.Tween.get(this.ddzArmature).to({scaleX:.98,scaleY:.98},80).to({scaleX:1,scaleY:1},80)},i.prototype.enterHotGame=function(){if(App.SoundManager.playEffect("click_mp3"),!this.hotGameInfo.isOpen)return void PromTipsView.getInstance().show("游戏暂未开放！");var t=this.hotGameInfo.key;HotUpdateMgr.getInstance().checkGameUpdate(t)?HotUpdateMgr.getInstance().loadGameUpdate(t):(this.updateOver(t),GameModuleMgr.i.startGame(t))},i.prototype.updateProgress=function(t){var e=t.gameName;if(e==this.hotGameInfo.key){this.progress.visible=!0,i.mMaxPro<0&&(i.mMaxPro=this.progressBar.width);var o=t.progress/t.total,n=t.progress/t.total*i.mMaxPro;i.mRectMask.width=n,this.progressBar.mask=i.mRectMask,this.progressGg.visible=o>.06&&.939>o,this.progressGg.visible&&(this.progressGg.x=28+n)}},i.prototype.updateOver=function(t){Log.trace(t,"更新完成"),this.progress.visible=!1},i.prototype.initBone=function(t,e,i,o){var n=RES.getRes(t+"_ske_json"),s=RES.getRes(t+"_tex_json"),r=RES.getRes(t+"_tex_png");App.DragonBonesFactory.initArmatureFile(n,r,s),e.addChild(i),i.register(App.DragonBonesFactory.makeArmature(o,t,1),[t]),i.play(t,0)},i.prototype.showIconAnim=function(t){for(var e=t,i=0;i<e.numElements;i++){e.getVirtualElementAt(i)}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.gameList.removeChildren(),this.uProclaim.destroy(),this.uImgBg.filters=null,App.TimerManager.removeAll(this),this.armature.destroy(),this.ddzArmature.destroy(),this.lobby_headBox.source="ui_headBox_1",this.lobby_headImg.source="ui_headImg_1",this.lobby_userName.text="",this.lobby_userMoney.text="",this.hotGameInfo=void 0,App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this)},i.prototype.waterEffect=function(t){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",i=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform vec2 center;","uniform vec3 params;","uniform float time;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float dist = distance(uv, center);","if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )","{","float diff = (dist - time);","float powDiff = 1.0 - pow(abs(diff*params.x), params.y);","float diffTime = diff  * powDiff;","vec2 diffUV = normalize(uv - center);","texCoord = uv + (diffUV * diffTime);","}","gl_FragColor = texture2D(uSampler, texCoord);","}"].join("\n"),o=new egret.CustomFilter(e,i,{center:{x:.5,y:.5},params:{x:10,y:.8,z:.1},time:0});t.filters=[o],App.TimerManager.doFrame(1,0,function(){o.uniforms.time+=.005,o.uniforms.time>1&&(o.uniforms.time=0)},this)},i.mRectMask=new egret.Rectangle(0,0,155,30),i.mMaxPro=-1,i}(BaseEuiView);t.LobbyView=e,__reflect(e.prototype,"lobby.LobbyView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.inits(),i.registers(),i.addListeners(),i.initFunc(),App.ViewManager.open(MainViewConst.Login),t&&t.isVipLogin&&App.ViewManager.open(LoginViewConst.LoginSecondar),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.loginModel=new t.LoginModel(this),this.loginProxy=new t.LoginProxy(this,this.loginModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.loginView=new t.LoginView(this,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Login,this.loginView),this.loginSecondaryView=new LoginSecondaryView(this,LayerManager.UI_Main),App.ViewManager.register(LoginViewConst.LoginSecondar,this.loginSecondaryView),this.registerView=new t.RegisterView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.Register,this.registerView),this.resetPwdView=new t.ResetLoginPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.ResetLoginPwd,this.resetPwdView)},i.prototype.initFunc=function(){this.registerFunc("LoginWeb",this.onLoginWeb,this)},i.prototype.onLoginWeb=function(t){this.loginProxy.loginWeb(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.loginProxy.addEvent()},i.prototype.removeListeners=function(){Log.trace("移除监听"),e.prototype.removeListeners.call(this),this.loginProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.loginModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.loginModel.destroy(),this.loginProxy.destroy(),this.loginView.destroy(),this.loginSecondaryView.destroy(),this.resetPwdView.destroy(),this.loginModel=void 0,this.loginProxy=void 0,this.loginView=void 0,this.loginSecondaryView=void 0,this.resetPwdView=void 0
},i}(BaseController);t.LoginController=e,__reflect(e.prototype,"lobby.LoginController")}(lobby||(lobby={}));var LoginSecondaryView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/LoginSecondarySkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this);var e=GamePlayerMgr.i.getAccount1(),i=GamePlayerMgr.i.getAccount2(),o=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.accountInput.text=e||"test001",this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.passwordInput.text=o||"123456",this.account1.label=e||"test001",this.account2.label=i||"test002",this.account1.name=o||"",this.account2.name=n||""},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.addEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.removeEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},e.prototype.onChangeInput=function(t){var e=t.currentTarget;e.text=App.StringUtils.rejectValue(e.text)},e.prototype.closeView=function(t){App.ViewManager.closeView(this)},e.prototype.showRegisterView=function(){App.ViewManager.open(LoginViewConst.Register)},e.prototype.showResetLoginPwdView=function(){App.ViewManager.open(LoginViewConst.ResetLoginPwd)},e.prototype.loginLobby=function(){var t=this.accountInput.text,e=this.passwordInput.text;return this.listBg.visible=!1,null==t||0==t.length?void ErrorManager.i.showError("用户名不能为空"):null==e||0==e.length?void ErrorManager.i.showError("密码不能为空"):e.length<6?void ErrorManager.i.showError("密码长度不能小于6个字符"):e.length>16?void ErrorManager.i.showError("密码长度不能大于16个字符"):(GamePlayerMgr.i.setAP(t,e),GamePlayerMgr.i.login(!1),void App.EasyLoading.showLoading())},e.prototype.selectAccount=function(t){Log.trace("点击了listBtn"),this.listBg.visible&&t.currentTarget!=this.listBtn&&(this.accountInput.text=t.currentTarget.label,this.passwordInput.text=t.currentTarget.name);var e=GamePlayerMgr.i.getAccount1(),i=GamePlayerMgr.i.getAccount2(),o=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.account1.label=e,this.account2.label=i,this.account1.name=o,this.account2.name=n,this.listBg.visible=!this.listBg.visible},e.prototype.clearPassword=function(){this.passwordInput.text=""},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiView);__reflect(LoginSecondaryView.prototype,"LoginSecondaryView");var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._mIpList=[],o.skinName="resource/lobby/skins/LoginSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.txtVer.text=GameBase.getMainVersion(),this.testInit()},e.prototype.testInit=function(){if(this.btn_list.visible=!1,this.server_list.visible=GameBase.IsTest&&e.IsNotChoose,GameBase.IsTest){var t=GameBase.GameServerIp;this.t0.text=t&&t.length>0?t.split(":")[0]:"10.1.101.59",e.IsNotChoose=!1,App.Socket.initServerUrl(GameBase.GameServerIp),t&&t.length>22&&(this.t0.text="备用");for(var i=0;i<e.IpList.length;i++){var o=this.creatBtn(i);this._mIpList.push(o),this.btn_list.addChild(o)}}},e.prototype.creatBtn=function(t){var i=new eui.Group;i.horizontalCenter=0,i.y=60*t,i.width=200,i.height=56,i.touchChildren=!1;var o=new eui.Rect;o.width=160,o.height=45,o.ellipseWidth=o.ellipseHeight=20,o.horizontalCenter=o.verticalCenter=0,o.fillColor=3902981,i.addChild(o);var n=new eui.Label;return n.horizontalCenter=n.verticalCenter=0,n.size=20,n.text=e.IpList[t].split(":")[0],i.addChild(n),i.name=e.IpList[t],i},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.memberLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var e=0;e<this._mIpList.length;e++)this._mIpList[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.memberLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var e=0;e<this._mIpList.length;e++)this._mIpList[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this)},e.prototype.openSecondary=function(){App.ViewManager.open(LoginViewConst.LoginSecondar)},e.prototype.loginLobby=function(){GamePlayerMgr.i.login(!0),App.EasyLoading.showLoading()},e.prototype.onTestBtnTap=function(t){var e=t.currentTarget;if(this.btn_list.visible=e==this.btn0,!this.btn_list.visible){var i=e.getChildAt(1).text;this.t0.text=i,console.log("选择服务器:",e.name),GameBase.saveGameServerIp(e.name),App.Socket.initServerUrl(GameBase.GameServerIp)}},e.prototype.destroy=function(){for(t.prototype.destroy.call(this);this._mIpList.length;){var e=this._mIpList.pop();R.removeFromParent(e)}},e.IsNotChoose=!0,e.IpList=["10.1.101.59:12001","10.1.101.6:12001","10.1.101.12:12001","10.1.101.114:12001","10.1.101.208:12001","10.1.101.151:12001","10.1.101.181:12001","www.haomaicai365.com/g"],e}(BaseEuiView);t.LoginView=e,__reflect(e.prototype,"lobby.LoginView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.DeleteItem=30021,t.ShowContent=30022,t.MessageListReq=30023,t.SingleMessageReq=30024,t}();t.MessageConst=e,__reflect(e.prototype,"lobby.MessageConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.initFunc(),i.addListeners(),i.messageView=new t.MessageView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Message,i.messageView),i.messagePromtView=new t.MessagePromptView(i,LayerManager.UI_Message),App.ViewManager.register(t.LobbyViewConst.MessagePrompt,i.messagePromtView),Log.trace("注册公告"),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.messageModel=new t.MessageModel(this),this.messageProxy=new t.MessageProxy(this,this.messageModel),this.setModel(this.messageModel)},i.prototype.initFunc=function(){this.registerFunc(t.MessageConst.DeleteItem,this.deletMessageItemReq,this),this.registerFunc(t.MessageConst.ShowContent,this.showContent,this),this.registerFunc(t.MessageConst.MessageListReq,this.onMessageListReq,this),this.registerFunc(t.MessageConst.SingleMessageReq,this.onSingleMessageReq,this)},i.prototype.onMessageListReq=function(t,e){this.messageProxy.messageListReq(t,e)},i.prototype.onSingleMessageReq=function(t,e){this.messageProxy.singleMessageReq(t,e)},i.prototype.deletMessageItemReq=function(t,e){this.messageProxy.onDeleteMessageReq(t,e)},i.prototype.showContent=function(t){this.messagePromtView.showContent(t)},i.prototype.getMsgType=function(){return this.messageView.msgType},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.messageProxy.addEvent()},i.prototype.removeListeners=function(){this.messageProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.messageModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.messageView.destroy(),this.messagePromtView.destroy(),this.messageProxy.destroy(),this.messageModel.destroy(),this.messageView=void 0,this.messagePromtView=void 0,this.messageProxy=void 0,this.messageModel=void 0},i}(BaseController);t.MessageController=e,__reflect(e.prototype,"lobby.MessageController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/component/PromptSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.deleteBtn,this.deleteMessage,this),App.CommonUtils.effectButton(this.closeBtn2,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.deleteBtn),App.CommonUtils.removeButton(this.closeBtn2)},i.prototype.deleteMessage=function(){var e=this.getBaseController();this.applyFunc(t.MessageConst.DeleteItem,{token:GamePlayerMgr.i.getPlayer().getToken(),id:this.currItemId},e.getMsgType()),App.ViewManager.closeView(this)},i.prototype.showContent=function(t){this.title.text=t.title,this.content.text=t.content,this.currItemId=t.id},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭弹出消息"),App.ViewManager.closeView(this)},i.prototype.clearContent=function(){this.title.text="",this.content.text=""},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.MessagePromptView=e,__reflect(e.prototype,"lobby.MessagePromptView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/MessageViewSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabMailBtn.setImage("messageTab_mail_sel","messageTab_mail_nor"),this.tabAnnouBtn.setImage("messageTab_annouce_sel","messageTab_annouce_nor"),this.tabAnnouBtn.selected=!0,this.tabMailBtn.touchEnabled=!this.tabMailBtn.selected,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.optType=2,this.tempCollection=new eui.ArrayCollection,this.tempList.itemRenderer=t.MessageItemRender;var i=new eui.VerticalLayout;this.tempList.layout=i,this.scrollerMessage.viewport=this.tempList,this.scrollerMessage.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerMessage.scrollPolicyH=eui.ScrollPolicy.OFF,this.confirmOpt()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.tabMailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabAnnouBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.MessageCenter.addListener("OnNoticeListReqBack",this.createList,this),App.MessageCenter.addListener("onMailListAck",this.createList,this),App.MessageCenter.addListener("onSingleNoticeReqBack",this.showSingleAnnou,this),App.MessageCenter.addListener("onSingleMailAck",this.showSingleAnnou,this),App.MessageCenter.addListener("onDeleteNoticeAck",this.deleteMessageItem,this),App.MessageCenter.addListener("onDeleteMailAck",this.deleteMessageItem,this),this.tempList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this),this.scrollerMessage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.tabMailBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabAnnouBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.removeButton(this.closeBtn),App.MessageCenter.removeListener("OnNoticeListReqBack",this.createList,this),App.MessageCenter.removeListener("onMailListAck",this.createList,this),App.MessageCenter.removeListener("onSingleNoticeReqBack",this.showSingleAnnou,this),App.MessageCenter.removeListener("onSingleMailAck",this.showSingleAnnou,this),App.MessageCenter.removeListener("onDeleteNoticeAck",this.deleteMessageItem,this),App.MessageCenter.removeListener("onDeleteMailAck",this.deleteMessageItem,this),this.tempList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this),this.scrollerMessage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.switchTab=function(t){t.currentTarget==this.tabMailBtn&&this.tabMailBtn.touchEnabled?(this.tabAnnouBtn.selected=!1,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.tabMailBtn.touchEnabled=!this.tabMailBtn.selected,this.optType=1):t.currentTarget==this.tabAnnouBtn&&this.tabAnnouBtn.touchEnabled&&(this.tabMailBtn.selected=!1,this.tabMailBtn.touchEnabled=!this.tabMailBtn.selected,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.optType=2),this.confirmOpt()},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭消息"),App.ViewManager.closeView(this)},i.prototype.createList=function(t){this.tempCollection.refresh();var e=t;Log.trace("创建列表",e),1==this.optType&&(this.nowMailPage=e.nowpage,this.totalMailPage=e.totalpages),2==this.optType&&(this.nowAnnoucePage=e.nowpage,this.totalAnnoucePage=e.totalpages);var i=this.getBaseController().getModel(),o=this.initListData(e);i.setListData(e,this.optType),this.tempCollection.replaceAll(o),this.tempList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.deleteMessageItem=function(t){var e=this.getBaseController().getModel();this.tempCollection.getItemAt(this.tempList.selectedIndex)&&(e.deleteSingleData(t.deleted_id,this.optType),e.deleteListData(this.tempList.selectedIndex,this.optType),this.tempCollection.removeItemAt(this.tempList.selectedIndex))},i.prototype.initListData=function(t){for(var e=[],i=0;i<t.list.length;i++)e[i]={title:t.list[i].title,date:App.DateUtils.getFormatBySecond(1e3*Number(t.list[i].created_at),2),id:t.list[i].id,is_readed:t.list[i].is_readed};return e},i.prototype.confirmOpt=function(){var e=this.getBaseController().getModel(),i={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};this.tempCollection.refresh(),1==this.optType?e.getListData(this.optType)?this.createList(e.getListData(this.optType)):this.applyFunc(t.MessageConst.MessageListReq,i,this.optType):2==this.optType&&(e.getListData(this.optType)?this.createList(e.getListData(this.optType)):this.applyFunc(t.MessageConst.MessageListReq,i,this.optType))},i.prototype.onAnnouList=function(e){var i=this.tempList.selectedIndex,o=this.tempList.getElementAt(i);o.data.is_readed=!0,o.refeshSign(!0);var n=this.getBaseController().getModel();n.getListData(this.optType).list[i].is_readed=!0,n.getData(o.itemId,this.optType)?this.showSingleAnnou(n.getData(o.itemId,this.optType)):this.applyFunc(t.MessageConst.SingleMessageReq,{token:GamePlayerMgr.i.getPlayer().getToken(),id:o.itemId},this.optType)},i.prototype.showSingleAnnou=function(e){this.applyFunc(t.MessageConst.ShowContent,e),App.ViewManager.open(t.LobbyViewConst.MessagePrompt,LayerManager.UI_Tips)},i.prototype.nextPage=function(){if(!(this.scrollerMessage.viewport.scrollV+this.scrollerMessage.height<this.scrollerMessage.viewport.contentHeight&&this.scrollerMessage.viewport.scrollV>0)){if(1==this.optType&&this.nowMailPage<this.totalMailPage){this.nowMailPage=this.nowMailPage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:this.nowMailPage};this.applyFunc(t.MessageConst.MessageListReq,e,this.optType)}if(2==this.optType&&this.nowAnnoucePage<this.totalAnnoucePage){this.nowAnnoucePage=this.nowAnnoucePage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:this.nowAnnoucePage};this.applyFunc(t.MessageConst.MessageListReq,e,this.optType)}}},Object.defineProperty(i.prototype,"msgType",{get:function(){return this.optType},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.MessageView=e,__reflect(e.prototype,"lobby.MessageView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.RechargeTypeReq=2001e3,t.RechargeReq=2001001,t.RechargeRecordReq=2001002,t}();t.RechargeConst=e,__reflect(e.prototype,"lobby.RechargeConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.rechargeModel=new t.RechargeModel(this),this.rechargeProxy=new t.RechargeProxy(this,this.rechargeModel),this.rechargeView=new t.RechargeView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Recharge,this.rechargeView),this.setModel(this.rechargeModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.RechargeConst.RechargeTypeReq,this.onRechargeTypeReq,this),this.registerFunc(t.RechargeConst.RechargeReq,this.onRechargeMoneyReq,this),this.registerFunc(t.RechargeConst.RechargeRecordReq,this.onRechargeRecordReq,this)},i.prototype.onRechargeTypeReq=function(){this.rechargeProxy.rechargeTypeReq()},i.prototype.onRechargeMoneyReq=function(t){this.rechargeProxy.rechargeMoneyReq(t)},i.prototype.onRechargeRecordReq=function(){this.rechargeProxy.rechargeRecodReq()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.rechargeProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.rechargeProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.rechargeModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.rechargeView.destroy(),this.rechargeProxy.destroy(),this.rechargeModel.destroy(),this.rechargeView=void 0,this.rechargeProxy=void 0,this.rechargeModel=void 0},i}(BaseController);t.RechargeController=e,__reflect(e.prototype,"lobby.RechargeController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.toggleBtns=[],o.tabBtns={},o.inputValue=[100,300,500,1e3,1500,3e3,5e3,9999],o.skinName="RechargeSkin",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("初始化UI"),this.recordGroup.visible=!1,this.rechargeContent.visible=!1,this.recordCollection=new eui.ArrayCollection,this.recordList.itemRenderer=t.RechargeRecordItemRender},i.prototype.createTabBtn=function(e){if(Log.trace("createTabBtn",e),!e)return void(this.rechargeContent.visible=!1);this.rechargeContent.visible=!0;for(var i={alipay:"rechargeTab_alipay1_",alipay_fix:"rechargeTab_alipay_",online:"rechargeTab_bankUnity_",wepay_card:"rechargeTab_wechat2bankcard_"},o=0;o<e.length;o++){var n=new t.OtherToggle,s=e[o].pay_code;n.setImage(i[s]+"sel",i[s]+"nor"),n.setName(s),n.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tabBtns[e[o].pay_code]=n,this.tabBtnGroup.addChild(n)}for(var r in this.tabBtnGroup.$children)this.toggleBtns.push(this.tabBtnGroup.$children[r]);switch(this.toggleBtns[0].selected=!0,this.currPayChanelName=this.toggleBtns[0].name,this.currPayChanelName){case"alipay":Log.trace("打开支付宝充值"),this.small_title.source="recharge_sTitle_alipay1";break;case"online":Log.trace("打开银联充值"),this.small_title.source="recharge_sTitle_bankUnity";break;case"alipay_fix":Log.trace("打开支付宝固额"),this.small_title.source="rechargeTab_alipay_"}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.recordCloseBtn,this.closeRecord,this),App.CommonUtils.effectButton(this.confirmBtn,this.onConfirm,this),App.CommonUtils.effectButton(this.clear,this.onClearInput,this),App.MessageCenter.addListener("rechargeTypeAck",this.createTabBtn,this),this.rechargeMoneyInput.addEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var i=this.numInput.$children[t];App.CommonUtils.effectButton(i,this.onNumBtnClick,this,this.inputValue[t])}},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.recordCloseBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.clear),App.MessageCenter.removeListener("rechargeTypeAck",this.createTabBtn,this),this.rechargeMoneyInput.removeEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var i=this.numInput.$children[t];App.CommonUtils.removeButton(i)}for(var t in this.tabBtnGroup.$children){var i=this.tabBtnGroup.$children[t];i.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this)}},i.prototype.open=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i),Log.trace("打开界面"),this.applyFunc(t.RechargeConst.RechargeTypeReq),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)}),console.log("关闭充值")},i.prototype.onConfirm=function(){var e=this.getBaseController(),i=e.getModel(),o={pay_channel:i.getCurrPayChanel(this.currPayChanelName),money:Number(this.rechargeMoneyInput.text)};this.rechargeMoneyInput.text&&this.applyFunc(t.RechargeConst.RechargeReq,o)},i.prototype.onNumBtnClick=function(t){Log.trace("value",t),this.promptDisplay.visible=!1,Number(this.rechargeMoneyInput.text)+t<1e4?this.rechargeMoneyInput.text=Number(this.rechargeMoneyInput.text)+t+"":(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},i.prototype.toggleChangeHandler=function(t){Log.trace("tabBtn绑定事件");for(var e=0;e<this.toggleBtns.length;e++){var i=this.toggleBtns[e];i.selected=i==t.target}var o=t.currentTarget;switch(this.currPayChanelName=o.name,o.name){case"alipay":Log.trace("打开支付宝充值"),this.small_title.source="recharge_sTitle_alipay1";break;case"online":Log.trace("打开银联充值"),this.small_title.source="recharge_sTitle_bankUnity";break;case"alipay_fix":Log.trace("打开支付宝固额"),this.small_title.source="recharge_sTitle_alipay2";break;case"record":Log.trace("打开充值记录")}},i.prototype.onEditableInput=function(){this.promptDisplay.visible=!1,Log.trace("数值改变",this.rechargeMoneyInput.text),Number(this.rechargeMoneyInput.text)>1e4&&(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},i.prototype.onEditableOut=function(){this.rechargeMoneyInput.text||(this.promptDisplay.visible=!0,Number(this.rechargeMoneyInput.text)>=1e4&&(this.rechargeMoneyInput.text="10000"))},i.prototype.onCreateRecordList=function(t){Log.trace("onCreateRecordList",t)},i.prototype.initRecordListData=function(t){var e=[];return e},i.prototype.onClearInput=function(){this.rechargeMoneyInput.text="",this.promptDisplay.visible=!0},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.toggleBtns.length=0,this.tabBtnGroup.removeChildren(),this.onClearInput(),App.ViewManager.closeView(this)},i.prototype.openRecord=function(){this.recordGroup.visible=!0,this.applyFunc(t.RechargeConst.RechargeRecordReq),this.rechargeMainGroup.cacheAsBitmap=!0},i.prototype.closeRecord=function(){this.recordGroup.visible=!1,this.rechargeMainGroup.cacheAsBitmap=!1},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.RechargeView=e,__reflect(e.prototype,"lobby.RechargeView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/RegisterSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.tab_normalRegistBtn.setImage("setting_normalRegister_sel","setting_normalRegister_nor",136,36),this.tab_safeRegistBtn.setImage("setting_safeRegister_sel","setting_safeRegister_nor",136,36),this.tab_normalRegistBtn.selected=!0,this.tab_normalRegistBtn.touchEnabled=!this.tab_normalRegistBtn.selected,this.tab_safeRegistBtn.touchEnabled=!this.tab_safeRegistBtn.selected,this.getVerifyBtn.visible=!1,this.verifyCountdown.visible=!1},i.prototype.initData=function(){e.prototype.initData.call(this),this.codeData={0:"1wqe",1:"g2qe",2:"as2d",3:"kl24",4:"1rtu",5:"q14k",6:"7y6t",7:"hj4e",8:"88sb",9:"ghjk",10:"1lk7"}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.tab_normalRegistBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tab_safeRegistBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.effectButton(this.getVerifyBtn,this.getVerify,this),App.CommonUtils.effectButton(this.changeBtn,this.changeVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.tab_normalRegistBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tab_safeRegistBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.removeButton(this.getVerifyBtn),App.CommonUtils.removeButton(this.changeBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn)},i.prototype.switchTab=function(t){t.currentTarget==this.tab_normalRegistBtn&&this.tab_normalRegistBtn.touchEnabled?(this.tab_safeRegistBtn.selected=!1,this.verifyInput.width=90,this.checkCodeBg.visible=!0,this.checkCode.visible=!0,this.getVerifyBtn.visible=!1,this.changeBtn.visible=!0,this.tab_safeRegistBtn.touchEnabled=!this.tab_safeRegistBtn.selected,this.tab_normalRegistBtn.touchEnabled=!this.tab_normalRegistBtn.selected,this.accountInput.prompt="6~12位包含英文大小写和数字",this.accountInput.restrict="a-z,A-z,0-9",this.accountInput.maxChars=12):t.currentTarget==this.tab_safeRegistBtn&&this.tab_safeRegistBtn.touchEnabled&&(this.tab_normalRegistBtn.selected=!1,this.verifyInput.width=158,this.checkCodeBg.visible=!1,this.checkCode.visible=!1,this.getVerifyBtn.visible=!0,this.changeBtn.visible=!1,this.tab_normalRegistBtn.touchEnabled=!this.tab_normalRegistBtn.selected,this.tab_safeRegistBtn.touchEnabled=!this.tab_safeRegistBtn.selected,this.accountInput.prompt="请输入手机号或邮箱",this.accountInput.restrict="@,.,a-z,A-z,0-9",this.accountInput.maxChars=36),this.verifyInput.text=""},i.prototype.getVerify=function(){if(!App.StringUtils.checkMobile(this.accountInput.text)&&!App.StringUtils.checkEmail(this.accountInput.text))return void App.ScrollTxtTips.showTip("输入的电话号码或邮箱格式不正确，请重新输入");if(!this.passwordInput.text||this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的密码");if(!this.accountInput.text||this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的账号");App.ScrollTxtTips.showTip("验证码已发送到手机或邮箱中，请查看"),this.verifyCountdown.visible=!0,this.getVerifyBtn.enabled=!1;var t=1;App.TimerManager.doTimer(1e3,30,function(){this.verifyCountdown.text="("+(30-t)+")",t++,t>=30&&(t=1,this.verifyCountdown.visible=!1,this.getVerifyBtn.enabled=!0)},this),Log.trace("获取验证码")},i.prototype.changeVerify=function(){Log.trace(Math.ceil(10*Math.random())),Log.trace(this.codeData[0]),this.checkCode.text=this.codeData[Math.ceil(10*Math.random())]},i.prototype.confirm=function(){Log.trace("提交信息");var t=this.tab_normalRegistBtn.selected?1:2;if(!this.accountInput.text||!this.passwordInput.text)return void App.ScrollTxtTips.showTip("账号或密码不能为空");if(this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("账号长度不能少于6位");if(this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("密码长度不能少于6位");if(this.verifyInput.text!=this.checkCode.text){if(2!=t)return void App.ScrollTxtTips.showTip("验证码错误请重新输入");this.verifyInput.text="1234"}var e={loginame:this.accountInput.text,password:this.passwordInput.text,registerType:t,captcha:this.verifyInput.text,deviceid:GameBase.getDeviceId};this.applyFunc("RegisterAccount",e)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];Log.trace("关闭注册账号"),App.ControllerManager.applyFunc(t.LobbyControllerConst.Setting,t.SettingConst.CloseRegister),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.RegisterView=e,__reflect(e.prototype,"lobby.RegisterView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ResetLPSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getverify_phone,this.getVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.phoneNum_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.newPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getverify_phone),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),this.phoneNum_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.newPassword_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},i.prototype.checkInput=function(t){App.StringUtils.isChinese(this.phoneNum_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.phoneNum_input.text=""),App.StringUtils.isChinese(this.newPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.newPassword_input.text="")},i.prototype.getVerify=function(){Log.trace("获取验证码")},i.prototype.confirm=function(){Log.trace("提交信息");
var e={token:GamePlayerMgr.i.getPlayer().getToken(),loginame:this.phoneNum_input.text,password:this.newPassword_input.text,captha:"1234"};this.applyFunc(t.SettingConst.ResetPassword,e)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭重置登录密码"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ResetLoginPasswordView=e,__reflect(e.prototype,"lobby.ResetLoginPasswordView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ResetMPSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getverify_phone,this.getVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.newPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getverify_phone),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),this.newPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},i.prototype.checkInput=function(){App.StringUtils.isChinese(this.newPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.newPassword_input.text="")},i.prototype.getVerify=function(){Log.trace("获取验证码")},i.prototype.confirm=function(){if(!this.phoneVerify_input.text)return void App.ScrollTxtTips.showTip("请输入验证码");if(!this.newPassword_input.text)return void App.ScrollTxtTips.showTip("请输入新密码");var e={token:GamePlayerMgr.i.getPlayer().getToken(),password:this.newPassword_input.text};this.applyFunc(t.SettingConst.ResetMoneyPassword,e)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭重置资金密码"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ResetMoneyPasswordView=e,__reflect(e.prototype,"lobby.ResetMoneyPasswordView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.CloseRegister=80001,t.ResetPassword=80002,t.ResetMoneyPassword=80003,t}();t.SettingConst=e,__reflect(e.prototype,"lobby.SettingConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return Log.trace("注册设置"),t.inits(),t.registers(),t.addListeners(),t.initFunc(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.settingModel=new t.SettingModel(this),this.settingProxy=new t.SettingProxy(this,this.settingModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.settingView=new t.SettingView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Setting,this.settingView),this.resetMPView=new t.ResetMoneyPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ResetMoneyPassword,this.resetMPView),this.resetLPView=new t.ResetLoginPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ResetLoginPassword,this.resetLPView),this.registerView=new t.RegisterView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Register,this.registerView)},i.prototype.initFunc=function(){this.registerFunc(t.SettingConst.CloseRegister,this.settingView.closeRegister,this.settingView),this.registerFunc("RegisterAccount",this.onRegister,this),this.registerFunc(t.SettingConst.ResetPassword,this.onResetLoginPassword,this),this.registerFunc(t.SettingConst.ResetMoneyPassword,this.onResetMoneyPassword,this),this.registerFunc("WebLogOut",this.onLogOut,this)},i.prototype.onRegister=function(t){this.settingProxy.onRegister(t)},i.prototype.onResetLoginPassword=function(t){this.settingProxy.onResetLoginPassword(t)},i.prototype.onResetMoneyPassword=function(t){this.settingProxy.onResetMoneyPwd(t)},i.prototype.onLogOut=function(t){this.settingProxy.onWebLogOut(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.settingProxy.addEvent()},i.prototype.removeListeners=function(){this.settingProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.settingModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.settingView.destroy(),this.resetMPView.destroy(),this.resetLPView.destroy(),this.registerView.destroy(),this.settingProxy.destroy(),this.settingModel.destroy(),this.settingView=void 0,this.resetMPView=void 0,this.resetLPView=void 0,this.registerView=void 0,this.settingProxy=void 0,this.settingModel=void 0},i}(BaseController);t.SettingController=e,__reflect(e.prototype,"lobby.SettingController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.currview=[],o.skinName="resource/lobby/skins/SettingSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.musicSetting.setImage("settingTab_music_nor","settingTab_music_sel",140,37),this.registerAccount.setImage("settingTab_register_nor","settingTab_register_sel",140,37),this.switchAccount.setImage("settingTab_switchAccoun_nor","settingTab_switchAccoun_sel",140,37),this.passwordManager.setImage("settingTab_password_nor","settingTab_password_sel",140,37),this.exit.setImage("settingTab_exit_nor","settingTab_exit_sel",140,37),this.specialEffect.selected=!0,this.musicSetting.selected=!0,this.musicSetting.touchEnabled=!1,this.lastTarget=this.musicSetting,this.hSliderMusic.minimum=0,this.hSliderMusic.maximum=100,this.hSliderMusic.track.mask=this.hSliderMusic.trackHighlight,this.hSliderMusic.value=100*App.SoundManager.getBgVolume(),this.hSliderEffect.minimum=0,this.hSliderEffect.maximum=100,this.hSliderEffect.track.mask=this.hSliderEffect.trackHighlight,this.hSliderEffect.value=100*App.SoundManager.getEffectVolume(),this.lastView=this.content_sound,this.txtVer.text="版本号: "+GameBase.getMainVersion(),this.btn_main.removeChildAt(1),GamePlayerMgr.i.isVisiter&&this.btn_main.removeChildAt(2)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t in this.btn_main.$children)this.btn_main.$children[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.mainBtnOnClick,this);App.CommonUtils.effectButton(this.resetLoginPassword,this.resetLP,this),App.CommonUtils.effectButton(this.resetMoneyPassword,this.resetMP,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.account1,this.switchLogin,this,1),App.CommonUtils.effectButton(this.account2,this.switchLogin,this,2),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.openRegister,this),this.hSliderMusic.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.hSliderEffect.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.voice_off.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.voice_on.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_off.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_on.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),App.MessageCenter.addListener("onWebLogOutAck",this.loginOut,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t in this.btn_main.$children)this.btn_main.$children[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mainBtnOnClick,this);App.CommonUtils.removeButton(this.resetLoginPassword),App.CommonUtils.removeButton(this.resetMoneyPassword),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.account1),App.CommonUtils.removeButton(this.account2),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.openRegister,this),this.hSliderMusic.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.hSliderEffect.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.voice_off.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.voice_on.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_off.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_on.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),App.MessageCenter.removeListener("onWebLogOutAck",this.loginOut,this)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭设置"),App.ViewManager.closeView(this)},i.prototype.mainBtnOnClick=function(e){if(Log.trace(e.$currentTarget.name),e.currentTarget){switch(e.currentTarget){case this.musicSetting:Log.trace("打开音乐设置"),this.switchMainBtn(this.content_sound);break;case this.registerAccount:Log.trace("打开注册设置"),this.switchMainBtn(this.content_register),App.ViewManager.open(t.LobbyViewConst.Register,LayerManager.UI_Popup);break;case this.switchAccount:Log.trace("切换账号"),this.refreshAC(),this.switchMainBtn(this.content_account);break;case this.passwordManager:Log.trace("密码管理"),this.switchMainBtn(this.content_password);break;case this.exit:Log.trace("退出登录"),this.switchMainBtn(this.content_exit),this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1,PromTipsView.getInstance().show("是否退出登录",function(){var t=GamePlayerMgr.i.getPlayer(),e=GamePlayerMgr.i.isVisiter,i={usertype:e?2:1,loginame_or_deviceid:e?GameBase.getDeviceId():t.getLoginame(),uid:t.getUserId(),token:t.getToken()};this.applyFunc("WebLogOut",i)},function(){this.closeRegister()},this,!0)}e.currentTarget.touchEnabled=!1,this.lastTarget=e.currentTarget}},i.prototype.soundBtnHandler=function(t){switch(t.currentTarget){case this.voice_off:this.hSliderMusic.value=0,App.SoundManager.setBgOn(!1);break;case this.voice_on:this.hSliderMusic.value=100,App.SoundManager.setBgOn(!0);break;case this.music_off:this.hSliderEffect.value=0,App.SoundManager.setEffectOn(!1);break;case this.music_on:this.hSliderEffect.value=100,App.SoundManager.setEffectOn(!0)}},i.prototype.switchMainBtn=function(t){t.visible=!0,this.lastView.visible=!1,this.lastView=t,this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1},i.prototype.onChangeValue=function(t){var e;if(t.currentTarget)switch(t.currentTarget){case this.hSliderMusic:Log.trace("改变音量"),e=this.hSliderMusic.value/100,App.SoundManager.setBgVolume(e);break;case this.hSliderEffect:e=this.hSliderEffect.value/100,App.SoundManager.setEffectVolume(e)}},i.prototype.resetLP=function(){App.ViewManager.open(t.LobbyViewConst.ResetLoginPassword,LayerManager.UI_Popup)},i.prototype.resetMP=function(){App.ViewManager.open(t.LobbyViewConst.ResetMoneyPassword,LayerManager.UI_Popup)},i.prototype.openRegister=function(){App.ViewManager.open(t.LobbyViewConst.Register,LayerManager.UI_Popup)},i.prototype.refreshAC=function(){function t(t,e,i){e&&e.length>0&&(t.getChildAt(i).texture=RES.getRes(e))}var e=GamePlayerMgr.i,i=e.getAccount1(),o=e.getAccount2(),n=o&&o.length>0;this.ugAccount1.horizontalCenter=n?-131:0,this.ugAccount2.horizontalCenter=131,this.ugAccount2.visible=n,this.txtAc1.text=""+(i?i:e.getPlayer().getNickName()),this.txtAc2.text=""+o,this.accountStatus2.visible=!1,t(this.account1,e.getAcIcon1(),0),t(this.account1,e.getAcIconRound1(),1),t(this.account2,e.getAcIcon2(),0),t(this.account2,e.getAcIconRound2(),1),this.account2._mAccount=2,""==e.mCurrAccount&&i&&(t(this.account2,e.getAcIcon1(),0),t(this.account2,e.getAcIconRound1(),1),this.ugAccount1.visible=!1,this.ugAccount2.visible=!0,this.ugAccount2.horizontalCenter=0,this.txtAc2.text=""+i,this.account2._mAccount=1)},i.prototype.switchLogin=function(t,e){Log.trace("switchLogin",t),2==t?GamePlayerMgr.i.changeLogin(this.account2._mAccount):ErrorManager.i.showError("账号当前正在使用！")},i.prototype.closeRegister=function(){this.musicSetting.selected=!0,this.musicSetting.touchEnabled=!1,this.content_sound.visible=!0,this.lastView.visible=!1,this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1,this.lastTarget=this.musicSetting,this.lastView=this.content_sound},i.prototype.loginOut=function(){this.closeView(),App.SceneManager.runScene(SceneConsts.Login)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.account1.getChildAt(0).texture=void 0,this.account1.getChildAt(1).texture=void 0,this.account2.getChildAt(0).texture=void 0,this.account2.getChildAt(1).texture=void 0},i}(BaseEuiView);t.SettingView=e,__reflect(e.prototype,"lobby.SettingView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return Log.trace("注册分享"),i.shareview=new t.ShareView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Share,i.shareview),i}return __extends(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shareview.destroy(),this.shareview=void 0},i}(BaseController);t.ShareController=e,__reflect(e.prototype,"lobby.ShareController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/ShareSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.share_copy,this.copyID,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.share_copy)},e.prototype.copyID=function(){R.openUrl("http://www.baidu.com");try{var t=document.createElement("input");t.readOnly=!0,t.value=this.wwwLocation.text,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t)}catch(e){Log.trace(e)}},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),App.EffectUtils.showUI(this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},e.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭分享"),App.ViewManager.closeView(this)},e}(BaseEuiView);t.ShareView=e,__reflect(e.prototype,"lobby.ShareView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsMove=!1,e._mIsLoaded=!1,e._mEffBone=null,e._mTextParser=new egret.HtmlTextParser,e.visible=!1,e.skinName="BroadcastSkin",e.touchEnabled=e.touchChildren=!1,e}return __extends(e,t),e.prototype.load=function(){e.CfgBroadcast||(e.CfgBroadcast=RES.getRes("broadcast_json"));var t=RES.getGroupByName("p_Broadcast");this._mIsLoaded=t.length&&RES.isGroupLoaded("p_Broadcast"),this._mIsLoaded||(App.ResourceUtils.createGroup("p_Broadcast",["eff_pmd_2_ske_json","eff_pmd_2_tex_json","eff_pmd_2_tex_png","eff_pmd_3_ske_json","eff_pmd_3_tex_json","eff_pmd_3_tex_png"]),App.ResourceUtils.loadGroup("p_Broadcast",this.loaded,this.loadPress,this))},e.prototype.loaded=function(){this._mIsLoaded=!0,egret.log("p_Broadcast loaded ")},e.prototype.loadPress=function(t,e){egret.log("p_Broadcast loadPress: ",t,e)},e.prototype.init=function(i,o,n){t.prototype.initComponent.call(this,i,o),this._mCurrScene=n,this._mListMsg=[],this.load(),e.Mask.width=this.uTxtBg.width,this.uTxtBg.mask=e.Mask},e.prototype.addMsg=function(t){var n=t.marquee_format_id,s=t.priority,r=t.play_times,a=t.marquee_effect,h=t.parameter,l=1,p="",c=e.CfgBroadcast["data_"+n];if(c)p=c.content,a=c.effect_lv,r=c.play_times,s=c.priority,l=c.speed/100;else{if(s!=o.SystemMsg)return void egret.warn("未配置跑马灯ID：",n,e.CfgBroadcast);p=h[0]}var u=new i;u.mId=n,u.mPriority=s,u.mPlayTimes=r,u.mLvEffect=a,u.mMoveSpeed=l;for(var d=0,m=h.length;m>d;d++)p=p.replace("*",h[d]);u.mTxtMsg=p,this.listMsgPush(u),this.nextMsg(),App.TimerManager.doFrame(1,999999,this.refreshPos,this),egret.log("add Broadcast Msg:",u.mId,u.mPriority,u.mPlayTimes,u.mLvEffect)},e.prototype.listMsgPush=function(t){this._mListMsg.push(t),this._mListMsg.sort(function(t,e){return t.mPriority==e.mPriority?t.mCreateTime-e.mCreateTime:t.mPriority-e.mPriority})},e.prototype.restartMsg=function(){this.txt.x=e.Mask.width+10,this._mCurrMsg.mCurrTimes++},e.prototype.nextMsg=function(){if(!this._mIsMove&&this._mIsLoaded){if(this._mListMsg.length<=0)return void this.stop();this.visible=!0,this._mIsMove=!0,this._mCurrMsg=this._mListMsg.shift(),this.txt.textFlow=this.getHtmlTxt(),this._mCurrMsg.mCurrTimes=0,this._mCurrMsg.mEndX=-(this.txt.width+20),this.restartMsg(),this.playEff()}},e.prototype.playEff=function(){var t=this._mCurrMsg.mLvEffect;return this.imageHorn.visible=3!=t,2!=t&&3!=t?void this.removeEff():(this._mEffBone||(this._mEffBone=new n,this._mEffBone.x=this.width/2,this._mEffBone.y=this.height/2,this.addChild(this._mEffBone)),this._mEffBone.updateBone("eff_pmd_"+t),void this._mEffBone.play())},e.prototype.removeEff=function(){this._mEffBone&&this._mEffBone.stop()},e.prototype.getHtmlTxt=function(){return this._mTextParser.parser(this._mCurrMsg.mTxtMsg)},e.prototype.refreshPos=function(t){if(this._mIsMove){var i=this._mCurrMsg;this.txt.x-=i.mMoveSpeed*t/16,this.txt.x<i.mEndX&&(i.mCurrTimes>=i.mPlayTimes?(this._mIsMove=!1,App.TimerManager.doTimer(e.DealyTimeMove,1,this.nextMsg,this)):this.restartMsg())}},e.prototype.stop=function(){this.removeEff(),this.visible=!1,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},e.prototype.addEvent=function(){App.MessageCenter.addListener(GameConsEvent.Game_Broadcast_Notification,this.addMsg,this)},e.prototype.removeEvent=function(){App.MessageCenter.removeAll(this)},e.prototype.destroy=function(){for(t.prototype.destroy.call(this),this.removeEff(),R.removeFromParent(this._mEffBone),App.TimerManager.removeAll(this);this._mListMsg.length;)this._mListMsg.pop();this._mEffBone&&this._mEffBone.destroy(),this._mEffBone=void 0,this._mCurrMsg=void 0},e.testPlay=function(){var t={priority:App.MathUtils.randomInt(1,4),play_times:App.MathUtils.randomInt(1,3),marquee_effect:App.MathUtils.randomInt(1,3),marquee_format_id:App.MathUtils.randomInt(101,103),parameter:["胡汉三","100000","100倍","哈哈哈"]};App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,t)},e.CfgBroadcast=null,e.Mask=new egret.Rectangle(0,0,577,36),e.DealyTimeMove=1e3,e}(BaseEuiComponent);t.BroadcastView=e,__reflect(e.prototype,"lobby.BroadcastView");var i=function(){function t(){this.mId=0,this.mTxtMsg="",this.mPriority=0,this.mLvEffect=0,this.mPlayTimes=3,this.mCurrTimes=0,this.mMoveSpeed=1,this.mEndX=0,this._mCreateTime=0,this._mCreateTime=egret.getTimer()}return Object.defineProperty(t.prototype,"mCreateTime",{get:function(){return this._mCreateTime},enumerable:!0,configurable:!0}),t}();__reflect(i.prototype,"BroadcastMsg");var o=function(){function t(){}return t.GameDeskCurr=1,t.GameDeskAll=2,t.GameAndLobby=3,t.SystemMsg=4,t}();__reflect(o.prototype,"BroadcastLv");var n=function(t){function e(){var e=t.call(this,null)||this;return e.blendMode=egret.BlendMode.ADD,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateBone=function(t){this.initDBRes(t),this.armature=this.createArmature("yuanjian",t,e._mActionList)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){void 0===t&&(t=1),this.visible=!0,this.armature.play(e.Animation,999999,t)},e.prototype.stop=function(){this.visible=!1,this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);__reflect(n.prototype,"BroadcastEff")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=30001,t}();t.UserInfoConst=e,__reflect(e.prototype,"lobby.UserInfoConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.initFunc(),i.addListeners(),i.userInfoView=new t.UserInfoView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.UserInfo,i.userInfoView),i.headImgSettingView=new t.HeadImgSettingView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.HeadImgSetting,i.headImgSettingView),i}return __extends(i,e),i.prototype.changeHeadImg=function(t,e,i){this.userInfoView.changeUserHeadImg(t,e,i)},i.prototype.inits=function(){e.prototype.inits.call(this),this.userInfoModel=new t.UserInfoModel(this),this.userInfoProxy=new t.UserInfoProxy(this,this.userInfoModel)},i.prototype.initFunc=function(){this.registerFunc("RoleSetting",this.onRoleSetting,this),this.registerFunc(t.UserInfoConst.ChangeHeadImg,this.changeHeadImg,this)},i.prototype.onRoleSetting=function(t){this.userInfoProxy.roleSetting(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.userInfoProxy.addEvent()},i.prototype.removeListeners=function(){this.userInfoProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.userInfoModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.userInfoView.destroy(),this.headImgSettingView.destroy(),this.userInfoModel.destroy(),this.userInfoProxy.destroy(),this.userInfoView=void 0,this.headImgSettingView=void 0,this.userInfoModel=void 0,this.userInfoProxy=void 0},i}(BaseController);t.UserInfoController=e,__reflect(e.prototype,"lobby.UserInfoController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/UserInfoSkin.exml",App.MessageCenter.addListener("UserMoneyChange",o.refreshMoney,o),o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.sexList.visible=!1;var t=GamePlayerMgr.i.getPlayer();this.userMoney_label.text=""+App.CommonUtils.money2Str(t.getMoney()),this.IDInput.text=""+GamePlayerMgr.i.getPlayer().getUserId()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.sex_switchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchSex,this),this.switchSexBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSex,this),this.nameInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.effectButton(this.changeHeadBtn,this.openHeadImgSettingView,this),App.CommonUtils.effectButton(this.saveNickNameBtn,this.saveNickName,this),App.CommonUtils.effectButton(this.copyIDBtn,this.copyID,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.sex_switchBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchSex,this),this.switchSexBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSex,this),this.nameInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.removeButton(this.changeHeadBtn),App.CommonUtils.removeButton(this.saveNickNameBtn),App.CommonUtils.removeButton(this.copyIDBtn),App.CommonUtils.removeButton(this.closeBtn)},i.prototype.openSex=function(){this.sexList.visible=!this.sexList.visible,"man"==this.currSex.label&&(this.sex_switchBtn.skinName="SexItemSkinW",this.sex_switchBtn.label="woman"),"woman"==this.currSex.label&&(this.sex_switchBtn.skinName="SexItemSkinM",this.sex_switchBtn.label="man")},i.prototype.switchSex=function(){Log.trace("changeSex"),this.currSex.label=this.sex_switchBtn.label,this.currSex.skinName=this.sex_switchBtn.skinName,this.sexList.visible=!1;var t={sex:"man"==this.currSex.label?1:2};this.applyFunc("RoleSetting",t)},i.prototype.openHeadImgSettingView=function(){App.ViewManager.open(t.LobbyViewConst.HeadImgSetting)},i.prototype.checkInput=function(){this.nameInput.text.length>6&&(App.ScrollTxtTips.showTip("最大输入长度为6位"),this.nameInput.text=this.nameInput.text.slice(0,6))},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this),this.refresh()},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭个人中心"),App.ViewManager.closeView(this)},i.prototype.changeUserHeadImg=function(t,e,i){this.refresh()},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();this.userInfo_headBox.source="ui_headBox_"+t.getAvatarBox(),this.userInfo_headImg.source="ui_headImg_"+t.getAvatar()},i.prototype.saveNickName=function(){Log.trace("保存昵称");var e={nickname:this.nameInput.text};this.applyFunc("RoleSetting",e),App.ControllerManager.applyFunc(ControllerConst.Lobby,t.LobbyConst.ChangeNickName,this.nameInput.text)},i.prototype.refreshMoney=function(t){Log.trace("UserInfoView 刷新金币"),this.userMoney_label.text=App.CommonUtils.money2Str(t.balance)},i.prototype.copyID=function(){try{var t=document.createElement("input");t.readOnly=!0,t.value=this.IDInput.text,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t)}catch(e){Log.trace(e)}},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this)},i}(BaseEuiView);t.UserInfoView=e,__reflect(e.prototype,"lobby.UserInfoView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=20001,t.ChangeHeadImgBox=20002,t.ShowSign=20003,t}();t.HeadImgConst=e,__reflect(e.prototype,"lobby.HeadImgConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.headImgSettingView=new t.HeadImgSettingView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.HeadImgSetting,i.headImgSettingView),i}return __extends(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.headImgSettingView.destroy(),this.headImgSettingView=void 0},i}(BaseController);t.HeadImgSettingController=e,__reflect(e.prototype,"lobby.HeadImgSettingController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/HeadImgSettingSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.changeHeadImgBtn.selected=!0,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.changeHeadImgBtn.setImage("userInfo_changeHeadImgTab_sel","userInfo_changeHeadImgTab_nor",100,24),this.changeHeadImgBtn.setImageBg(134,44),this.changeHeadImgBoxBtn.setImage("userInfo_changeHeadBoxTab_sel","userInfo_changeHeadBoxTab_nor",107,24),this.changeHeadImgBoxBtn.setImageBg(134,44)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.saveBtn,this.saveHeadImg,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.changeHeadImgBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.changeHeadImgBoxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.MessageCenter.addListener("roleSettingAck",this.saveHeadImgAck,this),this.headImgList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.changeIcon,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.saveBtn),App.CommonUtils.removeButton(this.closeBtn),this.changeHeadImgBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.changeHeadImgBoxBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.MessageCenter.removeListener("roleSettingAck",this.saveHeadImgAck,this),this.headImgList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.changeIcon,this)},i.prototype.initData=function(){e.prototype.initData.call(this),this.imgData=new eui.ArrayCollection;for(var i=GamePlayerMgr.i.getPlayer().getAvatar(),o=1;13>o;o++)this.imgData.addItem({icon:"ui_headImg_"+o,type:1,isSelected:i==o});this.imgBoxData=new eui.ArrayCollection;for(var n=GamePlayerMgr.i.getPlayer().getAvatarBox(),o=1;13>o;o++)this.imgBoxData.addItem({icon:"ui_headBox_"+o,type:2,isSelected:n==o});this.headImgList.itemRenderer=t.HeadImgItemRenderer,this.headImgList.dataProvider=this.imgData},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this),this.refresh()},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;this.type=void 0,this.currIcon=void 0,this.currBoxIcon=void 0,App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();this.myHeadImgBox.source="ui_headBox_"+t.getAvatarBox(),this.myHeadImg.source="ui_headImg_"+t.getAvatar()},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭头像设置"),App.ViewManager.closeView(this)},i.prototype.changeHeadImg=function(t,e){t||(t="ui_headImg_1"),1==e?(this.myHeadImg.source=t,this.currIcon=t,this.type=e):2==e&&(this.myHeadImgBox.source=t,this.currBoxIcon=t,this.type=e)},i.prototype.closeSign=function(t){for(var e=t.dataProvider,i=0;i<e.length;i++){e.getItemAt(i).isSelected=!1;var o=t.getElementAt(i);o.refreshSign()}},i.prototype.changeIcon=function(t){this.changeData(this.headImgList)},i.prototype.changeData=function(t){var e=t.selectedItem,i=t.selectedIndex,o=t.getElementAt(i);this.closeSign(t),e.isSelected=!0,o.refreshSign(),this.changeHeadImg(e.icon,e.type)},i.prototype.saveHeadImg=function(){var t={};this.currIcon&&this.currBoxIcon&&(t={avatar:Number(this.currIcon.split("_")[2]),avatar_frame:Number(this.currBoxIcon.split("_")[2])}),this.currIcon&&!this.currBoxIcon&&(t={avatar:Number(this.currIcon.split("_")[2])}),this.currBoxIcon&&!this.currIcon&&(t={avatar_frame:Number(this.currBoxIcon.split("_")[2])}),this.currIcon||this.currBoxIcon||(t={avatar:GamePlayerMgr.i.getPlayer().getAvatar(),avatar_frame:GamePlayerMgr.i.getPlayer().getAvatarBox()}),this.applyFunc("RoleSetting",t)},i.prototype.saveHeadImgAck=function(){if(this.currIcon){var e=this.currIcon.split("_")[2];GamePlayerMgr.i.getPlayer().setAvatar(parseInt(e)),GamePlayerMgr.i.saveIcon(this.currIcon)}if(this.currBoxIcon){var i=this.currBoxIcon.split("_")[2];GamePlayerMgr.i.getPlayer().setAvatarBox(parseInt(i)),GamePlayerMgr.i.saveIconRound(this.currBoxIcon)}App.ControllerManager.applyFunc(ControllerConst.Lobby,t.LobbyConst.ChangeHeadImg,this.currIcon,this.currBoxIcon,this.type),App.ControllerManager.applyFunc(t.LobbyControllerConst.UserInfo,t.UserInfoConst.ChangeHeadImg,this.currIcon,this.currBoxIcon,this.type)
},i.prototype.switchTab=function(t){t.currentTarget==this.changeHeadImgBtn&&this.changeHeadImgBtn.touchEnabled?(this.changeHeadImgBoxBtn.selected=!1,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.headImgList.dataProvider=this.imgData):t.currentTarget==this.changeHeadImgBoxBtn&&this.changeHeadImgBoxBtn.touchEnabled&&(this.changeHeadImgBtn.selected=!1,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.headImgList.dataProvider=this.imgBoxData)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.imgData&&this.imgData.removeAll(),this.imgBoxData&&this.imgBoxData.removeAll(),this.headImgList.removeChildren(),this.imgData=void 0,this.imgBoxData=void 0)},i}(BaseEuiView);t.HeadImgSettingView=e,__reflect(e.prototype,"lobby.HeadImgSettingView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.activityListReq=function(e){Log.trace("活动列表请求",e);var i={token:e.token,nowpage:e.nowpage};this.send(t.ProxyKeyConst.Lobby_ActivityList,i),App.EasyLoading.showLoading()},i.prototype.onActivityListAck=function(t){var e=t;this.model.getListData()&&(e.list=t.list.concat(this.model.getListData().list)),App.MessageCenter.dispatch("onActivityListAck",e),App.EasyLoading.hideLoading()},i.prototype.singleActivityReq=function(e){Log.trace("单条活动请求",e);var i={token:e.token,id:e.id};this.send(t.ProxyKeyConst.Lobby_SingleActivity,i),App.EasyLoading.showLoading()},i.prototype.onSingleActivityAck=function(t){this.model.setData(t.id,t),App.MessageCenter.dispatch("onSingleActivityAck",t),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_ActivityList_Back,this.onActivityListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleActivity_Back,this.onSingleActivityAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_ActivityList_Back,this.onActivityListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleActivity_Back,this.onSingleActivityAck,this)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.ActivityProxy=e,__reflect(e.prototype,"lobby.ActivityProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.saveMoney=function(e){Log.trace("请求存入");var i={token:e.token,money:e.money,password:e.password};this.send(t.ProxyKeyConst.Lobby_SaveMoney,i),App.EasyLoading.showLoading()},i.prototype.onSaveMoneyBack=function(t){Log.trace("onSaveMoneyBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("存入成功");var e=GamePlayerMgr.i.getPlayer();e.setMoney(t.balance),e.setSafeMoney(t.deposit),App.MessageCenter.dispatch("UserMoneyChange",t)},i.prototype.takeMoney=function(e){Log.trace("请求取出");var i={token:e.token,money:e.money,password:e.password};this.send(t.ProxyKeyConst.Lobby_TakeMoney,i),App.EasyLoading.showLoading()},i.prototype.onTakeMoneyBack=function(t){Log.trace("onTakeMoneyBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("取出成功");var e=GamePlayerMgr.i.getPlayer();e.setMoney(t.balance),e.setSafeMoney(t.deposit),App.MessageCenter.dispatch("UserMoneyChange",t)},i.prototype.setMoneyPwd=function(e){Log.trace("请求设置资金密码");var i={token:e.token,type:1,new_pwd:e.password};this.send(t.ProxyKeyConst.Lobby_ResetMoneyPwd,i),App.EasyLoading.showLoading()},i.prototype.onSetMoneyPwdBack=function(){Log.trace("设置密码返回"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置资金密码成功"),GamePlayerMgr.i.getPlayer().setIsPwdSeted(!0)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){Log.trace("注册回包监听"),this.addListener(t.ProxyKeyConst.Lobby_SaveMoney_Back,this.onSaveMoneyBack,this),this.addListener(t.ProxyKeyConst.Lobby_TakeMoney_Back,this.onTakeMoneyBack,this),this.addListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onSetMoneyPwdBack,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_SaveMoney_Back,this.onSaveMoneyBack,this),this.removeListener(t.ProxyKeyConst.Lobby_TakeMoney_Back,this.onTakeMoneyBack,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onSetMoneyPwdBack,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.BankProxy=e,__reflect(e.prototype,"lobby.BankProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.BindBankCardListReq=function(t){},i.prototype.exchangeReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),money:e.money,bankname:e.bankname,bankcard_id:e.bankcard_id,cardholder:e.cardholder};this.send(t.ProxyKeyConst.Lobby_Exchange,i),App.EasyLoading.showOnTimeOut(),Log.trace("兑换请求",i)},i.prototype.exchangeAck=function(t){Log.trace("兑换返回",t),App.MessageCenter.dispatch(GameConsEvent.Game_UserMoneyChange,t),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_Exchange,this.exchangeAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_Exchange_Back,this.exchangeAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.ExchangeProxy=e,__reflect(e.prototype,"lobby.ExchangeProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.onLoginBack=function(t){Log.trace("LobbyProxy onLoginBack:",t),this.applyFunc("refreshView")},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.onLoginBack,this)},e.prototype.removeEvent=function(){this.removeMsgEventAll(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseProxy);t.LobbyProxy=e,__reflect(e.prototype,"lobby.LobbyProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.loginWeb=function(t){},i.prototype.onLoginWebBack=function(e){var i=GamePlayerMgr.i.getPlayer();Log.trace("登录Web返回");var o={login_type:1,token:i.getToken(),uid:i.getUserId(),channel:1};this.send(t.ProxyKeyConst.Lobby_LoginLobby,o)},i.prototype.onLoginLobbyBack=function(t){Log.trace("LobbyProxy onLoginWebBack:",t),App.EasyLoading.hideLoading(),App.SceneManager.runScene(SceneConsts.Lobby)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.LoginProxy=e,__reflect(e.prototype,"lobby.LoginProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.messageListReq=function(e,i){Log.trace("列表请求");var o={token:e.token,nowpage:e.nowpage};1==i?this.send(t.ProxyKeyConst.Lobby_MailList,o):2==i&&this.send(t.ProxyKeyConst.Lobby_NoticeList,o),App.EasyLoading.showLoading()},i.prototype.onNoticeListAck=function(t){var e=t;this.model.getListData(2)&&(e.list=t.list.concat(this.model.getListData(2).list)),App.MessageCenter.dispatch("OnNoticeListReqBack",e),App.EasyLoading.hideLoading()},i.prototype.onMailListAck=function(t){var e=t;this.model.getListData(1)&&(e.list=t.list.concat(this.model.getListData(1).list)),App.MessageCenter.dispatch("onMailListAck",e),App.EasyLoading.hideLoading()},i.prototype.singleMessageReq=function(e,i){var o={token:e.token,id:e.id};1==i?this.send(t.ProxyKeyConst.Lobby_SingleMail,o):2==i&&this.send(t.ProxyKeyConst.Lobby_SingleNotice,o),App.EasyLoading.showLoading()},i.prototype.onSingleNoticeAck=function(t){this.model.setData(t.id,t,2),App.MessageCenter.dispatch("onSingleNoticeReqBack",t),App.EasyLoading.hideLoading()},i.prototype.onSingleMailAck=function(t){this.model.setData(t.id,t,1),App.MessageCenter.dispatch("onSingleMailAck",t),App.EasyLoading.hideLoading()},i.prototype.onDeleteMessageReq=function(e,i){Log.trace("删除单条公告请求");var o={token:e.token,id:e.id};1==i?this.send(t.ProxyKeyConst.Lobby_DeleteSingleMail,o):2==i&&this.send(t.ProxyKeyConst.Lobby_DeleteSingleNotice,o),App.EasyLoading.showLoading()},i.prototype.onDeleteNoticeAck=function(t){Log.trace("onDeleteNoticeAck:",t),App.MessageCenter.dispatch("onDeleteNoticeAck",t),App.EasyLoading.hideLoading()},i.prototype.onDeleteMailAck=function(t){Log.trace("onDeleteMailAck:",t),App.MessageCenter.dispatch("onDeleteMailAck",t),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_NoticeList_Back,this.onNoticeListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleNotice_Back,this.onSingleNoticeAck,this),this.addListener(t.ProxyKeyConst.Lobby_DeleteSingleNotice_Back,this.onDeleteNoticeAck,this),this.addListener(t.ProxyKeyConst.Lobby_MailList_Back,this.onMailListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleMail_Back,this.onSingleMailAck,this),this.addListener(t.ProxyKeyConst.Lobby_DeleteSingleMail_Back,this.onDeleteMailAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_NoticeList_Back,this.onNoticeListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleNotice_Back,this.onSingleNoticeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_DeleteSingleNotice_Back,this.onDeleteNoticeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_MailList_Back,this.onMailListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleMail_Back,this.onSingleMailAck,this),this.removeListener(t.ProxyKeyConst.Lobby_DeleteSingleMail_Back,this.onDeleteMailAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.MessageProxy=e,__reflect(e.prototype,"lobby.MessageProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.rechargeTypeReq=function(){var e={token:GamePlayerMgr.i.getPlayer().getToken()};this.send(t.ProxyKeyConst.Lobby_RechargeType,e),App.EasyLoading.showOnTimeOut(),Log.trace("充值类型请求")},i.prototype.rechargeTypeAck=function(t){Log.trace("rechargeTypeAck",t),this.model.savePayTypeList(t.pay_types),App.MessageCenter.dispatch("rechargeTypeAck",t.pay_types),App.EasyLoading.hideLoading()},i.prototype.rechargeMoneyReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),pay_channel:e.pay_channel,money:e.money};Log.trace("rechargeMoneyReq",i),this.send(t.ProxyKeyConst.Lobby_RechargeMoney,i),App.EasyLoading.showOnTimeOut()},i.prototype.rechargeMoneyAck=function(t){Log.trace("rechargeMoneyAck",t.payurl),R.openUrl(t.payurl),App.EasyLoading.hideLoading()},i.prototype.rechargeRecodReq=function(){var e={token:GamePlayerMgr.i.getPlayer().getToken(),type:3};this.send(t.ProxyKeyConst.Lobby_RechargeRecord,e),App.EasyLoading.showOnTimeOut(),Log.trace("充值记录请求")},i.prototype.rechargeRecodAck=function(t){Log.trace("充值记录返回",t),App.MessageCenter.dispatch("rechargeRecodAck",t),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.addListener(t.ProxyKeyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.addListener(t.ProxyKeyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.removeListener(t.ProxyKeyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.RechargeProxy=e,__reflect(e.prototype,"lobby.RechargeProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onRegister=function(e){Log.trace("请求注册");var i={loginame:e.loginame,password:e.password,regtype:e.registerType,captcha:e.captcha,deviceid:e.deviceid};this.send(t.ProxyKeyConst.Lobby_RegisterAccount,i),App.EasyLoading.showLoading()},i.prototype.onRegisterBack=function(t){Log.trace("SettingProxy onRegisterBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("注册成功")},i.prototype.onResetLoginPassword=function(e){var i={loginame:e.loginame,password:e.password,captcha:e.captcha};this.send(t.ProxyKeyConst.Lobby_ResetLoginPassword,i),App.EasyLoading.showLoading()},i.prototype.onResetLoginPasswordAck=function(t){PromTipsView.getInstance().show("修改密码成功"),App.EasyLoading.hideLoading()},i.prototype.onWebLogOut=function(e){var i={usertype:e.usertype,loginame_or_deviceid:e.loginame_or_deviceid,uid:e.uid,token:e.token};this.send(t.ProxyKeyConst.Lobby_webLogOut,i),App.EasyLoading.showLoading()},i.prototype.onWebLogOutAck=function(t){App.MessageCenter.dispatch("onWebLogOutAck"),App.EasyLoading.hideLoading()},i.prototype.onResetMoneyPwd=function(e){Log.trace("请求设置资金密码");var i={token:e.token,type:2,new_pwd:e.password};this.send(t.ProxyKeyConst.Lobby_ResetMoneyPwd,i),App.EasyLoading.showLoading()},i.prototype.onResetMoneyPwdAck=function(){Log.trace("设置密码返回"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置资金密码成功"),GamePlayerMgr.i.getPlayer().setIsPwdSeted(!0)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_Lobby_RegisterAccount_Back,this.onRegisterBack,this),this.addListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this),this.addListener(t.ProxyKeyConst.Lobby_webLogOut_Back,this.onWebLogOutAck,this),this.addListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onResetMoneyPwdAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_Lobby_RegisterAccount_Back,this.onRegisterBack,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this),this.removeListener(t.ProxyKeyConst.Lobby_webLogOut_Back,this.onWebLogOutAck,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onResetMoneyPwdAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.SettingProxy=e,__reflect(e.prototype,"lobby.SettingProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.roleSetting=function(e){this.send(t.ProxyKeyConst.Lobby_roleSetting,e),App.EasyLoading.showLoading()},i.prototype.roleSettingAck=function(t){App.MessageCenter.dispatch("roleSettingAck"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置成功")},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_roleSetting_Back,this.roleSettingAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_roleSetting_Back,this.roleSettingAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.UserInfoProxy=e,__reflect(e.prototype,"lobby.UserInfoProxy")}(lobby||(lobby={}));var BaseParticleObj=function(t){function e(){var e=t.call(this)||this;return e._mIsLoaded=!1,e._mDestroy=!1,e._mChashList={},e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.init=function(t){this.changeParticle(t)},e.prototype.changeParticle=function(t){this._mIsLoaded=!1,this.rest(),this.checkLoad(t)},e.prototype.rest=function(){var t=this._mCurrParticle;t&&(t.stop(!0),R.removeFromParent(t),t.removeEventListener(egret.Event.COMPLETE,this.onComplete,this)),this._mSetPlayDuration=void 0,this._mSetPlayTexture=void 0,this._mCurrParticle=void 0},e.prototype.checkLoad=function(t){var e=RES.getRes(t+"_png"),i=RES.getRes(t+"_json");if(e&&i)this.initParticle(t);else{var o="particle$$"+t;App.ResourceUtils.createGroup(o,[t+"_json",t+"_png"]),App.ResourceUtils.loadGroup(o,this.loaded,this.loadPress,this)}},e.prototype.loaded=function(t){var e=t.split("$$")[1];egret.log("particle_ loaded ",e),this.initParticle(e),this.onLoadComplete(e)},e.prototype.loadPress=function(t,e){egret.log("particle_ loadPress: ",t,e)},e.prototype.initParticle=function(t){this._mIsLoaded=!0;var e=this.getParticleByName(t);e.start(this._mSetPlayDuration?this._mSetPlayDuration:e.m_duration),this._mSetPlayTexture&&e.changeTexture(this._mSetPlayTexture),this.addChild(e),this._mCurrParticle=e,e.hasEventListener(egret.Event.COMPLETE)||e.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},e.prototype.getParticleByName=function(t){var e=this._mChashList[t];if(!e){var i=RES.getRes(t+"_png"),o=RES.getRes(t+"_json");e=new particle.GravityParticleSystem(i,o),e.m_duration=o.duration,this._mChashList[t]=e}return e},e.prototype.onLoadComplete=function(t){egret.log("---------------- 粒子 "+t+" 资源加载完成 可用于子类继承 ----------------")},e.prototype.onComplete=function(){egret.log("---------------- 粒子播放完成 可用于子类继承 ----------------")},e.prototype.play=function(t){this._mCurrParticle?this._mCurrParticle.start(t?t:this._mCurrParticle.m_duration):this._mSetPlayDuration=t},e.prototype.setCurrentParticles=function(t){this._mCurrParticle&&this._mCurrParticle.setCurrentParticles(t)},e.prototype.changeTexture=function(t){this._mCurrParticle?this._mCurrParticle.changeTexture(t):this._mSetPlayTexture=t},e.prototype.stop=function(t){this._mCurrParticle&&this._mCurrParticle.stop(!0)},e.prototype.destroy=function(){if(!this._mDestroy){this._mDestroy=!0,R.removeFromParent(this),this.removeChildren();var t=this._mChashList;for(var e in t){var i=t[e];i.stop(!0),i.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),i.texture=void 0,delete t[e]}this._mChashList=void 0,this._mCurrParticle=void 0}},e}(egret.DisplayObjectContainer);__reflect(BaseParticleObj.prototype,"BaseParticleObj");var ddz;!function(t){var e=function(){function t(){}return t.METHOD={ENTER_GAME:"1001",BACK_GAME:"1002"},t}();t.RoomConst=e,__reflect(e.prototype,"ddz.RoomConst")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._view=new t.RoomView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.RoomConst.METHOD.BACK_GAME,this.onBack2Lobby,this),this.registerFunc(t.RoomConst.METHOD.ENTER_GAME,this.onEnterGame,this)},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("ddz"),i={sceneType:e.mArrGameType[t]};this.goEnterGame(i)},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"ddz.RoomController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"ddz.RoomModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Bg,"ddz","Room")||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.Heip.initUI();for(var t=0;2>=t;t++)this["GroupType"+t].name="GroupType_"+t;this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_ddz_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this._mPartEffect.x=-100,this._mPartEffect.y=-100,this.initBroadcast(this)},i.prototype.onBackRoom=function(){this.applyFunc(t.RoomConst.METHOD.BACK_GAME)},i.prototype.onEnterGame=function(e){var i=e.currentTarget,o=i.name.split("_")[1];this.applyFunc(t.RoomConst.METHOD.ENTER_GAME,parseInt(o))},i.prototype.showHelp=function(){this.Heip.showPopup()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this);for(var t=0;2>=t;t++)App.CommonUtils.effectButton(this["GroupType"+t],this.onEnterGame,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.BtnHelp);for(var t=0;2>=t;t++)App.CommonUtils.removeButton(this["GroupType"+t])},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mPartEffect&&(this._mPartEffect.destroy(),this._mPartEffect=void 0)},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"ddz.RoomView")}(ddz||(ddz={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"fishjoy.EffectBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"fishjoy.ProxyKeyConst")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.Base=1100]="Base"}(e=t.RViewsConst||(t.RViewsConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._helpView=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewsConst.Base),this.updateTxt()},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._proxy=new t.RoomProxy(this,this.getModel()),this._view=new t.RoomView(this),this._helpView=new t.HelpView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewsConst.Base,this._view),App.ViewManager.register(t.ViewsConst.help,this._helpView),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this),this.registerFunc("onHelpClick",this.showHelp,this)},i.prototype.showHelp=function(){App.ViewManager.open(t.ViewsConst.help)},i.prototype.updateTxt=function(){var t=this.player;this._view.updateMoney(t.getMoney())},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("fishjoy"),i={sceneType:e.mArrGameType[t]};this.goEnterGame(i)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"fishjoy.RoomController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"fishjoy.RoomModel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.RoomProxy);t.RoomProxy=e,__reflect(e.prototype,"fishjoy.RoomProxy")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","helpSkin")||this}return __extends(i,e),i.prototype.initUI=function(){this.help_txt.textFlow=[{text:"这是一款提供",style:{textColor:13356020}},{text:"多种炮台",style:{textColor:16775201}},{text:"和",style:{textColor:13356020}},{text:"三十种鱼类",style:{textColor:16775201}},{text:"的休闲射击游戏。\n",style:{textColor:13356020}},{text:"玩家先选择要使用的",style:{textColor:13356020}},{text:"炮台",style:{textColor:16775201}},{text:"，然后点击目标发射炮弹。\n",style:{textColor:13356020}},{text:"玩家还可在",style:{textColor:13356020}},{text:"换炮列表",style:{textColor:16775201}},{text:"中切换",style:{textColor:13356020}},{text:"不同种类的炮台",style:{textColor:16775201}},{text:"，每种炮台均有",style:{textColor:13356020}},{text:"多种炮弹价值",style:{textColor:16775201}},{text:"可供选择。\n对于",style:{textColor:13356020}},{text:"同一价值",style:{textColor:16775201}},{text:"的炮弹，击中同一条鱼的",style:{textColor:13356020}},{text:"次数越多",style:{textColor:16775201}},{text:"，捕获",style:{textColor:13356020}},{text:"机会越大",style:{textColor:16775201}},{text:"。\n",style:{textColor:13356020}},{text:"当鱼被捕获时，玩家可得到",style:{textColor:13356020}},{text:"该鱼价值",style:{textColor:16775201}},{text:"的奖励，同一种鱼在",style:{textColor:13356020}},{text:"不同等级\n",style:{textColor:16775201}},{text:"的房间中",style:{textColor:13356020}},{text:"价值不同",style:{textColor:16775201}},{text:"。\n",style:{textColor:13356020}},{text:"玩家发射炮弹时，余额中会自动扣除",style:{textColor:13356020}},{text:"该炮弹价值",style:{textColor:16775201}},{text:"的金额。\n使用",style:{textColor:13356020}},{text:"高价值炮弹",style:{textColor:16775201}},{text:"捕获",style:{textColor:13356020}},{text:"低价值鱼",style:{textColor:16775201}},{text:"，会产生",style:{textColor:13356020}},{text:"多倍暴击",style:{textColor:16775201}},{text:"效果，",style:{textColor:13356020}},{text:"收益翻倍",style:{textColor:16775201}},{text:"。",style:{textColor:13356020}},{text:"\n当炮弹打到屏幕边缘时，会",style:{textColor:13356020}},{text:"自动折射",style:{textColor:16775201}},{text:"，直到打中鱼为止。\n若由于",style:{textColor:13356020}},{text:"网络延迟",style:{textColor:16775201}},{text:"等原因，发射出无效的炮弹，",style:{textColor:13356020}},{text:"玩家余额不会减少",style:{textColor:16775201}},{text:"。",style:{textColor:13356020}}]},i.prototype.addEvent=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_END,this.closeHandle,this)},i.prototype.removeEvent=function(){this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_END,this.closeHandle,this)},i.prototype.closeHandle=function(e){App.ViewManager.close(t.ViewsConst.help)},i.prototype.close=function(){this.visible=!1},i}(base.GameView);t.HelpView=e,__reflect(e.prototype,"fishjoy.HelpView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.Game_Bg,"fishjoy","RoomChooseSkin")||this;return i._mCount=0,i}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this);for(var e=0;2>=e;e++)this["btnEnter"+e].name="btnEnter_"+e;this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_fish_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this._mPartEffect.x=-100,this._mPartEffect.y=-100,this.initBroadcast(this)},e.prototype.onPay=function(){},e.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},e.prototype.onEnterGame=function(t){var e=t.split("_")[1];this.applyFunc("onEnterGame",parseInt(e))},e.prototype.updateMoney=function(t){this.uMoneyTxt.text=App.CommonUtils.money2Str(t)},e.prototype.onHelp=function(){this.applyFunc("onHelpClick"),egret.log("fish room help")},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnBackLobby,this.onBackRoom,this),App.EffectUtils.addEffectBtn(this.btnHelp,this.onHelp,this);for(var e=0;2>=e;e++)App.EffectUtils.addEffectBtn(this["btnEnter"+e],this.onEnterGame,this,this["btnEnter"+e].name,!0,.95,.95)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnBackLobby),App.EffectUtils.removeEffectBtn(this.btnHelp);for(var e=0;2>=e;e++)App.EffectUtils.removeEffectBtn(this["btnEnter"+e])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPartEffect&&this._mPartEffect.destroy(),this._mPartEffect=void 0},e}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"fishjoy.RoomView")}(fishjoy||(fishjoy={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"qznn.EffectBones")}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.RProxyKeyConst=e,__reflect(e.prototype,"qznn.RProxyKeyConst")
}(qznn||(qznn={}));var qznn;!function(t){var e;!function(t){t[t.Base=500]="Base"}(e=t.RViewConst||(t.RViewConst={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._proxy=new t.RoomProxy(this,this.getModel()),this._view=new t.RoomView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this)},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e={sceneType:t};this.goEnterGame(e)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"qznn.RoomController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"qznn.RoomModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.RoomProxy);t.RoomProxy=e,__reflect(e.prototype,"qznn.RoomProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"qznn","QznnRoomSkin")||this;return i._mCount=0,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);for(var i=0;2>=i;i++)this["btnEnter"+i].name="btnEnter_"+i;this._mEffectBones=new t.EffectBones,this.addChild(this._mEffectBones),this._mEffectBones.updateId("fish_4008"),this._mEffectBones.setPosition(0,200),this._mEffectBones2=new t.EffectBones,this.addChild(this._mEffectBones2),this._mEffectBones2.updateId("fish_4008"),this._mEffectBones2.setPosition(0,500)},i.prototype.onPay=function(){this._mEffectBones.play(++this._mCount%3+1),this._mEffectBones2.play()},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},i.prototype.onEnterGame=function(t){var e=t.currentTarget.name.split("_")[1];this.applyFunc("onEnterGame",parseInt(e))},i.prototype.addEvent=function(){this.btnPay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPay,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this);for(var t=0;2>=t;t++)this["btnEnter"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},i.prototype.removeEvent=function(){this.btnPay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPay,this),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this);for(var t=0;2>=t;t++)this["btnEnter"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"qznn.RoomView")}(qznn||(qznn={}));var DeskScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),web_enterScene(SceneConsts.Desk)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Desk),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},e}(BaseScene);__reflect(DeskScene.prototype,"DeskScene");var GameScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),web_enterScene(SceneConsts.Game)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.SoundManager.stopAll(),App.ViewManager.destroyAll(),GameModuleMgr.i.exitGame()},e}(BaseScene);__reflect(GameScene.prototype,"GameScene");var LayerManager=function(){function t(){}return t.Game_Bg=new BaseEuiLayer,t.Game_Main=new BaseEuiLayer,t.UI_Main=new BaseEuiLayer,t.UI_Popup=new BaseEuiLayer,t.UI_Message=new BaseEuiLayer,t.UI_Tips=new BaseEuiLayer,t}();__reflect(LayerManager.prototype,"LayerManager");var LoadingScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),console.log("进入loading场景"),this.initModule()},e.prototype.onExit=function(){t.prototype.onExit.call(this),console.log("退出loading场景"),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Loading)},e.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Loading,new LoadingController)},e}(BaseScene);__reflect(LoadingScene.prototype,"LoadingScene");var lobby;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(){e.prototype.onEnter.call(this),web_enterScene(SceneConsts.Lobby),this.initMoudle(),App.SoundManager.playBg("lobby_bg_mp3"),App.ViewManager.open(MainViewConst.Lobby,LayerManager.UI_Main)},i.prototype.initMoudle=function(){App.ControllerManager.register(ControllerConst.Lobby,new t.LobbyController),App.ControllerManager.register(t.LobbyControllerConst.UserInfo,new t.UserInfoController),App.ControllerManager.register(t.LobbyControllerConst.HeadImgSetting,new t.HeadImgSettingController),App.ControllerManager.register(t.LobbyControllerConst.Bank,new t.BankController),App.ControllerManager.register(t.LobbyControllerConst.Message,new t.MessageController),App.ControllerManager.register(t.LobbyControllerConst.Activity,new t.ActivityController),App.ControllerManager.register(t.LobbyControllerConst.Share,new t.ShareController),App.ControllerManager.register(t.LobbyControllerConst.Setting,new t.SettingController),App.ControllerManager.register(t.LobbyControllerConst.Exchange,new t.ExchangeController),App.ControllerManager.register(t.LobbyControllerConst.Recharge,new t.RechargeController)},i.prototype.onExit=function(){e.prototype.onExit.call(this),App.PromTipsView.hide(),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Lobby),App.ControllerManager.unregister(t.LobbyControllerConst.UserInfo),App.ControllerManager.unregister(t.LobbyControllerConst.HeadImgSetting),App.ControllerManager.unregister(t.LobbyControllerConst.Bank),App.ControllerManager.unregister(t.LobbyControllerConst.Message),App.ControllerManager.unregister(t.LobbyControllerConst.Activity),App.ControllerManager.unregister(t.LobbyControllerConst.Share),App.ControllerManager.unregister(t.LobbyControllerConst.Setting),App.ControllerManager.unregister(t.LobbyControllerConst.Exchange),App.ControllerManager.unregister(t.LobbyControllerConst.Recharge)},i}(BaseScene);t.LobbyScene=e,__reflect(e.prototype,"lobby.LobbyScene")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(i){e.prototype.onEnter.call(this),App.Socket.close(),App.ControllerManager.register(ControllerConst.Login,new t.LoginController(i))},i.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Login)},i}(BaseScene);t.LoginScene=e,__reflect(e.prototype,"lobby.LoginScene")}(lobby||(lobby={}));var RoomScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),web_enterScene(SceneConsts.Room)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Room),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},e}(BaseScene);__reflect(RoomScene.prototype,"RoomScene");var PromTipsView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="PromTipsSkin",e}return __extends(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.show=function(t,e,i,o,n){this._funOnSure=e,this._funOnCancel=i,this._thisObj=o,this.txtTips.text=t,this.fixBtn(n),this.addEvent(),this.addToParent()},e.prototype.onSure=function(t){this._funOnSure&&this._funOnSure.apply(this._thisObj),this.hide()},e.prototype.onCancel=function(t){this._funOnCancel&&this._funOnCancel.apply(this._thisObj),this.hide()},e.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnSure,this.onSure,this),App.EffectUtils.addEffectBtn(this.btnCancel,this.onCancel,this)},e.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnSure),App.EffectUtils.removeEffectBtn(this.btnCancel)},e.prototype.hide=function(){this.removeFromParent(),this.removeEvent(),this._funOnSure=void 0,this._funOnCancel=void 0,this._thisObj=void 0},e.prototype.fixBtn=function(t){var e=t?!0:!1;this.btnCancel.visible=e,e?(this.btnSure.horizontalCenter=void 0,this.btnSure.x=416):this.btnSure.horizontalCenter=0},e._instance=null,e}(BaseEuiView);__reflect(PromTipsView.prototype,"PromTipsView");var ToolView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="ToolViewSkin",e.init(),e}return __extends(e,t),e.i=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.init=function(){this.addEvent(),this.addToParent()},e.prototype.addEvent=function(){this.btnProfile.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.onTouchTap=function(t){t.currentTarget==this.btnProfile&&RES.profile()},e._instance=null,e}(BaseEuiView);__reflect(ToolView.prototype,"ToolView");var ErrorTipsView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="ErrorTipsSkin",e}return __extends(e,t),Object.defineProperty(e,"i",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this.txt.text=t,this.addEvent(),this.addToParent()},e.prototype.onCancel=function(t){this.hide()},e.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnClose,this.onCancel,this)},e.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnClose)},e.prototype.hide=function(){this.removeFromParent(),this.removeEvent()},e._instance=null,e}(BaseEuiView);__reflect(ErrorTipsView.prototype,"ErrorTipsView");var EasyLoading=function(t){function e(){var e=t.call(this,null,null)||this;return e.skinName="EasyLoadingSkin",e.init(),e}return __extends(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.init=function(){this.initBone()},e.prototype.initBone=function(){var t=RES.getRes("easy_loading_ske_json"),e=RES.getRes("easy_loading_tex_json"),i=RES.getRes("easy_loading_tex_png"),o=dragonBones.EgretFactory.factory;o.parseDragonBonesData(t),o.parseTextureAtlasData(e,i),this._mAni=o.buildArmatureDisplay("Armature"),this.uPoint.addChild(this._mAni)},e.prototype.updateTxt=function(t){this.parent&&(this.txt.text=t)},e.prototype.txtVisible=function(t){void 0===t&&(t=!1),this.txt.visible=t},e.prototype.showReconnetTip=function(){var t=App.isInLoading||App.isInLogin?"":"正在重连中, 请稍等...";this.showLoading(t)},e.prototype.showOnTimeOut=function(t,e,i,o){void 0===t&&(t=1e4),this.showLoading(e?e:""),this._mCallBack=i,this._mThisObj=o,R.setTimeOut(this.onTimeOut,this,t)},e.prototype.onTimeOut=function(){App.PromTipsView.show("请求超时！"),this.hideLoading(),this._mCallBack&&this._mCallBack.call(this._mThisObj)},e.prototype.showLoading=function(t){void 0===t&&(t=""),this.parent||(LayerManager.UI_Tips.addChild(this),this._mAni.animation.play("1",99999),this.updateTxt(t),this.txt.visible=!0)},e.prototype.hideLoading=function(){this.parent&&(R.removeAllTimeOut(this),LayerManager.UI_Tips.removeChild(this),this._mAni.animation.stop()),this._mCallBack=void 0,this._mThisObj=void 0},e._instance=null,e}(BaseEuiView);__reflect(EasyLoading.prototype,"EasyLoading");var ScrollTxtTips=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._mPool=[],this.touchEnabled=!1,this.touchChildren=!1},e.prototype.showTip=function(t){if(!(this.numChildren>=5)){var e=this._mPool.pop();e||(e=new ScrollTxt),e.setTxt(t),e.touchChildren=!1,e.touchEnabled=!1,this.addChild(e),this.tween(e),this.parent||LayerManager.UI_Tips.addChild(this)}},e.prototype.cleanAll=function(){for(;this.numChildren;){var t=this.getChildAt(0);this.realese(t)}},e.prototype.tween=function(t){var e=t.y-60;egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut).wait(800).to({y:e,alpha:0},800,egret.Ease.backOut).call(this.realese,this,[t])},e.prototype.realese=function(t){egret.Tween.removeTweens(t),R.removeFromParent(t),this._mPool.push(t),this.numChildren<=0&&R.removeFromParent(this)},e._i=null,e}(eui.Component);__reflect(ScrollTxtTips.prototype,"ScrollTxtTips");var ScrollTxt=function(t){function e(){var e=t.call(this)||this;return e.skinName="ScrollTxtSkin",e}return __extends(e,t),e.prototype.setTxt=function(t){this.txt.text=t,this.scaleX=this.scaleY=this.alpha=0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=App.StageUtils.getWidth()/2,this.y=App.StageUtils.getHeight()/2},e}(eui.Component);__reflect(ScrollTxt.prototype,"ScrollTxt");var ArrayUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.copy=function(t,e){var i=e;return e||(i=[]),i=i.concat(t)},e.prototype.equals=function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i=0,o=t.length;o>i;i++){var n=t[i],s=e[i];if(n instanceof Array&&s instanceof Array){if(!this.equals(n,s))return!1}else if(n!=s)return!1}return!0},e.prototype.removeOfArray=function(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)},e}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var ColorFilters=function(){function t(){}return t.FilterGray=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),t.FilterLight=new egret.GlowFilter(16777215,.5,64,64,6,1,!0),t}();__reflect(ColorFilters.prototype,"ColorFilters");var CommonUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.money=function(t){return Math.floor(t/100)/100},e.prototype.moneyself=function(t){return Math.floor(100*t)/100},e.prototype.money2Str=function(t){var e=""+Math.floor(t/100)/100,i=e.lastIndexOf(".");return-1==i?e+=".00":i==e.length-2&&(e+="0"),e},e.prototype.money2StrTwo=function(t){return""+Math.floor(t/100)/100},e.prototype.moneyC2S=function(t){return 100*Math.floor(100*t)},e.prototype.isOut=function(t,e){return 0>t||t>GameBase.GameWidth?!0:0>e||e>GameBase.GameHeight?!0:!1},e.prototype.addLableStrokeColor=function(t,e,i){t.strokeColor=e,t.stroke=i},e.prototype.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var i=Object.keys(t),o=0,n=i.length;n>o;o++){var s=i[o];e[s]=this.copyDataHandler(t[s])}return e},e.prototype.lock=function(){var t=StageUtils.getInstance().getStage();t.$children.forEach(function(t){t instanceof egret.DisplayObjectContainer&&(t.touchEnabled=t.touchChildren=!1)})},e.prototype.unlock=function(){var t=StageUtils.getInstance().getStage();t.$children.forEach(function(t){t instanceof egret.DisplayObjectContainer&&(t.touchEnabled=t.touchChildren=!0)})},e.prototype.labelIsOverLenght=function(t){var e="";return e=1e4>t?""+t:Math.floor(t/1e4)+"万"},e.prototype.int64ToNumber=function(t){return parseInt(t.toString())},e.prototype.effectButton=function(t,e,i,o){EffectUtils.getInstance().addEffectBtn(t,e,i,o)},e.prototype.removeButton=function(t){EffectUtils.getInstance().removeEffectBtn(t)},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFormatBySecond=function(t,e){void 0===e&&(e=1);var i="";switch(e){case 1:i=this.getFormatBySecond1(t);break;case 2:i=this.getFormatBySecond2(t);break;case 3:i=this.getFormatBySecond3(t);break;case 4:i=this.getFormatBySecond4(t);break;case 5:i=this.getFormatBySecond5(t)}return i},e.prototype.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,i=Math.floor(t/3600);e=0==i?"00":10>i?"0"+i:""+i;var o,n,s=Math.floor((t-3600*i)/60),r=Math.floor((t-3600*i)%60);return o=0==s?"00":10>s?"0"+s:""+s,n=0==r?"00":10>r?"0"+r:""+r,e+":"+o+":"+n},e.prototype.getFormatBySecond3=function(t){void 0===t&&(t=0);var e,i,o=Math.floor(t/3600),n=Math.floor((t-3600*o)/60),s=Math.floor((t-3600*o)%60);return e=0==n?"00":10>n?"0"+n:""+n,i=0==s?"00":10>s?"0"+s:""+s,e+":"+i},e.prototype.getFormatBySecond2=function(t){var e=new Date(t),i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),s=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return i+"-"+o+"-"+n+" "+s+":"+r+":"+a},e.prototype.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"天前":e+"小时前":Math.floor(t/60)+"分钟前"},e.prototype.getFormatBySecond5=function(t){var e=86400,i=3600,o=60,n=Math.floor(t/e),s=Math.floor(t%e/i),r=Math.floor((t-s*i)/o),a=Math.floor((t-s*i)%o),h="",l="",p="",c="";return t>0?0==n?(h="",0==s?(l="",0==r?(p="",c=0==a?"":10>a?"0"+a+"秒":""+a+"秒"):(p=""+r+"分",c=0==a?"":10>a?"0"+a+"秒":""+a+"秒",p+c)):(l=s+"小时",0==r?(p="",c=0==a?"":10>a?"0"+a+"秒":""+a+"秒"):(p=10>r?"0"+r+"分":""+r+"分",l+p))):(h=n+"天",l=0==s?"":10>s?"0"+s+"小时":""+s+"小时",h+l):""},e}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var EffectUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.macIconShake=function(t,e){for(var i=[[20,300],[15,300],[10,300],[5,300]],o="egret.Tween.get("+t+")",n=0,s=i.length;s>n;n++)o+=".to({'y':"+e+"-"+i[n][0]+"}, "+i[n][1]+")",o+=".to({'y':"+e+"}, "+i[n][1]+")";return o+=";"},e.prototype.startFlicker=function(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t,e])},e.prototype.stopFlicker=function(t){egret.Tween.removeTweens(t)},e.prototype.startHeartEffect=function(t,e){t.scaleX=1,t.scaleY=1,egret.Tween.get(t).to({scaleX:.8,scaleY:.8},e).to({scaleX:1,scaleY:1},e).call(this.startHeartEffect,this,[t,e])},e.prototype.stopHeartEffect=function(t){egret.Tween.removeTweens(t)},e.prototype.showView=function(t,e,i,o,n,s){void 0===e&&(e=300),void 0===i&&(i=0),void 0===o&&(o=1),t.visible=!0,t.scaleX=t.scaleY=i,egret.Tween.get(t).to({scaleX:o,scaleY:o},e,egret.Ease.backOut).call(function(){n&&n.call(s)})},e.prototype.hideView=function(t,e,i,o,n){void 0===o&&(o=200),void 0===n&&(n=0),egret.Tween.get(t).to({scaleX:n,scaleY:n},o,egret.Ease.backIn).call(function(){t.visible=!1,e&&e.call(i)})},e.prototype.showUI=function(t,e,i,o,n,s){void 0===e&&(e=300),void 0===i&&(i=0),void 0===o&&(o=1),this.showView(t,e,i,o,n,s)},e.prototype.hideUI=function(t,e,i,o,n){void 0===e&&(e=200),void 0===i&&(i=0),this.hideView(t,o,n,e,i)},e.prototype.addEffectBtn=function(t,e,i,o,n,s,r){function a(t){var e=t.currentTarget;e._touch_num_++,egret.Tween.get(e).to({scaleX:p*s,scaleY:c*r},50),n&&SoundManager.getInstance().playEffect("click_mp3")}function h(t){var n=t.currentTarget;n._touch_num_&&(n._touch_num_--,egret.Tween.get(n).to({scaleX:p,scaleY:c},50),o&&(o.localX=t.localX,o.localY=t.localY,o.stageX=t.stageX,o.stageY=t.stageY,o.currentTarget=n),e.call(i,o))}function l(t){var e=t.currentTarget;e._touch_num_&&(e._touch_num_--,egret.Tween.get(e).to({scaleX:p,scaleY:c},50))}if(void 0===n&&(n=!0),void 0===s&&(s=.9),void 0===r&&(r=.9),!t._callbcak_begin){t._sx_||(t._sx_=t.scaleX),t._sy_||(t._sy_=t.scaleY);var p=t._sx_,c=t._sy_;t._touch_num_=0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,this),t.addEventListener(egret.TouchEvent.TOUCH_END,h,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,l,this),t._callbcak_begin=a,t._callbcak_end=h,t._callbcak_out=l}},e.prototype.addEffectBtnOut=function(t,e,i,o,n,s,r){void 0===n&&(n=!0),void 0===s&&(s=1.1),void 0===r&&(r=1.1),this.addEffectBtn(t,e,i,o,n,s,r)},e.prototype.hasBtnEffect=function(t){return!!t._callbcak_begin},e.prototype.removeEffectBtn=function(t,e,i){if(t._callbcak_begin){egret.Tween.removeTweens(t),t.scaleX=t._sx_,t.scaleY=t._sy_;var o=t._callbcak_begin,n=t._callbcak_end,s=t._callbcak_out;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,o,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,n,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,s,this),t._callbcak_begin=void 0,t._callbcak_end=void 0,t._callbcak_out=void 0,t._sx_=void 0,t._sy_=void 0,delete t._callbcak_begin,delete t._callbcak_end,delete t._callbcak_out,delete t._sx_,delete t._sy_,delete t._touch_num_}},e}(BaseClass);__reflect(EffectUtils.prototype,"EffectUtils");var HitUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.circleHitRect=function(t,e,i,o){var n=Math.abs(t-o.x),s=Math.abs(e-o.y),r=o.width/2,a=o.height/2;return r>=n?!0:a>=s?!0:n>r+i?!1:s>a+i?!1:MathUtils.getInstance().getDistance(r,a,n,s)<=i},e.prototype.pointHitCircle=function(t,e,i,o,n){return MathUtils.getInstance().getDistance(t,e,i,o)<=n},e}(BaseClass);__reflect(HitUtils.prototype,"HitUtils");var MathUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getAngle=function(t){return 180*t/Math.PI},e.prototype.getAngle2=function(t,e,i,o){return this.getAngle(this.getRadian2(t,e,i,o))},e.prototype.getAngle360=function(t){var e=this.getAngle(t);return 0>e&&(e+=360),e},e.prototype.getRadian=function(t){return t/180*Math.PI},e.prototype.getRadian2=function(t,e,i,o){var n=i-t,s=o-e;return Math.atan2(s,n)},e.prototype.getDistance=function(t,e,i,o){var n=i-t,s=o-e,r=n*n+s*s;return Math.sqrt(r)},e.prototype.getDistance2=function(t,e){var i=e.x-t.x,o=e.y-t.y,n=i*i+o*o;return Math.sqrt(n)},e.prototype.random=function(t,e){var i=Math.min(t,e),o=Math.max(t,e);return i+Math.random()*Math.abs(o-i)},e.prototype.randomInt=function(t,e){return Math.floor(this.random(t,e+1))},e.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},e}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var StringUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.prototype.getStringLength=function(t){for(var e=t.split(""),i=0,o=0;o<e.length;o++){var n=e[o];i+=this.isChinese(n)?2:1}return i},e.prototype.isChinese=function(t){var e=/^.*[\u4E00-\u9FA5]+.*$/;return e.test(t)},e.prototype.rejectValue=function(t,i){var o=i?i:e.IllegalString,n=t.length-1,s=t.charAt(n);return o.lastIndexOf(s)>=0?t.substring(0,n):t},e.prototype.checkMobile=function(t){return/^1\d{10}$/.test(t)},e.prototype.checkEmail=function(t){return/^[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$/.test(t)},e.prototype.isNumber=function(t){return!isNaN(Number(t))},e.IllegalString="[%+-`~!#$^&*()=|{}':;',\\[\\].<>/?~！#￥……&*（）——|{}【】‘；：”“'。，、？]‘’",e}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");