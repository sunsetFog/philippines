var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,"BrnnOpenRecord")||this;return n._lementList=[],n.visible=!1,n}return __extends(n,e),n.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},n.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},n.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length;for(var n=0;n<t.length;n++){var i=t[n];e.addItem(i)}this.refreshGameList(e)},n.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/brnn/euiSkins/BrnnRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},n.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.ControllerCon.Scroll_Bar_Height)},n.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Record_Bar_X},n.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},n.prototype.createLement=function(e){this.reMoveRecordLement();for(var n=0;n<e.length;n++){var i=e[n],o=(e[n].table_id,t.BrnnRecord.create());o.setrankingId(n),o.init(i),o.x=0,o.y=0+41*n,this._addList.addChild(o),this._lementList.push(o)}},n.prototype.reMoveRecordLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&t.BrnnRecord.release(e)}this._lementList.length=0},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.Close,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.Close),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveRecordLement(),t.BrnnRecord.cleanRecordBtnPool()},n}(BaseEuiComponent);t.brnnOpenRecord=e,__reflect(e.prototype,"brnn.brnnOpenRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,n){this.x=t,this.y=n,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"brnn.EffectBones")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._mIsInPool=!1,t._maskRct=new egret.Rectangle(0,0,88,17),t._tableId=0,t._typeId=0,t._isRelease=!1,t.openTypes=[],t.indexMask=0,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(n,e),n.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data&&(this.ChangeStatusList(),this.data.charts)){if(this.data.charts==this.openTypes)return;this.ChangeChartList(),this.setGOGameImg(),this.openTypes=this.data.charts}this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},n.prototype.ChangeChartList=function(){this.visibleChildElement(),this.roomIndex=0,App.TimerManager.doFrame(1,99,this.frameRender,this)},n.prototype.frameRender=function(){this.roomIndex<this.data.charts.length?this.renderOne():App.TimerManager.remove(this.frameRender,this)},n.prototype.renderOne=function(){if(!(this.roomIndex>this.data.charts.length-1)){var t=this.data.charts[this.roomIndex];for(var e in t){var n=0;switch(e){case"is_win_east":n=0;break;case"is_win_south":n=1;break;case"is_win_west":n=2;break;case"is_win_north":n=3;break;default:continue}var i=this["region_"+n];i.getChildAt(this.roomIndex).texture=t[e]?RES.getRes("brnn_room_json.brnn_ui_dui_room"):RES.getRes("brnn_room_json.brnn_ui_cuo_room"),i.getChildAt(this.roomIndex).visible=!0}this.roomIndex++}},n.prototype.ChangeStatusList=function(){this.data.table_name&&(this._scene.text=this.data.table_name),this._tableId=this.data.table_id,this._typeId=this.data.table_type,this.renderIssue(),this.renderTimer(),this.setLimitData(),this.data.table_type==t.BrnnGameTypeConst.Lottery?this.setLotteyYY():this.setClassicYY()},n.prototype.getTableId=function(){return this._tableId},n.prototype.getTypeId=function(){return this._typeId},n.prototype.setGOGameImg=function(){var t=this.data.oldId;this.goGame.source=t?"brnn_room_json.common_ui_dqfj":"brnn_room_json.common_ui_jryx"},n.prototype.setLimitData=function(){if("number"==typeof this.data.bet_max&&"number"==typeof this.data.bet_limit){var t=App.CommonUtils.money(this.data.bet_limit),e=App.CommonUtils.money(this.data.bet_max);this._limit.text="限红: "+t+"~"+e}},n.prototype.renderIssue=function(){this.data.issue&&(this.Issuenumber0.text="期号:"+this.data.issue)},n.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var n=this["region_"+t];n.getChildAt(e).visible=!1}App.TimerManager.remove(this.frameRender,this)},n.prototype.setMask=function(t,e){var n=Math.ceil(t/e*88),i=89-n;this._maskRct.width=i;var o=t/n;App.TimerManager.doTimer(o,n,function(){this._maskRct.width+=1,this._mandi.mask=this._maskRct},this)},n.prototype.setClassicYY=function(){this._sceneGroup.y=this._sceneY.y,this.IssueClassic.visible=!1,this._limitGroup.y=this._limitY.y},n.prototype.setLotteyYY=function(){this._sceneGroup.y=this._sceneY.y-13,this.IssueClassic.visible=!0,this._limitGroup.y=this._limitY.y+13},n.prototype.renderTimer=function(){switch(this.data.state){case t.BrnnGameState.BETTING:this.betTimer(this.data.total_time,this.data.remaining_time);break;case t.BrnnGameState.EXCHANGE:this.exchangeTimer()}},n.prototype.exchangeTimer=function(){this._typeId==t.BrnnGameTypeConst.Lottery?(this.gameType.text="不在销售期",this.setttleTime.text=""):(this.gameType.text="结算中",this.setttleTime.text="···"),this.maskGame.visible=!1},n.prototype.betTimer=function(t,e){var n=this.data.remaining_time;this.gameType.text="下注中",n>=100?this.setttleTime.text="···":this.setttleTime.text=n+"",this._mandi.scaleX=e/t,this.maskGame.visible=!0},n.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n),!this.data},n.prototype.changeTest=function(t){this.setttleTime.text=t+""},n.prototype.onRemove=function(){this.destroy()},n.prototype.destroy=function(){Log.trace("销毁 IconRenderer"),App.TimerManager.removeAll(this)},n}(eui.ItemRenderer);t.BrnnRoomIcon=e,__reflect(e.prototype,"brnn.BrnnRoomIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,"BrnnTableList")||this;return n.deskType=1,n.deskList=[],n.gameid=-1,n}return __extends(n,e),n.prototype.initUI=function(e,n){this.eventName=e;var i=new eui.VerticalLayout;this.gameList.layout=i,this.scrollerItem.viewport=this.gameList,this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.OFF,this.gameList.itemRenderer=t.BrnnRoomIcon,this.tempCollection=new eui.ArrayCollection,n==t.BrnnTableConst.Change?(this.deskType=0,this.scrollerItem.verticalScrollBar.visible=!0):this.scrollerItem.verticalScrollBar.visible=!1},n.prototype.setDeskType=function(t){this.deskType=t},n.prototype.stopScroller=function(){this.scrollerItem.stopAnimation()},n.prototype.createList=function(t,e){App.TimerManager.removeAll(this),e&&(this.gameid=e);var n=App.CommonUtils.copyDataHandler(t.table_info_list);this.deskList.length=0,this.deskList=n;for(var i=function(t){return function(e,n){var i=e[t],o=n[t];return i-o}},o=n.sort(i("sort_id")),r=0;r<o.length;r++){var s=o[r];s.table_id==this.gameid?s.oldId=1:s.oldId=0}this.deskList.length?this.refreshList():(this.tempCollection.removeAll(),this.tempCollection.refresh())},n.prototype.getCheckedList=function(){if(0==this.deskType)return this.deskList;for(var t=[],e=this.deskList,n=0;n<e.length;n++){var i=e[n];i.table_type==this.deskType&&t.push(i)}return t},n.prototype.refreshList=function(){if(this.deskList.length){this.tempCollection.refresh();var t=this.deskList;this.tempCollection.replaceAll(t),this.gameList.dataProvider=this.tempCollection;for(var e=0;e<this.deskList.length;e++){var n=this.deskList[e];this.updateItemData(n)}this.tempCollection.refresh()}},n.prototype.insertState=function(t){for(var e=this.deskList,n=0;n<e.length;n++){var i=e[n];i.table_id==t.table_id&&this.updateItemData(i,t)}},n.prototype.insertRoomLimit=function(t){if(this.deskList.length){for(var e=0;e<this.deskList.length;e++){var n=this.deskList[e];if(n.table_id==t.table_id)for(var i=t.limits,o=0;o<i.length;o++)0==i[o].place&&(n.bet_limit=i[o].limit_min_money,n.bet_max=i[o].limit_max_money)}this.updateRenderData()}},n.prototype.updateItemData=function(e,n){n&&(e.issue=n.issue),n&&(e.state=n.state);var i=n?n.remaining_time:e.remaining_time,o=n?n.total_time:e.total_time,r=n?n.state:e.state;switch(e.remaining_time=Math.round(i/1e3),e.total_time=Math.round(o/1e3),r){case t.BrnnGameState.BETTING:App.TimerManager.doTimer(1e3,e.remaining_time+1,function(){e.remaining_time>=0&&e.state==t.BrnnGameState.BETTING&&(e.remaining_time--,e.remaining_time<=0&&(e.remaining_time=0),this.updateRenderData())},this)}this.updateRenderData()},n.prototype.updateRenderData=function(){for(var t=this.deskList,e=0;e<t.length;e++){var n=this.tempCollection.getItemAt(e);n=t[e],this.tempCollection.itemUpdated(n)}},n.prototype.insertChart=function(t){if(this.deskList.length){for(var e=0;e<this.deskList.length;e++){var n=this.deskList[e];n.table_id==t.table_id&&(n.charts?n.charts=n.charts.concat(t.charts[0]):n.charts=t.charts,n.charts.length>9&&n.charts.splice(0,1))}this.updateRenderData()}},n.prototype.onEnterGame=function(){var t=this.gameList.selectedIndex,e=this.gameList.getElementAt(t),n=e.getTableId();this.applyFunc(this.eventName,n)},n.prototype.touchTableMove=function(t,e){common.GUtils.touchScrollMove(this.scrollerItem,t,e)},n.prototype.onTableMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t)},n.prototype.addEvent=function(){this.gameList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},n.prototype.removeEvent=function(){this.gameList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},n.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.tempCollection=void 0,this.deskList=void 0},n}(BaseEuiComponent);t.BrnnTableList=e,__reflect(e.prototype,"brnn.BrnnTableList")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.RProxyKeyConst=e,__reflect(e.prototype,"brnn.RProxyKeyConst")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.Base=500]="Base"}(e=t.RViewConst||(t.RViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("DeskController init()"),t}return __extends(n,e),n.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},n.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base,this.getDeskModel()),App.ViewManager.open(t.ViewConst.brnnPopup),this.getDeskModel().tableType=this.currDeskType,this.enterGameInfo()},n.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._view=new t.DeskView(this)},n.prototype.getDeskModel=function(){return this._model},n.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterBrnnGame",this.onEnterGame,this),this.registerFunc(t.ControllerCon.btnHallcharTReq,this.btnHallcharTReq,this),this.registerFunc(t.ControllerCon.createHallChart,this.createHallChart,this),this.registerFunc(t.ControllerCon.changeHallChart,this.changeHallChart,this),this.registerFunc(t.ControllerCon.changeHallstaus,this.changeHallstaus,this),this.registerFunc(t.ControllerCon.renewRoomLimit,this.renewRoomLimit,this),this.registerFunc(t.ControllerCon.closeHallChart,this.closeHallChart,this)},n.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},n.prototype.getFistHallChartReq=function(t){this.getDeskModel().tableType=t,this._view.setToggleBtn(t)},n.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},n.prototype.onEnterGame=function(t){this.setCurrDeskId(t),this.setCurrDeskType(this.getDeskModel().tableType),this.enterGameByDeskId(t,{table_type:t})},n.prototype.enterGameInfo=function(){this.getDeskModel().isOpenGame=!0;var t=this.getDeskModel().initGameMss;null!=t&&this.createHallChart(t)},n.prototype.btnHallcharTReq=function(t){var e={req_id:t,table_id:0};App.EasyLoading.showOnTimeOut(),this._proxy.getHallChart(e)},n.prototype.createHallChart=function(t){this.getDeskModel().isOpenGame&&(this.getDeskModel().isBackstage=!1,this.getFistHallChartReq(t.req_id),this._view.createList(t))},n.prototype.changeHallChart=function(t){this.getDeskModel().isBackstage||this._view.insertChart(t)},n.prototype.changeHallstaus=function(t){this.getDeskModel().isBackstage||this._view.insertState(t)},n.prototype.renewRoomLimit=function(t){this.getDeskModel().isBackstage||this._view.insertRoomLimit(t)},n.prototype.closeHallChart=function(){this._view.reMoveLement(),App.ScrollTxtTips.showTip("游戏维护中")},n.prototype.addListeners=function(){this._proxy.addEvent()},n.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(n.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("销毁BrnnDeskController"),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},n}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"brnn.DeskController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.roleName="",n.initData(),n}return __extends(e,t),e.prototype.initData=function(){this.tableType=0,this.chartList=[],this.tableId=0,this.chartNewList={},this.isBackstage=!1,this.initGameMss=null,this.isOpenGame=!1},e.prototype.changeChartList=function(){for(var t in this.chartNewList)this.chartNewList[t].length>9&&this.chartNewList[t].splice(0,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"brnn.DeskModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return __extends(n,e),n.prototype.getDeskModel=function(){return this._model},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onHallStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onHallChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onHHallChartNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this),this.addListener(t.ControllerCon.NET_MSG.LIMIT_NOTIFY,this.onRoomLimitNotify,this)},n.prototype.onHallStatusNotifyBack=function(e){Log.log("onHallStatusNotifyBack",e),this.applyFunc(t.ControllerCon.changeHallstaus,e)},n.prototype.onHallChartResBack=function(e){Log.log("onHallChartResBack",e),this.getDeskModel().initGameMss=App.CommonUtils.copyDataHandler(e),this.applyFunc(t.ControllerCon.createHallChart,e),App.EasyLoading.hideLoading()},n.prototype.onHHallChartNotifyBack=function(e){Log.log("onHHallChartNotifyBack",e),this.applyFunc(t.ControllerCon.changeHallChart,e)},n.prototype.onHitRateRes=function(e){Log.log("onHitDestRateResBack",e);var n=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.conFun.setBrnnHitRate(n)},n.prototype.onRoomLimitNotify=function(e){Log.log("onRoomLimitNotify",e),this.applyFunc(t.ControllerCon.renewRoomLimit,e)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},n.prototype.getHallChart=function(e){this.send(t.ControllerCon.NET_MSG.HALL_CHART_REQ,e)},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"brnn.DeskProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,t,LayerManager.Game_Bg,"brnn","BrnnRoomSkin")||this;return n._gameList=[],n._lementList=[],n.TableList.initComponent(t),n.helpPop.initComponent(t),n.helpPop.initBrnnComponent(),n}return __extends(n,e),n.prototype.initUI=function(){e.prototype.initUI.call(this),Log.log("初始化大厅跑马灯信息"),this.initBroadcast(this),this.btnReturn.visible=!App.isWebInsert},n.prototype.open=function(n){e.prototype.open.call(this),this._mMoudel=n,this.btnClassical0.visible=!0,this.btnClassical1.visible=!1,this.btnClassical2.visible=!1,this.btnClassical3.visible=!0,this.TableList.initUI(t.ControllerCon.onEnterBrnnGame,t.BrnnTableConst.Hall),App.OffsetLeft(this.leftFive)},n.prototype.onHelpPay=function(){Log.log("进入帮助"),this.onClickBackHelp()},n.prototype.onClickBackHelp=function(){App.MouseUtils.removeMouseWheel(),this.helpPop.showPopup(!1)},n.prototype.onBackRoom=function(){Log.log("返回大厅"),this.applyFunc("onClickBackRoom")},n.prototype.onEnterGame=function(t){},n.prototype.createList=function(t){this.TableList.createList(t)},n.prototype.insertState=function(t){this.TableList.insertState(t)},n.prototype.insertRoomLimit=function(t){this.TableList.insertRoomLimit(t)},n.prototype.insertChart=function(t){this.TableList.insertChart(t)},n.prototype.toggleBtn=function(e){var n=e.currentTarget;switch(this.TableList.stopScroller(),n){case this.btnClassical1:this.setToggleBtn(t.BrnnGameTypeConst.Classic),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Classic),this.TableList.setDeskType(t.BrnnGameTypeConst.Classic);break;case this.btnClassical3:this.setToggleBtn(t.BrnnGameTypeConst.Lottery),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Lottery),this.TableList.setDeskType(t.BrnnGameTypeConst.Lottery)}},n.prototype.setToggleBtn=function(e){e==t.BrnnGameTypeConst.Classic?(this.btnClassical0.visible=!0,this.btnClassical1.visible=!1,this.btnClassical2.visible=!1,this.btnClassical3.visible=!0):(this.btnClassical0.visible=!1,this.btnClassical1.visible=!0,this.btnClassical2.visible=!0,this.btnClassical3.visible=!1)},n.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)},n.prototype.addPageSignMove=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},n.prototype.createLement=function(e){this.reMoveLement(),Log.log("生成场次"),Log.log(e);for(var n=0;n<e.length;n++){var i=e[n],o=(e[n].table_id,t.BrnnRoom.create());o.init(i),o.x=0,o.y=0+195*n,this._lementList.push(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this)}},n.prototype.touchBtn=function(t){var e=t.currentTarget,n=e.getTableId();Log.log(n),this.applyFunc("onEnterBrnnGame",n)},n.prototype.ChangeChartList=function(t){for(var e=0;e<this._lementList.length;e++){var n=this._lementList[e].getTableId();if(n==t.table_id){var i=this._mMoudel.chartNewList[t.table_id];this._lementList[e].ChangeChartList(i)}}},n.prototype.ChangeStatusList=function(t){for(var e=0;e<this._lementList.length;e++){var n=this._lementList[e].getTableId();n==t.table_id&&this._lementList[e].ChangeStatusList(t)}},n.prototype.setLimitData=function(t){for(var e=t.bet_limit/1e4,n=t.bet_max/1e4,i=0;i<this._lementList.length;i++){var o=this._lementList[i].getTableId();o==t.table_id&&this._lementList[i].setLimitData(e,n)}},n.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.BrnnRoom.release(e))}this._lementList.length=0},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),Log.log("addEvent"),App.CommonUtils.effectButton(this.btnHelp,this.onHelpPay,this,{}),App.CommonUtils.effectButton(this.btnReturn,this.onBackRoom,this,{}),App.CommonUtils.effectButton(this.btnClassical1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.btnClassical3,this.toggleBtn,this,{}),App.MessageCenter.addListener(t.ControllerCon.addPageSignMove,this.addPageSignMove,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.TableList.addEvent(),this.helpPop.addEvent()},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.MessageCenter.removeListener(t.ControllerCon.addPageSignMove,this.addPageSignMove,this),App.CommonUtils.removeButton(this.btnHelp),App.CommonUtils.removeButton(this.btnReturn),App.CommonUtils.removeButton(this.btnClassical1),App.CommonUtils.removeButton(this.btnClassical3),this.TableList.removeEvent(),this.helpPop.removeEvent(),App.MouseUtils.removeMouseWheel()},n.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("销毁BrnnDesk"),this.reMoveLement(),this.TableList.destroy()},n}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"brnn.DeskView")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(e){var n=function(){function e(){}return e.prototype.getVersion=function(){return"v1.2.3"},e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var n=base.getController(e);n&&n.onCreate()},e.prototype.initialize=function(t,e){var n=base.getController(t);n&&n.onInit(e)},e.prototype.destroy=function(t){},e}();e.brnn=n,__reflect(n.prototype,"brnn.Entrance.brnn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t,n=e.brnnBonePool;return n&&(t=n.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var n=e.brnnBonePool;n||(n=[]),t._mIsInPool=!0,t.clean(),n.push(t),e.brnnBonePool=n}},e.cleanFormPool=function(){var t=e.brnnBonePool;if(t)for(;t.length;){var n=t.pop();n.destroy()}},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature&&this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.brnnBonePool=null,e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.BrnnBones=e,__reflect(e.prototype,"brnn.BrnnBones")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var n=t.call(this,"BrnnCard")||this;return n._pokerlist=[],n.pokerposs=[],n.pokerAllList=[],n}return __extends(e,t),e.prototype.newPoker=function(){var t=0;this.clearPoker();for(var e=0;25>e;e++){var n=new eui.Image;n.source="common_ui_cardback_png",n.width=90,n.height=121,n.scaleX=.8,n.scaleY=.8,n.alpha=0,n.name=e+"";var i=Math.floor(e/5),o=Math.floor(e%5);n.x=this.card.x,n.y=this.card.y,this.cardlist.addChild(n),this._pokerlist.push(n);var r=0,s=0;0!=o&&(r=o>2?-12:0),0!=o&&4!=o&&(s=2>=o?-10:10);var a={x:this["card_"+i].x+t,_x:this["card_"+i].x+t+s,y:this["card_"+i].y,_y:this["card_"+i].y+r};this.pokerposs.push(a),t+=33,o>=4&&(t=0)}},e.prototype.directDisplayFapai=function(){this.initializationcardPos();for(var t,e,n=function(){var n=i._pokerlist[o];egret.Tween.removeTweens(n),t=Math.floor(o/5),e=Math.floor(o%5),egret.Tween.get(n).wait(50*e+250*t).to({x:i.pokerposs[o].x,y:i.pokerposs[o].y,alpha:1,rotation:360},800,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("sendcard_mp3"),24==Number(n.name)&&App.SoundManager.playEffect("alert_mp3")},i)},i=this,o=0;o<this._pokerlist.length;o++)n()},e.prototype.directFapai=function(){this.initializationcardPos(),App.SoundManager.playEffect("sendcard_mp3");for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];e.x=this.pokerposs[t].x,e.y=this.pokerposs[t].y,e.alpha=1}},e.prototype.initializationcardPos=function(){if(this._pokerlist&&this._pokerlist.length)for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];Math.floor(t/5);e.x=this.card.x,e.y=this.card.y,e.scaleX=.8,e.scaleY=.8,e.source="common_ui_cardback_png",e.alpha=0,e.rotation=0}},e.prototype.clearPoker=function(){if(App.TimerManager.removeAll(this),this._pokerlist.length)for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];e.parent&&(egret.Tween.removeTweens(e),e.parent.removeChild(e))}this._pokerlist=[],this.pokerposs=[]},e.prototype.pospoker=function(t){for(var e=0;e<t.numChildren;e++){var n={x:t.getChildAt(e).x,y:t.getChildAt(e).y};this.pokerposs.push(n)}},e.prototype.getcardsrc=function(t){this.pokerAllList=[],this.pokerAllList.length=0;for(var e=0;e<t.length;e++){var n=t[e];this.pokerAllList.push(this.getCardWithNum(n))}},e.prototype.getCardWithNum=function(t){var e=t>>4&15,n=15&t,i=11==n?"j":12==n?"q":13==n?"k":n;if(0==e)var o="black";else if(1==e)var o="heart";else if(2==e)var o="flower";else if(3==e)var o="square";var r="common_ui_card"+o+i+"_png";return 0==e&&0==i&&(r="",Log.warn("cardNum:",t)),r},e.prototype.kaipaiAnimation=function(t){var e=this,n=0;this.initializationcardPos(),this.directFapai();for(var i=function(){var t=o._pokerlist[r];egret.Tween.removeTweens(t),egret.Tween.get(t).wait(100*n).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){t.source=e.pokerAllList[t.name],egret.Tween.get(t).to({scaleX:.8},300,egret.Ease.sineInOut)},o),n++},o=this,r=0;r<this._pokerlist.length;r++)i();this.setCardTypePos(t)},e.prototype.setCardTypePos=function(t){var e=0,n=this,i=0;App.TimerManager.doTimer(580,5,function(){i=0==e?t.banker_open_type:t.place_results[e-1].open_type,n.setCardPos(e,i,!0),e++},this)},e.prototype.setCardPos=function(t,e,n){var i=5*t,o=5*t+5;if(e)for(var r=i;o>r;r++){var s=this._pokerlist[r];n?egret.Tween.get(s).to({x:this.pokerposs[r].x,y:this.pokerposs[r]._y,alpha:1},300,egret.Ease.sineInOut):s.y=this.pokerposs[r]._y}},e.prototype.directKaipai=function(t){this.initializationcardPos(),this.directFapai();for(var e=0;e<this._pokerlist.length;e++){Math.floor(e/5),Math.floor(e%5);this._pokerlist[e].source=this.pokerAllList[e]}this.directSetCardTypePos(t)},e.prototype.directSetCardTypePos=function(t){for(var e=0;5>e;e++){var n=0;n=0==e?t.banker_open_type:t.place_results[e-1].open_type,this.setCardPos(e,n,!1)}},e.prototype.cleanOpenAndTurnPoker=function(){var t=this._pokerlist;App.TimerManager.removeAll(this);for(var e=0;e<t.length;e++){var n=t[e];egret.Tween.removeTweens(n)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearPoker()},e}(BaseEuiComponent);t.BrnnCardView=e,__reflect(e.prototype,"brnn.BrnnCardView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,"BrnnChangeTable")||this;return n._lementList=[],n.visible=!1,n}return __extends(n,e),n.prototype.initUI=function(){this.TableList.initUI(t.ControllerCon.onEnterTableGameBrnn,t.BrnnTableConst.Change)},n.prototype.getTableList=function(){return this.TableList},n.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},n.prototype.closePoput=function(){this.applyFunc("oncloseGameBrnn");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},n.prototype.createList=function(t,e){this.TableList.createList(t,e)},n.prototype.insertState=function(t){this.TableList.insertState(t)},n.prototype.insertChart=function(t){this.TableList.insertChart(t)},n.prototype.createLement=function(e,n){this.reMoveLement();for(var i=0;i<e.length;i++){var o=e[i],r=e[i].table_id,s=(e[i].table_type,t.BrnnRoom.create());s.init(o),s.x=0,s.y=0+195*i,r==n?s.setGOGameImg(1):s.setGOGameImg(0),this._addList.addChild(s),this._lementList.push(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTableBtn,this)}},n.prototype.touchTableBtn=function(t){var e=t.currentTarget,n=e.getTableId(),i=e.getTypeId();this.applyFunc("onEnterTableGameBrnn",n,i)},n.prototype.ChangeGameChartList=function(t,e){for(var n=0;n<this._lementList.length;n++){var i=this._lementList[n].getTableId();if(i==t.table_id){var o=e[t.table_id];this._lementList[n].ChangeChartList(o)}}},n.prototype.ChangeGameStatusList=function(t){for(var e=0;e<this._lementList.length;e++){var n=this._lementList[e].getTableId();n==t.table_id&&this._lementList[e].ChangeStatusList(t)}},n.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTableBtn,this),t.BrnnRoom.release(e))}},n.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,this.TableList.touchTableMove(e,t.ControllerCon.Scroll_Bar_Height)},n.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Table_Bar_X},n.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)
},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.close,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.addEvent()},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.close),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.removeEvent()},n.prototype.cleanTable=function(){this.reMoveLement(),t.BrnnRoom.cleanRoomBtnPool(),this._addList.removeChildren()},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement(),t.BrnnRoom.cleanRoomBtnPool(),this.TableList.destroy()},n}(BaseEuiComponent);t.BrnnChangeTable=e,__reflect(e.prototype,"brnn.BrnnChangeTable")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,"BrnnHelpSkin")||this;return n.isTMove=!1,n.visible=!1,n}return __extends(n,e),n.prototype.initBrnnComponent=function(){this.help_collection=new eui.ArrayCollection,this.gameList.itemRenderer=t.BrnnHelpIcon,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},n.prototype.showPopup=function(t){this.isTMove=t,App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},n.prototype.closePoput=function(){var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),App.MouseUtils.removeMouseWheel(),this.isTMove||App.MessageCenter.dispatch(t.ControllerCon.addPageSignMove)},n.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.ControllerCon.Scroll_Bar_Height)},n.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Help_bar_X},n.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.helpClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.helpClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(BaseEuiComponent);t.BrnnHelp=e,__reflect(e.prototype,"brnn.BrnnHelp")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.BrnnHelpIcon=e,__reflect(e.prototype,"brnn.BrnnHelpIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){return t.call(this,"BrnnLotteryResults")||this}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BrnnLotteryResults=e,__reflect(e.prototype,"brnn.BrnnLotteryResults")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.roomPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.create=function(){var e=t.roomPool.pop();return e||(e=new n),e.initup(),e},t.prototype.releaseCoin=function(e){return egret.is(e,"BrnnRoom")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.roomPool.unshift(e)):void Log.log(e,"is not BrnnRoom")},t.prototype.clear=function(){for(;t.roomPool.length;)t.roomPool.pop().destroy()},t._i=null,t.roomPool=null,t}();t.roomFactory=e,__reflect(e.prototype,"brnn.roomFactory");var n=function(e){function n(){var t=e.call(this)||this;return t._mIsInPool=!1,t._maskRct=new egret.Rectangle(0,0,88,17),t._tableId=0,t._typeId=0,t._isRelease=!1,t.indexMask=0,t.index=0,t.skinName="BrnnRoomIcon",t._mandi.mask=t._maskRct,t}return __extends(n,e),n.create=function(){var t=ObjectPool.pop("brnn.BrnnRoom");return t._mIsInPool=!1,t},n.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},n.cleanRoomBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRoom","destroy")},n.prototype.init=function(t){this.dataChanged(t)},n.prototype.initup=function(){this._isRelease=!1},n.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},n.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},n.prototype.dataChanged=function(t){t.charts&&(this.ChangeChartList(t.charts),this.ChangeStatusList(t))},n.prototype.ChangeChartList=function(t){this.visibleChildElement();for(var e=0;e<t.length;e++){var n=t[e];for(var i in n){var o=0;switch(i){case"is_win_east":o=0;break;case"is_win_south":o=1;break;case"is_win_west":o=2;break;case"is_win_north":o=3;break;default:continue}var r=this["region_"+o];r.getChildAt(e).texture=n[i]?RES.getRes("brnn_room_json.brnn_ui_dui_room"):RES.getRes("brnn_room_json.brnn_ui_cuo_room"),r.getChildAt(e).visible=!0}}},n.prototype.ChangeStatusList=function(e){if(e.bet_limit){var n=e.bet_limit/1e4,i=e.bet_max/1e4;this._limit.text="限红: "+n+"~"+i}e.table_name&&(this._scene.text=e.table_name),e.issue&&(this.Issuenumber0.text="期号："+e.issue);var o=Math.floor(e.remaining_time/1e3);this.setttleTime.text=o+"",this.gameType.text=2==e.state?"下注中":"结算中",this._tableId=e.table_id,this._typeId=e.table_type,2==e.state?(this.startTimer(o),this.setMask(e.remaining_time,e.total_time),this.maskGame.visible=!0):(this.maskGame.visible=!1,this.setttleTime.text="···"),e.table_type==t.BrnnGameTypeConst.Lottery?this.setLotteyYY():this.setClassicYY()},n.prototype.getTableId=function(){return this._tableId},n.prototype.getTypeId=function(){return this._typeId},n.prototype.setGOGameImg=function(t){this.goGame.source=t?"brnn_room_json.common_ui_dqfj":"brnn_room_json.common_ui_jryx"},n.prototype.setLimitData=function(t,e){this._limit.text="限红: "+t+"~"+e},n.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var n=this["region_"+t];n.getChildAt(e).visible=!1}},n.prototype.setMask=function(t,e){var n=Math.ceil(t/e*88),i=89-n;this._maskRct.width=i;var o=t/n;App.TimerManager.doTimer(o,n,function(){this._maskRct.width+=1,this._mandi.mask=this._maskRct},this)},n.prototype.startTimer=function(t){this.index=0;var e=t;this.setttleTime.text=e+"",this.visible=!0,this.index=e,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},n.prototype.start=function(){return this.index--,this.index<=0?(this.index=0,this.setttleTime.text="···",void App.TimerManager.removeAll(this)):void(this.setttleTime.text=this.index+"")},n.prototype.over=function(){this.index=0,this.setttleTime.text="···"},n.prototype.setClassicYY=function(){this._sceneGroup.y=this._sceneY.y,this.IssueClassic.visible=!1,this._limitGroup.y=this._limitY.y},n.prototype.setLotteyYY=function(){this._sceneGroup.y=this._sceneY.y-13,this.IssueClassic.visible=!0,this._limitGroup.y=this._limitY.y+13},n.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},n.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},n.prototype.destroy=function(){this.clean()},n}(eui.Component);t.BrnnRoom=n,__reflect(n.prototype,"brnn.BrnnRoom")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this,"BrnnPlaceIsWin")||this}return __extends(e,t),e.prototype.init=function(){},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.niuji=function(t,e,n){this["beefCard"+e].texture=RES.getRes("brnn_menu_json.brnn_ui_"+(n?"H_":"L_")+t)},e.prototype.showniuji=function(t){var e=0;this.cleanwinAndlose();var n=this;App.TimerManager.doTimer(600,5,function(){if(0==e)App.SoundManager.playEffect("cow"+t.banker_open_type+"_mp3"),n.niuji(t.banker_open_type,e,!0),n["Lottery"+e].visible=!0;else if(t.place_results[e-1].place==e-1){var i=t.place_results[e-1].open_type,o=t.place_results[e-1].is_win;n.niuji(i,e,o),n["Lottery"+e].visible=!0,i>=10?App.SoundManager.playEffect("cow10_mp3"):App.SoundManager.playEffect("cow"+i+"_mp3")}e++},this,function(){n.applyFunc("openwinloseOpen",t)},this)},e.prototype.winlossRun=function(t){var e=this.bunko4;e.visible=!1,e.texture=RES.getRes(4==t?"brnn_menu_json.brnn_ui_tongpei":"brnn_menu_json.brnn_ui_tongsha"),e.visible=!0,egret.Tween.get(e).to({y:e.y-50},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({y:e.y+50},100,egret.Ease.sineInOut)},this)},e.prototype.directwinloss=function(t){var e=this.bunko4;e.visible=!1,e.texture=RES.getRes(4==t?"brnn_menu_json.brnn_ui_tongpei":"brnn_menu_json.brnn_ui_tongsha"),e.visible=!0},e.prototype.directniuji=function(t){this.cleanwinAndlose();for(var e=0;5>e;e++)if(0==e)this.niuji(t.banker_open_type,e,!0),this["Lottery"+e].visible=!0;else{var n=t.place_results[e-1].open_type,i=t.place_results[e-1].is_win;this.niuji(n,e,i),this["Lottery"+e].visible=!0}},e.prototype.cleanwinAndlose=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this);for(var t=0;5>t;t++)this["bunko"+t].visible=!1,this["Lottery"+t].visible=!1,this["beefCard"+t].source=""},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.log("Brnn brnnPlaceIsWin destroy"),this.cleanwinAndlose(),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this)},e}(BaseEuiComponent);t.brnnPlaceIsWin=e,__reflect(e.prototype,"brnn.brnnPlaceIsWin")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.skinName="brnnPopupSkin",i._prompt.initComponent(e),i._setchip.initComponent(e),i._brnnHelp.initBrnnComponent(),i._brnnchangeTable.initComponent(e),i._brnnOpenRecord.initComponent(e),i._brnnchangeTable.getTableList().initComponent(e),i}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this._brnnchangeTable.initUI()},e.prototype.createSetChip=function(){this._setchip.getcoordinate(),this._setchip.createChip()},e.prototype.setDefaultChip=function(t){this._setchip.setDefaultChip(t)},e.prototype.createTableList=function(t,e){this._brnnchangeTable.createList(t,e)},e.prototype.insertState=function(t){this._brnnchangeTable.insertState(t)},e.prototype.insertChart=function(t){this._brnnchangeTable.insertChart(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._setchip.addEvent(),this._brnnHelp.addEvent(),this._brnnOpenRecord.addEvent(),this._winandlose.addEvent(),this._brnnTakeNum.addEvent(),this._brnnchangeTable.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._setchip.removeEvent(),this._brnnHelp.removeEvent(),this._brnnOpenRecord.removeEvent(),this._winandlose.removeEvent(),this._brnnTakeNum.removeEvent(),this._brnnchangeTable.removeEvent()},e.prototype.showchangePopup=function(){this._brnnchangeTable.showPopup()},e.prototype.closechangePopup=function(){this._brnnchangeTable.closePoput()},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("brnn销毁popupView"),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this._winandlose.destroy(),this._setchip.destroy(),this._brnnchangeTable.destroy(),this.removeEvent()},e}(BaseEuiView);t.brnnPopupView=e,__reflect(e.prototype,"brnn.brnnPopupView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.recordPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createRecord=function(){var e=t.recordPool.pop();return e||(e=new n),e.initup(),e},t.prototype.releaseRecord=function(e){return egret.is(e,"BrnnRecord")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.recordPool.unshift(e)):void Log.log(e,"is not BrnnRecord")},t.prototype.clear=function(){for(;t.recordPool.length;)t.recordPool.pop().destroy()},t._i=null,t.recordPool=null,t}();t.recordFactory=e,__reflect(e.prototype,"brnn.recordFactory");var n=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._rankingId=0,e._isRelease=!1,e.skinName="BrnnRecordIcon",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.BrnnRecord");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanRecordBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRecord","destroy")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.initup=function(){this._isRelease=!1},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){if(t){this._lssue.text=t.issue,this.time.text=t.time,0==this._rankingId&&(this._lssue.textColor=16711935,this.time.textColor=16711935);for(var e=t.place_info,n=0;n<e.length;n++){var i=e[n].place_id;this["openNum"+i].text=e[n].open_number,this["openType"+i].text=0==e[n].open_type?"无牛":10==e[n].open_type?"牛牛":11==e[n].open_type?"五花牛牛":"牛"+e[n].open_type;var o=e[n].is_win;o&&4!=n&&(this["lssueWin"+i].visible=!0)}for(var r=t.issue_number.split(","),s=0;s<r.length;s++)this._numList.getChildAt(s).source="brnn_popup_json."+r[s]}},e.prototype.setrankingId=function(t){this._rankingId=t},e.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),Log.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.clean=function(){this._isRelease=!0,R.removeFromParent(this),egret.Tween.removeTweens(this),Log.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.BrnnRecord=n,__reflect(n.prototype,"brnn.BrnnRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._mIsAddEvent=!1,t}return __extends(n,e),n.prototype.init=function(){this._mIsAddEvent||(this._mIsAddEvent=!0,this.addEventListener(egret.Event.REMOVED,this.onRemove,this))},n.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data&&this.data){this._lssue.text=this.data.issue,this.time.text=this.data.time,this.frame.source="brnn_popup_json.brnn_ui_diyitiao",this.data.issue==t.ControllerCon.newIssueId?(this._lssue.textColor=16711935,this.time.textColor=16711935):(this._lssue.textColor=10582988,this.time.textColor=10582988);for(var n=this.data.place_info,i=0;i<n.length;i++){var o=n[i].place_id;this["openNum"+o].text=n[i].open_number,this["openType"+o].text=0==n[i].open_type?"无牛":10==n[i].open_type?"牛牛":11==n[i].open_type?"五花牛牛":"牛"+n[i].open_type;var r=n[i].is_win;4!=i&&(r?this["lssueWin"+o].visible=!0:this["lssueWin"+o].visible=!1)}for(var s=this.data.issue_number.split(","),a=0;a<s.length;a++)this._numList.getChildAt(a).source="brnn_popup_json."+Number(s[a])}},n.prototype.setIssueIdAndTimeColor=function(){this._lssue.textColor=16711935,this.time.textColor=16711935},n.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED,this.onRemove,this),this.destroy()},n.prototype.destroy=function(){Log.log("BrnnRecordIcon destroy.. "),this.data=void 0,this._mIsAddEvent=!1},n}(eui.ItemRenderer);t.BrnnRecordIcon=e,__reflect(e.prototype,"brnn.BrnnRecordIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._mRender=new common.comBones,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.brnnSpecial");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t.clear(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("brnn.brnnSpecial","destroy")},e.prototype.init=function(t){this.parent||(t.addChild(this),this.addChild(this._mRender))},e.prototype.play=function(t){this._mRender.play(t)},e.prototype.renderUpdateId=function(t){this._mRender.updateId("star_1")},e.prototype.findXY=function(t,e){this.callBack=t,this.thisObj=e,App.TimerManager.doTimer(80,999,this.callBackFind,this)},e.prototype.callBackFind=function(){this.callBack&&this.callBack.call(this.thisObj)},e.prototype.clearfind=function(){App.TimerManager.removeAll(this)},e.prototype.clear=function(){this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren()},e.prototype.destroy=function(){this._mRender&&this._mRender.destroy(),this._mRender=void 0,this.callBack=void 0,this.thisObj=void 0},e}(ActionExpand);t.brnnSpecial=e,__reflect(e.prototype,"brnn.brnnSpecial")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var n=t.call(this,"BrnnTakeNum")||this;return n.visible=!1,n}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.takeclose,this.closePoput,this,{}),this.RankBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.takeclose),this.RankBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BrnnTakeNum=e,__reflect(e.prototype,"brnn.BrnnTakeNum")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(n){var i=e.call(this,"brnnTimeSkin")||this;return i.isStop=!1,i.index=0,i.visible=!1,i.stopTimeType=t.BrnnGameTypeConst.Classic,i}return __extends(n,e),n.prototype.startTimer2=function(t){this.index=0,this.isStop=!1;var e=Math.round(t/1e3);this.LabelTip1.text=e+"",this.visible=!0,this.index=e,this.scaleY=this.scaleX=1,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},n.prototype.start=function(){if(this.stopTimeType==t.BrnnGameTypeConst.Classic){if(this.index--,this.index<=3&&this.index>0&&(App.SoundManager.playEffect("countdown_mp3"),this.numShake()),this.index<0)return this.index=0,this.LabelTip1.text=this.index+"",void App.TimerManager.removeAll(this);this.LabelTip1.text=3==this.index?"w":2==this.index?"m":1==this.index?"n":this.index+""}else this.cleanIssueTime()},n.prototype.over=function(){this.index=0,this.LabelTip1.text="0",this.visible=!1,this.recoverySize(),this.playBetEnd()},n.prototype.playBetEnd=function(){this.isStop||(this.isStop=!0,this.stopTimeType==t.BrnnGameTypeConst.Classic&&(App.SoundManager.playEffect("stop_mp3"),this.applyFunc("onOver")))},n.prototype.numShake=function(){var t=this.LabelTip1;egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut).call(function(){},this),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},n.prototype.recoverySize=function(){var t=this.LabelTip1;t.scaleX=1,t.scaleY=1},n.prototype.cleanIssueTime=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this.LabelTip1),R.removeAllTimeOut(this),this.recoverySize(),this.index=0,this.LabelTip1.text="0",this.visible=!1},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.cleanIssueTime()},n}(BaseEuiComponent);t.brnnTime=e,__reflect(e.prototype,"brnn.brnnTime")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var n=t.call(this,"winandloseSkin")||this;return n.visible=!1,n}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.close,this.closePoput,this,{})},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.close)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.runChart=function(t){if(this.rightWrongVisible(),t&&t.length){for(var e=0;e<t.length;e++)if(t[e].is_win&&t[e].is_win.length)for(var n=0;n<t[e].is_win.length;n++)this["region_"+t[e].place].getChildAt(n).source=0==t[e].is_win[n]?"brnn_popup_json.brnn_ui_cuo":"brnn_popup_json.brnn_ui_dui",this["region_"+t[e].place].getChildAt(n).visible=!0;if(t[0].is_win&&t[0].is_win.length){var i=t[0].is_win.length-1,o=this._movelist.getChildAt(i);this._latestLogo.x=o.x-25+3.5,this._latestLogo.y=o.y-29-13,this._latestLogo.visible=!0}}},e.prototype.rightWrongVisible=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++)this["region_"+t].getChildAt(e).source="",this["region_"+t].getChildAt(e).visible=!1;this._latestLogo.visible=!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.winandloseView=e,__reflect(e.prototype,"brnn.winandloseView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.Scroll_Bar_Height=50,t.Scroll_Width=50,t.Renew_Scroll_Width=1e3,t.Help_bar_X=603,t.Table_Bar_X=850,t.Record_Bar_X=975,t.NET_MSG={ENTER_GAME_R:"10601",ONLINE_NUM:"10602",ISSUE_NOTIFY:"10603",STATENOTIFY:"10604",LIMIT_NOTIFY:"10605",ME_BET:"10606",BET_RESPONSE:"10607",PLAYER_BET_INFONOTIFY:"10608",GAME_BET_INFO_NOTIFY:"10609",GAME_RESULT_NOTIFY:"10610",EXCHANGE_NOTIFY:"10611",CHART_REQ:"10612",CHART_NOTIFY:"10613",WIN_RECORD_REQ:"10614",WIN_RECORD_RES:"10615",RANKING_LIST_REQ:"10616",RANKING_LIST_RES:"10617",DEBUG_SET_CARD_REQ:"10618",DEBUG_SET_CARD_RES:"10619",SPECIAL_PLAYER_RES:"10620",SPECIAL_PLAYER_ACTION_RES:"10621",CHIPS_RECORD_REQ:"10622",CHIPS_RECORD_NOTIFY:"10623",HALL_CHART_REQ:"10624",HALL_CHART_RES:"10625",HALL_CHART_NOTIFY:"10626",HALL_STATUS_NOTIFY:"10627",ISSUE_HISTORY_REQ:"10628",ISSUE_HISTORY_RES:"10629",SWITCH_TABLE_REQ:"10630",ENTER_TABLE_REQ:"10632",ENTER_TABLE_RES:"10633",STATE_TEQ:"10635",STATE_TES:"10636",ABNORMAL_NOTIFY:"10637",HIT_RATE_RES:"10638"},t.Const_onEnterGameCallBack="Const_1001",t.onIssueNotifyBack="1001",t.onLimitNotifyBack="1002",t.onStateNotifyyBack="1003",t.onExchangeNotifyBack="1004",t.onSelfBetCallBack="1005",t.onBetResponseBack="1006",t.onPlayerBetInfoNotifyBack="1007",t.onGameBetInfoNotify="1008",t.onOnlineNumCallBack="1009",t.onChartNotifyBack="1010",t.onGameResultNotifyBack="1011",t.onWinningRecordResBack="1012",t.onrankinglistresBack="1013",t.onLeaveSceneResBack="1014",t.ReturnBet=[{place:0,bet_money:0},{place:1,bet_money:0},{place:2,bet_money:0},{place:3,bet_money:0}],t.Special_Player="Special_Player",t.Special_Player_Action="Special_Player_Action",t.Chips_Record_Notify="Chips_Record_Notify",t.rechargeMoney="CrechargeMoney",t.HallChartNotify="HallChartNotify",t.btnHallcharTReq="btnHallcharTReq",t.createHallChart="createHallChart",t.renewRoomLimit="renewRoomLimit",t.createGameHallChart="createGameHallChart",t.changeHallChart="changeHallChart",t.changeGameChart="changeGameChart",t.changeHallstaus="changeHallstaus",t.changeGamestaus="changeGamestaus",t.closeHallChart="closeHallChart",t.getEnterTableRes="getEnterTableRes",t.onEnterBrnnGame="onEnterBrnnGame",t.onEnterTableGameBrnn="onEnterTableGameBrnn",t.onStateTimeResBack="onStateTimeResBack",t.addPageSignMove="addPageSignMove",t.getIssueHistory="getIssueHistory",t.smallChip="t_",t.Overweight={yy:235,index:0,isEnd:!1},t}();t.ControllerCon=e,__reflect(e.prototype,"brnn.ControllerCon");var n;!function(t){t[t.ENTER_GAME_R=10601]="ENTER_GAME_R",t[t.ONLINE_NUM=10602]="ONLINE_NUM",t[t.ISSUE_NOTIFY=10603]="ISSUE_NOTIFY",t[t.STATENOTIFY=10604]="STATENOTIFY",t[t.LIMIT_NOTIFY=10605]="LIMIT_NOTIFY",t[t.ME_BET=10606]="ME_BET",t[t.BET_RESPONSE=10607]="BET_RESPONSE",t[t.PLAYER_BET_INFONOTIFY=10608]="PLAYER_BET_INFONOTIFY",t[t.GAME_BET_INFO_NOTIFY=10609]="GAME_BET_INFO_NOTIFY",t[t.GAME_RESULT_NOTIFY=10610]="GAME_RESULT_NOTIFY",t[t.EXCHANGE_NOTIFY=10611]="EXCHANGE_NOTIFY",t[t.CHART_REQ=10612]="CHART_REQ",t[t.CHART_NOTIFY=10613]="CHART_NOTIFY",t[t.WIN_RECORD_REQ=10614]="WIN_RECORD_REQ",t[t.WIN_RECORD_RES=10615]="WIN_RECORD_RES",t[t.RANKING_LIST_REQ=10616]="RANKING_LIST_REQ",t[t.RANKING_LIST_RES=10617]="RANKING_LIST_RES",t[t.DEBUG_SET_CARD_REQ=10618]="DEBUG_SET_CARD_REQ",t[t.DEBUG_SET_CARD_RES=10619]="DEBUG_SET_CARD_RES",t[t.SPECIAL_PLAYER_RES=10620]="SPECIAL_PLAYER_RES",t[t.SPECIAL_PLAYER_ACTION_RES=10621]="SPECIAL_PLAYER_ACTION_RES",t[t.CHIPS_RECORD_REQ=10622]="CHIPS_RECORD_REQ",t[t.CHIPS_RECORD_NOTIFY=10623]="CHIPS_RECORD_NOTIFY",t[t.HALL_CHART_REQ=10624]="HALL_CHART_REQ",t[t.HALL_CHART_RES=10625]="HALL_CHART_RES",t[t.HALL_CHART_NOTIFY=10626]="HALL_CHART_NOTIFY",t[t.HALL_STATUS_NOTIFY=10627]="HALL_STATUS_NOTIFY",t[t.ISSUE_HISTORY_REQ=10628]="ISSUE_HISTORY_REQ",t[t.ISSUE_HISTORY_RES=10629]="ISSUE_HISTORY_RES",t[t.SWITCH_TABLE_REQ=10630]="SWITCH_TABLE_REQ",t[t.ENTER_TABLE_REQ=10632]="ENTER_TABLE_REQ",t[t.ENTER_TABLE_RES=10633]="ENTER_TABLE_RES",t[t.STATE_TEQ=10635]="STATE_TEQ",t[t.STATE_TES=10636]="STATE_TES",t[t.ABNORMAL_NOTIFY=10637]="ABNORMAL_NOTIFY"}(n=t.BrnnProxyConst||(t.BrnnProxyConst={}));var i;!function(t){t[t.Const_onEnterGameCallBack=10001]="Const_onEnterGameCallBack",t[t.onIssueNotifyBack=10002]="onIssueNotifyBack",t[t.onLimitNotifyBack=10003]="onLimitNotifyBack",t[t.onStateNotifyyBack=10004]="onStateNotifyyBack",t[t.onExchangeNotifyBack=10005]="onExchangeNotifyBack",t[t.onSelfBetCallBack=10006]="onSelfBetCallBack",t[t.onBetResponseBack=10007]="onBetResponseBack",t[t.onPlayerBetInfoNotifyBack=10008]="onPlayerBetInfoNotifyBack",t[t.onGameBetInfoNotify=10009]="onGameBetInfoNotify",t[t.onOnlineNumCallBack=10010]="onOnlineNumCallBack",t[t.onChartNotifyBack=10011]="onChartNotifyBack",t[t.onGameResultNotifyBack=10012]="onGameResultNotifyBack",t[t.onWinningRecordResBack=10013]="onWinningRecordResBack",t[t.onrankinglistresBack=10014]="onrankinglistresBack",t[t.onSpecialPlayerActionResBack=10015]="onSpecialPlayerActionResBack",t[t.onStateTimeResBack=10016]="onStateTimeResBack",t[t.onLeaveSceneResBack=10017]="onLeaveSceneResBack",t[t.onHitRateResBack=10018]="onHitRateResBack"}(i=t.BrnnCallBackConst||(t.BrnnCallBackConst={}));var o=function(){function t(){this.Brnn1counter_pick1="Brnn1counter_pick1",this.Brnn1counter_pick2="Brnn1counter_pick2",this.Brnn1counter_pick5="Brnn1counter_pick5",this.Brnn1counter_pick10="Brnn1counter_pick10",this.Brnn1counter_pick50="Brnn1counter_pick50",this.Brnn1counter_pick100="Brnn1counter_pick100",this.Brnn1counter_pick500="Brnn1counter_pick500",this.Brnn1counter_pick1000="Brnn1counter_pick1000",this.Brnn1counter_pickAllin="Brnn1counter_pickAllin",this.Brnn1counter_bet1="Brnn1counter_bet1",this.Brnn1counter_bet10="Brnn1counter_bet10",this.Brnn1counter_bet50="Brnn1counter_bet50",this.Brnn1counter_bet100="Brnn1counter_bet100",this.Brnn1counter_bet500="Brnn1counter_bet500",this.Brnn1counter_bet1000="Brnn1counter_bet1000",this.Brnn1counter_betallin="Brnn1counter_betallin",this.Brnn1operate_buttoncancel="Brnn1operate_buttoncancel",this.Brnn1operate_buttonrepeat="Brnn1operate_buttonrepeat",this.Brnn1operate_buttonconfirm="Brnn1operate_buttonconfirm",this.Brnn1operate_autoconfirm="Brnn1operate_autoconfirm",this.Brnn1operate_setcounter="Brnn1operate_setcounter",this.Brnn1operate_addcounter="Brnn1operate_addcounter",this.Brnn1bets_east="Brnn1bets_east",this.Brnn1bets_south="Brnn1bets_south",this.Brnn1bets_west="Brnn1bets_west",this.Brnn1bets_north="Brnn1bets_north",this.Brnn1direct_maps="Brnn1direct_maps",this.Brnn1leaderboard_button="Brnn1leaderboard_button",this.Brnn1menu_button="Brnn1menu_button",this.Brnn1menu_help_button="Brnn1menu_help_button",this.Brnn1menu_set_button="Brnn1menu_set_button",this.Brnn1menu_record_button="Brnn1menu_record_button",this.Brnn1menu_back_button="Brnn1menu_back_button"}return t}();t.buryPointConst=o,__reflect(o.prototype,"brnn.buryPointConst");var r;!function(t){t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North"}(r=t.BrnnPlaceConst||(t.BrnnPlaceConst={}));var s;!function(t){t[t.Classic=1]="Classic",t[t.Lottery=2]="Lottery",t[t.AllFields=3]="AllFields"}(s=t.BrnnGameTypeConst||(t.BrnnGameTypeConst={}));var a;!function(t){t[t.PLUTE0=0]="PLUTE0",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.ONLINE=4]="ONLINE",t[t.SELF=5]="SELF"}(a=t.BrnnPlayerConst||(t.BrnnPlayerConst={}));var l;!function(t){t[t.BetSucc=0]="BetSucc",t[t.BetErrorPlace=1]="BetErrorPlace",t[t.BetErrorMoney=2]="BetErrorMoney",t[t.BetErrorState=3]="BetErrorState",t[t.BetErrorOutLimitMin=4]="BetErrorOutLimitMin",t[t.BetErrorOutLimitMax=5]="BetErrorOutLimitMax",t[t.BetErrorOutLimitTotal=6]="BetErrorOutLimitTotal",t[t.BetErrorNoEnoughMoney=7]="BetErrorNoEnoughMoney",t[t.BetErrorNULL=8]="BetErrorNULL"}(l=t.BetResultCode||(t.BetResultCode={}));var h;!function(t){t[t.OutLimitMax=1]="OutLimitMax",t[t.StudBet=2]="StudBet",t[t.NoEnoughMoney=6]="NoEnoughMoney"}(h=t.BetResultPopupConst||(t.BetResultPopupConst={}));var p;!function(t){t[t.DEALING=1]="DEALING",t[t.BETTING=2]="BETTING",t[t.EXCHANGE=3]="EXCHANGE"}(p=t.BrnnGameState||(t.BrnnGameState={}));var c;!function(t){t[t.OrdinaryMultiple=1]="OrdinaryMultiple",t[t.MediumMultiple=2]="MediumMultiple",t[t.HighMultiple=3]="HighMultiple"}(c=t.BrnnmultipleConst||(t.BrnnmultipleConst={}));var _;!function(t){t[t.Advance=1]="Advance",t[t.Delay=2]="Delay",t[t.Normal=3]="Normal"}(_=t.BrnnLotterystatusConst||(t.BrnnLotterystatusConst={}));var u;!function(t){t[t.Hall=1]="Hall",t[t.Change=2]="Change"}(u=t.BrnnTableConst||(t.BrnnTableConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var n=new t(e);return n},t.prototype.addDataListener=function(t,e){var n;n={callback:t,target:e};for(var i=0,o=this._listeners;i<o.length;i++){var r=o[i];if(e===r.target)return}this._listeners.push(n)},t.prototype.removeDataListener=function(t,e){for(var n=0;n<this._listeners.length;n++)if(e===this._listeners[n].target){this._listeners.splice(n,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"brnn.DataNotify")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.brnnGg=0]="brnnGg",t[t.Base=1300]="Base",t[t.brnnPopup=1301]="brnnPopup",t[t.Recharge=1302]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._brnnPopupView=null,t._winningRecord=null,t._ranking=null,t._gameSet=null,t._brnnModel=null,t.chiplist=[1,2,5,10,20,50,100,500,1e3,0],t.isFly=!0,t.currentMoney=[],t.chipMoney=[1,10,100,1e3],t
}return __extends(n,e),n.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},n.prototype.onInit=function(n){e.prototype.onInit.call(this),Log.trace("GameController init()"),this.registers(),this._brnnModel.tableId=this.currDeskId,this._brnnModel.isLottery=this.currDeskType,App.ViewManager.open(t.ViewConst.Base,this._brnnModel),App.ViewManager.open(t.ViewConst.brnnPopup),App.SoundManager.playBg("bg_mp3"),this._brnnPopupView.createSetChip(),this.createGameHallChart2(),this._view.displayUI()},n.prototype.inits=function(){e.prototype.inits.call(this),this._brnnModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._brnnModel),this._view=new t.GameView(this),this._brnnPopupView=new t.brnnPopupView(this,LayerManager.UI_Message),this._brnnPopupView.GameSet.initSet(),this.addEventListeners(),this._view.newPoker(),this._view.initCoinBox(),this._brnnModel.UserMoney=this.player.getMoney(),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))},n.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.brnnPopup,this._brnnPopupView),this.registerRecharge(),this.registerRedpacket()},n.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this._brnnModel.isBackstage=!1},n.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent(),this.registerFunc("onOver",this.betOver,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("touch",this.gamesite,this),this.registerFunc("ShowHandBtn",this.showhandPost,this),this.registerFunc("Betpost",this.Betpost,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("opentrendps",this.TrendTu,this),this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("openwinPopup",this.openwinPopup,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("brnnChangeTable",this.brnnChangeTable,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc(t.ControllerCon.Special_Player,this.specialPlayer,this),this.registerFunc(t.ControllerCon.Special_Player_Action,this.specialPlayerAction,this),this.registerFunc(t.ControllerCon.Chips_Record_Notify,this.ChipsRecordNotify,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("btnOpenRecord",this.btnOpenRecord,this),this.registerFunc("openLotteryHelp",this.openLotteryHelp,this),this.registerFunc(t.ControllerCon.createGameHallChart,this.createGameHallChart,this),this.registerFunc("onEnterTableGameBrnn",this.onEnterTableGameBrnn,this),this.registerFunc(t.ControllerCon.getIssueHistory,this.getIssueHistory,this),this.registerFunc(t.ControllerCon.changeGamestaus,this.changeGamestaus,this),this.registerFunc(t.ControllerCon.changeGameChart,this.changeGameChart,this),this.registerFunc("oncloseGameBrnn",this.oncloseGameBrnn,this),this.registerFunc(t.ControllerCon.getEnterTableRes,this.getEnterTableRes,this),this.registerFunc("openwinloseOpen",this.openwinloseOpen,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc("confirmShowLimitBet",this.confirmShowLimitBet,this),this.registerFunc("operateAddcounter",this.operateAddcounter,this),this.registerFunc("btnShowMenu",this.btnShowMenu,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this)},n.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},n.prototype.onUserMoneyChange=function(t){this._brnnModel.UserMoney=t.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))},n.prototype.getModel=function(){return e.prototype.getModel.call(this)},n.prototype.addEventListeners=function(){this.registerFunc(t.BrnnCallBackConst.Const_onEnterGameCallBack,this.onEnterGameCallBack,this),this.registerFunc(t.BrnnCallBackConst.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onLimitNotifyBack,this.onLimitNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onStateNotifyyBack,this.onStateNotifyyBack,this),this.registerFunc(t.BrnnCallBackConst.onExchangeNotifyBack,this.onExchangeNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onBetResponseBack,this.onBetResponseBack,this),this.registerFunc(t.BrnnCallBackConst.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onGameBetInfoNotify,this.onGameBetInfoNotify,this),this.registerFunc(t.BrnnCallBackConst.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.BrnnCallBackConst.onChartNotifyBack,this.onChartNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onrankinglistresBack,this.onrankinglistresBack,this),this.registerFunc(t.BrnnCallBackConst.onStateTimeResBack,this.onStateTimeResBack,this),this.registerFunc(t.BrnnCallBackConst.onHitRateResBack,this.onHitRateResBack,this)},n.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.requestRemainTime(),this.clearTable(),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this._brnnModel.isBackstage=!0},n.prototype.clearTable=function(){this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),this._view.stopshuffle(),this._view.time.cleanIssueTime(),this._view.stopTimes(),this._view.cleanSettlementEffect(),this._view.stopRegion()},n.prototype.clearCoins=function(){this._view.clearCoin(),this._view.initCoinBox(),this._view.starvisible(),this._view.resetBetMoney(),this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[]},n.prototype.TrendTu=function(){var e={table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._proxy.chartlist(e),this._brnnPopupView._winandlose.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1direct_maps"):R.sendPlayerAction("Brnn2direct_maps")},n.prototype.showRank=function(){this._proxy.ranking({begin_idx:0,req_count:50,table_id:this._brnnModel.tableId}),App.EasyLoading.showOnTimeOut(),this._brnnPopupView.Ranking.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1leaderboard_button"):R.sendPlayerAction("Brnn2leaderboard_button")},n.prototype.showRecord=function(){this._brnnPopupView.WinningRecord.showPopup();var e=this._brnnModel.recordList;e.length&&this._brnnPopupView.WinningRecord.rankData(e),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_record_button"):R.sendPlayerAction("Brnn2menu_record_button")},n.prototype.showGameSet=function(){this._brnnPopupView.GameSet.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_set_button"):R.sendPlayerAction("Brnn2menu_set_button")},n.prototype.goRecharge=function(){App.SoundManager.playEffect("click_mp3")},n.prototype.backToLobby=function(){({table_id:this._brnnModel.tableId});this._proxy.sendLeaveDesk(this._brnnModel.tableId),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_back_button"):R.sendPlayerAction("Brnn2menu_back_button")},n.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},n.prototype.openwinPopup=function(t){this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney));for(var e in this._brnnModel.specialMoney){var n=App.CommonUtils.money2Str(this._brnnModel.specialMoney[e]);Number(n)>0&&this._view.specialPlayerMoney(n,e)}this._view.winChipControl(t)},n.prototype.showHelp=function(){this._brnnPopupView._brnnHelp.showPopup(!0),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_help_button"):R.sendPlayerAction("Brnn2menu_help_button")},n.prototype.confirmShowhand=function(){var t=this.getAllPreBet(),e=this._brnnModel.UserMoney-t;this.Betpost(this._brnnModel.BetRegion,e)},n.prototype.ShowsetChip=function(){this._brnnPopupView._setchip.showMenu(),this._brnnModel._chipNum.length&&(this._brnnPopupView.setDefaultChip(this._brnnModel._chipNum),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_setcounter"):R.sendPlayerAction("Brnn2operate_setcounter"))},n.prototype.brnnChangeTable=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!0};App.EasyLoading.showOnTimeOut(),this._proxy.getGameChart(t),this._brnnPopupView.showchangePopup()},n.prototype.changeMultiple=function(t){this._brnnModel._multiple=t,this._view.setchipValue(t)},n.prototype.getFiveChip=function(t){if(this._brnnModel._chipNum=[].concat(t),this._brnnModel._chipNum.length){this._view.setBtnChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple);var e=JSON.stringify(this._brnnModel._chipNum),n={chips:e,table_id:this._brnnModel.tableId};this._proxy.requestChip(n)}},n.prototype.getChipValue=function(e){this._brnnModel._chipMoney=[],this._brnnModel._chipMoney=e;for(var n=0;n<e.length;n++){var i=e[n]/this._brnnModel._multiple;this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterPick(i):t.conFun.Brnn2counterPick(i)}},n.prototype.specialPlayer=function(t){if(t.length)for(var e=0;e<t.length;e++)this._view.setInformation(t[e])},n.prototype.specialPlayerAction=function(e){if(Log.log("specialPlayerAction",e),e)if(e.play_action){for(var n=0,i=0;i<e.bets.length;i++)e.bets[i].money>0&&(n+=e.bets[i].money,this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic&&(this._view.createWinChip(e.bets[i].place,e.play_role),-1==this._brnnModel._specialPlayer.indexOf(e.play_role)&&this._brnnModel._specialPlayer.push(e.play_role)));this._view.playerWinMoney(App.CommonUtils.money2Str(n),e.play_role),this._brnnModel.specialMoney[e.play_role]=e.balance,!this._brnnModel.isFly&&n>0&&(this._view.directFontEnlarge(e.play_role),this._view.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),e.play_role))}else{var o=App.CommonUtils.money2Str(e.balance);this._brnnModel.specialMoney[e.play_role]=e.balance,this._view.avatarShake(e.play_role),this._view.specialPlayerMoney(o,e.play_role);for(var i=0;i<e.bets.length;i++){var r=e.bets[i].place;e.play_role||-1!=this._brnnModel._isFlylist.indexOf(r)||(this._brnnModel._isFlylist.push(r),this._view.starRun(r))}for(var s=0;s<e.bets.length;s++)this._view.createFlyCoin(e.play_role,e.bets[s].place,e.bets[s].money)}},n.prototype.ChipsRecordNotify=function(){this._brnnModel._chipNum.length&&(this._view.createChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple))},n.prototype.onClickBackRoom=function(){this.goBack2Room()},n.prototype.rechargeMoney=function(){App.ViewManager.open(LobbyViewConst.Recharge)},n.prototype.btnOpenRecord=function(){var t={begin_idx:0,req_count:30,table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._proxy.requestHallHistoryReq(t),this._brnnPopupView._brnnOpenRecord.showPopup(),R.sendPlayerAction("Brnn2operate_historyaward")},n.prototype.openLotteryHelp=function(){this._brnnPopupView._brnnTakeNum.showPopup(),R.sendPlayerAction("Brnn2operate_rulehint")},n.prototype.createGameHallChart=function(t){this._tempGameHallChart=t,this.createGameHallChart2()},n.prototype.createGameHallChart2=function(){this._tempGameHallChart&&this._brnnPopupView.parent&&this._brnnPopupView.createTableList(this._tempGameHallChart,this._brnnModel.tableId)},n.prototype.onEnterTableGameBrnn=function(t,e){if(this.setCurrDeskId(t),this.setCurrDeskType(e),t==this._brnnModel.tableId)this._brnnPopupView._brnnchangeTable.closePoput();else{var n={table_id_old:this._brnnModel.tableId,table_id_new:t};App.EasyLoading.showOnTimeOut(),this._proxy.requestDesk(n),this._brnnPopupView._brnnchangeTable.closePoput()}},n.prototype.getIssueHistory=function(t){this._brnnPopupView._brnnOpenRecord.rankData(t)},n.prototype.changeGamestaus=function(t){this._brnnPopupView.insertState(t)},n.prototype.changeGameChart=function(t){this._brnnPopupView.insertChart(t)},n.prototype.oncloseGameBrnn=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!1};this._proxy.getGameChart(t)},n.prototype.getEnterTableRes=function(t){this._view.displayUI(),this.initDesktopData(),this._view.closeConfirmFrame(),this._brnnModel.isLottery=t.table_type,this._brnnModel.tableId=t.table_id_new},n.prototype.openwinloseOpen=function(t){this._view.winloseOpen(t)},n.prototype.confirmShowRecharge=function(){App.ViewManager.open(LobbyViewConst.Recharge)},n.prototype.confirmShowLimitBet=function(){if(this._brnnModel.checktext){var t=[],e=0,n=this._brnnModel.limitBet[this._brnnModel.BetRegion];t.push({place:this._brnnModel.BetRegion,bet_money:n,table_id:this._brnnModel.tableId,chart_id:e});var i={bets:t,table_id:this._brnnModel.tableId};this._proxy.requestBet(i)}else this._brnnModel.preBetList[this._brnnModel.BetRegion]+=this._brnnModel.oldIimitMoney,this._view.prepare(this._brnnModel.BetRegion,Math.floor(this._brnnModel.preBetList[this._brnnModel.BetRegion]/1e4))},n.prototype.operateAddcounter=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_addcounter"):R.sendPlayerAction("Brnn2operate_addcounter")},n.prototype.btnShowMenu=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_button"):R.sendPlayerAction("Brnn2menu_button")},n.prototype.confirmLimitBet=function(){this._brnnModel.limitBetMoney&&this.Betpost(this._brnnModel.BetRegion,this._brnnModel.limitBetMoney)},n.prototype.onEnterGameCallBack=function(t){Log.log("onEnterGameCallBack",t),t.table_id==this._brnnModel.tableId&&this.gameJoin(t)},n.prototype.onIssueNotifyBack=function(e){if(e.table_id==this._brnnModel.tableId){if(this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery){if(this._view.Issuenum.text=e.issue+"期:",e.issue_number){var n=e.issue_number.split(",");if(n.length&&(this._brnnModel.ballList=n,this._view.dropCard(this._brnnModel.ballList,this._brnnModel.statusType),this._brnnModel.curIssue!=e.issue&&null!=this._brnnModel.curIssue)){var i="第 "+e.issue+" 期  已开奖";App.ScrollTxtTips.showTip(i)}}}else this._view.Issuenumber.text=e.issue;this._brnnModel.issueId=e.issue}},n.prototype.onLimitNotifyBack=function(t){if(Log.log("onLimitNotifyBack",t),t.table_id==this._brnnModel.tableId){this._brnnModel.limitBet=t.limits;for(var e=0;e<t.limits.length;e++)this._brnnModel.betList[t.limits[e].place]=0,this._brnnModel.preBetList[t.limits[e].place]=0}},n.prototype.onStateNotifyyBack=function(e,n){if(Log.log("onStateNotifyyBack",e),this._brnnModel.gameStateData=App.CommonUtils.copyDataHandler(e),this._brnnModel.statusType=e.state,this._view.setCurrentIssue(e.issue),e.table_id==this._brnnModel.tableId){if(this._brnnModel.isBackstage)return void(e.state==t.BrnnGameState.BETTING&&(this.refreshMoney(),this.clearCoins()));this.doGameState(e,n)}},n.prototype.doGameState=function(e,n){switch(e.state){case t.BrnnGameState.BETTING:this.onBetting(e,n);break;case t.BrnnGameState.EXCHANGE:this.onExchange(e)}},n.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),n=Math.round(t.total_time/1e3),i={allTime:n,time:e,status:t.state};return i},n.prototype.onBetting=function(e,n){var i=e.total_time,o=e.remaining_time,r=i-o;this._brnnModel.idBet=!0,this.clearTable(),this._view.tableOdds();n||(this.refreshMoney(),this.clearCoins()),this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?(this._view.lotteyTimer(o),this._view.stopshuffle(),this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),200>=r?(this._brnnModel.curIssue!=e.issue&&(this._brnnModel.curIssue=e.issue),this._brnnModel.lastIssue=this._brnnModel.curIssue,this.initStartBet()):(this.initStartBet(),this._brnnModel.lastIssue=this._brnnModel.curIssue)):(this.initStartBet(),this._view.time.startTimer2(o),200>=r?this._view.shuffleAni():3e3>=r?this._view.directDisplayFapai():this._view.directFapai()),200>=r&&(this._view.playAni(0,"brnn"),App.SoundManager.playEffect("start_mp3"))},n.prototype.initStartBet=function(){this.gamebet(),this.isEnabledBtn(),this._view.initCoinBox()},n.prototype.onExchange=function(e){var n=e.total_time,i=e.remaining_time,o=n-i;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?(this._view.stopTimes(),this._view.lotteryhead.visible=!0,0==e.state_index?(this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos()):1==e.state_index&&(this._brnnModel.statusTime=e.remaining_time)):1==e.state_index&&(200>=o&&this._view.playBetEnd(),this._brnnModel.statusTime=e.remaining_time,this._view.directFapai()),this.betOverCallback()},n.prototype.onOnlineNumCallBack=function(t){Log.log("onOnlineNumCallBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnModel._online=t.online_count,this._view._toolBar.changeOnlineNum(t.online_count))},n.prototype.onExchangeNotifyBack=function(e){if(Log.log("onExchangeNotifyBack",e),e.table_id==this._brnnModel.tableId){this._brnnModel.winBalance=0,this._brnnModel.ExchangeMoney=0,this._brnnModel.winBalance=e.balance,this._brnnModel.UserMoney=e.balance;var n={};this._brnnModel._winPos=[],this._brnnModel._winpleNum=[],this._brnnModel._winLightPos=[];for(var i=0;i<e.place_exchanges.length;i++){var o=e.place_exchanges[i].prize_money;e.place_exchanges[i].bet_money;this._brnnModel.ExchangeMoney+=o,n={place:e.place_exchanges[i].place,money:o},this._brnnModel._winPos.push(n),o>0&&this._brnnModel.isFly&&(-1==this._brnnModel._specialPlayer.indexOf(4)&&this._brnnModel._specialPlayer.push(4),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic&&this._view.createWinChip(e.place_exchanges[i].place,5))}this._brnnModel._winLightPos.push(4);var r=App.CommonUtils.money2Str(this._brnnModel.ExchangeMoney);this._view.playerWinMoney(r,4),!this._brnnModel.isFly&&this._brnnModel.ExchangeMoney>0&&(this._view.directFontEnlarge(4),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))),this._brnnModel.ExchangeMoney>0&&this.setRecordInit(r)}},n.prototype.onBetResponseBack=function(t){Log.log("onBetResponseBack",t),t.table_id==this._brnnModel.tableId&&(this.betShow(t),this._view.avatarShake(4))},n.prototype.onPlayerBetInfoNotifyBack=function(e){if(Log.log("onPlayerBetInfoNotifyBack",e),e.table_id==this._brnnModel.tableId){var n=0;this._brnnModel.truebet.length=0,this._brnnModel.truebet=[];for(var i=e.infos,o=0;o<i.length;o++){var r=i[o],s=r.bet_money;this._view["readyMoney"+o].text=Math.floor(App.CommonUtils.money(r.bet_money)),this._brnnModel.betList[r.place]=r.bet_money,n+=s,this.totalbet(s,r.place)}this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?this._view.setUserBet(App.CommonUtils.money2Str(n)):this._view.setMulUserBet(App.CommonUtils.money2Str(n),App.CommonUtils.money2Str(e.keep_money))}},n.prototype.onGameBetInfoNotify=function(e){Log.log("onGameBetInfoNotify",e);this._brnnModel.statusType;if(e.table_id==this._brnnModel.tableId&&e.infos.length){for(var n=0;n<e.infos.length;n++){var i=e.infos[n],o=i.total_bet_money,r=o-this._brnnModel._betInfoNotify[i.place];if(o>0&&(this._view.onlineShake(),this._brnnModel.statusType==t.BrnnGameState.BETTING)){var s=i.total_bet_money-this._brnnModel._betInfoNotify[i.place];this._view.createFlyCoin(t.BrnnPlayerConst.ONLINE,i.place,s),i.total_bet_money>0&&-1==this._brnnModel._allBetPos.indexOf(i.place)&&this._brnnModel._allBetPos.push(i.place)}r>0&&this._view.numShake(i.place),this._brnnModel._betInfoNotify[i.place]=i.total_bet_money}this._view.showBetMoney(this._brnnModel._betInfoNotify)}},n.prototype.onChartNotifyBack=function(t){Log.log("onChartNotifyBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView._winandlose.runChart(t.charts),App.EasyLoading.hideLoading())},n.prototype.onGameResultNotifyBack=function(e,n){if(Log.log("onGameResultNotifyBack",e),e.table_id==this._brnnModel.tableId){if(this._brnnModel.gameResultData=App.CommonUtils.copyDataHandler(e),this._brnnModel.isBackstage)return;var i=[];if(!e.place_results.length)return;i=i.concat(e.banker_cards);for(var o=0;4>o;o++)i=i.concat(e.place_results[o].cards);this._view.getcardsrc(i);var r=this;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?this._brnnModel.statusTime>9800?(this._brnnModel.isFly=!0,R.setTimeOnce(function(){r._view.directDisplayFapai(),r._view.closeDiceAnimation()},this,1200),R.setTimeOnce(function(){r._view.kaipaiAnimation(e)},this,4500)):(this._brnnModel.isFly=!1,this._view.directFapai(),this._view.directKaipai(e)):this._brnnModel.statusTime>6e3?(this._brnnModel.isFly=!0,this._view.kaipaiAnimation(e)):(this._brnnModel.isFly=!1,this._view.directKaipai(e))}},n.prototype.onrankinglistresBack=function(t){Log.log("onrankinglistresBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView.Ranking.rankData(t.infos),App.EasyLoading.hideLoading())},n.prototype.onStateTimeResBack=function(e){this._brnnModel.isBackstage=!1;var n=this._brnnModel.gameStateData;if(n){n.remaining_time=e.remaining_time,this.onStateNotifyyBack(n,!0);var i=this._brnnModel.gameResultData;n.state==t.BrnnGameState.EXCHANGE&&i&&this.onGameResultNotifyBack(i,!0)}},n.prototype.onHitRateResBack=function(e){var n=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.conFun.setBrnnHitRate(n),this._view.parent&&this._view.tableOdds()},n.prototype.gameJoin=function(t){var e=this.player;t.user_id==e.getUserId()&&(this._brnnModel.multipleTableId=0==t.game_type?1:t.game_type,this._view.setGameScene(t.table_name),this._brnnModel.tableId=t.table_id,this._brnnModel.isLottery=t.table_type,this._view.displayUI(),this._brnnModel.checktext=!0,this._view._loginBtn.setAutoConfirm(!0),this._brnnModel.userId=t.user_id,this._brnnModel.UserMoney=t.balance,this._view._messageInfo.setUserName(t.nick_name),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._view._messageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view._messageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox()))},n.prototype.setAutoBet=function(e){App.SoundManager.playEffect("click_mp3"),this._brnnModel.checktext=e,this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_autoconfirm"):R.sendPlayerAction("Brnn2operate_autoconfirm"),e&&this.confirmBet()},n.prototype.gamebet=function(){this._view.startRegion(),this._brnnModel.UserMoney>1&&this._view._jeButton.toggleBtn(this._brnnModel.chipitem)},n.prototype.gamesite=function(t,e){App.SoundManager.playEffect("click_mp3"),this._view._jeButton.toggleBtn(t),this._brnnModel.chipitem=t,this._brnnModel._chipid=e},n.prototype.Betpost=function(e,n){if(this._brnnModel.BetRegion=e,this._brnnModel._chipMoney.length){var i=n?n:1e4*this._brnnModel._chipMoney[this._brnnModel.chipitem],o=0;if(!this.isLimit(e,i)){if(i){var r={place:e,bet_money:i,table_id:this._brnnModel.tableId,chart_id:o};this._brnnModel.checktext?this.autoBet([r]):(this._brnnModel.preBetList[e]+=i,this._view.showMyPreBet(this._brnnModel.preBetList),this._view._loginBtn.ConserBet.enabled=!0,this._view.enabledConfirmBet())}else{var s=this.getAllPreBet(),a=App.CommonUtils.money(this._brnnModel.UserMoney-s);this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.StudBet,a)}this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction(t.conFun.brnn1betseast[e]):R.sendPlayerAction(t.conFun.brnn2betseast[e])}}},n.prototype.autoBet=function(t){var e=t,n={bets:e,table_id:this._brnnModel.tableId};this._proxy.requestBet(n)},n.prototype.isLimit=function(e,n){for(var i=!1,o=this._brnnModel.limitBet,r=0;r<o.length;r++){var s=o[r];if(s.place==e){var a=this.getAllPreBet(),l=n*(this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?1:this._brnnModel.multipleTableId==t.BrnnmultipleConst.MediumMultiple?5:10),h=this._brnnModel.betList[e],p=this._brnnModel.preBetList[e],c=this._brnnModel.UserMoney,_=a*(this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?1:this._brnnModel.multipleTableId==t.BrnnmultipleConst.MediumMultiple?5:10);0>=c||0>=c-_?(this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney),i=!0):l>c-_?(this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney),i=!0):n<s.limit_min_money&&0!=n?(t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMin,App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money)),i=!0):h+p>=s.limit_max_money?(this._brnnModel.isRepeat||this._brnnModel.isPredict?t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax):t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money)),t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money)),i=!0):n+h+p>s.limit_max_money&&(this._brnnModel.isRepeat||this._brnnModel.isPredict?t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax):(this._brnnModel.limitBetMoney=s.limit_max_money-(h+p),this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.OutLimitMax,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money))),i=!0)}}return i},n.prototype.getAllSelfBet=function(){var t=0;for(var e in this._brnnModel.betList)t+=this._brnnModel.betList[e];return t},n.prototype.getAllPreBet=function(){var t=0;for(var e in this._brnnModel.preBetList)t+=this._brnnModel.preBetList[e];return t},n.prototype.betShow=function(e){var n=e.code,i=e.bets,o=i.length>1?!0:!1,r=this._brnnModel.limitBet[this._brnnModel.BetRegion];if(0!=n){if(this._brnnModel.checktext||(this._view._loginBtn.ConserBet.enabled=!0,this._view.enabledConfirmBet()),n==t.BetResultCode.BetErrorOutLimitMin)return void t.conFun.textReminder(n,App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money));if(n==t.BetResultCode.BetErrorOutLimitMax){if(o)t.conFun.textReminder(n);else{var s=this._brnnModel.betList[this._brnnModel.BetRegion];s>=r.limit_max_money?t.conFun.textReminder(n,App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money)):(this._brnnModel.limitBetMoney=r.limit_max_money-s,this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.OutLimitMax,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money)))}return}return n==t.BetResultCode.BetErrorNoEnoughMoney?void this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney):void t.conFun.textReminder(n)}for(var a=0;a<e.bets.length;a++){var l=e.bets[a].place,h=e.bets[a].bet_money,p=Math.floor(h/1e4);App.CommonUtils.money2Str(h),e.bets[a].chart_id;this._view.createFlyCoin(t.BrnnPlayerConst.SELF,l,h),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(p):t.conFun.Brnn2counterBet(p)}var c=this._brnnModel._chipMoney[this._brnnModel.chipitem];0==c&&(this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(c):t.conFun.Brnn2counterBet(c)),this._brnnModel.UserMoney=e.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._brnnModel.predict=[],this._brnnModel.isRepeat=!1,this._brnnModel.isPredict=!1,this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet();for(var _=0;4>_;_++)this._view["setMoney"+_].text="",this._brnnModel.preBetList[_]=0},n.prototype.confirmBet=function(){var e=[];for(var n in this._brnnModel.preBetList){var i=this._brnnModel.preBetList[n];if(i){var o=t.conFun.createSkin(i),r={place:Number(n),bet_money:i,table_id:this._brnnModel.tableId,chart_id:o};e.push(r),e.length>1&&(this._brnnModel.isPredict=!0)}}if(e.length>0){var s={bets:e,table_id:this._brnnModel.tableId};this._proxy.requestBet(s)}this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonconfirm"):R.sendPlayerAction("Brnn2operate_buttonconfirm")},n.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3");for(var e=0;4>e;e++)this._view["setMoney"+e].text="",this._brnnModel.preBetList[e]=0;this._brnnModel.predict=[],this._brnnModel.allsetMoney=0,this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttoncancel"):R.sendPlayerAction("Brnn2operate_buttoncancel")},n.prototype.repeatBet=function(){if(this._brnnModel.upperBureauchip.length){this._brnnModel.upperBureauchip.length>1&&(this._brnnModel.isRepeat=!0);for(var e=0;e<this._brnnModel.upperBureauchip.length;e++){var n=this._brnnModel.upperBureauchip[e];if(this.isLimit(n.place,n.bet_money))return}if(this._brnnModel.checktext)this.autoBet(this._brnnModel.upperBureauchip);else{for(var i=this._brnnModel.upperBureauchip,o=0;o<i.length;o++){var r=i[o];this.Betpost(r.place,r.bet_money)}this._view.showMyPreBet(this._brnnModel.preBetList)}}this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonrepeat"):R.sendPlayerAction("Brnn2operate_buttonrepeat")},n.prototype.showhandPost=function(t){this._view._jeButton.ShowHandlightBtn(),this._brnnModel.chipitem=t},n.prototype.betOver=function(){this.betOverCallback(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery||this._view.playAni(1)},n.prototype.betOverCallback=function(){this._brnnModel.predict=[],this._brnnModel.idBet=!1,this._brnnPopupView._prompt.closePoput(),this._view.cleanIssueTime(),this._view.stopRegion(),this._brnnModel.allsetMoney=0,this._view._loginBtn.betAsh(),this._view.disabledRepeatBet(),this._brnnModel.readyeachMoney=0,this._brnnModel.upperBureauchip.length=0,this._brnnModel.upperBureauchip=[],this._brnnModel.upperBureauchip=[].concat(this._brnnModel.truebet);for(var t=0;4>t;t++)this._view["setMoney"+t].text="",this._brnnModel.preBetList[t]=0,this._brnnModel.betList[t]=0},n.prototype.next=function(){this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),this._view.resetBetMoney(),this._view.clearCoin(),this._view.clearstate3(),this._view.cleanSettlementEffect(),this._brnnModel.idBet=!1,this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[]},n.prototype.totalbet=function(e,n){var i=t.conFun.createSkin(App.CommonUtils.money(e)),o={place:n,bet_money:e,table_id:this._brnnModel.tableId,chart_id:i};o.bet_money>0&&this._brnnModel.truebet.push(o),this._brnnModel.allMoney+=e},n.prototype.setallbet=function(){this._brnnModel.allsetMoney=0,this._brnnModel.predict=[];for(var e=0,n=0;4>n;n++){var i=this._brnnModel.preBetList[n];e=t.conFun.createSkin(i);var o={place:n,bet_money:i,table_id:this._brnnModel.tableId,chart_id:e};o.bet_money>0&&this._brnnModel.predict.push(o),this._brnnModel.allsetMoney+=i}},n.prototype.gamehui=function(){var t=Number(App.CommonUtils.money2Str(this._brnnModel.UserMoney));if(!(0>=t))for(var e=this._brnnModel._chipMoney,n=0;n<e.length;n++){var i=e[n];t>=i&&this._view._jeButton.chiplight(n)}},n.prototype.setRecordInit=function(t){var e=this._brnnModel.issueId,n=t,i={issue:e,hit_money:n};this._brnnModel.recordList.unshift(i),this._brnnModel.changerecordList()},n.prototype.resetLimitBet=function(){for(var t=0;4>t;t++)this._brnnModel.limitBet[t]=this._brnnModel.limitOldBet[t],this._brnnModel.betList[t]=0},n.prototype.setPlaceLimitBet=function(t,e){this._brnnModel.limitBet[t]=this._brnnModel.limitBet[t]-e+1e4*this._brnnModel.preBetList[t],this._brnnModel.setMoneyLimit[t]=this._brnnModel.setMoneyLimit[t]-e+1e4*this._brnnModel.preBetList[t]
},n.prototype.refreshMoney=function(){this._view.setUserBet(0),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney));for(var t in this._brnnModel.specialMoney){var e=App.CommonUtils.money2Str(this._brnnModel.specialMoney[t]);Number(e)>0&&this._view.specialPlayerMoney(e,t)}},n.prototype.isEnabledBtn=function(){this._brnnModel.upperBureauchip.length?this._view.enabledRepeatBet():this._view.disabledRepeatBet()},n.prototype.initDesktopData=function(){this._view.cleanOpenAndTurnPoker(),this._view.cleanSettlementEffect(),this._brnnModel.clearModelData(),this._view.clearball(),this._view.clearCoin(),this._view.initializationcardPos(),App.TimerManager.removeAll(this),this._view.resetBetMoney(),this._brnnModel.truebet.length=0,this._brnnModel.truebet=[],this._brnnModel.upperBureauchip.length=0,this._brnnModel.upperBureauchip=[],this._brnnModel.recordList.length=0,this._view.cleanTweenAN(),this._view.time.cleanIssueTime(),this._view.initCoinBox(),this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[],this._view.stopshuffle(),common.CoinFactory.i.clear(),this._view.setCoordinate(t.ControllerCon.Overweight.yy,t.ControllerCon.Overweight.index,t.ControllerCon.Overweight.isEnd)},n.prototype.recoveryChip=function(e){var n=this._brnnModel._allBetPos;if(n.length&&this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery&&200>=e){for(var i=0;i<n.length;i++)for(var o=n[i],r=0;5>r;r++)this._view.createWinChip(o,6);this._view.chipFlyColumnLottery()}},n.prototype.destroy=function(){e.prototype.destroy.call(this),Log.trace("brnn销毁Controller"),common.StarExpand.cleanFormPool(),common.comBones.cleanFormPool(),t.BrnnBones.cleanFormPool(),App.TimerManager.removeAll(this),this._brnnPopupView.destroy(),this._proxy.destroy(),this._view.destroy(),this._brnnModel.destroy(),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.next(),this.betOverCallback(),this._view=void 0,this._proxy=void 0,this._gameSet=void 0,this._brnnPopupView=void 0,this._tempGameHallChart=void 0},n}(base.GameController);t.GameController=e,__reflect(e.prototype,"brnn.GameController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.checktext=!0,n.allsetMoney=0,n.initData(),n.initDataNotify(),n}return __extends(e,t),e.prototype.initData=function(){this.userId=0,this.UserMoney=0,this.checktext=!0,this.chipitem=0,this.ExchangeMoney=0,this.winBalance=0,this.upperBureauchip=[],this.readyeachMoney=0,this.allMoney=0,this.truebet=[],this._chipNum=[],this._chipMoney=[],this._winPos=[],this._winpleNum=[],this._winLightPos=[],this._online=0,this.showMoney=0,this.BetRegion=0,this.idBet=!1,this._isFlylist=[],this._specialPlayer=[],this._allBetPos=[],this.setMoneyLimit={},this._betInfoNotify=[0,0,0,0],this._multiple=1,this.isLottery=0,this.recordList=[],this.tableId=103,this.gameChartList={},this.ballList=[],this.issueId=0,this.betList={},this.limitOldBet={},this.limitBet=[],this.predict=[],this.preBetList={},this.isRepeat=!1,this.isPredict=!1,this.oldIimitMoney=0,this.limitBetMoney=0,this.statusTime=0,this.isFly=!1,this.specialMoney={},this.statusType=0,this.multipleTableId=1,this.isBackstage=!1,this.curIssue=null,this.lastIssue=null,this.isRecoverChip=!1,this.hitRate=null},e.prototype.initDataNotify=function(){},e.prototype.changeGameChartList=function(){for(var t in this.gameChartList)this.gameChartList[t].length>9&&this.gameChartList[t].splice(0,1)},e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.clearModelData=function(){this.initData()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"brnn.GameModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return __extends(n,e),n.prototype.getModel=function(){return this._model},n.prototype.onEnterGame=function(e){Log.trace("收到进入游戏消息:",e),this.applyFunc(t.BrnnCallBackConst.Const_onEnterGameCallBack,e)},n.prototype.onIssueNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onIssueNotifyBack,e)},n.prototype.onLimitNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onLimitNotifyBack,e)},n.prototype.onStateNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onStateNotifyyBack,e)},n.prototype.onExchangeNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onExchangeNotifyBack,e)},n.prototype.onBetResponse=function(e){App.EasyLoading.hideLoading(),this.applyFunc(t.BrnnCallBackConst.onBetResponseBack,e)},n.prototype.onPlayerBetInfoNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onPlayerBetInfoNotifyBack,e)},n.prototype.onGameBetInfoNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onGameBetInfoNotify,e)},n.prototype.onOnLineNum=function(e){this.applyFunc(t.BrnnCallBackConst.onOnlineNumCallBack,e)},n.prototype.onChartNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onChartNotifyBack,e)},n.prototype.onGameResultNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onGameResultNotifyBack,e)},n.prototype.onWinningRecordRes=function(e){this.applyFunc(t.BrnnCallBackConst.onWinningRecordResBack,e)},n.prototype.onrankinglistres=function(e){this.applyFunc(t.BrnnCallBackConst.onrankinglistresBack,e)},n.prototype.onSpecialPlayerResBack=function(e){Log.log("onSpecialPlayerResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player,e.special_player)},n.prototype.onSpecialPlayerActionResBack=function(e){Log.log("onSpecialPlayerActionResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player_Action,e)},n.prototype.onChipsRecordNotifyBack=function(e){if(Log.log("onChipsRecordNotifyBack",e),e.table_id==this.getModel().tableId){if(e.chips){var n=JSON.parse(e.chips);this.getModel()._chipNum=n}this.applyFunc(t.ControllerCon.Chips_Record_Notify)}},n.prototype.onIssueHistoryResBack=function(e){Log.log("onIssueHistoryResBack",e),e.table_id==this.getModel().tableId&&e.infos.length&&(t.ControllerCon.newIssueId=e.infos[0].issue,this.applyFunc(t.ControllerCon.getIssueHistory,e.infos)),App.EasyLoading.hideLoading()},n.prototype.onGameChartResBack=function(e){Log.log("onGameChartResBack",e),this.applyFunc(t.ControllerCon.createGameHallChart,e),App.EasyLoading.hideLoading()},n.prototype.onGameStatusNotifyBack=function(e){Log.log("onGameStatusNotifyBack",e),this.applyFunc(t.ControllerCon.changeGamestaus,e)},n.prototype.onGameChartNotifyBack=function(e){Log.log("onGameChartNotifyBack",e),this.applyFunc(t.ControllerCon.changeGameChart,e)},n.prototype.onEnterTableResBack=function(e){Log.log("onEnterTableResBack",e),e.is_success&&(this.getModel().tableId=e.table_id_new,this.getModel().isLottery=e.table_type,this.applyFunc(t.ControllerCon.getEnterTableRes,e),App.EasyLoading.hideLoading())},n.prototype.onStateTimeRes=function(e){Log.log("onStateTimeResBack",e),this.applyFunc(t.BrnnCallBackConst.onStateTimeResBack,e)},n.prototype.onAbnormalNotify=function(t){Log.log("onAbnormalNotify",t),!t},n.prototype.onHitRateRes=function(e){Log.log("onHitRateResBack",e),this.applyFunc(t.BrnnCallBackConst.onHitRateResBack,e)},n.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.ENTER_GAME_R,this.onEnterGame,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_NOTIFY,this.onIssueNotify,this),this.addListener(t.ControllerCon.NET_MSG.LIMIT_NOTIFY,this.onLimitNotify,this),this.addListener(t.ControllerCon.NET_MSG.STATENOTIFY,this.onStateNotify,this),this.addListener(t.ControllerCon.NET_MSG.EXCHANGE_NOTIFY,this.onExchangeNotify,this),this.addListener(t.ControllerCon.NET_MSG.BET_RESPONSE,this.onBetResponse,this),this.addListener(t.ControllerCon.NET_MSG.PLAYER_BET_INFONOTIFY,this.onPlayerBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_BET_INFO_NOTIFY,this.onGameBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.ControllerCon.NET_MSG.CHART_NOTIFY,this.onChartNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_RESULT_NOTIFY,this.onGameResultNotify,this),this.addListener(t.ControllerCon.NET_MSG.WIN_RECORD_RES,this.onWinningRecordRes,this),this.addListener(t.ControllerCon.NET_MSG.RANKING_LIST_RES,this.onrankinglistres,this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_RES,this.onSpecialPlayerResBack,this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_ACTION_RES,this.onSpecialPlayerActionResBack,this),this.addListener(t.ControllerCon.NET_MSG.CHIPS_RECORD_NOTIFY,this.onChipsRecordNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_HISTORY_RES,this.onIssueHistoryResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onGameChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onGameStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onGameChartNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ENTER_TABLE_RES,this.onEnterTableResBack,this),this.addListener(t.ControllerCon.NET_MSG.STATE_TES,this.onStateTimeRes,this),this.addListener(t.ControllerCon.NET_MSG.ABNORMAL_NOTIFY,this.onAbnormalNotify,this),this.addListener(t.ControllerCon.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},n.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ControllerCon.NET_MSG.ME_BET,e)},n.prototype.winRecord=function(e){this.send(t.ControllerCon.NET_MSG.WIN_RECORD_REQ,e)},n.prototype.ranking=function(e){this.send(t.ControllerCon.NET_MSG.RANKING_LIST_REQ,e)},n.prototype.chartlist=function(e){this.send(t.ControllerCon.NET_MSG.CHART_REQ,e)},n.prototype.requestChip=function(e){this.send(t.ControllerCon.NET_MSG.CHIPS_RECORD_REQ,e)},n.prototype.requestHallHistoryReq=function(e){this.send(t.ControllerCon.NET_MSG.ISSUE_HISTORY_REQ,e)},n.prototype.getGameChart=function(e){this.send(t.ControllerCon.NET_MSG.SWITCH_TABLE_REQ,e)},n.prototype.requestDesk=function(e){this.send(t.ControllerCon.NET_MSG.ENTER_TABLE_REQ,e)},n.prototype.requestRemainTime=function(){this.send(t.ControllerCon.NET_MSG.STATE_TEQ,{table_id:this.getModel().tableId})},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"brnn.GameProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function e(){}return e.setBrnnHitRate=function(t){e.hitRate=t},e.getBrnnHitRate=function(){return e.hitRate},e.catName=function(t){for(var e=t.toString().split(""),n=[],i=0;i<e.length;i++)n.push(Number(e[i]));return n},e.chipArr=function(t){for(var e=[],n=[],i={},o=0;o<t.length;o++)0!=t[o]&&(i={digit:t[o],bit:o},e.push(i)),n=e.length>=3?e.slice(0,3):e;return n},e.createSkin=function(t){return 10>t?0:100>t?3:1e3>t?6:1e4>t?8:1e5>t?4:t>=1e5?9:void 0},e.getNumObj=function(t){var e=String(t).split(""),n={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:n.g=Number(e[0]);break;case 2:n.s=Number(e[0]),n.g=Number(e[1]);break;case 3:n.b=Number(e[0]),n.s=Number(e[1]),n.g=Number(e[2]);break;case 4:n.q=Number(e[0]),n.b=Number(e[1]),n.s=Number(e[2]),n.g=Number(e[3]);break;case 5:n.w=Number(e[0]),n.q=Number(e[1]),n.b=Number(e[2]),n.s=Number(e[3]),n.g=Number(e[4]);break;case 6:n.sw=Number(e[0]),n.w=Number(e[1]),n.q=Number(e[2]),n.b=Number(e[3]),n.s=Number(e[4]),n.g=Number(e[5])}for(var i in n)0==n[i]&&delete n[i];return n},e.textReminder=function(e,n,i){var o=null;switch(e){case t.BetResultCode.BetErrorPlace:o="下注位置错误";break;case t.BetResultCode.BetErrorMoney:o="下注金额异常";break;case t.BetResultCode.BetErrorState:o="非投注阶段，请稍后";break;case t.BetResultCode.BetErrorOutLimitMin:o="当前投注限红为"+n+"~"+i;break;case t.BetResultCode.BetErrorOutLimitMax:o=i?"当前投注限红为"+n+"~"+i:"超过限红，投注失败";break;case t.BetResultCode.BetErrorOutLimitTotal:o="当前投注项已达到总限红,投注失败!";break;case t.BetResultCode.BetErrorNoEnoughMoney:o="没有足够的余额";break;case t.BetResultCode.BetErrorNULL:o="下注为空"}App.ScrollTxtTips.showTip(o)},e.Brnn1counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_pick1");break;case 5:R.sendPlayerAction("Brnn1counter_pick5");break;case 10:R.sendPlayerAction("Brnn1counter_pick10");break;case 20:R.sendPlayerAction("Brnn1counter_pick20");break;case 50:R.sendPlayerAction("Brnn1counter_pick50");break;case 100:R.sendPlayerAction("Brnn1counter_pick100");break;case 200:R.sendPlayerAction("Brnn1counter_pick200");break;case 500:R.sendPlayerAction("Brnn1counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn1counter_pick1000");break;case 0:R.sendPlayerAction("Brnn1counter_pickAllin")}},e.Brnn2counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_pick1");break;case 5:R.sendPlayerAction("Brnn2counter_pick5");break;case 10:R.sendPlayerAction("Brnn2counter_pick10");break;case 20:R.sendPlayerAction("Brnn2counter_pick20");break;case 50:R.sendPlayerAction("Brnn2counter_pick50");break;case 100:R.sendPlayerAction("Brnn2counter_pick100");break;case 200:R.sendPlayerAction("Brnn2counter_pick200");break;case 500:R.sendPlayerAction("Brnn2counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn2counter_pick1000");break;case 0:R.sendPlayerAction("Brnn2counter_pickAllin")}},e.Brnn1counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_bet1");break;case 5:R.sendPlayerAction("Brnn1counter_bet5");break;case 10:R.sendPlayerAction("Brnn1counter_bet10");break;case 20:R.sendPlayerAction("Brnn1counter_bet20");break;case 50:R.sendPlayerAction("Brnn1counter_bet50");break;case 100:R.sendPlayerAction("Brnn1counter_bet100");break;case 200:R.sendPlayerAction("Brnn1counter_bet200");break;case 500:R.sendPlayerAction("Brnn1counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn1counter_bet1000");break;case 0:R.sendPlayerAction("Brnn1counter_betallin")}},e.Brnn2counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_bet1");break;case 5:R.sendPlayerAction("Brnn2counter_bet5");break;case 10:R.sendPlayerAction("Brnn2counter_bet10");break;case 20:R.sendPlayerAction("Brnn2counter_bet20");break;case 50:R.sendPlayerAction("Brnn2counter_bet50");break;case 100:R.sendPlayerAction("Brnn2counter_bet100");break;case 200:R.sendPlayerAction("Brnn2counter_bet200");break;case 500:R.sendPlayerAction("Brnn2counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn2counter_bet1000");break;case 0:R.sendPlayerAction("Brnn2counter_betallin")}},e.hitRate=null,e.brnn1betseast=["Brnn1bets_east","Brnn1bets_south","Brnn1bets_west","Brnn1bets_north"],e.brnn2betseast=["Brnn2bets_east","Brnn2bets_south","Brnn2bets_west","Brnn2bets_north"],e.data1=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,0,0,1,1,0],place:1},{is_win:[0,1,1,0,0,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:7,state:2,table:1,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:6,state:1,table:3,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:8,state:1,table:4,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:9,state:1,table:5,isLottery:0}],e.data2=[{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:1},{charts:[{is_win:[0,1,1,1,0],place:0},{is_win:[0,0,1,1,0],place:1},{is_win:[0,1,0,1,0],place:2},{is_win:[0,1,1,1,0],place:3}],time:8,state:1,table:1,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:3,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:4,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:5,isLottery:1}],e.data3=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1}],e}();t.conFun=e,__reflect(e.prototype,"brnn.conFun")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function n(t){var n=e.call(this,t,LayerManager.Game_Main,"brnn","GameSkin")||this;return n.coinBox=[],n.winpos=[],n._posList={},n.chiparr={},n._currentSecond=0,n._cardflaylist=[],n.spotanim=null,n._approach=null,n.allChipFlyList=[],n.allChipList=[],n._mPlace={},n._mResultPoint=new egret.Point,n.time.initComponent(t),n._loginBtn.initComponent(t),n._jeButton.initComponent(t),n._toolBar.initComponent(t),n._messageInfo.initComponent(t),n._brnnCardView.initComponent(t),n._brnnPlaceIsWin.initComponent(t),n._betAnimation.initComponent(t),n}return __extends(n,e),n.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t;var n=this;this._mMoudel._chipid=this._mMoudel._chipNum[0],this._messageInfo.setPluteLelf(),App.OffsetLeft(this.flyLelfFive),this._messageInfo.allPlayerDisplay(),this._toolBar.setOnlineLelf(),this._messageInfo.initInfo(),this.flyCoordinate(),this.starvisible(),this._loginBtn.betAsh(),this._posList=[];for(var i=this.MenuBox.getChildAt(1),o=0;10>o;o++)this._posList[o]={x:i.x+28.66*o,y:i.y};for(var r=0;6>r;r++)this.chiparr["0_"+this.setbetArrNum(r)]=[],this.chiparr["1_"+this.setbetArrNum(r)]=[],this.chiparr["2_"+this.setbetArrNum(r)]=[],this.chiparr["3_"+this.setbetArrNum(r)]=[],this.chiparr["4_"+this.setbetArrNum(r)]=[],this.chiparr["5_"+this.setbetArrNum(r)]=[];this._loginBtn.open(),this.initBroadcast(this),n.changeTablebtnEffect(),n._toolBar.reChargeEffect(),this.btnRedPacket2=RedPackBone.create(),this.btnRedPacket2.init(),this.dealspot.addChild(this.btnRedPacket2),this.btnRedPacket2.x=-10,this.btnRedPacket2.y=20,this.btnRedPacket2.play(RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0},n.prototype.setbetArrNum=function(t){var e=0;switch(t){case 0:e=0;break;case 1:e=2;break;case 2:e=5;break;case 3:e=8;break;case 4:e=4;break;case 5:e=9}return e},n.prototype.displayUI=function(){this._mMoudel.isLottery==t.BrnnGameTypeConst.Classic?(this._classic.visible=!0,this._lottery.visible=!1,this.lotteryClick.visible=!1,this.closeDiceAnimation(),this.lotteryhead.visible=!1):(this._classic.visible=!1,this._lottery.visible=!0,this.lotteryClick.visible=!1,this.lotteryhead.visible=!1),this.tableOdds(),this.time.stopTimeType=this._mMoudel.isLottery},n.prototype.tableOdds=function(){for(var e=t.conFun.getBrnnHitRate(),n=0;4>n;n++)this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery?this["_odds"+n].text="x2":this._mMoudel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?this["_odds"+n].text=null==e?"":"x"+e:this["_odds"+n].text=""},n.prototype.setGameScene=function(t){this.gameScene.text=t},n.prototype.setCurrentIssue=function(t){this.currentIssue.text="第 "+t+" 期"},n.prototype.lotteyTimer=function(t){this._currentSecond=0;var e=Math.round(t/1e3);this._currentSecond=e,this.renderLottery(),this.lotteryClick.visible=!0,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},n.prototype.renderLottery=function(){if(this._currentSecond<3600){var t=this._currentSecond%60,e=Math.floor(this._currentSecond/60);this.timeSecond.text=10>t?"0"+t:""+t,this.timeMinute.text=10>e?"0"+e:""+e}},n.prototype.start=function(){if(this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery){if(this._currentSecond--,this._currentSecond<=3&&this._currentSecond>=1&&App.SoundManager.playEffect("countdown_mp3"),this._currentSecond<0)return this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,void App.TimerManager.removeAll(this);this.renderLottery()}else this.stopTimes()},n.prototype.over=function(){this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,this.lotteryClick.visible=!1,this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&this.applyFunc("onOver")},n.prototype.stopTimes=function(){App.TimerManager.removeAll(this),this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&this._currentSecond>0&&this.applyFunc("onOver"),this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,this.lotteryClick.visible=!1},n.prototype.recordCardDisplay=function(e,n){this.clearball(),this._cardflaylist=[];for(var i=this.MenuBox.getChildAt(0),o=this,r=0;r<e.length;r++){var s=new eui.Image;s.source="common_ui_cp"+Number(e[r])+"_png",s.width=28,s.height=29,s.x=i.x+14,s.y=i.y+14.5,s.anchorOffsetX=14,s.anchorOffsetY=14.5,this.MenuBox.addChild(s),this._cardflaylist.push(s)}n==t.BrnnGameState.EXCHANGE?o._mMoudel.isFly?o.colorBallRotate(this._cardflaylist):o.createBall(this._cardflaylist):this.colorBallRotate(this._cardflaylist)},n.prototype.colorBallRotate=function(t){for(var e=0;e<t.length;e++){var n=t[e];egret.Tween.removeTweens(n),egret.Tween.get(n).wait(100*e).to({x:this._posList[e].x+14,y:this._posList[e].y+14.5,rotation:360},300,egret.Ease.sineInOut)}},n.prototype.createBall=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.x=this._posList[e].x+14,n.y=this._posList[e].y+14.5}this.closeDiceAnimation()},n.prototype.dropCard=function(e,n){var i=this;if(this._cardflaylist.length){this._cardflaylist.reverse();for(var o=function(){var o=r._cardflaylist[s];egret.Tween.removeTweens(o),n==t.BrnnGameState.EXCHANGE?R.setTimeOnce(function(){i._mMoudel.isFly?(egret.Tween.get(o).wait(100*s).to({y:200,alpha:0},300,egret.Ease.sineInOut),R.setTimeOnce(function(){i.recordCardDisplay(e,n)},i,1200)):(o.alpha=0,i.recordCardDisplay(e,n))},r,16):(egret.Tween.get(o).wait(100*s).to({y:200,alpha:0},300,egret.Ease.sineInOut),R.setTimeOnce(function(){i.recordCardDisplay(e,n)},i,1200))},r=this,s=0;s<this._cardflaylist.length;s++)o()}else this.recordCardDisplay(e,n)},n.prototype.clearball=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&(egret.Tween.removeTweens(e),e.parent.removeChild(e))}this._cardflaylist=[]}},n.prototype.createspot=function(){this.spotanim||(this.spotanim=new t.BrnnBones,this.lotteryhead.addChild(this.spotanim)),this.lotteryhead.visible=!0,this.spotanim.updateId("spot");var e=this.lotteryhead.getChildAt(0).x+105,n=this.lotteryhead.getChildAt(0).y+13;this.spotanim.setPosition(e,n),this.spotanim.play(999)},n.prototype.closeDiceAnimation=function(){this.spotanim&&this.spotanim.stopGame(),this.lotteryhead.visible=!1},n.prototype.setUserMoney=function(t){this._messageInfo.setUserMoney(t)},n.prototype.createChip=function(t){this._jeButton.createChip(t)},n.prototype.setBtnChip=function(t){this._jeButton.setBtnChip(t)},n.prototype.enableBtn=function(){this._jeButton.enableBtn()},n.prototype.avatarShake=function(t){this._messageInfo.avatarShake(t)},n.prototype.setInformation=function(t){var e=t.nick_name,n="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),i=App.CommonUtils.money2Str(t.balance),o=t.play_role;this._messageInfo.setPluteImage(n,o),this._messageInfo.setPluteName(e,o),this.specialPlayerMoney(i,o),this._messageInfo.playerDisplay(o)},n.prototype.specialPlayerMoney=function(t,e){this._messageInfo.specialPlayerMoney(t,e)},n.prototype.playerWinMoney=function(t,e){this._messageInfo.playerWinMoney(t,e)},n.prototype.getMoneyLight=function(t){this._messageInfo.getMoneyLight(t)},n.prototype.getAllMoneyLight=function(){this._toolBar.getAllMoneyLight()},n.prototype.disabledRepeatBet=function(){this._loginBtn.disabledRepeatBet()},n.prototype.enabledRepeatBet=function(){this._loginBtn.enabledRepeatBet()},n.prototype.playAni=function(t,e){this._betAnimation.playAni(t,e)},n.prototype.changeTablebtnEffect=function(){this._approach||(this._approach=new t.BrnnBones,this._changeTable.addChild(this._approach)),this._approach.updateId("table"),this._approach.play(0)},n.prototype.closeConfirmFrame=function(){this._loginBtn.closeConfirmFrame()},n.prototype.disabledConfirmBet=function(){this._loginBtn.disabledConfirmBet()},n.prototype.enabledConfirmBet=function(){this._loginBtn.enabledConfirmBet()},n.prototype.setCoordinate=function(t,e,n){this._loginBtn.setCoordinate(t,e,n)},n.prototype.cancel1=function(){this.applyFunc("cancelone")},n.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket2.play(RedPackBone.Animation1)},n.prototype.RedPackNotify=function(){this.btnRedPacket2.play(RedPackBone.Animation)},n.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(RedPackBone.Animation1)},n.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this);App.CommonUtils.effectButton(this.trendps,this.opentrendps,this),this._changeTable.addEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},n.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this);App.CommonUtils.removeButton(this.trendps),this._changeTable.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},n.prototype.closePopup=function(){this._loginBtn._closeUI.visible=!0},n.prototype.stopRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!1},n.prototype.startRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!0},n.prototype.setchipValue=function(t){this._jeButton.setchipValue(t)},n.prototype.getChipValue=function(t){this._jeButton.getChipValue(t)},n.prototype.onlineShake=function(){this._toolBar.onlineShake()},n.prototype.newPoker=function(){this._brnnCardView.newPoker()},n.prototype.directDisplayFapai=function(){this._brnnCardView.directDisplayFapai()},n.prototype.directFapai=function(){this._brnnCardView.directFapai()},n.prototype.initializationcardPos=function(){this._brnnCardView.initializationcardPos()},n.prototype.clearPoker=function(){this._brnnCardView.clearPoker()},n.prototype.numShake=function(t){var e=this["betMoney"+t];common.GUtils.numShake(e)},n.prototype.resetAllBet=function(){for(var t=0;t<this._mMoudel._betInfoNotify.length;t++)this._mMoudel._betInfoNotify[t]=0},n.prototype.setUserBet=function(t){this._messageInfo.setUserBet(t)},n.prototype.setMulUserBet=function(t,e){this._messageInfo.setMulUserBet(t,e)},n.prototype.resetBetMoney=function(){this._messageInfo.resetBetMoney()},n.prototype.initCoinBox=function(){common.GameShowBetChipMgr.i.initCoinBox(4,0)},n.prototype.showBetMoney=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(this["betMoney"+e].text=Math.floor(App.CommonUtils.money(n)),n){var i=Math.floor(n/1e4);if(i){var o=this["regionlist"+e];common.GameShowBetChipMgr.i.showCoin(e,o,i,4,"betcoin_mp3")}}}},n.prototype.flyBetMoney=function(){this._mMoudel.BetRegion},n.prototype.createFlyCoin=function(t,e,n){base.GameCoinMgr.i.flyToPlace(t,this["BetPoint_"+e],n,this.winpos,this.GroupChip)},n.prototype.removebetFiyChips=function(){base.GameCoinMgr.i.clean()},n.prototype.winChipControl=function(t){this.chipFlyColumn(t)},n.prototype.clearCoin=function(){for(var t=0;4>t;t++){this["betMoney"+t].text=0,this["readyMoney"+t].text=0,this["setMoney"+t].text="";for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))}this.clearFlyWinChip(),this._brnnPlaceIsWin.cleanwinAndlose(),this.time.visible=!1,this.starvisible(),this._mMoudel&&(this._mMoudel._specialPlayer=[],this._mMoudel._allBetPos=[]),this.removebetFiyChips(),this.resetAllBet(),this.chipGroupAlpha(),this._mMoudel.isRecoverChip=!1},n.prototype.clearAllChip=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))},n.prototype.cleanIssueTime=function(){this.time.cleanIssueTime(),this.time.visible=!1},n.prototype.playBetEnd=function(){this.time.playBetEnd()},n.prototype.cleanSettlementEffect=function(){this.closeDiceAnimation(),this._messageInfo.initInfo()},n.prototype.chipFlyColumn=function(t){if(t){this.chipColumn();var e=this._mMoudel._specialPlayer;R.setTimeOnce(function(){this.clearAllChip(),this.flyWinChip(),this.chipStopColumn()},this,150),R.setTimeOnce(function(){for(var t=0;t<e.length;t++)this.getMoneyLight(e[t]);this.getAllMoneyLight()},this,650)}},n.prototype.chipFlyColumnLottery=function(){this.chipColumnLottery(),this.flyChipToBall()},n.prototype.flyChipToBall=function(){this.clearAllChip(),this.flyWinChip(),this.chipStopColumnLottery()},n.prototype.chipColumn=function(){for(var t=this._mMoudel._winPos,e=0;e<t.length;e++){var n=t[e].money,i=t[e].place;if(n>0)for(var o=0;3>o;o++){var r=this["regionlist"+i].getChildAt(o);egret.Tween.get(r).to({alpha:0},120)}}},n.prototype.chipColumnLottery=function(){for(var t=this._mMoudel._allBetPos,e=0;e<t.length;e++)for(var n=t[e],i=0;3>i;i++){var o=this["regionlist"+n].getChildAt(i);egret.Tween.get(o).to({alpha:0},120)}},n.prototype.chipStopColumn=function(){for(var t=this._mMoudel._winPos,e=0;e<t.length;e++){var n=t[e].money,i=t[e].place;if(n>0)for(var o=0;3>o;o++){var r=this["regionlist"+i].getChildAt(o);r.alpha=1}}},n.prototype.chipStopColumnLottery=function(){for(var t=this._mMoudel._allBetPos,e=0;e<t.length;e++)for(var n=t[e],i=0;3>i;i++){var o=this["regionlist"+n].getChildAt(i);o.alpha=1}},n.prototype.chipGroupAlpha=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++){var n=this["regionlist"+t].getChildAt(e);n.visible=!0,n.alpha=1}},n.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},n.prototype.clearstate3=function(){this.cleanIssueTime(),this.stopRegion();for(var t=0;4>t;t++)this["setMoney"+t].text=""},n.prototype.prepare=function(t,e){this["setMoney"+t].text=e+""},n.prototype.showMyPreBet=function(t){for(var e=0;4>e;e++)this["setMoney"+e].text=t[e]?""+Math.round(App.CommonUtils.money(t[e])):""},n.prototype.getcardsrc=function(t){this._brnnCardView.getcardsrc(t)},n.prototype.kaipaiAnimation=function(t){this._brnnCardView.kaipaiAnimation(t),this._brnnPlaceIsWin.showniuji(t)
},n.prototype.directKaipai=function(t){this._brnnCardView.directKaipai(t),this.directniuji(t),this.winloseOpen(t)},n.prototype.winloseOpen=function(t){for(var e=[],n=[],i=!0,o=[],r=[],s=0;4>s;s++){this["bunko"+s];t.place_results[s].is_win?(e.push(s),o.push(t.place_results[s].is_win)):r.push(t.place_results[s].is_win)}e=e.concat(this._mMoudel._allBetPos).sort();for(var a=0;a<e.length;a++)e[a]==e[a+1]&&n.push(e[a]);if(i=n.length?!0:!1,this._mMoudel.isFly){for(var l=0;l<n.length;l++)this.createWinChip(n[l],4);R.setTimeOnce(function(){if(4==o.length||4==r.length){var t=o.length;this.winlossRun(t)}this.applyFunc("openwinPopup",i)},this,200)}else if(4==o.length||4==r.length){var h=o.length;this.directwinloss(h)}},n.prototype.directFontEnlarge=function(t){this._messageInfo.directFontEnlarge(t)},n.prototype.winlossRun=function(t){this._brnnPlaceIsWin.winlossRun(t)},n.prototype.directwinloss=function(t){this._brnnPlaceIsWin.directwinloss(t)},n.prototype.directniuji=function(t){this._brnnPlaceIsWin.directniuji(t)},n.prototype.createWinChip=function(t,e){var n=this["regionlist"+t],i=this["_chipPos"+t],o=this.winpos[e];common.GameWinChipMgr.i.createWinChip(t,e,n,i,o,this.cardlist,5)},n.prototype.flyWinChip=function(){common.GameWinChipMgr.i.flyWinChip()},n.prototype.clearFlyWinChip=function(){common.GameWinChipMgr.i.clearFlyWinChip()},n.prototype.flyCoordinate=function(){for(var t=0;7>t;t++){var e=this["_chip"+t],n=e.x,i=e.y;2==t?(n=App.StageUtils.getWidth()-24,i=App.StageUtils.getHeight()/2-146):3==t?(n=App.StageUtils.getWidth()-24,i=App.StageUtils.getHeight()/2):6==t&&(n=App.StageUtils.getWidth()/2+13);var o=this._chipGroupPos.localToGlobal(n,i);this.winpos.push(o)}},n.prototype.starRun=function(t){var e=this._messageInfo.getPoint(),n=this.getparabolicPoint(t),i=this.getMPoint(t),o=common.StarExpand.create();if(o){o.init(this);var r=400+150*t;o.run(e,n,i,r,function(){this["_chipStarPos"+t].visible=!0,this._mPlace[t]=null}.bind(this),this)}},n.prototype.starTrailing=function(e,n){var i=new t.BrnnBones;i.parent||(this.addChild(i),i.updateId("star_0"),i.setPosition(e,n),i.play(1),i.addPlayEndCallBack(function(){i.parent&&(i.stopGame(),i.parent.removeChild(i))},this))},n.prototype.overParabolic=function(t){this["_chipStarPos"+t].visible=!0,App.TimerManager.removeAll(this)},n.prototype.starvisible=function(){for(var t=0;4>t;t++)this["_chipStarPos"+t].visible=!1},n.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new common.Shuffle,this.shuffleGroup.addChild(this.shuffle));var t=this;this.shuffleGroup.visible=!0;var e=StageUtils.getInstance().getWidth()/10*5.2,n=StageUtils.getInstance().getHeight()/10*6,i=StageUtils.getInstance().getWidth()/10*3,o=0;this.shuffle.updateId("wash",e,n,i,o,"brnn_cardwash_mp3",-45),this.shuffle.addPlayEndCallBack(function(){t.shuffle&&t.shuffle.parent&&(t.directDisplayFapai(),t.stopshuffle())},this)},n.prototype.stopshuffle=function(){this.shuffle&&this.shuffle.stopshuffle(),this.shuffleGroup.visible=!1},n.prototype.clearShuffle=function(){this.shuffle&&(egret.Tween.removeTweens(this.shuffle),this.shuffle.destroy(),this.shuffle=void 0)},n.prototype.touchBtn=function(t){var e=Number(t.currentTarget.name);this.applyFunc("Betpost",e)},n.prototype.opentrendps=function(){this.applyFunc("opentrendps")},n.prototype.brnnChangeTable=function(){App.SoundManager.playEffect("click_mp3");var t=this;egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:this._approach.y},80).call(function(){t.applyFunc("brnnChangeTable")},this)},n.prototype.btnOpenRecord=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("btnOpenRecord")},n.prototype.openLotteryHelp=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("openLotteryHelp")},n.prototype.getMPoint=function(t){var e=this["_chipStarPos"+t],n=this.cardlist.localToGlobal(e.x,e.y);return n},n.prototype.getparabolicPoint=function(t){var e=this["_starParabolic"+t],n=this.cardlist.localToGlobal(e.x,e.y);return n},n.prototype.cleanTweenAN=function(){egret.Tween.removeTweens(this),App.TimerManager.removeAll(this)},n.prototype.cleanOpenAndTurnPoker=function(){this._brnnCardView.cleanOpenAndTurnPoker()},n.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),Log.trace("brnn销毁GameView"),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),this.time.destroy(),this._loginBtn.destroy(),this._jeButton.destroy(),this._toolBar.destroy(),this._brnnCardView.destroy(),this._brnnPlaceIsWin.destroy(),this._messageInfo.destroy(),this._betAnimation.destroy(),this.coinBox.length=0,this.clearFlyWinChip(),this.clearPoker(),common.CoinFactory.i.clear(),this.allChipList=void 0,this._approach&&(egret.Tween.removeTweens(this._approach),this._approach.destroy()),this.spotanim&&this.spotanim.destroy(),this.clearball(),this.removebetFiyChips(),this.clearShuffle(),this.btnRedPacket2&&this.btnRedPacket2.destroy())},n}(base.GameView);t.GameView=e,__reflect(e.prototype,"brnn.GameView")}(brnn||(brnn={}));