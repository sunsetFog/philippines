var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},ddz;!function(t){var e=function(){function e(){this._mMatchTimes=0}return e.prototype.checkValidity=function(t){return!1},e.prototype.match=function(t,e){return this._mMapMain?void 0:(this._mMapMain=t,this._mMapMinor=e,!1)},e.prototype.matchMore=function(t,e){this._mMapMain&&(this._mMapMain=this._mMapMain.concat(t),this._mMapMinor=this._mMapMinor?this._mMapMinor.concat(e):void 0)},e.prototype.getMatch=function(){return this._mMatchList?this._mMatchList:void 0},e.prototype.getMatchMinor=function(){return this._mMatchListMinor?this._mMatchListMinor:void 0},e.prototype.removeMinor=function(){},e.prototype.removeKing=function(e){for(var i=e.length-1;i>=0;i--){var o=e[i][0];o.val>t.PokerValue.POKER_VALUE_TWO&&e.splice(i,1)}},e.prototype.getMatchShunZi=function(t){var e=this._mMapMain,i=[],o=t.length;if(e.length<o)return null;for(var s=e.length-1,r=o-1;s>=r;s--)for(var n=void 0,a=void 0,h=[],d=s;d>0;d--){if(n=e[d],a=e[d-1],a[0].val!=n[0].val+1){s=Math.min(s,d);break}if(h=h.concat(n),h.length==r*n.length&&(h=h.concat(a)),h.length==o*n.length){i.push(h);break}}return i},e.prototype.clean=function(){this._mMapMain=void 0,this._mMapMinor=void 0,this._mMatchList=void 0,this._mMatchListMinor=void 0},e.prototype.destroy=function(){this.clean()},e}();t.CombBase=e,__reflect(e.prototype,"ddz.CombBase")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mInit=!1,this._mIsPool=!1,this.onCreate()}return e.create=function(){var t=ObjectPool.pop("ddz.Poker");return t},e.realese=function(t){t._mIsPool||(t.clean(),t._mIsPool=!0,ObjectPool.push(t))},e.prototype.onCreate=function(){this._mData=new t.PokerData,this._mIcon=new t.PokerIcon},e.prototype.init=function(t,e,i,o){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setColor(t),this._mData.setValue(e),this._mData.setNumber(i),this.setSelected(o),this._mIsPool=!1)},e.prototype.add2Stage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.hideMask()))},e.prototype.addSPokerToStage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refreshSPoker()))},e.prototype.addEvent=function(){},e.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},e.prototype.refreshSPoker=function(){this._mInit&&this._mIcon.refreshSIcon(this._mData)},e.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},e.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},e.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},e.prototype.setSelected=function(t){this._mInit&&this._mData.setSeleced(t)},e.prototype.setDeposit=function(t){this._mInit&&this._mData.setDeposit(t)},e.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mIcon.parent&&this._mIcon.parent.removeChild(this._mIcon))},Object.defineProperty(e.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this._mData.getNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._mIcon.x},set:function(t){this._mIcon.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._mIcon.y},set:function(t){this._mIcon.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(t){this._mIcon.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(t){this._mIcon.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(t){this._mIcon.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(t){this._mIcon.anchorOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(t){this._mIcon.anchorOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._mData.getSelected()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeposit",{get:function(){return this._mData.getDeposit()},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){this._mData.setColor(t)},e.prototype.setValue=function(t){this._mData.setValue(t)},e.prototype.setNumber=function(t){this._mData.setNumber(t)},e.prototype.setIsBottom=function(t){this._mIsBottom=t},e.prototype.setDepositMask=function(){this._mIcon.showDepsit()},e.prototype.hideDepositMask=function(){this._mIcon.hideDeposit()},e.prototype.getData=function(){return this._mData},e.prototype.getIcon=function(){return this._mIcon},e.prototype.destroy=function(){this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mParent=void 0,this._mData=void 0,this._mIcon=void 0},e}();t.Poker=e,__reflect(e.prototype,"ddz.Poker")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"BalanceViewSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.farmerWin=function(){this.visible=!0,this.RecordBg.visible=!0,this.BossWin.visible=!1,this.FarmerWin.visible=!0,this.BoxWinner.visible=!0,this.BoxBalance.visible=!1,this.BoxWinner.alpha=0,egret.Tween.get(this.BoxWinner).to({alpha:1},100)},i.prototype.exchangePoput=function(){this.visible=!0,this.BoxBalance.visible=!0,this.BoxBalance.scaleX=this.BoxBalance.scaleY=0,App.EffectUtils.showUI(this.BoxBalance)},i.prototype.closeExcangePoput=function(){this.BoxBalance.visible=!1;var t=this;App.EffectUtils.hideUI(t.BoxBalance,200,0,function(){t.visible=!1})},i.prototype.setSelfName=function(t){this.UserName.text=t},i.prototype.setSelfHead=function(t){this.UserImage.source=t},i.prototype.setSelfFrame=function(t){this.UserFrame.source=t},i.prototype.setPlayerName=function(t,e){this["UserName_"+t].text=e},i.prototype.setPlayerBaseScore=function(t,e){this["BaseScore_"+t].text=e},i.prototype.setPlayerTimes=function(t,e){this["Times_"+t].text=e},i.prototype.setPlayerMoney=function(t,e){e>0?(this["MoneyAdd_"+t].text=String(e),this["MoneyMinus_"+t].visible=!1,this["MoneyAdd_"+t].visible=!0):(this["MoneyMinus_"+t].text=String(e),this["MoneyAdd_"+t].visible=!1,this["MoneyMinus_"+t].visible=!0)},i.prototype.setPlayerIsBoss=function(t,e){t==e?(this["BossBg_"+t].visible=!0,this["BossHat_"+t].visible=!0):(this["BossBg_"+t].visible=!1,this["BossHat_"+t].visible=!1)},i.prototype.hideWinner=function(){this.BoxWinner.visible=!1},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.BalanceView=e,__reflect(e.prototype,"ddz.BalanceView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardViewSkin")||this;return t.index=0,t.startIndex=-1,t.hoverIndex=-1,t.endIndex=0,t.isDepsit=!1,t.isCardPlayer=!1,t.cardNumber_1=1,t.cardNumber_2=1,t.cardNumberAll_1=0,t.cardNumberAll_2=0,t.openCardIndex_1=0,t.openCardIndex_2=0,t.hoverIndexs=[],t.selectedCards=[],t.cardList=[],t.cardList_1=[],t.cardList_2=[],t.dealCardIndex_1=0,t.dealCardIndex_2=0,t.cardArr=[],t.bottomCardList=[],t.outList_0=[],t.outList_1=[],t.outList_2=[],t}return __extends(i,e),i.prototype.init=function(){this.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.hideBottomBg(),this.hideCardPlayer(),this.GroupOutCardLeft.alpha=0,this.GroupOutCardRight.alpha=0,App.OffsetLeft(this.GroupCard2),App.OffsetLeft(this.GroupShowCard2),App.OffsetLeft(this.GroupCardNum2),App.OffsetLeft(this.GroupOutCardLeft),App.OffsetLeft(this.GroupOpenCard2),App.OffsetLeft(this.CardAniLeftStartPoint),App.OffsetLeft(this.CardAniLeftEndPoint)},i.prototype.showCard=function(t){this.cardList=t,this.GroupCard.removeChildren();var e=this.getCardPoints(this.GroupCard,this.cardList,124,46);this.cardList.forEach(function(t,i){t.scaleX=1,t.scaleY=1,t.x=e[i],t.y=t.isSelected?-30:0,t.add2Stage(this.GroupCard),t.setDeposit(this.isDepsit),t.isDeposit&&t.setDepositMask()}.bind(this))},i.prototype.clearCard=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.clearSeatCard(this.cardList),this.index=0,this.clearSeatCard(this.cardArr);break;case t.DDZPosition.POSITION_RIGHT:this.clearSeatCard(this.cardList_1),this.dealCardIndex_1=0,this.openCardIndex_1=0;break;case t.DDZPosition.POSITION_LEFT:this.clearSeatCard(this.cardList_2),this.dealCardIndex_2=0,this.openCardIndex_2=0}},i.prototype.clearSeatCard=function(e){for(;e&&e.length;){var i=e.pop();t.Poker.realese(i)}},i.prototype.showBottomBg=function(){this.BottomCards.visible=!0},i.prototype.hideBottomBg=function(){this.BottomCards.visible=!1},i.prototype.setCardPlayer=function(t,e){this["CardPlayerNumber_"+e].text=Math.abs(t)},i.prototype.showCardPlayer=function(){this.isCardPlayer=!0,this.GroupCardPlayer.visible=!0},i.prototype.hideCardPlayer=function(){this.isCardPlayer=!1,this.GroupCardPlayer.visible=!1},i.prototype.showBtnCardPlayer=function(){this.BtnCardPlayer.visible=!0},i.prototype.hideBtnCardPlayer=function(){this.BtnCardPlayer.visible=!1},i.prototype.setCardDown=function(){this.cardList.length>0&&this.cardList.forEach(function(t){t.isSelected&&(egret.Tween.get(t).wait(1e3).to({y:0},100),App.TimerManager.doTimer(1e3,1,function(){t.setSelected(!1)},this))})},i.prototype.showTableCard=function(t){this.GroupOutCard.removeChildren();var e=this.getCardPoints(this.GroupOutCard,t,111,35);t.forEach(function(t,i){t.x=e[i],t.y=0,t.scaleX=.7,t.scaleY=.7,t.add2Stage(this.GroupOutCard)}.bind(this))},i.prototype.cleanTableCard=function(e){for(var i=this["outList_"+e];i&&i.length>0;){var o=i.pop();t.Poker.realese(o)}},i.prototype.getCardPoints=function(t,e,i,o){var s=[],r=t.width/2-(i/2+o/2*(e.length-1));if(s.push(r),e.length>1)for(var n=1;n<e.length;n++){var a=r+o*n;s.push(a)}return s},i.prototype.dealCard=function(t){this.cardList=t,App.TimerManager.doTimer(250,0,this.refresh,this)},i.prototype.refresh=function(){this.index<this.cardList.length?(this.cardArr.push(this.cardList[this.index]),this.index++,this.refreshCard(),App.SoundManager.playEffect("ddz_flipcard_mp3")):App.TimerManager.remove(this.refresh,this)},i.prototype.refreshCard=function(){var t=this.getCardPoints(this.GroupCard,this.cardArr,124,46),e=this.cardArr[this.cardArr.length-1],i=this.GroupCard.numChildren;1>i?e.x=t[0]:e.x=this.GroupCard.getChildAt(i-1).x,e.scaleX=1,e.scaleY=1,e.y=0,e.add2Stage(this.GroupCard);for(var o=0;o<this.GroupCard.numChildren;o++){var s=this.GroupCard.getChildAt(o);egret.Tween.get(s).to({x:t[o]},250)}e.setDeposit(this.isDepsit),e.isDeposit&&e.setDepositMask()},i.prototype.dealOpenCard=function(e,i,o){if(this["dealCardIndex_"+e]=0,this["GroupShowCard"+e].removeChildren(),this["cardList_"+e]=i,this["cardList_"+e].length>0){var s=[];if(this["cardList_"+e].length>1)if(this["cardList_"+e].length>9){var r={x:0,y:0};s.push(r);for(var n=1;n<this["cardList_"+e].length;n++){var a=void 0;a=10>n?{x:r.x+25*n,y:0}:{x:r.x+25*(n-10),y:45},s.push(a)}}else if(e==t.DDZPosition.POSITION_RIGHT){var r={x:225,y:0};s.push(r);for(var n=1;n<this["cardList_"+e].length;n++){var a=void 0;a={x:r.x-25*n,y:0},s.push(a)}s.reverse()}else{var r={x:0,y:0};s.push(r);for(var n=1;n<this["cardList_"+e].length;n++){var a=void 0;a={x:r.x+25*n,y:0},s.push(a)}}this["cardList_"+e].forEach(function(t,i){t.setSelected(!1),s[i]&&(t.x=s[i].x,t.y=s[i].y),o&&(t.alpha=0),t.addSPokerToStage(this["GroupShowCard"+e])}.bind(this)),o&&(this["cardList_"+e][this["dealCardIndex_"+e]].alpha=1,App.TimerManager.doTimer(250,0,this["deal"+e],this))}},i.prototype.deal1=function(){this.dealCardIndex_1<this.cardList_1.length-1?(this.dealCardIndex_1++,this.cardList_1[this.dealCardIndex_1].alpha=1):App.TimerManager.remove(this.deal1,this)},i.prototype.deal2=function(){this.dealCardIndex_2<this.cardList_2.length-1?(this.dealCardIndex_2++,this.cardList_2[this.dealCardIndex_2].alpha=1):App.TimerManager.remove(this.deal2,this)},i.prototype.showOthersOpenCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!1,this["GroupShowCard"+t].visible=!0},i.prototype.showOthersCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!0,this["GroupShowCard"+t].visible=!1},i.prototype.hideOthersCards=function(t){this["GroupCardNum"+t].visible=!1},i.prototype.showOthersCardsNumber=function(t,e){this["CardNum"+t].text=e},i.prototype.dealCardOthers=function(t,e){this["cardNumber_"+t]=0,this["cardNumberAll_"+t]=e,this["CardNum"+t].text=this["cardNumber_"+t],App.TimerManager.doTimer(250,0,this["refreshCardNumber"+t],this)},i.prototype.refreshCardNumber1=function(){this.cardNumber_1<this.cardNumberAll_1?(this.cardNumber_1++,this.CardNum1.text=String(this.cardNumber_1)):App.TimerManager.doTimer(250,0,this.refreshCardNumber1,this)},i.prototype.refreshCardNumber2=function(){this.cardNumber_2<this.cardNumberAll_2?(this.cardNumber_2++,this.CardNum2.text=String(this.cardNumber_2)):App.TimerManager.doTimer(250,0,this.refreshCardNumber2,this)},i.prototype.setCardNumber=function(t,e){this["cardNumberAll_"+t]=Math.abs(e),this["CardNum"+t].text=Math.abs(e)},i.prototype.showBottomCard=function(e){this.clearBottomCard(),this.GroupBottomCards.horizontalCenter=0;for(var i=[28,88,148],o=0;3>o;o++){var s=t.Poker.create();s.init(0,0,-1,!1),s.x=i[o],s.y=38,s.scaleX=.45,s.scaleY=.45,s.anchorOffsetX=62,s.anchorOffsetY=82,this.bottomCardList.push(s),s.add2Stage(this.GroupBottomCards)}},i.prototype.openBottomCard=function(t){this.showBottomCard(!1),this.bottomCardList.forEach(function(e,i){egret.Tween.get(e).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){e.setColor(t[i].color),e.setValue(t[i].value),e.setNumber(t[i].number),e.refresh(),egret.Tween.get(e).to({scaleX:.45},200,egret.Ease.sineInOut)}.bind(this))})},i.prototype.clearBottomCard=function(){for(var e=this.bottomCardList;e.length;){var i=e.pop();t.Poker.realese(i)}},i.prototype.deposit=function(){this.isDepsit=!0},i.prototype.cancerDeposit=function(){this.isDepsit=!1},i.prototype.showDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!0),t.setDepositMask(),t.setSelected(!1),t.y=0})},i.prototype.hideDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!1),t.hideDepositMask()})},i.prototype.hoverCard=function(t){this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||this.cardList[t].showMask())}.bind(this))},i.prototype.toggleCardType=function(t){App.SoundManager.playEffect("ddz_s_selectcard_mp3"),this.hoverIndexs.length=0,this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||(this.cardList[t].isSelected?(this.cardList[t].setSelected(!1),this.cardList[t].y=0):(this.cardList[t].setSelected(!0),this.cardList[t].y=-30)))}.bind(this))},i.prototype.showTipCards=function(t){this.cardList.forEach(function(t){t.setSelected(!1)}),t.forEach(function(t){t.setSelected(!0)}),this.showCard(this.cardList)},i.prototype.moveCard=function(t){for(var e=this.getCardPoints(this.GroupCard,t,124,46),i=0;i<t.length;i++)egret.Tween.get(t[i]).to({x:e[i]},200)},i.prototype.showSelfCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_SELF),e.forEach(function(e){var i=t.Poker.create();this.outList_0.push(i),i.init(e.color,e.value,e.number,!1)}.bind(this)),this.showTableCard(this.outList_0)},i.prototype.playCardSelf=function(e){this.cleanTableCard(t.DDZPosition.POSITION_SELF);var i=[];e.forEach(function(t){i.push(t.number)});var o=[];if(this.cardList.forEach(function(t){i.indexOf(t.number)>-1&&(t.setSelected(!0),o.push(t))}.bind(this)),o.length>0){for(var s=0;s<this.cardList.length;s++)this.cardList[s].isSelected&&(this.cardList.splice(s,1),s--);this.moveCardToTable(o),this.moveCard(this.cardList)}},i.prototype.playCard=function(){if(this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cardList.forEach(function(t,e){t.isSelected&&this.selectedCards.push(t)}.bind(this)),this.selectedCards.length>0){for(var e=0;e<this.cardList.length;e++)this.cardList[e].isSelected&&(this.cardList.splice(e,1),e--);this.moveCardToTable(this.selectedCards),this.moveCard(this.cardList)}},i.prototype.moveCardToTable=function(e){if(e.length>0){var i=this.getCardPoints(this.GroupOutCard,e,111,30);i.forEach(function(t,i){var o=this.GroupOutCard.localToGlobal(t,0),s=this.GroupCard.globalToLocal(o.x,o.y);e[i]&&(e[i].hideDepositMask(),egret.Tween.get(e[i]).to({x:s.x,y:s.y,scaleX:.7,scaleY:.7},50))}.bind(this)),App.TimerManager.doTimer(200,1,function(){for(;e.length;){var i=e.pop(),o=t.Poker.create();this.outList_0.push(o),o.init(i.color,i.val,i.number,!1),t.Poker.realese(i)}this.outList_0.reverse(),this.showTableCard(this.outList_0),this.showCard(this.cardList)}.bind(this),this)}},i.prototype.getSelectedCard=function(){var t=[];return this.cardList.forEach(function(e){e.isSelected&&t.push(e)}.bind(this)),t},i.prototype.createTableCard=function(e,i,o){var s=[];if(o==t.DDZPosition.POSITION_RIGHT){this.GroupOutCardRight.right=i;var r=259;if(s.push(r),e.length>1)for(var n=1;n<e.length;n++){var a=r-30*n;s.push(a)}s.reverse()}else if(o==t.DDZPosition.POSITION_LEFT){this.GroupOutCardLeft.left=i;var r=0;if(s.push(r),e.length>1)for(var n=1;n<e.length;n++){var a=r+30*n;s.push(a)}}e.forEach(function(e,i){var r=t.Poker.create();r.init(e.color,e.value,e.number,!1),r.x=s[i],r.y=0,r.scaleX=.7,r.scaleY=.7,o==t.DDZPosition.POSITION_RIGHT?(this.outList_1.push(r),r.add2Stage(this.GroupOutCardRight)):o==t.DDZPosition.POSITION_LEFT&&(this.outList_2.push(r),r.add2Stage(this.GroupOutCardLeft))}.bind(this)),o==t.DDZPosition.POSITION_RIGHT?this.GroupOutCardRight.alpha=1:o==t.DDZPosition.POSITION_LEFT&&(this.GroupOutCardLeft.alpha=1)},i.prototype.showRightCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.createTableCard(e,168,t.DDZPosition.POSITION_RIGHT)},i.prototype.playCardRight=function(e){this.cleanTableCard(t.DDZPosition.POSITION_RIGHT);var i=50;if(this.createTableCard(e,58,t.DDZPosition.POSITION_RIGHT),egret.Tween.get(this.GroupOutCardRight).to({right:168,alpha:1},i),this.cardList_1.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var s=[];this.cardList_1.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),s.push(t))}.bind(this));for(var r=0;r<this.cardList_1.length;r++)this.cardList_1[r].isSelected&&(this.cardList_1.splice(r,1),r--);this.dealOpenCard(t.DDZPosition.POSITION_RIGHT,this.cardList_1,!1)}},i.prototype.showLeftCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.createTableCard(e,this.CardAniLeftEndPoint.left,t.DDZPosition.POSITION_LEFT)},i.prototype.playCardLeft=function(e){this.cleanTableCard(t.DDZPosition.POSITION_LEFT);var i=50;if(this.createTableCard(e,this.CardAniLeftStartPoint.left,t.DDZPosition.POSITION_LEFT),egret.Tween.get(this.GroupOutCardLeft).to({left:this.CardAniLeftEndPoint.left,alpha:1},i),this.cardList_2.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var s=[];this.cardList_2.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),s.push(t))}.bind(this));for(var r=0;r<this.cardList_2.length;r++)this.cardList_2[r].isSelected&&(this.cardList_2.splice(r,1),r--);this.dealOpenCard(t.DDZPosition.POSITION_LEFT,this.cardList_2,!1)}},i.prototype.getOutCard=function(t){return this["outList_"+t]},i.prototype.openCard=function(t,e){if(this["cardList_"+t]=e,e.length>0){var i=[],o={x:0,y:0};if(i.push(o),e.length>1)for(var s=1;s<e.length;s++){var r=void 0;r=10>s?{x:o.x+30*s,y:0}:{x:o.x+30*(s-10),y:48},i.push(r)}e.forEach(function(e,o){e.x=i[o].x,e.y=i[o].y,e.scaleX=.7,e.scaleY=.7,e.alpha=0,e.add2Stage(this["GroupOpenCard"+t])}.bind(this)),this["cardList_"+t][this["openCardIndex_"+t]].alpha=1,App.TimerManager.doTimer(50,0,this["open"+t],this)}},i.prototype.open1=function(){this.openCardIndex_1<this.cardList_1.length-1?(this.openCardIndex_1++,this.cardList_1[this.openCardIndex_1].alpha=1):App.TimerManager.remove(this.open1,this)},i.prototype.open2=function(){this.openCardIndex_2<this.cardList_2.length-1?(this.openCardIndex_2++,this.cardList_2[this.openCardIndex_2].alpha=1):App.TimerManager.remove(this.open2,this)},i.prototype.touchBegin=function(e){this.isDepsit||(this.startIndex=this.checkIndex(e.localX,this.startIndex),this.startIndex>-1&&this.applyFunc(t.EVENT.TOUCH_CARD_BEGIN,this.startIndex))},i.prototype.touchEnd=function(e){this.isDepsit||(this.endIndex=this.checkIndex(e.localX,this.endIndex),this.applyFunc(t.EVENT.TOUCH_CARD_END))},i.prototype.touchMove=function(e){if(!this.isDepsit){this.hoverIndex=this.checkIndex(e.localX,this.hoverIndex),this.hoverIndexs.push(this.hoverIndex);var i=this.hoverIndexs[this.hoverIndexs.length-1];this.applyFunc(t.EVENT.TOUCH_CARD_MOVE,i)}},i.prototype.touchOutside=function(e){this.isDepsit||this.applyFunc(t.EVENT.TOUCH_CARD_END)},i.prototype.checkIndex=function(t,e){for(var i=0;i<this.GroupCard.numChildren;i++)i<this.GroupCard.numChildren-1?t>this.GroupCard.getChildAt(i).x&&t<this.GroupCard.getChildAt(i+1).x&&(e=i):t>this.GroupCard.getChildAt(i).x&&(e=i);return e},i.prototype.changeCardPlayer=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.PANEL_CARDPLAYER)},i.prototype.toggleCardPlayer=function(){this.isCardPlayer?(this.hideCardPlayer(),this.showBottomBg()):(this.hideBottomBg(),this.showCardPlayer()),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CARDPLAYER)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),this.GroupCardPlayer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeCardPlayer,this),App.CommonUtils.effectButton(this.BtnCardPlayer,this.toggleCardPlayer,this)},i.prototype.removeEvent=function(){this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),this.GroupCardPlayer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeCardPlayer,this),App.CommonUtils.removeButton(this.BtnCardPlayer)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("斗地主 CardView destroy"),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),App.TimerManager.remove(this.refresh,this),App.TimerManager.remove(this.deal1,this),App.TimerManager.remove(this.deal2,this),App.TimerManager.remove(this.open1,this),App.TimerManager.remove(this.open2,this),this.removeEvent(),this.selectedCards=void 0,this.cardList=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.cardArr=void 0,this.bottomCardList=void 0,this.outList_0=void 0,this.outList_1=void 0,this.outList_2=void 0)},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"ddz.CardView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"ClosePoputSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.openPopup=function(){this.visible=!0,this.PoputBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},i.prototype.closePopup=function(){this.PoputBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},i.prototype.exitRoom=function(){this.applyFunc(t.EVENT.EXIT_ROOM)},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.ClosePoput=e,__reflect(e.prototype,"ddz.ClosePoput")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"DDZBonesSkin")||this;return t._approach=null,t}return __extends(i,e),i.prototype.playAni=function(t){this.diceAnimation(t)},i.prototype.diceAnimation=function(t){this.diceInit(),this.diceInitRenders(t),this._approach.play(1),this.overDiceAnimation()},i.prototype.diceInit=function(){this._approach||(this._approach=new t.CardTypeBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="CardBone_"+t;this.GroupBones.addChild(this._approach),this._approach.updateId(e);var i=StageUtils.getInstance().getWidth()/2,o=StageUtils.getInstance().getHeight()/2;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this.GroupBones.removeChild(this._approach))},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this._approach&&(this._approach.destroy(),this._approach=void 0))},i}(BaseEuiComponent);t.DDZBones=e,__reflect(e.prototype,"ddz.DDZBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,"DDZGameSetSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.Effect.alpha=0},e.prototype.openPopup=function(){this.visible=!0,this.GameSetBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePopup=function(){this.GameSetBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},e.prototype.setVoiceMin=function(){this.VoiceSlider.value=0;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setVoiceMax=function(){this.VoiceSlider.value=100;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setMusicMin=function(){this.MusicSlider.value=0;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.setMusicMax=function(){this.MusicSlider.value=100;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.toggleEffect=function(){this.Effect.selected?this.Effect.alpha=1:this.Effect.alpha=0},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.VoiceMin,this.setVoiceMin,this),App.CommonUtils.effectButton(this.VoiceMax,this.setVoiceMax,this),App.CommonUtils.effectButton(this.MusicMin,this.setMusicMin,this),App.CommonUtils.effectButton(this.MusicMax,this.setMusicMax,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),App.CommonUtils.removeButton(this.VoiceMin),App.CommonUtils.removeButton(this.VoiceMax),App.CommonUtils.removeButton(this.MusicMin),App.CommonUtils.removeButton(this.MusicMax)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeEvent())},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"ddz.GameSet")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.HelpMenu.scaleX=this.HelpMenu.scaleY=0,App.EffectUtils.showUI(this.HelpMenu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(this.HelpMenu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},e.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},e.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=930,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<54?e.scrollV=0:t.localY>e.height-54?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-108)*(t.localY-54)},e.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=695},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()
},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeEvent())},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"ddz.Help")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getHeight=function(){return this.height},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.HelpItem=e,__reflect(e.prototype,"ddz.HelpItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"MenuViewSkin")||this;return t.spotNumber=0,t.timerCallBankerNumber=0,t.menuType=!1,t.boneList=[],t.boneName=["light","sweep"],t}return __extends(i,e),i.prototype.initComponent=function(t,i){e.prototype.initComponent.call(this,t,i),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0},i.prototype.init=function(){this.initRecharge(),this.hideDisabledBtn(),this.hideStartBtn(),this.hideDeposit(),this.hideRobBox(),this.hideDoubleBox(),this.setHidePlayBox(),this.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideBtnEffect(),this.BoxMatching.visible=!1,this.BoxMissCarry.x=-555,this.BoxMissCarry.alpha=0,this.MenuBox.y=-300,App.OffsetLeft(this.Timer_2),this.btnRedPacket=RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},i.prototype.initRecharge=function(){if(!this.boneList.length)for(var t=0;2>t;t++){var e=common.comBones.create();this.boneList.push(e)}for(var i=0;2>i;i++)if(!this.boneList[i].parent){var o=this.boneName[i];this.moneyGroup.addChild(this.boneList[i]),this.boneList[i].updateId(o);var s=43.5,r=43.5;this.boneList[i].setPosition(s,r),this.boneList[i].play(0)}},i.prototype.hideDisabledBtn=function(){this.DisScore1.visible=!1,this.DisScore2.visible=!1,this.DisScore3.visible=!1},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.CallBanker=function(e){var i=e.currentTarget,o=i==this.NoCall?t.OperateType.OPER_NOROB:i==this.CallScore1?t.OperateType.OPER_ROBONE:i==this.CallScore2?t.OperateType.OPER_ROBTWO:t.OperateType.OPER_ROBTHREE;this.applyFunc(t.EVENT.OPERATE_REQ,o)},i.prototype.onMatch=function(){this.BoxMatching.visible=!0,this.hideSpot(),App.TimerManager.doTimer(300,0,this.refreshSpot,this)},i.prototype.refreshSpot=function(){this.spotNumber<6?this.spotNumber++:this.spotNumber=0,this.hideSpot();for(var t=0;t<this.spotNumber;t++)this.BoxSpot.getChildAt(t).visible=!0},i.prototype.hideSpot=function(){for(var t=0;t<this.BoxSpot.numChildren;t++)this.BoxSpot.getChildAt(t).visible=!1},i.prototype.missCarryAni=function(){this.BoxMissCarry.alpha=1;var t=App.StageUtils.getWidth();egret.Tween.get(this.BoxMissCarry).to({x:t/2-this.BoxMissCarry.width/2},400,egret.Ease.sineInOut).call(function(){egret.Tween.get(this.BoxMissCarry).wait(600).to({x:t},400,egret.Ease.sineInOut).call(function(){this.BoxMissCarry.alpha=0,this.BoxMissCarry.x=-555}.bind(this))}.bind(this))},i.prototype.filishMatch=function(){this.BoxMatching.visible=!1,App.TimerManager.remove(this.refreshSpot,this),this.spotNumber=0},i.prototype.showStartBtn=function(){this.BtnBoxOpenCard.visible=!0,this.BtnBoxGameStart.visible=!0},i.prototype.hideStartBtn=function(){this.BtnBoxOpenCard.visible=!1,this.BtnBoxGameStart.visible=!1},i.prototype.disabledRobBtn=function(t){if(this.hideDisabledBtn(),t)for(var e=1;t+1>e;e++)this["DisScore"+e].visible=!0},i.prototype.showRobBox=function(){this.CallBankerBox.visible=!0},i.prototype.hideRobBox=function(){this.CallBankerBox.visible=!1},i.prototype.showDeposit=function(){this.Deposit.visible=!0},i.prototype.hideDeposit=function(){this.Deposit.visible=!1},i.prototype.showCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!0}},i.prototype.hideCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!1}},i.prototype.startTimer=function(e,i,o,s){if(e==t.DDZPosition.POSITION_SELF)switch(o){case t.TypeConst.TYPE_ROB:this.Timer_0.horizontalCenter=-145;break;case t.TypeConst.TYPE_DOUBLE:this.Timer_0.horizontalCenter=-8;break;case t.TypeConst.TYPE_PLAY:s?this.Timer_0.horizontalCenter=-56:this.Timer_0.horizontalCenter=-12}this["Timer_"+e].showTime(i,e,o)},i.prototype.stopTimer=function(t){this["Timer_"+t].stopTime()},i.prototype.showDoubleBox=function(){this.BoxDouble.visible=!0},i.prototype.hideDoubleBox=function(){this.BoxDouble.visible=!1},i.prototype.setVisiblePlayBox=function(e){switch(e){case t.PlayBtnConst.PLAYBTN_ONE:this.BoxPlay.x=376,this.BoxNoPlay.visible=!1,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!0;break;case t.PlayBtnConst.PLAYBTN_TWO:this.BoxNoPlay.x=376,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!1;break;case t.PlayBtnConst.PLAYBTN_THREE:this.BoxNoPlay.x=82,this.BoxPlayTip.x=342,this.BoxPlay.x=486,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!0,this.BoxPlay.visible=!0}this.BoxPlayCard.visible=!0},i.prototype.setHidePlayBox=function(){this.BoxPlayCard.visible=!1},i.prototype.showPlayBox=function(){this.BoxPlayCard.visible=!0},i.prototype.hideOperBtn=function(){this.CallBankerBox.visible=!1,this.BoxDouble.visible=!1,this.BoxPlayCard.visible=!1},i.prototype.playCard=function(e){switch(e.currentTarget){case this.Play:this.applyFunc(t.EVENT.PLAY_CARD);break;case this.NoPlay:this.applyFunc(t.EVENT.NO_PLAY_CARD)}},i.prototype.playTip=function(){this.applyFunc(t.EVENT.PLAY_TIP)},i.prototype["double"]=function(e){var i;switch(e.currentTarget){case this.Double:i=t.OperateType.OPER_DOUBLE;break;case this.NoDouble:i=t.OperateType.OPER_NODOUBLE}this.applyFunc(t.EVENT.OPERATE_REQ,i)},i.prototype.deposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_DEPOSIT)},i.prototype.cancerDeposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_CANCER_DEP)},i.prototype.showMenu=function(){this.menuType=0==this.menuType?!0:!1,this.menuType?(this.ShowMenu.source=RES.getRes("Dou-dizhu_button12"),egret.Tween.get(this.MenuBox).to({y:0},100)):(this.ShowMenu.source=RES.getRes("Dou-dizhu_button13"),egret.Tween.get(this.MenuBox).to({y:-300},100).call(function(){this.hideBtnEffect()}.bind(this))),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_MENU)},i.prototype.rechargeMoney=function(){this.applyFunc(t.EVENT.RECHARGE)},i.prototype.menuItem=function(e){switch(App.SoundManager.playEffect("click_mp3"),this.hideBtnEffect(),e.currentTarget){case this.BtnHelp:this.BtnHelp_Mask.visible=!0,this.applyFunc(t.EVENT.HELP),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_HELP);break;case this.BtnSet:this.BtnSet_Mask.visible=!0,this.applyFunc(t.EVENT.GAME_SET),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_SET);break;case this.BtnRecord:this.BtnRecord_Mask.visible=!0,this.applyFunc(t.EVENT.RECORD),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_MILITARY)}},i.prototype.exitRoom=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc(t.EVENT.EXIT_POPUT)},i.prototype.hideBtnEffect=function(){this.BtnHelp_Mask.visible=!1,this.BtnRecord_Mask.visible=!1,this.BtnSet_Mask.visible=!1},i.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket.play(RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket.play(RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(RedPackBone.Animation1)},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.effectButton(this.BtnReturn,this.exitRoom,this),App.CommonUtils.effectButton(this.Deposit,this.deposit,this),App.CommonUtils.effectButton(this.BoxCancer,this.cancerDeposit,this),App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this),App.CommonUtils.effectButton(this.moneyGroup,this.rechargeMoney,this,{}),this.btnRedPacket&&this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.Deposit),App.CommonUtils.removeButton(this.BoxCancer),App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.moneyGroup),this.btnRedPacket&&this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.Timer_0.destroy(),this.Timer_1.destroy(),this.Timer_2.destroy())},i}(BaseEuiComponent);t.MenuView=e,__reflect(e.prototype,"ddz.MenuView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return e.call(this,"PlayerMessageSkin")||this}return __extends(i,e),i.prototype.init=function(){this.hideUser(t.DDZPosition.POSITION_SELF),this.hideUser(t.DDZPosition.POSITION_RIGHT),this.hideUser(t.DDZPosition.POSITION_LEFT),App.OffsetLeft(this.GroupInfo_2),App.OffsetLeft(this.GroupInfo_0)},i.prototype.setUserName=function(t,e){this["UserName_"+t].text=e},i.prototype.getUserName=function(t){return this["UserName_"+t].text},i.prototype.setUserMoney=function(t,e){this["UserMoney_"+t].text=e},i.prototype.setUserHead=function(t,e){this["UserImage_"+t].source=e},i.prototype.setUserFrame=function(t,e){this["UserFrame_"+t].source=e},i.prototype.showUser=function(t){this["GroupInfo_"+t].visible=!0},i.prototype.hideUser=function(t){this["GroupInfo_"+t].visible=!1},i}(BaseEuiComponent);t.PlayerMessage=e,__reflect(e.prototype,"ddz.PlayerMessage")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,"RecordSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.visible=!0,this.RecordBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu,300,0,1,function(){this.gameList.contentHeight<this.scrollerItem.viewport.height?this.scrollerItem.verticalScrollBar.visible=!1:this.scrollerItem.verticalScrollBar.visible=!0}.bind(this)),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordItem,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/ddz/components/RecordItem.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.Record=e,__reflect(e.prototype,"ddz.Record")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Time.text=this.data.date_time,this.Identify.text=this.data.is_landlord?"地主":"农民",this.Money.text=this.data.amount>0?"+"+App.CommonUtils.money(this.data.amount):""+App.CommonUtils.money(this.data.amount))},e}(eui.ItemRenderer);t.RecordItem=e,__reflect(e.prototype,"ddz.RecordItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TimerSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.showTime=function(t,e,i){this.visible=!0,this.position=e,this.timeType=i,this.timerNumber=t,this.TimerLable.text=String(this.timerNumber),App.TimerManager.doTimer(1e3,0,this.refreshTimer,this)},i.prototype.refreshTimer=function(){this.timerNumber>0?(this.timerNumber--,this.TimerLable.text=String(this.timerNumber),this.timeType==t.TypeConst.TYPE_PLAY&&(this.position==t.DDZPosition.POSITION_SELF&&App.SoundManager.playEffect("ddz_s_countdown_mp3"),3==this.timerNumber&&App.SoundManager.playEffect("ddz_s_alert_mp3"))):(App.TimerManager.remove(this.refreshTimer,this),this.visible=!1)},i.prototype.stopTime=function(){App.TimerManager.remove(this.refreshTimer,this),this.visible=!1},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),App.TimerManager.remove(this.refreshTimer,this))},i}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"ddz.Timer")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TypeBoxSkin")||this;return t.alarmIndex_0=0,t.alarmIndex_1=0,t.alarmIndex_2=0,t}return __extends(i,e),i.prototype.init=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.hideTab(t.DDZPosition.POSITION_RIGHT),this.hideTab(t.DDZPosition.POSITION_LEFT),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT),this.hideTips(),App.OffsetLeft(this.GroupType_2),App.OffsetLeft(this.BossHat_2),App.OffsetLeft(this.Alarm_2),App.OffsetLeft(this.GroupType_0),App.OffsetLeft(this.BossHat_0),App.OffsetLeft(this.Alarm_0)},i.prototype.showType=function(e,i){var o=this.getType(i);this["Type_"+e].source=RES.getRes(o),e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!0:this["Type_"+e].visible=!0},i.prototype.hideType=function(e){e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!1:this["Type_"+e].visible=!1},i.prototype.showTab=function(t){this["DepositTab_"+t].visible=!0},i.prototype.hideTab=function(t){this["DepositTab_"+t].visible=!1},i.prototype.showBoss=function(t){this["BossHat_"+t].visible=!0},i.prototype.hideBoss=function(t){this["BossHat_"+t].visible=!1},i.prototype.showAlarm=function(t){this["Alarm_"+t].visible=!0,App.TimerManager.doTimer(300,0,this["alarmAni_"+t],this)},i.prototype.alarmAni_0=function(){this.alarmAni(t.DDZPosition.POSITION_SELF)},i.prototype.alarmAni_1=function(){this.alarmAni(t.DDZPosition.POSITION_RIGHT)},i.prototype.alarmAni_2=function(){this.alarmAni(t.DDZPosition.POSITION_LEFT)},i.prototype.alarmAni=function(t){this["alarmIndex_"+t]++,this["alarmIndex_"+t]%2==0?this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi"):this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi2")},i.prototype.hideAlarm=function(t){this["Alarm_"+t].visible&&(this["Alarm_"+t].visible=!1,App.TimerManager.remove(this["alarmAni_"+t],this),this["alarmIndex_"+t]=0)},i.prototype.getType=function(t){var e;return e="Dou-dizhu_text"+String(t)},i.prototype.showTips=function(e){switch(e){case t.TipConst.TIP_ONE:this.TipSource.source=RES.getRes("Dou-dizhu_text56");break;case t.TipConst.TIP_TWO:this.TipSource.source=RES.getRes("Dou-dizhu_text55");break;case t.TipConst.TIP_THREE:this.TipSource.source=RES.getRes("Dou-dizhu_text57")}egret.Tween.get(this.PlayTips).to({alpha:1},100),App.TimerManager.doTimer(3e3,1,function(){egret.Tween.get(this.PlayTips).to({alpha:0},100)},this)},i.prototype.hideTips=function(){this.PlayTips.alpha=0},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT))},i}(BaseEuiComponent);t.TypeBox=e,__reflect(e.prototype,"ddz.TypeBox")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Ani=1101]="Ani",t[t.Popup=1102]="Popup",t[t.CommonTest=1102]="CommonTest"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.MALE=1]="MALE",t[t.FAMALE=2]="FAMALE"}(i=t.SexConst||(t.SexConst={}));var o;!function(t){t[t.POSITION_UNDEFINE=-1]="POSITION_UNDEFINE",t[t.POSITION_SELF=0]="POSITION_SELF",t[t.POSITION_RIGHT=1]="POSITION_RIGHT",t[t.POSITION_LEFT=2]="POSITION_LEFT"}(o=t.DDZPosition||(t.DDZPosition={}));var s;!function(t){t[t.STATE_UNDEFINED=-1]="STATE_UNDEFINED",t[t.STATE_IDLE=0]="STATE_IDLE",t[t.STATE_MATCH=1]="STATE_MATCH",t[t.STATE_DEAL=2]="STATE_DEAL",t[t.STATE_ROB=3]="STATE_ROB",t[t.STATE_MISSCARRY=4]="STATE_MISSCARRY",t[t.STATE_DEAL_BOTTOM=5]="STATE_DEAL_BOTTOM",t[t.STATE_DOUBLE=6]="STATE_DOUBLE",t[t.STATE_DISCARD=7]="STATE_DISCARD",t[t.STATE_EXCHANGE=8]="STATE_EXCHANGE"}(s=t.GameStateConst||(t.GameStateConst={}));var r;!function(t){t[t.OPER_READY=25]="OPER_READY",t[t.OPER_STARTGAME=100]="OPER_STARTGAME",t[t.OPER_STARTGAMESEEN=101]="OPER_STARTGAMESEEN",t[t.OPER_NOROB=200]="OPER_NOROB",t[t.OPER_ROBONE=201]="OPER_ROBONE",t[t.OPER_ROBTWO=202]="OPER_ROBTWO",t[t.OPER_ROBTHREE=203]="OPER_ROBTHREE",t[t.OPER_NODOUBLE=300]="OPER_NODOUBLE",t[t.OPER_DOUBLE=301]="OPER_DOUBLE",t[t.OPER_DEPOSIT=400]="OPER_DEPOSIT",t[t.OPER_CANCER_DEP=401]="OPER_CANCER_DEP",t[t.OPER_DESTROY_TO_LOBBY=501]="OPER_DESTROY_TO_LOBBY",t[t.OPER_DESTROY_IDLE=502]="OPER_DESTROY_IDLE",t[t.OPER_DESTROY_MATCH=503]="OPER_DESTROY_MATCH",t[t.OPER_NODISCARD=44]="OPER_NODISCARD"}(r=t.OperateType||(t.OperateType={}));var n;!function(t){t[t.PLAYBTN_UNDEFINED=0]="PLAYBTN_UNDEFINED",t[t.PLAYBTN_ONE=1]="PLAYBTN_ONE",t[t.PLAYBTN_TWO=2]="PLAYBTN_TWO",t[t.PLAYBTN_THREE=3]="PLAYBTN_THREE"}(n=t.PlayBtnConst||(t.PlayBtnConst={}));var a=function(){function t(){}return t.LOW_FOLD="Dou-dizhu_text52",t.MEDIUM_FOLD="Dou-dizhu_text53",t.HIGH_FOLD="Dou-dizhu_text54",t}();t.FoldConst=a,__reflect(a.prototype,"ddz.FoldConst");var h;!function(t){t[t.TIP_UNDEFINED=0]="TIP_UNDEFINED",t[t.TIP_ONE=1]="TIP_ONE",t[t.TIP_TWO=2]="TIP_TWO",t[t.TIP_THREE=3]="TIP_THREE"}(h=t.TipConst||(t.TipConst={}));var d;!function(t){t[t.CODE_ZERO=0]="CODE_ZERO"}(d=t.ErrorConst||(t.ErrorConst={}));var p;!function(t){t[t.TYPE_UNDEFINED=0]="TYPE_UNDEFINED",t[t.TYPE_ROB=1]="TYPE_ROB",t[t.TYPE_DOUBLE=2]="TYPE_DOUBLE",t[t.TYPE_PLAY=3]="TYPE_PLAY"}(p=t.TypeConst||(t.TypeConst={}));var c;!function(t){t[t.EXIT_ROOM=10104]="EXIT_ROOM",t[t.EXIT_ROOM_R=10105]="EXIT_ROOM_R",t[t.BOTTOM_SCORE_N=11001]="BOTTOM_SCORE_N",t[t.STATE_R=11002]="STATE_R",t[t.SEAT_INFO=11003]="SEAT_INFO",t[t.SEAT_R=11004]="SEAT_R",t[t.ACTION_Q=11005]="ACTION_Q",t[t.ACTION_R=11006]="ACTION_R",t[t.ACTION_N=11007]="ACTION_N",t[t.CARD_INFO_R=11008]="CARD_INFO_R",t[t.MULTIPLE_N=11009]="MULTIPLE_N",t[t.BOTTOM_CARD_R=11010]="BOTTOM_CARD_R",t[t.DISCARD_Q=11011]="DISCARD_Q",t[t.DISCARD_R=11012]="DISCARD_R",t[t.DISCARD_N=11013]="DISCARD_N",t[t.DISCARD_RECORD_N=11014]="DISCARD_RECORD_N",t[t.EXCHANGE_N=11015]="EXCHANGE_N",t[t.COMBAT_RECORD_Q=11018]="COMBAT_RECORD_Q",t[t.COMBAT_RECORD_R=11019]="COMBAT_RECORD_R"}(c=t.ProxyConst||(t.ProxyConst={}));var l;!function(t){t[t.onBottomScoreCallBack=10001]="onBottomScoreCallBack",t[t.onStateCallBack=10002]="onStateCallBack",t[t.onActionCallBack=10003]="onActionCallBack",t[t.onSeatCallBack=10004]="onSeatCallBack",t[t.onSeatInfoCallBack=10005]="onSeatInfoCallBack",t[t.onCardInfoCallBack=10006]="onCardInfoCallBack",t[t.onActionNotifyCallBack=10007]="onActionNotifyCallBack",t[t.onBottomCardCallBack=10008]="onBottomCardCallBack",t[t.onDiscardCallBack=10009]="onDiscardCallBack",t[t.onDiscardNotifyCallBack=10010]="onDiscardNotifyCallBack",t[t.onExchangeNotifyCallBack=10011]="onExchangeNotifyCallBack",t[t.onExitRoomCallBack=10012]="onExitRoomCallBack",t[t.onMultipleCalBack=10013]="onMultipleCalBack",t[t.onDiscardRecordCallBack=10014]="onDiscardRecordCallBack",t[t.onCombatRecordCallBack=10015]="onCombatRecordCallBack"}(l=t.CallBacks||(t.CallBacks={}));var _;!function(t){t[t.OPERATE_REQ=1001]="OPERATE_REQ",t[t.TOUCH_CARD_END=1002]="TOUCH_CARD_END",t[t.TOUCH_CARD_MOVE=1003]="TOUCH_CARD_MOVE",t[t.TOUCH_CARD_BEGIN=1004]="TOUCH_CARD_BEGIN",t[t.PLAY_CARD=1005]="PLAY_CARD",t[t.NO_PLAY_CARD=1006]="NO_PLAY_CARD",t[t.PLAY_TIP=1007]="PLAY_TIP",t[t.EXIT_ROOM=1008]="EXIT_ROOM",t[t.GAME_SET=1009]="GAME_SET",t[t.HELP=1010]="HELP",t[t.RECORD=1011]="RECORD",t[t.EXIT_POPUT=1012]="EXIT_POPUT",t[t.RECHARGE=1013]="RECHARGE"}(_=t.EVENT||(t.EVENT={}));var u;!function(t){t[t.START=1]="START",t[t.ROCKET=2]="ROCKET",t[t.BOMB=3]="BOMB",t[t.LIANDUI=4]="LIANDUI",t[t.SHUNZI=5]="SHUNZI",t[t.PLANE=6]="PLANE",t[t.SPRING=7]="SPRING",t[t.BOSSWIN=8]="BOSSWIN",t[t.FARMERWIN=9]="FARMERWIN"}(u=t.BonesConst||(t.BonesConst={}));var T=function(){function t(){}return t.DDZ_POINT={START_CLEARCARD:"DDZstart_clearcard",START_NORMAL:"DDZstart_normal",ROB_201BEI:"DDZrob_1bei",ROB_202BEI:"DDZrob_2bei",ROB_203BEI:"DDZrob_3bei",ROB_200BEI:"DDZrob_no",DOUBLE_300:"DDZdouble_no",DOUBLE_301:"DDZdouble_yes",PANEL_NULTIPLE:"DDZpanel_multiple",BUTTON_CARDPLAYER:"DDZbutton_cardplayer",PANEL_CARDPLAYER:"DDZpanel_cardplayer",BUTTON_MENU:"DDZbutton_menu",BUTTON_BACK:"DDZbutton_back",BUTTON_HELP:"DDZbutton_help",BUTTON_SET:"DDZbutton_set",BUTTON_TIPS:"DDZbutton_tips",BUTTON_DEPOSIT:"DDZbutton_deposit",BUTTON_MILITARY:"DDZbutton_military",BUTTON_CANCLEDEPOSIT:"DDZbutton_cancledeposit",EVENT_CONSECUTIVE:"DDZevent_consecutive",EVENT_DISBAND:"DDZevent_disband",EVENT_MATCH:"DDZevent_match",EVENT_MATCHS:"DDZevent_matches",EVENT_BOMB:"DDZevent_bomb",EVENT_SPRING:"DDZevent_spring"},t}();t.PointConst=T,__reflect(T.prototype,"ddz.PointConst")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.PHT_ERROR=-1]="PHT_ERROR",t[t.PHT_NODISCARD=0]="PHT_NODISCARD",t[t.PHT_SINGLE=1]="PHT_SINGLE",t[t.PHT_PAIR=2]="PHT_PAIR",t[t.PHT_THREE=3]="PHT_THREE",t[t.PHT_THREE_ONE=4]="PHT_THREE_ONE",t[t.PHT_THREE_TWO=5]="PHT_THREE_TWO",t[t.PHT_FOUR_TWO=6]="PHT_FOUR_TWO",t[t.PHT_FOUR_TWO_TWO=7]="PHT_FOUR_TWO_TWO",t[t.PHT_SHUNZI=8]="PHT_SHUNZI",t[t.PHT_PAIR_SHUNZI=9]="PHT_PAIR_SHUNZI",t[t.PHT_PLANE=10]="PHT_PLANE",t[t.PHT_PLANE_WING=11]="PHT_PLANE_WING",t[t.PHT_PLANE_WING_TWO=12]="PHT_PLANE_WING_TWO",t[t.PHT_BOMB=13]="PHT_BOMB",t[t.PHT_ROCKET=14]="PHT_ROCKET"}(e=t.PHandsType||(t.PHandsType={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_COLOR_UNDEFINE=0]="POKER_COLOR_UNDEFINE",t[t.POKER_COLOR_DIAMONDS=1]="POKER_COLOR_DIAMONDS",t[t.POKER_COLOR_COLVERS=2]="POKER_COLOR_COLVERS",t[t.POKER_COLOR_HEARTS=3]="POKER_COLOR_HEARTS",t[t.POKER_COLOR_SPADES=4]="POKER_COLOR_SPADES"}(e=t.PokerColor||(t.PokerColor={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_VALUE_UNDEFINE=0]="POKER_VALUE_UNDEFINE",t[t.POKER_VALUE_THREE=1]="POKER_VALUE_THREE",t[t.POKER_VALUE_FOUR=2]="POKER_VALUE_FOUR",t[t.POKER_VALUE_FIVE=3]="POKER_VALUE_FIVE",t[t.POKER_VALUE_SIX=4]="POKER_VALUE_SIX",t[t.POKER_VALUE_SEVEN=5]="POKER_VALUE_SEVEN",t[t.POKER_VALUE_EIGHT=6]="POKER_VALUE_EIGHT",t[t.POKER_VALUE_NINE=7]="POKER_VALUE_NINE",t[t.POKER_VALUE_TEN=8]="POKER_VALUE_TEN",t[t.POKER_VALUE_JACK=9]="POKER_VALUE_JACK",t[t.POKER_VALUE_QUEEN=10]="POKER_VALUE_QUEEN",t[t.POKER_VALUE_KING=11]="POKER_VALUE_KING",t[t.POKER_VALUE_ACE=12]="POKER_VALUE_ACE",t[t.POKER_VALUE_TWO=13]="POKER_VALUE_TWO",t[t.POKER_VALUE_BLACK_JOKER=14]="POKER_VALUE_BLACK_JOKER",t[t.POKER_VALUE_RED_JOKER=15]="POKER_VALUE_RED_JOKER"}(e=t.PokerValue||(t.PokerValue={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,t._popView=null,t._ddzModel=null,t._proxy=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.mGameUtil=new t.GameUtil,this.mGameTipsUtil=new t.GameTipsUtil,this.inits(),this.addListeners(),this.addEventListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),this.gameInit()},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),t.PokerTextures.cleanAll(),ObjectPool.clearClass("ddz.Poker","destroy"),App.TimerManager.removeAll(this),this._view.hideTypeAll(),this._view.clearCard(t.DDZPosition.POSITION_SELF),this._view.clearCard(t.DDZPosition.POSITION_RIGHT),this._view.clearCard(t.DDZPosition.POSITION_LEFT),this._view.cleanTableCard(t.DDZPosition.POSITION_SELF),this._view.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this._view.cleanTableCard(t.DDZPosition.POSITION_LEFT),this._view.canserDeposit(t.DDZPosition.POSITION_SELF),this._view.canserDeposit(t.DDZPosition.POSITION_RIGHT),this._view.canserDeposit(t.DDZPosition.POSITION_LEFT),this._view.hideAlarm(t.DDZPosition.POSITION_SELF),this._view.hideAlarm(t.DDZPosition.POSITION_RIGHT),this._view.hideAlarm(t.DDZPosition.POSITION_LEFT),this._view.hideDoubleBox(),this._view.hideRobBox(),this._view.hideBtnPlayBox(),this._ddzModel.gameState=-1,this._ddzModel.isDeposit=!1,this._ddzModel.isDiscarded=!1,this._ddzModel.isInsertBottom=!1,this._ddzModel.lastPlayPostion=void 0,this._ddzModel.isContinuity=!0,this._ddzModel.lastScore=0,this._ddzModel.isSprint=!1},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._ddzModel.cardList_0.length&&(this._view.CardView.GroupCard.removeChildren(),this._view.showCard(this._ddzModel.cardList_0))},i.prototype.inits=function(){e.prototype.inits.call(this),this._ddzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._ddzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.onUserMoneyChange=function(i){e.prototype.onUserMoneyChange.call(this,i);GamePlayerMgr.i.getPlayer();this._ddzModel.userMoney=this._player.getMoney(),this._view.setUserMoney(t.DDZPosition.POSITION_SELF,App.CommonUtils.money2Str(this._player.getMoney()))},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addEventListeners=function(){this.registerFunc(t.CallBacks.onBottomScoreCallBack,this.onBottomScoreCallBack,this),this.registerFunc(t.CallBacks.onStateCallBack,this.onStateCallBack,this),this.registerFunc(t.CallBacks.onActionCallBack,this.onActionCallBack,this),this.registerFunc(t.CallBacks.onActionNotifyCallBack,this.onActionNotifyCallBack,this),this.registerFunc(t.CallBacks.onSeatCallBack,this.onSeatCallBack,this),this.registerFunc(t.CallBacks.onSeatInfoCallBack,this.onSeatInfoCallBack,this),this.registerFunc(t.CallBacks.onCardInfoCallBack,this.onCardInfoCallBack,this),this.registerFunc(t.CallBacks.onBottomCardCallBack,this.onBottomCardCallBack,this),this.registerFunc(t.CallBacks.onDiscardCallBack,this.onDiscardCallBack,this),this.registerFunc(t.CallBacks.onDiscardNotifyCallBack,this.onDiscardNotifyCallBack,this),this.registerFunc(t.CallBacks.onExchangeNotifyCallBack,this.onExchangeNotifyCallBack,this),this.registerFunc(t.CallBacks.onExitRoomCallBack,this.onExitRoomCallBack,this),this.registerFunc(t.CallBacks.onMultipleCalBack,this.onMultipleCalBack,this),this.registerFunc(t.CallBacks.onDiscardRecordCallBack,this.onDiscardRecordCallBack,this),this.registerFunc(t.CallBacks.onCombatRecordCallBack,this.onCombatRecordCallBack,this),this.registerFunc(t.EVENT.OPERATE_REQ,this.operateReq,this),this.registerFunc(t.EVENT.TOUCH_CARD_END,this.touchCardEnd,this),this.registerFunc(t.EVENT.TOUCH_CARD_MOVE,this.touchCardMove,this),this.registerFunc(t.EVENT.TOUCH_CARD_BEGIN,this.touchCardBegin,this),this.registerFunc(t.EVENT.PLAY_CARD,this.playCard,this),this.registerFunc(t.EVENT.NO_PLAY_CARD,this.noPlay,this),this.registerFunc(t.EVENT.PLAY_TIP,this.playTis,this),this.registerFunc(t.EVENT.EXIT_ROOM,this.exitRoom,this),this.registerFunc(t.EVENT.GAME_SET,this.gameSet,this),this.registerFunc(t.EVENT.HELP,this.help,this),this.registerFunc(t.EVENT.RECORD,this.record,this),this.registerFunc(t.EVENT.EXIT_POPUT,this.exitPoput,this),this.registerFunc(t.EVENT.RECHARGE,this.rechage,this)
},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("ddz_bg_mp3"),this._player=GamePlayerMgr.i.getPlayer(),this._view.setUserName(t.DDZPosition.POSITION_SELF,this._player.getNickName()),this._ddzModel.userMoney=this._player.getMoney(),this._view.setUserMoney(t.DDZPosition.POSITION_SELF,App.CommonUtils.money2Str(this._player.getMoney())),this._view.setUserHead(t.DDZPosition.POSITION_SELF,"ui_headImg_"+this._player.getAvatar()),this._view.setUserFrame(t.DDZPosition.POSITION_SELF,"ui_headBox_"+this._player.getAvatarBox()),this._view.showUser(t.DDZPosition.POSITION_SELF)},i.prototype.onBottomScoreCallBack=function(t){this._ddzModel.baseScore=t.bottom_score},i.prototype.onStateCallBack=function(e){switch(this._ddzModel.gameState=e.state,e.state){case t.GameStateConst.STATE_IDLE:this.onWait();break;case t.GameStateConst.STATE_MATCH:this.onMatch();break;case t.GameStateConst.STATE_DEAL:this.onDeal(e);break;case t.GameStateConst.STATE_ROB:this.onRob(e);break;case t.GameStateConst.STATE_MISSCARRY:this.onMissCarry(e);break;case t.GameStateConst.STATE_DOUBLE:this.onDouble(e);break;case t.GameStateConst.STATE_DISCARD:this.onDiscard(e)}},i.prototype.onWait=function(){this._view.waitGame(),this._popView.hideWinner()},i.prototype.onMatch=function(){this._view.onMatch(),this._popView.closeExcangePoput(),this._popView.hideWinner(),this._ddzModel.isContinuity=!1},i.prototype.onDeal=function(t){this._view.showDeposit(),this._ddzModel.isOpenCard_1=!1,this._ddzModel.isOpenCard_2=!1,this._ddzModel.isDealAni=t.remaining_time==t.total_time?!0:!1,this._ddzModel.isDealAni&&this._view.startDeal(),this._ddzModel.isContinuity&&this.continuityPoint(),this.matchPoint()},i.prototype.onRob=function(e){this._view.showBottomCard(!1),this._view.hideBtnCardPlayer(),this._view.showBottomBg();var i=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition);this._view.hideType(i),i==t.DDZPosition.POSITION_SELF&&(this._view.disabledRobBtn(this._ddzModel.lastScore),this._view.showRobBox());var o=Math.round(e.total_time/1e3);this._view.startTimer(i,o,t.TypeConst.TYPE_ROB)},i.prototype.onMissCarry=function(t){var e=t.remaining_time==t.total_time?!0:!1;this._view.onMissCarry(e)},i.prototype.onDouble=function(e){this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._view.showDeposit(),this._view.showDoubleBox();var i=Math.round(e.remaining_time/1e3);this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_RIGHT,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_LEFT,i,t.TypeConst.TYPE_DOUBLE)},i.prototype.onDiscard=function(e){this._ddzModel.isDiscarded||(this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._ddzModel.isDiscarded=!0),this._view.showDeposit();var i=Math.round(e.remaining_time/1e3),o=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition),s=this.mGameUtil.resetPosition(e.cmp_seat,this._ddzModel.selfPosition);if(void 0==this._ddzModel.lastPlayPostion&&(this._view.hideTypeAll(),this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),this.rendenCardPlayer(),this._view.showCardPlayer(),this._view.showBtnCardPlayer())),this._ddzModel.lastPlayPostion=s,this._view.cleanTableCard(o),this._view.hideType(o),e.turn_seat==this._ddzModel.selfPosition)if(e.turn_seat==e.cmp_seat)this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_ONE),this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_PLAY,!1);else{var r=this._view.getOutCard(s),n=this.mGameTipsUtil.getTipPokerList(r,this._ddzModel.cardList_0,this._ddzModel.lastCardType);n?(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!0),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_THREE)):(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!1),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_TWO),this._ddzModel.isDeposit||this._view.showTips(t.TipConst.TIP_TWO))}else this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY);this.mGameTipsUtil.clean()},i.prototype.onSeatCallBack=function(t){this._ddzModel.selfPosition=t.seat,this._view.filishMatch()},i.prototype.onSeatInfoCallBack=function(e){this._view.showBaseScore(this._ddzModel.baseScore);var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._view.setUserName(i,e.nick_name),this._view.setUserMoney(i,""+App.CommonUtils.money(e.balance));var o=e.head?e.head:1;switch(this._view.setUserHead(i,"ui_headImg_"+o),this._view.setUserFrame(i,"ui_headBox_"+e.head_frame),this._view.showUser(i),this._ddzModel["sex_"+i]=e.sex?e.sex:1,e.seat==this._ddzModel.selfPosition&&(this._ddzModel.vip=e.vip+1),e.is_trusteeship?(e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0),this._view.deposit(i)):(e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!1),this._view.canserDeposit(i)),this._ddzModel.gameState){case t.GameStateConst.STATE_ROB:switch(e.rob_landlord_val){case 0:this._view.showType(i,t.OperateType.OPER_NOROB);break;case 1:this._view.showType(i,t.OperateType.OPER_ROBONE);break;case 2:this._view.showType(i,t.OperateType.OPER_ROBTWO);break;case 3:this._view.showType(i,t.OperateType.OPER_ROBTHREE)}break;case t.GameStateConst.STATE_DOUBLE:switch(e.double_val){case 0:this._view.showType(i,t.OperateType.OPER_NODOUBLE);break;case 1:this._view.showType(i,t.OperateType.OPER_DOUBLE)}}if(e.last_discard_type!=t.PHandsType.PHT_ERROR)if(this._view.hideType(i),e.last_discard_type==t.PHandsType.PHT_NODISCARD)this._view.showType(i,t.OperateType.OPER_NODISCARD);else{this._ddzModel.lastPlayPostion=i,this._ddzModel.lastCardType=e.last_discard_type;var s=[];e.lately_valid_discard.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);s.push(e)}.bind(this)),e.last_discard_type==t.PHandsType.PHT_SHUNZI&&s.reverse(),this._view.showTableCard(i,s)}},i.prototype.onCardInfoCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._ddzModel.gameState==t.GameStateConst.STATE_DEAL?(this._ddzModel["cardNumber_"+i]=e.count,i==t.DDZPosition.POSITION_SELF?(this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealCard(this._ddzModel.cardList_0):this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!0):this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._ddzModel.isDealAni?this._view.dealCardOthers(i,e.count):this._view.showCardNumberOthers(i,e.count)):this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?e.seat!=this._ddzModel.selfPosition&&(this._ddzModel["isOpenCard_"+i]||R.setTimeOnce(function(){this.createCard(i,e.cards,!1),this._view.openCard(i,this._ddzModel["cardList_"+i])}.bind(this),this,1e3)):this._ddzModel.gameState!=t.GameStateConst.STATE_MISSCARRY&&(this._ddzModel["cardNumber_"+i]=e.count,e.seat==this._ddzModel.selfPosition?(this.createCard(i,e.cards,!1),this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.showCardNumberOthers(i,e.count),2==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i),1==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i))},i.prototype.createCard=function(e,i,o){i.length>0&&(o||this._view.clearCard(e),i.forEach(function(i){var s=this.mGameUtil.getCardWithNum(i),r=t.Poker.create();r.init(s.color,s.value,i,o),this._ddzModel["cardList_"+e].push(r)}.bind(this)),t.PokerUtil.sort(this._ddzModel["cardList_"+e]))},i.prototype.onActionCallBack=function(e){if(e.code==t.ErrorConst.CODE_ZERO)switch(e.oper){case t.OperateType.OPER_STARTGAME:this._view.startGameReq(),this.startGamePoint();break;case t.OperateType.OPER_STARTGAMESEEN:this._view.startGameReq(),this.startGameSeenPoint();break;case t.OperateType.OPER_NOROB:this.robReturn(e);break;case t.OperateType.OPER_ROBONE:this.robReturn(e);break;case t.OperateType.OPER_ROBTWO:this.robReturn(e);break;case t.OperateType.OPER_ROBTHREE:this.robReturn(e);break;case t.OperateType.OPER_NODOUBLE:this.doubleReturn(e);break;case t.OperateType.OPER_DOUBLE:this.doubleReturn(e);break;case t.OperateType.OPER_DEPOSIT:this.depositPoint();break;case t.OperateType.OPER_CANCER_DEP:this.cancleDepositPoint()}},i.prototype.onActionNotifyCallBack=function(e){e.seat==this._ddzModel.selfPosition&&this._view.hideOperBtn();var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);switch(this._view.stopTimer(i),e.oper){case t.OperateType.OPER_STARTGAME:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_STARTGAMESEEN:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_NOROB:this._view.showType(i,t.OperateType.OPER_NOROB),App.SoundManager.playEffect("ddz_rob_0_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBONE:this._ddzModel.lastScore=1,this._view.showType(i,t.OperateType.OPER_ROBONE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTWO:this._ddzModel.lastScore=2,this._view.showType(i,t.OperateType.OPER_ROBTWO),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTHREE:this._ddzModel.lastScore=3,this._view.showType(i,t.OperateType.OPER_ROBTHREE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_NODOUBLE:this._view.showType(i,t.OperateType.OPER_NODOUBLE),App.SoundManager.playEffect("ddz_no_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DOUBLE:this._view.showType(i,t.OperateType.OPER_DOUBLE),App.SoundManager.playEffect("ddz_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DEPOSIT:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0),this._view.deposit(i);break;case t.OperateType.OPER_CANCER_DEP:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!1),this._view.canserDeposit(i);break;case t.OperateType.OPER_DESTROY_TO_LOBBY:this.disbandPoint(),e.seat==this._ddzModel.selfPosition?(this._player.setMoney(this._ddzModel.userMoney),this.onExitRoomCallBack()):this._view.hideUser(i);break;case t.OperateType.OPER_DESTROY_IDLE:this.disbandPoint(),e.seat!=this._ddzModel.selfPosition&&this._view.hideUser(i);break;case t.OperateType.OPER_DESTROY_MATCH:this.disbandPoint(),e.seat!=this._ddzModel.selfPosition&&this._view.hideUser(i)}},i.prototype.robReturn=function(e){this._view.hideRobBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.robPoint(e.oper)},i.prototype.onBottomCardCallBack=function(e){var i=this.mGameUtil.resetPosition(e.landlord_seat,this._ddzModel.selfPosition);if(this._ddzModel.bossSeat=i,this._view.showBoss(i),this._ddzModel.gameState==t.GameStateConst.STATE_DEAL_BOTTOM&&this._view.hideTypeAll(),this._ddzModel.bottomCardList.length=0,e.bottom_cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel.bottomCardList.push(e)}.bind(this)),this._view.openBottomCard(this._ddzModel.bottomCardList),e.insert_hand_card)if(this._ddzModel["cardNumber_"+i]+=e.bottom_cards.length,i==t.DDZPosition.POSITION_SELF)this._ddzModel.isInsertBottom||(this.createCard(i,e.bottom_cards,!0),App.TimerManager.doTimer(500,1,function(){this._view.showCard(this._ddzModel.cardList_0)}.bind(this),this));else{var o=this._ddzModel["cardNumber_"+i];this._ddzModel["isOpenCard_"+i]?(this.createCard(i,e.bottom_cards,!0),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.setCardNumber(i,o)}},i.prototype.doubleReturn=function(e){this._view.hideDoubleBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.doublePoint(e.oper)},i.prototype.onDiscardCallBack=function(e){e.code==t.ErrorConst.CODE_ZERO?(this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.hideBtnPlayBox(),this._ddzModel.isDiscard?this._view.playCard():this._view.showType(t.DDZPosition.POSITION_SELF,t.OperateType.OPER_NODISCARD)):(this._view.showTips(t.TipConst.TIP_ONE),this._view.showPlayBoxOnly())},i.prototype.onDiscardNotifyCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._view.stopTimer(i),this._ddzModel["cardNumber_"+i]-=e.cards.length;var o=this._ddzModel["cardNumber_"+i];if(e.seat==this._ddzModel.selfPosition?this._view.hideBtnPlayBox():this._view.setCardNumber(i,o),e.type==t.PHandsType.PHT_NODISCARD)return this._view.showType(i,t.OperateType.OPER_NODISCARD),void App.SoundManager.playEffect("ddz_pass_"+this._ddzModel["sex_"+i]+"_mp3");this._ddzModel.lastCardType=e.type;var s=[];switch(e.cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--,s.push(e)}.bind(this)),this._ddzModel.vip>0&&this.rendenCardPlayer(),e.type){case t.PHandsType.PHT_SINGLE:App.SoundManager.playEffect("ddz_single"+s[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PAIR:App.SoundManager.playEffect("ddz_pair"+s[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE:App.SoundManager.playEffect("ddz_triple_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_ONE:App.SoundManager.playEffect("ddz_3and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_TWO:App.SoundManager.playEffect("ddz_3and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO:App.SoundManager.playEffect("ddz_4and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO_TWO:App.SoundManager.playEffect("ddz_4and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_SHUNZI:this._view.playBoneAni(t.BonesConst.SHUNZI),App.SoundManager.playEffect("ddz_straight_"+this._ddzModel["sex_"+i]+"_mp3"),s.reverse();break;case t.PHandsType.PHT_PAIR_SHUNZI:this._view.playBoneAni(t.BonesConst.LIANDUI),App.SoundManager.playEffect("ddz_doubelstraight_"+this._ddzModel["sex_"+i]+"_mp3"),s.reverse();break;case t.PHandsType.PHT_PLANE:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_plane_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING_TWO:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_BOMB:this._view.playBoneAni(t.BonesConst.BOMB),App.SoundManager.playEffect("ddz_bomb_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint();break;case t.PHandsType.PHT_ROCKET:this._view.playBoneAni(t.BonesConst.ROCKET),App.SoundManager.playEffect("ddz_rocket_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint()}this._view.playCardNotify(i,s,this._ddzModel.isDeposit),(2==o||1==o)&&(this._view.showAlarm(i),R.setTimeOnce(function(){App.SoundManager.playEffect("ddz_left"+o+"_"+this._ddzModel["sex_"+i]+"_mp3")}.bind(this),this,300))},i.prototype.onExchangeNotifyCallBack=function(e){this._view.hideTypeAll(),R.setTimeOnce(function(){this._view.cleanTableCard(t.DDZPosition.POSITION_SELF),this._view.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this._view.cleanTableCard(t.DDZPosition.POSITION_LEFT)}.bind(this),this,1e3),this._view.canserDeposit(t.DDZPosition.POSITION_SELF),this._view.canserDeposit(t.DDZPosition.POSITION_RIGHT),this._view.canserDeposit(t.DDZPosition.POSITION_LEFT),this._view.hideAlarm(t.DDZPosition.POSITION_SELF),this._view.hideAlarm(t.DDZPosition.POSITION_RIGHT),this._view.hideAlarm(t.DDZPosition.POSITION_LEFT),this._ddzModel.isDeposit=!1,this._ddzModel.isDiscarded=!1,this._ddzModel.isInsertBottom=!1,this._ddzModel.lastPlayPostion=void 0,this._ddzModel.isContinuity=!0,this._ddzModel.lastScore=0,e.is_landlord_win?this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.BOSSWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_win_mp3"):App.SoundManager.playEffect("ddz_lose_mp3")):this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.FARMERWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_lose_mp3"):App.SoundManager.playEffect("ddz_win_mp3")),this._ddzModel.isSprint=!1,this._popView.setSelfName(this._player.getNickName()),this._popView.setSelfHead("ui_headImg_"+this._player.getAvatar()),this._popView.setSelfFrame("ui_headBox_"+this._player.getAvatarBox()),e.infos.forEach(function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._popView.setPlayerName(i,this._view.getUserName(i)),this._popView.setPlayerBaseScore(i,this._ddzModel.baseScore),this._popView.setPlayerTimes(i,e.multiple),this._popView.setPlayerMoney(i,""+App.CommonUtils.money(e.change_money)),this._popView.setPlayerIsBoss(i,this._ddzModel.bossSeat),i==t.DDZPosition.POSITION_SELF&&(this._ddzModel.userMoney=e.balance),this._view.setUserMoney(i,""+App.CommonUtils.money(e.balance))}.bind(this)),App.TimerManager.doTimer(3e3,1,function(){this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE&&this._popView.exchangePoput()}.bind(this),this),this.matchsPoint()},i.prototype.onMultipleCalBack=function(e){this._view.setMultipleDetails(e),(e.spring_mul||e.contrary_spring_mul)&&(this._ddzModel.isSprint=!0,this._view.playBoneAni(t.BonesConst.SPRING),App.SoundManager.playEffect("ddz_s_spring_mp3"),this.springPoint())},i.prototype.onDiscardRecordCallBack=function(t){this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),t.record.length&&t.record.forEach(function(t){t.cards.length&&t.cards.forEach(function(t){if(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--}}.bind(this))}.bind(this)),this._view.showCardPlayer(),this._view.showBtnCardPlayer(),this.rendenCardPlayer())},i.prototype.onCombatRecordCallBack=function(t){t.records&&t.records.length&&this._popView.renderRecord(t.records)},i.prototype.onExitRoomCallBack=function(){this.goBack2Room()},i.prototype.rendenCardPlayer=function(){for(var t=1;16>t;t++)this._view.setCardPlayer(this._ddzModel["cardPlayerNum_"+t],t)},i.prototype.operateReq=function(t){this._proxy.actionRequest(t)},i.prototype.exitRoom=function(){this._proxy.requestExitRoom()},i.prototype.gameSet=function(){this._popView.openSet()},i.prototype.help=function(){this._popView.openHelp()},i.prototype.record=function(){this._popView.openRecord();var t={begin_idx:0,req_count:100};this._proxy.requestRecord(t)},i.prototype.rechage=function(){App.ViewManager.open(LobbyViewConst.Recharge)},i.prototype.exitPoput=function(){this._ddzModel.gameState==t.GameStateConst.STATE_IDLE||this._ddzModel.gameState==t.GameStateConst.STATE_MATCH||this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?this._proxy.requestExitRoom():this._popView.openExitPoput(),this.backPoint()},i.prototype.touchCardEnd=function(){this._ddzModel.cardBeginIndex=-1,this._view.toggleCardType(this._ddzModel.selectedCards),this._ddzModel.selectedCards.length=0},i.prototype.touchCardMove=function(t){if(this._ddzModel.selectedCards.length=0,this._ddzModel.cardBeginIndex>-1){if(this._ddzModel.cardBeginIndex>t)for(var e=this._ddzModel.cardBeginIndex;e>t-1;e--)this._ddzModel.selectedCards.push(e);else for(var i=this._ddzModel.cardBeginIndex;t+1>i;i++)this._ddzModel.selectedCards.push(i);this._view.hoverCard(this._ddzModel.selectedCards)}},i.prototype.touchCardBegin=function(t){this._ddzModel.cardBeginIndex=t,this._ddzModel.selectedCards.push(this._ddzModel.cardBeginIndex),this._view.hoverCard(this._ddzModel.selectedCards)},i.prototype.playCard=function(){this._ddzModel.isDiscard=!0;var e=this._view.getSelectedCard();if(e.length>0){var i=this.mGameTipsUtil.getPHandsTypeByResult(e);if(i==t.PHandsType.PHT_ERROR)this._view.showTips(t.TipConst.TIP_ONE);else{var o=[];e.forEach(function(t){o.push(t.number)}.bind(this));var s={type:i,cards:o};this._proxy.discardRequest(s),this._view.hideBtnPlayBox()}}else this._view.showTips(t.TipConst.TIP_THREE)},i.prototype.noPlay=function(){this._ddzModel.isDiscard=!1;var e={type:t.PHandsType.PHT_NODISCARD};this._proxy.discardRequest(e),this._view.hideBtnPlayBox()},i.prototype.playTis=function(){var t=this._view.getOutCard(this._ddzModel.lastPlayPostion),e=this.mGameTipsUtil.getTipPokerList(t,this._ddzModel.cardList_0,this._ddzModel.lastCardType);this._view.showTipCards(e),this.tipsPoint()},i.prototype.startGamePoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_NORMAL)},i.prototype.startGameSeenPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_CLEARCARD)},i.prototype.robPoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["ROB_"+e+"BEI"])},i.prototype.doublePoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["DOUBLE_"+e])},i.prototype.tipsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_TIPS)},i.prototype.depositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_DEPOSIT)},i.prototype.backPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_BACK)},i.prototype.cancleDepositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CANCLEDEPOSIT)},i.prototype.continuityPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_CONSECUTIVE)},i.prototype.disbandPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_DISBAND)},i.prototype.matchPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCH)},i.prototype.matchsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCHS)},i.prototype.bombPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_BOMB)},i.prototype.springPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_SPRING)},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.PokerTextures.cleanAll(),ObjectPool.clearClass("ddz.Poker","destroy"),App.TimerManager.removeAll(this),this._view.destroy(),this._popView.destroy(),this._ddzModel.destroy(),this._proxy.destroy(),this._view=void 0,this._popView=void 0,this._ddzModel=void 0,this._proxy=void 0,this.mGameUtil=void 0,this.mGameTipsUtil=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"ddz.GameController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i}return __extends(i,e),i.prototype.initData=function(){this.bossSeat=-1,this.cardList_0=[],this.cardList_1=[],this.cardList_2=[],this.callBossTimes=1,this.farmerDoubleTimes=0,this.bossDoubleTimes=0,this.bottomCardList=[],this.selectedCards=[],this.cardNumber_0=0,this.cardNumber_1=0,this.cardNumber_2=0,this.cardBeginIndex=-1,this.isDealAni=!1,this.lastPlayPostion=void 0,this.selfPosition=0,this.lastCardList=[],this.isInsertBottom=!1,this.sex_0=t.SexConst.MALE,this.sex_1=t.SexConst.MALE,this.sex_2=t.SexConst.MALE,this.lastScore=0},i.prototype.initCardPlayer=function(){this.cardPlayerNum_1=4,this.cardPlayerNum_2=4,this.cardPlayerNum_3=4,this.cardPlayerNum_4=4,this.cardPlayerNum_5=4,this.cardPlayerNum_6=4,this.cardPlayerNum_7=4,this.cardPlayerNum_8=4,this.cardPlayerNum_9=4,this.cardPlayerNum_10=4,this.cardPlayerNum_11=4,this.cardPlayerNum_12=4,this.cardPlayerNum_13=4,this.cardPlayerNum_14=1,this.cardPlayerNum_15=1},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.cardList_0=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.bottomCardList=void 0,this.selectedCards=void 0,this.lastCardList=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"ddz.GameModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("ddz.CardTypeBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("ddz.CardTypeBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var s=o?o:e.Animation;this.armature.play(s,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.CardTypeBones=e,__reflect(e.prototype,"ddz.CardTypeBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this.mIsDeposit=!1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1}return e.prototype.init=function(){this._mPokerColor=t.PokerColor.POKER_COLOR_UNDEFINE,this._mPokerValue=t.PokerValue.POKER_VALUE_UNDEFINE,this._mPokerNumber=-1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1},e.prototype.getTexture=function(){return t.PokerTextures.getPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.getSTexture=function(){return t.PokerTextures.getSPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.setBoss=function(t){this.mIsBoss=t},e.prototype.setColor=function(t){this._mPokerColor=t},e.prototype.setValue=function(t){this._mPokerValue=t},e.prototype.setNumber=function(t){this._mPokerNumber=t},e.prototype.setSeleced=function(t){this.mIsSelected=t},e.prototype.setDeposit=function(t){this.mIsDeposit=t},e.prototype.getColor=function(){return this._mPokerColor},e.prototype.getValue=function(){return this._mPokerValue},e.prototype.getNumber=function(){return this._mPokerNumber},e.prototype.getSelected=function(){return this.mIsSelected},e.prototype.getDeposit=function(){return this.mIsDeposit},e.prototype.destroy=function(){},e}();t.PokerData=e,__reflect(e.prototype,"ddz.PokerData")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._mInit=!0,this._mIcon=new eui.Image,this.addChild(this._mIcon),this._mMask=new eui.Image,this.addChild(this._mMask)},e.prototype.refreshIcon=function(t){this._mIcon.texture=t.getTexture()},e.prototype.refreshSIcon=function(t){this._mIcon.texture=t.getSTexture()},e.prototype.addMask=function(){this._mMask.texture=RES.getRes("card_ddz_mask"),this._mMask.alpha=.5},e.prototype.showDepsit=function(){this._mMask.alpha=1,this._mMask.visible=!0},e.prototype.hideDeposit=function(){this._mMask.visible=!1},e.prototype.showMask=function(){this._mMask.alpha=.5,this._mMask.visible=!0},e.prototype.hideMask=function(){this._mMask.alpha=.5,this._mMask.visible=!1},e.prototype.clean=function(){this._mIcon.texture=void 0,this._mMask.texture=void 0},e.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean())},e}(eui.Component);t.PokerIcon=e,__reflect(e.prototype,"ddz.PokerIcon")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){}return e.getPokerTexture=function(i,o){var s;if(o==t.PokerValue.POKER_VALUE_UNDEFINE)s="card_ddz_bg";else if(o==t.PokerValue.POKER_VALUE_RED_JOKER)s="card_ddz_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)s="card_ddz_78";else{var r=o+2>13?o-11:o+2;s="card_ddz_"+(i-1)+"_"+r}var n=e._mPokerTextures;return n[s]||(n[s]=RES.getRes(s)),n[s]},e.getSPokerTexture=function(i,o){var s;if(o==t.PokerValue.POKER_VALUE_RED_JOKER)s="scard_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)s="scard_78";else{var r=o+2>13?o-11:o+2;s="scard_"+(i-1)+"_"+r}var n=e._mSPokerTextures;return n[s]||(n[s]=RES.getRes(s)),n[s]},e.cleanAll=function(){var t=e._mPokerTextures,i=e._mSPokerTextures;for(var o in t)t[o]=void 0;for(var s in i)i[s]=void 0},e._mPokerTextures={},e._mSPokerTextures={},e}();t.PokerTextures=e,__reflect(e.prototype,"ddz.PokerTextures")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onBottomScore=function(e){this.applyFunc(t.CallBacks.onBottomScoreCallBack,e)},i.prototype.onState=function(e){this.applyFunc(t.CallBacks.onStateCallBack,e)},i.prototype.onAction=function(e){this.applyFunc(t.CallBacks.onActionCallBack,e)},i.prototype.onActionNotify=function(e){this.applyFunc(t.CallBacks.onActionNotifyCallBack,e)},i.prototype.onSeat=function(e){this.applyFunc(t.CallBacks.onSeatCallBack,e)},i.prototype.onSeatInfo=function(e){this.applyFunc(t.CallBacks.onSeatInfoCallBack,e)},i.prototype.onCardInfo=function(e){this.applyFunc(t.CallBacks.onCardInfoCallBack,e)},i.prototype.onBottomCard=function(e){this.applyFunc(t.CallBacks.onBottomCardCallBack,e)},i.prototype.onDiscard=function(e){this.applyFunc(t.CallBacks.onDiscardCallBack,e)},i.prototype.onDiscardNotify=function(e){this.applyFunc(t.CallBacks.onDiscardNotifyCallBack,e)},i.prototype.onExchangeNotify=function(e){this.applyFunc(t.CallBacks.onExchangeNotifyCallBack,e)},i.prototype.onExitRoomCallBack=function(e){this.applyFunc(t.CallBacks.onExitRoomCallBack,e)},i.prototype.onMultipleCalBack=function(e){this.applyFunc(t.CallBacks.onMultipleCalBack,e)},i.prototype.onDiscardRecord=function(e){this.applyFunc(t.CallBacks.onDiscardRecordCallBack,e)},i.prototype.onCombatRecord=function(e){this.applyFunc(t.CallBacks.onCombatRecordCallBack,e)},i.prototype.actionRequest=function(e){var i={oper:e};this.send(t.ProxyConst.ACTION_Q,i)},i.prototype.discardRequest=function(e){this.send(t.ProxyConst.DISCARD_Q,e)},i.prototype.requestExitRoom=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.requestRecord=function(e){this.send(t.ProxyConst.COMBAT_RECORD_Q,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.addListener(t.ProxyConst.STATE_R,this.onState,this),this.addListener(t.ProxyConst.ACTION_R,this.onAction,this),this.addListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.addListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.addListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.addListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.addListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.addListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.addListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.addListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.addListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.addListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.addListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.removeListener(t.ProxyConst.STATE_R,this.onState,this),this.removeListener(t.ProxyConst.ACTION_R,this.onAction,this),this.removeListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.removeListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.removeListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.removeListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.removeListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.removeListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.removeListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.removeListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.removeListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.removeListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.removeListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)
},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"ddz.GameProxy")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMatchMainListMinor=[],this._mPHandsType=0,this._mMatchMainListRecover=[],this._mMatchMainListMinorRecover=[],this._mTipsTimes=0,this.init()}return e.prototype.init=function(){this._mPokerTipsUtil=new t.PokerUtil},e.prototype.getTipPokerList=function(e,i,o){if(o!=t.PHandsType.PHT_ROCKET){var s=this.getRound(e,i,o);return s||(s=this._mMatchMainListRecover.shift()),s||(this.rest(),s=this.getRound([],i,t.PHandsType.PHT_BOMB)),s&&this._mMatchMainListRecover.push(s),s}},e.prototype.getRound=function(t,e,i){egret.getTimer();this._mMatchMainList||this.analysisPokerList(t,e,i);var o=this.getWinList(t);if(this._mMatchMainList)for(;!o&&this._mMatchMainList.length>0;)o=this.getWinList(t);return o},e.prototype.analysisPokerList=function(t,e,i){this._mPHandsType=this._mPokerTipsUtil.analysisPokerList(e,t,i),this._mMatchMainList=this._mPokerTipsUtil.getMatchMain(),this._mMatchMainListMinor=this._mPokerTipsUtil.getMatchMinor()},e.prototype.getWinList=function(e){var i,o=this._mMatchMainList,s=this._mMatchMainListMinor;if(o&&o.length>0&&(i=o.shift()),i){var r,n,a=this._mPHandsType;if(a==t.PHandsType.PHT_FOUR_TWO||a==t.PHandsType.PHT_FOUR_TWO_TWO)n=this.getMinor(s,i,2),r=n.index>=2?[].concat(i,n):[].concat(i);else if(a==t.PHandsType.PHT_PLANE_WING||a==t.PHandsType.PHT_PLANE_WING_TWO){var h=Math.floor(i.length/3);if(n=this.getMinor(s,i,h),!(n.index>=h))return void egret.warn("没有大过的飞机");r=[].concat(i,n)}else n=this.getMinor(s,i,1),r=[].concat(i,n);var d=this.compare(e,r,this._mPHandsType);return d?r:void 0}},e.prototype.getMinor=function(t,e,i){var o=[],s=0;if(t&&t.length>0)for(var r=0;r<t.length;r++){for(var n=t[r],a=!0,h=0;h<e.length;h++)if(n[0].val==e[h].val){a=!1;break}if(a&&(s++,o=o.concat(n),s>=i))break}return o.index=s,o},e.prototype.compare=function(e,i,o){var s=o;if(s==t.PHandsType.PHT_ROCKET)return!1;var r=e,n=i,a=r.length,h=n.length;if(2==h){if(n[0].val+n[1].val==29)return!0;if(2==a)return n[0].val>r[0].val}if(s==t.PHandsType.PHT_BOMB){if(0==r.length)return!0;if(4==a&&4==h)return n[0].val>r[0].val}if(1==a&&1==h)return n[0].val>r[0].val;if(3==a&&3==h)return n[0].val>r[0].val;if(t.PokerUtil.sort(r),t.PokerUtil.sort(n),s==t.PHandsType.PHT_SHUNZI||s==t.PHandsType.PHT_PAIR_SHUNZI||s==t.PHandsType.PHT_PLANE)return n[0].val>r[0].val;var d=t.PokerUtil.map(r),p=t.PokerUtil.map(n);if(d){var c=(d.length,0);for(var l in d){var _=d[l].length;_>c&&(c=_)}if(p){var u=p.length,T=0;for(var l in p){var m=p[l].length;m>T&&(T=m)}if(1==u&&4==T)return!0;if((s==t.PHandsType.PHT_THREE_ONE||s==t.PHandsType.PHT_THREE_TWO)&&u>1){var y=d[0].length>=3?d[0][0].val:d[1][0].val,P=p[0].length>=3?p[0][0].val:p[1][0].val;return P>y}if(s==t.PHandsType.PHT_FOUR_TWO||s==t.PHandsType.PHT_FOUR_TWO_TWO||s==t.PHandsType.PHT_PLANE_WING||s==t.PHandsType.PHT_PLANE_WING_TWO){for(var y=0,l=0,C=d.length;C>l;l++){var f=d[l];if(f.length>=3){y=f[0].val;break}}for(var P=0,l=0,E=p.length;E>l;l++){var O=p[l];if(O.length>=3){P=O[0].val;break}}return P>y}return egret.warn("匹配不对牌型",r,r),!1}}},e.prototype.getPHandsTypeByResult=function(e){var i=t.PokerUtil.map(t.PokerUtil.sort(e));return this._mPokerTipsUtil.getPHandsTypeByResult(i)},e.prototype.rest=function(){this._mMatchMainListRecover.splice(0),this._mMatchMainListMinorRecover.splice(0),this._mTipsTimes=0,this._mPHandsType=void 0,this._mMatchMainList=void 0,this._mMatchMainListMinor=void 0},e.prototype.clean=function(){this.rest()},e.prototype.destroy=function(){this.rest(),this._mPokerTipsUtil.destroy(),this._mPokerTipsUtil=void 0},e}();t.GameTipsUtil=e,__reflect(e.prototype,"ddz.GameTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){}return t.prototype.resetPosition=function(t,e){var i=t-e;return i=0>i?i+3:i},t.prototype.resetCardList=function(t){return t.forEach(function(t){4==t.color?t.value=14:5==t.color?t.value=15:t.value<3?t.value+=11:t.value>2&&t.value<14&&(t.value-=2)}.bind(this)),t},t.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o={value:i,color:e,number:t};return 4==o.color?o.value=14:5==o.color?o.value=15:(o.value<3?o.value+=11:o.value>2&&o.value<14&&(o.value-=2),o.color++),o},t}();t.GameUtil=e,__reflect(e.prototype,"ddz.GameUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){this._mMapPoker=[]}return t.prototype.sort=function(t){t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val})},t.prototype.tips=function(t){},t.prototype.showPokerByType=function(t,e){this._mMapPoker.splice(0),this.map(t)},t.prototype.showSZ=function(){},t.prototype.map=function(t){if(!(t.length<=0))for(var e=this._mMapPoker,i=t,o=-1,s=0,r=i.length;r>s;s++){var n=i[0].val;o!=n&&e.push([n]),e[e.length].push(n)}},t.prototype.destroy=function(){this._mMapPoker=void 0},t}();t.PokerTipsUtil=e,__reflect(e.prototype,"ddz.PokerTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMapPoker=[],this._mCombComm=new t.CombComm,this._mCombShunZi=new t.CombShunZi,this._mCombSanDai=new t.CombSanDai,this._mCombSiDai=new t.CombSiDai,this._mCombZhaDan=new t.CombZhaDan,this._mCombFeiJi=new t.CombFeiJi}return e.sort=function(t){return t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val}),t},e.prototype.sort=function(t){return e.sort(t)},e.prototype.tips=function(t){},e.prototype.analysisPokerList=function(t,e,i){this._mCurrComb=void 0,this._mMapPoker=this.map(t);var o=this.map(this.sort(e));return i||(i=this.getPHandsTypeByResult(o)),this.matchType(i,o),i},e.prototype.getMatchMain=function(){return this._mCurrComb?this._mCurrComb.getMatch():void egret.warn("要先执行分析方法  analysisPokerList() ")},e.prototype.getMatchMinor=function(){return this._mCurrComb?this._mCurrComb.getMatchMinor():void 0},e.prototype.getPHandsTypeByResult=function(e){var i=e,o=i.length,s=0;for(var r in i){var n=i[r].length;n>s&&(s=n)}if(1==s){if(1==o){if(this._mCombComm.checkValidityOne(i))return t.PHandsType.PHT_SINGLE}else if(2==o){if(this._mCombZhaDan.checkValidityHJ(i))return t.PHandsType.PHT_ROCKET}else if(o>=5&&this._mCombShunZi.checkValidityOne(i))return t.PHandsType.PHT_SHUNZI}else if(2==s){if(1==o){if(this._mCombComm.checkValidityTwo(i))return t.PHandsType.PHT_PAIR}else if(o>=3&&this._mCombShunZi.checkValidityTwo(i))return t.PHandsType.PHT_PAIR_SHUNZI}else if(3==s){if(1==o){if(this._mCombComm.checkValidityThree(i))return t.PHandsType.PHT_THREE}else if(2==o){if(this._mCombSanDai.checkValidityOne(i))return t.PHandsType.PHT_THREE_ONE;if(this._mCombSanDai.checkValidityTwo(i))return t.PHandsType.PHT_THREE_TWO}else if(o>3&&this._mCombFeiJi.checkValidityTwo(i))return t.PHandsType.PHT_PLANE_WING_TWO;if(this._mCombShunZi.checkValidityThree(i))return t.PHandsType.PHT_PLANE;if(this._mCombFeiJi.checkValidityOne(i,3))return t.PHandsType.PHT_PLANE_WING}else if(4==s){if(2==o||3==o){if(this._mCombSiDai.checkValidityOne(i))return t.PHandsType.PHT_FOUR_TWO;if(this._mCombSiDai.checkValidityTwo(i))return t.PHandsType.PHT_FOUR_TWO_TWO}else if(1==o&&this._mCombZhaDan.checkValidityZD(i))return t.PHandsType.PHT_BOMB;if(this._mCombFeiJi.checkValidityOne(i,4))return t.PHandsType.PHT_PLANE_WING}return t.PHandsType.PHT_ERROR},e.prototype.matchType=function(e,o){var s;switch(e){case t.PHandsType.PHT_SINGLE:this._mCombComm.match(this.match(i.One),this.match(i.One,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_PAIR:this._mCombComm.match(this.match(i.Two),this.match(i.Two,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_THREE:this._mCombComm.match(this.match(i.Three),this.match(i.Three,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_SHUNZI:this._mCombShunZi.match(this.match(i.One,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PAIR_SHUNZI:this._mCombShunZi.match(this.match(i.Two,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PLANE:this._mCombShunZi.match(this.match(i.Three,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_THREE_ONE:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.One,!0)),this._mCombSanDai.matchMore([],this.match(i.One,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_THREE_TWO:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.Two,!0)),this._mCombSanDai.matchMore([],this.match(i.Two,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_FOUR_TWO:s=this.match(i.One),this._mCombSiDai.match(this.match(i.Four),s),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_FOUR_TWO_TWO:s=this.match(i.Two),this._mCombSiDai.match(this.match(i.Four),s),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_BOMB:case t.PHandsType.PHT_ROCKET:this._mCombZhaDan.match(this.match(i.Four),this.match(i.One)),this._mCombZhaDan.matchList(o),this._mCurrComb=this._mCombZhaDan;break;case t.PHandsType.PHT_PLANE_WING:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.One)),this._mCombFeiJi.matchMore([],this.match(i.One,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi;break;case t.PHandsType.PHT_PLANE_WING_TWO:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.Two)),this._mCombFeiJi.matchMore([],this.match(i.Two,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi}},e.prototype.map=function(t){return e.map(t)},e.map=function(t){var e=t;if(!(e.length<=0)){for(var i=[],o=-1,s=0,r=e.length;r>s;s++){var n=e[s],a=n.val;o==a?i[i.length-1].push(n):(o=a,i.push([n]))}return i}},e.prototype.match=function(t,e){void 0===e&&(e=!1);var i=this._mMapPoker,o=[];for(var s in i){var r=i[s],n=r.length,a=e?n>=t:t==n;if(a){var h=r.slice(0,t);o.push(h)}}return o},e.prototype.reset=function(){this._mMapPoker.splice(0),this._mCurrComb=void 0},e.prototype.destroy=function(){this._mMapPoker=void 0,this._mCurrComb=void 0},e}();t.PokerUtil=e,__reflect(e.prototype,"ddz.PokerUtil");var i;!function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four"}(i||(i={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.ddz=i,__reflect(i.prototype,"ddz.Entrance.ddz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){var e=t,i=e[0].length;return e.length>1?!1:1==i},e.prototype.checkValidityTwo=function(t){var e=t,i=e[0].length;return e.length>1?!1:2==i},e.prototype.checkValidityThree=function(t){var e=t,i=e[0].length;return e.length>1?!1:3==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);for(var o=this._mMapMinor;o.length;)e.push(o.pop());return this._mMapMinor=void 0,e},e}(t.CombBase);t.CombComm=e,__reflect(e.prototype,"ddz.CombComm")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t,e){var i=t;if(4==e||3==i.length){i=[].concat(t);for(var o=i.length,s=o-1;s>=0;s--){var r=i[s];(4==r.length||2==r.length)&&i.push([r.pop()])}}return this.checkValidityX(i,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i.length;if(4>o||o%2!=0)return!1;for(var s=0,r=0,n=0;o>n;n++){var a=i[n].length;3==a&&s++,a==e&&r++}return s==r},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(this.matchListX(t))),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.matchListX=function(t){for(var e=[].concat(t),i=e.length,o=i-1;o>=0;o--){var s=e[o];4==s.length?s.pop():3>s.length&&e.splice(o,1)}return e},e}(t.CombBase);t.CombFeiJi=e,__reflect(e.prototype,"ddz.CombFeiJi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,s=i[1].length;return i.length>2?!1:3==o&&s==e||3==s&&o==e?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSanDai=e,__reflect(e.prototype,"ddz.CombSanDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.checkValidity=function(t){return!1},i.prototype.checkValidityOne=function(t){var e=t,i=e.length;if(5>i)return!1;for(var o=i-1;o>=5;o--)for(var s=void 0,r=void 0,n=o;n>0;n--)if(s=e[n][0].val,r=e[n-1][0].val,r!=s+1)return!1;return!0},i.prototype.checkValidityTwo=function(t){var e=t,i=e.length;if(3>i)return!1;for(var o=i-1;o>=0;o--)if(2!=e[o].length)return!1;for(var s=i-1;s>=3;s--)for(var r=void 0,n=void 0,o=i-1;o>0;o--)if(r=e[o][0],n=e[o-1][0],n.val!=r.val+1)return!1;return!0},i.prototype.checkValidityThree=function(t){var e=t,i=e.length;if(2>i)return!1;for(var o=i-1;o>=0;o--)if(3!=e[o].length)return!1;for(var s=i-1;s>=2;s--)for(var r=void 0,n=void 0,o=s;o>0;o--)if(r=e[o][0],n=e[o-1][0],n.val!=r.val+1)return!1;return!0},i.prototype.match=function(i,o){this.clean(),e.prototype.match.call(this,i,o);for(var s=this._mMapMain,r=s.length-1;r>=0;r--){var n=s[r][0];n.val>=t.PokerValue.POKER_VALUE_TWO&&s.splice(r,1)}return!0},i.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(t))},i}(t.CombBase);t.CombShunZi=e,__reflect(e.prototype,"ddz.CombShunZi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return 2==t.length?this.checkValidityXX(t,1):this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return 2==t.length?this.checkValidityXX(t,2):this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,s=i[1].length,r=i[2].length;return i.length>3?!1:4==o&&s==e&&r==e||4==s&&o==e&&r==e||4==r&&o==e&&s==e?!0:!1},e.prototype.checkValidityXX=function(t,e){var i=t,o=i[0].length,s=i[1].length;return i.length>2?!1:4==o&&s==2*e||o==2*e&&4==s?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),this.removeKing(i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSiDai=e,__reflect(e.prototype,"ddz.CombSiDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityZD=function(t){var e=t,i=e[0].length;return e.length>1?!1:4==i},e.prototype.checkValidityHJ=function(t){var e=t,i=e[0][0].val+e[1][0].val;return 29==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);var o=this._mMapMinor;if(o&&o.length>1){var s=o[0][0],r=o[1][0];s.val+r.val==29&&e.push([s,r])}return e},e}(t.CombBase);t.CombZhaDan=e,__reflect(e.prototype,"ddz.CombZhaDan")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"ddz","DDZGameSkin")||this;return i.isMultipleOpen=!1,i.MenuView.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){this.ImageCenter.visible=!1,this.Mask.visible=!1,this.hideBaseScore(),this.hideTimes(),this.hideMultiple(),this.MenuView.init(),this.PlayerMessage.init(),this.CardView.init(),this.TypeBox.init(),this.hideBtnCardPlayer(),this.initBroadcast(this)},i.prototype.showBaseScore=function(e){switch(e){case.05:this.BaseScore.source=RES.getRes(t.FoldConst.LOW_FOLD);break;case.5:this.BaseScore.source=RES.getRes(t.FoldConst.MEDIUM_FOLD);break;case 1:this.BaseScore.source=RES.getRes(t.FoldConst.HIGH_FOLD)}this.BaseScoreBox.visible=!0},i.prototype.hideBaseScore=function(){this.BaseScoreBox.visible=!1},i.prototype.setTimes=function(t){this.Times.text="X "+t,this.TimesBox.visible=!0},i.prototype.hideTimes=function(){this.TimesBox.visible=!1},i.prototype.hideMultiple=function(){this.MultipleDetails.y=-this.MultipleDetails.height},i.prototype.setMultipleDetails=function(t){var e=t.self_mul,i=t.public_mul,o=t.enemy_mul?t.enemy_mul:1,s=e*i*o;this.setTimes(s),this.MulOpenStart.text=t.seenseencard_mul?"X "+t.seenseencard_mul:"- -",this.MulRob.text=t.roblandlord_mul?"X "+t.roblandlord_mul:"- -",this.MulDouble.text=t.double_mul?"X "+t.double_mul:"- -",this.MulSpring.text=t.spring_mul?"X "+t.spring_mul:"- -",this.MulConSpring.text=t.contrary_spring_mul?"X "+t.contrary_spring_mul:"- -",this.MulBomb.text=t.bomb_mul?"X "+t.bomb_mul:"- -",this.MulAll.text=e+" X "+i+" X "+o+" = "+s},i.prototype.setUserName=function(t,e){this.PlayerMessage.setUserName(t,e)},i.prototype.getUserName=function(t){return this.PlayerMessage.getUserName(t)},i.prototype.setUserMoney=function(t,e){this.PlayerMessage.setUserMoney(t,e)},i.prototype.setUserHead=function(t,e){this.PlayerMessage.setUserHead(t,e)},i.prototype.setUserFrame=function(t,e){this.PlayerMessage.setUserFrame(t,e)},i.prototype.showUser=function(t){this.PlayerMessage.showUser(t)},i.prototype.hideUser=function(t){this.PlayerMessage.hideUser(t)},i.prototype.waitGame=function(){this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.hideBaseScore(),this.MenuView.showStartBtn(),this.CardView.hideBottomBg(),this.MenuView.filishMatch(),this.MenuView.hideDeposit(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideTimes(),this.TypeBox.hideTips(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.hideTypeAll(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.ImageCenter.visible=!0,this.Mask.visible=!0},i.prototype.startGameReq=function(){this.MenuView.hideStartBtn(),this.ImageCenter.visible=!1,this.Mask.visible=!1},i.prototype.onReady=function(){ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),this.hideTimes(),this.hideBaseScore(),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.CardView.hideCardPlayer(),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),t.PokerTextures.cleanAll(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.MenuView.hideDeposit(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF)},i.prototype.onMatch=function(){ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.hideTimes(),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.MenuView.hideDeposit(),this.MenuView.onMatch(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.hideTypeAll()},i.prototype.onMissCarry=function(e){e&&this.MenuView.missCarryAni(),ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.hideTypeAll()},i.prototype.filishMatch=function(){this.MenuView.filishMatch()},i.prototype.startDeal=function(){this.showBottomBg(),this.hideTypeAll(),this.playBoneAni(t.BonesConst.START)},i.prototype.showBottomBg=function(){this.CardView.showBottomBg()},i.prototype.setCardPlayer=function(t,e){this.CardView.setCardPlayer(t,e)},i.prototype.showCardPlayer=function(){this.CardView.showCardPlayer()},i.prototype.hideBtnCardPlayer=function(){this.CardView.hideBtnCardPlayer()},i.prototype.showBtnCardPlayer=function(){this.CardView.showBtnCardPlayer()},i.prototype.deposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.deposit(),this.MenuView.showCancerDepsit(e),this.CardView.showDepositMask(e)):this.TypeBox.showTab(e)},i.prototype.canserDeposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.cancerDeposit(),this.MenuView.hideCancerDepsit(e),this.CardView.hideDepositMask(e)):this.TypeBox.hideTab(e)},i.prototype.dealCard=function(t){this.CardView.dealCard(t)},i.prototype.clearCard=function(t){this.CardView.clearCard(t)},i.prototype.clearBottomCard=function(){this.CardView.clearBottomCard()},i.prototype.dealOthersOpenCard=function(t,e,i){this.CardView.showOthersOpenCards(t),this.CardView.dealOpenCard(t,e,i)},i.prototype.dealCardOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.dealCardOthers(t,e)},i.prototype.showCardNumberOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.showOthersCardsNumber(t,e)},i.prototype.setCardNumber=function(t,e){this.CardView.setCardNumber(t,e)},i.prototype.disabledRobBtn=function(t){this.MenuView.disabledRobBtn(t)},i.prototype.showRobBox=function(){this.MenuView.showRobBox(),this.MenuView.hideDoubleBox(),this.MenuView.setHidePlayBox()},i.prototype.hideRobBox=function(){this.MenuView.hideRobBox()},i.prototype.startTimer=function(t,e,i,o){this.MenuView.startTimer(t,e,i,o)},i.prototype.stopTimer=function(t){this.MenuView.stopTimer(t)},i.prototype.showDoubleBox=function(){this.MenuView.hideRobBox(),this.MenuView.setHidePlayBox(),this.MenuView.showDoubleBox()},i.prototype.hideDoubleBox=function(){this.MenuView.hideDoubleBox()},i.prototype.showDeposit=function(){this.MenuView.showDeposit()},i.prototype.hideDeposit=function(){this.MenuView.hideDeposit()},i.prototype.hideOperBtn=function(){this.MenuView.hideOperBtn()},i.prototype.showAlarm=function(t){this.TypeBox.showAlarm(t)},i.prototype.hideAlarm=function(t){this.TypeBox.hideAlarm(t)},i.prototype.showType=function(t,e){this.TypeBox.showType(t,e)},i.prototype.hideType=function(t){this.TypeBox.hideType(t)},i.prototype.hideTypeAll=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT)},i.prototype.showBoss=function(t){this.TypeBox.showBoss(t)},i.prototype.hideBoss=function(t){this.TypeBox.hideBoss(t)},i.prototype.showCard=function(t){this.CardView.showCard(t),this.CardView.setCardDown()},i.prototype.showBottomCard=function(t){this.CardView.showBottomCard(t)},i.prototype.openBottomCard=function(t){this.CardView.openBottomCard(t)},i.prototype.hoverCard=function(t){this.CardView.hoverCard(t)},i.prototype.showTipCards=function(t){this.CardView.showTipCards(t)},i.prototype.toggleCardType=function(t){this.CardView.toggleCardType(t)},i.prototype.getSelectedCard=function(){return this.CardView.getSelectedCard()},i.prototype.showPlayBox=function(t){this.MenuView.hideRobBox(),this.MenuView.hideDoubleBox(),this.MenuView.setVisiblePlayBox(t)},i.prototype.hideBtnPlayBox=function(){this.MenuView.setHidePlayBox()},i.prototype.showPlayBoxOnly=function(){this.MenuView.showPlayBox()},i.prototype.playCard=function(){this.CardView.playCard()},i.prototype.playCardNotify=function(e,i,o){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.playCardRight(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.playCardLeft(i);break;case t.DDZPosition.POSITION_SELF:o&&this.CardView.playCardSelf(i)}},i.prototype.showTableCard=function(e,i){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.showRightCard(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.showLeftCard(i);break;case t.DDZPosition.POSITION_SELF:this.CardView.showSelfCard(i)}},i.prototype.openCard=function(t,e){this.CardView.openCard(t,e)},i.prototype.showTips=function(t){this.TypeBox.showTips(t)},i.prototype.getOutCard=function(t){return this.CardView.getOutCard(t)},i.prototype.cleanTableCard=function(t){this.CardView.cleanTableCard(t)},i.prototype.playBoneAni=function(t){this.DDZBones.playAni(t)},i.prototype.toggleMultipleDetails=function(){this.isMultipleOpen=this.isMultipleOpen?!1:!0,this.isMultipleOpen?egret.Tween.get(this.MultipleDetails).to({y:0},100):egret.Tween.get(this.MultipleDetails).to({y:-this.MultipleDetails.height},100),R.sendPlayerAction(t.PointConst.DDZ_POINT.PANEL_NULTIPLE)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.MenuView.addEvent(),this.TimesBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.MenuView.removeEvent(),this.TimesBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("斗地主 GameView destroy"),this.MenuView.destroy(),this.CardView.destroy(),this.DDZBones.destroy())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"ddz.GameView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"ddz","DDZPopSkin")||this;return i.BalanceView.initComponent(e),i.ClosePoput.initComponent(e),i.init(),i}return __extends(e,t),e.prototype.init=function(){this.GameSet.initSet(),this.Help.initUI()},e.prototype.openHelp=function(){this.Help.showPopup()},e.prototype.openSet=function(){this.GameSet.openPopup()},e.prototype.exchangePoput=function(){this.BalanceView.exchangePoput()},e.prototype.closeExcangePoput=function(){this.BalanceView.closeExcangePoput()},e.prototype.openRecord=function(){this.Record.showPopup()},e.prototype.renderRecord=function(t){this.Record.rankData(t)},e.prototype.openExitPoput=function(){this.ClosePoput.openPopup()},e.prototype.farmerWin=function(){this.BalanceView.farmerWin()},e.prototype.hideWinner=function(){this.BalanceView.hideWinner()},e.prototype.setSelfName=function(t){this.BalanceView.setSelfName(t)},e.prototype.setSelfHead=function(t){this.BalanceView.setSelfHead(t)},e.prototype.setSelfFrame=function(t){this.BalanceView.setSelfFrame(t)},e.prototype.setPlayerName=function(t,e){this.BalanceView.setPlayerName(t,e)},e.prototype.setPlayerBaseScore=function(t,e){this.BalanceView.setPlayerBaseScore(t,e)},e.prototype.setPlayerTimes=function(t,e){this.BalanceView.setPlayerTimes(t,e)},e.prototype.setPlayerMoney=function(t,e){this.BalanceView.setPlayerMoney(t,e)},e.prototype.setPlayerIsBoss=function(t,e){this.BalanceView.setPlayerIsBoss(t,e)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Help.destroy(),this.GameSet.destroy(),this.Record.destroy(),this.BalanceView.destroy(),this.ClosePoput.destroy())},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"ddz.PopView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){}return t.METHOD={ENTER_GAME:"1001",BACK_GAME:"1002"},t}();t.RoomConst=e,__reflect(e.prototype,"ddz.RoomConst")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._view=new t.RoomView(this)
},i.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.RoomConst.METHOD.BACK_GAME,this.onBack2Lobby,this),this.registerFunc(t.RoomConst.METHOD.ENTER_GAME,this.onEnterGame,this)},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("ddz"),i={sceneType:e.mArrGameType[t]};this.goEnterGame(i)},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"ddz.RoomController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"ddz.RoomModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Bg,"ddz","Room")||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.Heip.initUI();for(var t=0;2>=t;t++)this["GroupType"+t].name="GroupType_"+t;this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_ddz_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this.initBroadcast(this),this.BtnReturn.visible=!App.isWebInsert},i.prototype.onBackRoom=function(){this.applyFunc(t.RoomConst.METHOD.BACK_GAME)},i.prototype.onEnterGame=function(e){var i=e.currentTarget,o=i.name.split("_")[1];this.applyFunc(t.RoomConst.METHOD.ENTER_GAME,parseInt(o))},i.prototype.showHelp=function(){this.Heip.showPopup()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this);for(var t=0;2>=t;t++)App.CommonUtils.effectButton(this["GroupType"+t],this.onEnterGame,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.BtnHelp);for(var t=0;2>=t;t++)App.CommonUtils.removeButton(this["GroupType"+t])},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mPartEffect&&(this._mPartEffect.destroy(),this._mPartEffect=void 0)},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"ddz.RoomView")}(ddz||(ddz={}));