var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},fkdn;!function(t){var e=function(e){function o(){var t=e.call(this,"FkdnCardSkin")||this;return t.blackList=[],t.redList=[],t.cardList=[],t.blackPos=[],t.redPos=[],t.posList=[],t.WAIT_CARD_TIME=200,t.pokerAllList=[],t}return __extends(o,e),o.prototype.open=function(){this.clearWinner(),this.cleanwinAndlose()},o.prototype.clearWinner=function(){this.HuWin.visible=!1,this.LongWin.visible=!1,this.He.visible=!1},o.prototype.createNewCard=function(){var t=this.GroupDeal.getChildAt(0),e=this.GroupDeal.localToGlobal(t.x,t.y);this.redPoint=this.GroupLong.globalToLocal(e.x,e.y),this.blackPoint=this.GroupHu.globalToLocal(e.x,e.y);for(var o=0;10>o;o++){var i=new eui.Image;i.source="common_ui_cardback_png",i.scaleX=.5,i.scaleY=.5,i.x=t.x,i.y=t.y,i.name=o+"",i.alpha=0,5>o?(i.x=this.redPoint.x,i.y=this.redPoint.y,this.GroupLong.addChild(i),this.redList.push(i)):(i.x=this.blackPoint.x,i.y=this.blackPoint.y,this.GroupHu.addChild(i),this.blackList.push(i)),this.cardList.push(i)}},o.prototype.dealCard=function(e){this.revealTripCard(),t.FkdnUtil.dealCard(this.cardList,this.posList,this.WAIT_CARD_TIME,1),App.TimerManager.doTimer(this.WAIT_CARD_TIME/2,1,this.dealRed,this),R.setTimeOnce(function(){this.applyFunc(t.FkdnCallBacks.onShowTimerCallBack)},this,1500)},o.prototype.dealRed=function(){t.FkdnUtil.dealCard(this.cardList,this.posList,this.WAIT_CARD_TIME,2)},o.prototype.setCardPos=function(){var e=t.FkdnUtil.getPoints(this.GroupLong),o=t.FkdnUtil.getPoints(this.GroupHu);this.posList=e.concat(o),this.createNewCard()},o.prototype.revealTripCard=function(){for(var t=this.cardList,e=0;e<t.length;e++){var o=t[e];o.alpha=1}},o.prototype.directFapai=function(){this.initializationcardPos();for(var t=this.cardList,e=0;e<t.length;e++){var o=t[e],i=this.posList[e];o.x=i.x,o.y=i.y,o.scaleX=1,o.scaleY=1,o.source="common_ui_cardback_png",o.alpha=1,o.rotation=0}},o.prototype.initializationcardPos=function(){var t=this.cardList;if(t.length)for(var e=0;e<t.length;e++){var o=t[e],i=o.name<5?this.redPoint:this.blackPoint;o.x=i.x,o.y=i.y,o.scaleX=.5,o.scaleY=.5,o.source="common_ui_cardback_png",o.alpha=0,o.rotation=0}},o.prototype.clearCard=function(){App.TimerManager.removeAll(this);var t=this.cardList;if(t.length)for(var e=0;e<t.length;e++){var o=t[e];o.parent&&(egret.Tween.removeTweens(o),o.parent.removeChild(o))}this.cardList=[],this.posList=[],this.redPoint=void 0,this.blackPoint=void 0},o.prototype.getcardsrc=function(t){this.pokerAllList=[],this.pokerAllList.length=0;for(var e=0;e<t.length;e++){var o=t[e];this.pokerAllList.push(this.getCardWithNum(o))}},o.prototype.getCardWithNum=function(t){var e=t>>4&15,o=15&t,i=11==o?"j":12==o?"q":13==o?"k":o;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+i+"_png";return 0==e&&0==i&&(s="",Log.warn("cardNum:",t)),s},o.prototype.kaipaiAnimation=function(e){var o=0;this.initializationcardPos(),this.directFapai();for(var i=function(){var t=n.cardList[s];egret.Tween.removeTweens(t),egret.Tween.get(t).wait(100*o).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){t.source=this.pokerAllList[t.name],egret.Tween.get(t).to({scaleX:1},300,egret.Ease.sineInOut)},n),o++},n=this,s=0;s<this.cardList.length;s++)i();this.showCowType(e),R.setTimeOnce(function(){this.applyFunc(t.FkdnCallBacks.onRunWinnerCallBack)}.bind(this),this,2e3),this.setCardTypePos(e)},o.prototype.directKaipai=function(t){this.initializationcardPos(),this.directFapai();for(var e=0;e<this.cardList.length;e++)this.cardList[e].source=this.pokerAllList[e];this.directSetCardTypePos(t),this.directCowType(t)},o.prototype.setCardTypePos=function(t){var e=0,o=this,i=0;App.TimerManager.doTimer(580,2,function(){i=0==e?t.redcow_open_type:t.blackcow_open_type,o.setCardsPos(e,i,!0),e++},this)},o.prototype.setCardsPos=function(t,e,o){var i=5*t,n=5*t+5;if(e)for(var s=i;n>s;s++){var r=this.cardList[s];o?egret.Tween.get(r).to({x:this.posList[s].x,y:this.posList[s]._y,alpha:1},300,egret.Ease.sineInOut):r.y=this.posList[s]._y}},o.prototype.directSetCardTypePos=function(t){for(var e=0;2>e;e++){var o=0;o=0==e?t.redcow_open_type:t.blackcow_open_type,this.setCardsPos(e,o,!1)}},o.prototype.setCowTypeNum=function(t,e,o){this["beefCard"+e].texture=RES.getRes("fkdn_effect_json.brnn_ui_"+(o?"H_":"L_")+t),this["Lottery"+e].visible=!0},o.prototype.showCowType=function(e){var o=0,i=this,n=this.findRedAndBlackIsWin(e.place_results);App.TimerManager.doTimer(600,2,function(){var s=0;0==o?(s=e.redcow_open_type,i.setCowTypeNum(s,o,n[o])):(s=e.blackcow_open_type,i.setCowTypeNum(s,o,n[o])),s>=10?App.SoundManager.playEffect(t.SoundConst.RESULT[10]):App.SoundManager.playEffect(t.SoundConst.RESULT[s]),o++},this,function(){},this)},o.prototype.directCowType=function(t){for(var e=this.findRedAndBlackIsWin(t.place_results),o=0;2>o;o++){var i=0;0==o?(i=t.redcow_open_type,this.setCowTypeNum(i,o,e[o])):(i=t.blackcow_open_type,this.setCowTypeNum(i,o,e[o]))}},o.prototype.cleanwinAndlose=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this);for(var t=0;2>t;t++)this["Lottery"+t].visible=!1,this["beefCard"+t].source=""},o.prototype.findRedAndBlackIsWin=function(t){for(var e=t,o=[],i=0;i<e.length;i++){var n=e[i];(0==n.place||1==n.place)&&o.push(n.is_win)}return o},o.prototype.cleanOpenAndTurnPoker=function(){var t=this.cardList;App.TimerManager.removeAll(this);for(var e=0;e<t.length;e++){var o=t[e];egret.Tween.removeTweens(o)}},o.prototype.runWinner=function(t,e){this.showWinner(t),e&&(this.GroupWin.scaleX=this.GroupWin.scaleY=4,egret.Tween.get(this.GroupWin).to({scaleX:1,scaleY:1},150,egret.Ease.sineInOut))},o.prototype.showWinner=function(e){switch(e){case t.TypeConst.LOONG:this.LongWin.visible=!0,this.HuWin.visible=!1,this.He.visible=!1;break;case t.TypeConst.TIGER:this.LongWin.visible=!1,this.HuWin.visible=!0,this.He.visible=!1;break;case t.TypeConst.TIE:this.LongWin.visible=!1,this.HuWin.visible=!1,this.He.visible=!0}},o.prototype.addEvent=function(){},o.prototype.removeEvent=function(){},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearCard(),this.cleanwinAndlose()},o}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"fkdn.CardView")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t.isRefresh=!1,t.openTypes=[],t}return __extends(o,e),o.prototype.onLoadedData=function(){this.data&&(this.data.table_name&&(this.TableName.text=this.data.table_name),this.renderLimitBet(),this.data.isCurrentTable?(this.EnterGame.visible=!1,this.CurrentRoom.visible=!0):(this.EnterGame.visible=!0,this.CurrentRoom.visible=!1))},o.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.onLoadedData(),this.data&&(this.renderTimer(),this.renderIssue(),this.data.issue&&JSON.stringify(this.data.issue)==JSON.stringify(this.issue)&&(this.renderIssue(),this.issue=this.data.issue),this.data.charts&&JSON.stringify(this.data.charts)!=JSON.stringify(this.openTypes)&&(this.renderChart(this.data.table_id),this.openTypes=this.data.charts))},Object.defineProperty(o.prototype,"tableId",{get:function(){return this.data.table_id},enumerable:!0,configurable:!0}),o.prototype.renderLimitBet=function(){if("number"==this.data.bet_max&&"number"==typeof this.data.bet_limit){var t=App.CommonUtils.money(this.data.bet_limit),e=App.CommonUtils.money(this.data.bet_max);this.Limited.text="限红:"+t+"~"+e}},o.prototype.renderIssue=function(){this.data.issue&&(this.Issue.text="期号:"+this.data.issue)},o.prototype.renderTimer=function(){switch(this.data.state){case t.GameStateConst.BETTING:this.betTimer(this.data.total_time,this.data.remaining_time);break;case t.GameStateConst.EXCHANGE:this.GameStatus.text="结算中",this.StateTime.text="...",this.StateTime.y=38,this.MaskBetTimer.visible=!1}},o.prototype.betTimer=function(t,e){var o=this.data.remaining_time;this.GameStatus.text="下注中",o>=100?this.StateTime.text="···":this.StateTime.text=o+"",this.Mandi.scaleX=e/t,this.MaskBetTimer.visible=!0},o.prototype.renderChart=function(t){for(var e=0,o=0,i=0,n=[],s=0;s<this.data.charts.length;s++){var r=this.data.charts[s],a=-1;r.is_win_redcow?a=0:r.is_win_blackcow?a=1:r.is_win_draw&&(a=2),n[s]=a}for(var h=0;h<n.length;h++){var r=n[h];0==r?e++:1==r?o++:i++}this.BankerSum.text="红"+e,this.PlayerSum.text="黑"+o,this.DrawSum.text="和"+i,this.ChartBead.renderBead(n,"fkdn",t),this.ChartOther.renderOtherChart(n,"fkdn",t)},o.prototype.destroy=function(){this.ChartBead.destroy(),this.ChartOther.destroy()},o}(eui.ItemRenderer);t.FkdnDeskItem=e,__reflect(e.prototype,"fkdn.FkdnDeskItem")}(fkdn||(fkdn={}));var fkdn;!function(t){var e;!function(t){t[t.DESK_LIST_N=11601]="DESK_LIST_N",t[t.DESK_STATE_N=11602]="DESK_STATE_N",t[t.DESK_CHART_N=11603]="DESK_CHART_N",t[t.CHIPS_RECORD_N=11605]="CHIPS_RECORD_N",t[t.LOBBY_SET_Q=11631]="LOBBY_SET_Q",t[t.LOBBY_SET_R=11632]="LOBBY_SET_R"}(e=t.DeskProxyConst||(t.DeskProxyConst={}));var o;!function(t){t[t.onDeskListCallBack=2e4]="onDeskListCallBack",t[t.onDeskStateCallBack=20001]="onDeskStateCallBack",t[t.onDeskChartCallBack=20002]="onDeskChartCallBack",t[t.onLobbySetCallBack=20003]="onLobbySetCallBack",t[t.onEnterGame=20004]="onEnterGame"}(o=t.DeskCallBacks||(t.DeskCallBacks={}))}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(){function t(){this.initChips()}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initChips=function(){this._chips="[0, 2, 5, 8, 9]"},t.prototype.setChips=function(t){this._chips=t},Object.defineProperty(t.prototype,"Chips",{get:function(){return this._chips},enumerable:!0,configurable:!0}),t._i=null,t}();t.FkdnChips=e,__reflect(e.prototype,"fkdn.FkdnChips");var o=function(){function t(){this.initChips()}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initChips=function(){this.HitRates=null},t.prototype.setHitRate=function(t){this.HitRates=t},Object.defineProperty(t.prototype,"HitRate",{get:function(){return this.HitRates},enumerable:!0,configurable:!0}),t._i=null,t}();t.FkdnHitRate=o,__reflect(o.prototype,"fkdn.FkdnHitRate")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("DeskController init()"),t}return __extends(o,e),o.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.FkdnViewConst.Base),this.initDesk(),this.enterGameInfo()},o.prototype.inits=function(){this._model=new t.DeskModel(this),this._view=new t.DeskView(this),this._proxy=new t.DeskProxy(this,this.getModel())},o.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.FkdnViewConst.Base,this._view),this.registerFunc(t.DeskCallBacks.onDeskListCallBack,this.onDeskListCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskStateCallBack,this.onDeskStateCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskChartCallBack,this.onDeskChartCallBack,this),this.registerFunc(t.DeskCallBacks.onLobbySetCallBack,this.onLobbySetCallBack,this),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc(t.DeskCallBacks.onEnterGame,this.onEnterGame,this)},o.prototype.addListeners=function(){this._proxy.addEvent()},o.prototype.removeListeners=function(){this._proxy.removeEvent()},o.prototype.enterGameInfo=function(){this.model.isOpenGame=!0;var t=this.model.initGameMss;null!=t&&this.onDeskListCallBack(t)},o.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this.model.isBackstage=!0,this._proxy.requestLobbySet(!1),this._proxy.requestLobbySet(!0)},Object.defineProperty(o.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),o.prototype.initDesk=function(){},o.prototype.onDeskListCallBack=function(t){this.model.isBackstage||this.model.isOpenGame&&(this.model.isBackstage=!1,this._view.createList(t))},o.prototype.onDeskStateCallBack=function(t){this.model.isBackstage||this._view.insertState(t)},o.prototype.onDeskChartCallBack=function(t){this.model.isBackstage||this._view.insertChart(t)},o.prototype.onLobbySetCallBack=function(t){this.model.isBackstage=!1},o.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},o.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},o.prototype.onEnterGame=function(t){Log.log("进入游戏",t),this.enterGameByDeskId(t)},o.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("fkdn销毁Controller"),this.model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._proxy=void 0},o}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"fkdn.DeskController")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(t){function e(e){var o=t.call(this,e)||this;return o.initData(),o}return __extends(e,t),e.prototype.initData=function(){this.isOpenGame=!1,this.initGameMss=null},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"fkdn.DeskModel")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),o.prototype.onDeskList=function(e){Log.log("onDeskList",e),this.model.initGameMss=App.CommonUtils.copyDataHandler(e),this.applyFunc(t.DeskCallBacks.onDeskListCallBack,e)},o.prototype.onDeskState=function(e){Log.log("onDeskState",e),this.applyFunc(t.DeskCallBacks.onDeskStateCallBack,e)},o.prototype.onDeskChart=function(e){Log.log("onDeskChart",e),this.applyFunc(t.DeskCallBacks.onDeskChartCallBack,e)},o.prototype.onChipsRecord=function(e){""!=e.chips&&t.FkdnChips.i.setChips(e.chips)},o.prototype.onLobbySet=function(e){this.applyFunc(t.DeskCallBacks.onLobbySetCallBack,e)},o.prototype.requestLobbySet=function(e){this.send(t.DeskProxyConst.LOBBY_SET_Q,{on:e})},o.prototype.onHitRateRes=function(e){Log.log("onHitRateRes",e);var o=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.FkdnHitRate.i.setHitRate(o)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_CHART_RES,this.onDeskList,this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_STATUS_NOTIFY,this.onDeskState,this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_CHART_NOTIFY,this.onDeskChart,this),this.addListener(t.FkdnProxyConst.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this)},o}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"fkdn.DeskProxy")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"fkdn","DeskSkin")||this;return o.TableList.initComponent(t),o.helpPop.initComponent(t),o.helpPop.initUI(),o}return __extends(o,e),o.prototype.initUI=function(){e.prototype.initUI.call(this),this.TableList.initUI(t.DeskCallBacks.onEnterGame),this.initBroadcast(this),this.BtnReturn.visible=!App.isWebInsert},o.prototype.onHelpPay=function(){Log.log("进入帮助"),this.onClickBackHelp()},o.prototype.onClickBackHelp=function(){App.MouseUtils.removeMouseWheel(),this.helpPop.showPopup(!1)},o.prototype.createList=function(t){this.TableList.createList(t)},o.prototype.insertState=function(t){this.TableList.insertState(t)},o.prototype.insertChart=function(t){this.TableList.insertChart(t)},o.prototype.toggleBtn=function(t){var e=t.currentTarget;e.visible=!1},o.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)},o.prototype.addPageSignMove=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},o.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.MessageCenter.addListener(t.FkdnConst.addPageSignMove,this.addPageSignMove,this),App.CommonUtils.effectButton(this.btnHelp,this.onHelpPay,this,{}),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.TableList.addEvent(),this.helpPop.addEvent()},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.MessageCenter.removeListener(t.FkdnConst.addPageSignMove,this.addPageSignMove,this),App.CommonUtils.removeButton(this.btnHelp),App.CommonUtils.removeButton(this.BtnReturn),App.MouseUtils.removeMouseWheel(),this.TableList.removeEvent(),this.helpPop.removeEvent()},o.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("fkdn销毁DeskView"),this.TableList.destroy(),this.helpPop.destroy()},o}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"fkdn.DeskView")}(fkdn||(fkdn={}));var fkdn;!function(t){var e;!function(e){var o=function(){function e(){}return e.prototype.getVersion=function(){return"v1.0.0"},e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var o=base.getController(e);o&&o.onCreate()},e.prototype.initialize=function(t,e){var o=base.getController(t);o&&o.onInit(e)},e.prototype.destroy=function(t){},e}();e.fkdn=o,__reflect(o.prototype,"fkdn.Entrance.fkdn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t,o=e.fkdnBonePool;return o&&(t=o.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var o=e.fkdnBonePool;o||(o=[]),t._mIsInPool=!0,t.clean(),o.push(t),e.fkdnBonePool=o}},e.cleanFormPool=function(){var t=e.fkdnBonePool;if(t)for(;t.length;){var o=t.pop();o.destroy()}},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature&&this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.fkdnBonePool=null,e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.FkdnBones=e,__reflect(e.prototype,"fkdn.FkdnBones")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(){var t=e.call(this,"FkdnBetBox")||this;return t.coinArr=[],t.winpos=[],t.allChipList=[],t.isBetList={},t.coinBox=[],t}return __extends(o,e),o.prototype.bet=function(e){var o=e.currentTarget.name;this.applyFunc(t.FkdnCallBacks.bet,o)},o.prototype.setIsBetList=function(){for(var t=0;15>t;t++)this.isBetList["isBet_"+t]=!1},o.prototype.setTouchBtnAlpha=function(){for(var t=0;15>t;t++)this["TouchBtn_"+t].alpha=0},o.prototype.initCoinBox=function(){common.GameShowBetChipMgr.i.initCoinBox(3,15)},o.prototype.showBetMoney=function(e){for(var o=0;o<e.length;o++)if(e[o]){var i=Math.floor(App.CommonUtils.money(e[o]));if(i){this["TotalBet_"+o].text=""+i,this.isBetList["isBet_"+o]=!0;var n=this["BetBox"+o];common.GameShowBetChipMgr.i.showCoin(o,n,i,3,t.SoundConst.BET)}}else this["TotalBet_"+o].text=""},o.prototype.showSelfBet=function(t){for(var e=0;e<t.length;e++){var o=Math.floor(App.CommonUtils.money(t[e]));o?this["MyBet_"+e].text=""+o:this["MyBet_"+e].text=""}},o.prototype.showMyPreBet=function(t){for(var e=0;e<t.length;e++){var o=Math.floor(App.CommonUtils.money(t[e]));o?this["MyPreBet_"+e].text=""+o:this["MyPreBet_"+e].text=""}},o.prototype.numFkdnShake=function(t){var e=this["TotalBet_"+t];common.GUtils.numShake(e)},o.prototype.coinFlicker=function(t){for(var e=t,o=0;o<e.length;o++)for(var i=e[o],n=this["BetBox"+i],s=0;s<n.numChildren;s++){var r=n.getChildAt(s);egret.Tween.get(r).to({alpha:0},150)}},o.prototype.coinStopFlicker=function(t){for(var e=t,o=0;o<e.length;o++)for(var i=e[o],n=this["BetBox"+i],s=0;s<n.numChildren;s++){var r=n.getChildAt(s);r.alpha=1}},o.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,o=void 0;switch(t){case 0:e=this.HeadPos0.left,o=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,o=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,o=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,o=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,o=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,o=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var i=this.GroupHeadPos.localToGlobal(e,o);this.winpos.push(i)}},o.prototype.betToPlaceAni=function(t,e,o){base.GameCoinMgr.i.flyToPlace(t,this["BetPoint_"+e],o,this.winpos,this.GroupChip)},o.prototype.cleanChip=function(){base.GameCoinMgr.i.clean()},o.prototype.createWinChip=function(t,e){if(this.isBetList["isBet_"+t]){var o=this["BetBox"+t],i=this["ChipPos"+t],n=this.winpos[e];common.GameWinChipMgr.i.createWinChip(t,e,o,i,n,this.GroupChip,5)}},o.prototype.flyWinChip=function(){common.GameWinChipMgr.i.flyWinChip(t.SoundConst.WIN_BET)},o.prototype.clearFlyWinChip=function(){common.GameWinChipMgr.i.clearFlyWinChip()},o.prototype.clearCoin=function(){for(var t=0;15>t;t++)for(var e=this["BetBox"+t],o=0;o<e.numChildren;o++){var i=e.getChildAt(o);this.removeCoins(i)}},o.prototype.clearNum=function(){for(var t=0;15>t;t++)this.isBetList["isBet_"+t]=!1,this["TotalBet_"+t].text="",this["MyBet_"+t].text="";this.clearPreMoney()},o.prototype.clearPreMoney=function(){for(var t=0;15>t;t++)this["MyPreBet_"+t].text=""},o.prototype.coinAniClear=function(t){var e=this;t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){e.coinStopFlicker(t)},this,200)),R.setTimeOnce(function(){e.clearCoin(),e.flyWinChip()},this,350)},o.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},o.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},o.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},o.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},o.prototype.hideStar=function(){for(var t=0;15>t;t++)this["StarPos_"+t].visible=!1},o.prototype.hideTableLight=function(){for(var t=0;15>t;t++)this["highLight_"+t].alpha=0},o.prototype.showTableLight=function(t){for(var e=t,o=0;o<e.length;o++){var i=e[o],n=this["highLight_"+i];common.GUtils.showTableLight(n)}},o.prototype.directTableLight=function(t){for(var e=t,o=0;o<e.length;o++){var i=e[o],n=this["highLight_"+i];n.alpha=1}},o.prototype.stopRegion=function(){for(var t=0;15>t;t++)this["TouchBtn_"+t].touchEnabled=!1},o.prototype.startRegion=function(){for(var t=0;15>t;t++)this["TouchBtn_"+t].touchEnabled=!0},o.prototype.addEvent=function(){for(var t=0;15>t;t++)this["TouchBtn_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.bet,this)},o.prototype.removeEvent=function(){for(var t=0;15>t;t++)this["TouchBtn_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bet,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFlyWinChip(),this.cleanChip(),R.removeAllTimeOut(this),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.allChipList=void 0,this.coinArr=void 0,this.winpos=void 0},o}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"fkdn.BetBox")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){var o=e.call(this,"FkdnTableListSkin")||this;return o.deskType=1,o.deskList=[],o}return __extends(o,e),o.prototype.initUI=function(e,o){this.eventName=e;var i=new eui.VerticalLayout;this.ListItem.layout=i,this.DeskScroller.viewport=this.ListItem,this.DeskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.DeskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.ListItem.itemRenderer=t.FkdnDeskItem,this.tempCollection=new eui.ArrayCollection,2==o?(this.deskType=0,this.DeskScroller.verticalScrollBar.visible=!0):this.DeskScroller.verticalScrollBar.visible=!1},o.prototype.setDeskType=function(t){this.deskType=t},o.prototype.createList=function(t,e){var o=App.CommonUtils.copyDataHandler(t.table_info_list);this.deskList.length=0,this.deskList=o;for(var i=0;i<o.length;i++){var n=o[i];e&&e==n.table_id?n.isCurrentTable=!0:n.isCurrentTable=!1}o.sort(function(t,e){return t.sort_id-e.sort_id}),this.deskList.length?this.refreshList():(this.tempCollection.removeAll(),this.tempCollection.refresh())},o.prototype.getCheckedList=function(t){for(var e=t,o=[],i=0;i<e.length;i++){var n=e[i],s=-1;n.is_win_redcow?s=0:n.is_win_blackcow?s=1:n.is_win_draw&&(s=2),o[i]=s}return o},o.prototype.refreshList=function(){if(this.deskList.length){this.DeskScroller.stopAnimation(),this.tempCollection.refresh();var t=this.deskList;this.tempCollection.replaceAll(t),this.ListItem.dataProvider=this.tempCollection;for(var e=0;e<this.deskList.length;e++){var o=this.deskList[e];this.updateItemData(o)}this.tempCollection.refresh()}},o.prototype.insertState=function(t){for(var e=0;e<this.deskList.length;e++){var o=this.deskList[e];o.table_id==t.table_id&&this.updateItemData(o,t)}},o.prototype.updateItemData=function(e,o){o&&(e.issue=o.issue),o&&(e.state=o.state);var i=o?o.remaining_time:e.remaining_time,n=o?o.total_time:e.total_time,s=o?o.state:e.state;switch(e.remaining_time=Math.round(i/1e3),e.total_time=Math.round(n/1e3),s){case t.GameStateConst.BETTING:App.TimerManager.doTimer(1e3,e.remaining_time+1,function(){e.remaining_time>=0&&e.state==t.GameStateConst.BETTING&&(e.remaining_time--,e.remaining_time<=0&&(e.remaining_time=0),this.updateRenderData())},this)}this.updateRenderData()},o.prototype.updateRenderData=function(){for(var t=this.deskList,e=0;e<t.length;e++){var o=this.tempCollection.getItemAt(e);o=t[e],this.tempCollection.itemUpdated(o)}},o.prototype.insertChart=function(t){if(this.deskList.length){for(var e=0;e<this.deskList.length;e++){var o=this.deskList[e];o.table_id==t.table_id&&(o.charts?o.charts=o.charts.concat(t.charts):o.charts=t.charts,o.charts.length>60&&o.charts.splice(0,60))}this.updateRenderData()}},o.prototype.onEnterGame=function(){var t=this.ListItem.selectedIndex,e=this.ListItem.getElementAt(t);this.applyFunc(this.eventName,e.tableId),Log.log("onEnterGame",e.tableId)},o.prototype.setScrollV=function(t){this.DeskScroller.viewport.scrollV=t},o.prototype.getListHeight=function(){var t=this.DeskScroller.viewport.contentHeight;return t},o.prototype.getViewportHeight=function(){var t=this.DeskScroller.viewport.height;return t},o.prototype.stopAnimation=function(){this.DeskScroller.stopAnimation()},o.prototype.touchTableMove=function(t,e){common.GUtils.touchScrollMove(this.DeskScroller,t,e)},o.prototype.onTableMouseWheel=function(t){common.GUtils.touchMouseWheel(this.DeskScroller,this.ListItem,t)},o.prototype.addEvent=function(){this.ListItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},o.prototype.removeEvent=function(){this.ListItem.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),common.BeadFactory.i.clear(),App.TimerManager.removeAll(this),this.tempCollection=void 0,this.deskList=void 0},o}(BaseEuiComponent);t.FkdnTableList=e,__reflect(e.prototype,"fkdn.FkdnTableList")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){var o=e.call(this,"FkdnChangeTableSkin")||this;return o.visible=!1,o}return __extends(o,e),o.prototype.initUI=function(){this.TableList.initUI(t.FkdnCallBacks.changeTable,2)},o.prototype.getTableList=function(){return this.TableList},o.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},o.prototype.closePoput=function(){this.applyFunc(t.FkdnCallBacks.lobbySetOff),App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),App.MouseUtils.removeMouseWheel()},o.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)},o.prototype.createList=function(t,e){this.TableList.createList(t,e)},o.prototype.insertState=function(t){this.TableList.insertState(t)},o.prototype.insertChart=function(t){this.TableList.insertChart(t)},o.prototype.touchMove=function(e){this.ScrollBox.width=t.FkdnConst.Renew_Scroll_Width,this.ScrollBox.x=0,this.TableList.touchTableMove(e,t.FkdnConst.Scroll_Bar_Height)},o.prototype.touchEnd=function(){this.ScrollBox.width=31,this.ScrollBox.x=898},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.addEvent()},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.removeEvent()},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.TableList.destroy()},o}(BaseEuiComponent);t.ChangeTable=e,__reflect(e.prototype,"fkdn.ChangeTable")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(t){function e(){var e=t.call(this,"FkdnChartSkin")||this;return e.record=[],e.chartRecord=[],e.isOpenRoad=!1,e}return __extends(e,t),e.prototype.openChart=function(){this.isOpenRoad?this.closeChart():(this.applyFunc("showRoadMap"),egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut),this.isOpenRoad=!0)},e.prototype.closeChart=function(){egret.Tween.get(this.GroupChart).to({right:-280},200,egret.Ease.sineInOut),this.applyFunc("closeRoadMap"),this.isOpenRoad=!1},e.prototype.renderChart=function(t,e){if(this.chartRecord=JSON.parse(JSON.stringify(t)),this.longCount=0,this.huCount=0,this.tieCount=0,this.allCount=0,this.chartRecord.length){this.chartRecord.length>60&&this.chartRecord.splice(0,60);
for(var o=0;o<this.chartRecord.length;o++){var i=this.chartRecord[o];0==i?this.longCount+=1:1==i?this.huCount+=1:this.tieCount+=1}this.allCount=this.chartRecord.length,this.CountLong.text=""+this.longCount,this.CountHu.text=""+this.huCount,this.CountTie.text=""+this.tieCount,this.CountAll.text=""+this.allCount}this.ChartBead.renderBead(this.chartRecord,"fkdn",e),this.ChartOther.renderOtherChart(this.chartRecord,"fkdn",e);var n=this.ChartOther.getAskRoad(0),s=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(n),this.renderBlackAskRoad(s)},e.prototype.renderRedAskRoad=function(t){this.LongAskRoad.removeChildren(),this.renderAskRoad(t,this.LongAskRoad)},e.prototype.renderBlackAskRoad=function(t){this.HuAskRoad.removeChildren(),this.renderAskRoad(t,this.HuAskRoad)},e.prototype.renderAskRoad=function(t,e){if(t.length){var o=new eui.Image;o.x=0,o.y=2,o.source=RES.getRes("fkdn_ui_dyl_"+t[0]),e.addChild(o)}if(t.length>1){var o=new eui.Image;o.x=12,o.y=2,o.source=RES.getRes("fkdn_ui_xl_"+t[1]),e.addChild(o)}if(t.length>2){var o=new eui.Image;o.x=24,o.y=2,o.source=RES.getRes("fkdn_ui_xql_"+t[2]),e.addChild(o)}},e.prototype.addEvent=function(){this.BtnCloseChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this),App.CommonUtils.effectButton(this.BtnOpenChart,this.openChart,this,{})},e.prototype.removeEvent=function(){this.BtnCloseChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this),App.CommonUtils.removeButton(this.BtnOpenChart)},e.prototype.destroy=function(){t.prototype.destroy.call(this),common.BeadFactory.i.clear(),this.record=void 0,this.chartRecord=void 0},e}(BaseEuiComponent);t.ChartView=e,__reflect(e.prototype,"fkdn.ChartView")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){var o=e.call(this,"FkdnHelpSkin")||this;return o.isTMove=!1,o.visible=!1,o}return __extends(o,e),o.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},o.prototype.showPopup=function(t){this.isTMove=t,App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},o.prototype.closePoput=function(){var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),App.MouseUtils.removeMouseWheel(),this.isTMove||App.MessageCenter.dispatch(t.FkdnConst.addPageSignMove)},o.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.touchMove=function(e){this.ScrollBox.width=t.FkdnConst.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.FkdnConst.Scroll_Bar_Height)},o.prototype.touchEnd=function(){this.ScrollBox.width=t.FkdnConst.Scroll_Width,this.ScrollBox.x=t.FkdnConst.Help_bar_X},o.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},o.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.HelpView=e,__reflect(e.prototype,"fkdn.HelpView")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){return e.call(this,"FkdnTimerSkin")||this}return __extends(o,e),o.prototype.open=function(){this.hideTimer(),this.hideAwardAni()},o.prototype.startTimer=function(t){this._currentSecond=Math.round(t.time/1e3),this._currentState=t.status,this._currentSecond>0&&(this.TimeLbL.text=""+this._currentSecond,App.TimerManager.doTimer(1e3,this._currentSecond,this.timerFunc,this))},o.prototype.renderLottery=function(){if(this._currentSecond<3600){var t=this._currentSecond%60,e=Math.floor(this._currentSecond/60);this.timeSecond.text=10>t?"0"+t:""+t,this.timeMinute.text=10>e?"0"+e:""+e}},o.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},o.prototype.showTimer=function(){this.GroupClassic.visible=!0},o.prototype.hideTimer=function(){this.GroupClassic.visible=!1,this.TimeLbL.scaleX=this.TimeLbL.scaleY=1},o.prototype.timerFunc=function(){this._currentSecond?(this._currentSecond--,this._currentState==t.GameStateConst.BETTING&&(this._currentSecond<4&&(App.SoundManager.playEffect(t.SoundConst.COUNT_DOWN),this.numShake()),this._currentSecond&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+""))):this.stopTimer()},o.prototype.stopTimer=function(){App.TimerManager.remove(this.timerFunc,this),egret.Tween.removeTweens(this.TimeLbL),R.removeAllTimeOut(this),this._currentSecond=0,this.TimeLbL.text="0",this.GroupClassic.visible=!1,this.TimeLbL.scaleX=this.TimeLbL.scaleY=1},o.prototype.setCurIssue=function(t){this.Issue.text="第"+t+"期"},o.prototype.awarding=function(){if(this.spotanim||(this.spotanim=new common.comBones),!this.spotanim.parent){var t="spot";this.GroupAward.addChild(this.spotanim),this.spotanim.updateId(t),this.spotanim.setPosition(0,0)}this.spotanim.play(999)},o.prototype.getRemaniTime=function(){return this._currentSecond},o.prototype.showAwardAni=function(){this.GroupAward.visible=!0},o.prototype.hideAwardAni=function(){this.GroupAward.visible=!1},o.prototype.clearAward=function(){this.spotanim&&(this.spotanim.destroy(),this.spotanim=void 0)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.stopTimer(),this.clearAward()},o}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"fkdn.Timer")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(){function t(){}return t.Overweight={yy:235,index:0,isEnd:!1},t.addPageSignMove="addPageSignMove",t.Scroll_Bar_Height=50,t.Scroll_Width=50,t.Renew_Scroll_Width=1e3,t.Help_bar_X=602,t.Table_Bar_X=850,t.Record_Bar_X=975,t}();t.FkdnConst=e,__reflect(e.prototype,"fkdn.FkdnConst");var o;!function(t){t[t.Base=1200]="Base",t[t.Popup=1201]="Popup"}(o=t.FkdnViewConst||(t.FkdnViewConst={}));var i=function(){function t(){}return t.BG="fkdn_bg_mp3",t.CARD_WASH="fkdn_cardwash_mp3",t.DEAL="fkdn_sendcard_mp3",t.START="fkdn_start_mp3",t.STOP="fkdn_stop_mp3",t.COUNT_DOWN="fkdn_countdown_mp3",t.ALERT="fkdn_alert_mp3",t.BET="fkdn_bet_mp3",t.SHOW="fkdn_show_mp3",t.LONG_WIN="fkdn_long_win_mp3",t.HU_WIN="fkdn_hu_win_mp3",t.HE="fkdn_he_mp3",t.WIN_BET="fkdn_win_bet_mp3",t.WIN_GAME="fkdn_win_game_mp3",t.RESULT=["fkdn_cow0_mp3","fkdn_cow1_mp3","fkdn_cow2_mp3","fkdn_cow3_mp3","fkdn_cow4_mp3","fkdn_cow5_mp3","fkdn_cow6_mp3","fkdn_cow7_mp3","fkdn_cow8_mp3","fkdn_cow9_mp3","fkdn_cow10_mp3"],t}();t.SoundConst=i,__reflect(i.prototype,"fkdn.SoundConst");var n;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(n=t.PlayerConst||(t.PlayerConst={}));var s;!function(t){t[t.LOONG=0]="LOONG",t[t.TIGER=1]="TIGER",t[t.TIE=2]="TIE",t[t.one=3]="one",t[t.two=4]="two",t[t.three=5]="three",t[t.four=6]="four",t[t.five=7]="five",t[t.six=8]="six",t[t.seven=9]="seven",t[t.eight=10]="eight",t[t.nine=11]="nine",t[t.ten=12]="ten",t[t.eleven=13]="eleven",t[t.twelve=14]="twelve"}(s=t.TypeConst||(t.TypeConst={}));var r;!function(t){t[t.BetSucc=0]="BetSucc",t[t.BetErrorPlace=1]="BetErrorPlace",t[t.BetErrorMoney=2]="BetErrorMoney",t[t.BetErrorState=3]="BetErrorState",t[t.BetErrorOutLimitMin=4]="BetErrorOutLimitMin",t[t.BetErrorOutLimitMax=5]="BetErrorOutLimitMax",t[t.BetErrorOutLimitTotal=6]="BetErrorOutLimitTotal",t[t.BetErrorNoEnoughMoney=7]="BetErrorNoEnoughMoney",t[t.BetErrorNULL=8]="BetErrorNULL"}(r=t.FkdnBetResultCode||(t.FkdnBetResultCode={}));var a;!function(t){t[t.CLASSIC=1]="CLASSIC",t[t.LOTTORY=2]="LOTTORY"}(a=t.TableTypeConst||(t.TableTypeConst={}));var h=function(){function t(){}return t.NET_MSG={ENTER_GAME_R:"11801",ONLINE_NUM:"11802",ISSUE_NOTIFY:"11803",STATENOTIFY:"11804",LIMIT_NOTIFY:"11805",ME_BET:"11806",BET_RESPONSE:"11807",PLAYER_BET_INFONOTIFY:"11808",GAME_BET_INFO_NOTIFY:"11809",GAME_RESULT_NOTIFY:"11810",EXCHANGE_NOTIFY:"11811",CHART_REQ:"11812",CHART_NOTIFY:"11813",WIN_RECORD_REQ:"11814",WIN_RECORD_RES:"11815",RANKING_LIST_REQ:"11816",RANKING_LIST_RES:"11817",DEBUG_SET_CARD_REQ:"11818",DEBUG_SET_CARD_RES:"11819",SPECIAL_PLAYER_RES:"11820",SPECIAL_PLAYER_ACTION_RES:"11821",CHIPS_RECORD_REQ:"11822",CHIPS_RECORD_NOTIFY:"11823",HALL_CHART_REQ:"11824",HALL_CHART_RES:"11825",HALL_CHART_NOTIFY:"11826",HALL_STATUS_NOTIFY:"11827",SWITCH_TABLE_REQ:"11828",ENTER_TABLE_REQ:"11829",ENTER_TABLE_RES:"11830",STATE_TEQ:"11831",STATE_TES:"11832",HIT_RATE_RES:"11833"},t}();t.FkdnProxyConst=h,__reflect(h.prototype,"fkdn.FkdnProxyConst");var l;!function(t){t[t.Const_onEnterGameCallBack=10001]="Const_onEnterGameCallBack",t[t.onIssueNotifyBack=10002]="onIssueNotifyBack",t[t.onLimitNotifyBack=10003]="onLimitNotifyBack",t[t.onStateNotifyyBack=10004]="onStateNotifyyBack",t[t.onExchangeNotifyBack=10005]="onExchangeNotifyBack",t[t.onSelfBetCallBack=10006]="onSelfBetCallBack",t[t.onBetResponseBack=10007]="onBetResponseBack",t[t.onPlayerBetInfoNotifyBack=10008]="onPlayerBetInfoNotifyBack",t[t.onGameBetInfoNotify=10009]="onGameBetInfoNotify",t[t.onOnlineNumCallBack=10010]="onOnlineNumCallBack",t[t.onChartNotifyBack=10011]="onChartNotifyBack",t[t.onGameResultNotifyBack=10012]="onGameResultNotifyBack",t[t.onWinningRecordResBack=10013]="onWinningRecordResBack",t[t.onrankinglistresBack=10014]="onrankinglistresBack",t[t.onSpecialPlayerActionResBack=10015]="onSpecialPlayerActionResBack",t[t.onLeaveSceneResBack=10016]="onLeaveSceneResBack",t[t.onHitRateResBack=10017]="onHitRateResBack",t[t.HallChartNotify=80001]="HallChartNotify",t[t.btnHallcharTReq=80002]="btnHallcharTReq",t[t.createHallChart=80003]="createHallChart",t[t.createGameHallChart=80004]="createGameHallChart",t[t.changeHallChart=80005]="changeHallChart",t[t.changeGameChart=80006]="changeGameChart",t[t.changeHallstaus=80007]="changeHallstaus",t[t.changeGamestaus=80008]="changeGamestaus",t[t.closeHallChart=80009]="closeHallChart",t[t.getEnterTableRes=80010]="getEnterTableRes",t[t.onEnterBrnnGame=80011]="onEnterBrnnGame",t[t.onEnterTableGame=80012]="onEnterTableGame",t[t.onStateTimeResBack=80013]="onStateTimeResBack",t[t.addPageSignMove=80014]="addPageSignMove",t[t.Special_Player=80015]="Special_Player",t[t.Special_Player_Action=80016]="Special_Player_Action",t[t.Chips_Record_Notify=80017]="Chips_Record_Notify",t[t.rechargeMoney=80018]="rechargeMoney"}(l=t.FkdnCallBackConst||(t.FkdnCallBackConst={}));var p;!function(t){t[t.BETTING=1]="BETTING",t[t.EXCHANGE=2]="EXCHANGE"}(p=t.GameStateConst||(t.GameStateConst={}));var c;!function(t){t[t.bet=8e3]="bet",t[t.onIssueCallBack=8001]="onIssueCallBack",t[t.onGameStateCallBack=8002]="onGameStateCallBack",t[t.onChipsRecordCallBack=8003]="onChipsRecordCallBack",t[t.onShowTimerCallBack=8004]="onShowTimerCallBack",t[t.onSpecialPlayerCallBack=8005]="onSpecialPlayerCallBack",t[t.onGameResultCallBack=8006]="onGameResultCallBack",t[t.onRunWinnerCallBack=8007]="onRunWinnerCallBack",t[t.onBetCallBack=8008]="onBetCallBack",t[t.onBetActionCallBack=8009]="onBetActionCallBack",t[t.onBetInfoCallBack=8010]="onBetInfoCallBack",t[t.onGameBetInfoCallBack=8011]="onGameBetInfoCallBack",t[t.onExchangeCallBack=8012]="onExchangeCallBack",t[t.onChartCallBack=8013]="onChartCallBack",t[t.onRankingCallBack=8014]="onRankingCallBack",t[t.onOnlineCountCallBack=8015]="onOnlineCountCallBack",t[t.onChangeTableMenu=8016]="onChangeTableMenu",t[t.onSwitchTableCallBack=8017]="onSwitchTableCallBack",t[t.onOpenNumberCallBack=8018]="onOpenNumberCallBack",t[t.onLotteryRuel=8019]="onLotteryRuel",t[t.onRemainTimeCallBack=8020]="onRemainTimeCallBack",t[t.onTableInfoCallBack=8021]="onTableInfoCallBack",t[t.lobbySetOff=8022]="lobbySetOff",t[t.changeTable=8023]="changeTable",t[t.openLotteryRecord=8024]="openLotteryRecord",t[t.onHitRateCallBack=8025]="onHitRateCallBack"}(c=t.FkdnCallBacks||(t.FkdnCallBacks={}));var d=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额太小或太大溢出","不在下注状态","超出单人限额","超出所有人总共限额","没有足够的余额"],t}();t.FkdnCodeErrorTxt=d,__reflect(d.prototype,"fkdn.FkdnCodeErrorTxt");var u;!function(t){t[t.BET_SUCC=0]="BET_SUCC",t[t.BET_ERROR_PLACE=1]="BET_ERROR_PLACE",t[t.BET_ERROR_MONEY=2]="BET_ERROR_MONEY",t[t.BET_ERROR_STATE=3]="BET_ERROR_STATE",t[t.BET_ERROR_OUTLIMIT=4]="BET_ERROR_OUTLIMIT",t[t.BET_ERROR_OUTTOTALLIMIT=5]="BET_ERROR_OUTTOTALLIMIT",t[t.BET_ERROR_NOENOUGH_MONEY=6]="BET_ERROR_NOENOUGH_MONEY"}(u=t.FkdnBetCodeConst||(t.FkdnBetCodeConst={}));var y=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"FNcounter_pick1",COUNTER_PICK5:"FNcounter_pick5",COUNTER_PICK10:"FNcounter_pick10",COUNTER_PICK20:"FNcounter_pick20",COUNTER_PICK50:"FNcounter_pick50",COUNTER_PICK100:"FNcounter_pick100",COUNTER_PICK200:"FNcounter_pick200",COUNTER_PICK500:"FNcounter_pick500",COUNTER_PICK1000:"FNcounter_pick1000",COUNTER_PICK0:"FNcounter_pickAllin",COUNTER_BET1:"FNcounter_bet1",COUNTER_BET5:"FNcounter_bet5",COUNTER_BET10:"FNcounter_bet10",COUNTER_BET20:"FNcounter_bet20",COUNTER_BET50:"FNcounter_bet50",COUNTER_BET100:"FNcounter_bet100",COUNTER_BET200:"FNcounter_bet200",COUNTER_BET500:"FNcounter_bet500",COUNTER_BET1000:"FNcounter_bet1000",COUNTER_BET0:"FNcounter_betallin",OPERATE_BUTTONCANCEL:"FNoperate_buttoncancel",OPERATE_BUTTONREPEAT:"FNoperate_buttonrepeat",OPERATE_BUTTONCONFIRM:"FNoperate_buttonconfirm",OPERATE_AUTOCONFIRM:"FNoperate_autoconfirm",OPERATE_SETCOUNTER:"FNoperate_setcounter",OPERATE_ADDCOUNTER:"FNoperate_addcounter",BETS_0:"FNbets_red",BETS_1:"FNbets_black",BETS_2:"FNbets_tie",BETS_3:"FNbets_n1",BETS_4:"FNbets_n2",BETS_5:"FNbets_n3",BETS_6:"FNbets_n4",BETS_7:"FNbets_n5",BETS_8:"FNbets_n6",BETS_9:"FNbets_n7",BETS_10:"FNbets_n8",BETS_11:"FNbets_n9",BETS_12:"FNbets_nn",BETS_13:"FNbets_snn",BETS_14:"FNbets_ts",DIRECT_MAPS:"FNdirect_maps",LEADERBOARD_BUTTON:"FNleaderboard_button",MENU_BUTTON:"FNmenu_button",MENU_HELP_BUTTON:"FNmenu_help_button",MENU_SET_BUTTON:"FNmenu_set_button",MENU_RECORD_BUTTON:"FNmenu_record_button",MENU_BACK_BUTTON:"FNmenu_back_button"},t}();t.PointConst=y,__reflect(y.prototype,"fkdn.PointConst")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t.popupView=null,t._ranking=null,t._gameSet=null,t.isFly=!0,t}return __extends(o,e),o.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(t){e.prototype.onInit.call(this),Log.trace("GameController init()"),this.registers(),this.gameInit()},Object.defineProperty(o.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),o.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this.popupView=new t.PopView(this),this.popupView.GameSet.initSet()},o.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.FkdnViewConst.Base,this._view),App.ViewManager.register(t.FkdnViewConst.Popup,this.popupView),this.registerRecharge(),this.registerRedpacket(),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc(t.FkdnCallBacks.onShowTimerCallBack,this.onShowTimerCallBack,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc(t.FkdnCallBacks.bet,this.bet,this),this.registerFunc(t.FkdnCallBacks.onChangeTableMenu,this.onChangeTableMenu,this),this.registerFunc("showRoadMap",this.showRoadMap,this),this.registerFunc("closeRoadMap",this.closeRoadMap,this),this.registerFunc(t.FkdnCallBacks.onRunWinnerCallBack,this.onRunWinnerCallBack,this),this.registerFunc(t.FkdnCallBackConst.getEnterTableRes,this.getEnterTableRes,this),this.registerFunc(t.FkdnCallBackConst.Chips_Record_Notify,this.ChipsRecordNotify,this),this.addEventListeners()},o.prototype.addEventListeners=function(){this.registerFunc(t.FkdnCallBackConst.Const_onEnterGameCallBack,this.onEnterGameCallBack,this),this.registerFunc(t.FkdnCallBackConst.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onLimitNotifyBack,this.onLimitNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onStateNotifyyBack,this.onStateNotifyyBack,this),this.registerFunc(t.FkdnCallBackConst.onExchangeNotifyBack,this.onExchangeNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onBetResponseBack,this.onBetResponseBack,this),this.registerFunc(t.FkdnCallBackConst.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onGameBetInfoNotify,this.onGameBetInfoNotify,this),this.registerFunc(t.FkdnCallBackConst.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.FkdnCallBackConst.onChartNotifyBack,this.onChartNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.FkdnCallBackConst.onrankinglistresBack,this.onrankinglistresBack,this),this.registerFunc(t.FkdnCallBackConst.onStateTimeResBack,this.onStateTimeResBack,this),this.registerFunc(t.FkdnCallBackConst.onHitRateResBack,this.onHitRateResBack,this),this.registerFunc(t.FkdnCallBackConst.Special_Player,this.specialPlayer,this),this.registerFunc(t.FkdnCallBackConst.Special_Player_Action,this.specialPlayerAction,this),this.registerFunc(t.FkdnCallBackConst.createGameHallChart,this.createGameHallChart,this),this.registerFunc(t.FkdnCallBackConst.changeGamestaus,this.changeGamestaus,this),this.registerFunc(t.FkdnCallBackConst.changeGameChart,this.changeGameChart,this),this.registerFunc(t.FkdnCallBacks.changeTable,this.changeTable,this),this.registerFunc(t.FkdnCallBacks.lobbySetOff,this.lobbySetOff,this)},o.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this.model.isBackstage=!1},o.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},o.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},o.prototype.onUserMoneyChange=function(e){this.model.playerMoneys[t.PlayerConst.SELF]=e.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[t.PlayerConst.SELF]))},o.prototype.getModel=function(){return e.prototype.getModel.call(this)},o.prototype.gameInit=function(){App.ViewManager.open(t.FkdnViewConst.Base),App.ViewManager.open(t.FkdnViewConst.Popup),this.initUserInfo(),this._view.initCoinBox(),App.SoundManager.playBg(t.SoundConst.BG),this.model.tableId=this.currDeskId,this.model.playerMoneys[t.PlayerConst.SELF]=this.player.getMoney(),this.model.isAutoBet=!0,this._view.setAutoConfirm(!0)},o.prototype.initUserInfo=function(){this.model.playerIds[t.PlayerConst.SELF]=this.player.getUserId(),this.model.playerMoneys[t.PlayerConst.SELF]=this.player.getMoney(),this._view.setUserInfo(this.player)},o.prototype.initJebutton=function(){this._view.createChip(this.model.chipArr),this._view.setchipValue(this.model._mTempMultiple),this.popupView.setDefaultChip(this.model.chipArr),this.touch(this.model.selBtnIndex)},o.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.fknnRequestRemainTime(),this.clearTable(),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this.model.isBackstage=!0},o.prototype.clearTable=function(){this._view.cleanOpenAndTurnPoker(),this._view.initInfo(),this._view.initializationcardPos(),this._view.clearWinner(),this._view.hideTableLight(),this._view.hideTimer()},o.prototype.clearCoins=function(){this.model.hasBet=!1,this._view.cleanChip(),this._view.clearFlyWinChip(),this.resetBet(),this.resetPerBet(),this.resetAllBet(),this._view.clearCoin(),this._view.initCoinBox(),this._view.setUserBet(0)},o.prototype.betOverCallback=function(){this._view.clearPreMoney(),this.popupView.Prompt.closePoput(),this._view.LoginBtn.betAsh(),this._view.disabledRepeatBet(),this._view.stopRegion(),this._view.hideTimer()},o.prototype.onEnterGameCallBack=function(t){Log.log("onEnterGameCallBack",t),t.table_id==this.model.tableId&&this.gameJoin(t)},o.prototype.onIssueNotifyBack=function(t){Log.log("onIssueNotifyBack",t),t.table_id==this.model.tableId&&(this.model.issueId=t.issue,this._view.setClassicIssue(t.issue))},o.prototype.onLimitNotifyBack=function(t){Log.log("onLimitNotifyBack",t),t.table_id==this.model.tableId&&(this.model.limits=t.limits)},o.prototype.onStateNotifyyBack=function(e,o){if(Log.log("onStateNotifyyBack",e),this.model.gameStateData=App.CommonUtils.copyDataHandler(e),e.table_id==this.model.tableId){if(this.model.isBackstage)return void(e.state==t.GameStateConst.BETTING&&(this.refreshMoney(),this.clearCoins()));this.doGameState(e,o)}},o.prototype.doGameState=function(e,o){switch(this.model.timerInfo=this.resetTime(e),this._view.disabledBtn(),this._view.hideTimer(),this._view.startTimer(this.model.timerInfo),e.state){case t.GameStateConst.BETTING:this.onBetting(e,o);break;case t.GameStateConst.EXCHANGE:this.onExchange(e)}},o.prototype.resetTime=function(t){var e=t.remaining_time,o=t.total_time,i={allTime:o,time:e,status:t.state};return i},o.prototype.onBetting=function(e,o){this.model.betTimes=!0,this.model.isBet=!0;var i=this.model.timerInfo,n=i.allTime-i.time;App.SoundManager.stopEff(t.SoundConst.WIN_GAME),this.clearTable(),o||(this.refreshMoney(),this.clearCoins()),this.renderClassicChart(),this.initStartBet(),200>=n?(this._view.shuffleAni(),this._view.betStartAni(),R.setTimeOnce(function(){App.SoundManager.playEffect(t.SoundConst.START)}.bind(this),this,100)):(this._view.directFapai(),this._view.showTimer())},o.prototype.initStartBet=function(){this.isEnabledBtn(),this._view.startRegion(),this.resetWinMoney(),this.isOpenRepeatBet(),this._view.setUserBet(0),this._view.clearNum(),this._view.hideStar(),this.model.playerPlace.length=0,this.model.playerPlace=[],this.model.winPlayer.length=0,this.model.winPlayer=[],this._view.cleanwinAndlose()},o.prototype.isOpenRepeatBet=function(){this.model.lastBetRecord.length?this._view.enabledRepeatBet():this._view.disabledRepeatBet()},o.prototype.onExchange=function(e){this.betOverCallback(),this.model.isBet=!1;var o=this.model.timerInfo,i=this.getAllSelfBet();if(this.model._isFlylist.length=0,this.model._isFlylist=[],i){this.model.lastBetRecord.length=0;for(var n=this.model.betList,s=0;s<n.length;s++){var r=n[s];if(r){var a={place:s,bet_money:r};this.model.lastBetRecord.push(a)}}}o.time==o.allTime&&(this._view.betStopAni(),R.setTimeOnce(function(){App.SoundManager.playEffect(t.SoundConst.STOP)},this,100))},o.prototype.getAllSelfBet=function(){for(var t=0,e=0;e<this.model.betList.length;e++)t+=this.model.betList[e];return t},o.prototype.onOnlineNumCallBack=function(t){Log.log("onOnlineNumCallBack",t),t.table_id==this.model.tableId&&this._view.changeOnlineNum(t.online_count)},o.prototype.onExchangeNotifyBack=function(e){if(Log.log("onExchangeNotifyBack",e),e.table_id==this.model.tableId){this.model.ExchangeMoney=0;var o=this.model.timerInfo,i=o.allTime-o.time;this.model.playerMoneys[t.PlayerConst.SELF]=e.balance;for(var n=0;n<e.place_exchanges.length;n++){var s=e.place_exchanges[n].prize_money;e.place_exchanges[n].bet_money;this.model.ExchangeMoney+=s;var r=e.place_exchanges[n].place;s>0&&200>=i&&(this._view.createWinChip(r,t.PlayerConst.SELF),-1==this.model.winPlayer.indexOf(4)&&this.model.winPlayer.push(4))}this.model.winMoneys[t.PlayerConst.SELF]=this.model.ExchangeMoney;App.CommonUtils.money2Str(this.model.ExchangeMoney);this._view.playerWinMoney(this.model.ExchangeMoney,4),i>200&&this.model.ExchangeMoney>0&&(this._view.directFontEnlarge(4),this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[t.PlayerConst.SELF]))),this.model.ExchangeMoney>0&&this.createWinRecord()}},o.prototype.setRecordInit=function(t){var e=this.model.issueId,o=t,i={issue:e,hit_money:o};this.model.recordList.unshift(i),this.model.changerecordList()},o.prototype.createWinRecord=function(){var e=this.model.issueId,o=this.model.winMoneys[t.PlayerConst.SELF];if(o){var i=this.model.recordList;if(i.length){for(var n=[],s=0;s<i.length;s++){var r=i[s];n.push(r.issue)}if(n.indexOf(e)>-1)return;this.addWinRecord(e,o)}else this.addWinRecord(e,o)}},o.prototype.addWinRecord=function(t,e){var o={issue:t,hit_money:App.CommonUtils.money(e)};this.model.recordList.unshift(o),this.model.recordList.length>50&&this.model.recordList.splice(50,this.model.recordList.length-50)},o.prototype.renderWinRecord=function(){this.popupView.renderWinRecord(this.model.recordList)},o.prototype.onBetResponseBack=function(e){if(Log.log("onBetResponseBack",e),e.table_id==this.model.tableId){var o=e.bets,i=!0;if(i=o.length>1?!0:!1,e.code)return this.betCodeTips(e.code,i),void(this.model.isAutoBet||this.isEnabledBtn());for(var n=0;n<o.length;n++){var s=o[n].place,r=o[n].bet_money;this._view.betToPlaceAni(t.PlayerConst.SELF,s,r)}this.resetPerBet(),this.betPoints(),this._view.avatarShake(4),this.model.playerMoneys[t.PlayerConst.SELF]=e.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[t.PlayerConst.SELF]))}},o.prototype.betCodeTips=function(e,o){var i=e,n=this.model.limits[this.model.betPlace];switch(i){case t.FkdnBetResultCode.BetErrorOutLimitMin:t.FkdnUtil.textReminder(e,App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money));break;case t.FkdnBetResultCode.BetErrorOutLimitMax:if(o)t.FkdnUtil.textReminder(e);else{var s=this.model.betList[this.model.betPlace];s>=n.limit_max_money?t.FkdnUtil.textReminder(e,App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)):(this.model.limitBetMoney=n.limit_max_money-s,this.popupView.Prompt.showPrompt(1,App.CommonUtils.money(this.model.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)))}break;case t.FkdnBetResultCode.BetErrorNoEnoughMoney:this.popupView.showPromptBrnn(6);break;default:t.FkdnUtil.textReminder(i)}},o.prototype.onPlayerBetInfoNotifyBack=function(t){if(Log.log("onPlayerBetInfoNotifyBack",t),t.table_id==this.model.tableId){var e=0,o=t.infos;this._view.showSelfBet(o);for(var i=0;i<o.length;i++){var n=o[i],s=n.bet_money;e+=s,this.model.betList[n.place]=n.bet_money}this._view.showSelfBet(this.model.betList),this._view.setUserBet(App.CommonUtils.money2Str(e))}},o.prototype.onGameBetInfoNotify=function(e){if(Log.log("onGameBetInfoNotify",e),e.table_id==this.model.tableId){var o=this.model.timerInfo;if(e.infos.length){for(var i=0;i<e.infos.length;i++){var n=e.infos[i];if(o.status==t.GameStateConst.BETTING){var s=n.total_bet_money-this.model.allBetList[n.place];s&&(this._view.onlineShake(),this._view.numFkdnShake(n.place)),this._view.betToPlaceAni(t.PlayerConst.ONLINE,n.place,s),n.total_bet_money>0&&-1==this.model.playerPlace.indexOf(n.place)&&this.model.playerPlace.push(n.place)}this.model.allBetList[n.place]=n.total_bet_money}this._view.showBetMoney(this.model.allBetList)}}},o.prototype.onChartNotifyBack=function(t){if(Log.log("onChartNotifyBack",t),t.table_id==this.model.tableId){var e=t.charts;this.model.historyRecord=this.getchartList(e),this._view.renderChart(this.model.historyRecord,this.model.tableId)}},o.prototype.getchartList=function(t){for(var e=t,o=[],i=0;i<e.length;i++){var n=e[i],s=-1;n.is_win_redcow?s=0:n.is_win_blackcow?s=1:n.is_win_draw&&(s=2),o[i]=s}return o},o.prototype.onGameResultNotifyBack=function(t,e){if(Log.log("onGameResultNotifyBack",t),t.table_id==this.model.tableId){if(this.model.gameResultData=App.CommonUtils.copyDataHandler(t),this.model.isBackstage)return void this.doGameResult(t.place_results);var o=[],i=this.model.timerInfo;if(!t.place_results.length)return;o=o.concat(t.redcow_cards).concat(t.blackcow_cards),Log.log("cardlist",o),this._view.getcardsrc(o),e||this.doGameResult(t.place_results);var n=i.allTime-i.time;200>=n?this._view.kaipaiAnimation(t):(this._view.directKaipai(t),this._view.runWinner(this.model.winner),this._view.directTableLight(this.model.winPos),this._view.renderChart(this.model.historyRecord,this.model.tableId))}},o.prototype.doGameResult=function(e){var o=e,i=this.model.playerPlace;this.model.winPos.length=0,this.model.winPos=[];for(var n=0;n<o.length;n++){var s=o[n];(0==s.place||1==s.place||2==s.place)&&s.is_win&&(this.model.winner=s.place),s.is_win&&this.model.winPos.push(s.place)}if(this.addToChart(this.model.winner),i.length)for(var r=0;r<i.length;r++){var a=i[r],h=o[a].is_win;h&&(this._view.createWinChip(a,t.PlayerConst.ONLINE),-1==this.model.winPlayer.indexOf(t.PlayerConst.ONLINE)&&this.model.winPlayer.push(t.PlayerConst.ONLINE))}},o.prototype.addToChart=function(t){this.model.betTimes&&(this.model.historyRecord.push(t),this.model.historyRecord.length>60&&this.model.historyRecord.splice(0,60))},o.prototype.onrankinglistresBack=function(t){Log.log("onrankinglistresBack",t),t.table_id==this.model.tableId&&(this.popupView.Ranking.rankData(t.infos),App.EasyLoading.hideLoading())},o.prototype.onStateTimeResBack=function(e){this.model.isBackstage=!1;var o=this.model.gameStateData;if(o){o.remaining_time=e.remaining_time,this.onStateNotifyyBack(o,!0);var i=this.model.gameResultData;o.state==t.GameStateConst.EXCHANGE&&i&&this.onGameResultNotifyBack(i,!0)}},o.prototype.onHitRateResBack=function(e){var o=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.FkdnHitRate.i.setHitRate(o),this._view.tableOdds()},o.prototype.specialPlayer=function(t){for(var e=0;e<t.length;e++){var o=t[e];this._view.setInformation(o),this.model.playerIds[o.play_role]=o.user_id,this.model.playerMoneys[o.play_role]=o.balance}},o.prototype.specialPlayerAction=function(t){Log.log("specialPlayerAction",t);var e=t.bets,o=this.model.timerInfo,i=o.allTime-o.time;if(t)if(t.play_action){for(var n=0,s=0;s<e.length;s++)e[s].money>0&&(n+=e[s].money,200>=i&&(this._view.createWinChip(e[s].place,t.play_role),-1==this.model.winPlayer.indexOf(t.play_role)&&this.model.winPlayer.push(t.play_role)));this.model.winMoneys[t.play_role]=n,this._view.playerWinMoney(n,t.play_role),this.model.playerMoneys[t.play_role]=t.balance,i>200&&n>0&&(this._view.directFontEnlarge(t.play_role),this._view.specialPlayerMoney(App.CommonUtils.money2Str(t.balance),t.play_role))
}else{var r=App.CommonUtils.money2Str(t.balance);this.model.playerMoneys[t.play_role]=t.balance,this._view.avatarShake(t.play_role),this._view.specialPlayerMoney(r,t.play_role);for(var s=0;s<e.length;s++){var a=e[s].place;t.play_role||-1!=this.model._isFlylist.indexOf(a)||(this.model._isFlylist.push(a),this._view.starFly(a))}for(var h=0;h<e.length;h++)this._view.betToPlaceAni(t.play_role,e[h].place,e[h].money)}},o.prototype.createGameHallChart=function(t){this.popupView.createTableList(t,this.model.tableId)},o.prototype.changeGamestaus=function(t){this.popupView.insertState(t)},o.prototype.changeGameChart=function(t){this.popupView.insertChart(t)},o.prototype.changeTable=function(t){if(this.setCurrDeskId(t),t==this.model.tableId)Log.log("进入当前房间"),this.popupView.closeChangeTable();else{var e={table_id_old:this.model.tableId,table_id_new:t};Log.log("进入其他房间"),Log.log(e),App.EasyLoading.showOnTimeOut(),this._proxy.fknnRequestDesk(e),this.popupView.closeChangeTable()}},o.prototype.lobbySetOff=function(){var t={table_id:this.model.tableId,is_switch_table:!1};Log.log("关闭其他房间"),this._proxy.fknnGetGameChart(t)},o.prototype.ChipsRecordNotify=function(){this.model.chipArr.length&&this.initJebutton()},o.prototype.touch=function(t){this.model.selBtnIndex=t,this._view.toggleBtn(this.model.selBtnIndex),this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex]},o.prototype.setAutoBet=function(t){this.model.isAutoBet=t,this.autoBetPoints(),t&&this.confirmBet()},o.prototype.ShowsetChip=function(){this.popupView.showChipSet(),this.popupView.setDefaultChip(this.model.chipArr),this.setCounterBtnPoints()},o.prototype.getFiveChip=function(t){if(this.model.chipArr=[].concat(t),this.model.chipArr.length){this._view.setBtnChip(this.model.chipArr),this._view.setchipValue(this.model._mTempMultiple);var e={chips:JSON.stringify(this.model.chipArr),table_id:this.model.tableId};this._proxy.fknnRequestChip(e)}},o.prototype.getChipValue=function(t){this.model._mTempChipMoney=t,this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex],this.setCounterPoints()},o.prototype.changeMultiple=function(t){this._view.setchipValue(t),this.model._mTempMultiple=t},o.prototype.showHelp=function(){this.popupView.showHelp(),this.helpPoints()},o.prototype.showRecord=function(){this.popupView.showWinRecord(),this.winningRecordPoints()},o.prototype.showGameSet=function(){this.popupView.initGameSet(),this.popupView.showGameSet(),this.gameSetPoints()},o.prototype.showRank=function(){this.popupView.showRanking();var t={begin_idx:0,req_count:50,table_id:this.model.tableId};this._proxy.fknnRanking(t),this.rankingPoints()},o.prototype.rechargeMoney=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.backToLobby=function(){({table_id:this.model.tableId});this._proxy.sendLeaveDesk(this.model.tableId),this.backPoints()},o.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},o.prototype.bet=function(e,o){if(this.model.isBet){this.model.betPlace=Number(e);var i=o?o:1e4*this.model.betNum;if(this.isLimit(this.model.betPlace,i))return void(this.model.betPoints.length=0);if(i){var n={place:this.model.betPlace,bet_money:i};this.model.isAutoBet?this.autoBet([n]):this.manualBet(this.model.betPlace,i),this.betPlacePoints(e)}else{var s=this.getAllPreBet();this.model.betMoney=this.model.playerMoneys[t.PlayerConst.SELF]-s,this.popupView.showPrompt(2,App.CommonUtils.money(this.model.betMoney))}this.model.betPoints.push(this.model.betNum)}},o.prototype.isLimit=function(e,o,i){void 0===i&&(i=!1);var n=!1,s=this.model.limits;this.model.isRepeat=i;for(var r=0;r<s.length;r++){var a=s[r];if(a.place==e){var h=this.getAllPreBet(),l=o,p=this.model.betList[e],c=this.model.preBetList[e],d=App.CommonUtils.money(a.limit_min_money),u=App.CommonUtils.money(a.limit_max_money);this.model.playerMoneys[t.PlayerConst.SELF]<=0?(this.popupView.showPromptBrnn(6),n=!0):l+h>this.model.playerMoneys[t.PlayerConst.SELF]?(this.popupView.showPromptBrnn(6),n=!0):l&&l<a.limit_min_money?(t.FkdnUtil.textReminder(t.FkdnBetResultCode.BetErrorOutLimitMin,d,u),n=!0):p+c>=a.limit_max_money?(i?t.FkdnUtil.textReminder(t.FkdnBetResultCode.BetErrorOutLimitMax):t.FkdnUtil.textReminder(t.FkdnBetResultCode.BetErrorOutLimitMax,d,u),n=!0):l+p+c>a.limit_max_money&&(i?t.FkdnUtil.textReminder(t.FkdnBetResultCode.BetErrorOutLimitMax):(this.model.betMoney=a.limit_max_money-(p+c),this.popupView.showPrompt(1,App.CommonUtils.money(this.model.betMoney),d,u)),n=!0)}}return n},o.prototype.autoBet=function(t){var e=t,o={bets:e,table_id:this.model.tableId};this._proxy.fknnRequestBet(o)},o.prototype.manualBet=function(t,e){this.model.preBetList[t]+=e,this._view.showMyPreBet(this.model.preBetList),this.isEnabledBtn()},o.prototype.confirmShowhand=function(){for(var t=this.model.betMoney,e=this.model.limits,o=0;o<e.length;o++){var i=e[o];i.place==this.model.betPlace&&(0==t?this.popupView.Prompt.showPromptBrnn(6):this.bet(this.model.betPlace,t))}},o.prototype.confirmBet=function(){if(this.model.isBet){for(var t=[],e=this.model.preBetList,o=0;o<e.length;o++){var i=e[o];if(i){var n={place:o,bet_money:i};t.push(n)}}if(t.length){var s={bets:t,table_id:this.model.tableId};this._proxy.fknnRequestBet(s)}this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.confirmBetPoints()}},o.prototype.conserBet=function(){this.resetPerBet(),this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.concerBetPoints()},o.prototype.repeatBet=function(){var t=this.model.lastBetRecord;if(this.model.isBet){if(!t.length)return;var e=!0;e=t.length>1?!0:!1;for(var o=0;o<t.length;o++){var i=t[o];if(this.isLimit(i.place,i.bet_money,e))return}if(this.model.isAutoBet)this.autoBet(this.model.lastBetRecord);else{for(var n=0;n<t.length;n++){var s=t[n];this.model.preBetList[s.place]+=s.bet_money}this._view.BetBox.showMyPreBet(this.model.preBetList),this.isEnabledBtn()}this.repeatBetPoints()}},o.prototype.isLimitRepeat=function(){for(var e=!1,o=this.getAllPreBet(),i=0,n=this.model.preBetList,s=this.model.betList,r=this.model.limits,a=this.model.lastBetRecord,h=0;h<a.length;h++){var l=a[h];i+=l.bet_money;for(var p=l.bet_money+s[l.place]+n[l.place],c=0;c<r.length;c++){var d=r[c];l.place==d.place&&(i+o>this.model.playerMoneys[t.PlayerConst.SELF]?(this.popupView.showPromptBrnn(6),e=!0):p>d.limit_max_money&&(App.ScrollTxtTips.showTip(t.FkdnCodeErrorTxt.ERRTXT_LIST[4]),e=!0))}}return e},o.prototype.confirmLimitBet=function(){this.model.betMoney&&this.bet(this.model.betPlace,this.model.betMoney)},o.prototype.confirmShowRecharge=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.createWinChip=function(t,e,o){for(var i=this.model.playerIds,n=0;n<i.length;n++){var s=i[n];e==s&&(this._view.createWinChip(t,n),-1==this.model.winPlayer.indexOf(n)&&this.model.winPlayer.push(n),this.model.winMoneys[n]+=o)}},o.prototype.onRunWinnerCallBack=function(){this._view.runWinner(this.model.winner,!0);var e=this;R.setTimeOnce(function(){e.CoinAnimation()},this,1e3);var o=this.model.winner==t.TypeConst.LOONG?void 0:this.model.winner==t.TypeConst.TIGER?void 0:t.SoundConst.HE;void 0!=o&&App.SoundManager.playEffect(o)},o.prototype.CoinAnimation=function(){this.renderClassicChart(),this._view.coinAniClear(this.model.winPos,this.model.winPlayer),this._view.showTableLight(this.model.winPos);var e=this;this.model.winMoneys[t.PlayerConst.SELF]&&(App.SoundManager.playEffect(t.SoundConst.WIN_GAME),R.setTimeOnce(function(){e.refreshPlayerMoney()},this,1e3))},o.prototype.renderClassicChart=function(){this._view.renderChart(this.model.historyRecord,this.model.tableId),this.renderWinRecord()},o.prototype.refreshPlayerMoney=function(){this.refreshMoney()},o.prototype.refreshMoney=function(){this._view.setUserBet(0),this.refreshExchange()},o.prototype.refreshExchange=function(){for(var e=this.model.playerIds,o=0;o<e.length;o++)o==t.PlayerConst.SELF?this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[o])):this._view.specialPlayerMoney(App.CommonUtils.money2Str(this.model.playerMoneys[o]),o)},o.prototype.getEnterTableRes=function(t){this.initDesktopData(),this._view.closeConfirmFrame(),this.model.tableId=t.table_id_new},o.prototype.isEnabledBtn=function(){for(var t=this.model.preBetList,e=0,o=0;o<t.length;o++)e+=t[o];e&&(this._view.enabledConfirmBet(),this._view.enabledConserBet())},o.prototype.getAllPreBet=function(){for(var t=0,e=0;e<this.model.preBetList.length;e++)t+=this.model.preBetList[e];return t},o.prototype.resetWinMoney=function(){for(var t=this.model.winMoneys,e=0;e<t.length;e++)this.model.winMoneys[e]=0},o.prototype.onShowTimerCallBack=function(){this._view.showTimer()},o.prototype.resetPerBet=function(){for(var t=0;t<this.model.preBetList.length;t++)this.model.preBetList[t]=0;this._view.showMyPreBet(this.model.preBetList)},o.prototype.resetBet=function(){for(var t=0;t<this.model.betList.length;t++)this.model.betList[t]=0},o.prototype.resetAllBet=function(){for(var t=0;t<this.model.allBetList.length;t++)this.model.allBetList[t]=0},o.prototype.onChangeTableMenu=function(){var t={table_id:this.model.tableId,is_switch_table:!0};App.EasyLoading.showOnTimeOut(),this._proxy.fknnGetGameChart(t),this.popupView.showChangeTable()},o.prototype.showRoadMap=function(){var t=this._view.leftTable.horizontalCenter-90;egret.Tween.get(this._view.leftTable).to({horizontalCenter:t},200,egret.Ease.sineInOut)},o.prototype.closeRoadMap=function(){egret.Tween.get(this._view.leftTable).to({horizontalCenter:0},200,egret.Ease.sineInOut)},o.prototype.gameJoin=function(e){Log.log("进入游戏，页面信息显示");var o=this.player;e.user_id==o.getUserId()&&(this._view.setGameScene(e.table_name),this.model.tableId=e.table_id,this.model.isAutoBet=!0,this._view.setAutoConfirm(!0),this.model.userId=e.user_id,this.model.playerMoneys[t.PlayerConst.SELF]=e.balance,this._view.setUserName(e.nick_name),this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[t.PlayerConst.SELF])))},o.prototype.initDesktopData=function(){this._view.cleanOpenAndTurnPoker(),this.model.clearModelData(),this._view.clearCoin(),this._view.initializationcardPos(),App.TimerManager.removeAll(this),this._view.resetBetMoney(),this.model.lastBetRecord.length=0,this.model.lastBetRecord=[],this.model.recordList.length=0,this._view.stopTimer(),this._view.initCoinBox(),this.model._isFlylist.length=0,this.model._isFlylist=[],this._view.stopshuffle(),common.CoinFactory.i.clear(),this.isOpenRepeatBet(),this.betOverCallback(),this._view.cleanwinAndlose(),this._view.setCoordinate(t.FkdnConst.Overweight.yy,t.FkdnConst.Overweight.index,t.FkdnConst.Overweight.isEnd)},o.prototype.setCounterPoints=function(){for(var e=this.model._mTempChipMoney,o=0;o<e.length;o++){var i=e[o];t.PointConst.CLASSIC_POINT["COUNTER_PICK"+i]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+i])}},o.prototype.betPoints=function(){for(var e=this.model.betPoints,o=0;o<e.length;o++){var i=e[o];t.PointConst.CLASSIC_POINT["COUNTER_BET"+i]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+i])}this.model.betPoints.length=0},o.prototype.concerBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL)},o.prototype.repeatBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT)},o.prototype.confirmBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM)},o.prototype.autoBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM)},o.prototype.setCounterBtnPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER)},o.prototype.addCounterPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER)},o.prototype.betPlacePoints=function(e){R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e])},o.prototype.menuPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON)},o.prototype.helpPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON)},o.prototype.gameSetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON)},o.prototype.rankingPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.LEADERBOARD_BUTTON)},o.prototype.winningRecordPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON)},o.prototype.backPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON)},o.prototype.destroy=function(){e.prototype.destroy.call(this),Log.trace("fkdn销毁Controller"),common.StarExpand.cleanFormPool(),common.comBones.cleanFormPool(),t.FkdnBones.cleanFormPool(),App.TimerManager.removeAll(this),R.removeAllTimeOut(this),this.popupView.destroy(),this._proxy.destroy(),this._view.destroy(),this.model.destroy(),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this._view=void 0,this._proxy=void 0,this._gameSet=void 0,this.popupView=void 0},o}(base.GameController);t.GameController=e,__reflect(e.prototype,"fkdn.GameController")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(t){function e(e){var o=t.call(this,e)||this;return o.initData(),o}return __extends(e,t),e.prototype.initData=function(){this.tableType=0,this.isBet=!1,this.betPlace=-1,this.betNum=0,this.isAutoBet=!1,this.preBetList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.betList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.playerMoneys=[0,0,0,0,0,0],this.betMoney=0,this.selBtnIndex=0,this.chipArr=[1,3,5,7,9],this._mTempMultiple=1,this.allBetList=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lastBetRecord=[],this.playerIds=[-1,-1,-1,-1,-1],this.historyRecord=[],this.winPos=[],this.winPlayer=[],this.winMoneys=[0,0,0,0,0],this.hasBet=!1,this.userMoney=0,this.idBet=!1,this.userId=0,this.isBackstage=!1,this.isFly=!1,this.specialMoney={},this._isFlylist=[],this._specialPlayer=[],this.ExchangeMoney=0,this.recordList=[],this.limitBetMoney=0,this.betPoints=[],this.playerPlace=[],this.isRepeat=!1},e.prototype.changeGameChartList=function(){},e.prototype.changerecordList=function(){},e.prototype.clearModelData=function(){this.initData()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"fkdn.GameModel")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),o.prototype.onEnterGame=function(e){Log.trace("收到进入游戏消息:",e),this.applyFunc(t.FkdnCallBackConst.Const_onEnterGameCallBack,e)},o.prototype.onIssueNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onIssueNotifyBack,e)},o.prototype.onLimitNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onLimitNotifyBack,e)},o.prototype.onStateNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onStateNotifyyBack,e)},o.prototype.onExchangeNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onExchangeNotifyBack,e)},o.prototype.onBetResponse=function(e){App.EasyLoading.hideLoading(),this.applyFunc(t.FkdnCallBackConst.onBetResponseBack,e)},o.prototype.onPlayerBetInfoNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onPlayerBetInfoNotifyBack,e)},o.prototype.onGameBetInfoNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onGameBetInfoNotify,e)},o.prototype.onOnLineNum=function(e){this.applyFunc(t.FkdnCallBackConst.onOnlineNumCallBack,e)},o.prototype.onChartNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onChartNotifyBack,e)},o.prototype.onGameResultNotify=function(e){this.applyFunc(t.FkdnCallBackConst.onGameResultNotifyBack,e)},o.prototype.onWinningRecordRes=function(e){this.applyFunc(t.FkdnCallBackConst.onWinningRecordResBack,e)},o.prototype.onrankinglistres=function(e){this.applyFunc(t.FkdnCallBackConst.onrankinglistresBack,e)},o.prototype.onSpecialPlayerResBack=function(e){Log.log("specialPlayer",e),e.table_id==this.model.tableId&&this.applyFunc(t.FkdnCallBackConst.Special_Player,e.special_player)},o.prototype.onSpecialPlayerActionResBack=function(e){Log.log("specialPlayerAction",e),e.table_id==this.model.tableId&&this.applyFunc(t.FkdnCallBackConst.Special_Player_Action,e)},o.prototype.onChipsRecordNotifyBack=function(e){if(Log.log("onChipsRecordNotifyBack",e),e.table_id==this.model.tableId){if(e.chips){var o=JSON.parse(e.chips);t.FkdnChips.i.setChips=o,this.model.chipArr=[].concat(o)}this.applyFunc(t.FkdnCallBackConst.Chips_Record_Notify)}},o.prototype.onGameChartResBack=function(e){Log.log("onGameChartResBack",e),this.applyFunc(t.FkdnCallBackConst.createGameHallChart,e),App.EasyLoading.hideLoading()},o.prototype.onGameStatusNotifyBack=function(e){Log.log("onGameStatusNotifyBack",e),this.applyFunc(t.FkdnCallBackConst.changeGamestaus,e)},o.prototype.onGameChartNotifyBack=function(e){Log.log("onGameChartNotifyBack",e),this.applyFunc(t.FkdnCallBackConst.changeGameChart,e)},o.prototype.onEnterTableResBack=function(e){Log.log("onEnterTableResBack",e),e.is_success&&(this.model.tableId=e.table_id_new,this.applyFunc(t.FkdnCallBackConst.getEnterTableRes,e),App.EasyLoading.hideLoading())},o.prototype.onStateTimeRes=function(e){Log.log("onStateTimeResBack",e),this.applyFunc(t.FkdnCallBackConst.onStateTimeResBack,e)},o.prototype.onHitRateRes=function(e){Log.log("onHitRateResBack",e),this.applyFunc(t.FkdnCallBackConst.onHitRateResBack,e)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.FkdnProxyConst.NET_MSG.ENTER_GAME_R,this.onEnterGame,this),this.addListener(t.FkdnProxyConst.NET_MSG.ISSUE_NOTIFY,this.onIssueNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.LIMIT_NOTIFY,this.onLimitNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.STATENOTIFY,this.onStateNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.EXCHANGE_NOTIFY,this.onExchangeNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.BET_RESPONSE,this.onBetResponse,this),this.addListener(t.FkdnProxyConst.NET_MSG.PLAYER_BET_INFONOTIFY,this.onPlayerBetInfoNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.GAME_BET_INFO_NOTIFY,this.onGameBetInfoNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.FkdnProxyConst.NET_MSG.CHART_NOTIFY,this.onChartNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.GAME_RESULT_NOTIFY,this.onGameResultNotify,this),this.addListener(t.FkdnProxyConst.NET_MSG.WIN_RECORD_RES,this.onWinningRecordRes,this),this.addListener(t.FkdnProxyConst.NET_MSG.RANKING_LIST_RES,this.onrankinglistres,this),this.addListener(t.FkdnProxyConst.NET_MSG.SPECIAL_PLAYER_RES,this.onSpecialPlayerResBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.SPECIAL_PLAYER_ACTION_RES,this.onSpecialPlayerActionResBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.CHIPS_RECORD_NOTIFY,this.onChipsRecordNotifyBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_CHART_RES,this.onGameChartResBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_STATUS_NOTIFY,this.onGameStatusNotifyBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.HALL_CHART_NOTIFY,this.onGameChartNotifyBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.ENTER_TABLE_RES,this.onEnterTableResBack,this),this.addListener(t.FkdnProxyConst.NET_MSG.STATE_TES,this.onStateTimeRes,this),this.addListener(t.FkdnProxyConst.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},o.prototype.fknnRequestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.FkdnProxyConst.NET_MSG.ME_BET,e)},o.prototype.fknnWinRecord=function(t){},o.prototype.fknnRanking=function(e){this.send(t.FkdnProxyConst.NET_MSG.RANKING_LIST_REQ,e)},o.prototype.fknnChartlist=function(t){},o.prototype.fknnRequestChip=function(e){this.send(t.FkdnProxyConst.NET_MSG.CHIPS_RECORD_REQ,e)},o.prototype.fknnGetGameChart=function(e){this.send(t.FkdnProxyConst.NET_MSG.SWITCH_TABLE_REQ,e)},o.prototype.fknnRequestDesk=function(e){this.send(t.FkdnProxyConst.NET_MSG.ENTER_TABLE_REQ,e)},o.prototype.fknnRequestRemainTime=function(){this.send(t.FkdnProxyConst.NET_MSG.STATE_TEQ,{table_id:this.model.tableId})},o.prototype.destroy=function(){e.prototype.destroy.call(this)},o}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"fkdn.GameProxy")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(){function e(){}return e.getPoints=function(t){for(var e=[],o=0;5>o;o++){var i=t.getChildAt(o),n=Math.floor(o%5),s=0;0!=n&&(s=n>2?-12:0);var r={x:i.x,y:i.y,_y:i.y+s};e.push(r)}return e},e.dealCard=function(t,e,o,i){var n=0;if(1==i)for(var s=0;5>s;s++){var r=t[s];this.pieceDealCard(r,e,o,n),n++}else for(var a=5;10>a;a++){var r=t[a];this.pieceDealCard(r,e,o,n),n++}},e.pieceDealCard=function(e,o,i,n){5>n&&(egret.Tween.removeTweens(e),egret.Tween.get(e).wait(i*n*1.5).to({x:o[e.name].x,y:o[e.name].y,scaleX:1,scaleY:1,alpha:1,rotation:0},i).call(function(){App.SoundManager.playEffect(t.SoundConst.DEAL)}))},e.textReminder=function(e,o,i){var n=null;switch(e){case t.FkdnBetResultCode.BetErrorPlace:n="下注位置错误";break;case t.FkdnBetResultCode.BetErrorMoney:n="下注金额异常";break;case t.FkdnBetResultCode.BetErrorState:n="非投注阶段，请稍后";break;case t.FkdnBetResultCode.BetErrorOutLimitMin:n="当前投注限红为"+o+"~"+i;break;case t.FkdnBetResultCode.BetErrorOutLimitMax:n=i?"当前投注限红为"+o+"~"+i:"超过限红，投注失败";break;case t.FkdnBetResultCode.BetErrorOutLimitTotal:n="当前投注项已达到总限红,投注失败!";break;case t.FkdnBetResultCode.BetErrorNoEnoughMoney:n="没有足够的余额";break;case t.FkdnBetResultCode.BetErrorNULL:n="下注为空"}App.ScrollTxtTips.showTip(n)},e}();t.FkdnUtil=e,__reflect(e.prototype,"fkdn.FkdnUtil")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"fkdn","GameSkin")||this;return o._approach=null,o.BetBox.initComponent(t),o.JeButton.initComponent(t),o.LoginBtn.initComponent(t),o.ToolBar.initComponent(t),o.CardView.initComponent(t),o.ChartView.initComponent(t),o}return __extends(o,e),o.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t;this.Timer.open(),this.CardView.open(),this.LoginBtn.open(),this.MsgInfo.allPlayerDisplay(),this.initInfo(),this.MsgInfo.setPluteLelf(),this.setCardPos(),this.BetBox.hideTableLight(),this.ToolBar.reChargeEffect(),this.ToolBar.setOnlineLelf(),this.initChangeTableBone(),this.BetBox.createHeadPosition(),this.BetBox.setIsBetList(),this.BetBox.setTouchBtnAlpha(),this.disabledRepeatBet(),this.clearNum(),this.tableOdds(),this.initBroadcast(this),this.btnRedPacket=RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},o.prototype.displayUI=function(){},o.prototype.tableOdds=function(){var e=t.FkdnHitRate.i.HitRate;this.BeilvLong.text=null==e?"":e,this.BeilvHu.text=null==e?"":e},o.prototype.initInfo=function(){this.MsgInfo.initInfo()},o.prototype.setGameScene=function(t){this.TableName.text=t},o.prototype.setUserInfo=function(t){this.setUserName(t.getNickName()),this.MsgInfo.setUserImage("ui_headImg_"+t.getAvatar()),this.MsgInfo.setUserFrame("ui_headBox_"+t.getAvatarBox()),this.setUserMoney(App.CommonUtils.money2Str(t.getMoney()))},o.prototype.setUserName=function(t){this.MsgInfo.setUserName(t)},o.prototype.setInformation=function(t){var e=t.nick_name,o="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),i=App.CommonUtils.money(t.balance),n=t.play_role;this.MsgInfo.setPluteImage(o,n),this.MsgInfo.setPluteName(e,n),this.specialPlayerMoney(i,n),this.MsgInfo.playerDisplay(n)},o.prototype.changeOnlineNum=function(t){this.ToolBar.changeOnlineNum(""+t)},o.prototype.setUserBet=function(t){this.MsgInfo.setUserBet(""+t)},o.prototype.playerDisplay=function(t){this.MsgInfo.playerDisplay(t)},o.prototype.setPluteImage=function(t,e){this.MsgInfo.setPluteImage(t,e)},o.prototype.setPluteName=function(t,e){this.MsgInfo.setPluteName(t,e)},o.prototype.specialPlayerMoney=function(t,e){this.MsgInfo.specialPlayerMoney(t,e)},o.prototype.avatarShake=function(t){this.MsgInfo.avatarShake(t)},o.prototype.setAutoConfirm=function(t){this.LoginBtn.setAutoConfirm(t)},o.prototype.starFly=function(t){var e=this.MsgInfo.getPoint(),o=this.BetBox.getParabolicPoint(t),i=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,o,i,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},o.prototype.showStar=function(t){this.BetBox.showStar(t)},o.prototype.hideStar=function(){this.BetBox.hideStar()},o.prototype.setUserMoney=function(t){this.MsgInfo.setUserMoney(t)},o.prototype.setClassicIssue=function(t){this.ClassicIssue.text="期号 : "+t},o.prototype.cleanwinAndlose=function(){this.CardView.cleanwinAndlose()},o.prototype.setJeButton=function(t){this.JeButton.createChip(t),this.setchipValue(1)},o.prototype.createChip=function(t){this.JeButton.createChip(t)},o.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},o.prototype.betStartAni=function(){this.BetAnimation.playAni(0,"fkdn")},o.prototype.betStopAni=function(){this.BetAnimation.playAni(1)},o.prototype.startTimer=function(t){this.Timer.startTimer(t)},o.prototype.showTimer=function(){this.Timer.showTimer()},o.prototype.hideTimer=function(){this.Timer.hideTimer()},o.prototype.stopTimer=function(){this.Timer.stopTimer()},o.prototype.toggleBtn=function(t){this.JeButton.toggleBtn(t)},o.prototype.directFapai=function(){this.CardView.directFapai()},o.prototype.getcardsrc=function(t){this.CardView.getcardsrc(t)},o.prototype.resetBetMoney=function(){this.MsgInfo.resetBetMoney()},o.prototype.setCoordinate=function(t,e,o){this.LoginBtn.setCoordinate(t,e,o)},o.prototype.setBtnChip=function(t){this.JeButton.setBtnChip(t)},o.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new common.Shuffle,this.GroupShuffle.addChild(this.shuffle));var e=this;this.GroupShuffle.visible=!0;var o=0,i=0,n=0,s=-210;this.shuffle.updateId("wash",o,i,n,s,t.SoundConst.CARD_WASH,0,.5,.5),this.shuffle.addPlayEndCallBack(function(){e.shuffle&&e.shuffle.parent&&(e.stopshuffle(),e.dealCard())},this)},o.prototype.stopshuffle=function(){this.shuffle&&this.shuffle.stopshuffle(),this.GroupShuffle.visible=!1},o.prototype.clearShuffle=function(){this.shuffle&&(egret.Tween.removeTweens(this.shuffle),this.shuffle.destroy(),this.shuffle=void 0)},o.prototype.setCardPos=function(){this.CardView.setCardPos()},o.prototype.dealCard=function(){this.CardView.dealCard()},o.prototype.kaipaiAnimation=function(t){this.CardView.kaipaiAnimation(t)},o.prototype.directKaipai=function(t){this.CardView.directKaipai(t)},o.prototype.runWinner=function(t,e){void 0===e&&(e=!1),this.CardView.runWinner(t,e)},o.prototype.showWinner=function(t){this.CardView.showWinner(t)},o.prototype.clearCard=function(){this.CardView.clearCard()},o.prototype.initializationcardPos=function(){this.CardView.initializationcardPos()},o.prototype.cleanOpenAndTurnPoker=function(){this.CardView.cleanOpenAndTurnPoker()},o.prototype.stopRegion=function(){this.BetBox.stopRegion()},o.prototype.startRegion=function(){this.BetBox.startRegion()},o.prototype.clearWinner=function(){this.CardView.clearWinner()},o.prototype.showBetMoney=function(t){this.BetBox.showBetMoney(t)},o.prototype.showSelfBet=function(t){this.BetBox.showSelfBet(t)},o.prototype.showMyPreBet=function(t){this.BetBox.showMyPreBet(t)},o.prototype.initCoinBox=function(){this.BetBox.initCoinBox()},o.prototype.playerWinMoney=function(t,e){this.MsgInfo.playerWinMoney(App.CommonUtils.money2Str(t),e)},o.prototype.betToPlaceAni=function(t,e,o){this.BetBox.betToPlaceAni(t,e,o)},o.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},o.prototype.numFkdnShake=function(t){this.BetBox.numFkdnShake(t)},o.prototype.getAllMoneyLight=function(){this.ToolBar.getAllMoneyLight()},o.prototype.coinAniClear=function(t,e){var o=e,i=this;o.length&&(this.BetBox.coinAniClear(t),R.setTimeOnce(function(){for(var t=0;t<o.length;t++){var e=o[t];5==e?i.getAllMoneyLight():i.MsgInfo.getMoneyLight(e)}},this,600))},o.prototype.moneyLight=function(t){var e=t;if(e.length)for(var o=0;o<e.length;o++){var i=e[o];this.MsgInfo.getMoneyLight(i)}},o.prototype.directFontEnlarge=function(t){this.MsgInfo.directFontEnlarge(t)},o.prototype.clearCoin=function(){this.BetBox.clearCoin()},o.prototype.clearNum=function(){this.BetBox.clearNum()},o.prototype.clearPreMoney=function(){this.BetBox.clearPreMoney()},o.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},o.prototype.directTableLight=function(t){this.BetBox.directTableLight(t)},o.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},o.prototype.renderChart=function(t,e){this.ChartView.renderChart(t,e)},o.prototype.enabledConfirmBet=function(){this.LoginBtn.enabledConfirmBet()},o.prototype.enabledConserBet=function(){this.LoginBtn.enabledConserBet()},o.prototype.enabledRepeatBet=function(){this.LoginBtn.enabledRepeatBet()},o.prototype.disabledConfirmBet=function(){this.LoginBtn.disabledConfirmBet()},o.prototype.disabledRepeatBet=function(){this.LoginBtn.disabledRepeatBet()},o.prototype.disabledConserBet=function(){this.LoginBtn.disabledConserBet()},o.prototype.onlineShake=function(){this.ToolBar.onlineShake()},o.prototype.disabledBtn=function(){this.LoginBtn.disabledRepeatBet(),this.LoginBtn.disabledConfirmBet(),this.LoginBtn.disabledConserBet()},o.prototype.enabledBtn=function(){this.LoginBtn.enabledRepeatBet(),this.LoginBtn.enabledConfirmBet(),this.LoginBtn.enabledConserBet()},o.prototype.closeConfirmFrame=function(){this.LoginBtn.closeConfirmFrame()},o.prototype.cleanChip=function(){this.BetBox.cleanChip()},o.prototype.clearFlyWinChip=function(){this.BetBox.clearFlyWinChip()},o.prototype.initChangeTableBone=function(){this._approach||(this._approach=new t.FkdnBones,this.ChangeTableBox.addChild(this._approach)),this._approach.updateId("table"),this._approach.play(0)},o.prototype.onChangeTableHandler=function(){egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:0},80).call(function(){this.applyFunc(t.FkdnCallBacks.onChangeTableMenu)},this),App.SoundManager.playEffect("click_mp3")},o.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket.play(RedPackBone.Animation1),App.SoundManager.playEffect("click_mp3")},o.prototype.RedPackNotify=function(){this.btnRedPacket.play(RedPackBone.Animation)},o.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(RedPackBone.Animation1)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BetBox.addEvent(),this.ChartView.addEvent(),this.ChangeTableBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BetBox.removeEvent(),this.ChartView.removeEvent(),this.ChangeTableBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),Log.trace("fkdn销毁GameView"),this.BetBox.destroy(),this.JeButton.destroy(),this.LoginBtn.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.ChartView.destroy(),this.Timer.destroy(),this.MsgInfo.destroy(),this._approach&&(egret.Tween.removeTweens(this._approach),this._approach.destroy()))
},o}(base.GameView);t.GameView=e,__reflect(e.prototype,"fkdn.GameView")}(fkdn||(fkdn={}));var fkdn;!function(t){var e=function(t){function e(e){var o=t.call(this,e,LayerManager.UI_Popup,"fkdn","PopSkin")||this;return o.SetChip.initComponent(e),o.Prompt.initComponent(e),o.ChangeTable.initComponent(e),o.ChangeTable.getTableList().initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){this.SetChip.getcoordinate(),this.SetChip.createChip(),this.Help.initUI(),this.ChangeTable.initUI(),this.LotteryRecord.initUI()},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.SetChip.addEvent(),this.ChangeTable.addEvent(),this.LotteryRecord.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.SetChip.removeEvent(),this.ChangeTable.removeEvent(),this.LotteryRecord.removeEvent()},e.prototype.showChipSet=function(){this.SetChip.showMenu()},e.prototype.setDefaultChip=function(t){this.SetChip.setDefaultChip(t)},e.prototype.initGameSet=function(){this.GameSet.initSet()},e.prototype.showHelp=function(){this.Help.showPopup(!0)},e.prototype.showGameSet=function(){this.GameSet.showPopup()},e.prototype.showWinRecord=function(){this.WinningRecord.showPopup()},e.prototype.renderWinRecord=function(t){this.WinningRecord.rankData(t)},e.prototype.showRanking=function(){this.Ranking.showPopup()},e.prototype.renderRanking=function(t){this.Ranking.rankData(t)},e.prototype.showLotteryRecord=function(){this.LotteryRecord.showPopup()},e.prototype.renderLotteryRecord=function(t){this.LotteryRecord.refreshData(t)},e.prototype.showPrompt=function(t,e,o,i){this.Prompt.showPrompt(t,e,o,i)},e.prototype.showPromptBrnn=function(t,e){this.Prompt.showPromptBrnn(t,e)},e.prototype.showChangeTable=function(){this.ChangeTable.showPopup()},e.prototype.closeChangeTable=function(){this.ChangeTable.closePoput()},e.prototype.createTableList=function(t,e){this.ChangeTable.createList(t,e)},e.prototype.insertState=function(t){this.ChangeTable.insertState(t)},e.prototype.insertChart=function(t){this.ChangeTable.insertChart(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.log("fkdn销毁PopView"),this.SetChip.destroy(),this.Prompt.destroy(),this.ChangeTable.destroy(),this.GameSet.destroy(),this.Help.destroy(),this.Ranking.destroy(),this.WinningRecord.destroy()},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"fkdn.PopView")}(fkdn||(fkdn={}));