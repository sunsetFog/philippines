var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},hhdz;!function(t){var e;!function(t){t[t.Base=1400]="Base",t[t.Popup=1401]="Popup",t[t.Recharge=1402]="Recharge"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.LEAVE_GAME=10104]="LEAVE_GAME",t[t.LEAVE_GAME_R=10105]="LEAVE_GAME_R",t[t.ONLINE_COUNT_R=10402]="ONLINE_COUNT_R",t[t.ISSUE_N=10403]="ISSUE_N",t[t.GAME_STATE_R=10404]="GAME_STATE_R",t[t.LIMIT_N=10405]="LIMIT_N",t[t.ME_BET=10406]="ME_BET",t[t.ME_BET_R=10407]="ME_BET_R",t[t.PLAYER_BET_R=10408]="PLAYER_BET_R",t[t.GAME_BET_R=10409]="GAME_BET_R",t[t.GAME_RESULT_R=10410]="GAME_RESULT_R",t[t.EXCHANGE_R=10411]="EXCHANGE_R",t[t.CHART_R=10412]="CHART_R",t[t.RANKING=10415]="RANKING",t[t.RANKING_R=10416]="RANKING_R",t[t.SPECIAL_PLAYER_N=10419]="SPECIAL_PLAYER_N",t[t.BET_ACTION_N=10420]="BET_ACTION_N",t[t.CHIPS_RECORD_Q=10421]="CHIPS_RECORD_Q",t[t.CHIPS_RECORD_R=10422]="CHIPS_RECORD_R",t[t.REMAIN_TIME_Q=10425]="REMAIN_TIME_Q",t[t.REMAIN_TIEM_R=10426]="REMAIN_TIEM_R",t[t.HITRATE_N=10427]="HITRATE_N"}(i=t.ProxyConst||(t.ProxyConst={}));var o;!function(t){t[t.onGameStateCallBack=1001]="onGameStateCallBack",t[t.onChartCallBack=1002]="onChartCallBack",t[t.onGameResultCallBack=1003]="onGameResultCallBack",t[t.onOnlineCountCallBack=1004]="onOnlineCountCallBack",t[t.onPlayerBetCallBack=1005]="onPlayerBetCallBack",t[t.onSelfBetCallBack=1006]="onSelfBetCallBack",t[t.onGameBetCallBack=1007]="onGameBetCallBack",t[t.onExchangeCallBack=1008]="onExchangeCallBack",t[t.onRankingCallBack=1009]="onRankingCallBack",t[t.onWinningRecordCallBack=1010]="onWinningRecordCallBack",t[t.onLeaveGameCallBack=1011]="onLeaveGameCallBack",t[t.onBetActionCallBack=1012]="onBetActionCallBack",t[t.onSpecialPlayerCallBack=1013]="onSpecialPlayerCallBack",t[t.onChipsRecordCallBack=1014]="onChipsRecordCallBack",t[t.onIssueCallBack=1015]="onIssueCallBack",t[t.onRemainTimeCallBack=1016]="onRemainTimeCallBack",t[t.onHitrateCallBack=1017]="onHitrateCallBack",t[t.dealCard=1018]="dealCard"}(o=t.CallBacks||(t.CallBacks={}));var n;!function(t){t[t.BETTING=1]="BETTING",t[t.EXCHANGE=2]="EXCHANGE"}(n=t.GameState||(t.GameState={}));var s;!function(t){t[t.RED=0]="RED",t[t.BLACK=1]="BLACK",t[t.LUCKY=2]="LUCKY"}(s=t.PlaceConst||(t.PlaceConst={}));var h;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(h=t.PlayerConst||(t.PlayerConst={}));var r=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额未达到最低限红","不在下注状态","超出单人最高限红","超出该投注区域最高限红","没有足够的余额"],t}();t.CodeErrorTxt=r,__reflect(r.prototype,"hhdz.CodeErrorTxt");var a=function(){function t(){}return t.TypeTxt_LIST=["单 张","对 子","顺 子","金 花","顺 金","豹 子"],t}();t.CardTypeTxt=a,__reflect(a.prototype,"hhdz.CardTypeTxt");var l=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"HHDZcounter_pick1",COUNTER_PICK5:"HHDZcounter_pick5",COUNTER_PICK10:"HHDZcounter_pick10",COUNTER_PICK20:"HHDZcounter_pick20",COUNTER_PICK50:"HHDZcounter_pick50",COUNTER_PICK100:"HHDZcounter_pick100",COUNTER_PICK200:"HHDZcounter_pick200",COUNTER_PICK500:"HHDZcounter_pick500",COUNTER_PICK1000:"HHDZcounter_pick1000",COUNTER_PICK0:"HHDZcounter_pickAllin",COUNTER_BET1:"HHDZcounter_bet1",COUNTER_BET5:"HHDZcounter_bet5",COUNTER_BET10:"HHDZcounter_bet10",COUNTER_BET20:"HHDZcounter_bet20",COUNTER_BET50:"HHDZcounter_bet50",COUNTER_BET100:"HHDZcounter_bet100",COUNTER_BET200:"HHDZcounter_bet200",COUNTER_BET500:"HHDZcounter_bet500",COUNTER_BET1000:"HHDZcounter_bet1000",COUNTER_BET0:"HHDZcounter_betallin",OPERATE_BUTTONCANCEL:"HHDZoperate_buttoncancel",OPERATE_BUTTONREPEAT:"HHDZoperate_buttonrepeat",OPERATE_BUTTONCONFIRM:"HHDZoperate_buttonconfirm",OPERATE_AUTOCONFIRM:"HHDZoperate_autoconfirm",OPERATE_SETCOUNTER:"HHDZoperate_setcounter",OPERATE_ADDCOUNTER:"HHDZoperate_addcounter",BETS_0:"HHDZbets_red",BETS_1:"HHDZbets_black",BETS_2:"HHDZbets_luck",DIRECT_MAPS:"HHDZdirect_maps",LEADERBOARD_BUTTON:"HHDZleaderboard_button",MENU_BUTTON:"HHDZmenu_button",MENU_HELP_BUTTON:"HHDZmenu_help_button",MENU_SET_BUTTON:"HHDZmenu_set_button",MENU_RECORD_BUTTON:"HHDZmenu_record_button",MENU_BACK_BUTTON:"HHDZmenu_back_button"},t}();t.PointConst=l,__reflect(l.prototype,"hhdz.PointConst")}(hhdz||(hhdz={}));var hhdz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.hhdz=i,__reflect(i.prototype,"hhdz.Entrance.hhdz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"BetBtn")||this;return i.coinBox=[],i.winpos=[],i.allChipList=[],i}return __extends(i,e),i.prototype.betBlack=function(){this.applyFunc("bet",1)},i.prototype.betRed=function(){this.applyFunc("bet",0)},i.prototype.betLucky=function(){this.applyFunc("bet",2)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.showBetMoney=function(e){var i=Math.floor(App.CommonUtils.money(e[t.PlaceConst.RED])),o=Math.floor(App.CommonUtils.money(e[t.PlaceConst.BLACK])),n=Math.floor(App.CommonUtils.money(e[t.PlaceConst.LUCKY]));this.TotalBetRed.text=i?""+i:"",this.TotalBetBlack.text=o?""+o:"",this.TotalBetLucky.text=n?""+n:"";for(var s=0;s<e.length;s++){var h=Math.floor(App.CommonUtils.money(e[s]));h&&(this["isBet_"+s]=!0,this.showCoin(s,h))}},i.prototype.showCoin=function(e,i){var o=t.Application.getNumObj(i),n=Object.keys(o),s=1==e?this.CoinBoxBlack1:0==e?this.CoinBoxRed1:this.CoinBoxLucky1,h=1==e?this.CoinBoxBlack2:0==e?this.CoinBoxRed2:this.CoinBoxLucky2,r=1==e?this.CoinBoxBlack3:0==e?this.CoinBoxRed3:this.CoinBoxLucky3;this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,h):(h.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,r):(r.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0)},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_10_png",n=1e5;break;case"w":s="common_ui_4_png",n=1e4;break;case"q":s="common_ui_8_png",n=1e3;break;case"b":s="common_ui_5_png",n=100;break;case"s":s="common_ui_2_png",n=10;break;case"g":s="common_ui_0_png",n=1}for(var h=0,r=-60,a=0,l=[],c=0;i>c;c++){var p=common.CoinFactory.i.createCoin();p.refresh(s,n,h,r),p.alpha=0,l.push(p),t.addChild(p)}l.forEach(function(t,e){if(0==o._currentY)a=0;else if(this.randomNum()>.65){var i=this.randomNum();a=i>.5?2:-2}else a=0;egret.Tween.get(l[e]).wait(150*e).to({y:o._currentY,x:a},150,egret.Ease.sineInOut),function(t){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[t].alpha=1},this,150*t)}(e),o._currentY-=5}.bind(this))},i.prototype.randomNum=function(){return Math.random()},i.prototype.coinFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];egret.Tween.get(o).to({alpha:0},120)}}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];o.alpha=1}}.bind(this))},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.createWinChip=function(e,i){var o=e==t.PlaceConst.BLACK?"Black":e==t.PlaceConst.RED?"Red":"Lucky";if(this["isBet_"+e]){var n=this["BetBox"+o],s=this["ChipPos"+e],h=void 0,r=void 0;h=App.StageUtils.getWidth()/2+s.horizontalCenter,r=App.StageUtils.getHeight()-s.bottom-s.height;for(var a=this.winpos[i],l=this.GroupChip.globalToLocal(a.x,a.y),c=0;5>c;c++){var p=App.MathUtils.random(0,n.width),d=App.MathUtils.random(0,n.height),u=common.chipBtn.create();u.init(c),u.setNameNum(i);var _=Math.floor(h+p),C=Math.floor(r+d),y=Math.floor(l.x),m=Math.floor(l.y);this.GroupChip.addChild(u),u.x=n.x+n.width/2,u.y=n.y+n.height/2,u.scaleX=.5,u.scaleY=.5,u.alpha=0,u.setScore(),u.setFlyX(_),u.setFlyY(C),u.setFlyChipX(y),u.setFlyChipY(m),this.allChipList.push(u)}}},i.prototype.betToPlaceAni=function(t,e,i){base.GameCoinMgr.i.flyToPlace(t,this["BetPoint_"+e],i,this.winpos,this.GroupChip)},i.prototype.cleanChip=function(){base.GameCoinMgr.i.clean()},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()})},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.clearCoin=function(){for(var t=1;4>t;t++)this.removeCoins(this["CoinBoxBlack"+t]),this.removeCoins(this["CoinBoxRed"+t]),this.removeCoins(this["CoinBoxLucky"+t]);this.isBet_0=!1,this.isBet_1=!1,this.isBet_2=!1,this.TotalBetBlack.text="",this.TotalBetRed.text="",this.TotalBetLucky.text="",this.MyBetBlack.text="",this.MyBetRed.text="",this.MyBetLucky.text="",this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,150)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.showMyPreBet=function(e){this.MyPreBetRed.text=e[t.PlaceConst.RED]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])):"",this.MyPreBetBlack.text=e[t.PlaceConst.BLACK]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])):"",this.MyPreBetLucky.text=e[t.PlaceConst.LUCKY]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY])):""},i.prototype.showSelfBet=function(e){var i=Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])),o=Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])),n=Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY]));this.MyBetRed.text=i?""+i:"",this.MyBetBlack.text=o?""+o:"",this.MyBetLucky.text=n?""+n:""},i.prototype.clearPreBet=function(){this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){this.StarPos_0.visible=!1,this.StarPos_1.visible=!1,this.StarPos_2.visible=!1},i.prototype.hideTableLight=function(){this.TouchBlack.alpha=0,this.TouchRed.alpha=0,this.TouchLucky.alpha=0},i.prototype.showTableLight=function(e){e.forEach(function(e){var i=e==t.PlaceConst.RED?"Red":e==t.PlaceConst.BLACK?"Black":"Lucky",o=this["Touch"+i];egret.Tween.get(o).wait(0).to({alpha:1},0),egret.Tween.get(o).wait(100).to({alpha:.7},400),egret.Tween.get(o).wait(550).to({alpha:1},0),egret.Tween.get(o).wait(650).to({alpha:.7},400),egret.Tween.get(o).wait(1050).to({alpha:1},0)}.bind(this))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.TouchBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.removeEvent=function(){this.TouchBlack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),this.removeEvent(),this.clearFlyWinChip(),this.cleanChip(),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.coinBox=void 0,this.winpos=void 0,this.allChipList=void 0},i}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"hhdz.BetBox")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initComponent=function(e){t.prototype.initComponent.call(this,e),this.JeButton.initComponent(e),this._LogicBtn=new common.LoginBtn(null),this._LogicBtn.initComponent(e,this),this._LogicBtn.bottom=this._LogicBtn.right=0},e.prototype.open=function(){this._LogicBtn.open()},e.prototype.serJeButtonData=function(t){this.JeButton.createChip(t),this.setchipValue(1)},e.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},Object.defineProperty(e.prototype,"LogicBtn",{get:function(){return this._LogicBtn},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this._LogicBtn.destroy(),this._LogicBtn=void 0)},e}(BaseEuiComponent);t.BottomView=e,__reflect(e.prototype,"hhdz.BottomView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardSkin")||this;return t.WAIT_CARD_TIME=350,t.blackList=[],t.redList=[],t}return __extends(i,e),i.prototype.clearCard=function(){this.blackList&&this.blackList.length&&(this.blackList.forEach(function(t){t.parent&&(egret.Tween.removeTweens(t),t.parent.removeChild(t))}),this.blackList.length=0),this.redList&&this.redList.length&&(this.redList.forEach(function(t){t.parent&&(egret.Tween.removeTweens(t),t.parent.removeChild(t))}),this.redList.length=0),this.CardTypeBlack.alpha=0,this.CardTypeRed.alpha=0},i.prototype.dealCard=function(e){this.initPoint();for(var i=0;6>i;i++){var o=new eui.Image;o.source="common_ui_cardback_png",o.scaleX=.5,o.scaleY=.5,3>i?(o.x=this.blackPoint.x,o.y=this.blackPoint.y,this.GroupCardBlack.addChild(o),this.blackList.push(o)):(o.x=this.redPoint.x,o.y=this.redPoint.y,this.GroupCardRed.addChild(o),this.redList.push(o))}e?(t.Application.dealCard(this.blackList,this.blackPoints,this.WAIT_CARD_TIME),App.TimerManager.doTimer(this.WAIT_CARD_TIME/2,1,this.dealRed,this)):(t.Application.showCard(this.blackList,this.blackPoints),t.Application.showCard(this.redList,this.redPoints))},i.prototype.dealRed=function(){t.Application.dealCard(this.redList,this.redPoints,this.WAIT_CARD_TIME)},i.prototype.opencard=function(e,i,o){var n="black"==i?this.blackList:"red"==i?this.redList:"";o?t.Application.openCard(e,n,this.WAIT_CARD_TIME):t.Application.openCardInstant(e,n)},i.prototype.showCardType=function(t,e){var i="black"==t?this.CardTypeBlack:"red"==t?this.CardTypeRed:"",o="black"==t?this.CardTypeSourceBlack:this.CardTypeSourceRed,n=0==e?"single_mp3":1==e?"pairs_mp3":2==e?"pairs_mp3":3==e?"straight_mp3":4==e?"gold_flower_mp3":5==e?"straight_gold_mp3":"panther_mp3";o.source=0==e?"ui_card_type_json.redblank-ui-danzhang":1==e?"ui_card_type_json.redblank-ui-duizi":2==e?"ui_card_type_json.redblank-ui-duizi":3==e?"ui_card_type_json.redblank-ui-shunzi":4==e?"ui_card_type_json.redblank-ui-jinhua":5==e?"ui_card_type_json.redblank-ui-shunjin":"ui_card_type_json.redblank-ui-baozi",App.SoundManager.playEffect(n),egret.Tween.get(i).to({alpha:1},200,egret.Ease.sineInOut)},i.prototype.showWinner=function(t){this.WinnerBox.scaleX=0,this.WinnerBox.scaleY=0,this.WinnerBox.alpha=1,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0),egret.Tween.get(this.WinnerBox).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},i.prototype.showWinnerPromp=function(t){this.WinnerBox.scaleX=1,this.WinnerBox.scaleY=1,this.WinnerBox.alpha=0,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0)},i.prototype.hideWinner=function(){this.WinnerBox.alpha=0},i.prototype.initPoint=function(){var e=this.GroupDeal.localToGlobal(this.GroupDeal.getChildAt(0).x,this.GroupDeal.getChildAt(0).y);this.blackPoint=this.GroupCardBlack.globalToLocal(e.x,e.y),this.redPoint=this.GroupCardRed.globalToLocal(e.x,e.y),this.blackPoints=t.Application.getPoints(this.GroupCardBlack),this.redPoints=t.Application.getPoints(this.GroupCardRed)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.clearCard(),this.blackList=void 0,this.redList=void 0,this.blackPoint=void 0,this.redPoint=void 0,this.blackPoints=void 0,this.redPoints=void 0},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"hhdz.CardView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ChartSkin")||this;return i.record=[],i.detailRecord=[],i}return __extends(i,e),i.prototype.setIssue=function(t){this.Issue.text=t+"期"},i.prototype.showChart=function(t){this.record.length=0,this.record=JSON.parse(JSON.stringify(t)),this.record.compare_values.length>22&&this.record.compare_values.splice(0,this.record.compare_values.length-22),this.record.open_types.length>7&&this.record.open_types.splice(0,this.record.open_types.length-7),this.CompareBox.removeChildren(),this.OpenTypeBox.removeChildren(),this.OpenTypeTextBox.removeChildren();var e=0,i=2,o=0,n=0,s=20,h=1;this.record.compare_values.forEach(function(t){var o=new eui.Image;o.x=e,o.y=i,o.source=1==t?RES.getRes("honghei_ui_hongquan"):RES.getRes("honghei_ui_heiquan"),e+=26,this.CompareBox.addChild(o)}.bind(this)),this.record.open_types.forEach(function(t){var e=new eui.Image;e.x=o,e.y=n,0==t||1==t?e.source=RES.getRes("honghei_ui_leixing1"):e.source=RES.getRes("honghei_ui_leixing2"),this.OpenTypeBox.addChild(e);var i=new eui.Image;i.x=s,i.y=h,2>t?i.source=RES.getRes("honghei_ui_cardType"+t):i.source=RES.getRes("honghei_ui_cardType"+(t-1)),this.OpenTypeTextBox.addChild(i),o+=82,s+=82}.bind(this))},i.prototype.renderChartDetail=function(t){this.detailRecord.length=0,this.winRedCount=0,this.winBlackCount=0,this.allCount=0;for(var e=0;e<t.length;e++)this.detailRecord[e]=1==t[e]?0:1;if(this.detailRecord.length){this.detailRecord.length>60&&this.detailRecord.splice(0,60),this.detailRecord.forEach(function(t){0==t?this.winRedCount+=1:this.winBlackCount+=1}.bind(this)),this.allCount=this.detailRecord.length,this.setWinCountRed(this.winRedCount),this.setWinCountBlack(this.winBlackCount),this.setCountAll(this.allCount),this.ChartBead.renderBead(this.detailRecord,"hhdz",111),this.ChartOther.renderOtherChart(this.detailRecord,"hhdz",111);var i=this.ChartOther.getAskRoad(0),o=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(i),this.renderBlackAskRoad(o)}},i.prototype.renderRedAskRoad=function(t){this.RedAskRoad.removeChildren(),this.renderAskRoad(t,this.RedAskRoad)},i.prototype.renderBlackAskRoad=function(t){this.BlackAskRoad.removeChildren(),this.renderAskRoad(t,this.BlackAskRoad)},i.prototype.renderAskRoad=function(t,e){if(t.length){var i=new eui.Image;i.x=0,i.y=2,i.source=RES.getRes("hhdz_ui_dyl_"+t[0]),e.addChild(i)}if(t.length>1){var i=new eui.Image;i.x=12,i.y=2,i.source=RES.getRes("hhdz_ui_xl_"+t[1]),e.addChild(i)}if(t.length>2){var i=new eui.Image;i.x=24,i.y=2,i.source=RES.getRes("hhdz_ui_xql_"+t[2]),e.addChild(i)}},i.prototype.setWinCountRed=function(t){this.CountRed.text=t},i.prototype.setWinCountBlack=function(t){this.CountBlack.text=t},i.prototype.setCountAll=function(t){this.CountAll.text=t},i.prototype.openApproach=function(){egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut),R.sendPlayerAction(t.PointConst.CLASSIC_POINT.DIRECT_MAPS)},i.prototype.closeApproach=function(){egret.Tween.get(this.GroupChart).to({right:-277},200,egret.Ease.sineInOut)},i.prototype.hideApproach=function(){this.GroupChart.right=-277},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openApproach,this),this.BtnCloseChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeApproach,this)},i.prototype.removeEvent=function(){this.BtnChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openApproach,this),this.BtnCloseChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeApproach,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),common.BeadFactory.i.clear(),this.record=void 0,this.detailRecord=void 0,this.removeEvent()},i}(BaseEuiComponent);t.Chart=e,__reflect(e.prototype,"hhdz.Chart")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HhdzHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},e.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<24?e.scrollV=0:t.localY>e.height-24?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-48)*(t.localY-24)},e.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},e.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"hhdz.Help")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"TimeClockSkin")||this;return console.log(t),i}return __extends(i,e),i.prototype.startTime=function(t){this._currentSecond=t.time,this._currentStatus=t.status,t.time&&(this.TimeLbL.text=t.time,App.TimerManager.doTimer(1e3,0,this.timerFunc,this))},i.prototype.showTime=function(){this.GroupClock.alpha=1},i.prototype.timerFunc=function(){this._currentSecond?(this._currentSecond--,this.TimeLbL.text=""+this._currentSecond,this._currentStatus==t.GameState.BETTING&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+"",this._currentSecond<4&&(App.SoundManager.playEffect("countdown_mp3"),this.numShake()))):(App.TimerManager.remove(this.timerFunc,this),this.GroupClock.alpha=0)},i.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.removeTime=function(){App.TimerManager.remove(this.timerFunc,this),this.TimeLbL.scaleX=this.TimeLbL.scaleY=1,this.GroupClock.alpha=0},i.prototype.hideTime=function(){this.TimeLbL.scaleX=this.TimeLbL.scaleY=1,this.GroupClock.alpha=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeTime()},i}(BaseEuiComponent);t.TimeClockView=e,__reflect(e.prototype,"hhdz.TimeClockView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,-1),this.setState(e.ACTION_WASH),App.SoundManager.playEffect("cardwash_mp3")},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:-270,scaleX:.5,scaleY:.5},400,egret.Ease.sineInOut).call(function(){this.alpha=0,this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)}.bind(this))},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.prototype.die=function(){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"hhdz.Shuffle")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._mTempMultiple=1,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.addEventListeners(),this.addDataListeners(),this.registers(),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._hhdzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._hhdzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this._hhdzModel.isBackstage=!1},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("clearTable",this.clearTable,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc(t.CallBacks.onGameStateCallBack,this.onGameStateCallBack,this),this.registerFunc(t.CallBacks.onIssueCallBack,this.onIssueCallBack,this),this.registerFunc(t.CallBacks.onChartCallBack,this.onChartCallBack,this),this.registerFunc(t.CallBacks.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.CallBacks.onOnlineCountCallBack,this.onOnlineCountCallBack,this),this.registerFunc(t.CallBacks.onPlayerBetCallBack,this.onPlayerBetCallBack,this),this.registerFunc(t.CallBacks.onBetActionCallBack,this.onBetActionCallBack,this),this.registerFunc(t.CallBacks.onSelfBetCallBack,this.onSelfBetCallBack,this),this.registerFunc(t.CallBacks.onGameBetCallBack,this.onGameBetCallBack,this),this.registerFunc(t.CallBacks.onExchangeCallBack,this.onExchangeCallBack,this),this.registerFunc(t.CallBacks.onRankingCallBack,this.onRankingCallBack,this),this.registerFunc(t.CallBacks.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.CallBacks.onChipsRecordCallBack,this.onChipsRecordCallBack,this),this.registerFunc(t.CallBacks.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(t.CallBacks.onRemainTimeCallBack,this.onRemainTimeCallBack,this),this.registerFunc(t.CallBacks.onHitrateCallBack,this.onHitrateCallBack,this),this.registerFunc(t.CallBacks.dealCard,this.dealCard,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this)},i.prototype.onUserMoneyChange=function(i){e.prototype.onUserMoneyChange.call(this,i);var o=GamePlayerMgr.i.getPlayer();this._hhdzModel.playerMoneys[t.PlayerConst.SELF]=App.CommonUtils.money(o.getMoney()),this._view.MessageInfo.setUserMoney(App.CommonUtils.money(o.getMoney()))},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.requestRemainTime(),this._hhdzModel.isBackstage=!0,this.clearTable()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.addDataListeners=function(){this._hhdzModel.selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("bg_mp3"),this._view.BetBox.initCoinBox(),this.initUserInfo(),this.initJebutton()
},i.prototype.initJebutton=function(){this._view.Bottom.serJeButtonData(this._hhdzModel.chipArr),this.changeMultiple(this._mTempMultiple),this._popView.getChipSetView().setDefaultChip(this._hhdzModel.chipArr),this.selBtnIndexCallBack()},i.prototype.initUserInfo=function(){var e=GamePlayerMgr.i.getPlayer();this._view.MessageInfo.setUserName(e.getNickName()),this._hhdzModel.playerMoneys[t.PlayerConst.SELF]=App.CommonUtils.money(e.getMoney()),this._hhdzModel.playerIds[t.PlayerConst.SELF]=e.getUserId(),this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.getMoney())),this._view.MessageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view.MessageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox())},i.prototype.onGameStateCallBack=function(e,i){this._hhdzModel.gameStateData=App.CommonUtils.deepCopyData(e),this._hhdzModel.gameState=e.state;var o=this.resetTime(e);if(this._hhdzModel.isBackstage)return void(e.state==t.GameState.BETTING&&(this.refreshMoney(),this.clearCoins(),this.renderWinRecord(),this.renderChart()));switch(this._view.TimeClock.removeTime(),this._view.TimeClock.startTime(o),this._view.disabledBtn(),e.state){case t.GameState.BETTING:this.betting(o,i);break;case t.GameState.EXCHANGE:this.exchanging(o)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:t.state};return o},i.prototype.dealCard=function(){this._view.CardView.dealCard(!0)},i.prototype.betting=function(t,e){this.clearTable(),e||(this.refreshMoney(),this.clearCoins()),this._hhdzModel.betTimes++,this._view.MessageInfo.initInfo(),this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._hhdzModel.lastBetRecord.length&&this._view.enabledRepeatBet(),this._hhdzModel.isBet=2,t.time==t.allTime?(this._view.shuffleAni(),R.setTimeOnce(function(){this._view.TimeClock.showTime()}.bind(this),this,5e3),this._view.BetAnimation.playAni(0,"hhdz"),App.SoundManager.playEffect("start_mp3")):(this._view.CardView.dealCard(!1),this._view.TimeClock.showTime())},i.prototype.exchanging=function(t){this._hhdzModel.rewardTimeDif=t.allTime-t.time,this._view.TimeClock.hideTime(),this._view.CardView.hideWinner(),this._hhdzModel.isBet=1,this._view.CardView.clearCard(),this._view.CardView.dealCard(!1),t.time==t.allTime&&(this._view.BetAnimation.playAni(1),App.SoundManager.playEffect("stop_mp3"))},i.prototype.onIssueCallBack=function(t){this._hhdzModel.issue=t.issue,this._view.setIssue(t.issue)},i.prototype.onChartCallBack=function(t){t.compare_values.length&&t.compare_values.forEach(function(t){this._hhdzModel.historyRecord.compare_values.push(t)}.bind(this)),t.open_types.length&&t.open_types.forEach(function(t){this._hhdzModel.historyRecord.open_types.push(t)}.bind(this)),this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail()},i.prototype.renderChartDetail=function(){this._hhdzModel.historyRecord.compare_values.length&&this._view.renderChartDetail(this._hhdzModel.historyRecord.compare_values)},i.prototype.onGameResultCallBack=function(e,i){if(this._hhdzModel.gameResultData=App.CommonUtils.deepCopyData(e),!i&&(this._hhdzModel.winPos.length=0,e.place_results.forEach(function(e){e.is_hit&&(this._hhdzModel.winPos.push(e.place),this._view.createWinChip(e.place,t.PlayerConst.ONLINE))}.bind(this)),this._hhdzModel.betTimes)){var o=e.compare_value;this._hhdzModel.historyRecord.compare_values.push(o);var n=e.red_open_type>e.black_open_type?e.red_open_type:e.black_open_type;this._hhdzModel.historyRecord.open_types.push(n),this._hhdzModel.historyRecord.compare_values.length>82&&this._hhdzModel.historyRecord.compare_values.splice(0,60)}if(!this._hhdzModel.isBackstage)switch(this._hhdzModel.rewardTimeDif){case 0:this.openBlackCard(e),R.setTimeOnce(function(){this.openRedCard(e)}.bind(this),this,1500),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,3500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,8e3);break;case 1:this._view.CardView.opencard(e.black_cards,"black",!1),this._view.CardView.showCardType("black",e.black_open_type),R.setTimeOnce(function(){this.openRedCard(e)}.bind(this),this,500),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,2500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,7e3);break;case 2:this.showCardWithOutAni(e),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,1500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,6e3);break;case 3:this.showCardWithOutAni(e),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,5e3);break;case 4:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,4e3);break;case 5:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,3e3);break;case 6:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,2e3);break;case 7:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,1e3);break;default:this.renderChart(),this.refreshMoney(),this.renderWinRecord(),this.clearTable(),this.clearCoins()}},i.prototype.showCardWithOutAni=function(t){this._view.CardView.opencard(t.black_cards,"black",!1),this._view.CardView.showCardType("black",t.black_open_type),this._view.CardView.opencard(t.red_cards,"red",!1),this._view.CardView.showCardType("red",t.red_open_type)},i.prototype.onOnlineCountCallBack=function(t){this._view.ToolBar.changeOnlineNum(t.online_count)},i.prototype.onSelfBetCallBack=function(e){return e.code?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[e.code]),this._view.enabledConfirmBet(),void this._view.enabledConserBet()):(this._hhdzModel.hasBet=!0,this.resetPerBet(),void this.betPoints())},i.prototype.onPlayerBetCallBack=function(e){if(e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var i=0;e.infos.forEach(function(t){i+=t.bet_money,this._hhdzModel.betList[t.place]=t.bet_money}.bind(this)),this._view.BetBox.showSelfBet(this._hhdzModel.betList),this._view.MessageInfo.setUserBet(App.CommonUtils.money(i))}},i.prototype.onBetActionCallBack=function(e){var i=this._hhdzModel.playerIds;i.forEach(function(i,o){e.user_id==i&&(this._hhdzModel.playerMoneys[o]=App.CommonUtils.money(e.balance),e.bets.forEach(function(t){this._view.betToPlaceAni(o,t.place,t.bet_money)}.bind(this)),o==t.PlayerConst.SELF?this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.balance)):this._view.specialPlayerMoney(App.CommonUtils.money(e.balance),o),this._view.avatarShake(o),o==t.PlayerConst.PSYCHIC&&e.bets.forEach(function(t){this._view.starFly(t.place)}.bind(this)))}.bind(this))},i.prototype.onGameBetCallBack=function(e){this._hhdzModel.gameState==t.GameState.EXCHANGE&&this._hhdzModel.rewardTimeDif>5||(e.infos.forEach(function(e,i){if(this._hhdzModel.gameState==t.GameState.BETTING){var o=e.total_bet_money-this._hhdzModel.allBetList[e.place];this._view.betToPlaceAni(t.PlayerConst.ONLINE,e.place,o),this._view.onlineShake()}this._hhdzModel.allBetList[e.place]=e.total_bet_money}.bind(this)),this._view.BetBox.showBetMoney(this._hhdzModel.allBetList))},i.prototype.onExchangeCallBack=function(e){this._hhdzModel.hasBet&&(this._hhdzModel.lastBetRecord.length=0),this.resetWinMoney(),this._hhdzModel.winPlayer.length=0,e.infos.length&&(e.infos.forEach(function(e){e.place_exchanges.length&&e.place_exchanges.forEach(function(i){if(i.prize_money&&this.createWinChip(i.place,e.user_id,i.prize_money),e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var o={place:i.place,bet_money:i.bet_money};this._hhdzModel.lastBetRecord.push(o)}}.bind(this)),this.createMoney(e)}.bind(this)),this.createWinRecord())},i.prototype.createWinChip=function(t,e,i){var o=this._hhdzModel.playerIds;o.forEach(function(o,n){e==o&&(this._view.createWinChip(t,n),-1==this._hhdzModel.winPlayer.indexOf(n)&&this._hhdzModel.winPlayer.push(n),this._hhdzModel.winMoneys[n]+=Number(App.CommonUtils.money2Str(i)))}.bind(this))},i.prototype.resetWinMoney=function(){for(var t=0;t<this._hhdzModel.winMoneys.length;t++)this._hhdzModel.winMoneys[t]=0},i.prototype.createMoney=function(t){var e=this._hhdzModel.playerIds;e.forEach(function(e,i){e==t.user_id&&(this._hhdzModel.playerMoneys[i]=App.CommonUtils.money(t.balance)),this._hhdzModel.winMoneys[i]&&this._view.MessageInfo.playerWinMoney(App.CommonUtils.money2Str(App.CommonUtils.moneyC2S(this._hhdzModel.winMoneys[i])),i)}.bind(this))},i.prototype.onRankingCallBack=function(t){t.infos.length>0&&this._popView.Ranking.rankData(t.infos)},i.prototype.onSpecialPlayerCallBack=function(t){if(t.special_players){for(var e=0;4>e;e++)this._hhdzModel.playerIds[e]=-1,this._hhdzModel.playerMoneys[e]=0;t.special_players.forEach(function(t){this._hhdzModel.playerIds[t.play_role]=t.user_id,this._hhdzModel.playerMoneys[t.play_role]=App.CommonUtils.money(t.balance),this._view.setPluteName(t.nick_name,t.play_role);var e=t.head?t.head:1;this._view.setPluteImage("ui_headImg_"+e,t.play_role),this._view.specialPlayerMoney(""+App.CommonUtils.money(t.balance),t.play_role),this._view.playerDisplay(t.play_role)}.bind(this))}},i.prototype.onChipsRecordCallBack=function(t){t.chips.length?this._hhdzModel.chipArr=JSON.parse(t.chips):this._hhdzModel.chipArr=[0,2,5,8,9],this.initJebutton()},i.prototype.onLeaveGameCallBack=function(t){e.prototype.goBack2Lobby.call(this)},i.prototype.onRemainTimeCallBack=function(e){this._hhdzModel.isBackstage=!1;var i=this._hhdzModel.gameStateData;if(i){i.remaining_time=e.remaining_time,this.onGameStateCallBack(i,!0);var o=this._hhdzModel.gameResultData;i.state==t.GameState.EXCHANGE&&o&&this.onGameResultCallBack(o,!0)}},i.prototype.onHitrateCallBack=function(t){this._view.setBeilv(t.hitrate)},i.prototype.armaturePlayEnd=function(){this._view.CardView.dealCard(!0)},i.prototype.backToLobby=function(){this._proxy.sendLeaveGame(),this.backPoints()},i.prototype.bet=function(e,i){if(2==this._hhdzModel.isBet){var o=i?i:1e4*this._hhdzModel.betNum;if(this._hhdzModel.betPlace=e,this.isLimit(e,o))return void(this._hhdzModel.betPoints.length=0);if(o){var n={bet_money:o,place:e};this._hhdzModel.isAutoBet?this.autoBet([n]):(this._hhdzModel.preBetList[e]+=o,this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList),this._view.enabledConfirmBet(),this._view.enabledConserBet()),this.betPlacePoints(e)}else{var s=this.getAllPreBet(),h=this._hhdzModel.playerMoneys[t.PlayerConst.SELF]-App.CommonUtils.money(s);this._popView.Prompt.showPrompt(2,h)}this._hhdzModel.betPoints.push(this._hhdzModel.betNum)}},i.prototype.autoBet=function(t){var e=t,i={bets:e};this._proxy.requestBet(i)},i.prototype.isLimit=function(e,i){var o=!1;return this._hhdzModel.limits.forEach(function(n){if(n.place==e){var s=(this.getAllSelfBet(),this.getAllPreBet()),h=i,r=this._hhdzModel.betList[e],a=this._hhdzModel.preBetList[e];0==this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):h+s>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):h&&h<n.limit_min_money?(App.ScrollTxtTips.showTip("当前投注项限红为"+App.CommonUtils.money(n.limit_min_money)+"~"+App.CommonUtils.money(n.limit_max_money)),o=!0):r+a>=n.limit_max_money?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),o=!0):h+r+a>n.limit_max_money&&(this._hhdzModel.limitBetMoney=n.limit_max_money-(r+a),this._popView.Prompt.showPrompt(1,App.CommonUtils.money(this._hhdzModel.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)),o=!0)}}.bind(this)),o},i.prototype.getAllSelfBet=function(){for(var t=0,e=0;e<this._hhdzModel.betList.length;e++)t+=this._hhdzModel.betList[e];return t},i.prototype.getAllPreBet=function(){for(var t=0,e=0;e<this._hhdzModel.preBetList.length;e++)t+=this._hhdzModel.preBetList[e];return t},i.prototype.touch=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.ShowHandBtn=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.setAutoBet=function(t){this._hhdzModel.isAutoBet=t,this.autoBetPoints()},i.prototype.repeatBet=function(){if(this._hhdzModel.lastBetRecord.length){if(this.isLimitRepeat())return;this._hhdzModel.isAutoBet?this.autoBet(this._hhdzModel.lastBetRecord):(this._hhdzModel.lastBetRecord.forEach(function(t,e){this._hhdzModel.preBetList[t.place]+=t.bet_money}.bind(this)),this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList),this._view.enabledConfirmBet(),this._view.enabledConserBet())}this.repeatBetPoints()},i.prototype.isLimitRepeat=function(){var e=!1,i=this._hhdzModel.preBetList,o=this._hhdzModel.betList,n=this._hhdzModel.limits;return this._hhdzModel.lastBetRecord.forEach(function(s){var h=s.bet_money+o[s.place]+i[s.place];n.forEach(function(i){s.place==i.place&&(s.bet_money>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),e=!0):h>i.limit_max_money&&(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),e=!0))}.bind(this))}.bind(this)),e},i.prototype.confirmBet=function(){var t=[];if(this._hhdzModel.preBetList.forEach(function(e,i){if(e){var o={place:i,bet_money:e};t.push(o)}}.bind(this)),t.length>0){var e={bets:t};this._proxy.requestBet(e)}this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.confirmBetPoints()},i.prototype.conserBet=function(){this.resetPerBet(),this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.concerBetPoints()},i.prototype.resetPerBet=function(){for(var t=0;t<this._hhdzModel.preBetList.length;t++)this._hhdzModel.preBetList[t]=0;this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList)},i.prototype.resetBet=function(){for(var t=0;t<this._hhdzModel.betList.length;t++)this._hhdzModel.betList[t]=0},i.prototype.resetAllBet=function(){for(var t=0;t<this._hhdzModel.allBetList.length;t++)this._hhdzModel.allBetList[t]=0},i.prototype.showRank=function(){this._popView.Ranking.showPopup();var t={begin_idx:0,req_count:100};this._proxy.requestRanking(t),this.rankingPoints()},i.prototype.showRecord=function(){this._popView.WinningRecord.showPopup(),this.winningRecordPoints()},i.prototype.showGameSet=function(){this._popView.GameSet.initSet(),this._popView.GameSet.showPopup(),this.gameSetPoints()},i.prototype.showHelp=function(){this._popView.Help.showPopup(),this.helpPoints()},i.prototype.openBlackCard=function(t){this._view.CardView.opencard(t.black_cards,"black",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("black",t.black_open_type)}.bind(this),this)},i.prototype.openRedCard=function(t){this._view.CardView.opencard(t.red_cards,"red",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("red",t.red_open_type)}.bind(this),this)},i.prototype.showWinner=function(e){this._view.coinAniClear(this._hhdzModel.winPos,this._hhdzModel.winPlayer),this._view.showTableLight(this._hhdzModel.winPos),R.setTimeOnce(function(){this.refreshMoney()}.bind(this),this,1500),this.renderChart(),this._view.CardView.showWinner(e.compare_value),this.renderWinRecord(),this._hhdzModel.winMoneys[t.PlayerConst.SELF]&&App.SoundManager.playEffect("win_game_mp3")},i.prototype.refreshMoney=function(){this._view.MessageInfo.setUserBet(0),this._view.MessageInfo.setUserMoney(this._hhdzModel.playerMoneys[t.PlayerConst.SELF]);for(var e=0;4>e;e++)this._hhdzModel.playerMoneys[e]&&this._view.specialPlayerMoney(""+this._hhdzModel.playerMoneys[e],e)},i.prototype.createWinRecord=function(){if(this._hhdzModel.winMoneys[t.PlayerConst.SELF]){var e={issue:this._hhdzModel.issue,hit_money:App.CommonUtils.money2Str(App.CommonUtils.moneyC2S(this._hhdzModel.winMoneys[t.PlayerConst.SELF]))};this._hhdzModel.winningRecord.unshift(e),this._hhdzModel.winningRecord.length>50&&this._hhdzModel.winningRecord.splice(50,this._hhdzModel.winningRecord.length-50)}},i.prototype.renderWinRecord=function(){this._hhdzModel.winningRecord.length&&this._popView.WinningRecord.rankData(this._hhdzModel.winningRecord)},i.prototype.renderChart=function(){this._hhdzModel.betTimes&&(this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail())},i.prototype.clearTable=function(){this._view.TimeClock.hideTime(),this._view.clearShuffle(),this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._view.hideTableLight()},i.prototype.clearCoins=function(){this._hhdzModel.hasBet=!1,this._view.BetBox.cleanChip(),this._view.BetBox.initCoinBox(),this._view.hideStar(),this.resetPerBet(),this.resetBet(),this.resetAllBet(),this._view.BetBox.clearCoin(),this._view.MessageInfo.setUserBet(0)},i.prototype.confirmShowhand=function(){this._hhdzModel.betNum=0;var e=this.getAllPreBet(),i=1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]-e;this._hhdzModel.limits.forEach(function(t){t.place==this._hhdzModel.betPlace&&(i<t.limit_min_money?this._popView.Prompt.showPrompt(6):this.bet(this._hhdzModel.betPlace,i))}.bind(this))},i.prototype.confirmLimitBet=function(){this._hhdzModel.limitBetMoney&&this.bet(this._hhdzModel.betPlace,this._hhdzModel.limitBetMoney)},i.prototype.ShowsetChip=function(){var t=this._popView.getChipSetView();t.showMenu(),t.setDefaultChip(this._hhdzModel.chipArr),this.setCounterBtnPoints()},i.prototype.getFiveChip=function(t){var e=JSON.stringify(t),i={chips:e};this._proxy.requestChip(i)},i.prototype.getChipValue=function(t){this._mTempChipMoney=t,this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],this.setCounterPoints()},i.prototype.changeMultiple=function(t){var e=this._view.Bottom;e.setchipValue(t),this._mTempMultiple=t},i.prototype.selBtnIndexCallBack=function(){this._view.Bottom.JeButton.toggleBtn(this._hhdzModel.selBtnIndex-1),this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],0==this._hhdzModel.betNum&&this._view.Bottom.JeButton.ShowHandlightBtn()},i.prototype.betPoints=function(){this._hhdzModel.betPoints.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+e])}.bind(this)),this._hhdzModel.betPoints.length=0},i.prototype.setCounterPoints=function(){this._mTempChipMoney.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e])}.bind(this))},i.prototype.concerBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL)},i.prototype.repeatBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT)},i.prototype.confirmBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM)},i.prototype.autoBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM)},i.prototype.setCounterBtnPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER)},i.prototype.addCounterPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER)},i.prototype.betPlacePoints=function(e){R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e])},i.prototype.menuPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON)},i.prototype.rechargeMoney=function(){App.ViewManager.open(LobbyViewConst.Recharge)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(LobbyViewConst.Recharge)},i.prototype.helpPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON)},i.prototype.gameSetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON)},i.prototype.winningRecordPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON)},i.prototype.rankingPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.LEADERBOARD_BUTTON)},i.prototype.backPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this._hhdzModel.destroy(),this._proxy.destroy(),this._view.destroy(),this._popView.destroy(),this._hhdzModel=void 0,this._proxy=void 0,this._view=void 0,this._popView=void 0,common.StarExpand.cleanFormPool()},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"hhdz.GameController")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.initData=function(){this.winMoneys=[0,0,0,0,0],this.playerIds=[-1,-1,-1,-1,-1],this.playerMoneys=[0,0,0,0,0],this.selBtnIndex=1,this.WAIT_CARD_TIME=300,this.isBet=1,this.isAutoBet=!0,this.preBetList=[0,0,0],this.betList=[0,0,0],this.allBetList=[0,0,0],this.lastBetRecord=[],this.gameResult={},this.historyRecord={compare_values:[],open_types:[]},this.winPos=[],this.winPlayer=[],this.winningRecord=[],this.chipArr=[0,2,5,8,9],this.betTimes=0,this.betPlace=0,this.betPoints=[],this.hasBet=!1,this.limits=[],this.betNum=1e4,this.limitPlace=-1},i.prototype.initDataNotify=function(){this.selBtnIndexNotify=t.DataNotify.create(this.selBtnIndex)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._shuffle&&(this._shuffle.destroy(),this._shuffle=void 0),this.preBetList=void 0,this.betList=void 0,this.lastBetRecord=void 0,this.gameResult=void 0,this.historyRecord=void 0,this.winPos=void 0,this.winningRecord=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"hhdz.GameModel")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onGameState=function(e){this.applyFunc(t.CallBacks.onGameStateCallBack,e)},i.prototype.onOnlineCount=function(e){this.applyFunc(t.CallBacks.onOnlineCountCallBack,e)},i.prototype.onChart=function(e){this.applyFunc(t.CallBacks.onChartCallBack,e)},i.prototype.onGameResult=function(e){this.applyFunc(t.CallBacks.onGameResultCallBack,e)},i.prototype.onSelfBet=function(e){this.applyFunc(t.CallBacks.onSelfBetCallBack,e)},i.prototype.onPlayerBet=function(e){this.applyFunc(t.CallBacks.onPlayerBetCallBack,e)},i.prototype.onBetAction=function(e){this.applyFunc(t.CallBacks.onBetActionCallBack,e)},i.prototype.onGameBet=function(e){this.applyFunc(t.CallBacks.onGameBetCallBack,e)},i.prototype.onExchange=function(e){this.applyFunc(t.CallBacks.onExchangeCallBack,e)},i.prototype.onRanking=function(e){this.applyFunc(t.CallBacks.onRankingCallBack,e)},i.prototype.onWinningRecord=function(e){this.applyFunc(t.CallBacks.onWinningRecordCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.CallBacks.onSpecialPlayerCallBack,e)},i.prototype.onChipsRecord=function(e){this.applyFunc(t.CallBacks.onChipsRecordCallBack,e)},i.prototype.onIssue=function(e){this.applyFunc(t.CallBacks.onIssueCallBack,e)},i.prototype.onExitRoom=function(e){this.applyFunc(t.CallBacks.onLeaveGameCallBack,e)},i.prototype.onLimit=function(t){this.model.limits=t.limits},i.prototype.onRemainTime=function(e){this.applyFunc(t.CallBacks.onRemainTimeCallBack,e)},i.prototype.onHitrate=function(e){this.applyFunc(t.CallBacks.onHitrateCallBack,e)},i.prototype.requestBet=function(e){this.send(t.ProxyConst.ME_BET,e)},i.prototype.requestRanking=function(e){this.send(t.ProxyConst.RANKING,e)},i.prototype.requestChip=function(e){this.send(t.ProxyConst.CHIPS_RECORD_Q,e)},i.prototype.requestRemainTime=function(){this.send(t.ProxyConst.REMAIN_TIME_Q)},i.prototype.sendLeaveGame=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.addListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.addListener(t.ProxyConst.CHART_R,this.onChart,this),this.addListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.addListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.addListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.addListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.addListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.addListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.addListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.addListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.addListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.addListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.addListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.addListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.addListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.addListener(t.ProxyConst.HITRATE_N,this.onHitrate,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.removeListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.removeListener(t.ProxyConst.CHART_R,this.onChart,this),this.removeListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.removeListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.removeListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.removeListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.removeListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.removeListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.removeListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.removeListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.removeListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.removeListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.removeListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.removeListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.removeListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.removeListener(t.ProxyConst.HITRATE_N,this.onHitrate,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"hhdz.GameProxy")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(){}return t.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},t.randomPoint=function(t){var e={x:0,y:0};return e.x=Math.floor(Math.random()*t.width),e.y=Math.floor(Math.random()*t.height),e},t.dealCard=function(t,e,i){var o=0;t.forEach(function(t){3>o&&(egret.Tween.removeTweens(t),egret.Tween.get(t).wait(i*o*1.5).to({x:e[o].x,y:e[o].y,horizontalCenter:e[o].h,scaleX:1,scaleY:1,rotation:0},i).call(function(){App.SoundManager.playEffect("sendcard_mp3")}),o++)})},t.showCard=function(t,e){t.forEach(function(t,i){t.x=e[i].x,t.y=e[i].y,t.horizontalCenter=e[i].h,t.scaleX=1,t.scaleY=1})},t.openCard=function(t,e,i){var o=this;if(t&&t.length){var n=0,s=0;e.forEach(function(e){egret.Tween.get(e).wait(i*n).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("flipcard_mp3"),e.source=this.getCardWithNum(t[s]),egret.Tween.get(e).to({scaleX:1},200,egret.Ease.sineInOut),s++}.bind(o)),n++})}},t.openCardInstant=function(t,e){var i=this;t&&t.length&&e.forEach(function(e,o){e.source=i.getCardWithNum(t[o]),e.scaleX=1,e.scaleY=1})},t.getPoints=function(t){for(var e=[],i=0;3>i;i++){var o={x:t.getChildAt(i).x,y:t.getChildAt(i).y,h:t.getChildAt(i).horizontalCenter};e.push(o)}return e},t.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s=""),s},t.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},t.getBetNum=function(t,e){t.forEach(function(t){1==t.betType?e.black+=t.betNum:2==t.betType?e.red+=t.betNum:e.lucky+=t.betNum})},t}();t.Application=e,__reflect(e.prototype,"hhdz.Application")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"hhdz.DataNotify")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"hhdz","GameSkin")||this;return i.BetBox.initComponent(t),i.Bottom.initComponent(t),i.TimeClock.initComponent(t),i.ToolBar.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.open.call(this),this.Bottom.open(),this.ToolBar.hideBtnForWebInsert(),this.MessageInfo.initInfo(),this.MessageInfo.allPlayerDisplay(),this.MessageInfo.setPluteLelf(),this.MessageInfo.setUserBet(0),this.ToolBar.moveCharge(),this.BetBox.createHeadPosition(),this.BetBox.initCoinBox(),this.ToolBar.reChargeEffect(),this.ToolBar.setOnlineLelf(),this.Chart.hideApproach(),this.hideTableLight(),this.TimeClock.hideTime(),this.initBroadcast(this),this.btnRedPacket=RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},i.prototype.setBeilv=function(t){var e=2-Number(App.CommonUtils.money2Str(t));this.BeilvRed.text=String(e),this.BeilvBlack.text=String(e)},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle(this._controller),this.GroupShuffle.addChild(this.shuffle)),this.shuffle.init(),this.shuffle.x=0,this.shuffle.y=0,this.shuffle.scaleX=this.shuffle.scaleY=1,this.shuffle.alpha=1,this.shuffle.goToWash(),this.shuffle.addPlayEndCallBack(function(){this.applyFunc(t.CallBacks.dealCard)}.bind(this),this._controller)},i.prototype.clearShuffle=function(){this.shuffle&&(this.shuffle.destroy(),this.shuffle=void 0)},i.prototype.betToPlaceAni=function(t,e,i){this.BetBox.betToPlaceAni(t,e,i)},i.prototype.playerDisplay=function(t){this.MessageInfo.playerDisplay(t)},i.prototype.setPluteImage=function(t,e){this.MessageInfo.setPluteImage(t,e)},i.prototype.setPluteName=function(t,e){this.MessageInfo.setPluteName(t,e)
},i.prototype.specialPlayerMoney=function(t,e){this.MessageInfo.specialPlayerMoney(t,e)},i.prototype.avatarShake=function(t){this.MessageInfo.avatarShake(t)},i.prototype.onlineShake=function(){this.ToolBar.onlineShake()},i.prototype.starFly=function(t){var e=this.MessageInfo.getPoint(),i=this.BetBox.getParabolicPoint(t),o=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,i,o,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},i.prototype.hideStar=function(){this.BetBox.hideStar()},i.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},i.prototype.coinAniClear=function(t,e){this.BetBox.coinAniClear(t),R.setTimeOnce(function(){e.forEach(function(t){this.MessageInfo.getMoneyLight(t)}.bind(this))},this,600)},i.prototype.playerWinMoney=function(t,e){this.MessageInfo.playerWinMoney(t,e)},i.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},i.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},i.prototype.setIssue=function(t){this.Chart.setIssue(t)},i.prototype.renderChartDetail=function(t){this.Chart.renderChartDetail(t)},i.prototype.enabledConfirmBet=function(){this.Bottom.LogicBtn.enabledConfirmBet()},i.prototype.enabledConserBet=function(){this.Bottom.LogicBtn.enabledConserBet()},i.prototype.enabledRepeatBet=function(){this.Bottom.LogicBtn.enabledRepeatBet()},i.prototype.disabledConfirmBet=function(){this.Bottom.LogicBtn.disabledConfirmBet()},i.prototype.disabledConserBet=function(){this.Bottom.LogicBtn.disabledConserBet()},i.prototype.disabledBtn=function(){this.Bottom.LogicBtn.disabledRepeatBet(),this.Bottom.LogicBtn.disabledConfirmBet(),this.Bottom.LogicBtn.disabledConserBet()},i.prototype.enabledBtn=function(){this.Bottom.LogicBtn.enabledRepeatBet(),this.Bottom.LogicBtn.enabledConfirmBet(),this.Bottom.LogicBtn.enabledConserBet()},i.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket.play(RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket.play(RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(RedPackBone.Animation1)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this),this.clearShuffle(),this.BetBox.destroy(),this.Bottom.LogicBtn.destroy(),this.Bottom.JeButton.destroy(),this.MessageInfo.clearAllMoneyLight(),this.MessageInfo.destroy(),this.TimeClock.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.Chart.destroy(),common.comBones.cleanFormPool())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"hhdz.GameView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"hhdz","PopSkin")||this;return i.Ranking.initComponent(e),i.WinningRecord.initComponent(e),i.GameSet.initComponent(e),i.Prompt.initComponent(e),i._mChipSetView=new common.SetChip(null),i._mChipSetView.initComponent(e,i),i._mChipSetView.top=i._mChipSetView.left=0,i._mChipSetView.bottom=i._mChipSetView.right=0,i}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.Help.initUI(),this._mChipSetView.getcoordinate(),this._mChipSetView.createChip()},e.prototype.showChipSetView=function(){this._mChipSetView.showMenu()},e.prototype.getChipSetView=function(){return this._mChipSetView},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mChipSetView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mChipSetView.removeEvent()},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Ranking.destroy(),this.WinningRecord.destroy(),this.GameSet.destroy(),this.Prompt.destroy(),this._mChipSetView.destroy(),this._mChipSetView=void 0)},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"hhdz.PopView")}(hhdz||(hhdz={}));