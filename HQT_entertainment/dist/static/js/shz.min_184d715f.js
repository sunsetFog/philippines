var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},shz;!function(t){var e=function(){function t(){}return t.CsGenPlayerBetReq=10801,t.ScGenPlayerBetRes=10802,t.CsGenPlayerAllStopReq=10803,t.ScGenRoleCardRes=10804,t.ScGenExchangeRes=10805,t.CsGenGetScoreReq=10806,t.ScGenGetScoreRes=10807,t.ScGenToLotterygameRes=10808,t.CsLotteryCardReq=10809,t.ScLotteryCardAndExchangeRes=10810,t.CsCompReq=10811,t.ScCompRes=10812,t.CsCompGameBetReq=10813,t.ScCompBetRes=10814,t.ScDiceRes=10815,t.ScOnLineNumberRes=10816,t.CsLeaderBoardReq=10817,t.ScLeaderBoardRes=10818,t.CsRecordReq=10819,t.ScRecordRes=10820,t.CsEnterSceneFinishReq=10821,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"shz.ProxyKeyConst")}(shz||(shz={}));var shz;!function(t){var e;!function(e){var o=function(){function e(){}return e.prototype.getVersion=function(){return"v1.2.6"},e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var o=base.getController(e);o&&o.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&App.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){App.setScaleModeNormal()},e}();e.shz=o,__reflect(o.prototype,"shz.Entrance.shz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t,o=e.shzBonePool;return o&&(t=o.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var o=e.shzBonePool;o||(o=[]),t._mIsInPool=!0,t.clean(),o.push(t),e.shzBonePool=o}},e.cleanFormPool=function(){var t=e.shzBonePool;if(t)for(;t.length;){var o=t.pop();o.destroy()}},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature&&this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.shzBonePool=null,e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.ShzGoldBones=e,__reflect(e.prototype,"shz.ShzGoldBones")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=0;40>=e;e++){var o=10>e?"0"+e:""+e;t.push("jiesuanguang_000"+o+"_jpg")}this.initMc(t,30),this.blendMode=egret.BlendMode.ADD},e}(SpriteMovieClip);t.ShzResultMC=e,__reflect(e.prototype,"shz.ShzResultMC")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){var t=e.call(this,"ShzAwardAnimation")||this;return t._ShzGoldBones=null,t._mxx=0,t._myy=0,t.touchEnabled=!1,t.touchChildren=!1,t.visible=!1,t}return __extends(o,e),o.prototype.bonesMotion=function(t,e){egret.Tween.get(this._ShzGoldBones).to({x:this._mxx},700,egret.Ease.sineInOut).call(function(){this.openWinpopup(t),this.winName.visible=!0,this.winName.source="reward"+e+"_png",this.winBack.visible=!0},this)},o.prototype.openWinpopup=function(t){this.winScore0.text=t+"",this.visible=!0,this.winpopup.visible=!0},o.prototype.closeWinPopup=function(){this.winScore0.text="0",this.winpopup.visible=!1},o.prototype.openBonus=function(t){this.winpopup.visible=!1,this.bonusScore.text=t+"",this.visible=!0,this.winBonus.visible=!0},o.prototype.closewinandBonus=function(){this.closeSettlementAnimation(),this.visible=!1,this.winBonus.visible=!1,this.winpopup.visible=!1,this.winScore0.text="0",this.bonusScore.text="0",this.winName.visible=!1,this.winBack.visible=!1},o.prototype.settlementAnimation=function(e,o){this.visible=!0,this._ShzGoldBones||(this._ShzGoldBones=new t.ShzGoldBones,this.settlement.addChild(this._ShzGoldBones)),this.settlement.visible=!0,this._ShzGoldBones.updateId("setWin");var i=App.StageUtils.getWidth()+458,n=App.StageUtils.getHeight()/2-55;this._mxx=App.StageUtils.getWidth()/2,this._myy=App.StageUtils.getHeight()/2-55,this._ShzGoldBones.setPosition(i,n),this._ShzGoldBones.play(99999),this.bonesMotion(e,o)},o.prototype.closeSettlementAnimation=function(){this._ShzGoldBones&&(this._ShzGoldBones.stopGame(),egret.Tween.removeTweens(this._ShzGoldBones)),this.settlement.visible=!1},o.prototype.clear=function(){this._ShzGoldBones.stopGame(),R.removeFromParent(this),this.removeChildren()},o.prototype.setAwardScore=function(t){this.winScore0.text=App.CommonUtils.moneyself(t)+""},o.prototype.getAwardScore=function(){return Number(this.winScore0.text)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this._ShzGoldBones&&(egret.Tween.removeTweens(this._ShzGoldBones),this._ShzGoldBones.destroy())},o}(BaseEuiComponent);t.AwardAnimationView=e,__reflect(e.prototype,"shz.AwardAnimationView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){var t=e.call(this,"ShzBottonButton")||this;return t.scorelist=[],t.index=0,t.thanBone=null,t.startBone=null,t.clickBone=null,t.betAllMoney=0,t.BtnType=0,t}return __extends(o,e),o.prototype.setScorelist=function(t){var e=t;JSON.stringify(this.scorelist.sort())!==JSON.stringify(e)&&(this.scorelist.length=0,this.scorelist=[],this.scorelist=[].concat(e),this.resetSetScore())},o.prototype.resetSetScore=function(){var e=this.scorelist[0];this.setScore(e),this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue),this.index=0,this.betAllMoney=t.conFun.countAllbet(e),this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney)},o.prototype.gameHight=function(){this.goGame.visible=!0,this.clickGame.visible=!1,this.ButtonGame_1.enabled=!0,this.ButtonGame_2.enabled=!0},o.prototype.gameAsh=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1},o.prototype.setStartGameBtn=function(t){this.ButtonGame_0.visible=t},o.prototype.setStartGameBone=function(t){this.goGame.touchEnabled=t},o.prototype.winandNotype=function(t){0==t?this.gameoverButtontype(!1):this.ButtonGame_1.enabled=!1},o.prototype.winningtype=function(t){1==t?(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1):(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanGame.visible=!0)},o.prototype.generalAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanGame.visible=!0},o.prototype.numberAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1},o.prototype.rotarybuttontype=function(){this.goGame.visible=!1,this.goGame.touchEnabled=!0,this.ButtonGame_1.visible=!0,this.ButtonGame_1.enabled=!0,this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse),R.setTimeOnce(function(){this.clickGame.visible=!1},this,300)},o.prototype.gameoverButtontype=function(e){this.goGame.visible=!0,this.goGame.touchEnabled=!0,this.clickGame.visible=!1,this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1,e?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse):this.normalGameOverBtn(),this.thanTimes0.enabled=!1,this.thanGame.visible=!1},o.prototype.normalGameOverBtn=function(){Number(this.LabelScore0.text)==this.scorelist[0]?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue):Number(this.LabelScore0.text)==this.scorelist[this.scorelist.length-1]?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.LessTrue):this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllTrue)},o.prototype.revisionBetMoneyBtn=function(t){switch(t){case 1:this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!1,this.ButtonScoreAdd0.enabled=!1,this.ButtonScoreReduce0.enabled=!1;break;case 2:this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!0,this.ButtonScoreAdd0.enabled=!0,this.ButtonScoreReduce0.enabled=!0;break;case 3:this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!0,this.ButtonScoreAdd0.enabled=!0,this.ButtonScoreReduce0.enabled=!1;break;case 4:this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!1,this.ButtonScoreAdd0.enabled=!1,this.ButtonScoreReduce0.enabled=!0}},o.prototype.scoreButtonType=function(){this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1},o.prototype.autoAnteType=function(){this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse)},o.prototype.startGameAppear=function(){this.goGame.visible=!0,this.goGame.touchEnabled=!0,this.clickGame.visible=!1},o.prototype.setUserName=function(t){this._shzUserInfo.setNickName(t)},o.prototype.setUserImage=function(t){this._Iconskin.setUserImage(t)},o.prototype.setUserFrame=function(t){this._Iconskin.setUserFrame(t)},o.prototype.setUserMoney=function(t){this._shzUserInfo.setMoney(t)},o.prototype.getTotalMoney=function(){return this.betAllMoney},o.prototype.getUserMoney=function(){return this._shzUserInfo.getMoney()},o.prototype.setAllBetMoney=function(t){this.betAllMoney=t,this.LabelTotal.text=this.betAllMoney+""},o.prototype.setScore=function(t){this.LabelScore0.text=t+""},o.prototype.setIndex=function(t){this.index=t},o.prototype.getDIScore=function(){return this.LabelScore0.text},o.prototype.showMenu=function(e){R.intervalTime()&&(App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(egret.Tween.get(this.zidongUp0).to({y:0},100),this.applyFunc(t.ShzCallBacks.setPopupClick)):this.retractMenu(),R.sendPlayerAction("SHZauto_startgame"))},o.prototype.retractMenu=function(){this.BtnType=0,this.applyFunc(t.ShzCallBacks.setPopupClickOpen),egret.Tween.get(this.zidongUp0).to({y:315},100)},o.prototype.setcurrentTime=function(t){"无限"==t?(this.times.text="",this._inginite.visible=!0,this._imgAnto.visible=!1):(this.times.text=t+"",this._inginite.visible=!1,this._imgAnto.visible=!0)},o.prototype.getRabioMoney=function(){return this._shzUserInfo.getMoney()},o.prototype.setRabioMoney=function(t){this._shzUserInfo.setMoney(t)},o.prototype.scoreReduce=function(){if(R.intervalTime()&&this.scorelist.length){App.SoundManager.playEffect("anniu_mp3"),this.index--;var e=this.scorelist[this.index];if(this.betAllMoney=t.conFun.countAllbet(e),this.LabelScore0.text=e,this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney),R.sendPlayerAction("SHZantes_playafterswitch"),0==this.index)return this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue),void(this.index=0);this._ScoreAdd.enabled||(this._ScoreAdd.enabled=!0),this.ButtonScoreAdd0.enabled||(this.ButtonScoreAdd0.enabled=!0),this.onHotIconBegin(this._ScoreReduce)}},o.prototype.scoreAdd=function(){if(R.intervalTime()&&this.scorelist.length){App.SoundManager.playEffect("anniu_mp3"),this.index++;var e=this.scorelist.length-1,o=this.scorelist[this.index];if(this.betAllMoney=t.conFun.countAllbet(o),this.LabelScore0.text=o,this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney),R.sendPlayerAction("SHZantes_playafterswitch"),this.index==e)return this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.LessTrue),void(this.index=e);this._ScoreReduce.enabled||(this._ScoreReduce.enabled=!0),this.ButtonScoreReduce0.enabled||(this.ButtonScoreReduce0.enabled=!0),this.onHotIconBegin(this._ScoreAdd)}},o.prototype.onHotIconBegin=function(t){egret.Tween.get(t).to({scaleX:.8,scaleY:.8},80).to({scaleX:1,scaleY:1},80)},o.prototype.timesButton=function(){this.automaticGroup.visible=!0,this.automatic0.visible=!1,this._autoIcon.visible=!1,this.retractMenu()},o.prototype.automaticValue=function(){var t=this.automatic0.visible;return t},o.prototype.stopAutomatic=function(){this.thanGame.visible=!1,this.automaticGroup.visible=!1,this.automatic0.visible=!0,this._autoIcon.visible=!0,this.times.text="",this.applyFunc("stopAllGame")},o.prototype.stopGameBtn=function(){App.SoundManager.playEffect("anniu_mp3"),this.stopAutomatic()},o.prototype.thanSweep=function(){this.thanBone||(this.thanBone=new t.ShzGoldBones,this.thanGame.addChild(this.thanBone)),this.thanGame.visible=!1,this.thanBone.updateId("specific");var e=this.timesGroup.getChildAt(0).x+65,o=this.timesGroup.getChildAt(0).y+33.5;this.thanBone.setPosition(e,o),this.thanBone.play(99999)},o.prototype.closethanSweep=function(){this.thanBone&&this.thanBone.destroy()},o.prototype.startSweep=function(){this.thanSweep(),this.startBone||(this.startBone=new t.ShzGoldBones,this.goGame.addChild(this.startBone)),this.startBone.updateId("goStart");var e=this.timesGroup.getChildAt(0).x+77,o=this.timesGroup.getChildAt(0).y+33.5;this.startBone.setPosition(e,o),this.startBone.play(99999)},o.prototype.closestartSweep=function(){this.startBone&&this.startBone.destroy()},o.prototype.startclickSweep=function(){this.clickBone||(this.clickBone=new t.ShzGoldBones,this.clickGame.addChild(this.clickBone)),this.clickGame.visible=!0,this.clickBone.updateId("startClick");var e=this.timesGroup.getChildAt(0).x+77,o=this.timesGroup.getChildAt(0).y+33.5;this.clickBone.setPosition(e,o),this.clickBone.blendMode=egret.BlendMode.NORMAL,this.clickBone.play(1);var i=this;this.clickBone.addPlayEndCallBack(function(){i.clickGame.visible=!1},this)},o.prototype.closestartclickSweep=function(){this.clickBone&&this.clickBone.destroy(),this.clickBone=null},o.prototype.onBack=function(){R.intervalTime()&&(this.stopAutomatic(),this.thanGame.visible=!1,Log.log("进入比倍游戏"),App.SoundManager.playEffect("lingdang_mp3"),this.applyFunc("RatioGame"),R.sendPlayerAction("SHZratio_enter"))},o.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},o.prototype.startGame=function(){R.intervalTime()&&this.scorelist.length&&(this.goGame.visible=!1,this.startclickSweep(),Log.log("开始游戏"),this.applyFunc("startGame"),R.sendPlayerAction("SHZmanual_startgame"))},o.prototype.stopGame=function(){if(R.intervalTime()){this.stopAutomatic(),App.SoundManager.stopEff("gundong_mp3"),App.SoundManager.playEffect("tingzhi_mp3");for(var t=1;6>t;t++)this.applyFunc("overone",t);this.applyFunc("stopShufflecard"),R.sendPlayerAction("SHZmanual_allstop")}},o.prototype.opensurround=function(t){this.applyFunc("opensurround",t)},o.prototype.scoreGame=function(){R.intervalTime()&&(this.stopAutomatic(),App.SoundManager.playEffect("anniu_mp3"),this.scoreButtonType(),this.applyFunc("setscoreGame"))},o.prototype.automaticNumber=function(t){if(R.intervalTime()&&this.scorelist.length){var e=Number(t.currentTarget.name);App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("setAutomaticNumber",e)}},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.goGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber,this);this.automatic1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGameBtn,this),this.thanTimes0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.goGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber,this);this.automatic1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGameBtn,this),this.thanTimes0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.closethanSweep(),this.closestartSweep(),this.closestartclickSweep(),R.removeAllTimeOut(this)},o}(BaseEuiComponent);t.BottonButtonView=e,__reflect(e.prototype,"shz.BottonButtonView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzToolBar")||this}return __extends(e,t),e.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.cardView=e,__reflect(e.prototype,"shz.cardView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzIconSkin")||this}return __extends(e,t),e.prototype.setUserImage=function(t){this.ImageIcon.source=t},e.prototype.setUserFrame=function(t){this.photoFrame.source=t},e.prototype.changeHead=function(t,e){this.ImageIcon.source=t,this.photoFrame.source=e},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.IconSkin=e,__reflect(e.prototype,"shz.IconSkin")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,"ShzMessageGameSkin")||this;return e._maskRct=new egret.Rectangle(0,0,518,30),e._mIsMove=!1,e.uTxtBg.visible=!1,e.uTxtBg.mask=e._maskRct,e._mListMsg=[],e}return __extends(e,t),e.prototype.addMsg=function(t){for(Log.log("addMsg");t.length;)this._mListMsg.push(t.shift()),Log.log(this._mListMsg);this.nextMsg(),App.TimerManager.doFrame(1,999999,this.refreshPos,this)},e.prototype.restartMsg=function(){this.txt.x=this._maskRct.width+10,Log.log("重新播放")},e.prototype.nextMsg=function(){if(!this._mIsMove){if(Log.log("nextMsg"),this._mListMsg.length<=0)return void this.stop();this.uTxtBg.visible=!0,this._mIsMove=!0,this._mCurrMsg=this._mListMsg.shift(),this.txt.text=this._mCurrMsg.mTxtMsg,Log.log(this._mCurrMsg.mCurrTime),this._mCurrMsg.mEndX=-(this.txt.width+20),this.restartMsg()}},e.prototype.refreshPos=function(t){if(this._mIsMove){var o=this._mCurrMsg;this.txt.x-=o.mMoveSpeed*t/16,this.txt.x<o.mEndX&&(Log.log(o.mCurrTime),Log.log(o.mPlayTimes),this._mIsMove=!1,Log.log("msg.mCurrTime >= msg.mPlayTimes"),App.TimerManager.doTimer(e.DealyTimeMove,1,this.nextMsg,this))}},e.prototype.stop=function(){this.txt.text="新优惠活动已上线~欢迎新老会员踊跃参与~",this.txt.x=3,this.txt.y=5,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){for(t.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this);this._mListMsg.length;)this._mListMsg.pop();this._mCurrMsg=void 0},e.DealyTimeMove=100,e}(BaseEuiComponent);t.MessageView=e,__reflect(e.prototype,"shz.MessageView");var o=function(){function t(){this.mTxtMsg="",this.mPriority=0,this.mPlayTimes=1,this.mCurrTime=0,this.mMoveSpeed=1,this.mEndX=0}return t}();t.BroadcastMsg=o,__reflect(o.prototype,"shz.BroadcastMsg")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){var o=e.call(this)||this;return App.MessageCenter.dispatch(t.shzControllerCon.shzRecordCreateEnd),o}return __extends(o,e),o.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.data.money>0&&(this.Issue.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Winning.text=this.data.money+"")},o}(eui.ItemRenderer);t.RecordIcon=e,__reflect(e.prototype,"shz.RecordIcon")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._mStopType=0,this._mCurrType=1,this._mStartTime=0,this._mDealyTime=0,this._flshsecet=!1,this._mIcon=t,this.init()}return t.prototype.init=function(){this._mTexRunList={},this._mTexStopList={};for(var t=2;10>t;t++)this._mTexRunList["tr"+t]=RES.getRes("shz_table_json.shuihu_ui_result_"+t+"_1_1"),this._mTexStopList["ts"+t]=RES.getRes("shz_table_json.shuihu_ui_result_"+t)},t.prototype.run=function(t,e,o){this._mStopType=t,this._flshsecet=o,this._mStartTime=egret.getTimer(),this._mDealyTime=e,App.TimerManager.doFrame(2,9999,this.update,this)},t.prototype.update=function(){this.updateType()},t.prototype.updateType=function(){this._mCurrType++,this._mCurrType>=10&&(this._mCurrType=2),this._mIcon.texture=this._mTexRunList["tr"+this._mCurrType],egret.getTimer()-this._mStartTime>800+this._mDealyTime&&this.stop()},t.prototype.stop=function(){this._mStopType==this._mCurrType&&(App.TimerManager.removeAll(this),this._mIcon.texture=this._mTexStopList["ts"+this._mCurrType])},t.prototype.destroy=function(){App.TimerManager.removeAll(this);for(var t=this._mTexRunList,e=this._mTexStopList,o=1;8>=o;o++)t["tr"+o]=void 0,e["ts"+o]=void 0,delete t["tr"+o],delete e["tr"+o];t=void 0,e=void 0,this._mIcon.texture=void 0,this._mIcon=void 0},t}();t.ShzCaiJinMC=e,__reflect(e.prototype,"shz.ShzCaiJinMC");var o=function(){function t(){}return t.SHZ=0,t.ZYT=1,t.DXTT=2,t.Song=3,t.Lin=4,t.Lu=5,t.DD=6,t.CQ=7,t.FT=8,t}();t.ShzType=o,__reflect(o.prototype,"shz.ShzType")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzDiceSkin")||this}return __extends(e,t),e.prototype.setdicenum=function(t,e){this.num1.source="shz_shake_json.shz_shake_dice_"+t,this.num2.source="shz_shake_json.shz_shake_dice_"+e},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.ShzDiceSkin=e,__reflect(e.prototype,"shz.ShzDiceSkin")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,"ShzGameSetSkin")||this;return o.visible=!1,o}return __extends(o,e),o.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},o.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},o.prototype.showPopup=function(){App.EffectUtils.showView(this)},o.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick)},o.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},o.prototype.onOpen=function(t){switch(t.currentTarget){case this.ToggleVoice:App.SoundManager.setBgOn(this.ToggleVoice.selected);break;case this.ToggleMusic:App.SoundManager.setEffectOn(this.ToggleMusic.selected)}},o.prototype.effectSwitch=function(t){Log.log("effectSwitch"),Log.log(t.currentTarget.selected);var e=t.currentTarget.selected;this.applyFunc("effectSwitch",e)},o.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0),R.sendPlayerAction("SHZmusic_without")},o.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0),R.sendPlayerAction("SHZsound_without")},o.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1),R.sendPlayerAction("SHZmusic_with")},o.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1),R.sendPlayerAction("SHZsound_with")},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.SetClose,this.closePoput,this,{}),this._effectSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.removeButton(this.SetClose),this._effectSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzGameSet=e,__reflect(e.prototype,"shz.ShzGameSet")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,"ShzHelpSkin")||this;return o.index=1,o.visible=!1,o}return __extends(o,e),o.prototype.showPopup=function(){App.EffectUtils.showView(this)},o.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick)},o.prototype.goRight=function(){return this.index++,4==this.index?(this.shzRight.enabled=!1,this.index=4,void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index))):(this.shzLeft.enabled||(this.shzLeft.enabled=!0),void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index)))},o.prototype.goLeft=function(){return this.index--,1==this.index?(this.shzLeft.enabled=!1,this.index=1,void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index))):(this.shzRight.enabled||(this.shzRight.enabled=!0),void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index)))},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.helpClose,this.closePoput,this,{}),App.CommonUtils.effectButton(this.shzRight,this.goRight,this,{}),App.CommonUtils.effectButton(this.shzLeft,this.goLeft,this,{})},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.helpClose),App.CommonUtils.removeButton(this.shzRight),App.CommonUtils.removeButton(this.shzLeft)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzHelp=e,__reflect(e.prototype,"shz.ShzHelp")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e,LayerManager.UI_Popup,"shz","ShzPopupskin")||this;return o._awardAnimation.initComponent(e),o._shzGameSet.initComponent(e),o._shzPrompt.initComponent(e),o._shzHelp.initComponent(e),o._shzRanking.initComponent(e),o._shzWinningRecord.initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.openMusic=function(){this._shzGameSet.openMusic()},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._shzHelp.addEvent(),this._shzGameSet.addEvent(),this._shzRanking.addEvent(),this._shzWinningRecord.addEvent(),this._shzPrompt.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._shzHelp.removeEvent(),this._shzGameSet.removeEvent(),this._shzRanking.removeEvent(),this._shzWinningRecord.removeEvent(),this._shzPrompt.removeEvent()},e.prototype.openPopupPenetrate=function(){this.touchEnabled=!1,this.touchChildren=!1},e.prototype.closePopupPenetrate=function(){this.touchEnabled=!0,this.touchChildren=!0},e.prototype.closeAwardView=function(){this._awardAnimation.closewinandBonus()},e.prototype.closeSettlementAnimation=function(){this.closePopupPenetrate(),this._awardAnimation.closeSettlementAnimation()},e.prototype.openBonus=function(t){this._awardAnimation.openBonus(t)},e.prototype.closeWinPopup=function(){this._awardAnimation.closeWinPopup()},e.prototype.settlementAnimation=function(t,e){this._awardAnimation.settlementAnimation(t,e)},e.prototype.setBillingScore=function(t){this._awardAnimation.setAwardScore(t)},e.prototype.getAwardScore=function(){return this._awardAnimation.getAwardScore()},e.prototype.openWinpopup=function(t){this._awardAnimation.openWinpopup(t)},e.prototype.showMenu=function(){this._shzPrompt.showMenu()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._awardAnimation.destroy(),this._shzHelp.destroy(),this._shzGameSet.destroy(),this._shzRanking.destroy(),this._shzWinningRecord.destroy(),this._shzPrompt.destroy()},e}(base.GameView);t.ShzPopupView=e,__reflect(e.prototype,"shz.ShzPopupView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){var t=e.call(this,"ShzPromptSkin")||this;return t.visible=!1,t}return __extends(o,e),o.prototype.showMenu=function(){this.visible=!0,this.PromptBg.visible=!0,this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu),this.applyFunc(t.ShzCallBacks.setPopupClickOpen)},o.prototype.closePoput=function(){this.PromptBg.visible=!1;var e=this;App.EffectUtils.hideUI(this.PromptMenu,200,0,function(){e.visible=!1}),this.applyFunc(t.ShzCallBacks.setPopupClick)},o.prototype.ConfirmMoney=function(){this.applyFunc("ConfirmMoney"),this.closePoput()},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzPrompt=e,__reflect(e.prototype,"shz.ShzPrompt")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=App.CommonUtils.money(this.data.win_money)+"",this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="shz_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="shz_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="shz_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))
},e.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.ShzRankIcon=e,__reflect(e.prototype,"shz.ShzRankIcon")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,"ShzRankingSkin")||this;return o.visible=!1,o}return __extends(o,e),o.prototype.showPopup=function(){App.EffectUtils.showView(this,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},this)},o.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick),App.MouseUtils.removeMouseWheel()},o.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length;for(var o=0;o<t.length;o++){var i=t[o];e.addItem(i)}this.refreshGameList(e)},o.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.ShzRankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},o.prototype.touchMove=function(e){this.ScrollBox.width=t.shzControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.shzControllerCon.Scroll_Bar_Height)},o.prototype.touchEnd=function(){this.ScrollBox.width=t.shzControllerCon.Scroll_Width,this.ScrollBox.x=t.shzControllerCon.Rank_Bar_X},o.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RankClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RankClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzRanking=e,__reflect(e.prototype,"shz.ShzRanking")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){return e.call(this,"ShzThirdButton")||this}return __extends(o,e),o.prototype.onBack=function(){this.applyFunc(t.shzControllerCon.postGetScore)},o.prototype.disabledBtn=function(){this.doubleRatio.enabled=!1,this._ratio.enabled=!1,this._halfRatio.enabled=!1,this._BtnGetScore.enabled=!1},o.prototype.lightbtn=function(){this.doubleRatio.enabled=!0,this._ratio.enabled=!0,this._halfRatio.enabled=!0,this._BtnGetScore.enabled=!0},o.prototype.huiBtnGetScore=function(){this._BtnGetScore.enabled=!1},o.prototype.setBetScore=function(t){this.uTxtTotalScore.text=t+""},o.prototype.getBetScore=function(){return Number(this.uTxtTotalScore.text)},o.prototype.getRabioMoney=function(){return this._userinfo.getMoney()},o.prototype.setRabioMoney=function(t){this._userinfo.setMoney(t)},o.prototype.betMoneyType=function(e){if(R.intervalTime()){var o=Number(e.currentTarget.name);this.applyFunc(t.ShzCallBacks.betMoneyType,o);var i=1==o?"SHZratio_half":2==o?"SHZratio_flat":"SHZratio_double";R.sendPlayerAction(i)}},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._BtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._ratio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._halfRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._BtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._ratio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._halfRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzThirdButton=e,__reflect(e.prototype,"shz.ShzThirdButton")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzUserInfo")||this}return __extends(e,t),e.prototype.setNickName=function(t){t&&(this.nickName.text=t)},e.prototype.setMoney=function(t){this.curryMoney.text=t+""},e.prototype.getMoney=function(){return this.curryMoney.text},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.ShzUserInfo=e,__reflect(e.prototype,"shz.ShzUserInfo")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,"ShzWinningRecordSkin")||this;return o.isCreateEnd=!1,o.visible=!1,o}return __extends(o,e),o.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1,App.EffectUtils.showView(this)},o.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1,e.isCreateEnd=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick),App.MouseUtils.removeMouseWheel()},o.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length,t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},o.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},o.prototype.shzRecordCreateEnd=function(){this.isCreateEnd||(this.isCreateEnd=!0,App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBox.touchEnabled=!0))},o.prototype.touchMove=function(e){this.ScrollBox.width=t.shzControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.shzControllerCon.Scroll_Bar_Height)},o.prototype.touchEnd=function(){this.ScrollBox.width=t.shzControllerCon.Scroll_Width,this.ScrollBox.x=t.shzControllerCon.Record_Bar_X},o.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RecordClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(t.shzControllerCon.shzRecordCreateEnd,this.shzRecordCreateEnd,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RecordClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(t.shzControllerCon.shzRecordCreateEnd,this.shzRecordCreateEnd,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);t.ShzWinningRecord=e,__reflect(e.prototype,"shz.ShzWinningRecord")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(){var t=e.call(this,"ShzToolBar")||this;return t.BtnType=0,t.boneList=[],t.boneName=["light","sweep"],t}return __extends(o,e),o.prototype.initComponent=function(t,o){e.prototype.initComponent.call(this,t,o),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate,this.ButtonExit0.visible=!App.isWebInsert},o.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},o.prototype.diceInit=function(){if(!this.boneList.length)for(var e=0;2>e;e++){var o=t.ShzGoldBones.create();this.moneyGroup.addChild(o),this.boneList.push(o)}},o.prototype.diceInitRenders=function(){for(var t=0;t<this.boneList.length;t++){var e=this.boneName[t];this.boneList[t].updateId(e);var o=43.5,i=50;this.boneList[t].setPosition(o,i),this.boneList[t].blendMode=egret.BlendMode.NORMAL,this.boneList[t].play(0)}},o.prototype.clearbone=function(){var t=this.boneList;if(t)for(;t.length;){var e=t.pop();e&&e.destroy()}},o.prototype.showMenu=function(t){var e=t.currentTarget.$children[0];App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(egret.Tween.get(this.MenuBox0).to({y:0},100),e.source="shz_menu_json.shuihu_ui_newset"):(e.source="shz_menu_json.shuihu_ui_setting",egret.Tween.get(this.MenuBox0).to({y:-239},100))},o.prototype.setonlineNum=function(t){this.OnlineNum.text=""+t},o.prototype.showHelp=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showHelp"),R.sendPlayerAction("SHZhelp_open")},o.prototype.showGameSet=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showGameSet"),R.sendPlayerAction("SHZset_open")},o.prototype.showranking=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showranking"),R.sendPlayerAction("SHZrank_open")},o.prototype.showRecord=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showRecord"),R.sendPlayerAction("SHZrecord_open")},o.prototype.payMoney=function(){this.applyFunc("geRechargeMoney")},o.prototype.backBody=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("backBody")},o.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},o.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.menu0,this.showMenu,this,{}),App.CommonUtils.effectButton(this.ButtonExit0,this.backBody,this,{}),App.CommonUtils.effectButton(this.ButtonHelp0,this.showHelp,this,{}),App.CommonUtils.effectButton(this.ButtonSetup0,this.showGameSet,this,{}),App.CommonUtils.effectButton(this.ranking0,this.showranking,this,{}),App.CommonUtils.effectButton(this.Record0,this.showRecord,this,{}),App.CommonUtils.effectButton(this.moneyGroup,this.payMoney,this,{})},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.menu0),App.CommonUtils.removeButton(this.ButtonExit0),App.CommonUtils.removeButton(this.ButtonSetup0),App.CommonUtils.removeButton(this.ranking0),App.CommonUtils.removeButton(this.Record0),App.CommonUtils.removeButton(this.moneyGroup),App.CommonUtils.removeButton(this.ButtonHelp0)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearbone()},o}(BaseEuiComponent);t.ToolBarview=e,__reflect(e.prototype,"shz.ToolBarview")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.test=function(){for(var t in this.linelist){if(this.linelist[t].length>1)for(var e=0;e<this.linelist[t].length;e++)this.shzarr.push(t),this.shzbrr.push(this.linelist[t][e]);else this.shzarr.push(t),this.shzbrr.push(this.linelist[t][0])}},t.Go_To_First_Game="Go_to_First_Game",t.Go_To_Second_Game="Go_to_Second_Game",t.Go_To_Third_Game="Go_to_Third_Game",t.Play_Ani_Flag="Play_Ani_Flag",t.CARD_HALF_WIDTH=74.5,t.CARD_HALF_HEIGHT=67.5,t.cardlist=[{openRole:2,openCardPlace:1},{openRole:1,openCardPlace:2},{openRole:2,openCardPlace:3},{openRole:4,openCardPlace:4},{openRole:1,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:2,openCardPlace:7},{openRole:1,openCardPlace:8},{openRole:2,openCardPlace:9},{openRole:6,openCardPlace:10},{openRole:4,openCardPlace:11},{openRole:8,openCardPlace:12},{openRole:2,openCardPlace:13},{openRole:7,openCardPlace:14},{openRole:1,openCardPlace:15}],t.GenExchange={winScore:1e4,islottery:!1,lotteryNum:0,psGenOpenline:[{openLine:1,shuihuRole:[{shuihuRole:1,openLinePlace:2},{shuihuRole:1,openLinePlace:5},{shuihuRole:1,openLinePlace:8}]},{openLine:4,shuihuRole:[{shuihuRole:2,openLinePlace:1},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:9}]},{openLine:5,shuihuRole:[{shuihuRole:2,openLinePlace:3},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:7}]}]},t.linelist={1:[[1,4,7],[7,10,13]],3:[[3,6,9]]},t.shzarr=[],t.shzbrr=[],t}();t.NoticeConst=e,__reflect(e.prototype,"shz.NoticeConst")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("shz.BoneAniFlag");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("shz.BoneAniFlag","destroy")},e.prototype.initDBRes=function(o){t.prototype.initDBRes.call(this,o),this.armature=this.createArmature("ani",o,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this),this.visible=!1},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.stopGame=function(){this.armature&&this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj),this.visible=!1},e.prototype.play=function(){this.visible=!0,this.armature.play(e.Animation)},e.Animation="action1",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.BoneAniFlag=e,__reflect(e.prototype,"shz.BoneAniFlag")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.Game_Start_Req="Game_Start_Req",t.Game_Start_Back="Game_Start_Back",t.Get_Score_Req="Get_Score_Req",t.Get_Score_Back="Get_Score_Back",t.getRecordNum="getRecordNum",t}();t.SecondGameConst=e,__reflect(e.prototype,"shz.SecondGameConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.Scroll_Bar_Height=96,t.Scroll_Width=50,t.Renew_Scroll_Width=900,t.Rank_Bar_X=659,t.Record_Bar_X=657,t.CARD_PREFIX="result_",t.CARD_NORMAL_SUFFIX="_png",t.CARD_ASH_SUFFIX="_1_png",t.CARD_MOVE_SUFFIX="_1_1_png",t.CARD_FLASH_SUFFIX="_2_1_png",t.CARD_WIN_SUFFIX="_3_1_png",t.Game_Enter_Res="Game_Enter_Res",t.ondoubleBet="ondoubleBet",t.onNormalBet="onNormalBet",t.onhalfBet="onhalfBet",t.ondiceBet="ondiceBet",t.betMoneyblack="betMoneyblack",t.dicelotteryresult="dicelotteryresult",t.setRatioScore="setRatioScore",t.postGetScore="postGetScore",t.playGetScore="playGetScore",t.rankingScore="rankingScore",t.winningScore="winningScore",t.overall="full",t.shzRecordCreateEnd="shzRecordCreateEnd",t.openThirdWinpopup="openThirdWinpopup",t.Online="Online",t.basebet="basebet",t.NET_MSG={PLAYER_BET_REQ:"10801",PLAYER_BET_RES:"10802",PLAYER_ALL_STOP_REQ:"10803",GENROLE_CARD_RES:"10804",GENEXCHANGE_REQ:"10805",GEN_GET_SCORE_REQ:"10806",GEN_GET_SCORE_RES:"10807",COMP_REQ:"10811",COMP_RES:"10812",COMP_GAME_BET_REQ:"10813",COMP_BET_RES:"10814",DICE_RES:"10815",ONLINE_NUM:"10816",LEADER_BOARD_REQ:"10817",LEADER_BOARD_RES:"10818",RECORD_REQ:"10819",RECORD_RES:"10820",FINISH_REQ:"10821",RESULT_REQ:"10822",RESULT_RES:"10823",BASE_BET_RES:"10824",LOTT_MARQUEE_REQ:"10826"},t.onPlayerBetResCallBack="1001",t.onGenRoleCardResCallBack="1002",t.onGenExchangeResCallBack="1003",t.onLeaderBoardResCallBack="1004",t.onOnlineNumCallBack="1005",t.onLeaveSceneResCallBack="1006",t.onGenGetScoreResResCallBack="1007",t.setJettonCallBack="1008",t.onResultCallBack="1009",t}();t.shzControllerCon=e,__reflect(e.prototype,"shz.shzControllerCon");var o;!function(t){t[t.onPlayerBetResCallBack=1001]="onPlayerBetResCallBack",t[t.onGenRoleCardResCallBack=1002]="onGenRoleCardResCallBack",t[t.onGenExchangeResCallBack=1003]="onGenExchangeResCallBack",t[t.onLeaderBoardResCallBack=1004]="onLeaderBoardResCallBack",t[t.onOnlineNumCallBack=1005]="onOnlineNumCallBack",t[t.onLeaveSceneResCallBack=1006]="onLeaveSceneResCallBack",t[t.onGenGetScoreResResCallBack=1007]="onGenGetScoreResResCallBack",t[t.setJettonCallBack=1008]="setJettonCallBack",t[t.onResultCallBack=1009]="onResultCallBack",t[t.onSetBaseBetRes=1010]="onSetBaseBetRes",t[t.onEnterThirdGameBack=1011]="onEnterThirdGameBack",t[t.goEnterThirdGame=1012]="goEnterThirdGame",t[t.betMoneyType=1013]="betMoneyType",t[t.buttonAppears=1014]="buttonAppears",t[t.setPopupClick=1015]="setPopupClick",t[t.setPopupClickOpen=1016]="setPopupClickOpen",t[t.sendLottMarquee=1017]="sendLottMarquee"}(o=t.ShzCallBacks||(t.ShzCallBacks={}));var i;!function(t){t[t.ordinary=1]="ordinary",t[t.goldColor=2]="goldColor",t[t.overall=3]="overall"}(i=t.ShzwinnTypesConst||(t.ShzwinnTypesConst={}));var n;!function(t){t[t.halfBet=1]="halfBet",t[t.NormalBet=2]="NormalBet",t[t.doubleBet=3]="doubleBet"}(n=t.ShzbetTypeConst||(t.ShzbetTypeConst={}));var s;!function(t){t[t.BetSucc=1]="BetSucc",t[t.BetErrorNoEnoughMoney=2]="BetErrorNoEnoughMoney",t[t.BetNotMoney=3]="BetNotMoney",t[t.BetErrorState=4]="BetErrorState"}(s=t.ShzBetResultCode||(t.ShzBetResultCode={}));var r;!function(t){t[t.AllFalse=1]="AllFalse",t[t.AllTrue=2]="AllTrue",t[t.AddTrue=3]="AddTrue",t[t.LessTrue=4]="LessTrue"}(r=t.ShzBetMoneyBtnType||(t.ShzBetMoneyBtnType={}))}(shz||(shz={}));var shz;!function(t){var e;!function(t){t[t.Base=6100]="Base",t[t.FistGame=6101]="FistGame",t[t.SecondGame=6102]="SecondGame",t[t.ThirdGame=6103]="ThirdGame",t[t.Tip=6104]="Tip",t[t.brnnPopup=6105]="brnnPopup",t[t.ThirdPopup=6106]="ThirdPopup",t[t.FirstPopup=6107]="FirstPopup",t[t.Marry_Message=6108]="Marry_Message",t[t.Recharge=6109]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.First=1,t.Second=2,t.Third=3,t}();t.GameType=e,__reflect(e.prototype,"shz.GameType");var o=function(o){function i(){var t=o.call(this)||this;return t._proxy=null,t._viewTip=null,t._view=null,t._mCtrlFirst=null,t._mCtrlSecond=null,t._mCtrlThird=null,t._mMarryView=null,t._mCurrGameType=0,t}return __extends(i,o),i.prototype.onCreate=function(){o.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){o.prototype.onInit.call(this),this.registers(),this.gotoFirstGame({score:0,isBet:!1,isAuto:!1}),App.ViewManager.open(t.ViewConst.Tip),App.ViewManager.open(t.ViewConst.Marry_Message),App.ViewManager.open(t.ViewConst.Base)},i.prototype.onExitGame=function(){o.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.inits=function(){o.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._viewTip=new t.GameTipView(this),this._mMarryView=new t.GameMarryView(this),this._mCtrlFirst=new t.GameCtrlFirst(this),this._mCtrlSecond=new t.GameCtrlSecond(this),this._mCtrlThird=new t.GameCtrlThird(this),this._mCtrlFirst.onCreate(),this._mCtrlSecond.inits(),this._mCtrlThird.inits()},i.prototype.gotoFirstGame=function(t){this._mCurrGameType>0&&this.onPlayAniFlag(),this._mCurrGameType=e.First,this._mCtrlThird.closeGame(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.openGame(t)},i.prototype.gotoSecondGame=function(t){this._mCurrGameType=e.Second,this.onPlayAniFlag(),this._mCtrlThird.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlSecond.openGame(t)},i.prototype.gotoThirdGame=function(t){this._mCurrGameType=e.Third,this.onPlayAniFlag(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlThird.openGame(t)},i.prototype.onPlayAniFlag=function(){this._viewTip.playFlag()},i.prototype.registers=function(){o.prototype.registers.call(this),this._mCtrlFirst.registers(),this._mCtrlSecond.registers(),this._mCtrlThird.registers(),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerRecharge(),this.registerRedpacket(),App.ViewManager.register(t.ViewConst.Tip,this._viewTip),App.ViewManager.register(t.ViewConst.Marry_Message,this._mMarryView),this.registerFunc(t.NoticeConst.Go_To_First_Game,this.gotoFirstGame,this),this.registerFunc(t.NoticeConst.Go_To_Second_Game,this.gotoSecondGame,this),this.registerFunc(t.NoticeConst.Go_To_Third_Game,this.gotoThirdGame,this),this.registerFunc(t.NoticeConst.Play_Ani_Flag,this.onPlayAniFlag,this)},i.prototype.addListeners=function(){o.prototype.addListeners.call(this),this._mCtrlFirst.addListeners(),this._mCtrlSecond.addListeners(),this._mCtrlThird.addListeners(),this._proxy.addEvent()},i.prototype.removeListeners=function(){o.prototype.removeListeners.call(this),this._mCtrlFirst.removeListeners(),this._mCtrlSecond.removeListeners(),this._mCtrlThird.removeListeners(),this._proxy.removeEvent()},i.prototype.onUserMoneyChange=function(t){var e=this._mCurrGameType;switch(e){case 1:this._mCtrlFirst.onFirstUserMoneyChange(t);break;case 2:this._mCtrlSecond.onSecondUserMoneyChange(t);break;case 3:this._mCtrlThird.onThirdUserMoneyChange(t)}},i.prototype.getModel=function(){return this._model},i.prototype.getGameType=function(){return this._mCurrGameType},i.prototype.destroy=function(){o.prototype.destroy.call(this),this._mCtrlFirst.destroy(),this._mCtrlSecond.destroy(),this._mCtrlThird.destroy(),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._mCtrlFirst=void 0,this._mCtrlSecond=void 0,this._mCtrlThird=void 0,this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.GameController);t.GameController=o,__reflect(o.prototype,"shz.GameController")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t)||this;return o._mViewFirst=null,o._PopupView=null,o._ShzGoldBones=null,o._model=null,o._proxy=null,o.betSucc=0,o.setAutomaticList=[25,50,100],o.soundlist=["shuihuzhuan","zhongyitang","titianxingdao","songjiang","linchong","luzhisheng","dao","qiang","fu"],o.drawlist=[0,1e4],o}return __extends(o,e),o.prototype.getGameController=function(){return this.getController()},o.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()")},o.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModelFirst(this.getController()),this._proxy=new t.GameProxyFirst(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController())},o.prototype.openGame=function(e){null==this._mViewFirst&&(this._mViewFirst=new t.FirstGameView(this.getController()),App.ViewManager.register(t.ViewConst.FistGame,this._mViewFirst),this._mViewFirst.approachAnimation(),this.enterGameInfo()),Log.log("进入游戏1data",e),this._model.init(e.score),App.ViewManager.register(t.ViewConst.FirstPopup,this._PopupView),App.ViewManager.open(t.ViewConst.FistGame,this._model),App.ViewManager.open(t.ViewConst.FirstPopup),App.SoundManager.playBg("bgm1_mp3"),this._model.isEffect=this.getGameController().getModel().isEffect,this._model.isAuto=e.isAuto,e.isBet&&this.restGame();var o=this;R.setTimeOnce(function(){if(o._model.isbet&&o._model.isAuto&&o._model.automaticTime>=0||o._model.isbet&&o._model.isAuto&&-2==o._model.automaticTime){if(0==o._model.automaticTime)return o._mViewFirst.stopAutomatic(),o._model.isAuto=!1,void o.restGame();o.post()}else o._mViewFirst.stopAutomatic(),o._mViewFirst.lightVisible()},this,500),this.gameJoin()},o.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.FistGame)},o.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc("startGame",this.startGame,this),this.registerFunc("stopGame",this.stopGame,this),this.registerFunc("overone",this.overone,this),this.registerFunc("backBody",this.backBody,this),this.registerFunc("winningsettype",this.winningsettype,this),this.registerFunc("setscoreGame",this.setscoreGame,this),this.registerFunc("gameStart",this.gameStart,this),this.registerFunc("setAutomaticNumber",this.setAutomaticNumber,this),this.registerFunc("setbetMoney",this.setbetMoney,this),this.registerFunc("stopAllGame",this.stopAllGame,this),this.registerFunc("stopShufflecard",this.stopShufflecard,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showranking",this.showranking,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("RatioGame",this.RatioGame,this),this.registerFunc(t.shzControllerCon.Game_Enter_Res,this.gameEnter,this),this.registerFunc(t.shzControllerCon.rankingScore,this.rankingScore,this),this.registerFunc(t.shzControllerCon.winningScore,this.winningScore,this),this.registerFunc("effectSwitch",this.effectSwitch,this),this.registerFunc("geRechargeMoney",this.geRechargeMoney,this),this.registerFunc("ConfirmMoney",this.ConfirmMoney,this),this.registerFunc(t.ShzCallBacks.setPopupClick,this.setPopupClick,this),this.registerFunc(t.ShzCallBacks.setPopupClickOpen,this.setPopupClickOpen,this),this._PopupView.openMusic()},o.prototype.enter2edGame=function(){var e=this._mViewFirst.getTotalMoney(),o=this._model._winScore,i=this._model._blance;this._PopupView.closeAwardView();var n=this._model.isAuto;this.applyFunc(t.NoticeConst.Go_To_Second_Game,{score:o,award:0,bet:e,money:i,isAuto:n})},o.prototype.enter3edGame=function(e){var o=this._model._blance,i=this._model._winScore,n=e;this._PopupView.closeAwardView(),this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:i,award:0,bet:o,limit:n})},o.prototype.onFirstUserMoneyChange=function(t){this._model._mFirstScore=t.balance;var e=App.CommonUtils.money2Str(this._model._mFirstScore);this._mViewFirst.gameSetMoney(e)},o.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.addDataListeners(),this.addEventListeners(),this._proxy.addEvent()},o.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},o.prototype.addDataListeners=function(){this._model.isBetDataNotify.addDataListener(this.isBetCallBack,this),this._model.isAutoBetDataNotify.addDataListener(this.isAutoBetCallBack,this),this._model.automaticTimeNotify.addDataListener(this.automaticTimeCallBack,this)},o.prototype.enterGameInfo=function(){this._model.isOpenGame=!0;for(var e in this._model.initGameMss)if(null!=this._model.initGameMss[e]){var o=this._model.initGameMss[e];switch(e){case t.shzControllerCon.Online:this.onOnlineNumCallBack(o);break;case t.shzControllerCon.basebet:this.onSetBaseBetRes(o)}}},o.prototype.startGame=function(){this.post(),this._mViewFirst.GroupLine.alpha=1,this._model.isAuto&&this._mViewFirst.stopAutomatic()},o.prototype.post=function(){if(this._model.initBetList.length){var t=(this._model.initBetList[0],App.CommonUtils.moneyself(this._model._blance),1e4*this._model.betMoney);if(!this.isLimit(t,this._model.isAuto)){t=1e4*this._model.betMoney;var e=[],o={isAuto:this._model.isAuto,betMoney:t};e.push(o);var i={betinfo:e};this._proxy.requestBet(i),this._mViewFirst.setStartGameBone(!1)}}},o.prototype.isLimit=function(t,e){void 0===e&&(e=!1);var o=!1,i=this._model._blance,n=1e4*this._model.initBetList[0]*9;return 0>=i?(this._PopupView.showMenu(),this._mViewFirst.startGameAppear(),o=!0):t>i&&(i>=n?e?(this._model.betMoney=this.autoSwitchbet(i),App.ScrollTxtTips.showTip("余额不足，已自动切换底注"),o=!1):(this._PopupView.showMenu(),this._mViewFirst.startGameAppear(),o=!0):(this._mViewFirst.startGameAppear(),this._model.isAuto&&this._mViewFirst.stopAutomatic(),this._mViewFirst.gameoverButtontype(this._model.isAuto),this._PopupView.showMenu(),o=!0)),o},o.prototype.autoSwitchbet=function(t){for(var e=this._model.initBetList,o=0;o<e.length;o++){var i=e[o],n=9*i,s=o;if(t>=n)return this._mViewFirst.setAllBetMoney(n),this._mViewFirst.setScore(i),this._mViewFirst.setIndex(s),n}},o.prototype.scorePost=function(){var t={gametype:1};this._proxy.requestScore(t),this._mViewFirst.scoreButtonType()},o.prototype.stopGame=function(){},o.prototype.overone=function(t){this.openCard(t)},o.prototype.backBody=function(){this._proxy.sendLeaveGame()},o.prototype.setScore=function(t){this._PopupView.openWinpopup(t)},o.prototype.seTNumScore=function(t){this._PopupView.openWinpopup(t)},o.prototype.winningsettype=function(t){this._mViewFirst.winningtype(t)},o.prototype.setscoreGame=function(){this._model.readyScore=!1,this.scorePost()},o.prototype.gameStart=function(){this._model.isbet=!0,this._model.isBetDataNotify.setData(this._model.isbet)},o.prototype.setAutomaticNumber=function(t){this._model.isAuto=!0,this._model.selectionTimes=t,3>t&&this._model.isbet?(this._model.automaticTime=this.setAutomaticList[t],R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times"),this.post()):3>t&&!this._model.isbet?(this._mViewFirst.timesButton(),this._model.automaticTime=this.setAutomaticList[t],this._mViewFirst.setcurrentTime(this._model.automaticTime),R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times")):3==t&&this._model.isbet?(this._mViewFirst.setcurrentTime("无限"),this.post(),R.sendPlayerAction("SHZauto_unlimitedtimes"),this._model.automaticTime=-2):3!=t||this._model.isbet||(this._mViewFirst.timesButton(),this._mViewFirst.setcurrentTime("无限"),this._model.automaticTime=-2,R.sendPlayerAction("SHZauto_unlimitedtimes")),this._model.readyScore&&this.setscoreGame()},o.prototype.AutomaticReduce=function(){this._model.selectionTimes<3&&this._model.automaticTime>=1&&this._model.automaticTime--},o.prototype.setbetMoney=function(t){this._model.betMoney=t},o.prototype.stopAllGame=function(){this._model.isAuto&&(this._model.isAuto=!1,R.sendPlayerAction("SHZauto_cancel")),this._model.selectionTimes=0,this._model.automaticTime=0},o.prototype.stopShufflecard=function(){this._mViewFirst.stopShuffle()},o.prototype.showHelp=function(){this.closePopupPenetrate(),this._PopupView._shzHelp.showPopup()},o.prototype.showGameSet=function(){this.closePopupPenetrate(),this._PopupView._shzGameSet.initSet(),this._PopupView._shzGameSet.showPopup()},o.prototype.showranking=function(){this.closePopupPenetrate(),this._proxy.ranking({index:0,size:100}),App.EasyLoading.showOnTimeOut(),this._PopupView._shzRanking.showPopup()},o.prototype.showRecord=function(){this.closePopupPenetrate(),this._PopupView._shzWinningRecord.showPopup();var t=this.getGameController().getModel().recordList;t.length&&this._PopupView._shzWinningRecord.rankData(t)},o.prototype.rankingScore=function(t){this._PopupView._shzRanking.rankData(t)},o.prototype.winningScore=function(t){},o.prototype.effectSwitch=function(t){this.getGameController().getModel().isEffect=t,this._model.isEffect=t,t?(this._mViewFirst.closeEffect(),R.sendPlayerAction("SHZeffect_without")):R.sendPlayerAction("SHZeffect_with")},o.prototype.geRechargeMoney=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.ConfirmMoney=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.setPopupClick=function(){this.openPopupPenetrate()},o.prototype.setPopupClickOpen=function(){this.closePopupPenetrate()},o.prototype.isBetCallBack=function(){},o.prototype.isAutoBetCallBack=function(){},o.prototype.automaticTimeCallBack=function(){},o.prototype.addEventListeners=function(){this.registerFunc(t.ShzCallBacks.onPlayerBetResCallBack,this.onPlayerBetResCallBack,this),this.registerFunc(t.ShzCallBacks.onGenRoleCardResCallBack,this.onGenRoleCardResCallBack,this),this.registerFunc(t.ShzCallBacks.onGenExchangeResCallBack,this.onGenExchangeResCallBack,this),this.registerFunc(t.ShzCallBacks.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.ShzCallBacks.onGenGetScoreResResCallBack,this.onGenGetScoreResResCallBack,this),this.registerFunc(t.ShzCallBacks.onResultCallBack,this.onResultCallBack,this),this.registerFunc(t.ShzCallBacks.onSetBaseBetRes,this.onSetBaseBetRes,this)
},o.prototype.refreshBoard=function(){for(var e=[],o=["恭喜玩家 test001， 中1000倍大奖，获得奖金10000000。","恭喜玩家 test001 ，中全盘1000倍大奖，获得奖金8888888888888。","恭喜玩家 test001 在彩金游戏中，赢得奖金9999999999。","恭喜玩家 test001 在比倍游戏中100连胜，赢得奖金66666666666。","仅仅是测试数据，不要当真。"],i=0;i<o.length;i++){var n=new t.BroadcastMsg;n.mPriority=i,n.mTxtMsg=o[i],n.mPlayTimes=i,e.push(n)}this._mViewFirst.RoleMessage.addMsg(e)},o.prototype.onPlayerBetResCallBack=function(e){if(Log.log("onPlayerBetResCallBack",e),e.result==t.ShzBetResultCode.BetSucc){var o=App.CommonUtils.money2Str(e.balance),i=this._mViewFirst.automaticValue();this._model._blance=e.balance,this._mViewFirst.setUserMoney(o),this._model.isAuto&&i&&this._mViewFirst.timesButton()}else this._mViewFirst.startGameAppear(),e.result==t.ShzBetResultCode.BetErrorNoEnoughMoney?this._PopupView.showMenu():App.ScrollTxtTips.showTip("不存在该投注金额")},o.prototype.onGenRoleCardResCallBack=function(t){if(Log.log("onGenRoleCardResCallBack",t),t){this.resetOpenCard();for(var e=t.rolecard,o=e.toString(),i=[],n=0;n<o.length;n++)i.push(o[n]),this._model.roleList.push(Number(o[n]));for(var s=this._model.cardlist,r=0;r<s.length;r++){var a=s[r];a.openRole=i[r]}}},o.prototype.onGenExchangeResCallBack=function(e){if(Log.log("onGenExchangeResCallBack",e),e){if(this.resetSettlementData(),this._model._winScore=e.winScore,this._model._islottery=e.islottery,this._model._lotteryNum=e.lotteryNum,this.betShow(),!e.openline)return;if("full"==e.openline)this._model.winnTypes=e.openline,this._model.winLine=[].concat(t.conFun.winLine),this._model.winPos=[].concat(t.conFun.winPos);else{var o=JSON.parse(e.openline);this._model.winnTypes=void 0;for(var i in o){if(o[i].length>1)for(var n=0;n<o[i].length;n++)this._model.winLine.push(i),this._model.winPos.push(o[i][n]);else this._model.winLine.push(i),this._model.winPos.push(o[i][0])}}}},o.prototype.onOnlineNumCallBack=function(t){Log.log("onOnlineNumCallBack",t),this._model.isOpenGame&&this._mViewFirst._toolBarView.setonlineNum(t.OnlineNumber)},o.prototype.onGenGetScoreResResCallBack=function(t){Log.log("onGenGetScoreResResCallBack",t),t.balance&&(App.SoundManager.playEffect("defen1_mp3"),this._model._blance=t.balance,this.playGetScore())},o.prototype.onResultCallBack=function(t){Log.log("onResultCallBack",t)},o.prototype.onSetBaseBetRes=function(t){if(Log.log("onSetBaseBetRes",t),this._model.isOpenGame){this._model.initBetList.length=0,this._model.initBetList=[];for(var e=App.CommonUtils.copyDataHandler(t.basebet),o=[],i=0;i<e.length;i++){var n=Number(App.CommonUtils.money2StrTwo(e[i]));o.push(n)}this._model.initBetList=o.sort(function(t,e){return t-e}),this._mViewFirst.setScorelist(this._model.initBetList)}},o.prototype.winSpecialEffects=function(){for(var t=0;t<this._model.winPos.length;t++)App.TimerManager.doTimer(0+960*t,1,this.effect.bind(this,t),this,this.winSpecialEffectsover.bind(this,t),this)},o.prototype.effect=function(t){var e=this._model.winPos[t],o=this._model.winLine[t],i=this._model.isEffect;i||(this._mViewFirst.surround(e),this.linefish(e)),this._mViewFirst.lotteryLine(o),this._mViewFirst.lightShow(o),this.oneWinHight(e)},o.prototype.winSpecialEffectsover=function(t){var e=this;t==this._model.winPos.length-1&&App.TimerManager.doTimer(960,1,function(){e.allwinAnimation(this._model.winPos),e.alllightTwinkle(this._model.winLine)},this)},o.prototype.settlementResult=function(){var t=this;App.SoundManager.playEffect("zhanshi_mp3"),this._mViewFirst.closeEffect(),this._model.isEffect?(this.setScore(App.CommonUtils.money2Str(this._model._winScore)),this.winningsettype(this._model._islottery)):this.EffectAccount(),this._model._islottery?(this.winningsettype(this._model._islottery),App.TimerManager.doTimer(2e3,1,this.resultLottery,this)):this._model.isAuto?App.TimerManager.doTimer(1500,1,function(){t._model.isAuto?t.scorePost():t._model.readyScore=!0},this):this._model.readyScore=!0},o.prototype.EffectAccount=function(){var e=this,o=this._mViewFirst.getDIScore,i=App.CommonUtils.money2Str(this._model._winScore),n=App.CommonUtils.moneyself(Number(i)/o),s=0;this._model.winnTypes==t.shzControllerCon.overall?s=3:49>=n?s=0:n>=50&&119>=n?s=1:n>=120&&(s=2),this._PopupView.settlementAnimation(i,s),R.setTimeOnce(function(){e.winningsettype(this._model._islottery)},this,700)},o.prototype.resultLottery=function(){var t=this;this._PopupView.closeWinPopup(),this._PopupView.openBonus(this._model._lotteryNum),App.TimerManager.doTimer(1500,1,function(){Log.log("进入第二个游戏"),t._model._islottery=!1,t.enter2edGame()},this)},o.prototype.RatioGame=function(){this._proxy.reqEnterGame()},o.prototype.gameEnter=function(t){if(Log.log("进入第三个游戏"),t.isEnter){var e=t.limit[0].limitmoney;this.enter3edGame(e),this._model.readyScore=!1}},o.prototype.overallAwardTest=function(){var t=this._model.isEffect,e=this;if(!t)for(var o=this._model.cardlist,i=0;i<o.length;i++){var n=o[i];this._mViewFirst.setSurround(n.openCardPlace),this._mViewFirst.flashAnimation(n.openRole,n.openCardPlace)}for(var i=1;10>i;i++)this._mViewFirst.lotteryLine(i),this._mViewFirst.twinklelight(i);this.winHight(this._model.winPos),App.TimerManager.doTimer(1100,1,function(){e.allwinAnimation(this._model.winPos),e.alllightTwinkle(this._model.winLine)},this)},o.prototype.linefish=function(t){for(var e=0;e<t.length;e++){var o=Number(t[e]),i=this._model.cardlist[o-1].openRole;this._mViewFirst.flashAnimation(i,o)}},o.prototype.allwinAnimation=function(t){App.TimerManager.removeAll(this),this._mViewFirst.closetime();var e=this.findOpenRole();App.SoundManager.playEffect(this.soundlist[e-1]+"_mp3");for(var o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++){var n=Number(t[o][i]),s=this._model.cardlist[n-1].openRole;this._mViewFirst.individualAward(s,n)}var r=this;R.setTimeOnce(function(){r.settlementResult(),r.stopAllLighttTwinkle()},this,1900),this.winHight(this._model.winPos)},o.prototype.findOpenRole=function(){for(var t=this._model.winPos,e=[],o=[],i=0,n=0;n<t.length;n++)for(var s=0;s<t[n].length;s++){var r=Number(t[n][s]),a=this._model.cardlist[r-1].openRole;e.push(a)}o=this.findSameValue(e);var h=o.sort(function(t,e){return t.length==e.length?t[0]-e[0]:e.length-t.length});return i=h[0][0]},o.prototype.findSameValue=function(t){var e=t.sort(function(t,e){return t-e});if(!(e.length<=0)){for(var o=[],i=-1,n=0;n<e.length;n++){var s=e[n];i==s?o[o.length-1].push(s):(i=s,o.push([s]))}return o.length>1&&1==o[0][0]&&o.splice(0,1),o}},o.prototype.shzLight=function(){for(var t=0;t<this._model.winLine.lenght;t++)this._mViewFirst.oneShzlight(t)},o.prototype.alllightTwinkle=function(t){for(var e=0;e<t.length;e++){var o=Number(t[e]);this._mViewFirst.twinklelight(o)}},o.prototype.stopAllLighttTwinkle=function(){for(var t=this._model.winLine,e=0;e<t.length;e++){var o=t[e];this._mViewFirst.stoptTwinklelight(o)}},o.prototype.betShow=function(){this._model.isbet=!1,this._mViewFirst.rotarybuttontype(),this._mViewFirst.changeCard(),this._mViewFirst.onebyonelight(),this._model.isAuto&&!this._model.isbet&&this._model.automaticTime>=1&&(this.AutomaticReduce(),this._mViewFirst.setcurrentTime(this._model.automaticTime))},o.prototype.gameJoin=function(){var t=this.player;if(this._mViewFirst.setUserName(t.getNickName()),this._model._mFirstScore>0){this._model._blance=this._model._mFirstScore;var e=App.CommonUtils.money2Str(this._model._mFirstScore);this._mViewFirst.gameSetMoney(e)}else{this._model._blance=t.getMoney();var o=App.CommonUtils.money2Str(t.getMoney());this._mViewFirst.gameSetMoney(o)}this._mViewFirst.setUserImage("ui_headImg_"+t.getAvatar()),this._mViewFirst.setUserFrame("ui_headBox_"+t.getAvatarBox()),this._model._mFirstScore=0},o.prototype.openCard=function(t){var e=this._mViewFirst["GroupList"+t];App.SoundManager.playEffect("tingzhi_mp3");for(var o,i,n=this._model.cardlist,s=function(){var s=n[a];o=Math.floor((s.openCardPlace-1)/3)+1,i=Math.floor((s.openCardPlace-1)%3);var h=r;t==o&&(e.getChildAt(i).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+s.openRole),e==r._mViewFirst.GroupList5&&e.getChildAt(i)==r._mViewFirst.GroupList5.getChildAt(2)&&App.TimerManager.doTimer(167,1,function(){h._mViewFirst.stopShuffle(),h.openLottery()},r))},r=this,a=0;a<n.length;a++)s()},o.prototype.openLottery=function(){App.TimerManager.removeAll(this),this.setSHZantesPlayat();var e=this,o=Number(App.CommonUtils.money2Str(this._model._winScore));if(0!=o)this._mViewFirst.winandNotype(o),this._model.winnTypes==t.shzControllerCon.overall?this.overallAwardTest():this.generalAward();else if(Log.log("结果未中奖"),this._mViewFirst.lightVisible(),this.cardAahes(),this.restGame(),this.getGameController().getModel().isGameOver=!0,this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return this._mViewFirst.stopAutomatic(),void this.restGame();App.TimerManager.doTimer(1e3,1,function(){this._model.isAuto&&e.post()},this)}},o.prototype.setSHZantesPlayat=function(){var t=this._mViewFirst.getDIScore();R.sendPlayerAction("SHZantes_playat"+t)},o.prototype.generalAward=function(){this.winSpecialEffects(),this.cardAahes()},o.prototype.Next=function(){},o.prototype.getsurround=function(t){},o.prototype.cardAahes=function(){for(var t=this._model.cardlist,e=0;e<t.length;e++){var o=t[e],i=Math.floor((o.openCardPlace-1)/3)+1,n=Math.floor((o.openCardPlace-1)%3);this._mViewFirst["GroupList"+i].getChildAt(n).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+o.openRole+"_1")}},o.prototype.winHight=function(t){for(var e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++){var i=Number(t[e][o]),n=this._model.cardlist[i-1].openRole,s=Math.floor((i-1)/3)+1,r=Math.floor((i-1)%3);this._mViewFirst["GroupList"+s].getChildAt(r).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+n)}},o.prototype.oneWinHight=function(t){this.cardAahes();for(var e=0;e<t.length;e++){var o=Number(t[e]),i=this._model.cardlist[o-1].openRole,n=Math.floor((o-1)/3)+1,s=Math.floor((o-1)%3);this._mViewFirst["GroupList"+n].getChildAt(s).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+i)}},o.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),o=App.CommonUtils.money2Str(t);if(Number(o)>0){var i={time:e,money:o};this.getGameController().getModel().recordList.unshift(i)}this.getGameController().getModel().changerecordList()},o.prototype.playGetScore=function(){Log.log("开始播放得分动画!"),this._model.isbet=!0;var t=this,e=Number(this._mViewFirst.gameGetMoney()),o=Number(App.CommonUtils.money2Str(this._model._winScore)),i=o/30;this.setRecordInit(this._model._winScore),App.TimerManager.doTimer(32,999,function(){if(e+=i,o-=i,t._mViewFirst.gameSetMoney(App.CommonUtils.moneyself(e)),t._PopupView.setBillingScore(App.CommonUtils.moneyself(o)),i>=o){if(t._PopupView.setBillingScore(0),t._mViewFirst.gameSetMoney(App.CommonUtils.money2Str(this._model._blance)),t._mViewFirst.lightVisible(),t.restGame(),t._model.isbet&&t._model.isAuto&&t._model.automaticTime>=0||t._model.isbet&&t._model.isAuto&&-2==t._model.automaticTime){if(0==t._model.automaticTime)return t._mViewFirst.stopAutomatic(),t.restGame(),void App.TimerManager.removeAll(t);t.automaticNext()}t._model.isAuto||App.TimerManager.removeAll(t)}},this)},o.prototype.restGame=function(){this._PopupView.closeAwardView(),this._PopupView.closeSettlementAnimation(),this._mViewFirst.gameHight(),this._mViewFirst.gameoverButtontype(this._model.isAuto),this._model.isbet=!0},o.prototype.automaticNext=function(){var t=this;App.TimerManager.doTimer(1e3,1,function(){App.TimerManager.removeAll(t),this._model.isAuto&&t.post()},this)},o.prototype.resetSettlementData=function(){this._model._winScore=0,this._model._islottery=!1,this._model._lotteryNum=0,this._model.winPos=[],this._model.winLine=[]},o.prototype.resetOpenCard=function(){this._model.roleList=[];for(var t=this._model.cardlist,e=0;e<t.length;e++)t[e].openRole=0},o.prototype.openPopupPenetrate=function(){this._PopupView.openPopupPenetrate()},o.prototype.closePopupPenetrate=function(){this._PopupView.closePopupPenetrate()},o.prototype.getMoudel=function(){return this._model},o.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._mViewFirst&&this._mViewFirst.destroy(),this._PopupView.destroy(),App.TimerManager.removeAll(this),t.ShzGoldBones.cleanFormPool(),R.removeAllTimeOut(this),this._PopupView=void 0,this._model=void 0,this._proxy=void 0,this._mViewFirst=void 0,Log.trace("销毁 shz.GameVtrlFirst")},o}(base.GameSeparateCtrl);t.GameCtrlFirst=e,__reflect(e.prototype,"shz.GameCtrlFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t)||this;return o._mViewSecond=null,o._model=null,o._proxy=null,o}return __extends(o,e),o.prototype.getGameController=function(){return this.getController()},o.prototype.inits=function(){this._model=new t.GameModelSecond(this.getController()),this._proxy=new t.GameProxySecond(this.getController(),this._model)},o.prototype.openGame=function(e){null==this._mViewSecond&&(this._mViewSecond=new t.SecondGameView(this.getController()),App.ViewManager.register(t.ViewConst.SecondGame,this._mViewSecond)),Log.log("进入游戏2data",e),this._model.init(e.score,e.award,e.bet,e.money,e.isAuto),App.ViewManager.open(t.ViewConst.SecondGame,this._model),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm2_mp3")},o.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.SecondGame)},o.prototype.onGameStartReq=function(){this._proxy.reqGame()},o.prototype.onGameStartBack=function(){this._mViewSecond&&this._mViewSecond.startGame()},o.prototype.onGetScoreReq=function(){this._proxy.reqGetScore()},o.prototype.onGetScoreBack=function(){this._mViewSecond.playGetScore()},o.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),o=App.CommonUtils.money2Str(t);if(Number(o)>0){var i={time:e,money:o};this.getGameController().getModel().recordList.unshift(i)}this.getGameController().getModel().changerecordList()},o.prototype.onSecondUserMoneyChange=function(t){this._model.mPlayerMoney=t.balance;var e=App.CommonUtils.money2Str(this._model.mPlayerMoney);this._mViewSecond.setMoney(e)},o.prototype.onEnterThirdGameBack=function(t){if(t.isEnter){var e=t.limit[0].limitmoney;this.onNextGame(e)}},o.prototype.goEnterThirdGame=function(){this._proxy.reqEnterGame()},o.prototype.sendLottMarquee=function(){this._proxy.requestLottMarquee()},o.prototype.onNextGame=function(e){this._model.isAuto=!1,App.SoundManager.playEffect("lingdang_mp3");var o=this._model.mPlayerMoney,i=this._model.getTotalScore(),n=e;this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:i,award:0,bet:o,limit:n})},o.prototype.registers=function(){this.registerFunc(t.SecondGameConst.Game_Start_Req,this.onGameStartReq,this),this.registerFunc(t.SecondGameConst.Game_Start_Back,this.onGameStartBack,this),this.registerFunc(t.SecondGameConst.Get_Score_Req,this.onGetScoreReq,this),this.registerFunc(t.SecondGameConst.Get_Score_Back,this.onGetScoreBack,this),this.registerFunc(t.SecondGameConst.getRecordNum,this.setRecordInit,this),this.registerFunc(t.ShzCallBacks.onEnterThirdGameBack,this.onEnterThirdGameBack,this),this.registerFunc(t.ShzCallBacks.goEnterThirdGame,this.goEnterThirdGame,this),this.registerFunc(t.ShzCallBacks.sendLottMarquee,this.sendLottMarquee,this)},o.prototype.addListeners=function(){this._proxy.addEvent()},o.prototype.removeListeners=function(){this._proxy.removeEvent()},o.prototype.destroy=function(){e.prototype.destroy.call(this),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._mViewSecond&&this._mViewSecond.destroy(),this._model=void 0,this._proxy=void 0,this._mViewSecond=void 0},o}(base.GameSeparateCtrl);t.GameCtrlSecond=e,__reflect(e.prototype,"shz.GameCtrlSecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t)||this;return o._mViewThird=null,o._PopupView=null,o._model=null,o._proxy=null,o}return __extends(o,e),o.prototype.getGameController=function(){return this.getController()},o.prototype.inits=function(){this._model=new t.GameModelThird(this.getController()),this._proxy=new t.GameProxyThird(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController())},o.prototype.openGame=function(e){null==this._mViewThird&&(this._mViewThird=new t.ThirdGameView(this.getController()),App.ViewManager.register(t.ViewConst.ThirdGame,this._mViewThird)),Log.log("进入游戏3data",e),this._model.init(e.score,e.award,e.bet,e.limit),App.ViewManager.register(t.ViewConst.ThirdPopup,this._PopupView),App.ViewManager.open(t.ViewConst.ThirdGame,this._model),App.ViewManager.open(t.ViewConst.ThirdPopup),this._PopupView.initUI(),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm3_mp3")},o.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.ThirdGame)},o.prototype.registers=function(){this.registerFunc(t.ShzCallBacks.betMoneyType,this.betMoneyType,this),this.registerFunc(t.shzControllerCon.ondiceBet,this.ondiceBet,this),this.registerFunc(t.shzControllerCon.betMoneyblack,this.betMoneyblack,this),this.registerFunc(t.shzControllerCon.openThirdWinpopup,this.openThirdWinpopup,this),this.registerFunc(t.shzControllerCon.postGetScore,this.postGetScore,this),this.registerFunc(t.shzControllerCon.playGetScore,this.playGetScore,this),this.registerFunc(t.shzControllerCon.setRatioScore,this.setRatioScore,this),this.registerFunc(t.ShzCallBacks.buttonAppears,this.buttonAppears,this)},o.prototype.addListeners=function(){this._proxy.addEvent()},o.prototype.removeListeners=function(){this._proxy.removeEvent()},o.prototype.onThirdUserMoneyChange=function(t){this._model.setThirdUserMoney(t.balance);var e=App.CommonUtils.money2Str(t.balance);this._mViewThird.gameSetMoney(e)},o.prototype.betMoneyType=function(t){this._model.betType=t;var e=this._model.getThirdTotalScore(),o=e*(1==t?.5:2==t?1:2),i=this._model.getThirdUserMoney(),n=1==t?i+o:2==t?i:i-e;this.isLimit(o,n)||(App.SoundManager.playEffect("lingdang_mp3"),this._PopupView.closeAwardView(),this._mViewThird.ratioBetStart(),this._mViewThird.setBetScore(App.CommonUtils.money2Str(o)),this._mViewThird.gameSetMoney(App.CommonUtils.money2Str(n)),this._mViewThird.disabledBtn())},o.prototype.ondiceBet=function(t){var e={betType:this._model.betType,compPlace:this._model.compPlace};this._proxy.requestBet(e)},o.prototype.isLimit=function(t,e){var o=!1,i=this._model.limitThirdBet;return t>i?(App.ScrollTxtTips.showTip("当前比倍游戏限红"+App.CommonUtils.money2Str(i)),o=!0):0>e&&(App.ScrollTxtTips.showTip("余额不足，无法双比倍"),o=!0),o},o.prototype.betMoneyblack=function(){var t=App.CommonUtils.money2Str(this._model.getThirdUserMoney());this._mViewThird.gameSetMoney(t),this._mViewThird["_betScore"+this._model.tablePlace].visible=!0},o.prototype.openThirdWinpopup=function(){var t=App.CommonUtils.money2Str(this._model.getThirdTotalScore());if(this._model.isEffect&&(this._PopupView.openWinpopup(t),this._mViewThird.Scorevisible()),!this._model.isEffect){var e=this._mViewThird._thirdButton.getBetScore(),o=App.CommonUtils.moneyself(Number(t)/e),i=0;49>=o?i=0:o>=50&&119>=o?i=1:o>=120&&(i=2),this._PopupView.settlementAnimation(t,i);var n=this;R.setTimeOnce(function(){n._mViewThird.Scorevisible()},n,700)}},o.prototype.setRatioScore=function(t){var e=App.CommonUtils.money2Str(t);this._mViewThird.gameSetMoney(e)},o.prototype.buttonAppears=function(){this._mViewThird.Scorevisible()},o.prototype.postGetScore=function(){var t={gametype:3};this._proxy.requestThirdScore(t)},o.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),o=App.CommonUtils.money2Str(t);if(Number(o)>0){var i={time:e,money:o};this.getGameController().getModel().recordList.unshift(i)}this.getGameController().getModel().changerecordList()},o.prototype.playGetScore=function(){Log.log("开始播放得分动画!"),this._mViewThird.huiBtnGetScore();var t=this,e=Number(this._mViewThird.gameGetMoney()),o=Number(App.CommonUtils.money2Str(this._model.getThirdTotalScore())),i=this._PopupView.getAwardScore(),n=o/30;t.setRecordInit(this._model.getThirdTotalScore()),App.TimerManager.doFrame(2,100,function(){e+=n,o-=n,t._mViewThird.gameSetMoney(App.CommonUtils.moneyself(e)),i?t._PopupView.setBillingScore(App.CommonUtils.moneyself(o)):t._mViewThird.setBetScore(App.CommonUtils.moneyself(o)),n>=o&&(i?t._PopupView.setBillingScore(0):t._mViewThird.setBetScore(0),t._mViewThird.gameSetMoney(App.CommonUtils.money2Str(t._model.getThirdUserMoney())),App.TimerManager.removeAll(this),this.getScoreEnd())},this)},o.prototype.getScoreEnd=function(){var e=this;e._PopupView.setBillingScore(0),e._PopupView.closeAwardView(),R.setTimeOnce(function(){Log.log("进入普通游戏");var o=e._model.getThirdUserMoney(),i=!0;e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:o,isBet:i,isAuto:!1}),e._mViewThird.clearCard(),e._mViewThird.stopDiceAnimation()},this,1e3)},o.prototype.destroy=function(){e.prototype.destroy.call(this),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._mViewThird&&this._mViewThird.destroy(),this._model=void 0,this._proxy=void 0,this._mViewThird=void 0},o}(base.GameSeparateCtrl);t.GameCtrlThird=e,__reflect(e.prototype,"shz.GameCtrlThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e)||this;return o.isEffect=!1,o.isGameOver=!1,o.startMoney=0,o.overMoney=0,o.recordList=[],o}return __extends(e,t),e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"shz.GameModel")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t)||this;return o.isbet=!0,o._mFirstScore=0,o.initData(),o.initDataNotify(),o}return __extends(o,e),o.prototype.init=function(t){this._mFirstScore=t},o.prototype.initData=function(){this.isbet=!0,this.automaticTime=0,this.betMoney=0,this.isAutoBet=!1,this.isAuto=!1,this.selectionTimes=0,this.cardlist=[{openRole:0,openCardPlace:1},{openRole:0,openCardPlace:2},{openRole:0,openCardPlace:3},{openRole:0,openCardPlace:4},{openRole:0,openCardPlace:5},{openRole:0,openCardPlace:6},{openRole:0,openCardPlace:7},{openRole:0,openCardPlace:8},{openRole:0,openCardPlace:9},{openRole:0,openCardPlace:10},{openRole:0,openCardPlace:11},{openRole:0,openCardPlace:12},{openRole:0,openCardPlace:13},{openRole:0,openCardPlace:14},{openRole:0,openCardPlace:15}],this._winScore=0,this._islottery=!1,this.isEffect=!1,this._lotteryNum=0,this.winPos=[],this.balance=0,this.roleList=[],this.winLine=[],this._blance=0,this.winnTypes=void 0,this.initBetList=[],this.readyScore=!1,this.isOpenGame=!1,this.initGameMss={Online:null,basebet:null}},o.prototype.initDataNotify=function(){this.isBetDataNotify=t.DataNotify.create(this.isbet),this.isAutoBetDataNotify=t.DataNotify.create(this.isAutoBet),this.automaticTimeNotify=t.DataNotify.create(this.automaticTime)},o.prototype.destroy=function(){e.prototype.destroy.call(this)},o}(base.GameModel);t.GameModelFirst=e,__reflect(e.prototype,"shz.GameModelFirst")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e)||this;return o._mScore=20,o._mScoreAward=0,o._mScoreBet=0,o._mTotalScore=0,o.userMoney=0,o.mGameMaxTimes=0,o.mGameLeftTimes=0,o.mPlayerMoney=0,o._rewardScore=0,o._AwardList=[],o._lotteryNum=0,o._centerCardslist=[],o._sidecardslist=[],o.isAuto=!1,o.isEffect=!1,o._mAwardList=[2,0,0,500,20,0],o._mResultList1=[1,2,3,4,5,5,0],o._mResultList2=[],o._mResultList2.push([1,1,2,3]),o._mResultList2.push([1,1,2,3]),o._mResultList2.push([1,1,2,3]),o._mResultList2.push([1,1,2,3]),o._mResultList2.push([1,1,2,3]),o._mResultList2.push([1,1,2,3]),o}return __extends(e,t),e.prototype.init=function(t,e,o,i,n){this._mScore=t,this._mScoreBet=o,this._mScoreAward=e,this.mPlayerMoney=i,this.isAuto=n,this._mTotalScore=this._mScore},e.prototype.initRabio=function(){this._AwardList=[],this._lotteryNum=0,this._centerCardslist=[],this._sidecardslist=[],this._mAwardList=[],this._mResultList1=[],this._mResultList2=[]},e.prototype.refresh=function(t,e,o){Log.log("刷新彩金游戏结果 award:",t,"result1:",e,"result2:",o),this._mAwardList=t,this._mResultList1=e,this._mResultList2=o},e.prototype.countTotalScore=function(t){var e=this._mAwardList[t-1];this._rewardScore=e,Log.log("当前奖励分数：",e),this._mTotalScore+=e,this._mScoreAward+=e},e.prototype.getTotalScore=function(){return this._mTotalScore},e.prototype.getScore=function(){return this._mScore},e.prototype.getScoreAward=function(){return this._mScoreAward},e.prototype.getScoreBet=function(){return this._mScoreBet},e.prototype.getAwardList=function(){return this._mAwardList},e.prototype.getResultList1=function(){return this._mResultList1},e.prototype.getResultList2=function(){return this._mResultList2},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mAwardList=void 0,this._mResultList1=void 0,this._mResultList2=void 0},e}(base.GameModel);t.GameModelSecond=e,__reflect(e.prototype,"shz.GameModelSecond")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e)||this;return o._tScore=0,o._tScoreAward=0,o._tScoreBet=0,o._tTotalScore=0,o.betType=0,o.compPlace=0,o.dicelist=[],o.otalPoints=0,o.compwinscore=0,o._rabiolist=[],o.tablePlace=0,o.isEffect=!1,o.isFirstRound=!0,o}return __extends(e,t),e.prototype.init=function(t,e,o,i){Log.log(t,e,o),this._tScore=t,this._tScoreBet=o,this._tScoreAward=e,this.limitThirdBet=i,this._tTotalScore=this._tScore},e.prototype.initRabio=function(){},e.prototype.changeRalioList=function(){this._rabiolist.length>10&&this._rabiolist.splice(0,1)},e.prototype.getThirdUserMoney=function(){return Log.log(this._tScoreBet),this._tScoreBet},e.prototype.setThirdUserMoney=function(t){Log.log(this._tScoreBet),this._tScoreBet=t},e.prototype.getThirdTotalScore=function(){return Log.log(this._tScore),this._tScore},e.prototype.setThirdTotalScore=function(t){Log.log(this._tScore),this._tScore=t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModelThird=e,__reflect(e.prototype,"shz.GameModelThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e,o){return t.call(this,e,o)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"shz.GameProxy")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),o.prototype.getModel=function(){return this._model},o.prototype.onPlayerBetRes=function(e){App.EasyLoading.hideLoading(),this.applyFunc(t.ShzCallBacks.onPlayerBetResCallBack,e)},o.prototype.onGenRoleCardRes=function(e){this.applyFunc(t.ShzCallBacks.onGenRoleCardResCallBack,e)},o.prototype.onGenExchangeRes=function(e){this.applyFunc(t.ShzCallBacks.onGenExchangeResCallBack,e)},o.prototype.onOnLineNum=function(e){this.getModel().initGameMss[t.shzControllerCon.Online]=App.CommonUtils.copyDataHandler(e),this.applyFunc(t.ShzCallBacks.onOnlineNumCallBack,e)},o.prototype.onGenGetScoreResRes=function(e){App.EasyLoading.hideLoading();var o=this._controller;void 0!=o&&o.getGameType()==t.GameType.First&&this.applyFunc(t.ShzCallBacks.onGenGetScoreResResCallBack,e)},o.prototype.onGameBack=function(t){var e=this.getModel();e._lotteryNum=t.lotteryNum,e._islottery=e._lotteryNum>0},o.prototype.onEnterGameBack=function(e){Log.log("onEnterGameBack",e),App.EasyLoading.hideLoading();var o=this._controller;void 0!=o&&o.getGameType()==t.GameType.First&&this.applyFunc(t.shzControllerCon.Game_Enter_Res,e)},o.prototype.onLeaderBoardRes=function(e){Log.log("onLeaderBoardRes",e),e.LeaderInfo.length&&this.applyFunc(t.shzControllerCon.rankingScore,e.LeaderInfo),App.EasyLoading.hideLoading()},o.prototype.onResultResBack=function(e){Log.log("onResultResBack",e),e.winresult.length&&this.applyFunc(t.shzControllerCon.winningScore,e.winresult)},o.prototype.onSetBaseBetResBack=function(e){this.getModel().initGameMss[t.shzControllerCon.basebet]=App.CommonUtils.copyDataHandler(e),this.applyFunc(t.ShzCallBacks.onSetBaseBetRes,e)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.shzControllerCon.NET_MSG.PLAYER_BET_RES,this.onPlayerBetRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENROLE_CARD_RES,this.onGenRoleCardRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENEXCHANGE_REQ,this.onGenExchangeRes,this),this.addListener(t.shzControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.COMP_RES,this.onEnterGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.LEADER_BOARD_RES,this.onLeaderBoardRes,this),this.addListener(t.shzControllerCon.NET_MSG.RESULT_RES,this.onResultResBack,this),this.addListener(t.shzControllerCon.NET_MSG.BASE_BET_RES,this.onSetBaseBetResBack,this)},o.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.PLAYER_BET_REQ,e)},o.prototype.requestonlineNum=function(){this.send(t.shzControllerCon.NET_MSG.FINISH_REQ)},o.prototype.requestScore=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},o.prototype.reqEnterGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_REQ,{gametype:1})},o.prototype.winRecord=function(e){this.send(t.shzControllerCon.NET_MSG.RESULT_REQ,e)},o.prototype.ranking=function(e){this.send(t.shzControllerCon.NET_MSG.LEADER_BOARD_REQ,e)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(base.GameProxy);t.GameProxyFirst=e,__reflect(e.prototype,"shz.GameProxyFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),o.prototype.getController=function(){return this._controller},o.prototype.getModel=function(){return this._model},o.prototype.onGameBack=function(t){Log.log("onGameBack",t),this.getModel().mGameMaxTimes=t.lotteryNum},o.prototype.onGetScoreBack=function(e){App.EasyLoading.hideLoading(),Log.log("onGetScoreBack",e);var o=this._controller;void 0!=o&&o.getGameType()==t.GameType.Second&&e.balance&&(App.SoundManager.playEffect("defen1_mp3"),this.getModel().mPlayerMoney=e.balance,this.applyFunc(t.SecondGameConst.Get_Score_Back))},o.prototype.onResultBack=function(e){App.EasyLoading.hideLoading(),Log.log("onResultBack",e);var o=this.getModel();o.initRabio();for(var i=e.winScore,n=[],s=[],r=e.rolecoad,a=0,h=r.length;h>a;a++){var l=r[a],p=10==l.sidecards?0:l.sidecards-1,c=10==l.sidecards?1:l.sidecards;n.push(p),o._sidecardslist.push(c);var u=[],d=l.centerCards;o._centerCardslist.push(d);for(var m=0,_=d.length;_>m;m++)u.push(d[m]-1);s.push(u)}o.refresh(i,n,s),o.mGameLeftTimes=e.lotteryNum?e.lotteryNum:0,o._lotteryNum=e.lotteryNum,this.applyFunc(t.SecondGameConst.Game_Start_Back)},o.prototype.onEnterThirdGame=function(e){App.EasyLoading.hideLoading(),Log.log("onEnterThirdGame",e);var o=this._controller;void 0!=o&&o.getGameType()==t.GameType.Second&&this.applyFunc(t.ShzCallBacks.onEnterThirdGameBack,e)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.ProxyKeyConst.ScGenGetScoreRes,this.onGetScoreBack,this),this.addListener(t.ProxyKeyConst.ScLotteryCardAndExchangeRes,this.onResultBack,this),this.addListener(t.shzControllerCon.NET_MSG.COMP_RES,this.onEnterThirdGame,this)
},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},o.prototype.reqGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ProxyKeyConst.CsLotteryCardReq)},o.prototype.reqGetScore=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ProxyKeyConst.CsGenGetScoreReq,{gametype:2})},o.prototype.reqEnterGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_REQ,{gametype:2})},o.prototype.requestLottMarquee=function(){this.send(t.shzControllerCon.NET_MSG.LOTT_MARQUEE_REQ)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(base.GameProxy);t.GameProxySecond=e,__reflect(e.prototype,"shz.GameProxySecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),o.prototype.getController=function(){return this._controller},o.prototype.getModel=function(){return this._model},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.shzControllerCon.NET_MSG.COMP_BET_RES,this.onCompBetResBack,this),this.addListener(t.shzControllerCon.NET_MSG.DICE_RES,this.onDiceResBack,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this)},o.prototype.onCompBetResBack=function(e){Log.log("onCompBetResBack",e),App.EasyLoading.hideLoading(),e.betState==t.ShzBetResultCode.BetSucc?(this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.betMoneyblack),this.getModel().setThirdTotalScore(e.compwinscore),this.applyFunc(t.shzControllerCon.setRatioScore,e.balance)):(e.betState==t.ShzBetResultCode.BetErrorNoEnoughMoney?App.ScrollTxtTips.showTip("余额不足，无法比倍游戏"):App.ScrollTxtTips.showTip("比倍金额超出限红"),this.applyFunc(t.ShzCallBacks.buttonAppears))},o.prototype.onDiceResBack=function(e){if(Log.log("onDiceResBack",e),e.dicenumber){this.getModel().dicelist=[],this.getModel().otalPoints=0;var o=function(t,e){return t-e};this.getModel().dicelist=e.dicenumber.sort(o),this.getModel().otalPoints=e.dicenumber[0]+e.dicenumber[1],App.MessageCenter.dispatch(t.shzControllerCon.dicelotteryresult)}},o.prototype.onGenGetScoreResRes=function(e){App.EasyLoading.hideLoading();var o=this._controller;void 0!=o&&o.getGameType()==t.GameType.Third&&(Log.log("onGenGetScoreResRes",e),e.balance&&(App.SoundManager.playEffect("defen1_mp3"),this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.playGetScore)))},o.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_GAME_BET_REQ,e)},o.prototype.requestThirdScore=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},o}(base.GameProxy);t.GameProxyThird=e,__reflect(e.prototype,"shz.GameProxyThird")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.countAllbet=function(t){return 9*t},t.lotterylist={overlist:["shz_card_0_png","shz_card_0_png","shz_card_0__png","shz_card_1_png","shz_card_1__png","shz_card_2__png","shz_card_3__png","shz_card_4__png","shz_card_5__png","shz_card_6__png","shz_card_7__png","shz_card_8__png"]},t.cardlistTest=[{openRole:2,openCardPlace:1},{openRole:3,openCardPlace:2},{openRole:1,openCardPlace:3},{openRole:5,openCardPlace:4},{openRole:4,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:1,openCardPlace:7},{openRole:8,openCardPlace:8},{openRole:9,openCardPlace:9},{openRole:7,openCardPlace:10},{openRole:6,openCardPlace:11},{openRole:9,openCardPlace:12},{openRole:5,openCardPlace:13},{openRole:8,openCardPlace:14},{openRole:7,openCardPlace:15}],t.GenRoleCardRes={rolecard:339931154182612},t.GenExchangeRes={islottery:!0,lotteryNum:1,openline:{2:[[13,10,7]],9:[[4,7,10,14],[7,10,14]]},winScore:108e3},t.winLine=["1","2","3","4","5","6","7","8","9"],t.winPos=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],t}();t.conFun=e,__reflect(e.prototype,"shz.conFun")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var o=new t(e);return o},t.prototype.addDataListener=function(t,e){var o;o={callback:t,target:e};for(var i=0,n=this._listeners;i<n.length;i++){var s=n[i];if(e===s.target)return}this._listeners.push(o)},t.prototype.removeDataListener=function(t,e){for(var o=0;o<this._listeners.length;o++)if(e===this._listeners[o].target){this._listeners.splice(o,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"shz.DataNotify")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameFirst")||this;return o._cont=o._controller,o.maskRct1=new egret.Rectangle(0,0,0,630),o.firstOnGame=!0,o.approachList=[],o.shzIndex=1,o._mShzCreateWinList=[],o.masklist=[],o.masklist2=[],o.arrlist=[1,2,3,4,5,6,7,8,9],o.stoptwink=[],o.linelight=[],o.lightIndex=0,o.surroundindex=0,o._bottonButton.initComponent(t),o._toolBarView.initComponent(t),o}return __extends(o,e),o.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t,this._toolBarView.reChargeEffect(),this.firstOnGame?this.firstOnGame=!1:this._bottonButton.startSweep()},o.prototype.setScorelist=function(t){this._bottonButton.setScorelist(t)},o.prototype.preloadingWinLine=function(){this.shzIndex=1,App.TimerManager.doFrame(1,99,this.frameShzRender,this)},o.prototype.frameShzRender=function(){this.shzIndex<10?this.rendershzOne():(App.TimerManager.remove(this.frameShzRender,this),this.onShzCreatedRelease())},o.prototype.rendershzOne=function(){if(!(this.shzIndex>9)){var e=t.ShzGoldBones.create();e.updateId("xianlight"+this.shzIndex),this.GroupLine.addChild(e),e.setPosition(0,-500),e.play(1),this._mShzCreateWinList.push(e),this.shzIndex++}},o.prototype.onShzCreatedRelease=function(){for(var e=this._mShzCreateWinList;e.length>0;)t.ShzGoldBones.realese(e.pop())},o.prototype.stopAutomatic=function(){this._bottonButton.stopAutomatic()},o.prototype.gameoverButtontype=function(t){this._bottonButton.gameoverButtontype(t)},o.prototype.winandNotype=function(t){this._bottonButton.winandNotype(t)},o.prototype.getTotalMoney=function(){return this._bottonButton.getTotalMoney()},o.prototype.setUserMoney=function(t){this._bottonButton.setUserMoney(t)},o.prototype.scoreButtonType=function(){this._bottonButton.scoreButtonType()},o.prototype.getDIScore=function(){return this._bottonButton.getDIScore()},o.prototype.createMask=function(){for(var t=0;9>t;t++){var e=new egret.Rectangle(0,0,0,630);this.masklist.push(e),this.masklist2.push(e)}},o.prototype.maskReset=function(){if(this.masklist.length)for(var t=0;t<this.masklist.length;t++){var e=this.masklist[t];e.width=0}},o.prototype.concealLine=function(){for(var t=0;9>t;t++)this["ImageLine"+t].visible=!1},o.prototype.autoAnteType=function(){this._bottonButton.autoAnteType()},o.prototype.changeCard=function(){App.SoundManager.playEffect("gundong_mp3"),App.TimerManager.doTimer(50,30,this.refrsh.bind(this,1),this,this.overone.bind(this,1),this),App.TimerManager.doTimer(50,37,this.refrsh.bind(this,2),this,this.overone.bind(this,2),this),App.TimerManager.doTimer(50,44,this.refrsh.bind(this,3),this,this.overone.bind(this,3),this),App.TimerManager.doTimer(50,51,this.refrsh.bind(this,4),this,this.overone.bind(this,4),this),App.TimerManager.doTimer(50,58,this.refrsh.bind(this,5),this,this.overone.bind(this,5),this)},o.prototype.refrsh=function(t){for(var e=this["GroupList"+t],o=0;o<e.numChildren;o++)e.getChildAt(o).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1")},o.prototype.overone=function(t){this.applyFunc("overone",t)},o.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},o.prototype.twinkle=function(){for(var t=0;t<this.cardlist_0.numChildren;t++)for(var e=0;3>e;e++){var o=this["GroupList"+t].getChildAt(e);"shz_card_0_png"==o.source&&(App.EffectUtils.startFlicker(o,100),this.stoptwink.push(o))}},o.prototype.linetein=function(e){var o=t.NoticeConst.GenExchange.psGenOpenline[e].openLine;this.lotteryLine(o)},o.prototype.lotteryLine=function(e){App.SoundManager.playEffect("xian_mp3");var o=t.ShzGoldBones.create(),i="xianlight"+e;o.updateId(i),this.GroupLine.addChild(o);var n=this["ImageLine"+e].x+this["ImageLine"+e].width/2,s=this["ImageLine"+e].y+this["ImageLine"+e].height/2;o._index=e,o.setPosition(n,s),this.approachList.push(o),o.blendMode=egret.BlendMode.NORMAL,o.play(1);o.addPlayEndCallBack(function(){o.parent&&t.ShzGoldBones.realese(o)},this)},o.prototype.onebyonelight=function(){App.TimerManager.doTimer(60,66,this.lightone,this,function(){this.lightVisible(),this.lightIndex=0},this)},o.prototype.oneShzlight=function(t){this.light_0.getChildAt(t).visible=!0,this.light_1.getChildAt(t).visible=!0},o.prototype.lightone=function(){this.lightVisible(),this.light_0.getChildAt(this.lightIndex).visible=!0,this.light_1.getChildAt(this.lightIndex).visible=!0,this.lightIndex++,this.lightIndex>=9&&(this.lightIndex=0)},o.prototype.lightVisible=function(){for(var t=0;9>t;t++)this.light_0.getChildAt(t).visible=!1,this.light_1.getChildAt(t).visible=!1},o.prototype.lightTwinkle=function(e){this.lightVisible();for(var o=0;o<t.NoticeConst.GenExchange.psGenOpenline.length;o++){var i=t.NoticeConst.GenExchange.psGenOpenline[o].openLine;this.twinklelight(i)}},o.prototype.twinklelight=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0,App.EffectUtils.startFlicker(this["left_0_"+t],200),App.EffectUtils.startFlicker(this["light_0_"+t],200)},o.prototype.stoplighttTwinkle=function(e){for(var o=0;o<t.NoticeConst.GenExchange.psGenOpenline.length;o++){var i=t.NoticeConst.GenExchange.psGenOpenline[o].openLine;this.stoptTwinklelight(i)}},o.prototype.stoptTwinklelight=function(t){App.EffectUtils.stopFlicker(this["light_0_"+t]),App.EffectUtils.stopFlicker(this["left_0_"+t]),this["light_0_"+t].alpha=1,this["left_0_"+t].alpha=1},o.prototype.lightShow=function(t){this.lightVisible(),this.lightopen(t)},o.prototype.lightopen=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0},o.prototype.linevisible=function(){for(var t=0;t<this.GroupLine.numChildren;t++)this["ImageLine"+t].visible=!1},o.prototype.stoptwinkle=function(){for(var t=0;t<this.stoptwink.length;t++)App.EffectUtils.stopFlicker(this.stoptwink[t])},o.prototype.surround=function(t){for(var e=0;e<t.length;e++)this.setSurround(t[e])},o.prototype.setSurround=function(e){var o=Math.floor((e-1)/3)+1,i=Math.floor((e-1)%3),n=t.ShzGoldBones.create();n.updateId("boxlight"),this["surround"+o].addChild(n);var s=this["surround"+o].getChildAt(i).x+116.5,r=this["surround"+o].getChildAt(i).y+103.5;n._index=o,n.setPosition(s,r),n.blendMode=egret.BlendMode.ADD,n.play(1),this.approachList.push(n);n.addPlayEndCallBack(function(){n.parent&&t.ShzGoldBones.realese(n)},this)},o.prototype.closeEffect=function(){for(var e=this.approachList;e.length;){var o=e.pop();o&&t.ShzGoldBones.realese(o)}},o.prototype.surroundvisible=function(){for(var t=1;6>t;t++)for(var e=0;3>e;e++)this["surround"+t].getChildAt(e).visible=!1},o.prototype.flashAnimation=function(e,o){var i=Math.floor((o-1)/3)+1,n=Math.floor((o-1)%3),s=t.ShzGoldBones.create(),r="skeleton_"+e;s.updateId(r),this["GroupAMList"+i].addChild(s);var a=this["GroupList"+i].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,h=this["GroupList"+i].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;s._index=i,s.setPosition(a,h),s.blendMode=egret.BlendMode.NORMAL,this.approachList.push(s),s.play(3);var l=this;s.addPlayEndCallBack(function(){s.parent&&(t.ShzGoldBones.realese(s),l.approachList.splice(l.approachList.indexOf(s),1))},this)},o.prototype.flashvisible=function(){for(var t=0;t<this.cardlist_2.numChildren;t++)for(var e=0;3>e;e++)this["GroupAMList"+t].getChildAt(e).visible=!1},o.prototype.winAnimation=function(e){for(var o=0;o<t.NoticeConst.GenExchange.psGenOpenline.length;o++)for(var i=0,n=0;n<t.NoticeConst.GenExchange.psGenOpenline[o].shuihuRole.length;n++){var s=t.NoticeConst.GenExchange.psGenOpenline[o].shuihuRole[n].openLinePlace;this.individualAward(i,s)}},o.prototype.individualAward=function(e,o){var i=Math.floor((o-1)/3)+1,n=Math.floor((o-1)%3);this.setSurround2(i,n);var s=t.ShzGoldBones.create(),r="skeleton_"+e+"_1";s.updateId(r),this["GroupAMList"+i].addChild(s);var a=this["GroupList"+i].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,h=this["GroupList"+i].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;s._index=i,s.setPosition(a,h),s.blendMode=egret.BlendMode.NORMAL,s.play(1),this.approachList.push(s);s.addPlayEndCallBack(function(){s.parent&&t.ShzGoldBones.realese(s)},this)},o.prototype.setSurround2=function(e,o){var i=this._mMoudel.isEffect;if(!i){var n=t.ShzGoldBones.create();n.updateId("boxlight2");var s=this["surround"+e].getChildAt(o).x+116.5,r=this["surround"+e].getChildAt(o).y+103.5;this["surround"+e].addChild(n),n.setPosition(s,r),n.blendMode=egret.BlendMode.ADD,n.play(5),this.approachList.push(n);n.addPlayEndCallBack(function(){n.parent&&t.ShzGoldBones.realese(n)},this)}},o.prototype.removeWinningAnimation=function(){App.TimerManager.removeAll(this)},o.prototype.approachAnimation=function(){var e=this;this._bottonButton.setStartGameBtn(!0);for(var o=1;6>o;o++)for(var i=function(){var i=t.ShzGoldBones.create();i.updateId("skeleton_1_1"),n["GroupList"+o].addChild(i);var r=n["GroupList"+o].getChildAt(s).x+t.NoticeConst.CARD_HALF_WIDTH,a=n["GroupList"+o].getChildAt(s).y+t.NoticeConst.CARD_HALF_HEIGHT;i._index=o,i.setPosition(r,a),i.play(1),n.approachList.push(i),i.addPlayEndCallBack(function(){i.parent&&(t.ShzGoldBones.realese(i),e.applyFunc("gameStart"))},n)},n=this,s=0;3>s;s++)i();R.setTimeOnce(function(){e._bottonButton.setStartGameBtn(!1),e._bottonButton.startSweep(),e.preloadingWinLine()},this,1900)},o.prototype.closetime=function(){App.TimerManager.removeAll(this)},o.prototype.gameGetMoney=function(){return this._bottonButton.getRabioMoney()},o.prototype.gameSetMoney=function(t){this._bottonButton.setRabioMoney(t)},o.prototype.setUserImage=function(t){this._bottonButton.setUserImage(t)},o.prototype.setUserFrame=function(t){this._bottonButton.setUserFrame(t)},o.prototype.setUserName=function(t){this._bottonButton.setUserName(t)},o.prototype.startGameAppear=function(){this._bottonButton.startGameAppear()},o.prototype.rotarybuttontype=function(){this._bottonButton.rotarybuttontype()},o.prototype.setcurrentTime=function(t){this._bottonButton.setcurrentTime(t)},o.prototype.gameHight=function(){this._bottonButton.gameHight()},o.prototype.setAllBetMoney=function(t){this._bottonButton.setAllBetMoney(t)},o.prototype.setScore=function(t){this._bottonButton.setScore(t)},o.prototype.setIndex=function(t){this._bottonButton.setIndex(t)},o.prototype.winningtype=function(t){this._bottonButton.winningtype(t)},o.prototype.timesButton=function(){this._bottonButton.timesButton()},o.prototype.automaticValue=function(){return this._bottonButton.automaticValue()},o.prototype.setStartGameBone=function(t){this._bottonButton.setStartGameBone(t)},o.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},o.prototype.startGame=function(){this.applyFunc("startGame")},o.prototype.stopGame=function(){App.TimerManager.removeAll(this);for(var t=0;5>t;t++)this.applyFunc("overone",t)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._bottonButton.addEvent(),this._toolBarView.addEvent(),this.createMask()},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._bottonButton.removeEvent(),this._toolBarView.removeEvent()},o.prototype.destroy=function(){if(!this._isDestroy){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._bottonButton.destroy(),this._toolBarView.destroy();for(var o=this.approachList;o.length;){var i=o.pop();i&&i.destroy()}t.ShzGoldBones.cleanFormPool(),Log.trace("销毁 shz.FirstGameView")}},o}(base.GameView);t.FirstGameView=e,__reflect(e.prototype,"shz.FirstGameView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e,LayerManager.UI_Message,"shz","ShzGameSkin")||this;return o.touchEnabled=!1,o.touchChildren=!1,o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),Log.log("初始化跑马灯信息"),this.initBroadcast(this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameMarryView=e,__reflect(e.prototype,"shz.GameMarryView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.UI_Tips)||this;return o._mAniFlag=null,o}return __extends(o,e),o.prototype.initUI=function(){e.prototype.initUI.call(this),this.createFlag()},o.prototype.playFlag=function(){this.createFlag(),this._mAniFlag&&this._mAniFlag.play()},o.prototype.createFlag=function(){this._mAniFlag||(this._mAniFlag=t.BoneAniFlag.create()),this._mAniFlag.parent||(this.addChild(this._mAniFlag),this._mAniFlag.initDBRes("shzAniFlag"),this._mAniFlag.x=App.StageUtils.getWidth()/2,this._mAniFlag.y=App.StageUtils.getHeight()/2)},o.prototype.clear=function(){App.TimerManager.removeAll(this),this._mAniFlag.stopGame(),R.removeFromParent(this),this.removeChildren()},o.prototype.addEvent=function(){},o.prototype.removeEvent=function(){},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mAniFlag&&this._mAniFlag.destroy(),this._mAniFlag=void 0,Log.trace("销毁 shz.FirstGameView")},o}(BaseEuiView);t.GameTipView=e,__reflect(e.prototype,"shz.GameTipView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var o=t.call(this,e,LayerManager.UI_Main,"shz","ShzGameSkin")||this;return o.btnRedPacket2=null,o}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),Log.log("添加红包"),this.btnRedPacket2||(this.btnRedPacket2=RedPackBone.create(),this.btnRedPacket2.init(),this.addChild(this.btnRedPacket2),this.btnRedPacket2.x=39,this.btnRedPacket2.y=128,this.btnRedPacket2.play(RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0)},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.onBack=function(){this.applyFunc("onClickBack")},e.prototype.testone=function(){},e.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket2.play(RedPackBone.Animation1)},e.prototype.RedPackNotify=function(){this.btnRedPacket2.play(RedPackBone.Animation)},e.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(RedPackBone.Animation1)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameView=e,__reflect(e.prototype,"shz.GameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameSecond")||this;return o._mCurrTimes=0,o._mMaxTimes=3,o._mCurrRoundTimes=0,o._index=0,o._winpos=0,o.winpos=[],o._mMaryList=[],o.arrlist=[2,3,4,5,6,7,8,9],o._posList={},o._imageList={},o._slotList=[],o._shzUserInfo.initComponent(t),o._IconSkin.initComponent(t),o}return __extends(o,e),o.prototype.initUI=function(){e.prototype.initUI.call(this);for(var o=1;6>=o;o++)this._posList[o+0]={x:5+157*(o-1),y:2},this._posList[o+6]={x:950,y:2+87*(o-1)},this._posList[o+12]={x:950-157*(o-1),y:527},this._posList[o+18]={x:5,y:527-87*(o-1)};var i=this._imageList;i[1]=i[7]=i[13]=i[19]=0,i[4]=t.ShzType.ZYT,i[12]=i[24]=t.ShzType.DXTT,i[8]=i[18]=t.ShzType.Song,i[14]=i[20]=t.ShzType.Lin,i[2]=i[9]=i[17]=t.ShzType.Lu,i[6]=i[15]=i[23]=t.ShzType.DD,i[3]=i[10]=i[21]=t.ShzType.CQ,i[5]=i[11]=i[16]=i[22]=t.ShzType.FT;for(var n=this,o=1;4>=o;o++)this._slotList.push(new t.ShzCaiJinMC(n["slot"+o]))},o.prototype.open=function(o){e.prototype.open.call(this),this._mMoudel=o;var i=this;i.init(),i.updateTxt(),i.upUserInfo(),i.updateImage(1),R.setTimeOnce(function(){Log.log("/** 初始化界面信息 */"),i.applyFunc(t.SecondGameConst.Game_Start_Req)},this,1200),this._mMoudel.initRabio()},o.prototype.init=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shz_table_json.shuihu_ui_result_2");this.Option.y=639,this._mCurrTimes=0,this._mMaxTimes=this._mMoudel.mGameMaxTimes,this.uBtnGetScore.enabled=!0,this.uBtnNextGame.enabled=!0,this._winpos=1,this.uTxtLeftTImes.text=""},o.prototype.shzButtonUp=function(){egret.Tween.get(this.Option).to({y:498},300),this.applyFunc(t.ShzCallBacks.sendLottMarquee)},o.prototype.startGame=function(){this._mCurrTimes++,this._mMoudel._lotteryNum<=0||(this._mMoudel.mGameLeftTimes<0&&Log.log("服务器返回剩余次数小于0"),this._mCurrRoundTimes=0,this.updateTimes(),this.roundStart())},o.prototype.updateTimes=function(){this.uTxtLeftTImes.text=""+this._mMoudel._lotteryNum},o.prototype.updateTxt=function(){var t=this._mMoudel;this.uTxtScore.text=App.CommonUtils.money2Str(t.getScore()),this.uTxtAward.text=""+App.CommonUtils.money2Str(t.getScoreAward()),this.uTxtBet.text=""+t.getScoreBet(),this.uTxtTotalScore.text=""+App.CommonUtils.money2Str(t.getTotalScore())},o.prototype.upUserInfo=function(){this._IconSkin.setUserImage("ui_headImg_"+this._mMoudel.player.getAvatar()),this._IconSkin.setUserFrame("ui_headBox_"+this._mMoudel.player.getAvatarBox()),this._shzUserInfo.setNickName(this._mMoudel.player.getNickName()),this._shzUserInfo.setMoney(App.CommonUtils.money2Str(this._mMoudel.mPlayerMoney))},o.prototype.setMoney=function(t){this._shzUserInfo.setMoney(t)},o.prototype.changeuTxtAward=function(){var t=this,e=Number(this.uTxtAward.text),o=Number(App.CommonUtils.money2Str(this._mMoudel._rewardScore)),i=o/30;App.TimerManager.doFrame(2,50,function(){e+=i,t.uTxtAward.text=""+Math.floor(100*e)/100,Math.floor(100*e)/100>=Math.floor(t._mMoudel.getScoreAward()/100)/100&&(t.uTxtAward.text=""+App.CommonUtils.money2Str(t._mMoudel.getScoreAward()))},this,this.chengeScoreEnd,this)},o.prototype.chengeScoreEnd=function(){this.updateTxt()},o.prototype.roundStart=function(){this._mCurrRoundTimes++;var e=this._mMoudel.getAwardList();if(this.closeAllDiceAnimation(),this.closedicetwinkle(),this._mCurrRoundTimes>e.length)if(this._mMoudel._lotteryNum>=2)this.applyFunc(t.SecondGameConst.Game_Start_Req);else{this.uTxtLeftTImes.text="0",this.shzButtonUp();var o=this;this._mMoudel.isAuto&&R.setTimeOnce(function(){this._mMoudel.isAuto&&o.applyFunc(t.SecondGameConst.Get_Score_Req)},this,2e3)}else this.marryRun(),this.slotRun()},o.prototype.getnum=function(t){var e=[];for(var o in this._imageList)this._imageList[o]==t&&e.push(o);var i=App.MathUtils.randomArray(e);return i},o.prototype.marryRun=function(){this._index=0;var t=0,e=this;t=this._winpos-1;var o=this._mMoudel.getResultList1(),i=o[this._mCurrRoundTimes-1],n=Number(this.getnum(i)),s=n-this._winpos,r=0;s>0&&8>=s?r=48+(24-(8-s)):s>0&&s>8?r=48+(s-8):0>s?r=48+(24-(8-s)):0==s&&(r=64),this._winpos-1?(this["result"+this._winpos].alpha=1,this.trailingEffect(this._winpos,500)):(this.result1.alpha=1,this.trailingEffect(1,500)),App.SoundManager.playEffect("ding2_mp3"),App.TimerManager.doFrame(1.5,r,function(){var o=++t%24+1;e.updateImage(o),this._index=o},this,function(){e.updateMarry(this._index,n)},this)},o.prototype.updateMarry=function(t,e){var o=t,i=this;App.SoundManager.stopEff("ding2_mp3");var n=this._mMoudel.getResultList1();n[this._mCurrRoundTimes-1],this._imageList;App.TimerManager.doFrame(9,99,function(){var t=++o%24+1;App.SoundManager.playEffect("ding_mp3"),i.updateImage(t),t==e&&(this._winpos=t,App.TimerManager.removeAll(this),this.resultScore())},this)},o.prototype.resultScore=function(){var t=this._mMoudel.getAwardList(),e=this._mMoudel._centerCardslist[this._mCurrRoundTimes-1],o=t[this._mCurrRoundTimes-1],i=this;if(o>0){if(App.SoundManager.playEffect("zhongjiang_mp3"),e[0]==e[1]&&e[0]==e[2]&&e[0]==e[3]||e[0]==e[1]&&e[0]==e[2]||e[1]==e[2]&&e[1]==e[3])for(var n=0;4>n;n++)if(e[2]==e[n]){var s=this["_slotRunPos"+n];this.diceAnimation(this._imageGroup,s),this.soltWinAnimation(e[n],n)}if(this.winpos.length){this.dicetwinkle(),this.diceAnimation(this._groupGold,this.imageItem);for(var r=0;r<this.winpos.length;r++){var s=this.winpos[r];this.soltWinAnimation(s[1],s[0])}}R.setTimeOnce(this.roundStart,this,2500),this._mMoudel.countTotalScore(this._mCurrRoundTimes),R.setTimeOnce(function(){i.changeuTxtAward()},this,300)}else App.SoundManager.playEffect("meijiang_mp3"),R.setTimeOnce(this.roundStart,this,1e3)},o.prototype.updateImage=function(t){this.imageItem.x=this._posList[t].x,this.imageItem.y=this._posList[t].y,this.imageIcon.x=this._posList[t].x,this.imageIcon.y=this._posList[t].y;var e=this["result"+t];e.alpha=1,this.trailingEffect(t,500)},o.prototype.trailingEffect=function(t,e){var o=this["result"+t];egret.Tween.get(o).to({alpha:0},e)},o.prototype.diceAnimation=function(e,o){for(var i=o.x+o.width/2,n=o.y+o.height/2,s=[],r=0;10>r;r++){var a=t.ShzGoldBones.create();a._index=r;var h="Goldicon";e.addChild(a),a.updateId(h),a.setPosition(i,n),a.blendMode=egret.BlendMode.NORMAL,a.play(99999),s.push(a),this._mMaryList.push(a)}var l=this;R.setTimeOnce(function(){l.flyGoldCoin(s)},this,300)},o.prototype.closeAllDiceAnimation=function(){for(var e=this._mMaryList;e.length;){var o=e.pop();o&&(egret.Tween.removeTweens(o),t.ShzGoldBones.realese(o))}},o.prototype.closeDiceAnimation=function(e){e.parent&&(egret.Tween.removeTweens(e),t.ShzGoldBones.realese(e))},o.prototype.flyGoldCoin=function(t){App.SoundManager.playEffect("jinbi_mp3");for(var e=this,o=function(){var o=t[n];egret.Tween.removeTweens(o),egret.Tween.get(o).wait(100*n).to({x:i._goldPos.x,y:i._goldPos.y},300,egret.Ease.sineInOut).call(function(){e.closeDiceAnimation(o)},i)},i=this,n=0;n<t.length;n++)o();this._mMoudel.isEffect||App.TimerManager.doTimer(100,10,function(){e.opendiceEffet()},this)},o.prototype.opendiceEffet=function(){var e=t.ShzGoldBones.create();this._groupGold.addChild(e),e.updateId("coin2"),e.blendMode=egret.BlendMode.ADD;var o=this._goldPos.x,i=this._goldPos.y;e.setPosition(o,i),egret.Tween.removeTweens(e),this._mMaryList.push(e),e.play(1);e.addPlayEndCallBack(function(){e.parent&&t.ShzGoldBones.realese(e)},this)},o.prototype.slotRun=function(){this.winpos=[];for(var t=this._mMoudel._centerCardslist,e=t[this._mCurrRoundTimes-1],o=0;4>o;o++)if(this._mMoudel._centerCardslist[this._mCurrRoundTimes-1][o]==this._mMoudel._sidecardslist[this._mCurrRoundTimes-1]){this._slotList[o].run(e[o],200*(o+1),!0);var i=e[o],n=[o,i];this.winpos.push(n)}else this._slotList[o].run(e[o],200*(o+1),!1)},o.prototype.playGetScore=function(){this.uBtnGetScore.enabled=!1,this.uBtnNextGame.enabled=!1;var e=this,o=Number(this._shzUserInfo.getMoney()),i=Number(App.CommonUtils.money2Str(this._mMoudel.getTotalScore())),n=i/30;this.applyFunc(t.SecondGameConst.getRecordNum,this._mMoudel.getTotalScore()),App.TimerManager.doTimer(32,100,function(){o+=n,i-=n,e._shzUserInfo.setMoney(Number(o.toFixed(2))),e.uTxtTotalScore.text=""+i.toFixed(0),n>=i&&(e.uTxtTotalScore.text="0",e._shzUserInfo.setMoney(App.CommonUtils.money2Str(e._mMoudel.mPlayerMoney)),e.getScoreEnd())},this)},o.prototype.getScoreEnd=function(){var e=this,o=this._mMoudel.mPlayerMoney,i=!0,n=this._mMoudel.isAuto;R.setTimeOnce(function(){App.TimerManager.removeAll(e),e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:o,isBet:i,isAuto:n});for(var s=1;5>s;s++)e["slot"+s].texture=RES.getRes("shz_table_json.shuihu_ui_result_2")},this,300)},o.prototype.goEnterThirdGame=function(){R.intervalTime()&&this.applyFunc(t.ShzCallBacks.goEnterThirdGame)},o.prototype.onGetScore=function(){R.intervalTime()&&(this._mMoudel.isAuto=!1,this.applyFunc(t.SecondGameConst.Get_Score_Req))},o.prototype.soltWinAnimation=function(e,o){var i=t.ShzGoldBones.create(),n="skeleton_"+e+"_1";this.GroupCard.addChild(i),i.updateId(n);var s=this.GroupCard.getChildAt(o).x+t.NoticeConst.CARD_HALF_WIDTH,r=this.GroupCard.getChildAt(o).y+t.NoticeConst.CARD_HALF_HEIGHT;i.setPosition(s,r),i.blendMode=egret.BlendMode.NORMAL,egret.Tween.removeTweens(i),i.play(1),this._mMaryList.push(i);i.addPlayEndCallBack(function(){i.parent&&t.ShzGoldBones.realese(i)},this)},o.prototype.deleteAllWin=function(){for(var t=this._mMaryList;t.length;){var e=t.pop();e&&e.destroy()}},o.prototype.changeCard=function(t){App.TimerManager.doTimer(50,45,this.refrsh,this,this.overone.bind(this,t),this)},o.prototype.refrsh=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shz_table_json.shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1")},o.prototype.overone=function(t){for(var e=this._mMoudel._centerCardslist[t],o=0;o<e.length;o++)this["slot"+(o+1)].texture=RES.getRes("shz_table_json.shuihu_ui_result_"+e[o])},o.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},o.prototype._runMarquee=function(){for(var t=0;24>t;t++);},o.prototype.dicetwinkle=function(){App.EffectUtils.startFlicker(this.result,100)},o.prototype.closedicetwinkle=function(){App.EffectUtils.stopFlicker(this.result),this.result.alpha=1},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.uBtnNextGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goEnterThirdGame,this),this.uBtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.uBtnNextGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goEnterThirdGame,this),this.uBtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},o.prototype.destroy=function(){if(!this._isDestroy){for(e.prototype.destroy.call(this),App.TimerManager.removeAll(this);this._slotList.length;)this._slotList.pop().destroy();this.deleteAllWin(),this.result.texture=void 0,this._mMoudel=void 0,this._slotList=void 0,R.removeAllTimeOut(this),Log.trace("销毁 shz.FirstGameView")}},o}(base.GameView);t.SecondGameView=e,__reflect(e.prototype,"shz.SecondGameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameThird")||this;return o._posList={},o.placecomp=[1,3,2],o.placecompBet=["SHZratio_betbig","SHZratio_betdraw","SHZratio_betsmall"],o._cardflaylist=[],o.peoList=[],o._dice1.initComponent(t),o._dice2.initComponent(t),o._dice3.initComponent(t),o._thirdButton.initComponent(t),o}return __extends(o,e),o.prototype.open=function(t){e.prototype.open.call(this),this._thMoudel=t;var o=this;o.init(),o.updateInfo(),o.Scorevisible(),R.setTimeOnce(function(){o.diceOnAnimation(1,999),o.recordCardDisplay()},this,500),this.stopDiceAnimation()},o.prototype.init=function(){this.setInitialization();
for(var t=this._cardlist.getChildAt(0),e=0;11>e;e++)this._posList[e]={x:t.x+79*e,y:t.y}},o.prototype.setInitialization=function(){this._diceBet.visible=!1,this._diceRrsult.visible=!1,this.startBet();for(var t=1;4>t;t++)this["_dice"+t].visible=!1,this["_betScore"+t].visible=!1},o.prototype.updateInfo=function(){var t=this._thMoudel;this._thirdButton._userinfo.setNickName(t.player.getNickName()),this.gameSetMoney(App.CommonUtils.money2Str(t.getThirdUserMoney())),this._thirdButton._iconskin.setUserImage("ui_headImg_"+t.player.getAvatar()),this._thirdButton._iconskin.setUserFrame("ui_headBox_"+t.player.getAvatarBox()),this.setBetScore(App.CommonUtils.money2Str(t.getThirdTotalScore()))},o.prototype.setRatioBetScore=function(){this.setBetScore(App.CommonUtils.money2Str(this._thMoudel.compwinscore))},o.prototype.setBetScore=function(t){this._thirdButton.setBetScore(t)},o.prototype.disabledBtn=function(){this._thirdButton.disabledBtn()},o.prototype.huiBtnGetScore=function(){this._thirdButton.huiBtnGetScore()},o.prototype.onBack=function(){this.applyFunc(t.NoticeConst.Go_To_First_Game)},o.prototype.ondiceBet=function(e){if(R.intervalTime()){var o=Number(e.currentTarget.name);this.prohibitBet(),this._thMoudel.tablePlace=o,this._thMoudel.compPlace=this.placecomp[o-1],this.applyFunc(t.shzControllerCon.ondiceBet,o),R.sendPlayerAction(this.placecompBet[o-1])}},o.prototype.prohibitBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!1},o.prototype.startBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!0},o.prototype.recordCardDisplay=function(){this._thMoudel.changeRalioList(),this.clearCard(),this._cardflaylist=[];for(var t=0;t<this._thMoudel._rabiolist.length;t++){var e=new eui.Image;e.source="shz_shake_json.shz_shake_his_"+this._thMoudel._rabiolist[t],e.width=54,e.height=74,e.x=this._posList[t].x,e.y=this._posList[t].y,this._cardlist.addChild(e),this._cardflaylist.push(e)}},o.prototype.recordCardflay=function(){var t=new eui.Image,e=this._thMoudel._rabiolist.length-1;t.source="shz_shake_json.shz_shake_his_"+this._thMoudel._rabiolist[e],t.width=54,t.height=74,t.x=955,t.y=2,this._cardlist.addChild(t),this._cardflaylist.push(t),egret.Tween.removeTweens(t);var o=this,i=this._posList[e].x,n=this._posList[e].y;egret.Tween.get(t).to({x:i,y:n},800,egret.Ease.sineInOut).call(function(){o._cardflaylist.length>10&&o.AllCardMove()},this)},o.prototype.dropCard=function(){var t=this._cardflaylist[0],e=this;egret.Tween.get(t).to({y:180,alpha:0},800,egret.Ease.sineInOut).call(function(){t.parent.removeChild(t),e._thMoudel.changeRalioList(),e._cardflaylist.length>10&&e._cardflaylist.splice(0,1)},this)},o.prototype.AllCardMove=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t],o=e.x-79;egret.Tween.get(e).to({x:o},800,egret.Ease.sineInOut)}R.setTimeOnce(function(){this.dropCard()},this,800)},o.prototype.clearCard=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&e.parent.removeChild(e)}this._cardflaylist=[]}},o.prototype.concealCard=function(){},o.prototype.Scorevisible=function(){this._thirdButton.lightbtn()},o.prototype.oneGameOver=function(){this._thMoudel.initRabio(),this.setInitialization()},o.prototype.lotteryResult=function(){App.SoundManager.stopEff("shzXiazhu2_mp3"),this._thMoudel.otalPoints>=8?(this._dice1.visible=!0,this._thMoudel._rabiolist.push(0),this._dice1.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]):7==this._thMoudel.otalPoints?(this._dice2.visible=!0,this._thMoudel._rabiolist.push(2),this._dice2.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]):this._thMoudel.otalPoints<=6&&(this._dice3.visible=!0,this._thMoudel._rabiolist.push(1),this._dice3.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1])},o.prototype.gameGetMoney=function(){return this._thirdButton.getRabioMoney()},o.prototype.gameSetMoney=function(t){this._thirdButton.setRabioMoney(t)},o.prototype.diceBetAnimation=function(e,o){var i=t.ShzGoldBones.create(),n="dice_"+e;i.updateId(n),this._diceflash.addChild(i);var s=this._diceflash.getChildAt(0).x+165,r=this._diceflash.getChildAt(0).y+5;i.blendMode=egret.BlendMode.NORMAL,i.setPosition(s,r),this.peoList.push(i),i.play(o);var a=this;i.addPlayEndCallBack(function(){a.diceBetEvent(e)},this)},o.prototype.stopDiceAnimation=function(){for(var e=this.peoList;e.length;){var o=e.pop();o&&t.ShzGoldBones.realese(o)}},o.prototype.cleanAllDiceBetAnimation=function(){for(var t=this.peoList;t.length;){var e=t.pop();e&&e.destroy()}},o.prototype.diceOnAnimation=function(t,e){this.stopDiceAnimation(),this.diceBetAnimation(t,e)},o.prototype.ratioBetStart=function(){this.startBet(),this.oneGameOver(),this.diceOnAnimation(2,1),R.setTimeOnce(function(){App.SoundManager.playEffect("yaoshaizi_mp3")},this,100),this._thMoudel.isFirstRound||R.sendPlayerAction("SHZratio_continueafterwin")},o.prototype.diceBetEvent=function(e){switch(e){case 2:R.removeTimeOut(this.ratioBetStart,this),App.SoundManager.playEffect("shzXiazhu2_mp3"),this._diceBet.visible=!0,this.diceOnAnimation(1,999);break;case 4:this.scoreWinAndLose();break;case 5:this.stopDiceAnimation(),this.concealCard();var o=this._thMoudel.getThirdUserMoney();Log.log("进入普通游戏");var i=!0;this.applyFunc(t.NoticeConst.Go_To_First_Game,{score:o,isBet:i,isAuto:!1}),this.clearCard();break;case 6:this.diceOnAnimation(1,99999),this.applyFunc(t.shzControllerCon.openThirdWinpopup)}},o.prototype.scoreWinAndLose=function(){var t=App.CommonUtils.money2Str(this._thMoudel.getThirdTotalScore());Number(t)>0?(App.SoundManager.playEffect("wanjiaying_mp3"),this.diceOnAnimation(6,1)):0==Number(t)&&(this.diceOnAnimation(5,2),App.SoundManager.playEffect("wanjiashu_mp3"))},o.prototype.diceBetLotteryresult=function(){this._thMoudel.isFirstRound=!1,this.diceOnAnimation(4,1);var t=this;this.lotteryResult(),App.SoundManager.playEffect(this._thMoudel.otalPoints+"dian_mp3"),R.setTimeOnce(function(){t.recordCardflay()},this,500)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var o=1;4>o;o++)this["_diceBet"+o].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet,this);this._thirdButton.addEvent(),App.MessageCenter.addListener(t.shzControllerCon.dicelotteryresult,this.diceBetLotteryresult,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var o=1;4>o;o++)this["_diceBet"+o].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet,this);this._thirdButton.removeEvent(),App.MessageCenter.removeListener(t.shzControllerCon.dicelotteryresult,this.diceBetLotteryresult,this)},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this._thirdButton.destroy(),this.clearCard(),this.cleanAllDiceBetAnimation(),Log.log("销毁 shz.ThirdGameView"))},o}(base.GameView);t.ThirdGameView=e,__reflect(e.prototype,"shz.ThirdGameView")}(shz||(shz={}));