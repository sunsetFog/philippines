var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);o.prototype=t.prototype,e.prototype=new o},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(n,r){function s(e){try{p(i.next(e))}catch(t){r(t)}}function a(e){try{p(i["throw"](e))}catch(t){r(t)}}function p(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(s,a)}p((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;p;)try{if(n=1,r&&(s=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[0,s.value]),o[0]){case 0:case 1:s=o;break;case 4:return p.label++,{value:o[1],done:!1};case 5:p.label++,r=o[1],o=[0];continue;case 7:o=p.ops.pop(),p.trys.pop();continue;default:if(s=p.trys,!(s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){p=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){p.label=o[1];break}if(6===o[0]&&p.label<s[1]){p.label=s[1],s=o;break}if(s&&p.label<s[2]){p.label=s[2],p.ops.push(o);break}s[2]&&p.ops.pop(),p.trys.pop();continue}o=t.call(e,p)}catch(i){o=[6,i],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,r,s,a,p={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},ActionExpand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.runParabola=function(e,t,o,i,n,r){this._mPoint0=e,this._mPoint1=t,this._mPoint2=o,egret.Tween.get(this).to({parabola:1},i).wait(80).call(function(){this.clean(),n&&n.call(r)})},Object.defineProperty(t.prototype,"parabola",{get:function(){return 0},set:function(e){var t=this._mPoint0,o=this._mPoint1,i=this._mPoint2;this.x=(1-e)*(1-e)*t.x+2*e*(1-e)*o.x+e*e*i.x,this.y=(1-e)*(1-e)*t.y+2*e*(1-e)*o.y+e*e*i.y},enumerable:!0,configurable:!0}),t.prototype.clean=function(){this._mPoint0&&egret.Point.release(this._mPoint0),this._mPoint1&&egret.Point.release(this._mPoint1),this._mPoint2&&egret.Point.release(this._mPoint2),this._mPoint0=void 0,this._mPoint1=void 0,this._mPoint2=void 0},t.prototype.destroy=function(){this.clean()},t}(egret.DisplayObjectContainer);__reflect(ActionExpand.prototype,"ActionExpand");var base;!function(e){var t=function(e){function t(t){var o=e.call(this)||this;return o._mArmatureList={},o}return __extends(t,e),t.prototype.initDBRes=function(e){App.DragonBonesFactory.initArmatureFileByName(e)},t.prototype.init=function(){},t.prototype.createArmature=function(e,t,o,i){void 0===i&&(i=1),this.cleanAllArmature();var n=this._mArmatureList[t];return n||(n=new DragonBonesArmatureContainer,n.register(App.DragonBonesFactory.makeArmature(e,t,i),o),this._mArmatureList[t]=n),n.parent||this.addChild(n),n},t.prototype.cleanAllArmature=function(){var e=this._mArmatureList;for(var t in e){var o=e[t];o.stop(),o.removeFromParent()}},t.prototype.clean=function(){this.cleanAllArmature(),R.removeFromParent(this)},t.prototype.destroy=function(){var e=this._mArmatureList;for(var t in e){var o=e[t];o&&o.destroy(),e[t]=void 0}this.removeChildren(),R.removeFromParent(this),this._mArmatureList=void 0},t}(egret.DisplayObjectContainer);e.BaseGameObject=t,__reflect(t.prototype,"base.BaseGameObject")}(base||(base={}));var common;!function(e){var t=function(){function e(){}return e.getPokerTexture=function(t){var o;o="common_ui_"+t+"_png";var i=e._mPokerTextures;return i[o]||(i[o]=RES.getRes(o)),i[o]},e.cleanAll=function(){var t=e._mPokerTextures;for(var o in t)t[o]=void 0},e._mPokerTextures={},e}();e.ChipTextures=t,__reflect(t.prototype,"common.ChipTextures")}(common||(common={}));var WebEntry=function(){function e(e){this._hotGame=null,this._hotGame=e}return e.prototype.entry=function(){App.isWebPhone||App.MouseUtils.setMouseEnable(),this.initWebDecorate(),this.initWebInsert(),this.webSaveAgentId()},e.prototype.webSaveAgentId=function(){if("undefined"!=typeof jsGetAgentId&&jsGetAgentId instanceof Function){var e=jsGetAgentId();GamePlayerMgr.i.saveAgentId(e?e:"-1",!1)}},e.prototype.initWebDecorate=function(){(App.isWebDecorate||App.isWebPhone)&&(IphoneXMatch.checkIphoneX(),App.IsDecrypt=!0,App.IsTest=!1,App.IsSimulate=!0,App.IsOpenToolView=!1,IphoneXMatch.IsTestIphoneX=!1,this._hotGame.updateUrlFirst(),this._hotGame.asyncLoadFz())},e.prototype.initWebInsert=function(){(App.isWebInsert||App.isThirdInsert)&&(WebInsertMgr.i.init(),this._hotGame.updateUrlFirst(),this._hotGame.asyncLoadFz())},e}();__reflect(WebEntry.prototype,"WebEntry");var BridgeStatic=function(){function e(){}return e.EntryIconViewScrollH=0,e}();__reflect(BridgeStatic.prototype,"BridgeStatic");var GameBase=function(){function e(){}return Object.defineProperty(e,"AssetsServerIp",{get:function(){var t=e.getGlobalData("_mAssetsServerIp");return t&&App.IsDecrypt&&(t=ED.prototype(t)),t},enumerable:!0,configurable:!0}),e.saveResoureServerIp=function(t){App.CommonUtils.isNullOrUndefined(t)||e.saveGlobalData("_mAssetsServerIp",t)},Object.defineProperty(e,"GameServerIp",{get:function(){var t=e.getGlobalData("_mGameServerIp");return t&&App.IsDecrypt&&(t=ED.prototype(t)),t},enumerable:!0,configurable:!0}),e.saveGameServerIp=function(t){App.CommonUtils.isNullOrUndefined(t)||e.saveGlobalData("_mGameServerIp",t)},Object.defineProperty(e,"CurrAppVersion",{get:function(){return e._mCurrAppVersion},enumerable:!0,configurable:!0}),e.initCurrAppVersion=function(t){e._mCurrAppVersion=t},Object.defineProperty(e,"CurrAppMerchant",{get:function(){return e._mCurrAppMerchant},enumerable:!0,configurable:!0}),e.initCurrAppMerchant=function(t){e._mCurrAppMerchant=t},e.getMainVersion=function(){var t=App.GlobalData.WebVer?App.GlobalData.WebVer:"v1.9.x";return App.DeviceUtils.IsNative&&(t=e.getLocalData("last_main_version_s"),t=t?t.split("_").join("."):e.CurrAppVersion),t+"."+e._mCodeVersion},e.getGameVersion=function(t){var o=e.getLocalData("last_"+t+"_version_s");return o?o.split("_").join("."):"v0.0.1"},e.getDeviceId=function(){return m.LocalData.getLocalData(App.IsDecrypt?GR.prototype("GameDeviceId"):"GameDeviceId")},e.saveDeviceId=function(e){var t=App.IsDecrypt?GR.prototype("GameDeviceId"):"GameDeviceId";m.LocalData.saveLocalData(t,e)},e.getCurrServerTime=function(){var t=egret.getTimer()-e._currOldTime;return e._currServerTime<=0?0:e._currServerTime+t},e.saveCurrServerTime=function(t){e._currOldTime=egret.getTimer(),e._currServerTime=t},e.getLocalData=function(t){return t=e.CurrAppVersion+t,t=App.IsDecrypt?GR.prototype(t):t,m.LocalData.getLocalData(t)},e.saveLocalData=function(t,o){t=e.CurrAppVersion+t,t=App.IsDecrypt?GR.prototype(t):t,m.LocalData.saveLocalData(t,o)},e.getGlobalData=function(e){e=App.IsDecrypt?GR.prototype(e):e;var t=m.LocalData.getLocalData(e);return t&&"null"!=t&&"undefined"!=t?ED.prototype(t):""},e.saveGlobalData=function(e,t){e=App.IsDecrypt?GR.prototype(e):e,m.LocalData.saveLocalData(e,EE.prototype(t))},e._mCodeVersion="26",e.IsTest=!0,e.reConnetTime=18e4,e.GameWidth=1120,e.GameHeight=630,e.AppBuildVersion="",e._mCurrAppVersion="v1.0.0",e._mCurrAppMerchant="50001",e.mIsPublicDownloaded=!1,e._currServerTime=0,e._currOldTime=0,e}();__reflect(GameBase.prototype,"GameBase");var GR;!function(e){function t(e){var t=e;t=o.encode(t),t="GR"+t+"TT",t=(""+t).split("").reverse().join(""),t=o.encode(t);var i=(""+t).split("");return i.splice(5,0,"KFC"),t=i.join(""),t=o.encode(t)}var o=new Basiie;e.prototype=t}(GR||(GR={}));var ED;!function(e){function t(e){return e=o.decode(e),e=R.prototype(e),e=o.decode(e),e=RR.prototype(e),e=o.decode(e)}var o=new Basiie;e.prototype=t}(ED||(ED={}));var EE;!function(e){function t(e){var t=e;t=o.encode(t),t=(""+t).split("").reverse().join(""),t=o.encode(t),t="Bg"+t+"Hn";var i=(""+t).split("");return i.splice(2,0,"K"),t=i.join(""),t=o.encode(t)}var o=new Basiie;e.prototype=t}(EE||(EE={}));var R;!function(e){function t(e){App.DeviceUtils.IsNative?GameNative.openUrl("1#OA"+e):n(e)}function o(e){function t(){App.MessageCenter.removeListener(GameNative.GameWebViewShow,t,this),App.setPortrait(),App.EasyLoading.hideLoading()}App.DeviceUtils.IsNative?(App.MessageCenter.addListener(GameNative.GameWebViewShow,t,this),GameNative.openUrl("0#OA"+e),App.EasyLoading.showOnTimeOut(3e4)):App.isWebDecorate||n(e)}function i(e){function t(){App.MessageCenter.removeListener(GameNative.GameWebViewShow,t,this),App.DeviceUtils.isAndroid&&App.setPortrait(),App.EasyLoading.hideLoading()}App.DeviceUtils.IsNative?(App.MessageCenter.addListener(GameNative.GameWebViewShow,t,this),GameNative.openUrl("2#OA"+e),App.EasyLoading.showOnTimeOut(3e4)):App.isWebDecorate||n(e)}function n(e){App.DeviceUtils.isIOS?App.PromTipsView.show("充值安全跳转",function(){window.open(e)}):window.open(e)}function r(e,t){d||(d=function(o){App.MessageCenter.removeListener(GameNative.GameGetClipboardInfo,d,this),e.call(t,o),d=null}),App.MessageCenter.addListener(GameNative.GameGetClipboardInfo,d,this),GameNative.sendToNative(GameNative.GameGetClipboardInfo,"")}function s(e,t,o){App.IsAppTest?t.call(o,"1"):GameNative.ping(e,t,o)}function a(e,t){App.DeviceUtils.IsNative?GameNative.checkNetWorkOpen(e,t):e.call(t,"1")}function p(e){GameNative.sendToNative(GameNative.GameSetClipboardInfo,e)}function c(e){for(var t in m){var o=e.indexOf(t);if(o>=0)return m[t]}return 10}function h(t){t&&e.setTimeOut(function(){g--,App.Socket.send({key:10159,body:{module:c(t),event_name:t}})},this,16*g++)}function l(e,t){y||(y=function(o){App.MessageCenter.removeListener(GameNative.GameGetImageBase64,y,this),e.call(t,o),y=null}),App.MessageCenter.addListener(GameNative.GameGetImageBase64,y,this),GameNative.sendToNative(GameNative.GameGetImageBase64,"")}function u(e){var t=(""+e).split("");return t.splice(2,1),e=t.join(""),e=(""+e).substring(2),e=e.substring(0,e.length-2)}e.openUrlOutside=t,e.openUrlInside=o,e.openRechargeUrlInside=i,e.windowOpen=n;var d;e.getClipboardInfo=r,e.ping=s,e.checkNetWorkOpen=a,e.setClipboardInfo=p;var m={App:10,Lobby:11,HB:91,Brnn1:101,Brnn2:102,Baccarat1:201,Baccarat2:202,HHDZ:301,DDZ:401,SHZ:601,SGJ:701,LHD1:801,LHD2:802,FN:901,QZNN:1101,CN:1001},g=1;e.sendPlayerAction=h;var y;e.getImageFromApp=l,e.prototype=u}(R||(R={}));var GameNative=function(){function e(){}return e.initNativeExternal=function(){this.addCallback(e.GameConstInit),this.addCallback(e.GameUpdateProgress),this.addCallback(e.GameUpdateComplete),this.addCallback(e.GameDownloadFail),this.addCallback(e.GameDownloadZipFail),this.addCallback(e.GameDeviceIdInit),this.addCallback(e.GameAndroidBackKey),this.addCallback(e.GameSetClipboardInfo),this.addCallback(e.GameGetClipboardInfo),this.addCallback(e.GameIsNetworkOpen),this.addCallback(e.GameCheckNetWork),this.addCallback(e.GameWebViewShow),this.addCallback(e.GameWebViewHide),this.addCallback(e.GameGetImageBase64),this.addCallback(e.GameAppBuildData),this.addCallback(e.GameAppOpenData),this.addCallback(e.GameAppStartTime),this.addCallback(e.GameMobileInfo),this.addCallback(e.GameOpeninstallInied)},e.addCallback=function(t){egret.ExternalInterface.addCallback(t,function(o){e.GameEventList.push({funcName:t,value:o}),App.TimerManager.doFrame(1,1,function(){for(var t=e.GameEventList;t.length>0;){var o=t.shift();App.MessageCenter.dispatch(o.funcName,o.value)}},this)})},e.sendToNative=function(e,t){egret.ExternalInterface.call(e,t)},e.openInstallEffect=function(t,o){void 0===o&&(o=!0);var i=e.OSEffectObj;(o&&!i[t]||!o)&&(i[t]="success",e.sendToNative(e.GameOpenInstallEffect,t))},e.openUrl=function(t){e.sendToNative(e.GameGotoWebUrl,t)},e.restartGame=function(){e.sendToNative(e.GameRestartApp,"resource/assets/login_bg1.jpg")},e.appGameExit=function(){e.sendToNative(e.GameAndroidExit,"")},e.checkNetWorkOpen=function(t,o){function i(n){App.MessageCenter.removeListener(e.GameIsNetworkOpen,i,this),t.call(o,n)}App.MessageCenter.addListener(e.GameIsNetworkOpen,i,this),e.sendToNative(e.GameIsNetworkOpen,"")},e.ping=function(t,o,i){function n(t){App.MessageCenter.removeListener(e.GameCheckNetWork,n,this),o.call(i,t)}App.MessageCenter.addListener(e.GameCheckNetWork,n,this),e.sendToNative(e.GameCheckNetWork,t)},e.openNetSetView=function(){e.sendToNative(e.GameGotoNetWorkSetting,"")},e.getAppStartTime=function(t,o){function i(n){App.MessageCenter.removeListener(e.GameAppStartTime,i,this),t.call(o,n)}App.MessageCenter.addListener(e.GameAppStartTime,i,this),e.sendToNative(e.GameAppStartTime,"")},e.getMobileInfo=function(t,o){function i(n){App.MessageCenter.removeListener(e.GameMobileInfo,i,this),t.call(o,n)}App.MessageCenter.addListener(e.GameMobileInfo,i,this),e.sendToNative(e.GameMobileInfo,"")},e.GameConstInit="GameConstInit",e.GameApkUpgrade="GameApkUpgrade",e.GameReadyComplete="GameReadyComplete",e.GameDeviceIdInit="GameDeviceIdInit",e.GameStartUpdate="GameStartUpdate",e.GameUpdateProgress="GameUpdateProgress",e.GameUpdateComplete="GameUpdateComplete",e.GameRestartApp="GameRestartApp",e.GameAndroidBackKey="GameAndroidBackKey",e.GameAndroidExit="GameAndroidExit",e.GameGotoWebUrl="GameGotoWebUrl",e.GameGetClipboardInfo="GameGetClipboardInfo",e.GameSetClipboardInfo="GameSetClipboardInfo",e.GameIsNetworkOpen="GameIsNetworkOpen",e.GameCheckNetWork="GameCheckNetWork",e.GameGotoNetWorkSetting="GameGotoNetWorkSetting",e.GameWebViewShow="GameWebViewShow",e.GameWebViewHide="GameWebViewHide",e.GameGetImageBase64="GameGetImageBase64",e.GameAppBuildData="GameAppBuildData",e.GameAppOpenData="GameAppOpenData",e.GameOpenInstallEffect="GameOpenInstallEffect",e.GameAppStartTime="GameStartTime",e.GameMobileInfo="GameMobileInfo",e.GameOpeninstallInied="GameOpeninstallInied",e.GameDownloadFail="GameDownloadFail",e.GameDownloadZipFail="GameDownloadZipFail",e.GameEventList=[],e.OSEffectObj={},e}();__reflect(GameNative.prototype,"GameNative");var RR;!function(e){function t(e){return e=(""+e).split("").reverse().join("")}e.prototype=t}(RR||(RR={}));var StatisticsAction=function(){function e(){this.mBuildData="",this._mFirstInLobby=!0,this._mFirstDownloadTimes={},this._mGTypes={fishjoy:2,baiJiaLe:3,shz:4,brnn:5,hhdz:6,ddz:7,lhd:8,sgj:9,fkdn:10}}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.addBuildData=function(e){this.mBuildData+="_"+e},e.prototype.FirstAgentData=function(){if(App.IsNative&&!GameBase.getGlobalData("First_FirstAgentData")){var e=this.mBuildData,t=(new Date).getTime(),o={oper_start_time:t,oper_end_time:t+1e3,device_id:GameBase.getDeviceId(),phone_brand:AppMobileInfo.Brand,phone_type:AppMobileInfo.Model,phone_os:e,phone_mem:e.substring(e.lastIndexOf("S")+1),channel_id:GameBase.CurrAppMerchant,player_action:1,token:GamePlayerMgr.i.getPlayer().getToken()};App.Socket.send({key:10182,body:o});for(var i in o)Log.log(i,o[i]);Log.log(this.mBuildData),GameBase.saveGlobalData("First_FirstAgentData","1")}},e.prototype.FirstInLobby=function(){if(App.IsNative&&this._mFirstInLobby){this._mFirstInLobby=!1;var e=this,t=(new Date).getTime();GameNative.getAppStartTime(function(o){e.send(1,o,t)},this)}},e.prototype.downloadGame=function(e){App.IsNative&&(GameBase.getGlobalData("FirstDownload_"+e)||this._mFirstDownloadTimes[e]||(this._mFirstDownloadTimes[e]=(new Date).getTime()))},e.prototype.downloadGameOver=function(e){if(App.IsNative&&!GameBase.getGlobalData("FirstDownload_"+e)){GameBase.saveGlobalData("FirstDownload_"+e,"ON");var t=GameModuleMgr.i.getGameByName(e);if(t){var o=(new Date).getTime(),i=this._mGTypes[e];this.send(i,this._mFirstDownloadTimes[e],o)}}},e.prototype.send=function(e,t,o){var i={oper_start_time:t,oper_end_time:o,device_id:GameBase.getDeviceId(),phone_brand:AppMobileInfo.Brand,phone_type:AppMobileInfo.Model,phone_os:AppMobileInfo.OSRelease,phone_mem:AppMobileInfo.RAM_TotalMem,channel_id:GameBase.CurrAppMerchant,player_action:e,token:GamePlayerMgr.i.getPlayer().getToken()};App.Socket.send({key:10182,body:i});for(var n in i)Log.log(n,i[n])},e._i=null,e}();__reflect(StatisticsAction.prototype,"StatisticsAction");var BroadcastMgr=function(){function e(){}return e.getBroadcastData=function(t){return e.CfgBroadcast||(e.CfgBroadcast=RES.getRes("broadcast_json")),e.CfgBroadcast["data_"+t]},e.analysis=function(t){var o=t.marquee_format_id,i=t.priority,n=t.play_times,r=t.marquee_effect,s=t.parameter,a=t.play_speed/100,p="",c=e.getBroadcastData(o);if(c?(p=c.content,r=c.effect_lv,n=c.play_times,i=c.priority,a=c.speed/100):i==BroadcastLv.SystemMsg?(p=s[0],Log.info("游戏公告：",p,"playSpeed:",a,"playTimes:",n)):(Log.warn("未配置跑马灯ID：",o,e.CfgBroadcast),p=s.join("")),!(a>0&&n>0))return void Log.warn("playSpeed：",a,"playTimes:",n);var h=new BroadcastMsg;h.mId=o,h.mPriority=i,h.mPlayTimes=n,h.mLvEffect=r,h.mMoveSpeed=a;for(var l=0,u=s.length;u>l;l++)p=p.replace("*",s[l]);return h.mTxtMsg=p,h},e.CfgBroadcast=null,e}();__reflect(BroadcastMgr.prototype,"BroadcastMgr");var BroadcastMsg=function(){function e(){this.mId=0,this.mTxtMsg="",this.mPriority=0,this.mLvEffect=0,this.mPlayTimes=3,this.mCurrTimes=0,this.mMoveSpeed=1,this.mEndX=0,this.mCurrX=0,this._mCreateTime=0,this.mScrollStartTime=0,this._mCreateTime=egret.getTimer()}return Object.defineProperty(e.prototype,"mCreateTime",{get:function(){return this._mCreateTime},enumerable:!0,configurable:!0}),e}();__reflect(BroadcastMsg.prototype,"BroadcastMsg");var BroadcastLv=function(){function e(){}return e.GameDeskCurr=1,e.GameDeskAll=2,e.GameAndLobby=3,e.SystemMsg=4,e}();__reflect(BroadcastLv.prototype,"BroadcastLv");var ErrorManager=function(){function e(){this._config=null,this._config=RES.getRes(App.GlobalData.ErrorConfig)}return Object.defineProperty(e,"i",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Error_Msg_Tips_Show",{get:function(){return BaseProxy.Socket_CMD+"10051"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ec",{get:function(){return e.i.ErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ErrorCode",{get:function(){return hqtpb.common.ErrorCode},enumerable:!0,configurable:!0}),e.prototype.getErrorByData=function(e){var t=e.description?e.description:this.getError(e.code);return t=t&&t.length>0?t:"未知错误："+e.code},e.prototype.getError=function(e){return this._config[""+e]||""},e.prototype.showError=function(t){App.MessageCenter.dispatch(e.Error_Msg_Tips_Show,{description:t})},e._instance=null,e}();__reflect(ErrorManager.prototype,"ErrorManager");var GameModuleMgr=function(){function e(){this._mCurrGame=null,this._mGameEntrances={},this._mCurrSceneType=0,this._mCurrSceneId=0,this._mCurrDeskId=0,this._mCurrDeskType=0,this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mIsOnlySceneList={},this._mIsEnterGameWithDeskId=!1,this._mIsShowProgress=!1}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.initGameMoudle=function(){this._mArrGameMoudel=[];var e=RES.getRes(App.GlobalData.Games).Games;Log.log("initGameMoudle: ",e);for(var t in e){var o=e[t],i=new GameMoudleInfo;i.key=t,i.gameName=o.title,i.gameIcon=o.icon,i.isOpen=o.isOpen,i.isHotGame=o.isHotGame,i.gameIndex=o.index,i.isRoom=o.isRoom,i.isDesk=o.isDesk,i.gameIconAnim=o.animRes,i.fixX=o.fixX||0,i.fixY=o.fixY||0,i.fixSX=o.fixSX||0,i.fixSY=o.fixSY||0,i.isResBig=o.isResBig||!1,i.isOnly=o.isOnly||!1,i.isForTest=o.isForTest||!1;for(var n=o.gameType.split("|"),r=0;r<n.length;r++){var s=parseInt(n[r]);i.mArrGameType.push(s),i.isOnly&&(this._mIsOnlySceneList[s]="1")}i.setArrRoomName(o.roomName?o.roomName.split("|"):[]),this._mArrGameMoudel.push(i)}this._mArrGameMoudel.sort(function(e,t){return e.gameIndex-t.gameIndex});for(var a=this._mArrGameMoudel,r=0;r<a.length;r++)if(a[r].gameIndex!=r){Log.error("游戏入口配置，从0开始依次递加！","对比前后 index ",a[r].gameName,"不符合规范");break}},e.prototype.getGameEntrace=function(){var e=this.getGame();if(e){var t=this._mGameEntrances[e.key];if(!t){var o=egret.getDefinitionByName(e.key+".Entrance."+e.key);this._mGameEntrances[e.key]=t=new o}return t}},e.prototype.getGame=function(){return this._mCurrGame},e.prototype.getGameByName=function(e){var t=this._mArrGameMoudel;for(var o in t)if(t[o].key==e)return t[o];return Log.error("未配置游戏类型：",e),null},e.prototype.getGameByType=function(e){var t=this._mArrGameMoudel;for(var o in t)for(var i=t[o].mArrGameType,n=i.length-1;n>=0;n--)if(i[n]==e)return t[o];return Log.error("未配置游戏类型：",e),null},e.prototype.getGameFullName=function(e){var t=this.getGameByType(e);return t?t.getFullName(e):"未知游戏："+e},e.prototype.startGame=function(e){this._mCurrGame=this.getGameByName(e),this._mCurrGame&&(this._mIsGameLineOut=!1,this.showAssetLoading(),App.TimerManager.doFrame(1,0,this.publicDownloaded,this),App.MessageCenter.addListener(SocketConst.SOCKET_START_RECONNECT,this.onReconnentting,this),Log.log("开始游戏：",e))},e.prototype.startGameByType=function(e){var t=this.getGameByType(e);t&&this.startGame(t.key)},e.prototype.showAssetLoading=function(){this._mIsShowProgress=!0,App.EasyLoading.showLoading()},e.prototype.hideAssetLoading=function(){this._mIsShowProgress=!1,App.EasyLoading.hideLoading()},e.prototype.publicDownloaded=function(){if(GameBase.mIsPublicDownloaded){App.TimerManager.remove(this.publicDownloaded,this);var e=this.getGame();if(e.loaded)this.onConfigComplete();else{var t=App.webResource?"static/resource/":"resource/";App.ResourceUtils.addConfig("games/"+e.key+"/config/res_"+e.key+".json",t),App.ResourceUtils.loadConfig(this.onConfigComplete,this)}}},e.prototype.onReconnentting=function(){Log.warn("游戏中掉线了"),this._mIsGameLineOut=!0},Object.defineProperty(e.prototype,"mIsGameLineOut",{get:function(){return this._mIsGameLineOut},enumerable:!0,configurable:!0}),e.prototype.backRoomScene=function(){(App.isInGame||App.isInDesk)&&(this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room))},e.prototype.backDeskScene=function(){App.isInRoom?this.sendLoginGame2():App.isInGame&&this.initializeScene(SceneConsts.Desk,ControllerConst.Desk)},e.prototype.backDeskSceneCreate=function(){this.createScene(ControllerConst.Desk)},e.prototype.enterGameFromDesk=function(e){App.isInDesk&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mEnterGameInfo=e,this.showAssetLoading(),this.loginOnDesk(),Log.log("enterGameFromDesk:",e))},e.prototype.enterGameFromRoom=function(e){App.isInRoom&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mEnterGameInfo=e,this.showAssetLoading(),this.sendLoginGame(this._mEnterGameInfo.sceneType),Log.log("enterGameFromRoom:",e))},e.prototype.exitRoom=function(){Log.log("退出房间清理");var e=this.getGame();if(e){Log.log("退出房间清理-成功");var t=e.key,o=e.key+"_room";RES.isGroupLoaded(t)&&RES.destroyRes(t),RES.isGroupLoaded(o)&&RES.destroyRes(o),e.isRoDLoaded=!1,e.isGameLoaded=!1,this._mIsGameLineOut=!1,this.removeGC(),this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrDeskType=0,this._mCurrSceneType=0,this.removeEvent()}},e.prototype.removeGC=function(){App.ControllerManager.isExists(ControllerConst.Game)&&this.exitGame(),App.ControllerManager.isExists(ControllerConst.Desk)&&App.ControllerManager.unregister(ControllerConst.Desk)},e.prototype.exitGame=function(){Log.log("退出游戏清理");var e=this.getGame();if(e){Log.log("退出游戏清理-成功"),App.ControllerManager.unregister(ControllerConst.Game),ScrollTxtTips.i.cleanAll();var t=this.getGameEntrace();t&&t.destroy(),e.isRoDLoaded||(RES.destroyRes(e.key),e.isGameLoaded=!1,this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrSceneType=0,this.removeEvent()),App.isInLobby||(App.DragonBonesFactory.clear(),egret.Tween.removeAllTweens()),this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mIsShowProgress=!1,this._mIsEnterGameWithDeskId=!1,this._mEnterGameInfo=void 0}},e.prototype.onConfigComplete=function(){var e=this.getGame();e.loaded=!0;var t=e.key;e.isRoD&&(t=e.key+"_room"),App.ResourceUtils.loadGroup(t,this.loadGroupCompete,this.loadGroupProgress,this)},e.prototype.loadGroupCompete=function(){var e=this.getGame();if(e&&e.loaded)if(e.isRoD?e.isRoDLoaded=!0:e.isGameLoaded=!0,this.initProtocol(e),e.isLoadedEXML)this.initModuleResource();else{var t="thm_"+e.key+"_json";App.ResourceUtils.loadModuleTheme(t,this.initModuleResource,this)}},e.prototype.initProtocol=function(e){if(!e.loadedProtoConfig){var t=RES.getRes("proto_"+e.key+"_json");t?(App.Socket.addProtocolNum(t),e.loadedProtoConfig=!0):Log.error(e.key+"initProtocol --- "," 没有注册协议文件 ")}},e.prototype.loadGroupProgress=function(e,t){if(this._mIsShowProgress){var o=Math.floor(e/t*100);App.EasyLoading.updateTxt(o+"%"),App.isWebDecorate&&web_easyLoading(o)}},e.prototype.initModuleResource=function(){this.hideAssetLoading(),App.EasyLoading.showLoading("100%");var e=this.getGame();e.isLoadedEXML=!0,this.roomInit(),this.loadResLater()},e.prototype.loadResLater=function(){var e=this.getGame();e.isRoD&&App.ResourceUtils.loadGroup(e.key,this.loadGameGroupCompete,this.loadGroupProgress,this)},e.prototype.loadGameGroupCompete=function(){var e=this.getGame();e&&(e.isGameLoaded=!0)},e.prototype.roomInit=function(){this._mIsBack2Game?(this.showAssetLoading(),this.sendLoginGame(this._mEnterGameInfo.sceneType)):this.loginGame()},e.prototype.loginGame=function(){var e=this.getGame();e.isRoom?(this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room),App.EasyLoading.hideLoading(),Log.log("进入游戏",e.gameName,"房间场景")):e.isForTest?(this.createScene(e.isDesk?ControllerConst.Desk:ControllerConst.Game),this.onLoginGameBack({result:!0})):this.sendLoginGame(e.gameType)},e.prototype.sendLoginGame=function(e){var t=this.getGame();this._mCurrSceneType=e>0?e:t.gameType,t.isDesk?this._mIsBack2Game||this._mIsEnterGameWithDeskId?App.TimerManager.doFrame(1,0,this.loadEnd,this):this.sendLoginGame2():App.TimerManager.doFrame(1,0,this.loadEnd,this)},e.prototype.loadEnd=function(){var e=this.getGame();(!e||e.isGameLoaded)&&(App.TimerManager.remove(this.loadEnd,this),this.sendLoginGame2())},e.prototype.sendLoginGame2=function(){var t=this.getGame(),o=this._mEnterGameInfo;this._mIsBack2Game?(t.isDesk?(App.isInLobby||App.isWebInsert)&&(this.createScene(o.deskId>0?ControllerConst.Game:ControllerConst.Desk),this._mCurrDeskId=o.deskId>0?o.deskId:this._mCurrDeskId):(App.isInLobby||App.isWebInsert)&&this.createScene(ControllerConst.Game),this.sendBack2Game()):this._mIsEnterGameWithDeskId?(t.isDesk||this.createScene(ControllerConst.Game),this.sendFirst2Game(this._mCurrSceneType)):(this.createScene(t.isDesk?ControllerConst.Desk:ControllerConst.Game),t.isForTest?this.onLoginGameBack({result:!0}):this.sendFirst2Game(this._mCurrSceneType)),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.TimerManager.doTimer(e.LoginTimeOut,1,this.loginSceneTimeOut,this)},e.prototype.sendBack2Game=function(){var t=this.getGame();App.Socket.send({key:e.CsWorldReturnSceneReqType,body:{yes:!0}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(e.ScWorldReturnSceneResType),this.onLoginGameBack,this),Log.log("重回场景请求登录 -- ",t.gameName)},e.prototype.sendFirst2Game=function(t){var o=this.getGame();App.Socket.send({key:e.Game_Login,body:{scene_type:t}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(e.Game_Login_Back),this.onLoginGameBack,this),Log.log("首次场景请求登录 -- ",o.gameName)},e.prototype.onLoginGameBack=function(t){if(App.TimerManager.remove(this.loginSceneTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.ScWorldReturnSceneResType),this.onLoginGameBack,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.Game_Login_Back),this.onLoginGameBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.EasyLoading.hideLoading(),t.result){this._mCurrSceneId=t.scene_id,this._mCurrSceneType=t.scene_type,this._mCurrDeskId=t.table_id>0?t.table_id:this._mCurrDeskId;var o=this.getGame(),i=this._mEnterGameInfo;o.isDesk?(Log.log("登录--",o.gameName,"--桌子成功",t),this._mIsBack2Game?(App.isInLobby?i.deskId>0?this.initializeScene(SceneConsts.Game,ControllerConst.Game):this.initializeScene(SceneConsts.Desk,ControllerConst.Desk):App.isInDesk?this.reconstructionScene(ControllerConst.Desk):App.isInGame&&this.reconstructionScene(ControllerConst.Game),this._mIsBack2Game=!1):this._mIsEnterGameWithDeskId?this.loginOnDesk():this.initializeScene(SceneConsts.Desk,ControllerConst.Desk)):(Log.log("登录--",o.gameName,"--游戏成功",t),App.isInGame?this._mIsBack2Game&&this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game),this._mIsBack2Game=!1),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginLobby_Success,this.reloginGame,this)}else{var n=t.scene_type;if(this._mIsOnlySceneList[n]){var r=this;App.PromTipsView.show("您在【"+r.getGameFullName(n)+"】有未完成的游戏，是否返回继续？",function(){var o=!1;r._mCurrGame&&(o=r._mCurrGame.mArrGameType.indexOf(n)>=0),App.isInLobby||o||App.SceneManager.runScene(SceneConsts.Lobby),o||this.clearGameTips(),e.i.saveBack2GameInfo(t.scene_type,t.table_id),e.i.back2GameFromLobby()},null,r,!0)}else Log.warn("【"+this.getGameByType(n).gameName+"】登录不成功",t)}},e.prototype.loginOnDesk=function(){App.TimerManager.doFrame(1,0,this.loginOnDesk2,this)},e.prototype.loginOnDesk2=function(){var e=this.getGame();if(!e||e.isGameLoaded){App.TimerManager.remove(this.loginOnDesk2,this),App.isInGame||this.createScene(ControllerConst.Game);var t=this._mIsBack2Game?this._mCurrDeskId:this._mEnterGameInfo.deskId;e.isForTest?this.sendLoginOnDeskBack({result:!0}):(this.sendLoginOnDesk(t),this._mCurrDeskId=t),Log.log("请求上桌 -- ",e.gameName,"deskId:",t)}},e.prototype.sendLoginOnDesk=function(t){this.getGame();App.Socket.send({key:e.CsWorldEnterTableReqType,body:{table_id:t}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(e.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.TimerManager.doTimer(e.LoginTimeOut,1,this.loginDeskTimeOut,this)},e.prototype.sendLoginOnDeskBack=function(t){App.TimerManager.remove(this.loginDeskTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.EasyLoading.hideLoading(),t.result&&(Log.log("上桌--",this.getGame().gameName,"--成功",t),App.isInGame?this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game)),this._mIsBack2Game=!1},e.prototype.createScene=function(e){var t=this.getGameEntrace();t.create(e),Log.log("%c"+this.getGame().gameName+"版本："+(t.getVersion&&t.getVersion()),"color:blue;background:yellow;")},e.prototype.initializeScene=function(e,t){App.SceneManager.runScene(e),this.getGameEntrace().initialize(t,this._mEnterGameInfo)},e.prototype.reconstructionScene=function(e){this._mIsGameLineOut=!1;var t=this.getGameEntrace();t.reconstruction(e)},e.prototype.callBack2Game=function(e,t){this._mIsBack2Game=!0,this._mEnterGameInfo={sceneType:e,deskId:t},this.startGameByType(e)},e.prototype.saveBack2GameInfo=function(e,t){this._mCurrSceneType=e,this._mCurrDeskId=t},e.prototype.back2GameFromLobby=function(){this.callBack2Game(this.getCurrSceneType(),this.getCurrDeskId())},e.prototype.back2GameCancel=function(){App.Socket.send({key:e.CsWorldReturnSceneReqType,body:{yes:!1}})},e.prototype.reloginGame=function(e){e.scene_type>0?(this._mIsBack2Game=!0,this.sendLoginGame(this._mCurrSceneType)):((App.isInDesk||App.isInGame)&&App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},e.prototype.onErrorLoginScene=function(){this.removeEvent(),App.EasyLoading.hideLoading(),(App.isInLobby||App.isInDesk||App.isInGame)&&(App.isInLobby||App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())
},e.prototype.loginSceneTimeOut=function(){Log.log(this.getGame().gameName+"场景登录超时！"),ErrorManager.i.showError("进入游戏超时！"),this.removeEvent(),App.EasyLoading.hideLoading(),(App.isInLobby||App.isInDesk||App.isInGame)&&(App.isInLobby||App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()),App.isWebDecorate&&web_timeOut(3)},e.prototype.onErrorLoginDesk=function(){App.EasyLoading.hideLoading(),App.isInGame&&(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},e.prototype.removeEvent=function(){App.MessageCenter.removeAll(this),App.TimerManager.remove(this.loginSceneTimeOut,this),App.TimerManager.remove(this.loginDeskTimeOut,this)},e.prototype.loginDeskTimeOut=function(){Log.log(this.getGame().gameName+"桌子登录超时！"),ErrorManager.i.showError("进入游戏超时！"),App.isInGame?(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()):(this.removeEvent(),App.EasyLoading.hideLoading()),App.isWebDecorate&&web_timeOut(3)},e.prototype.clearGameTips=function(){this.removeEvent(),this.exitGame(),this.exitRoom(),App.EasyLoading.hideLoading()},e.prototype.getCurrSceneType=function(){return this._mCurrSceneType},e.prototype.getCurrDeskId=function(){return this._mCurrDeskId},e.prototype.setCurrDeskId=function(e){this._mCurrDeskId=e},e.prototype.getCurrDeskType=function(){return this._mCurrDeskType},e.prototype.setCurrDeskType=function(e){this._mCurrDeskType=e},Object.defineProperty(e.prototype,"gameCfgList",{get:function(){return this._mArrGameMoudel},enumerable:!0,configurable:!0}),e.prototype.enterGameWithDeskId=function(e,t){this._mIsEnterGameWithDeskId=!0,this._mEnterGameInfo={deskId:t},this.startGame(e)},e._i=null,e.LoginTimeOut=1e4,e.Game_Login="10102",e.Game_Login_Back="10103",e.CsWorldReturnSceneReqType=10106,e.ScWorldReturnSceneResType=10107,e.CsWorldEnterTableReqType=10108,e.ScWorldEnterTableResType=10109,e}();__reflect(GameModuleMgr.prototype,"GameModuleMgr");var GameMoudleInfo=function(){function e(){this.isForTest=!1,this.key="",this.loaded=!1,this.loadedProtoConfig=!1,this.isLoadedEXML=!1,this.isRoDLoaded=!1,this.isGameLoaded=!1,this.mArrGameType=[],this.gameName="",this._mArrRoomName=[],this.isOpen=!1,this.isOnly=!1,this.isHotGame=!1,this.gameIcon="",this.gameIconAnim="",this.gameIndex=1,this.isDesk=!1,this.isRoom=!1,this.isResBig=!1,this.fixX=0,this.fixY=0,this.fixSX=0,this.fixSY=0}return Object.defineProperty(e.prototype,"gameType",{get:function(){return this.mArrGameType[0]},enumerable:!0,configurable:!0}),e.prototype.getFullName=function(e){var t=this.getGameNameByType(e);return t?this.gameName+" "+t:this.gameName},e.prototype.setArrRoomName=function(e){this._mArrRoomName=e},e.prototype.getGameNameByType=function(e){var t=this.mArrGameType.indexOf(e);return 0>t?"类型不符："+e:this._mArrRoomName[t]?" "+this._mArrRoomName[t]:""},Object.defineProperty(e.prototype,"isRoD",{get:function(){return this.isDesk||this.isRoom},enumerable:!0,configurable:!0}),e}();__reflect(GameMoudleInfo.prototype,"GameMoudleInfo");var GamePlayerMgr=function(){function e(){this._mCurrAccount="",this._mCurrPW="",this._mIsVisiter=!1,this._mIsSwitchAccount=!1,this._mUnreadMailCount=0,this._mUnreadNoticeCount=0,this._mWebUrl="50001",this._mPlayer=new Player,App.MessageCenter.addListener(BaseProxy.Socket_Type(e.RechargeResult),this.onRechargeBack,this),App.MessageCenter.addListener(BaseProxy.Socket_Type("10052"),this.onMoneyChange,this)}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mUnreadMailCount",{get:function(){return this._mUnreadMailCount},set:function(e){this._mUnreadMailCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mUnreadNoticeCount",{get:function(){return this._mUnreadNoticeCount},set:function(e){this._mUnreadNoticeCount=e},enumerable:!0,configurable:!0}),e.prototype.getPlayer=function(){return this._mPlayer},Object.defineProperty(e.prototype,"isVisiter",{get:function(){return this._mIsVisiter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mCurrAccount",{get:function(){return this._mCurrAccount},enumerable:!0,configurable:!0}),e.prototype.setAP=function(e,t){this._mCurrAccount=e,this._mCurrPW=t},e.prototype.relogin=function(){this.login(this._mIsVisiter)},e.prototype.loginByHistory=function(){var e=this.getAccount1();this.login(!(e&&e.length>0))},e.prototype.login=function(e){this._mIsVisiter=e,e&&this.setAP("",""),App.Socket.isConnecting()?this.loginWebInfo():(App.Socket.connect(),GameNative.openInstallEffect("enter_socket_on")),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在登录游戏，请稍等...")},e.prototype.web_login=function(e,t,o,i,n){this.setAP(e,t),this.login(!1),this._mWebUrl=o,this._mWebCallBack=i,this._mWebCallBackObj=n},e.prototype.web_login_guest=function(e,t,o){this.login(!0),this._mWebUrl=e,this._mWebCallBack=t,this._mWebCallBackObj=o},e.prototype.loginWebInfo=function(){var t=this._mIsVisiter;this._mCurrAccount||(this._mCurrAccount=t?"":this.getAccount1(),this._mCurrPW=t?"":this.getPw1());var o={loginame:this._mCurrAccount,password:this._mCurrPW,usertype:t?2:1,deviceid:t?GameBase.getDeviceId():"",channel:App.isWebDecorate?this._mWebUrl:GameBase.CurrAppMerchant,agent_id:this.getAgentId(),os:App.OS};for(var i in o)Log.log(i,":",o[i]);App.Socket.send({key:e.LoginWeb,body:o}),App.MessageCenter.addListener(BaseProxy.Socket_Type(e.LoginWeb_Back),this.onLoginWebInfoBack,this),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"获取登录信息超时.请稍后再试",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(1),App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.LoginWeb_Back),this.onLoginWebInfoBack,this)}.bind(this)),GameNative.openInstallEffect("enter_php_login"),StatisticsAction.i.addBuildData("S"+o.agent_id)},e.prototype.onLoginWebInfoBack=function(t){App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.LoginWeb_Back),this.onLoginWebInfoBack,this),Log.log("onLoginWebInfoBack:",t),this.saveAcc();var o=this.getPlayer();o.setPlayerInfo(t.role),o.setLoginame(t.loginame),o.setUserId(t.uid),o.setMoney(t.money),o.setSafeMoney(t.safe_money),o.setToken(t.token),o.setIsPwdSeted(t.is_fund_pwd_set),o.setIsRegistBytel(t.is_account_or_tel_reg),o.mAgentId=t.agent_id,o.mShowUid=t.show_uid,o.mIsAgent=t.is_agent,this.saveAgentId(""+o.mAgentId),this._mUnreadMailCount=t.unread_mail_count,this._mUnreadNoticeCount=t.unread_notice_count,0!=t.role.avatar&&t.role.avatar||(t.role.avatar=1),0!=t.role.avatar_box&&t.role.avatar_box||(t.role.avatar_box=1),!this.getAcIcon1()&&t.role.avatar&&this.saveIcon("ui_headImg_"+t.role.avatar),!this.getAcIconRound1()&&t.role.avatar_box&&this.saveIconRound("ui_headBox_"+t.role.avatar_box),this._mIsSwitchAccount=!1,App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginWeb_Success)},e.prototype.saveAcc=function(){if(!this._mIsVisiter){var t=e.i.getAccount1(),o=e.i.getPw1();(this._mCurrAccount!=t||o!=this._mCurrPW)&&(this.saveAccount2(t?t:"",o?o:""),this.saveAccount1(this._mCurrAccount,this._mCurrPW))}},e.prototype.loginLobby=function(){var e=this.getPlayer(),t=this._mIsVisiter;Log.log("登录大厅",e.getLoginame());var o={login_type:1,token:e.getToken(),user_type:t?2:1,loginame_or_deviceid:t?GameBase.getDeviceId():e.getLoginame(),uid:e.getUserId(),channel:App.isWebDecorate?this._mWebUrl:GameBase.CurrAppMerchant,show_uid:e.mShowUid};App.Socket.send({key:Protos.M.CsAuthLoginReqType,body:o}),App.MessageCenter.addListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this),App.MessageCenter.removeListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"游戏大厅登录超时.",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(1),App.MessageCenter.removeListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this)}.bind(this)),GameNative.openInstallEffect("et_lobby_login")},e.prototype.loginLobbyBack=function(e){if(Log.log("LobbyProxy onLoginWebBack:",e),app.BuildData.saveBuildTime(),GameNative.openInstallEffect("et_lobby_success"),App.MessageCenter.removeListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this),App.isInLoading||App.isInLogin||App.isInLobby||App.isInRoom){if((App.isInLoading||App.isInLogin)&&App.SceneManager.runScene(SceneConsts.Lobby),e.scene_type>0){App.isWebDecorate&&web_showPrompt(1);var t=GameModuleMgr.i;t.saveBack2GameInfo(e.scene_type,e.table_id),App.TimerManager.doFrame(10,1,function(){App.PromTipsView.show("您在【"+t.getGameFullName(e.scene_type)+"】有未完成的游戏，是否前往继续？",function(){t.back2GameFromLobby()},function(){t.back2GameCancel()},this,!0)},this)}App.EasyLoading.hideLoading()}else App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginLobby_Success,e);this._mWebCallBack&&this._mWebCallBack.call(this._mWebCallBackObj),this._mWebCallBack=void 0},e.prototype.changeLogin=function(e){Log.log("切换账户1"),this._mIsSwitchAccount=!0,e=e?e:2;var t=1==e?this.getAccount1():this.getAccount2(),o=1==e?this.getPw1():this.getPw2();t&&(this.exitCurrAccount(this.changeLoginAck,this),this.setAP(t,o))},e.prototype.changeLoginAck=function(e){Log.log("切换账户2",e),this.login(!1)},e.prototype.exitCurrAccount=function(e,t){function o(i){App.EasyLoading.hideLoading(),App.MessageCenter.removeListener(r,o,this),e.call(t,i)}Log.trace("退出当前账号");var i=this.getPlayer(),n={usertype:this._mIsVisiter?2:1,loginame_or_deviceid:this._mIsVisiter?GameBase.getDeviceId():i.getLoginame(),uid:i.getUserId(),token:i.getToken()},r=BaseProxy.Socket_Type(Protos.M.ScWorldWebLogoutResType);App.MessageCenter.addListener(r,o,this),App.Socket.send({key:Protos.M.CsWorldWebLogoutReqType,body:n}),App.EasyLoading.showOnTimeOut(15e3,"退出游戏超时",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(4),App.MessageCenter.removeListener(r,o,this)}.bind(this))},e.prototype.onRechargeBack=function(e){Log.log("充值结果返回",e),this.moneyChange(e.balance),App.isWebDecorate&&web_rechargeBack(e.balance)},e.prototype.onMoneyChange=function(e){Log.log("服务器变更余额:",e),this.moneyChange(e.balance)},e.prototype.moneyChange=function(e){this.getPlayer().setMoney(e)},e.prototype.getAccount1=function(){return GameBase.getGlobalData("Game_Login_Account1")},e.prototype.getAccount2=function(){return GameBase.getGlobalData("Game_Login_Account2")},e.prototype.getPw1=function(){return GameBase.getGlobalData("Game_Login_Password1")},e.prototype.getPw2=function(){return GameBase.getGlobalData("Game_Login_Password2")},e.prototype.getCurrPw=function(){return GameBase.getGlobalData("Game_Login_CurrPassword")},e.prototype.saveAccount1=function(e,t){GameBase.saveGlobalData("Game_Login_Account1",e?e:""),GameBase.saveGlobalData("Game_Login_Password1",t?t:"")},e.prototype.saveAccount2=function(e,t){GameBase.saveGlobalData("Game_Login_Account2",e?e:""),GameBase.saveGlobalData("Game_Login_Password2",t?t:"")},e.prototype.getAgentId=function(){var e=GameBase.getGlobalData("Game_Login_AgentId"),t=parseInt(e);return t>0?t:-1},e.prototype.saveAgentId=function(e,t){void 0===t&&(t=!0),t?this.saveAgentIdP(e):this.getAgentId()<=0&&this.saveAgentIdP(e)},e.prototype.saveAgentIdP=function(e){GameBase.saveGlobalData("Game_Login_AgentId",App.CommonUtils.isNullOrUndefined(e)?"":e)},e.prototype.getAcIcon1=function(){return GameBase.getGlobalData(this.getAccount1()+"_icon")},e.prototype.getAcIcon2=function(){return GameBase.getGlobalData(this.getAccount2()+"_icon")},e.prototype.getAcIconRound1=function(){return GameBase.getGlobalData(this.getAccount1()+"_round")},e.prototype.getAcIconRound2=function(){return GameBase.getGlobalData(this.getAccount2()+"_round")},e.prototype.saveIcon=function(e){GameBase.saveGlobalData(this._mCurrAccount+"_icon",e)},e.prototype.saveIconRound=function(e){GameBase.saveGlobalData(this._mCurrAccount+"_round",e)},Object.defineProperty(e.prototype,"isSwitchAccount",{get:function(){return this._mIsSwitchAccount},enumerable:!0,configurable:!0}),e.prototype.setIsOpenEffect=function(e){this._mPlayer.setIsOpenEffect(e)},Object.defineProperty(e.prototype,"isOpenEffect",{get:function(){return this._mPlayer.getOpenEffect()},enumerable:!0,configurable:!0}),e._i=null,e.LoginWeb="10110",e.LoginWeb_Back="10111",e.RechargeResult="10150",e}();__reflect(GamePlayerMgr.prototype,"GamePlayerMgr");var HotUpdateMgr=function(){function e(){this._mCurrList=[],this._mLoadedList=[],this._mNewVerInfo=null,this._updateCallBack=null,this._updateErrorCall=null,this._thisObj=null,this._currUpdateInfo={}}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.checkUpdate=function(t,o,i){var n=this;this._updateCallBack=t,this._updateErrorCall=o,this._thisObj=i;var r=e.getUpdateBaseUrl()+"ma&ni&fest_&last_&ver.&js&on".split("&").join("")+"?v="+Math.random();HttpDownload.i.download(r,function(e){if(e&&e.version){var t=GameBase.AppBuildVersion;App.DeviceUtils.isAndroid&&e.apk&&t!=e.app_version?this.appDownload(e.apk):App.DeviceUtils.isIOS&&e.ipa&&t!=e.app_version?this.appDownload(e.ipa):App.DeviceUtils.isIOS&&e.ipa_tips&&t!=e.app_version?App.PromTipsView.show(e.ipa_tips,function(){e.ipa_url&&R.openUrlOutside(e.ipa_url)}):e.tips?App.PromTipsView.show(e.tips,function(){e.tips_url&&R.openUrlOutside(e.tips_url)}):n.update(e.verNum)}else Log.log("更新文件读取错误！"),this._updateErrorCall&&this._updateErrorCall.call(this._thisObj)}.bind(this),function(e){n._updateErrorCall&&n._updateErrorCall.call(n._thisObj)},this)},e.prototype.appDownload=function(t){var o=App.NetUtils.urlRootBack(e.getUpdateBaseUrl(),t);App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Progress,{progress:1,total:1}),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命下载新安装包..."),GameNative.sendToNative(GameNative.GameApkUpgrade,o)},e.prototype.update=function(t){var o=this,i=e.getUpdateBaseUrl()+"m&an&if&est&.&js&on".split("&").join("")+"?v="+t;HttpDownload.i.download(i,function(e){o.initNewVersion(e)},function(e){o._updateErrorCall&&o._updateErrorCall.call(o._thisObj)},this)},e.prototype.initNewVersion=function(e){this._mNewVerInfo=e,this.checkMainVersion()||this._updateCallBack&&this._updateCallBack.call(this._thisObj)},e.prototype.checkMainVersion=function(){var t=this._mNewVerInfo;if(!t||!t.main||!t.main.new_ver_num)return!1;var o=t.main,i=this._currUpdateInfo,n=GameBase.getLocalData("last_main_version");n||(n=1==o.new_ver_num?"0":"1");var r=o.new_ver_num>0?o.new_ver_num:"1";if(r==n){var s=o["index_"+r],a=this.getVerMainMd5();if(!s||!s.md5||!a||s&&a==s.md5)return!1}var p=parseInt(n)+1,c=o["index_"+p];if(c||(c=o["index_"+n]),c){var h=c.ver.split("-")[1];i.main=""+r,i.main_ver=""+h,i.main_md5=""+o["index_"+o.new_ver_num].md5;var l=e.getUpdateBaseUrl()+"main/"+c.res;return GameNative.sendToNative(GameNative.GameStartUpdate,l),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"请稍等，资源正在下载更新..."),!0}return Log.warn("Main不存在可更新资源","lastMainVerIndex:",n,"newMainVerIndex:",r),!1},e.prototype.getVerMainMd5=function(){return GameBase.getLocalData("last_main_version_md5")||""},e.prototype.setVerMainMd5=function(e){GameBase.saveLocalData("last_main_version_md5",e)},e.prototype.getVerGameMd5=function(e){return GameBase.getLocalData("last_"+e+"_version_md5")||""},e.prototype.setVerGameMd5=function(e,t){GameBase.saveLocalData("last_"+e+"_version_md5",t)},e.prototype.checkGameUpdate=function(e){var t=this._mNewVerInfo,o=this._currUpdateInfo;if(!(t&&t.games&&t.games[e]&&t.games[e].new_ver_num))return!1;if(o[e])return!0;var i=t.games[e],n=GameBase.getLocalData("last_"+e+"_version")||"0",r=i.new_ver_num;if(r==n){var s=i["index_"+r],a=this.getVerGameMd5(e);if(!s||!s.md5||!a||s&&a==s.md5)return!1}var p=""+(parseInt(n)+1),c=i["index_"+p];if(c||(c=i["index_"+n]),c){var h=c.ver.split("-")[1];return o[e]=""+r,o[e+"ver"]=""+h,o[e+"res"]=""+c.res,o[e+"md5"]=""+i["index_"+i.new_ver_num].md5,!0}return Log.warn("Game不存在可更新资源","lastGameVerIndex",n,"newIndex:",p),!1},e.prototype.loadGameUpdate=function(t){var o=this._currUpdateInfo;if(!(o[t+"updateing"]||(this._mLoadedList.indexOf(t)<0&&this._mLoadedList.push(t),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:t,progress:0,total:1}),this._mCurrList.length>=e.Max_Load_Num))){this._mCurrList.push(t),this._mLoadedList.splice(this._mLoadedList.indexOf(t),1),o[t+"updateing"]="100000";var i=e.getUpdateBaseUrl()+"games/"+t+"/"+o[t+"res"];GameNative.sendToNative(GameNative.GameStartUpdate,i),Log.log("开始下载：",t,"len:",this._mLoadedList.length)}},e.prototype.saveVersion=function(e){var t=this._currUpdateInfo;if(e.indexOf("main")>-1){if(GameBase.saveLocalData("last_main_version",t.main),GameBase.saveLocalData("last_main_version_s",t.main_ver),this.setVerMainMd5(t.main_md5),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),this.checkMainVersion())return;Log.log("Main热更新完成，重启游戏"),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Progress,{progress:1,total:1}),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"更新完成，正在准备游戏资源..."),App.TimerManager.doTimer(2e3,1,function(){GameNative.restartGame()},this),t.main=void 0,t.main_ver=void 0,t.main_md5=void 0}else if(e.indexOf("games")>-1){var o=e.split("/"),i=o.indexOf("games")+1,n=o[i],r=t[n],s=t[n+"ver"];Log.log("saveVersion:",n,r,s),GameBase.saveLocalData("last_"+n+"_version",r),GameBase.saveLocalData("last_"+n+"_version_s",s),this.setVerGameMd5(n,t[n+"md5"]),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Version,n),t[n]=void 0,t[n+"res"]=void 0,t[n+"md5"]=void 0,t[n+"updateing"]=void 0;var a=this._mCurrList.indexOf(n);if(this._mCurrList.splice(a,1),Log.log("下载完成x：","_mCurrList len:",this._mCurrList.length,"_mLoadedList len:",this._mLoadedList.length),e.indexOf("public")>-1?App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Public_Complete):App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Complete,n),this._mLoadedList.length>0){var p=this._mLoadedList.shift();this.checkGameUpdate(p)&&this.loadGameUpdate(p)}}},e.getUpdateBaseUrl=function(){return""+GameBase.AssetsServerIp+"/hotUpdate/"+GameBase.CurrAppVersion+"/"},e._instance=null,e.Max_Load_Num=5,e}();__reflect(HotUpdateMgr.prototype,"HotUpdateMgr");var URLCheckMgr=function(){function e(){this._mMaxIndex=0,this._mIndex=0,this._mMinTime=3e4,this._mErrorCount=0,this._mTimeOut=3e4}return Object.defineProperty(e,"i",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.checkAllOpenUrl=function(e,t,o){void 0===o&&(o=3e4);var i=this;this._mIndex=1,this._mThisObj=t,this._mCallBack=e;var n=GameBase.getGlobalData("UrlList_index");return n?(this._mTimeOut=o,this._mMaxIndex=parseInt(n),App.TimerManager.doTimer(10,this._mMaxIndex,this.onFrameCheck,this),void App.TimerManager.doTimer(this._mTimeOut,1,function(){i.callBack("timeout")},this)):void i.callBack("load")},e.prototype.onFrameCheck=function(){var e=this,t=GameBase.getGlobalData("UrlList_"+this._mIndex++);if(t){t&&App.IsDecrypt&&(t=ED.prototype(t));var o="/hotUpdate/",i=t+o+GameBase.CurrAppVersion+"/"+"ma&ni&fest_&last_&ver.&js&on".split("&").join("")+"?v="+Math.random(),n=new XMLHttpRequest;n.responseType="text",n.open("GET",i,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.timeout=this._mTimeOut,n.m_start_time=(new Date).getTime(),n.m_index=this._mIndex,n.addEventListener("load",function(){var t=JSON.parse(n.response),o=t.data;if(o&&o.version){var i=n.m_index,r=(new Date).getTime()-n.m_start_time;Log.info("onFrameCheck load:",i,"delayTime:",r,o.version),e._mMinTime>r&&(e._mMinTime=r,GameBase.saveResoureServerIp(GameBase.getGlobalData("UrlList_"+i))),e.callBack("load")}}),n.addEventListener("error",function(t){Log.error("onFrameCheck error:",n.m_index,t),e._mErrorCount++,e._mErrorCount>=e._mMaxIndex&&e.callBack("error")}),n.addEventListener("timeout",function(t){Log.warn("onFrameCheck timeout:",n.m_index,t),e.callBack("timeout")}),n.send(),Log.info("onFrameCheck send:",i)}},e.prototype.callBack=function(e){var t=this;t._mCallBack&&t._mCallBack.call(t._mThisObj,e),t._mCallBack=void 0},e._instance=null,e}();__reflect(URLCheckMgr.prototype,"URLCheckMgr");var UrlPoolMgr=function(){function e(){this._mIsInitUrlsed=!1,this._mIsGameUrlCheckBack=!1,this._mupdateCallBack=null,this._mupdateErrorCall=null,this._mthisObj=null,this.___mupdateCallBack=!0,this._mIsCheckFrontOpenUrl=!1}return Object.defineProperty(e,"i",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initUrls=function(){App.IsNative&&GameBase.getGlobalData("UrlList_1")?this._mIsInitUrlsed=!0:this.udata(RES.getRes(e.UAName),!1)},Object.defineProperty(e.prototype,"isInitUrlsed",{get:function(){return this._mIsInitUrlsed},enumerable:!0,configurable:!0}),e.prototype.udata=function(t,o){var i=this;this.___mupdateCallBack=!0,JSZip.loadAsync(t).then(function(e){return e.file("u_a.f_z".split("_").join("")).async("text")}).then(function(t){if(t=JSON.parse(t).data,t&&t.u){for(var n=e.UrlList;n.length;)n.pop();for(var r=0;r<t.u.length;r++)n.push(t.u[r]);i.mupdateCallBack(o)}}),JSZip.loadAsync(t).then(function(e){return e.file("u_g.f_z".split("_").join("")).async("text")}).then(function(t){if(t=JSON.parse(t).data,t&&t.u){for(var n=e.GameUrlList;n.length;)n.pop();for(var r=0;r<t.u.length;r++)n.push(t.u[r]);i.mupdateCallBack(o)}})},Object.defineProperty(e.prototype,"ug",{get:function(){var e=GameBase.getGlobalData("GameUrlList_index"),t=parseInt(e?e:"0");t++;var o=GameBase.getGlobalData("GameUrlList_"+t);if(!o||o.length<=0){if(this._mIsGameUrlCheckBack)return!1;t=1,this._mIsGameUrlCheckBack=!0}return o=GameBase.getGlobalData("GameUrlList_"+t),GameBase.saveGlobalData("GameUrlList_index",""+t),GameBase.saveGameServerIp(o),App.Socket.updateUrl(GameBase.GameServerIp),!0},enumerable:!0,configurable:!0}),e.prototype.loginSuccess=function(){this._mIsGameUrlCheckBack=!1},e.prototype.u=function(e,t,o){this._mupdateCallBack=e,this._mupdateErrorCall=t,this._mthisObj=o,this.getUA()},e.prototype.getUA=function(){this.___mupdateCallBack=!0;var t=HotUpdateMgr.getUpdateBaseUrl()+"u_a.f_z".split("_").join("")+"?v="+Math.random(),o=this;HttpDownload.i.download(t,function(t){if(t&&t.u){for(var i=e.UrlList;i.length;)i.pop();for(var n=0;n<t.u.length;n++)i.push(t.u[n]);o.mupdateCallBack(!0),o.getUG()}else this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),function(){this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),this,1500)},e.prototype.getUG=function(){var t=HotUpdateMgr.getUpdateBaseUrl()+"u_g.f_z".split("_").join("")+"?v="+Math.random(),o=this;HttpDownload.i.download(t,function(t){if(t&&t.u){for(var i=e.GameUrlList;i.length;)i.pop();for(var n=0;n<t.u.length;n++)i.push(t.u[n]);o.mupdateCallBack(!0)}else this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),function(){this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),this,1500)},e.prototype.mupdateCallBack=function(e){if(this.___mupdateCallBack)return void(this.___mupdateCallBack=!1);if(this.saveUrls(),!e)return void(this._mIsInitUrlsed=!0);var t=this._mupdateCallBack;t&&t.call(this._mthisObj)},e.prototype.saveUrls=function(){for(var t=e.UrlList,o=0;o<t.length;o++)GameBase.saveGlobalData("UrlList_"+(o+1),t[o]);t=e.GameUrlList;for(var o=0;o<t.length;o++)GameBase.saveGlobalData("GameUrlList_"+(o+1),t[o]);GameBase.saveGlobalData("UrlList_"+(e.UrlList.length+1),""),GameBase.saveGlobalData("GameUrlList_"+(e.GameUrlList.length+1),"")},e.prototype.checkNewUrl=function(e,t,o){var i=this;R.ping("www.baidu.com",function(n){"1"==n?i.checkNewUrl2(e,t,o):i.showNetErrorTips(e,t,o)},i)},e.prototype.checkNewUrl2=function(e,t,o){var i=GameBase.getGlobalData("UrlList_index"),n=parseInt(i?i:"0");n++;var r=GameBase.getGlobalData("UrlList_"+n);return!r||r.length<=0?void this.checkAllOpenUrl(e,t,o):this._mIsCheckFrontOpenUrl?(r=GameBase.getGlobalData("UrlList_"+n),Log.log("checkNewUrl2 times：",n,r),GameBase.saveResoureServerIp(r),GameBase.saveGlobalData("UrlList_index",""+n),void this.u(e,t,o)):void this.checkFrontOpenUrl(e,t,o)},e.prototype.checkFrontOpenUrl=function(e,t,o){var i=this;this._mIsCheckFrontOpenUrl=!0,URLCheckMgr.i.checkAllOpenUrl(function(n){"load"==n?i.u(e,t,o):i.checkNewUrl2(e,t,o)},this,1500),Log.log("checkFrontOpenUrl times")},e.prototype.checkAllOpenUrl=function(e,t,o){var i=this;URLCheckMgr.i.checkAllOpenUrl(function(n){if("load"==n)i.u(e,t,o);else{var r=i._mupdateErrorCall;r&&r.call(i._mthisObj)}},this,3e4),Log.log("checkAllOpenUrl times")},e.prototype.showNetErrorTips=function(e,t,o){var i=this,n="检查到网络不可用，请检查后再重试";App.PromTipsView.show(n,function(){i.u(e,t,o)},function(){GameNative.appGameExit()},this,!0)},e._instance=null,e.UrlList=[],e.GameUrlList=[],e.UAName="f..z.._..f..z".split("..").join(""),e}();__reflect(UrlPoolMgr.prototype,"UrlPoolMgr");var WebInsertMgr=function(){function e(){}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.setGameName=function(e){this._mGameName=e},e.prototype.setTableId=function(e){this._mTableId=e},e.prototype.getGameName=function(){return this._mGameName},e.prototype.getTableId=function(){return this._mTableId},e.prototype.init=function(){App.IsTest=!1;var e=getParam("uid"),t=getParam("token"),o=getLoadBg(),i=GamePlayerMgr.i.getPlayer();e&&i.setUserId(e),t&&i.setToken(t),o&&(App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Visible,!1),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Bg,o));var n=getParam("gamecode"),r=getParam("tableid");n?this.setGameName(n):App.isWebInsert&&App.PromTipsView.show("参数错误."),r>-1&&this.setTableId(r)},e.prototype.getInfo=function(){App.Socket.isConnecting()?this.getUserInfo():(App.Socket.connect(),GameNative.openInstallEffect("enter_socket_on")),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在登录游戏，请稍等...")},e.prototype.getUserInfo=function(){var t=GamePlayerMgr.i.getPlayer(),o={token:t.getToken(),uid:t.getUserId()};App.Socket.send({key:e.UserInfo,body:o}),App.MessageCenter.addListener(BaseProxy.Socket_Type(e.UserInfo_Back),this.onUserInfoBack,this),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"获取用户信息超时.请稍后再试",function(){e.i.getInfo(),App.MessageCenter.removeListener(BaseProxy.Socket_Type(e.UserInfo_Back),this.onUserInfoBack,this)}.bind(this)),GameNative.openInstallEffect("enter_php_login")},e.prototype.onUserInfoBack=function(e){Log.log("onUserInfoBack:",e);var t=GamePlayerMgr.i.getPlayer();t.setNickName(e.name),t.setAvatar(e.avatar?e.avatar:1),t.setAvatarBox(e.avatar_box?e.avatar_box:1),t.setMoney(e.balance),t.mShowUid=e.show_uid,GameBase.initCurrAppMerchant(e.agent_org_id),App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginWeb_Success)},e.prototype.loginLobby=function(){var e=GamePlayerMgr.i.getPlayer();Log.log("登录大厅",e.getLoginame());var t={login_type:1,token:e.getToken(),user_type:1,loginame_or_deviceid:e.getLoginame(),uid:e.getUserId(),channel:GameBase.CurrAppMerchant,show_uid:e.mShowUid};App.Socket.send({key:Protos.M.CsAuthLoginReqType,body:t}),App.MessageCenter.addListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this),App.MessageCenter.removeListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"游戏登录超时.",function(){App.MessageCenter.removeListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this)}.bind(this)),GameNative.openInstallEffect("et_lobby_login")},e.prototype.loginLobbyBack=function(t){if(Log.log("LobbyProxy onLoginWebBack:",t),GameNative.openInstallEffect("et_lobby_success"),App.EasyLoading.hideLoading(),App.MessageCenter.removeListener(BaseProxy.Socket_Type(Protos.M.ScAuthLoginResType),this.loginLobbyBack,this),this.getGameName())if(t.scene_type>0)if(401==t.scene_type||402==t.scene_type||403==t.scene_type){var o=GameModuleMgr.i;o.saveBack2GameInfo(t.scene_type,t.table_id),App.TimerManager.doFrame(10,1,function(){App.PromTipsView.show("您在【"+o.getGameFullName(t.scene_type)+"】有未完成的游戏，是否前往继续？",function(){o.back2GameFromLobby()},function(){e.i.cutGameToNewGame()},this,!0)},this)}else e.i.cutGameToNewGame();else e.i.startGame();else if(App.isInLoading||App.isInLogin||App.isInLobby||App.isInRoom){if((App.isInLoading||App.isInLogin)&&App.SceneManager.runScene(SceneConsts.Lobby),t.scene_type>0){var i=GameModuleMgr.i;i.saveBack2GameInfo(t.scene_type,t.table_id),App.TimerManager.doFrame(10,1,function(){App.PromTipsView.show("您在【"+i.getGameFullName(t.scene_type)+"】有未完成的游戏，是否前往继续？",function(){i.back2GameFromLobby()},function(){i.back2GameCancel()},this,!0)},this)}App.EasyLoading.hideLoading()}else App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginLobby_Success,t)},e.prototype.startGameByTableId=function(e,t){GameModuleMgr.i.enterGameWithDeskId(e,t)},e.prototype.cutGameToNewGame=function(){GameModuleMgr.i.back2GameCancel(),App.TimerManager.doFrame(50,1,function(){e.i.startGame()},this)},e.prototype.startGame=function(){e.i.getTableId()?e.i.startGameByTableId(e.i.getGameName(),e.i.getTableId()):GameModuleMgr.i.startGame(e.i.getGameName())},e._i=null,e.UserInfo="10197",e.UserInfo_Back="10198",e}();__reflect(WebInsertMgr.prototype,"WebInsertMgr");var AppMobileInfo=function(){function e(){}return e.init=function(){GameNative.getMobileInfo(function(t){var o=t.split("&&");e.Brand=o[0],e.Model=o[1],e.OSRelease=o[2];var i=o[3].split("/");e.RAM_AvailMem=i[0],e.RAM_TotalMem=i[1]},this)},e.Brand="",e.Model="",e.OSRelease="",e.RAM_AvailMem="",e.RAM_TotalMem="",e}();__reflect(AppMobileInfo.prototype,"AppMobileInfo");var BankModel=function(){function e(){this.bankName="",this.bankCard="",this.name="",this.idcard="",this.province="",this.city="",this.subbranch=""}return e}();__reflect(BankModel.prototype,"BankModel");var app;!function(e){var t=function(){function e(){this._mAppBuildData="",this._mAppOpenData="",this._mAppClipboardData="",this._mAppOpeninstallInited="",this._mIndex=0}return e.isBuildTime=function(){return!GameBase.getGlobalData("app_build_time")},e.saveBuildTime=function(){e.isBuildTime()&&GameBase.saveGlobalData("app_build_time","app_build_timed"+GameBase.getCurrServerTime())},e.prototype.requsetBuildData=function(e,t){this._mThisObj=t,this._mCallBack=e,this._mIndex=0,App.MessageCenter.addListener(GameNative.GameGetClipboardInfo,this.onGameGetClipboardInfo,this),App.MessageCenter.addListener(GameNative.GameAppBuildData,this.onGameAppBuildData,this),App.MessageCenter.addListener(GameNative.GameAppOpenData,this.onGameAppOpenData,this),App.MessageCenter.addListener(GameNative.GameOpeninstallInied,this.onGameOpeninstallInied,this),GameNative.sendToNative(GameNative.GameGetClipboardInfo,""),GameNative.sendToNative(GameNative.GameAppBuildData,""),GameNative.sendToNative(GameNative.GameAppOpenData,""),GameNative.sendToNative(GameNative.GameOpeninstallInied,"")},e.prototype.onGameGetClipboardInfo=function(e){App.MessageCenter.removeListener(GameNative.GameGetClipboardInfo,this.onGameGetClipboardInfo,this),this._mAppClipboardData=e,this._mIndex++,this.checkCallBack(),Log.info("onGameGetClipboardInfo",e)},e.prototype.onGameAppBuildData=function(e){App.MessageCenter.removeListener(GameNative.GameAppBuildData,this.onGameAppBuildData,this),this._mAppBuildData=e,this._mIndex++,this.checkCallBack(),Log.info("onGameAppBuildData",e)},e.prototype.onGameAppOpenData=function(e){App.MessageCenter.removeListener(GameNative.GameAppOpenData,this.onGameAppOpenData,this),this._mAppOpenData=e,this._mIndex++,this.checkCallBack(),Log.info("onGameAppOpenData",e)},e.prototype.onGameOpeninstallInied=function(e){App.MessageCenter.removeListener(GameNative.GameOpeninstallInied,this.onGameOpeninstallInied,this),this._mAppOpeninstallInited=e,this._mIndex++,this.checkCallBack(),Log.info("onGameOpeninstallInied",e)
},e.prototype.checkCallBack=function(){this._mIndex++>=4&&this._mCallBack&&this._mCallBack.call(this._mThisObj)},e.prototype.getAppBuildData=function(){return this._mAppBuildData},e.prototype.getAppOpenData=function(){return this._mAppOpenData},e.prototype.getAppClipboardData=function(){return this._mAppClipboardData},e.prototype.getOpeninstallInited=function(){return this._mAppOpeninstallInited},e}();e.BuildData=t,__reflect(t.prototype,"app.BuildData")}(app||(app={}));var CSModel=function(){function e(){}return e.getUrlFromLive800=function(){return e.URL+e.csInfo()+(e.URL.indexOf("https://")>-1?"&s=1":"")},e.csInfo=function(){var t=GamePlayerMgr.i.getPlayer(),o={userId:t.mShowUid,name:""+t.mShowUid,memo:""+t.mShowUid},i={companyID:e.Company_ID,configID:2306,jid:4095904748,info:App.NetUtils.URLEncode(o)};return App.NetUtils.URLEncode(i)},e.Company_ID=365033539,e.URL="https://nine.mdihi.com/chat/chatClient/chatbox.jsp?",e}();__reflect(CSModel.prototype,"CSModel");var Player=function(){function e(){this.mIsAgent=!1,this.mAgentId=0,this.mShowUid=0,this.uid=0,this.loginame="",this.nickname="赵日天",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token="",this.isPwdSeted=!1,this.isRegistBytel=!0,this.isOpenEffect=!0}return e.prototype.setPlayerInfo=function(e){e&&(this.playerInfo=e,this.nickname=e.nickname,0!=e.sex&&(this.sex=e.sex),0!=e.avatar&&(this.avatar=e.avatar>0?e.avatar:1),0!=e.avatar_box&&(this.avatar_box=e.avatar_box>0?e.avatar_box:1),this.vip=e.vip,this.honor=e.honor,App.MessageCenter.dispatch(GameConsEvent.Game_UserChangeAccount))},e.prototype.getPlayerInfo=function(){return this.playerInfo},e.prototype.setLoginame=function(e){e&&(this.loginame=e)},e.prototype.getLoginame=function(){return this.loginame},e.prototype.setNickName=function(e){e&&(this.nickname=e)},e.prototype.getNickName=function(){return this.nickname},e.prototype.setUserId=function(e){this.uid=e},e.prototype.getUserId=function(){return this.uid},e.prototype.setSex=function(e){this.sex=e},e.prototype.getSex=function(){return this.sex},e.prototype.setAvatar=function(e){this.avatar=e},e.prototype.getAvatar=function(){return this.avatar},e.prototype.setAvatarBox=function(e){this.avatar_box=e},e.prototype.getAvatarBox=function(){return this.avatar_box},e.prototype.setMoney=function(e){this.money=e,App.MessageCenter.dispatch(GameConsEvent.Game_UserMoneyChange,{balance:e})},e.prototype.getMoney=function(){return this.money},e.prototype.setSafeMoney=function(e){this.safe_money=e},e.prototype.getSafeMoney=function(){return this.safe_money},e.prototype.setVip=function(e){this.vip=e},e.prototype.getVip=function(){return this.vip},e.prototype.setHonor=function(e){this.honor=e},e.prototype.getHonor=function(){return this.honor},e.prototype.setToken=function(e){this.token=e},e.prototype.getToken=function(){return this.token},e.prototype.setIsPwdSeted=function(e){this.isPwdSeted=e},e.prototype.getIsPwdSeted=function(){return this.isPwdSeted},e.prototype.setIsRegistBytel=function(e){this.isRegistBytel=e},e.prototype.getIsRegistBytel=function(){return this.isRegistBytel},e.prototype.setIsOpenEffect=function(e){this.isOpenEffect=e},e.prototype.getOpenEffect=function(){return this.isOpenEffect},e.prototype.resetPlayer=function(){this.uid=0,this.loginame="",this.nickname="",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token="",this.isPwdSeted=!1,this.isRegistBytel=!0,this.isOpenEffect=!0},e}();__reflect(Player.prototype,"Player");var Protos=function(){function e(){}return Object.defineProperty(e,"M",{get:function(){return hqtpb.types.MessageType},enumerable:!0,configurable:!0}),e}();__reflect(Protos.prototype,"Protos");var ZhifubaoModel=function(){function e(){this.account="",this.name="",this.locked=!1}return e}();__reflect(ZhifubaoModel.prototype,"ZhifubaoModel");var CommonProxyConst=function(){function e(){}return e.Lobby_LoginLobby="10003",e.Lobby_LoginLobby_Back="10004",e.Lobby_RegisterAccount="10112",e.Lobby_Lobby_RegisterAccount_Back="10113",e.Lobby_GetCaptcha="10114",e.Lobby_GetCaptcha_Back="10115",e.Lobby_ResetLoginPassword="10116",e.Lobby_ResetLoginPassword_Back="10117",e.Lobby_RechargeType="10118",e.Lobby_RechargeType_Back="10119",e.Lobby_RechargeMoney="10120",e.Lobby_RechargeMoney_Back="10121",e.Lobby_Exchange="10122",e.Lobby_Exchange_Back="10123",e.Lobby_SaveMoney="10124",e.Lobby_SaveMoney_Back="10125",e.Lobby_TakeMoney="10126",e.Lobby_TakeMoney_Back="10127",e.Lobby_NoticeList="10128",e.Lobby_NoticeList_Back="10129",e.Lobby_SingleNotice="10130",e.Lobby_SingleNotice_Back="10131",e.Lobby_DeleteSingleNotice="10132",e.Lobby_DeleteSingleNotice_Back="10133",e.Lobby_MailList="10134",e.Lobby_MailList_Back="10135",e.Lobby_SingleMail="10136",e.Lobby_SingleMail_Back="10137",e.Lobby_DeleteSingleMail="10138",e.Lobby_DeleteSingleMail_Back="10139",e.Lobby_ActivityList="10140",e.Lobby_ActivityList_Back="10141",e.Lobby_SingleActivity="10142",e.Lobby_SingleActivity_Back="10143",e.Lobby_webLogOut="10144",e.Lobby_webLogOut_Back="10145",e.Lobby_roleSetting="10146",e.Lobby_roleSetting_Back="10147",e.Lobby_RechargeRecord="10151",e.Lobby_RechargeRecord_Back="10152",e.Lobby_ResetMoneyPwd="10153",e.Lobby_ResetMoneyPwd_Back="10154",e.Lobby_BindBankCard="10155",e.Lobby_BindBankCard_Back="10156",e.Lobby_BindBankList="10157",e.Lobby_BindBankList_Back="10158",e.Lobby_UnBindBankCard="10178",e.Lobby_UnBindBankCard_Back="10179",e.Lobby_CustomerSendMsg="10180",e.Lobby_CustomerSendMsg_Back="10181",e.Lobby_FastGrabRedEnvelope="10160",e.Lobby_FastGrabRedEnvelope_Back="10161",e.Lobby_ShowRedEnvelope="10162",e.Lobby_ShowRedEnvelope_Back="10163",e.Lobby_LayMine="10164",e.Lobby_LayMine_Back="10165",e.Lobby_NewRedEnvelopeNotify="10166",e.Lobby_GrabRedEnvelope="10167",e.Lobby_GrabRedEnvelope_Back="10168",e.Lobby_RedEnvelopeIncome="10169",e.Lobby_RedEnvelopeIncome_Back="10170",e.Lobby_RecvIncome="10171",e.Lobby_RecvIncome_Back="10172",e.Lobby_SeeDetails="10173",e.Lobby_SeeDetails_Back="10174",e.Lobby_ExpiredRedEnvelopeNotify="10175",e.CsWorldAgentBackgroundReqType="10176",e.ScWorldAgentBackgroundResType="10177",e}();__reflect(CommonProxyConst.prototype,"CommonProxyConst");var ControllerConst;!function(e){e[e.Loading=999900]="Loading",e[e.Login=999901]="Login",e[e.Lobby=999902]="Lobby",e[e.Game=999903]="Game",e[e.Room=999904]="Room",e[e.Desk=999905]="Desk"}(ControllerConst||(ControllerConst={}));var LobbyControllerConst;!function(e){e[e.UserInfo=3e3]="UserInfo",e[e.Recharge=3001]="Recharge",e[e.Bank=3002]="Bank",e[e.Message=3003]="Message",e[e.Activity=3004]="Activity",e[e.Share=3005]="Share",e[e.Setting=3006]="Setting",e[e.Exchange=3007]="Exchange",e[e.redPacket=3008]="redPacket",e[e.ag=3009]="ag",e[e.Customer=3010]="Customer",e[e.HeadImgSetting=3011]="HeadImgSetting"}(LobbyControllerConst||(LobbyControllerConst={}));var LobbyViewConst;!function(e){e[e.UserInfo=2e3]="UserInfo",e[e.Recharge=2001]="Recharge",e[e.Bank=2002]="Bank",e[e.Message=2003]="Message",e[e.Activity=2004]="Activity",e[e.Share=2005]="Share",e[e.Setting=2006]="Setting",e[e.Exchange=2007]="Exchange",e[e.RedPacket=2008]="RedPacket",e[e.Customer=2009]="Customer",e[e.Ag=2010]="Ag",e[e.HeadImgSetting=2011]="HeadImgSetting",e[e.MessagePrompt=2012]="MessagePrompt",e[e.ActivityPrompt=2013]="ActivityPrompt",e[e.ResetMoneyPassword=2014]="ResetMoneyPassword",e[e.ResetLoginPassword=2015]="ResetLoginPassword",e[e.Register=2016]="Register"}(LobbyViewConst||(LobbyViewConst={}));var LoginViewConst;!function(e){e[e.LoginSecondar=3e4]="LoginSecondar",e[e.Register=30001]="Register",e[e.ResetLoginPwd=30002]="ResetLoginPwd"}(LoginViewConst||(LoginViewConst={}));var MainViewConst;!function(e){e[e.Login=1e3]="Login",e[e.Loading=1001]="Loading",e[e.Lobby=1002]="Lobby"}(MainViewConst||(MainViewConst={}));var SceneConsts;!function(e){e[e.Loading=999990]="Loading",e[e.Login=999991]="Login",e[e.Lobby=999992]="Lobby",e[e.Room=999993]="Room",e[e.Game=999994]="Game",e[e.Desk=999995]="Desk"}(SceneConsts||(SceneConsts={}));var GameConsEvent=function(){function e(){}return e.Game_Frame_Pause="Game_Frame_Pause_Event",e.Game_Frame_Resume="Game_Frame_Resume_Event",e.Game_Player_LoginWeb_Success="Game_Player_LoginWeb_Success_Event",e.Game_Player_LoginLobby_Success="Game_Player_LoginLobby_Success_Event",e.Game_Maintain_Const="Game_Maintain_Const_Event",e.Game_Broadcast_Notification="Game_Broadcast_Notification_Event",e.Game_UserMoneyChange="UserMoneyChange",e.Game_UserUnReadEmail="Game_UserUnReadEmail",e.Game_UserUnReadMsg="Game_UserUnReadMsg",e.Game_UserChangeAccount="Game_UserChangeAccount",e.Game_ADListInfo="Game_ADList_Event",e.Game_prCodeAdress="Game_prCodeAdress",e}();__reflect(GameConsEvent.prototype,"GameConsEvent");var GameUpdateEvent=function(){function e(){}return e.Update_Loading_Event="Update_Loading_Event",e.Update_Loading_Progress="Update_Loading_Progress",e.Update_Loading_Visible="Update_Loading_Visible",e.Update_Loading_Bg="Update_Loading_Bg",e.Update_Main_Version="Update_Main_Version",e.Update_Game_Module_Progress="Update_Game_Module_Progress",e.Update_Game_Module_Version="Update_Game_Module_Version",e.Update_Game_Module_Complete="Update_Game_Module_Complete",e.Update_Game_Public_Complete="Update_Game_Public_Complete",e}();__reflect(GameUpdateEvent.prototype,"GameUpdateEvent");var ResgiterConstEvent=function(){function e(){}return e.Resgiter_Get_Captcha="Resgiter_Get_Captcha_Event",e.Register_Account_Req="Register_Account_Req_Event",e.Register_View_Close="Register_View_Close_Event",e.Register_Reset_Password="Register_Reset_Password_Event",e}();__reflect(ResgiterConstEvent.prototype,"ResgiterConstEvent");var LoadingConst=function(){function e(){}return e.SetProgress=10001,e}();__reflect(LoadingConst.prototype,"LoadingConst");var LoadingController=function(e){function t(){var t=e.call(this)||this;return t.loadingView=new LoadingView(t,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Loading,t.loadingView),App.ViewManager.open(MainViewConst.Loading,LayerManager.UI_Main),t.registerFunc(LoadingConst.SetProgress,t.setProgress,t),t}return __extends(t,e),t.prototype.setProgress=function(e,t){this.loadingView.setProgress(e,t)},t.prototype.destroy=function(){e.prototype.destroy.call(this),App.ViewManager.destroy(MainViewConst.Loading),this.loadingView=void 0},t}(BaseController);__reflect(LoadingController.prototype,"LoadingController");var LoadingView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.skinName="resource/lobby/skins/LoadingUISkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.initDBRes("loading2"),this.armature=new DragonBonesArmatureContainer,this.loadingAnim.addChild(this.armature),this.armature.register(App.DragonBonesFactory.makeArmature("Armature","loading2",1),[t.Animation]),this.loadingProgress.maximum=100,this.loadingProgress.minimum=0,this.txtVer.text=""},t.prototype.initDBRes=function(e){var t=RES.getRes(e+"_ske_json"),o=RES.getRes(e+"_tex_png"),i=RES.getRes(e+"_tex_json");t&&o&&i?App.DragonBonesFactory.initArmatureFile(t,o,i):(Log.trace(t+o+i),egret.error("无法获取龙骨资源:",e,"!"))},t.prototype.setProgress=function(e,t){this.loadingProgress.value=Math.floor(e/t*100),this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum,this.loadingAnim.x=this.progressBar.x,this.armature.play("loading2",0),this.loadingProgress.value>=100&&(this.armature.visible=!1)},t.prototype.testLoading=function(){this.loadingProgress.value+=1,this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum},t.prototype.updateVersion=function(){this.txtVer.text=GameBase.getMainVersion()},t.prototype.updateLoadingEvent=function(e){this.txtMsg.text=e},t.prototype.updateLoadingProgress=function(e){this.setProgress(e.progress,e.total)},t.prototype.setLoadingBgVis=function(e){this.loadingBg.visible=e},t.prototype.setLoadingBgUrl=function(e){var t=new ImageURL;t.load(e),t.fillMode=egret.BitmapFillMode.SCALE,t.top=t.bottom=t.left=t.right=0,this.addChildAt(t,0)},t.prototype.addEvent=function(){App.MessageCenter.addListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Progress,this.updateLoadingProgress,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Visible,this.setLoadingBgVis,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Bg,this.setLoadingBgUrl,this)},t.prototype.removeEvent=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Progress,this.updateLoadingProgress,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Visible,this.setLoadingBgVis,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Bg,this.setLoadingBgUrl,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.armature.destroy(),this.parent&&this.parent.removeChild(this),this.armature=void 0},t.Animation="loading2",t}(BaseEuiView);__reflect(LoadingView.prototype,"LoadingView");var LoginController=function(e){function t(t){var o=e.call(this)||this;return o.inits(),o.registers(),o.addListeners(),o.initFunc(),App.ViewManager.open(MainViewConst.Login),t&&t.isVipLogin&&App.ViewManager.open(LoginViewConst.LoginSecondar),o}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.loginModel=new LoginModel(this),this.loginProxy=new LoginProxy(this,this.loginModel)},t.prototype.registers=function(){e.prototype.registers.call(this),this.loginView=new LoginView(this,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Login,this.loginView),this.loginSecondaryView=new LoginSecondaryView(this,LayerManager.UI_Main),App.ViewManager.register(LoginViewConst.LoginSecondar,this.loginSecondaryView),this.registerView=new RegisterView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.Register,this.registerView),this.resetPwdView=new ResetLoginPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.ResetLoginPwd,this.resetPwdView)},t.prototype.initFunc=function(){this.registerFunc("LoginWeb",this.onLoginWeb,this),this.registerFunc("ReSetLP",this.onReSetLP,this)},t.prototype.onLoginWeb=function(e){this.loginProxy.loginWeb(e)},t.prototype.onReSetLP=function(e){this.loginProxy.onResetLoginPassword(e)},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.loginProxy.addEvent()},t.prototype.removeListeners=function(){Log.trace("移除监听"),e.prototype.removeListeners.call(this),this.loginProxy.removeEvent()},Object.defineProperty(t.prototype,"model",{get:function(){return this.loginModel},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.loginModel.destroy(),this.loginProxy.destroy(),this.loginView.destroy(),this.loginSecondaryView.destroy(),this.resetPwdView.destroy(),this.loginModel=void 0,this.loginProxy=void 0,this.loginView=void 0,this.loginSecondaryView=void 0,this.resetPwdView=void 0},t}(BaseController);__reflect(LoginController.prototype,"LoginController");var LoginModel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nickname="",t.money=0,t.safe_money=0,t.sex=0,t.vip=0,t.avatar=0,t.avatar_box=0,t}return __extends(t,e),t}(BaseModel);__reflect(LoginModel.prototype,"LoginModel");var LoginProxy=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.loginWeb=function(e){},t.prototype.onLoginWebBack=function(e){var t=GamePlayerMgr.i.getPlayer();Log.trace("登录Web返回");var o={login_type:1,token:t.getToken(),uid:t.getUserId(),channel:1};this.send(Protos.M.CsAuthLoginReqType,o)},t.prototype.onLoginLobbyBack=function(e){Log.trace("LobbyProxy onLoginWebBack:",e),App.EasyLoading.hideLoading(),App.SceneManager.runScene(SceneConsts.Lobby)},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.onResetLoginPassword=function(e){var t={loginame:e.loginame,password:e.password,captcha:e.captcha};this.send(Protos.M.CsWorldResetLoginpwdReqType,t),App.EasyLoading.showOnTimeOut()},t.prototype.onResetLoginPasswordAck=function(e){PromTipsView.getInstance().show("修改密码成功"),App.EasyLoading.hideLoading()},t.prototype.addEvent=function(){this.addListener(Protos.M.ScWorldResetLoginpwdResType,this.onResetLoginPasswordAck,this)},t.prototype.removeEvent=function(){this.removeMsgEventAll(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseProxy);__reflect(LoginProxy.prototype,"LoginProxy");var LoginSecondaryView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.skinName="resource/lobby/skins/LoginSecondarySkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this);var t=GamePlayerMgr.i.getAccount1(),o=GamePlayerMgr.i.getAccount2(),i=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.accountInput.text=t||"",this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.passwordInput.text=i||"",this.account1.label=t||"",this.account2.label=o||"",this.account1.name=i||"",this.account2.name=n||""},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.addEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this),this.passwordInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.removeEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this),this.passwordInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this)},t.prototype.onChangeInput=function(e){var t=e.currentTarget;return t.text.length>12?void(t.text=t.text.slice(0,12)):void(t.text=App.StringUtils.rejectValue(t.text))},t.prototype.checkInput=function(e){var t=this.passwordInput;t.text.length>12&&(t.text=t.text.slice(0,12))},t.prototype.closeView=function(e){App.ViewManager.closeView(this)},t.prototype.showRegisterView=function(){App.ViewManager.open(LoginViewConst.Register)},t.prototype.showResetLoginPwdView=function(){App.ViewManager.open(LoginViewConst.ResetLoginPwd)},t.prototype.loginLobby=function(){var e=this.accountInput.text,t=this.passwordInput.text;return this.listBg.visible=!1,null==e||0==e.length?void ErrorManager.i.showError("用户名不能为空"):null==t||0==t.length?void ErrorManager.i.showError("密码不能为空"):t.length<6?void ErrorManager.i.showError("密码长度不能小于6个字符"):t.length>12?void ErrorManager.i.showError("密码长度不能大于12个字符"):(GamePlayerMgr.i.setAP(e,t),GamePlayerMgr.i.login(!1),void App.EasyLoading.showLoading())},t.prototype.selectAccount=function(e){Log.trace("点击了listBtn"),this.listBg.visible&&e.currentTarget!=this.listBtn&&(this.accountInput.text=e.currentTarget.label,this.passwordInput.text=e.currentTarget.name);var t=GamePlayerMgr.i.getAccount1(),o=GamePlayerMgr.i.getAccount2(),i=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.account1.label=t,this.account2.label=o,this.account1.name=i,this.account2.name=n,this.listBg.visible=!this.listBg.visible},t.prototype.clearPassword=function(){this.passwordInput.text=""},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseEuiView);__reflect(LoginSecondaryView.prototype,"LoginSecondaryView");var LoginView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._mIpUIList=[],i.skinName="resource/lobby/skins/LoginSkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.txtVer.text=GameBase.getMainVersion(),this.testInit()},t.prototype.testInit=function(){if(this.btn_list.visible=!1,this.server_list.visible=GameBase.IsTest&&t.IsNotChoose,GameBase.IsTest){t.IpList=App.GlobalData.TestIpList?App.GlobalData.TestIpList:[];var e=GameBase.getGlobalData("test_last_ip_name");this.t0.text=e?e:"10.1.101.59",e&&App.Socket.updateUrl(GameBase.GameServerIp),t.IsNotChoose=!1;for(var o=0;o<t.IpList.length;o++){var i=this.creatBtn(o);this._mIpUIList.push(i),this.btn_list.addChild(i)}}},t.prototype.creatBtn=function(e){var o=new eui.Group;o.horizontalCenter=0,o.y=45*e,o.touchChildren=!1;var i=new eui.Rect;i.width=160,i.height=39,i.ellipseWidth=i.ellipseHeight=10,i.horizontalCenter=i.verticalCenter=0,i.fillColor=3902981,o.addChild(i);var n=new eui.Label;n.horizontalCenter=n.verticalCenter=0,n.size=20;var r=t.IpList[e];return n.text=r.split("&&")[1],o.addChild(n),o.name=r.split("&&")[0],o},t.prototype.onTestBtnTap=function(e){var t=e.currentTarget;if(this.btn_list.visible=t==this.btn0,!this.btn_list.visible){var o=t.getChildAt(1).text;this.t0.text=o,Log.log("选择服务器:",t.name),GameBase.saveGameServerIp(t.name),App.Socket.updateUrl(GameBase.GameServerIp),GameBase.saveGlobalData("test_last_ip_name",o)}},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.memberLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var t=0;t<this._mIpUIList.length;t++)this._mIpUIList[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);App.CommonUtils.effectButton(this.customerService,this.customerServiceOnClick,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.memberLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var t=0;t<this._mIpUIList.length;t++)this._mIpUIList[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);App.CommonUtils.removeButton(this.customerService)},t.prototype.customerServiceOnClick=function(){var e=CSModel.getUrlFromLive800();R.openUrlOutside(e)},t.prototype.openSecondary=function(){App.ViewManager.open(LoginViewConst.LoginSecondar)},t.prototype.loginLobby=function(){GamePlayerMgr.i.login(!0),App.EasyLoading.showOnTimeOut()},t.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mIpUIList.length;){var t=this._mIpUIList.pop();R.removeFromParent(t)}},t.IsNotChoose=!0,t.IpList=[],t}(BaseEuiView);__reflect(LoginView.prototype,"LoginView");var BaseParticleObj=function(e){function t(){var t=e.call(this)||this;return t._mIsLoaded=!1,t._mDestroy=!1,t._mChashList={},t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.init=function(e){this.changeParticle(e)},t.prototype.changeParticle=function(e){this._mIsLoaded=!1,this.rest(),this.checkLoad(e)},t.prototype.rest=function(){var e=this._mCurrParticle;e&&(e.stop(!0),R.removeFromParent(e),e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this)),this._mSetPlayDuration=void 0,this._mSetPlayTexture=void 0,this._mCurrParticle=void 0},t.prototype.checkLoad=function(e){var t=RES.getRes(e+"_png"),o=RES.getRes(e+"_json");if(t&&o)this.initParticle(e);else{var i="particle$$"+e;App.ResourceUtils.createGroup(i,[e+"_json",e+"_png"]),App.ResourceUtils.loadGroup(i,this.loaded,this.loadPress,this)}},t.prototype.loaded=function(e){var t=e.split("$$")[1];Log.log("particle_ loaded ",t),this.initParticle(t),this.onLoadComplete(t)},t.prototype.loadPress=function(e,t){Log.log("particle_ loadPress: ",e,t)},t.prototype.initParticle=function(e){this._mIsLoaded=!0;var t=this.getParticleByName(e);t.start(this._mSetPlayDuration?this._mSetPlayDuration:t.m_duration),this._mSetPlayTexture&&t.changeTexture(this._mSetPlayTexture),this.addChild(t),this._mCurrParticle=t,t.hasEventListener(egret.Event.COMPLETE)||t.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},t.prototype.getParticleByName=function(e){var t=this._mChashList[e];if(!t){var o=RES.getRes(e+"_png"),i=RES.getRes(e+"_json");t=new particle.GravityParticleSystem(o,i),t.m_duration=i.duration,this._mChashList[e]=t}return t},t.prototype.onLoadComplete=function(e){Log.log("---------------- 粒子 "+e+" 资源加载完成 可用于子类继承 ----------------")},t.prototype.onComplete=function(){Log.log("---------------- 粒子播放完成 可用于子类继承 ----------------")},t.prototype.play=function(e){this._mCurrParticle?this._mCurrParticle.start(e?e:this._mCurrParticle.m_duration):this._mSetPlayDuration=e},t.prototype.setCurrentParticles=function(e){this._mCurrParticle&&this._mCurrParticle.setCurrentParticles(e)},t.prototype.changeTexture=function(e){this._mCurrParticle?this._mCurrParticle.changeTexture(e):this._mSetPlayTexture=e},t.prototype.stop=function(e){this._mCurrParticle&&this._mCurrParticle.stop(!0)},t.prototype.destroy=function(){if(!this._mDestroy){this._mDestroy=!0,R.removeFromParent(this),this.removeChildren();var e=this._mChashList;for(var t in e){var o=e[t];o.stop(!0),o.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),o.texture=void 0,delete e[t]}this._mChashList=void 0,this._mCurrParticle=void 0}},t}(egret.DisplayObjectContainer);__reflect(BaseParticleObj.prototype,"BaseParticleObj");var GamePlatform=function(){function e(){}return e.APP=0,e.WebDecorate=1,e.Web_Phone=2,e.Web_Insert=3,e.Third_Insert=4,e}();__reflect(GamePlatform.prototype,"GamePlatform");var GameOsTypes=function(){function e(){}return e.Android="Android",e.IOS="IOS",e.Web="Web",e}();__reflect(GameOsTypes.prototype,"GameOsTypes");var App=function(){function e(){}return Object.defineProperty(e,"OS",{get:function(){return e.isWebDecorate?GameOsTypes.Web:e.DeviceUtils.isIOS?GameOsTypes.IOS:GameOsTypes.Android},enumerable:!0,configurable:!0}),Object.defineProperty(e,"platformMoudel",{get:function(){return e.DeviceUtils.IsNative?0:web_platform()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"webResource",{get:function(){return e.platformMoudel==GamePlatform.WebDecorate},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebDecorate",{get:function(){return e.platformMoudel==GamePlatform.WebDecorate||999==e.platformMoudel},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebPhone",{get:function(){return e.platformMoudel==GamePlatform.Web_Phone},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebInsert",{get:function(){return e.platformMoudel==GamePlatform.Web_Insert},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isThirdInsert",{get:function(){return e.platformMoudel==GamePlatform.Third_Insert},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebPools",{get:function(){return e.isWebPhone||e.isWebDecorate},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInLoading",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInLogin",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Login},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInLobby",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Lobby},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInRoom",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Room},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInDesk",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Desk},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isInGame",{get:function(){return e.SceneManager.getCurrScene()==SceneConsts.Game},enumerable:!0,configurable:!0}),e.setOpenLog=function(t){egret.Logger.logLevel=t?egret.Logger.ALL:egret.Logger.OFF,e.DebugUtils.isOpen(t)},Object.defineProperty(e,"IsNative",{get:function(){return e.DeviceUtils.IsNative},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Http",{get:function(){return Http.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Socket",{get:function(){return Socket.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ControllerManager",{get:function(){return ControllerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ViewManager",{get:function(){return ViewManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SceneManager",{get:function(){return SceneManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DebugUtils",{get:function(){return DebugUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MessageCenter",{get:function(){return MessageCenter.getInstance(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EffectUtils",{get:function(){return EffectUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EasyLoading",{get:function(){return EasyLoading.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DragonBonesFactory",{get:function(){return DragonBonesFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MovieClipFactory",{get:function(){return MovieClipFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HitUtils",{get:function(){return HitUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GeometryUtils",{get:function(){return GeometryUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PromTipsView",{get:function(){return PromTipsView.getInstance()
},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PromSuperposeView",{get:function(){return PromSuperposeView.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ScrollTxtTips",{get:function(){return ScrollTxtTips.i},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BitmapUtils",{get:function(){return BitmapUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NetUtils",{get:function(){return NetUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MouseUtils",{get:function(){return MouseUtils.getInstance()},enumerable:!0,configurable:!0}),e.setLandscape=function(){e.StageUtils.setOrientationMode(egret.OrientationMode.LANDSCAPE)},e.setPortrait=function(){e.StageUtils.setOrientationMode(egret.OrientationMode.PORTRAIT)},e.setScaleModeNormal=function(){e.StageUtils.setScaleMode(egret.StageScaleMode.FIXED_HEIGHT)},e.setScaleModeSpecial=function(){e.StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT)},Object.defineProperty(e,"isScaleModeSpecial",{get:function(){return e.StageUtils.getStage().scaleMode==egret.StageScaleMode.EXACT_FIT},enumerable:!0,configurable:!0}),e.getWpH=function(){return window.innerHeight/window.innerWidth},e.fixUISX=function(t){void 0===t&&(t=1);var o=t-(GameBase.GameHeight/GameBase.GameWidth-e.getWpH());return o>1?1:.5>o?.5:o},e.isIphoneX=function(){return IphoneXMatch.isIphoneX()},e.OffsetLeft=function(e){IphoneXMatch.OffsetLeft(e)},e.OffsetBottom=function(e){IphoneXMatch.OffsetBottom(e)},e.Init=function(){e.GlobalData=RES.getRes("global"),e.DebugUtils.isOpen(e.GlobalData.IsDebug),GameBase.IsTest=e.GlobalData.IsTest,e.IsSimulate=e.GlobalData.IsSimulate,e.IsDecrypt=e.GlobalData.IsDecrypt,e.DebugUtils.setThreshold(5);var t=RES.getRes(e.GlobalData.ProtoConfig);e.Socket.initServerUrl(e.GlobalData.SocketServer,new ByteArrayMsgByProtobuf),e.Socket.addProtocolNum(t),GameModuleMgr.i.initGameMoudle(),Log.log("当前引擎版本: ",egret.Capabilities.engineVersion)},e.GlobalData=null,e.IsTest=!1,e.IsSimulate=!1,e.IsOpenToolView=!1,e.IsDecrypt=!1,e.IsAppTest=!0,e}();__reflect(App.prototype,"App");var BroadcastView=function(e){function t(){var t=e.call(this)||this;return t._mIsMove=!1,t._mIsLoaded=!1,t._mEffBone=null,t._mTextParser=new egret.HtmlTextParser,t.visible=!1,t.skinName="BroadcastSkin",t.touchEnabled=t.touchChildren=!1,t}return __extends(t,e),t.prototype.load=function(){var e=RES.getGroupByName("p_Broadcast");this._mIsLoaded=e.length&&RES.isGroupLoaded("p_Broadcast"),this._mIsLoaded||(App.ResourceUtils.createGroup("p_Broadcast",["eff_pmd_2_ske_json","eff_pmd_2_tex_json","eff_pmd_2_tex_png","eff_pmd_3_ske_json","eff_pmd_3_tex_json","eff_pmd_3_tex_png"]),App.ResourceUtils.loadGroup("p_Broadcast",this.loaded,this.loadPress,this))},t.prototype.loaded=function(){this._mIsLoaded=!0,Log.log("p_Broadcast loaded ")},t.prototype.loadPress=function(e,t){Log.log("p_Broadcast loadPress: ",e,t)},t.prototype.init=function(o,i,n){e.prototype.initComponent.call(this,o,i),this._mCurrScene=n,this.load(),t.Mask.width=this.uTxtBg.width,this.uTxtBg.mask=t.Mask,this.continuePlay()},t.prototype.continuePlay=function(){this.delMsg(),t._mCurrMsg?this.playMsg():t._mListMsg.length>0&&this.nextMsg()},t.prototype.delMsg=function(){var e=t._mListMsg,o=[];this._mCurrScene==SceneConsts.Lobby&&o.push(3,4),(this._mCurrScene==SceneConsts.Desk||this._mCurrScene==SceneConsts.Room)&&o.push(2,3,4),this._mCurrScene==SceneConsts.Game&&o.push(1,2,3,4);for(var i=e.length-1;i>=0;i--)for(var n=o.length-1;n>=0&&e[i].mPriority!=o[n];n--)0==n&&e.splice(i,1);var r=t._mCurrMsg;if(r)for(var n=o.length-1;n>=0&&r.mPriority!=o[n];n--)0==n&&(t._mCurrMsg=null)},t.prototype.addMsg=function(e){var t=BroadcastMgr.analysis(e);t&&(this.listMsgPush(t),R.setTimeOutOnly(function(){this.nextMsg()}.bind(this),this,1e3),Log.log("add Broadcast Msg:",t.mId,t.mPriority,t.mPlayTimes,t.mLvEffect))},t.prototype.listMsgPush=function(e){t._mListMsg.push(e),t._mListMsg.sort(function(e,t){return e.mPriority==t.mPriority?e.mCreateTime-t.mCreateTime:t.mPriority-e.mPriority})},t.prototype.restartMsg=function(){var e=t._mCurrMsg;e.mCurrX=t.Mask.width+10,e.mCurrTimes++,this.txt.x=e.mCurrX},t.prototype.nextMsg=function(){if(!this._mIsMove&&this._mIsLoaded){if(t._mListMsg.length<=0)return this.stop(),void(t._mCurrMsg=null);t._mCurrMsg=t._mListMsg.shift();var e=t._mCurrMsg;e.mCurrTimes=0,this.restartMsg(),this.playMsg()}},t.prototype.playMsg=function(){this.txt.textFlow=this.getHtmlTxt();var e=t._mCurrMsg;e.mEndX=-(this.txt.width+20),e.mScrollStartTime=GameBase.getCurrServerTime(),this.playEff(),this.visible=!0,this._mIsMove=!0,App.TimerManager.doFrame(1,999999,this.refreshPos,this)},t.prototype.playEff=function(){var e=t._mCurrMsg.mLvEffect;return this.imageHorn.visible=3!=e,2!=e&&3!=e?void this.removeEff():(this._mEffBone||(this._mEffBone=new BroadcastEff,this._mEffBone.x=this.width/2,this._mEffBone.y=this.height/2,this.addChild(this._mEffBone)),this._mEffBone.updateBone("eff_pmd_"+e),void this._mEffBone.play())},t.prototype.removeEff=function(){this._mEffBone&&this._mEffBone.stop()},t.prototype.getHtmlTxt=function(){return this._mTextParser.parser(t._mCurrMsg.mTxtMsg)},t.prototype.refreshPos=function(e){if(this._mIsMove){var o=t._mCurrMsg,i=GameBase.getCurrServerTime(),n=i-o.mScrollStartTime;o.mScrollStartTime=i,o.mCurrX-=o.mMoveSpeed*n/16,this.txt.x=o.mCurrX,o.mCurrX<o.mEndX&&(o.mCurrTimes>=o.mPlayTimes?(this._mIsMove=!1,t._mCurrMsg=null,App.TimerManager.doTimer(t.DealyTimeMove,1,this.nextMsg,this)):this.restartMsg())}},t.prototype.stop=function(){this.removeEff(),this.visible=!1,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},t.prototype.addEvent=function(){App.MessageCenter.addListener(GameConsEvent.Game_Broadcast_Notification,this.addMsg,this)},t.prototype.removeEvent=function(){App.MessageCenter.removeAll(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEff(),R.removeFromParent(this._mEffBone),App.TimerManager.removeAll(this),this._mEffBone&&this._mEffBone.destroy(),this._mEffBone=void 0},t.testPlay=function(){var e={priority:App.MathUtils.randomInt(1,4),play_times:App.MathUtils.randomInt(2,2),marquee_effect:App.MathUtils.randomInt(1,3),marquee_format_id:App.MathUtils.randomInt(2,2),play_speed:150,parameter:["胡汉三","100000","100倍","哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈说阿尔五大"]};App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,e)},t.Mask=new egret.Rectangle(0,0,577,36),t.DealyTimeMove=1e3,t._mListMsg=[],t}(BaseEuiComponent);__reflect(BroadcastView.prototype,"BroadcastView");var BroadcastEff=function(e){function t(){var t=e.call(this,null)||this;return t.blendMode=egret.BlendMode.ADD,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.updateBone=function(e){this.initDBRes(e),this.armature=this.createArmature("yuanjian",e,t._mActionList)},t.prototype.setPosition=function(e,t){this.x=e,this.y=t},t.prototype.play=function(e){void 0===e&&(e=1),this.visible=!0,this.armature.play(t.Animation,999999,e)},t.prototype.stop=function(){this.visible=!1,this.armature.stop()},t.prototype.clean=function(){e.prototype.clean.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.armature=void 0},t.Animation="play",t._mActionList=[t.Animation],t}(base.BaseGameObject);__reflect(BroadcastEff.prototype,"BroadcastEff");var ImageURL=function(e){function t(){var t=e.call(this)||this;return t._mLoader=null,t._mUrl="",t._mThisObj=null,t._mCallBack=null,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.fillMode=egret.BitmapFillMode.REPEAT,this._mLoader=new egret.ImageLoader,this._mLoader.crossOrigin="anonymous",this._mTexture=new egret.Texture},Object.defineProperty(t.prototype,"url",{get:function(){return this._mUrl},enumerable:!0,configurable:!0}),t.prototype.load=function(e,t,o){this._mUrl=e,this._mThisObj=o,this._mCallBack=t,this.loadImage()},t.prototype.loadImage=function(){this._mLoader.addEventListener(egret.Event.COMPLETE,this.onLoaded,this),this._mLoader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._mLoader.addEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this),this._mLoader.load(this._mUrl),Log.log("ImageURL load:",this._mUrl)},t.prototype.removeEvents=function(){this._mLoader.removeEventListener(egret.Event.COMPLETE,this.onLoaded,this),this._mLoader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this._mLoader.removeEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this)},t.prototype.onLoaded=function(e){this.removeEvents();var t=e.currentTarget;this._mTexture.bitmapData=t.data,this.texture=null,this.texture=this._mTexture,this._mCallBack&&this._mCallBack.call(this._mThisObj,"1"),Log.log("ImageURL loaded:",this._mUrl)},t.prototype.onProgress=function(e){Log.log("ImageURL progress:",Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype.onIOError=function(e){this.removeEvents(),this._mCallBack&&this._mCallBack.call(this._mThisObj,"0"),Log.error("ImageURL Error:",e)},t.prototype.destroy=function(){R.removeFromParent(this),this.removeEvents(),this._mTexture.dispose(),this._mTexture.bitmapData=void 0,this._mLoader=void 0,this._mTexture=void 0,this._mThisObj=void 0,this._mCallBack=void 0,this.texture=void 0},t}(eui.Image);__reflect(ImageURL.prototype,"ImageURL");var MToggleButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="BankButtonSkin",t.unSelectedCText.visible=!1,t.SelectedCText.visible=!1,t}return __extends(t,e),t.prototype.setImageBg=function(e,t){this.inSelected.width=e,this.unSelected.width=e-14,this.inSelected.height=null!=t?t:70,this.unSelected.height=null!=t?t:70},t.prototype.setImage=function(e,t,o,i,n,r){e&&(this.txt_inSelected.source=e),t&&(this.txt_unSelected.source=t),o&&(this.txt_inSelected.width=o,this.txt_unSelected.width=o),i&&(this.txt_inSelected.height=i,this.txt_unSelected.height=i),n&&(this.txt_inSelected.x=n,this.txt_unSelected.x=n),r&&(this.txt_inSelected.y=r,this.txt_unSelected.y=r)},t.prototype.setUnSelected=function(e,t,o){this.unSelected.source=e,this.unSelected.width=t,this.unSelected.height=o},t.prototype.setInSelected=function(e,t,o){this.inSelected.source=e,this.inSelected.width=t,this.inSelected.height=o},t.prototype.setContentText=function(e){this.unSelectedCText.visible=!0,this.SelectedCText.visible=!0,this.unSelectedCText.text=e,this.SelectedCText.text=e},t.prototype.setName=function(e){this.name=e},t}(eui.ToggleButton);__reflect(MToggleButton.prototype,"MToggleButton");var MainEntry=function(){function e(){this._hotGame=null}return e.G=function(){(new e).init()},e.prototype.init=function(){egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this._hotGame=new hot.HotGame,this._hotGame.initScene(),this.initLifecycle(),this.loadResConfig(),GameNative.openInstallEffect("enter_game"),URLCheckMgr.i.checkAllOpenUrl(null,null)},e.prototype.initLifecycle=function(){var t=this;egret.lifecycle.onPause=function(){App.Socket.setPause(!0),App.IsSimulate&&(App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Pause),e.onPause(),egret.ticker.pause(),App.SoundManager.pauseBg())},egret.lifecycle.onResume=function(){App.IsSimulate&&(App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Resume),e.onResume(),egret.ticker.resume(),App.SoundManager.resumeBg()),t._hotGame.onHeart(),App.Socket.setPause(!1)}},e.onPause=function(){this._mTimePauseResume=egret.getTimer()},e.onResume=function(){this._mTimePauseResume=egret.getTimer()-this._mTimePauseResume,this._mTimePauseResume>GameBase.reConnetTime&&App.IsSimulate&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},e.prototype.loadResConfig=function(){App.webResource&&(EXML.prefixURL="static/"),App.ResourceUtils.addConfig("resource.json",App.webResource?"static/resource/":"resource/"),App.ResourceUtils.addConfig("config/base.json",App.webResource?"static/resource/":"resource/"),App.ResourceUtils.loadConfig(this.onConfigComplete,this)},e.prototype.onConfigComplete=function(){var e="resource/theme.json";e=App.webResource?"static/"+e:e;var t=new eui.Theme(e,App.StageUtils.getStage());t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){var e=["base_config","preload_loading"];App.ResourceUtils.loadGroups("Init_Config",e,this.onResourceLoadComplete,this.onResourceLoadProgress,this)},e.prototype.onResourceLoadComplete=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(o){return Log.log("===== MainEntry onResourceLoadComplete ====="),App.Init(),this._hotGame.showLoading(),App.DeviceUtils.IsNative?(GameBase.IsTest=!1,App.IsTest=!1,App.IsSimulate=!0,App.IsOpenToolView=!1,IphoneXMatch.IsTestIphoneX=!1,GameNative.initNativeExternal(),this._hotGame.initBuildData(),R.setTimeOut(function(){GameNative.sendToNative(GameNative.GameReadyComplete,"")},this,100)):(new WebEntry(this._hotGame).entry(),GameBase.getDeviceId()||GameBase.saveDeviceId(m.LocalData.GenerateUUID()),removeLoadingDiv(),this._hotGame.start(),IphoneXMatch.IsTestIphoneX&&(IphoneXMatch.checkIphoneX(),e=new egret.Shape,e.graphics.beginFill(16711680,1),e.graphics.drawRect(0,0,55,350),e.graphics.endFill(),e.y=315-e.height/2+20,LayerManager.UI_Tips.addChild(e),t=new egret.Shape,t.graphics.beginFill(16711680,1),t.graphics.drawRect(0,0,280,5),t.graphics.endFill(),t.x=(GameBase.GameWidth-t.width)/2,t.y=GameBase.GameHeight-16,LayerManager.UI_Tips.addChild(t))),App.IsOpenToolView&&ToolView.i(),App.IsTest&&App.TimerManager.doFrame(60,0,function(){Log.info("hashCount:",ProfileUtils.hashCount())},this),[2]})})},e.prototype.onResourceLoadProgress=function(e,t){},e._mTimePauseResume=0,e}();__reflect(MainEntry.prototype,"MainEntry");var base;!function(e){var t=function(){function e(){this.chipArr_0_0=[],this.chipArr_0_2=[],this.chipArr_0_5=[],this.chipArr_0_8=[],this.chipArr_0_4=[],this.chipArr_0_10=[],this.chipArr_1_0=[],this.chipArr_1_2=[],this.chipArr_1_5=[],this.chipArr_1_8=[],this.chipArr_1_4=[],this.chipArr_1_10=[],this.chipArr_2_0=[],this.chipArr_2_2=[],this.chipArr_2_5=[],this.chipArr_2_8=[],this.chipArr_2_4=[],this.chipArr_2_10=[],this.chipArr_3_0=[],this.chipArr_3_2=[],this.chipArr_3_5=[],this.chipArr_3_8=[],this.chipArr_3_4=[],this.chipArr_3_10=[],this.chipArr_4_0=[],this.chipArr_4_2=[],this.chipArr_4_5=[],this.chipArr_4_8=[],this.chipArr_4_4=[],this.chipArr_4_10=[],this.chipArr_5_0=[],this.chipArr_5_2=[],this.chipArr_5_5=[],this.chipArr_5_8=[],this.chipArr_5_4=[],this.chipArr_5_10=[]}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.flyToPlace=function(e,t,o,i,n,r){var s=Math.floor(App.CommonUtils.money(o));if(s){for(var a=String(s),p=this.createChip(a),c=Number(a[0]),h=0;c>h;h++){var l=common.chipBtn.create();this["chipArr_"+e+"_"+p].push(l);var u=i[e],d=n.globalToLocal(u.x,u.y);n.addChild(l),r?(l.init(p,"t_"),l.scaleX=1,l.scaleY=1):(l.init(p),l.scaleX=.5,l.scaleY=.5),l.x=d.x,l.y=d.y,l.alpha=0;var m=t;l.setFlyChipX(m.x),l.setFlyChipY(m.y),this.removeChips(e)}this.moveToPlace(this["chipArr_"+e+"_"+p])}},e.prototype.createChip=function(e){var t,o=[0,2,5,8,4,10];return t=o[e.length-1]},e.prototype.moveToPlace=function(e){if(e&&e.length){var t=e.pop();t.alpha=1,t.moveToPlace(),R.setTimeOnce(function(){this.moveToPlace(e)},this,50)}},e.prototype.removeChips=function(e){for(var t=[0,2,5,8,4,10],o=0;o<t.length;o++)this.removeChip(this["chipArr_"+e+"_"+t[o]])},e.prototype.removeChip=function(e){if(e&&e.length){if(!(e.length>7))return;var t=e.shift();common.chipBtn.release(t),this.removeChip(e)}},e.prototype.clean=function(){for(var e=[0,2,5,8,4,10],t=0;t<e.length;t++)for(var o=0;6>o;o++)if(this["chipArr_"+o+"_"+e[t]]&&this["chipArr_"+o+"_"+e[t]].length)for(;this["chipArr_"+o+"_"+e[t]].length;){var i=this["chipArr_"+o+"_"+e[t]].pop();common.chipBtn.release(i)}R.removeAllTimeOut(this)},e._i=null,e}();e.GameCoinMgr=t,__reflect(t.prototype,"base.GameCoinMgr")}(base||(base={}));var base;!function(e){var t=function(){function e(){}return e.Goto_Leave_Game="Goto_Leave_the_Game",e.Goto_Leave_Desk="Goto_Leave_the_Desk",e}();e.BaseConst=t,__reflect(t.prototype,"base.BaseConst")}(base||(base={}));var base;!function(e){var t=function(){function e(){}return e.CsWorldLeaveSceneReqType=10104,e.ScWorldLeaveSceneResType=10105,e.CsWorldLeaveTableReqType=10148,e.ScWorldLeaveTableResType=10149,e}();e.ProxyKeyConst=t,__reflect(t.prototype,"base.ProxyKeyConst")}(base||(base={}));var base;!function(e){var t;!function(e){e[e.Base=1e3]="Base"}(t=e.ViewConst||(e.ViewConst={}))}(base||(base={}));var base;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.prototype.registers=function(){t.prototype.registers.call(this),this.registerFunc(e.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},o.prototype.addListeners=function(){t.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},o.prototype.onUserMoneyChange=function(e){Log.log("------------------------ 充值成功返回: "+e+" 子类继承此方法 -------------------------")},o.prototype.onErrorCallBack=function(e){Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},o.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},o.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},o.prototype.removeListeners=function(){t.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},o.prototype.onExitGame=function(){Log.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},o.prototype.onGameConstEvent=function(e){e==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},o.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},o.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},o.prototype.enterGameByDeskId=function(e,t){var o={deskId:e};if(t)for(var i in t)o[i]=t[i];this.enterGameByFromDesk(o)},o.prototype.enterGameByFromDesk=function(e){GameModuleMgr.i.enterGameFromDesk(e)},Object.defineProperty(o.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),o.prototype.setCurrDeskId=function(e){GameModuleMgr.i.setCurrDeskId(e)},Object.defineProperty(o.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),o.prototype.setCurrDeskType=function(e){GameModuleMgr.i.setCurrDeskType(e)},o.prototype.registerRecharge=function(){App.ControllerManager.register(LobbyControllerConst.Recharge,new RechargeController)},o.prototype.registerRedpacket=function(){App.ControllerManager.register(LobbyControllerConst.redPacket,new RedPacketController)},o.prototype.destroy=function(){t.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(LobbyControllerConst.Recharge),App.ControllerManager.unregister(LobbyControllerConst.redPacket))},o}(BaseController);e.DeskController=t,__reflect(t.prototype,"base.DeskController")}(base||(base={}));var base;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.prototype.onCreate=function(){t.prototype.onCreate.call(this)},o.prototype.onInit=function(){t.prototype.onInit.call(this)},o.prototype.inits=function(){t.prototype.inits.call(this)},o.prototype.onReconstruction=function(){t.prototype.onReconstruction.call(this)},o.prototype.registers=function(){t.prototype.registers.call(this),this.registerFunc(e.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(e.BaseConst.Goto_Leave_Desk,this.onLeaveDesk,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},o.prototype.addListeners=function(){t.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},o.prototype.onUserMoneyChange=function(e){Log.log("------------------------ 充值成功返回: "+e+" 子类继承此方法 -------------------------")},o.prototype.onErrorCallBack=function(e){hot.HotGame.showErrorMsg(e),Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},o.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},o.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},o.prototype.removeListeners=function(){t.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},o.prototype.onGameConstEvent=function(e){e==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},o.prototype.onExitGame=function(){Log.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},o.prototype.onLeaveDesk=function(){Log.log("------------------------ 离开桌子 子类继承此方法 -------------------------")},o.prototype.goBack2Lobby=function(){App.SceneManager.runScene(SceneConsts.Lobby),GameModuleMgr.i.exitRoom()},o.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},o.prototype.goBack2Desk=function(){GameModuleMgr.i.backDeskScene()},o.prototype.getModel=function(){return t.prototype.getModel.call(this)},Object.defineProperty(o.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),o.prototype.setCurrDeskId=function(e){GameModuleMgr.i.setCurrDeskId(e)},Object.defineProperty(o.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),o.prototype.setCurrDeskType=function(e){GameModuleMgr.i.setCurrDeskType(e)},o.prototype.openRechargeView=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.registerRecharge=function(){App.ControllerManager.register(LobbyControllerConst.Recharge,new RechargeController)},o.prototype.registerRedpacket=function(){App.ControllerManager.register(LobbyControllerConst.redPacket,new RedPacketController)},o.prototype.destroy=function(){t.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(LobbyControllerConst.Recharge),App.ControllerManager.unregister(LobbyControllerConst.redPacket))},o}(BaseController);e.GameController=t,__reflect(t.prototype,"base.GameController")}(base||(base={}));var base;!function(e){var t=function(){function e(e){this._controller=e}return e.prototype.onCreate=function(){},e.prototype.onInit=function(){},e.prototype.inits=function(){},e.prototype.onReconstruction=function(){},e.prototype.registers=function(){},e.prototype.addListeners=function(){},e.prototype.removeListeners=function(){},e.prototype.getController=function(){return this._controller},Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),e.prototype.setCurrDeskId=function(e){GameModuleMgr.i.setCurrDeskId(e)},e.prototype.destroy=function(){this._controller=void 0},e.prototype.registerFunc=function(e,t,o){this._controller.registerFunc(e,t,o)},e.prototype.applyFunc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return this._controller.applyFunc.apply(this._controller,arguments)},e.prototype.applyControllerFunc=function(e,t){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return this._controller.applyControllerFunc.apply(this._controller,arguments)},e}();e.GameSeparateCtrl=t,__reflect(t.prototype,"base.GameSeparateCtrl")}(base||(base={}));var base;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},t.prototype.enterGameBySceneType=function(e,t){var o={sceneType:e};if(t)for(var i in t)o[i]=t[i];this.goEnterGame(o)},t.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},t.prototype.onUserMoneyChange=function(e){Log.log("------------------------ 充值成功返回: "+e+" 子类继承此方法 -------------------------")},t.prototype.onErrorCallBack=function(e){Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},t.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},t.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},t.prototype.goEnterGame=function(e){GameModuleMgr.i.enterGameFromRoom(e)},Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),t.prototype.registerRecharge=function(){App.ControllerManager.register(LobbyControllerConst.Recharge,new RechargeController)},t.prototype.registerRedpacket=function(){App.ControllerManager.register(LobbyControllerConst.redPacket,new RedPacketController)},t.prototype.destroy=function(){e.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(LobbyControllerConst.Recharge),App.ControllerManager.unregister(LobbyControllerConst.redPacket))},t}(BaseController);e.RoomController=t,__reflect(t.prototype,"base.RoomController")}(base||(base={}));var base;!function(e){function t(e){return e||(e=ControllerConst.Game),App.ControllerManager.getController(e)}e.getController=t}(base||(base={}));var base;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),t}(BaseModel);e.DeskModel=t,__reflect(t.prototype,"base.DeskModel")}(base||(base={}));var base;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),t}(BaseModel);e.GameModel=t,__reflect(t.prototype,"base.GameModel")}(base||(base={}));var base;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),t}(BaseModel);e.RoomModel=t,__reflect(t.prototype,"base.RoomModel")}(base||(base={}));var base;!function(e){var t=function(t){function o(e,o){return t.call(this,e,o)||this}return __extends(o,t),o.prototype.onLeaveGame=function(t){var o=this.player;o.getUserId()==t.uid&&o.setMoney(t.balance),this.applyFunc(e.BaseConst.Goto_Leave_Game,t),App.EasyLoading.hideLoading()},o.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.addListener(e.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},o.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.removeListener(e.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},o.prototype.sendLeaveGame=function(){this.send(e.ProxyKeyConst.CsWorldLeaveSceneReqType,{}),App.EasyLoading.showOnTimeOut()},o.prototype.destroy=function(){t.prototype.destroy.call(this),App.EasyLoading.hideLoading()},Object.defineProperty(o.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),o}(BaseProxy);e.DeskProxy=t,__reflect(t.prototype,"base.DeskProxy")}(base||(base={}));var base;!function(e){var t=function(t){function o(e,o){return t.call(this,e,o)||this}return __extends(o,t),o.prototype.onLeaveGame=function(t){App.EasyLoading.hideLoading();var o=this.player;o.getUserId()==t.uid&&o.setMoney(t.balance),this.applyFunc(e.BaseConst.Goto_Leave_Game,t)},o.prototype.onLeaveDesk=function(){GameModuleMgr.i.backDeskSceneCreate(),this.removeErrDeskLis(),App.EasyLoading.hideLoading(),this.applyFunc(e.BaseConst.Goto_Leave_Desk)},o.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.addListener(e.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.addListener(e.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this)},o.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.removeListener(e.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.removeListener(e.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this),this.removeErrDeskLis()},o.prototype.sendLeaveGame=function(){App.EasyLoading.showOnTimeOut(),this.send(e.ProxyKeyConst.CsWorldLeaveSceneReqType,{})},o.prototype.sendLeaveDesk=function(t){App.EasyLoading.showOnTimeOut(15e3,"",this.onErrorLeaveDesk,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLeaveDesk,this),this.send(e.ProxyKeyConst.CsWorldLeaveTableReqType,{table_id:t})},o.prototype.onErrorLeaveDesk=function(e){this.removeErrDeskLis(),App.ControllerManager.isExists(ControllerConst.Desk)&&App.ControllerManager.unregister(ControllerConst.Desk)},o.prototype.removeErrDeskLis=function(){App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLeaveDesk,this)},o.prototype.send=function(e,o){var i=GameModuleMgr.i.mIsGameLineOut;return i?void Log.warn("游戏正在重连中..."):void t.prototype.send.call(this,e,o)},o.prototype.destroy=function(){t.prototype.destroy.call(this)},Object.defineProperty(o.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),o}(BaseProxy);e.GameProxy=t,__reflect(t.prototype,"base.GameProxy")}(base||(base={}));var base;!function(e){var t=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.addEvent=function(){e.prototype.addEvent.call(this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),t}(BaseProxy);e.RoomProxy=t,__reflect(t.prototype,"base.RoomProxy")}(base||(base={}));var base;!function(e){var t=function(e){function t(t){return e.call(this,t)||this
}return __extends(t,e),t}(BaseEuiComponent);e.ComponentView=t,__reflect(t.prototype,"base.ComponentView")}(base||(base={}));var base;!function(e){var t=function(e){function t(t,o,i,n){var r=e.call(this,t,o)||this;return r.skinName="resource/games/"+i+"/skins/"+n+".exml",r}return __extends(t,e),t.prototype.initBroadcast=function(e,t,o){void 0===t&&(t=100),void 0===o&&(o=0),this._mBroadcastView||(this._mBroadcastView=new BroadcastView,this._mBroadcastView.horizontalCenter=o,this._mBroadcastView.top=t,this._mBroadcastView.init(this.getBaseController(),e,SceneConsts.Desk))},Object.defineProperty(t.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},t.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},t.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeBroadcast())},t}(BaseEuiView);e.DeskView=t,__reflect(t.prototype,"base.DeskView")}(base||(base={}));var base;!function(e){var t=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t}(BaseSpriteView);e.GameSprite=t,__reflect(t.prototype,"base.GameSprite")}(base||(base={}));var base;!function(e){var t=function(e){function t(t,o,i,n){var r=e.call(this,t,o)||this;return i&&n&&(r.skinName="resource/games/"+i+"/skins/"+n+".exml"),r}return __extends(t,e),t.prototype.initBroadcast=function(e,t,o){void 0===t&&(t=120),void 0===o&&(o=0),this._mBroadcastView||(this._mBroadcastView=new BroadcastView,this._mBroadcastView.horizontalCenter=o,this._mBroadcastView.top=t,this._mBroadcastView.init(this.getBaseController(),e,SceneConsts.Game))},Object.defineProperty(t.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},t.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},t.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeBroadcast())},t}(BaseEuiView);e.GameView=t,__reflect(t.prototype,"base.GameView")}(base||(base={}));var base;!function(e){var t=function(e){function t(t,o,i,n){var r=e.call(this,t,o)||this;return r.skinName="resource/games/"+i+"/skins/"+n+".exml",r}return __extends(t,e),t.prototype.initBroadcast=function(e,t,o){void 0===t&&(t=120),void 0===o&&(o=0),this._mBroadcastView||(this._mBroadcastView=new BroadcastView,this._mBroadcastView.horizontalCenter=o,this._mBroadcastView.top=t,this._mBroadcastView.init(this.getBaseController(),e,SceneConsts.Room))},Object.defineProperty(t.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},t.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},t.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeBroadcast())},t}(BaseEuiView);e.RoomView=t,__reflect(t.prototype,"base.RoomView")}(base||(base={}));var common;!function(e){var t=function(e){function t(){var t=e.call(this,null)||this;return t._mIsInPool=!1,t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.create=function(){var e=ObjectPool.pop("common.comBones");return e._mIsInPool=!1,e},t.realese=function(e){e._mIsInPool||(e._mIsInPool=!0,e.clean(),ObjectPool.push(e))},t.cleanFormPool=function(){ObjectPool.clearClass("common.comBones","destroy")},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.updateId=function(e,o){this.initDBRes(e);var i=o?o:t._mActionList;this.armature=this.createArmature("Armature",e,i),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},t.prototype.addPlayEndCallBack=function(e,t){this._mPlayEndCallBacK=e,this._mPlayEndThisObj=t},t.prototype.stopGame=function(){this.armature&&this.armature.stop()},t.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},t.prototype.setPosition=function(e,t){this.x=e,this.y=t},t.prototype.play=function(e,o,i){var n=i?i:t.Animation;this.armature.play(n,e,o)},t.prototype.clean=function(){e.prototype.clean.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},t.Animation="play",t._mActionList=[t.Animation],t}(base.BaseGameObject);e.comBones=t,__reflect(t.prototype,"common.comBones")}(common||(common={}));var common;!function(e){var t=function(e){function t(){var t=e.call(this,null)||this;return t._mIsInPool=!1,t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.create=function(){var e=ObjectPool.pop("brnn.Shuffle");return e._mIsInPool=!1,e},t.realese=function(e){e._mIsInPool||(e._mIsInPool=!0,e.clean(),ObjectPool.push(e))},t.cleanFormPool=function(){ObjectPool.clearClass("brnn.Shuffle","destroy")},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.updateId=function(e,o,i,n,r,s,a,p,c,h){void 0===a&&(a=0),void 0===p&&(p=0),void 0===c&&(c=0),void 0===h&&(h=1),this.initDBRes(e),this.armature=this.createArmature("play",e,t._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this),this.initOperation(o,i,n,r,s,a,p,c,h)},t.prototype.addPlayEndCallBack=function(e,t){this._mPlayEndCallBacK=e,this._mPlayEndThisObj=t},t.prototype.initOperation=function(e,t,o,i,n,r,s,a,p){this.anchorOffsetX=this.width/2,this.anchorOffsetX=this.height/2,this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this.x=e,this.y=t,this.bsScaleX=s,this.bsScaleY=a,this.rotaNum=r,this.play(p,n),this.setshuffleCoord(o,i)},t.prototype.stopshuffle=function(){this.stopGame(),this.removeArmaturePlayEnd(),egret.Tween.removeTweens(this),this.alpha=0},t.prototype.setshuffleCoord=function(e,t){this.flyX=e,this.flyY=t},t.prototype.stopGame=function(){this.armature&&this.armature.stop()},t.prototype.removeArmaturePlayEnd=function(){this.armature&&this.armature.removeCompleteCallFunc(this.armaturePlayEnd,this)},t.prototype.armaturePlayEnd=function(){var e=this;egret.Tween.get(this).to({y:e.flyY,x:e.flyX,scaleX:e.bsScaleX,scaleY:e.bsScaleY,rotation:e.rotaNum},400,egret.Ease.sineInOut).call(function(){e._mPlayEndCallBacK&&e._mPlayEndCallBacK.call(e._mPlayEndThisObj)},this)},t.prototype.setPosition=function(e,t){this.x=e,this.y=t},t.prototype.play=function(e,o){this.armature.play(t.Animation,e),App.SoundManager.playEffect(o)},t.prototype.clean=function(){e.prototype.clean.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.clean(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},t.Animation="clean",t._mActionList=[t.Animation],t}(base.BaseGameObject);e.Shuffle=t,__reflect(t.prototype,"common.Shuffle")}(common||(common={}));var common;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return o._mIndex=0,o._mIsInPool=!1,o.touchEnabled=!1,o.touchChildren=!1,o._mRender=e.comBones.create(),o._mRender.updateId("star_1"),o._mStarList=[],o}return __extends(o,t),o.create=function(){if(!(o.StarList.length>9)){var e=ObjectPool.pop("common.StarExpand");return e._mIsInPool=!1,o.StarList.push(e),e}},o.realese=function(e){e._mIsInPool||(e._mIsInPool=!0,e.clear(),o.c(),ObjectPool.push(e))},o.c=function(e){void 0===e&&(e=!1);for(var t=o.StarList,i=t.length,n=i-1;n>=0;n--){var r=t[n];e?(t.splice(n,1),r.destroy()):r._mIsInPool&&t.splice(n,1)}},o.cleanFormPool=function(){e.comBones.cleanFormPool(),o.c(!0),ObjectPool.clearClass("common.StarExpand","destroy")},o.prototype.init=function(e){this._mParent=e,this._mParent&&!this.parent&&(this._mParent.addChild(this),this.addChild(this._mRender))},o.prototype.run=function(e,t,i,n,r,s,a){this.play(),this.runParabola(e,t,i,n,function(){o.realese(this),r&&r.call(s,a)}.bind(this),this)},o.prototype.play=function(){this._mRender.play(999),this._mIndex=0,App.TimerManager.doTimer(80,999,this.callBackFind,this)},o.prototype.callBackFind=function(){var t=this._mStarList,o=t[this._mIndex++];o||(o=e.comBones.create(),o.blendMode=egret.BlendMode.ADD,o.updateId("star_0"),this._mStarList.push(o)),o.parent||this._mParent.addChild(o),o.setPosition(this.x,this.y),o.play(1,2),o.addPlayEndCallBack(function(e){R.removeFromParent(o)}.bind(this,o),this)},o.prototype.clear=function(){App.TimerManager.removeAll(this),this._mRender&&this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren(),this._mIndex=0},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear(),this._mRender&&this._mRender.destroy();for(var e=this._mStarList;e.length;){var o=e.pop();o&&o.destroy()}this._mRender=void 0,this._mParent=void 0,this._mStarList=void 0},o.StarList=[],o}(ActionExpand);e.StarExpand=t,__reflect(t.prototype,"common.StarExpand")}(common||(common={}));var common;!function(e){var t=function(){function t(){}return t.prototype.init=function(){this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this._mchipColor=0,this._mchipValue=0,this.mIsX=0,this.mIsY=0},t.prototype.setChipId=function(e){this._mChipId=e},t.prototype.getChipId=function(){return this._mChipId},t.prototype.setplaceId=function(e){this._placeId=e},t.prototype.getplaceId=function(){return this._placeId},t.prototype.getTexture=function(){return e.ChipTextures.getPokerTexture(this._mchipValue)},t.prototype.getText=function(){return this.chiplist[this._mchipValue]},t.prototype.setColor=function(e){this._mchipColor=e},t.prototype.setFlyX=function(e){this.mIsX=e},t.prototype.setFlyY=function(e){this.mIsY=e},t.prototype.getFlyX=function(){return this.mIsX},t.prototype.getFlyY=function(){return this.mIsY},t.prototype.setFlyChipX=function(e){this._flyX=e},t.prototype.setFlyChipY=function(e){this._flyY=e},t.prototype.getFlyChipX=function(){return this._flyX},t.prototype.getFlyChipY=function(){return this._flyY},t.prototype.chipAura=function(e){this._mchipAura=e},t.prototype.setValue=function(e){this._mchipValue=e},t.prototype.getColor=function(){return this._mchipColor},t.prototype.getchipAura=function(){return this._mchipAura},t.prototype.getValue=function(){return this._mchipValue},t.prototype.destroy=function(){},t}();e.ChipData=t,__reflect(t.prototype,"common.ChipData")}(common||(common={}));var common;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._mInit=!1,t.onCreate(),t}return __extends(t,e),t.prototype.onCreate=function(){this._mInit=!0,this._mchipAura=new eui.Image,this.addChild(this._mchipAura),this._mIcon=new eui.Image,this.addChild(this._mIcon),this.BtnText=new eui.Label,this.addChild(this.BtnText),this._mMask=new eui.Image,this.addChild(this._mMask)},t.prototype.refreshIcon=function(e){this._mIcon.texture=e.getTexture(),this.BtnText.text=e.getText()?e.getText():""},t.prototype.addEvent=function(){},t.prototype.addMask=function(){this._mMask.texture=RES.getRes("bjl_common_json.common_ui_zhezhao"),this._mMask.alpha=0,this._mMask.touchEnabled=!1},t.prototype.addAura=function(){this._mchipAura.texture=RES.getRes("bjl_common_json.common_ui_g1"),this._mchipAura.alpha=0,this._mchipAura.touchEnabled=!1},t.prototype.setopennes=function(e){this._mIcon.alpha=e},t.prototype.setTextField=function(){this.BtnText.horizontalCenter=-3,this.BtnText.verticalCenter=-5,this.BtnText.width=80,this.BtnText.fontFamily="Microsoft YaHei",this.BtnText.size=22,this.BtnText.textColor=16777215,this.BtnText.textAlign=egret.HorizontalAlign.CENTER,this.BtnText.touchEnabled=!1},t.prototype.showMask=function(){this._mMask.visible=!0},t.prototype.hideMask=function(){this._mMask.visible=!1},t.prototype.touchIcon=function(){this._mIcon.touchEnabled=!0},t.prototype.Iconclose=function(){this._mIcon.touchEnabled=!1},t.prototype.clean=function(){this._mIcon.texture=void 0},t.prototype.setScore=function(){this.BtnText.text=""},t.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean(),this.removeChild(this._mIcon))},t}(eui.Component);e.ChipIcon=t,__reflect(t.prototype,"common.ChipIcon")}(common||(common={}));var hot;!function(e){var t=function(){function e(){this._isPreloaded=!1,this._isUpdateComplete=!1,this._mCostTime=0,App.setOpenLog(!0),App.setScaleModeNormal(),App.StageUtils.setFrameRate(30),App.StageUtils.setMaxTouches(1),App.StageUtils.getStage().setContentSize(GameBase.GameWidth,GameBase.GameHeight),App.setLandscape(),this._mSocketEvent=new o,this._mHotUpdateEvent=new i,this.addEvent(),this._mSocketEvent.addEvent(),this._mHotUpdateEvent.addEvent(),e._mInstance=this}return Object.defineProperty(e,"i",{get:function(){return e._mInstance},enumerable:!0,configurable:!0}),e.prototype.initBuildData=function(){app.BuildData.isBuildTime()&&(this._mAppBuildData=new app.BuildData)},e.prototype.initScene=function(){App.SceneManager.register(SceneConsts.Loading,new LoadingScene),App.SceneManager.register(SceneConsts.Login,new LoginScene),App.SceneManager.register(SceneConsts.Lobby,new LobbyScene),App.SceneManager.register(SceneConsts.Room,new RoomScene),App.SceneManager.register(SceneConsts.Desk,new DeskScene),App.SceneManager.register(SceneConsts.Game,new GameScene),App.StageUtils.getStage().addChild(LayerManager.Game_Bg),App.StageUtils.getStage().addChild(LayerManager.Game_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Popup),App.StageUtils.getStage().addChild(LayerManager.UI_Message),App.StageUtils.getStage().addChild(LayerManager.UI_Tips)},e.prototype.showLoading=function(){GameNative.openInstallEffect("enter_loading"),App.SceneManager.runScene(SceneConsts.Loading)},e.prototype.start=function(){Log.log("当前资源版本：",GameBase.getMainVersion()),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"开始玩命加载资源");var e=["preload","sounds"];App.ResourceUtils.loadGroups("Game_Preload",e,this.onResourceLoadComplete,this.onResourceLoadProgress,this),App.TimerManager.doFrame(1,0,this.updateFrame,this),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version)},e.prototype.onResourceLoadComplete=function(){this._isPreloaded=!0,this._isUpdateComplete=!0,this.checkGamePublic()},e.prototype.checkGamePublic=function(){App.DeviceUtils.IsNative&&HotUpdateMgr.getInstance().checkGameUpdate("public")?HotUpdateMgr.getInstance().loadGameUpdate("public"):this._mHotUpdateEvent.onUpPublicComplete()},e.prototype.addEvent=function(){App.MessageCenter.addListener(GameNative.GameConstInit,this.onGameConstInit,this),App.MessageCenter.addListener(GameNative.GameAndroidBackKey,this.onGameAndroidBackKey,this),App.MessageCenter.addListener(GameNative.GameWebViewHide,this.onGameWebViewHide,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10101),this.onPMDBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorMsgTipsShow,this),App.MessageCenter.addListener("hotUpdateComplete",this.hotUpdateComplete,this)},e.prototype.onGameAndroidBackKey=function(e){Log.log("Click BackKey CallBack ")},e.prototype.onGameConstInit=function(e){Log.log("onGameConstInit:",e);var t=e.split("&&");GameBase.initCurrAppVersion(t[0]),GameBase.initCurrAppMerchant(t[1]),App.IsAppTest="0"==t[2],App.IsDecrypt=!App.IsAppTest,App.setOpenLog(App.IsAppTest),GameBase.AppBuildVersion=t[3],AppMobileInfo.init(),IphoneXMatch.checkIphoneX(),GameBase.getDeviceId()||(App.MessageCenter.addListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this),GameNative.sendToNative(GameNative.GameDeviceIdInit,"")),this.updateUrlFirst(),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"开始验证资源版本，请稍等..."),this._mHotUpdateEvent.checkNetWorkOpen()},e.prototype.updateUrlFirst=function(){GameBase.AssetsServerIp||GameBase.saveResoureServerIp(App.GlobalData.ResoureServerUrl),GameBase.GameServerIp||GameBase.saveGameServerIp(App.GlobalData.SocketServer),App.Socket.updateUrl(GameBase.GameServerIp)},e.prototype.onGameDeviceIdInit=function(e){App.MessageCenter.removeListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this);var t=(new md5).hex_md5(e);GameBase.saveDeviceId(t)},e.prototype.hotUpdateComplete=function(){Log.log("热更新完成2"),GameNative.openInstallEffect("enter_hot_finish"),this._isUpdateComplete=!0,this.start()},e.prototype.onHeart=function(){this._mSocketEvent.onHeart()},e.prototype.onPMDBack=function(e){App.isWebDecorate?(web_broadcast(BroadcastMgr.analysis(e)),(App.isInDesk||App.isInRoom||App.isInGame)&&App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,e)):App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,e)},e.prototype.updateFrame=function(){this._isPreloaded&&this._isUpdateComplete&&(!App.IsDecrypt||UrlPoolMgr.i.isInitUrlsed)&&(App.TimerManager.remove(this.updateFrame,this),this.enterLobby())},e.prototype.checkFirstTime=function(e){App.DeviceUtils.IsNative&&app.BuildData.isBuildTime()?this._mAppBuildData.requsetBuildData(function(){function t(e){return!e||!e.agent_id}var o=this._mAppBuildData.getAppBuildData(),i=this._mAppBuildData.getAppOpenData(),n=this._mAppBuildData.getAppClipboardData(),r=this._mAppBuildData.getOpeninstallInited();Log.info("First time param ","bData:",o,"oData:",i,"clipData:",n);var s=StatisticsAction.i;if(s.mBuildData="",s.addBuildData("I"+r),!o&&!i&&!n)return void(parseInt(r)>0&&(GamePlayerMgr.i.loginByHistory(),e&&e()));var a=o.split("#OA&");o=a.length>1?a[1]:o;var p=App.CommonUtils.isJSON(o)?JSON.parse(o):"";s.addBuildData("Q"+(a[0]?a[0]:"")),s.addBuildData("B"+(p?p.agent_id:"")),a=i.split("#OA&"),i=a.length>1?a[1]:i;var c=App.CommonUtils.isJSON(i)?JSON.parse(i):"";s.addBuildData("O"+(c?c.agent_id:"")),t(p)&&(p=c);var h=App.CommonUtils.isJSON(n)?JSON.parse(n):"";if(s.addBuildData("C"+(h?h.agent_id:"")),t(p)&&(p=h),t(p))return void(parseInt(r)>0&&(GamePlayerMgr.i.loginByHistory(),e&&e()));var l=GamePlayerMgr.i;l.saveAgentId(p.agent_id,!1),GamePlayerMgr.i.loginByHistory(),GameNative.openInstallEffect("first_param"),Log.log("First time login:");for(var u in p)Log.log(u,":",p[u]);e&&e(),R.setClipboardInfo(JSON.stringify(p))}.bind(this),this):(GamePlayerMgr.i.loginByHistory(),e&&e())},e.prototype.enterLobby=function(){GameBase.IsTest?App.SceneManager.runScene(SceneConsts.Login,{isWebClear:!0}):App.IsNative?(App.EasyLoading.showLoading(),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在登录游戏..."),App.TimerManager.doTimer(1e3,30,this.checkFirstTime2,this,this.checkFirstTimeEnd,this),this.checkFirstTime2()):App.isWebDecorate?web_gameInited():App.isWebInsert||App.isThirdInsert?(App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在登录游戏..."),WebInsertMgr.i.getInfo()):GamePlayerMgr.i.loginByHistory()},e.prototype.checkFirstTime2=function(){var e=this;10==++this._mCostTime&&App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"首次登录，玩命加载中...请稍等(不消耗流量)"),this.checkFirstTime(function(){Log.info("代理参数获取成功！"),App.TimerManager.remove(e.checkFirstTime2,e)})},e.prototype.checkFirstTimeEnd=function(){Log.info("代理参数获取失败！"),GamePlayerMgr.i.loginByHistory()},e.prototype.onResourceLoadProgress=function(e,t){App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命加载资源..."),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Progress,{progress:e,total:t})},e.prototype.onGameWebViewHide=function(e){Log.log("WebView回到游戏!"),App.setLandscape(),App.EasyLoading.hideLoading()},e.prototype.onErrorMsgTipsShow=function(e){App.isInGame||this.showErrorMsg(e)},e.showErrorMsg=function(t){e.i.showErrorMsg(t)},e.prototype.showErrorMsg=function(e){var t=ErrorManager.i.getErrorByData(e);App.isWebDecorate&&(e.description=t,web_errorCallBack(e)),this.showSpecial(e.code,t)||App.PromTipsView.show(t,function(){App.isInLoading&&!App.isWebInsert&&App.SceneManager.runScene(SceneConsts.Login)},null,this),App.EasyLoading.hideLoading(),(App.isInLogin||App.isInLoading)&&this.closeSocket()},e.prototype.showSpecial=function(e,t){return 999==e||e==ErrorManager.ec.LoggedOnAnotherDevice?(this.closeSocket(),App.PromTipsView.show(t,function(){App.isWebInsert||App.SceneManager.runScene(SceneConsts.Login),(App.isInRoom||App.isInDesk||App.isInGame)&&GameModuleMgr.i.exitRoom()}),!0):998==e||1106==e?(App.PromTipsView.show(t,function(){App.isWebInsert||App.SceneManager.runScene(SceneConsts.Lobby),(App.isInRoom||App.isInDesk||App.isInGame)&&GameModuleMgr.i.exitRoom()}),!0):e==ErrorManager.ec.UnavailableService||e==ErrorManager.ec.ServerMaintain?(App.isWebInsert?App.ScrollTxtTips.showTip(t):App.PromTipsView.show(t,function(){App.MessageCenter.dispatch(GameConsEvent.Game_Maintain_Const,e),App.isInLoading&&App.SceneManager.runScene(SceneConsts.Login)}),!0):(1025==e&&App.PromTipsView.show(t),!1)},e.prototype.closeSocket=function(){App.Socket.isConnecting()&&(this._mSocketEvent.removeHeart(),App.Socket.close())},e.prototype.asyncLoadFz=function(){this._mHotUpdateEvent.asyncLoadFz()},e.gameClear=function(e){void 0===e&&(e=!1),App.isInLogin||(App.PromSuperposeView.hideAll(),App.isWebInsert||App.isThirdInsert||App.SceneManager.runScene(SceneConsts.Login,{isWebClear:e}),GameModuleMgr.i.exitRoom())},e._mInstance=null,e.Time_Delay=1e3/33,e}();e.HotGame=t,__reflect(t.prototype,"hot.HotGame");var o=function(){function e(){this._mHeartTimer=null,this._mTimeOutTimes=0,this._mHeartInterval=0}return e.prototype.addEvent=function(){App.MessageCenter.addListener(SocketConst.SOCKET_CLOSE,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_NOCONNECT,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_CONNECT,this.onSocketConnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_RECONNECT,this.onSocketReconnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_SEND_TIME_OUT,this.onSocketSendTimeOut,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10002),this.onHeartBack,this)},e.prototype.onSocketConnect=function(){Log.log("socket success"),this.socketConnected()},e.prototype.onSocketReconnect=function(){Log.log("socket reconnect success"),this.socketConnected()},e.prototype.socketConnected=function(){this.startHeart(),App.isWebInsert||App.isThirdInsert?WebInsertMgr.i.getInfo():GamePlayerMgr.i.relogin(),UrlPoolMgr.i.loginSuccess()},e.prototype.onSocketClose=function(){var e=this;App.DeviceUtils.IsNative?App.IsAppTest?R.checkNetWorkOpen(function(t){"1"==t?e.gameReconnet():e.showReconnetErrorTips()},this):R.ping("www.baidu.com",function(t){"1"==t?e.gameReconnet():e.showReconnetErrorTips()},e):App.isWebPools&&App.IsDecrypt?this.gameReconnet():R.setTimeOutOnly(this.showReconnetTips,this,2e3)},e.prototype.gameReconnet=function(){this.checkGameUrl()||(App.PromTipsView.show("游戏服务器登录失败，请重试或联系客服人员",function(){App.EasyLoading.hideLoading(),t.gameClear()},null,this),App.isWebDecorate&&web_socketClose())},e.prototype.showReconnetErrorTips=function(){var e="检查到网络不可用，是否前往设置？";App.PromTipsView.show(e,function(){GameNative.openNetSetView(),R.setTimeOutOnly(this.showReconnetTips,this,2e3)},function(){R.setTimeOutOnly(this.showReconnetTips,this,500)},this,!0)},e.prototype.checkGameUrl=function(){return UrlPoolMgr.i.ug?(this.removeHeart(),App.EasyLoading.showLoading("正在为您切换最优路线..."),App.Socket.reconnect(),!0):!1},e.prototype.showReconnetTips=function(){App.Socket.close(),App.EasyLoading.hideLoading(),this.removeHeart();var e="服务器连接已断开，是否重连？";App.PromTipsView.show(e,function(){App.EasyLoading.showReconnetTip(),App.Socket.connect()},function(){t.gameClear()},this,!0),App.isWebDecorate&&web_socketClose()},e.prototype.onSocketSendTimeOut=function(){var e=++this._mTimeOutTimes;1==e?this.onHeart():2==e&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},e.prototype.startHeart=function(){this._mHeartTimer||(this._mHeartTimer=new egret.Timer(25e3,0),this._mHeartTimer.addEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.start()),this.onHeart()},e.prototype.removeHeart=function(){this._mHeartTimer&&(this._mHeartTimer.removeEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.stop(),this._mHeartTimer=null)},e.prototype.onHeart=function(){App.Socket.send({key:10001,body:{}}),this._mHeartInterval=egret.getTimer()},e.prototype.onHeartBack=function(e){var t=e.heartbeat_at,o=egret.getTimer()-this._mHeartInterval;300>o?GameBase.saveCurrServerTime(t):GameBase.getCurrServerTime()<=0&&GameBase.saveCurrServerTime(t+o/2),this._mTimeOutTimes=0},e}();__reflect(o.prototype,"SocketEvent");var i=function(){function e(){this._mArrLoadError={}}return e.prototype.addEvent=function(){App.MessageCenter.addListener(GameNative.GameUpdateProgress,this.onGameUpdateProgress,this),App.MessageCenter.addListener(GameNative.GameUpdateComplete,this.onGameUpdateComplete,this),App.MessageCenter.addListener(GameNative.GameDownloadFail,this.onGameDownloadFail,this),App.MessageCenter.addListener(GameNative.GameDownloadZipFail,this.onGameDownloadZipFail,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.onUpdateGameComplete,this)},e.prototype.checkNetWorkOpen=function(){var e=this;R.checkNetWorkOpen(function(t){"1"==t?e.asyncLoadFz():e.asyncLoadNoNetTips()},this)},e.prototype.asyncLoadNoNetTips=function(){var e=this,t="检查到网络不可用，是否前往设置？";App.PromTipsView.show(t,function(){GameNative.openNetSetView(),e.asyncLoadTips()},function(){GameNative.appGameExit()},this,!0)},e.prototype.asyncLoadTips=function(){R.setTimeOut(function(){var e="服务器获取失败，请检查网络设置后重试";App.PromTipsView.show(e,function(){this.asyncLoadFz()},function(){App.EasyLoading.hideLoading(),GameNative.appGameExit()},this,!0)}.bind(this),this,1e3)},e.prototype.asyncLoadFz=function(){UrlPoolMgr.i.initUrls(),App.TimerManager.doFrame(1,99999,this.asyncLoadFzCC,this)},e.prototype.asyncLoadFzCC=function(){UrlPoolMgr.i.isInitUrlsed&&(App.TimerManager.remove(this.asyncLoadFzCC,this),App.DeviceUtils.IsNative&&this.startCheckHotUpdate())},e.prototype.startCheckHotUpdate=function(){UrlPoolMgr.i.u(this.hotUpdate,this.asyncLoadFzCCError,this)},e.prototype.asyncLoadFzCCError=function(){var e="更新包获取失败，请联系客服人员";App.PromTipsView.show(e,function(){R.openUrlOutside(CSModel.getUrlFromLive800())},function(){GameNative.appGameExit()},this,!0),App.PromTipsView.transformTxtSure("hall_ui_contact_png"),App.PromTipsView.transformTxtCancel("hall_ui_closestaff_png")},e.prototype.hotUpdate=function(){App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在获取版本信息..."),HotUpdateMgr.getInstance().checkUpdate(this.hotUpdateComplete,this.hotUpdateError,this)},e.prototype.hotUpdateComplete=function(){Log.log("热更新完成1"),App.MessageCenter.dispatch("hotUpdateComplete")},e.prototype.onUpdateGameComplete=function(e){var t=GameModuleMgr.i.getGameByName(e);t&&App.ScrollTxtTips.showTip(t.gameName+"游戏下载更新完成")},e.prototype.hotUpdateError=function(){R.setTimeOut(function(){var e="服务器获取失败，请检查网络设置后重试";App.PromTipsView.show(e,function(){this.hotUpdate()},function(){App.EasyLoading.hideLoading(),GameNative.appGameExit()},this,!0)}.bind(this),this,2e3)},e.prototype.onUpPublicComplete=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),GameBase.mIsPublicDownloaded=!0},e.prototype.onGameUpdateProgress=function(e){var t=e.split("&"),o=t[3],i=o.indexOf("games")>-1?"games":"main",n=o.indexOf("newApk")>-1,r=parseInt(t[1]),s=parseInt(t[2]);if("main"==i){var a=(r/1024/1024).toFixed(2)+"M/"+(s/1024/1024).toFixed(2)+"M",p="正在玩命下载更新..."+a;n&&(p="正在玩命下载新版本安装包..."+a),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,p),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Progress,{progress:r,total:s})}else{var c=o.split("/"),h=c[c.indexOf("games")+1];Log.log("游戏",h,"下载：",Math.floor(r/s*100)),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:h,progress:r,total:s})}},e.prototype.onGameUpdateComplete=function(e){Log.log("热更新完成："),HotUpdateMgr.getInstance().saveVersion(e)},e.prototype.onGameDownloadFail=function(e){Log.log("文件下载失败！",e),this.checkNet(e,"下载")},e.prototype.onGameDownloadZipFail=function(e){Log.log("文件解压失败！",e),this.checkNet(e,"解压")},e.prototype.checkNet=function(e,t){var o=this;App.IsAppTest?R.checkNetWorkOpen(function(i){"1"==i?o.pDownloadZipFail(e,t):o.noNetworkTips(e,t)},o):R.ping("www.baidu.com",function(i){"1"==i?o.pDownloadZipFail(e,t):o.noNetworkTips(e,t)},o)},e.prototype.noNetworkTips=function(e,t){var o=this,i="检查到网络不可用，是否前往设置？";App.PromTipsView.show(i,function(){GameNative.openNetSetView(),o.pDownloadZipFail(e,t)},function(){GameNative.appGameExit()},this,!0)},e.prototype.pDownloadZipFail=function(e,t){var o=App.CommonUtils.getFileName(e),i=this._mArrLoadError[o]?this._mArrLoadError[o]:0;if(i>5)return App.PromTipsView.show("安装包可能已损坏，请卸载后重新安装!"),void GameNative.appGameExit();var n=e.split("/"),r=n[n.indexOf("games")+1],s=r?GameModuleMgr.i.getGameByName(r):null,a=s?s.gameName:"主";App.PromSuperposeView.show("["+a+"]更新文件"+t+"失败，请重试",function(e){GameNative.sendToNative(GameNative.GameStartUpdate,e.url)},null,this,!1,{url:e}),this._mArrLoadError[o]=++i},e}();__reflect(i.prototype,"HotUpdateEvent")}(hot||(hot={}));var common;!function(e){var t=function(){function t(e,t){this._mInit=!1,this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this.onCreate(),this.init(e,t)}return t.prototype.onCreate=function(){this._mData=new e.ChipData,this._mIcon=new e.ChipIcon},t.prototype.init=function(e,t){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setValue(e),this.setChipId(t))},t.prototype.add2Stage=function(e){this._mInit&&(this._mParent=e,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.addAura(),this.setTextField(),this.hideMask()))},t.prototype.removeFromParent=function(){this._mInit&&this._mIcon.parent&&this._mParent.removeChild(this._mIcon)},t.prototype.addToContainer=function(e){this._mInit&&(this._mParent=e,this._mIcon.parent||this._mParent.addChild(this._mIcon))},t.prototype.setChipId=function(e){this._mData.setChipId(e)},t.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},t.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},t.prototype.addAura=function(){this._mInit&&this._mIcon.addAura()},t.prototype.moveTo=function(){var e=this._mData.getFlyX(),t=this._mData.getFlyY(),o=this._mData.getFlyChipX(),i=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:e,y:t,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this._mIcon).to({x:o,y:i},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))}.bind(this))},t.prototype.moveFlyBet=function(){var e=this._mData.getFlyX(),t=this._mData.getFlyY();egret.Tween.get(this._mIcon).to({x:e,y:t},300,egret.Ease.sineInOut)},t.prototype.moveFlyhead=function(){var e=this._mData.getFlyChipX(),t=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:e,y:t},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))},t.prototype.setTextField=function(){this._mInit&&this._mIcon.setTextField()},t.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},t.prototype.touchIcon=function(){this._mIcon&&(this._mIcon.touchEnabled=!0,this._mIcon.touchChildren=!0)},t.prototype.Iconclose=function(){this._mIcon&&(this._mIcon.touchEnabled=!1,this._mIcon.touchChildren=!1)
},t.prototype.setopennes=function(e){this._mIcon.setopennes(e)},t.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},t.prototype.setScore=function(){this._mIcon.setScore()},t.prototype.setFlyX=function(e){this._mData.setFlyX(e)},t.prototype.setFlyY=function(e){this._mData.setFlyY(e)},t.prototype.getFlyX=function(){return this._mData.getFlyX()},t.prototype.getFlyY=function(){return this._mData.getFlyY()},t.prototype.setFlyChipX=function(e){this._mData.setFlyChipX(e)},t.prototype.setFlyChipY=function(e){this._mData.setFlyChipY(e)},t.prototype.getFlyChipX=function(){return this._mData.getFlyChipX()},t.prototype.getFlyChipY=function(){return this._mData.getFlyChipY()},t.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mParent.removeChild(this._mIcon))},Object.defineProperty(t.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),t.prototype.getChipId=function(){return this._mData.getChipId()},t.prototype.setplaceId=function(e){this._mData.setplaceId(e)},t.prototype.getplaceId=function(){return this._mData.getplaceId()},Object.defineProperty(t.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._mIcon.x},set:function(e){this._mIcon.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._mIcon.y},set:function(e){this._mIcon.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(e){this._mIcon.scaleX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(e){this._mIcon.scaleY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(e){this._mIcon.alpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(e){this._mIcon.anchorOffsetX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(e){this._mIcon.anchorOffsetY=e},enumerable:!0,configurable:!0}),t.prototype.setColor=function(e){this._mData.setColor(e)},t.prototype.setValue=function(e){this._mData.setValue(e)},t.prototype.setIsBottom=function(e){this._mIsBottom=e},t.prototype.getData=function(){return this._mData},t.prototype.getIcon=function(){return this._mIcon},t.prototype.destroy=function(){this._mIcon&&egret.Tween.removeTweens(this._mIcon),this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mData=void 0,this._mIcon=void 0,this._mParent=void 0},t}();e.chipUIBtn=t,__reflect(t.prototype,"common.chipUIBtn")}(common||(common={}));var common;!function(e){var t=function(){function e(){e.BeadPool=[]}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.createBead=function(){var t=e.BeadPool.pop();return t||(t=new o),t},e.prototype.releaseBead=function(t){t.clear(),e.BeadPool.unshift(t)},e.prototype.clear=function(){for(;e.BeadPool.length;)e.BeadPool.pop().destroy()},e._i=null,e.BeadPool=null,e}();e.BeadFactory=t,__reflect(t.prototype,"common.BeadFactory");var o=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.BeadSrc=new eui.Image,this.addChild(this.BeadSrc)},t.prototype.setSource=function(e){this.BeadSrc.texture=RES.getRes(e)},t.prototype.clear=function(){R.removeFromParent(this)},t.prototype.destroy=function(){this.BeadSrc.source=void 0,this.BeadSrc.texture=void 0,this.clear()},t}(eui.Component);e.Bead=o,__reflect(o.prototype,"common.Bead")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"BetAnimationSkin")||this;return o._approach=null,o}return __extends(o,t),o.prototype.playAni=function(e,t){this.diceAnimation(e,t)},o.prototype.diceAnimation=function(t,o){this._approach||(this._approach=new e.comBones,this._betPos.addChild(this._approach)),this._betPos.visible=!0;var i=o?o+"_bet_"+t:"bet_"+t;this._approach.updateId(i);var n=this._betPos.width/2,r=this._betPos.height/2;this._approach.setPosition(n,r),this._approach.play(1);var s=this;this._approach.addPlayEndCallBack(function(){s._betPos.visible=!1},this)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this._approach&&this._approach.destroy(),this._approach=void 0},o}(BaseEuiComponent);e.BetAnimation=t,__reflect(t.prototype,"common.BetAnimation")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"ChartBead")||this;return o.beadList=[],o.tableId=-1,o.record=[],o}return __extends(o,t),o.prototype.renderBead=function(e,t,o){this.gameName=t,e&&e.length?(e.length<this.record.length&&(this.removeFrame(),this.isRender=!1),this.record=JSON.parse(JSON.stringify(e)),this.tableId!=o?(this.isRender=!0,this.removeFrame(),this.tableId=o):this.isRender&&this.removeFrame(),App.TimerManager.doFrame(1,99,this.frameRender,this)):this.removeFrame()},o.prototype.removeBead=function(){if(this.beadList.length)for(;this.beadList.length;){var t=this.beadList.pop();e.BeadFactory.i.releaseBead(t)}},o.prototype.frameRender=function(){for(var e=0;3>e;e++)this.index<this.record.length?this.renderOne():(this.isRender=!1,App.TimerManager.remove(this.frameRender,this))},o.prototype.removeFrame=function(){this.removeBead(),this.index=0,App.TimerManager.remove(this.frameRender,this)},o.prototype.renderOne=function(){this.renderPublic(this.index),this.index++},o.prototype.renderPublic=function(t){var o=e.BeadFactory.i.createBead(),i=t/6,n=24*parseInt(String(i)),r=t%6;o.x=n,o.y=24*r,o.scaleX=o.scaleY=.6,"bjl"==this.gameName?o.setSource(this.gameName+"_ui_bead_"+this.record[t]+"_png"):o.setSource(this.gameName+"_ui_bead_"+this.record[t]),this.beadList.push(o),this.GroupBead.addChild(o)},o.prototype.destroy=function(){t.prototype.destroy.call(this)},o}(BaseEuiComponent);e.ChartBead=t,__reflect(t.prototype,"common.ChartBead")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"ChartOther")||this;return o.record=[],o.curWinner=-1,o.largeArr=[],o.copyLargeArr=[],o.bigEyeResultArr=[],o.bigEyeEndArr=[],o.smallResultArr=[],o.smallEndArr=[],o.xiaoQiangResultArr=[],o.xiaoQiangEndArr=[],o.largeRenderArr=[],o.largeList=[],o.bigEyeRenderArr=[],o.bigEyeList=[],o.smallRenderArr=[],o.smallList=[],o.xiaoQiangRenderArr=[],o.xiaoQiangList=[],o.tableId=-1,o}return __extends(o,t),o.prototype.renderOtherChart=function(e,t,o){JSON.stringify(this.record)!=JSON.stringify(e)&&(e.length<this.record.length&&(this.isRepeat=!0),this.tableId!=o?(this.isSameTable=!1,this.tableId=o):this.isSameTable=!0,this.gameName=t,this.renderLargeRoad(t,e,o),this.renderBigEyeRoad(t),this.renderSmallRoad(t),this.renderXiaoQiangRoad(t),this.isRepeat=!1)},o.prototype.renderLargeRoad=function(e,t,o){this.record=JSON.parse(JSON.stringify(t));var i=JSON.parse(JSON.stringify(this.copyLargeArr)),n=[];i.forEach(function(e){n=n.concat(e)});var r=n.slice(0,10);this.copyLargeArr.length=0,this.createLargeRoadPos(t),this.largeRenderArr.length=0,this.copyLargeArr.forEach(function(e){this.largeRenderArr=this.largeRenderArr.concat(e)}.bind(this));var s=this.largeRenderArr.slice(0,10);this.largeRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeLargeFrame(),this.largeIsRender=!1):JSON.stringify(r)!=JSON.stringify(s)?(this.removeLargeFrame(),this.largeIsRender=!0):this.largeIsRender&&this.removeLargeFrame():(this.largeIsRender=!0,this.removeLargeFrame()),App.TimerManager.doFrame(1,99,this.frameRenderLarge,this)):this.removeLargeFrame()},o.prototype.removeLargeFrame=function(){this.removeBead(this.largeList),this.largeIndex=0,App.TimerManager.remove(this.frameRenderLarge,this)},o.prototype.frameRenderLarge=function(){for(var e=0;3>e;e++)this.largeIndex<this.largeRenderArr.length?this.renderLargeOne():(this.largeIsRender=!1,App.TimerManager.remove(this.frameRenderLarge,this))},o.prototype.renderLargeOne=function(){if(!(this.largeIndex>this.largeRenderArr.length-1)){var t=e.BeadFactory.i.createBead();t.x=12*(this.largeRenderArr[this.largeIndex].x-1),t.y=12*(this.largeRenderArr[this.largeIndex].y-1),t.scaleX=t.scaleY=1,"bjl"==this.gameName?t.setSource(this.gameName+"_ui_dl_"+this.largeRenderArr[this.largeIndex].winner):t.setSource(this.gameName+"_ui_dl_"+this.largeRenderArr[this.largeIndex].winner),this.largeList.push(t),this.GroupLargeRoad.addChild(t),this.largeIndex++}},o.prototype.removeBead=function(t){if(t.length)for(;t.length;){var o=t.pop();e.BeadFactory.i.releaseBead(o)}},o.prototype.renderBigEyeRoad=function(e){var t=JSON.parse(JSON.stringify(this.bigEyeEndArr)),o=[];t.forEach(function(e){o=o.concat(e)});var i=o.slice(0,10);this.bigEyeResultArr.length=0,this.bigEyeEndArr.length=0,this.createBigEyeRoadResult(),this.bigEyeRenderArr.length=0,this.bigEyeEndArr.forEach(function(e){this.bigEyeRenderArr=this.bigEyeRenderArr.concat(e)}.bind(this));var n=this.bigEyeRenderArr.slice(0,10);this.bigEyeRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeBigEyeFrame(),this.bigEyeIsRender=!1):JSON.stringify(i)!=JSON.stringify(n)?(this.removeBigEyeFrame(),this.bigEyeIsRender=!0):this.bigEyeIsRender&&this.removeBigEyeFrame():(this.bigEyeIsRender=!0,this.removeBigEyeFrame()),App.TimerManager.doFrame(1,99,this.frameRenderBigEye,this)):this.removeBigEyeFrame()},o.prototype.removeBigEyeFrame=function(){this.removeBead(this.bigEyeList),this.bigEyeIndex=0,App.TimerManager.remove(this.frameRenderBigEye,this)},o.prototype.frameRenderBigEye=function(){for(var e=0;3>e;e++)this.bigEyeIndex<this.bigEyeRenderArr.length?this.renderBigEyeOne():(this.bigEyeIsRender=!1,App.TimerManager.remove(this.frameRenderBigEye,this))},o.prototype.renderBigEyeOne=function(){if(!(this.bigEyeIndex>this.bigEyeRenderArr.length-1)){var t=e.BeadFactory.i.createBead();t.x=6*(this.bigEyeRenderArr[this.bigEyeIndex].x-1),t.y=6*(this.bigEyeRenderArr[this.bigEyeIndex].y-1),t.scaleX=t.scaleY=1,"bjl"==this.gameName?t.setSource(this.gameName+"_ui_dyl_"+this.bigEyeRenderArr[this.bigEyeIndex].winner):t.setSource(this.gameName+"_ui_dyl_"+this.bigEyeRenderArr[this.bigEyeIndex].winner),this.bigEyeList.push(t),this.GroupBigEyeRoad.addChild(t),this.bigEyeIndex++}},o.prototype.renderSmallRoad=function(e){var t=JSON.parse(JSON.stringify(this.smallEndArr)),o=[];t.forEach(function(e){o=o.concat(e)});var i=o.slice(0,10);this.smallResultArr.length=0,this.smallEndArr.length=0,this.createSmallRoadResult(),this.smallRenderArr.length=0,this.smallEndArr.forEach(function(e){this.smallRenderArr=this.smallRenderArr.concat(e)}.bind(this));var n=this.smallRenderArr.slice(0,10);this.smallRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeSmallFrame(),this.smallIsRender=!1):JSON.stringify(i)!=JSON.stringify(n)?(this.removeSmallFrame(),this.smallIsRender=!0):this.smallIsRender&&this.removeSmallFrame():(this.smallIsRender=!0,this.removeSmallFrame()),App.TimerManager.doFrame(1,99,this.frameRenderSmall,this)):this.removeSmallFrame()},o.prototype.removeSmallFrame=function(){this.removeBead(this.smallList),this.smallIndex=0,App.TimerManager.remove(this.frameRenderSmall,this)},o.prototype.frameRenderSmall=function(){for(var e=0;3>e;e++)this.smallIndex<this.smallRenderArr.length?this.renderSmallOne():(this.smallIsRender=!1,App.TimerManager.remove(this.frameRenderSmall,this))},o.prototype.renderSmallOne=function(){if(!(this.smallIndex>this.smallRenderArr.length-1)){var t=e.BeadFactory.i.createBead();t.x=6*(this.smallRenderArr[this.smallIndex].x-1),t.y=6*(this.smallRenderArr[this.smallIndex].y-1),t.scaleX=t.scaleY=1,"bjl"==this.gameName?t.setSource(this.gameName+"_ui_xl_"+this.smallRenderArr[this.smallIndex].winner):t.setSource(this.gameName+"_ui_xl_"+this.smallRenderArr[this.smallIndex].winner),this.smallList.push(t),this.GroupSmallRoad.addChild(t),this.smallIndex++}},o.prototype.renderXiaoQiangRoad=function(e){var t=JSON.parse(JSON.stringify(this.xiaoQiangEndArr)),o=[];t.forEach(function(e){o=o.concat(e)});var i=o.slice(0,10);this.xiaoQiangResultArr.length=0,this.xiaoQiangEndArr.length=0,this.createXiaoQiangRoadResult(),this.xiaoQiangRenderArr.length=0,this.xiaoQiangEndArr.forEach(function(e){this.xiaoQiangRenderArr=this.xiaoQiangRenderArr.concat(e)}.bind(this));var n=this.xiaoQiangRenderArr.slice(0,10);this.xiaoQiangRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeXiaoQiangFrame(),this.xiaoQiangIsRender=!1):JSON.stringify(i)!=JSON.stringify(n)?(this.removeXiaoQiangFrame(),this.xiaoQiangIsRender=!0):this.xiaoQiangIsRender&&this.removeXiaoQiangFrame():(this.xiaoQiangIsRender=!0,this.removeXiaoQiangFrame()),App.TimerManager.doFrame(1,99,this.frameRenderXiaoQiang,this)):this.removeXiaoQiangFrame()},o.prototype.removeXiaoQiangFrame=function(){this.removeBead(this.xiaoQiangList),this.xiaoQiangIndex=0,App.TimerManager.remove(this.frameRenderXiaoQiang,this)},o.prototype.frameRenderXiaoQiang=function(){for(var e=0;3>e;e++)this.xiaoQiangIndex<this.xiaoQiangRenderArr.length?this.renderXiaoQiangOne():(this.xiaoQiangIsRender=!1,App.TimerManager.remove(this.frameRenderXiaoQiang,this))},o.prototype.renderXiaoQiangOne=function(){if(!(this.xiaoQiangIndex>this.xiaoQiangRenderArr.length-1)){var t=e.BeadFactory.i.createBead();t.x=6*(this.xiaoQiangRenderArr[this.xiaoQiangIndex].x-1),t.y=6*(this.xiaoQiangRenderArr[this.xiaoQiangIndex].y-1),t.scaleX=t.scaleY=1,"bjl"==this.gameName?t.setSource(this.gameName+"_ui_xql_"+this.xiaoQiangRenderArr[this.xiaoQiangIndex].winner):t.setSource(this.gameName+"_ui_xql_"+this.xiaoQiangRenderArr[this.xiaoQiangIndex].winner),this.xiaoQiangList.push(t),this.GroupXiaoQiangRoad.addChild(t),this.xiaoQiangIndex++}},o.prototype.createLargeRoadPos=function(e){this.createArr(e,this.largeArr),this.copyLargeArr=JSON.parse(JSON.stringify(this.largeArr)),this.removeLargeData(this.copyLargeArr,20,1)},o.prototype.createArr=function(e,t){t.length=0,this.curWinner=-1;var o=[];t.push(o),e.length&&e.forEach(function(e,i){if(-1==this.curWinner){var n={x:1,y:1,winner:e};o.push(n),2!=e&&(this.curWinner=e)}else if(e==this.curWinner)this.rederLargeCurrentList(e,t),this.curWinner=e;else if(2==e){var r=t[t.length-1],s=r[r.length-1].x,a=r[r.length-1].y,n={x:s,y:a,winner:e};r.push(n)}else{var p=[],c=t.indexOf(t[t.length-1]),n={x:c+2,y:1,winner:e};p.push(n),t.push(p),this.curWinner=e}}.bind(this))},o.prototype.createBigEyeEndArr=function(e){this.createArr(e,this.bigEyeEndArr),this.removeLargeData(this.bigEyeEndArr,40,2)},o.prototype.createSmallEndArr=function(e){this.createArr(e,this.smallEndArr),this.removeLargeData(this.smallEndArr,20)},o.prototype.createXiaoQiangEndArr=function(e){this.createArr(e,this.xiaoQiangEndArr),this.removeLargeData(this.xiaoQiangEndArr,20)},o.prototype.reformLargeArr=function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach(function(e){e.forEach(function(t,o){2==t.winner&&e.splice(o,1)}.bind(this))}.bind(this)),t},o.prototype.createBigEyeRoadResult=function(){var e=this.reformLargeArr(this.largeArr);this.createResultArr(e,this.bigEyeResultArr,1),this.createBigEyeEndArr(this.bigEyeResultArr)},o.prototype.createSmallRoadResult=function(){var e=this.reformLargeArr(this.largeArr);this.createResultArr(e,this.smallResultArr,2),this.createSmallEndArr(this.smallResultArr)},o.prototype.createXiaoQiangRoadResult=function(){var e=this.reformLargeArr(this.largeArr);this.createResultArr(e,this.xiaoQiangResultArr,3),this.createXiaoQiangEndArr(this.xiaoQiangResultArr)},o.prototype.createResultArr=function(e,t,o){var i=o;if(e.length>i)for(var n=i;n<e.length;n++)for(var r=0;r<e[n].length;r++)if(n==i){if(r>0){var s=void 0;s=e[n-i].length==r?1:0,t.push(s)}}else{var s=void 0;s=0==r?e[n-i-1].length==e[n-1].length?0:1:e[n-i].length==r?1:0,t.push(s)}},o.prototype.rederLargeCurrentList=function(e,t){var o,i=t[t.length-1],n=i[i.length-1].x,r=i[i.length-1].y;o=6>r&&2==this.isRenderListLine(n,r+1,e,t)?{x:n,y:r+1,winner:e}:{x:n+1,y:r,winner:e},i.push(o)},o.prototype.isRenderListLine=function(e,t,o,i){var n,r,s;if(i.length>1){var a=i[0];if(i.length>2)for(var p=1;p<i.length-1;p++)a=a.concat(i[p]);var c=[];a.forEach(function(i){c.push(i.x),r=c.indexOf(e),s=c.indexOf(e-1),n=r>-1?a[r].y==t?1:a[r].y==t+1&&a[r].winner==o?1:2:s>-1&&a[s].y==t&&a[s].winner==o?1:2})}else n=2;return n},o.prototype.removeLargeData=function(e,t,o){e.length&&e.forEach(function(o){o.length&&o[o.length-1].x>t&&(e.splice(0,1),this.moveLeftLarge(e),this.removeLargeData(e,t))}.bind(this))},o.prototype.moveLeftLarge=function(e){e.forEach(function(e){e.forEach(function(e){e.x--})})},o.prototype.getAskRoad=function(e){this.record.push(e);var t=[];this.createArr(this.record,t);var o=this.reformLargeArr(t),i=[],n=[],r=[];this.createResultArr(o,i,1),this.createResultArr(o,n,2),this.createResultArr(o,r,3);var s=[];return i.length&&s.push(i[i.length-1]),n.length&&s.push(n[n.length-1]),r.length&&s.push(r[r.length-1]),this.record.splice(this.record.length-1,1),s},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.largeArr=void 0,this.copyLargeArr=void 0,this.bigEyeResultArr=void 0,this.bigEyeEndArr=void 0,this.smallResultArr=void 0,this.smallEndArr=void 0,this.xiaoQiangResultArr=void 0,this.xiaoQiangEndArr=void 0},o}(BaseEuiComponent);e.ChartOther=t,__reflect(t.prototype,"common.ChartOther")}(common||(common={}));var common;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._mIsInPool=!1,t.chiplist=[1,5,10,20,50,100,200,500,1e3,0],t.skinName="chipBtn",t}return __extends(t,e),t.create=function(){var e=ObjectPool.pop("common.chipBtn");return e._mIsInPool=!1,e},t.release=function(e){e._mIsInPool||(e._mIsInPool=!0,e.clean(),ObjectPool.push(e))},t.cleanchipBtnPool=function(){ObjectPool.clearClass("common.chipBtn","destroy")},t.prototype.init=function(e,t){this.setNameNum(e),this.setBtnValue(e),this.setBtntextValue(),this.setBtnChip(e,t)},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.addPlayEndCallBack=function(e,t){this._mPlayEndCallBacK=e,this._mPlayEndThisObj=t},t.prototype.setBtnText=function(e){this.BtnText.text=this._mchipValue?this._mchipValue*e+"":""},t.prototype.setBtnValue=function(e){this._mchipValue=this.chiplist[e]},t.prototype.setBtntextValue=function(){this.BtnText.text=this._mchipValue?this._mchipValue+"":""},t.prototype.setScore=function(){this.BtnText.text=""},t.prototype.setFlyX=function(e){this.mIsX=e},t.prototype.setFlyY=function(e){this.mIsY=e},t.prototype.getFlyX=function(){return this.mIsX},t.prototype.getFlyY=function(){return this.mIsY},t.prototype.setFlyChipX=function(e){this._flyX=e},t.prototype.setFlyChipY=function(e){this._flyY=e},t.prototype.getFlyChipX=function(){return this._flyX},t.prototype.getFlyChipY=function(){return this._flyY},t.prototype.moveTo=function(){var e=this.mIsX,o=this.mIsY,i=this._flyX,n=this._flyY;egret.Tween.get(this).to({x:e,y:o,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this).to({x:i,y:n},300,egret.Ease.sineInOut).call(function(){t.release(this)}.bind(this))}.bind(this))},t.prototype.moveToPlace=function(e){this.setScore();var o=App.MathUtils.getDistance(this._flyX,this._flyY,this.x,this.y);egret.Tween.get(this).wait(.8*e).to({x:this._flyX,y:this._flyY,alpha:1},.8*o,egret.Ease.sineOut).call(function(){t.release(this)}.bind(this))},t.prototype.cleanTween=function(){egret.Tween.removeTweens(this)},t.prototype.setBtnChip=function(e,t){this._chip.source="common_ui_"+(t?t+e:e)+"_png",this.BtnLight.source="common_ui_g"+e+"_png"},t.prototype.setNameNum=function(e){this._mChipId=e},t.prototype.getNameNum=function(){return this._mChipId},t.prototype.getChipNum=function(e){return this._mchipValue*e},t.prototype.stopChip=function(){this._btnchip.touchEnabled=!1},t.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._chip.$bitmapData=void 0,this._chip.texture=void 0,this._chip.source=void 0,this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mchipValue=void 0},t.prototype.destroy=function(){this.clean()},t}(eui.Component);e.chipBtn=t,__reflect(t.prototype,"common.chipBtn")}(common||(common={}));var common;!function(e){var t=function(){function e(){e.CoinPool=[]}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.createCoin=function(){var t=e.CoinPool.pop();return t||(t=new o),t.init(),t},e.prototype.releaseCoin=function(t){egret.is(t,"Coin")&&(t.isRelease||(t.clear(),e.CoinPool.unshift(t)))},e.prototype.clear=function(){for(;e.CoinPool.length;)e.CoinPool.pop().destroy()},e._i=null,e.CoinPool=null,e}();e.CoinFactory=t,__reflect(t.prototype,"common.CoinFactory");var o=function(e){function t(){var t=e.call(this)||this;return t._isRelease=!1,t.skinName="CoinSkin",t}return __extends(t,e),t.prototype.init=function(){this._isRelease=!1},t.prototype.refresh=function(e,t,o,i){this.coinSrc.source=e,this.coinText.text=""+t,o&&(this.x=o),i&&(this.y=i)},Object.defineProperty(t.prototype,"isRelease",{get:function(){return this._isRelease},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._isRelease=!0,this.coinSrc.source=void 0,this.coinSrc.texture=void 0,R.removeFromParent(this),egret.Tween.removeTweens(this)},t.prototype.destroy=function(){this.clear()},t}(eui.Component);e.Coin=o,__reflect(o.prototype,"common.Coin")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){var o=e.call(this,"GameSetSkin")||this;return o.visible=!1,o}return __extends(t,e),t.prototype.initSet=function(){this.openMusic(),this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.effectBox.selected=GamePlayerMgr.i.isOpenEffect},t.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},t.prototype.showPopup=function(){this.visible=!0,this.SetBg.visible=!0,this.SetMenu.scaleX=this.SetMenu.scaleY=0,App.EffectUtils.showUI(this.SetMenu)},t.prototype.closePoput=function(){this.SetBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.SetMenu,200,0,function(){e.visible=!1})},t.prototype.onChangeValue=function(e){var t;switch(e.currentTarget){case this.VoiceSlider:t=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(t);break;case this.MusicSlider:t=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(t)}},t.prototype.onOpen=function(e){App.SoundManager.playEffect("click_mp3")},t.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0)},t.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0)},t.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1)},t.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.addEvent=function(){this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},t.prototype.removeEvent=function(){this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.GameSet=t,__reflect(t.prototype,"common.GameSet")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"JeButtonSkin")||this;return o.initBet=!1,o._chipList=[],o}return __extends(o,t),o.prototype.createChip=function(t){this.reMoveChip();for(var o=0;5>o;o++){var i=t[o],n=this["_btn_"+o],r=e.chipBtn.create();r.init(i),r.x=0,r.y=0,n.addChild(r),this._chipList.push(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,o,i),this)}this.initBet=!0},o.prototype.reMoveChip=function(){for(;this._chipList.length;){var t=this._chipList.pop();t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),e.chipBtn.release(t)}},o.prototype.touchBtn=function(e,t){App.SoundManager.playEffect("click_mp3"),this.initBet&&this.applyFunc("touch",e,t)},o.prototype.setBtnChip=function(e){if(this._chipList.length)for(var t=0;t<this._chipList.length;t++){var o=this._chipList[t];o.setBtnChip(e[t]),o.setBtnValue(e[t])}},o.prototype.getBtnNum=function(e){return Math.pow(10,e)},o.prototype.toggleBtn=function(e){this.initBet&&(this.resetBtn(),this.GroupBtn.getChildAt(e).y=-12,this._chipList[e].BtnLight.alpha=1)},o.prototype.resetBtn=function(){var e=this._chipList;if(this.initBet)for(var t=0;t<e.length;t++)this.GroupBtn.getChildAt(t).y=3,e[t].BtnLight.alpha=0},o.prototype.disabledBtn=function(){this._chipList;if(this.initBet){this.resetBtn();for(var e=0;5>e;e++)this._chipList[e].BtnShade.alpha=1,this.GroupBtn.getChildAt(e).touchChildren=!1,this._chipList[e].BtnLight.alpha=0}},o.prototype.enableBtn=function(){var e=this._chipList;if(this.initBet)for(var t=0;t<e.length;t++)e[t].BtnShade.alpha=0,this.GroupBtn.getChildAt(t).touchChildren=!0},o.prototype.chiplight=function(e){this.initBet&&(this._chipList[e].BtnShade.alpha=0,this.GroupBtn.getChildAt(e).touchChildren=!0)},o.prototype.ShowHandBtn=function(e){this.applyFunc("ShowHandBtn",e)},o.prototype.ShowHandlightBtn=function(){},o.prototype.setchipValue=function(e){var t=this._chipList;if(this.initBet){for(var o=0;o<t.length;o++)t[o].setBtnText(e);this.getChipValue(e)}},o.prototype.getChipValue=function(e){var t=[],o=0,i=this._chipList;if(this.initBet){for(var n=0;n<i.length;n++)o=i[n].getChipNum(e),t.push(o);this.applyFunc("getChipValue",t)}},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.reMoveChip(),this.removeEvent(),this.reMoveChip()},o}(BaseEuiComponent);e.JeButton=t,__reflect(t.prototype,"common.JeButton")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){var o=e.call(this,"LogicBtnSkin")||this;return o.BtnType=0,o._maskRct=new egret.Rectangle(0,233,30,233),o._rectYYlist=[],o}return __extends(t,e),t.prototype.open=function(){this._closeUI.visible=!1,this._mandi.mask=this._maskRct,this.setAutoConfirm(!0)},t.prototype.confirmBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("confirmBet")},t.prototype.disabledConfirmBet=function(){this.ComfirmBet.enabled=!1},t.prototype.enabledConfirmBet=function(){this.ComfirmBet.enabled=!0},t.prototype.autoConfirm=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("setAutoBet",this.AutoConfirm.selected),this.confirmFrame()},t.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("conserBet")},t.prototype.disabledConserBet=function(){this.ConserBet.enabled=!1},t.prototype.enabledConserBet=function(){this.ConserBet.enabled=!0},t.prototype.setAutoConfirm=function(e){this.AutoConfirm.selected=e},t.prototype.trueBet=function(e){this.ComfirmBet.enabled=!e},t.prototype.betAsh=function(){this.ConserBet.enabled=!1,this.ComfirmBet.enabled=!1},t.prototype.confirmFrame=function(){App.SoundManager.playEffect("click_mp3");var e=this.AutoConfirm.selected;0==e?egret.Tween.get(this._confirmList).to({x:0},100):this.closeConfirmFrame()},t.prototype.closeConfirmFrame=function(){egret.Tween.get(this._confirmList).to({x:221},100)},t.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},t.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):(this._closeUI.visible=!1,egret.Tween.get(this.MenuBox0).to({y:297},100)),this.applyFunc("operateAddcounter")},t.prototype.moveMeun=function(e){var t=e.localY,o=!1;this.setENDCoordinate(t,o)},t.prototype.setVSlide=function(e){this._thumb.y=e},t.prototype.setCoordinate=function(e,t,o){var i=o?e-18.62:e-28.5,n=o?e-6.62:e-17.5,r=o?e+12.5:e;this.setVSlide(i),this.setMask(r),this.setCardCoordinate(n,t)},t.prototype.setENDCoordinate=function(e,t){for(var o=0;o<this._rectYYlist.length;o++)e>=236?(e=t?this._rectYYlist[0]:235,this.setCoordinate(e,0,t)):e>=this._rectYYlist[9]&&e<this._rectYYlist[8]||e<this._rectYYlist[9]?(e=t?this._rectYYlist[9]:10,this.setCoordinate(e,9,t)):e>=this._rectYYlist[o]&&e<this._rectYYlist[o-1]&&(e=t?this._rectYYlist[o]:e,this.setCoordinate(e,o,t))},t.prototype.setCardCoordinate=function(e,t){var o=t+1;this._LabelMutiple0.text=o+"倍",this._GroupTip.y=e,this.applyFunc("changeMultiple",o)},t.prototype.countHeight=function(e){return this._rect_0.y-Number(this._rect_0.height/2)-e},t.prototype.smailBoxnate=function(){for(var e=0;10>e;e++)this._rectYYlist.push(this["_rect_"+e].y)},t.prototype.beginMeun=function(e){var t=e.localY,o=!1;this.setENDCoordinate(t,o)},t.prototype.endMeun=function(e){var t=e.localY,o=!0;this.setENDCoordinate(t,o),this.retractMenu()},t.prototype.outMeun=function(e){var t=e.localY;if(t>0){var o=235,i=!0;this.setENDCoordinate(o,i)}else{var n=this._rectYYlist[9]+10,i=!0;this.setENDCoordinate(n,i)}},t.prototype.setMask=function(e){var t=233-(251-e);0>=t?t=0:t>=233&&(t=233),this._maskRct.y=t,this._mandi.mask=this._maskRct},t.prototype.ShowsetChip=function(e){this.applyFunc("ShowsetChip")},t.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0},t.prototype.testtest=function(){},t.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},t.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.btnAutoConfirm=function(){this.AutoConfirm.selected=this.AutoConfirm.selected?!1:!0,this.autoConfirm()},t.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ComfirmBet,this.confirmBet,this),App.CommonUtils.effectButton(this.ConserBet,this.conserBet,this),App.CommonUtils.effectButton(this.RepeatBet,this.repeatBet,this),App.CommonUtils.effectButton(this._plusbtn,this.showMenu,this),App.CommonUtils.effectButton(this._setChip,this.ShowsetChip,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this.btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this),this.smailBoxnate()
},t.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ComfirmBet),App.CommonUtils.removeButton(this.ConserBet),App.CommonUtils.removeButton(this.RepeatBet),App.CommonUtils.removeButton(this._plusbtn),App.CommonUtils.removeButton(this._setChip),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this.btnAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.LoginBtn=t,__reflect(t.prototype,"common.LoginBtn")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"LotteryRecord")||this;return o.isCreateEnd=!1,o.visible=!1,o}return __extends(o,t),o.prototype.initUI=function(){var t=new eui.VerticalLayout;this.gameList.layout=t,this.scrollerItem.viewport=this.gameList,this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.OFF,this.gameList.itemRenderer=e.LotteryRecordItem,this.tempCollection=new eui.ArrayCollection},o.prototype.showPopup=function(){this.visible=!0,this.Bg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},o.prototype.closePoput=function(){this.Bg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.Menu,300,0,function(){e.visible=!1}),App.MouseUtils.removeMouseWheel()},o.prototype.onMouseWheel=function(t){e.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.refreshData=function(e){e.length&&(this.isCreateEnd=!1,this.tempCollection.refresh(),this.tempCollection.replaceAll(e),this.gameList.dataProvider=this.tempCollection,this.tempCollection.refresh())},o.prototype.touchMove=function(e){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var t=this.scrollerItem.viewport;e.localY<24?t.scrollV=0:e.localY>t.height-24?t.scrollV=this.gameList.contentHeight-t.height:t.scrollV=(this.gameList.contentHeight-t.height)/(t.height-48)*(e.localY-24)},o.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},o.prototype.LotteryRecordCreated=function(){this.isCreateEnd||(this.isCreateEnd=!0,this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBg.visible=!0,this.ScrollBox.touchEnabled=!0))},o.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.Close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(e.PublicConsts.LotteryRecordCreated,this.LotteryRecordCreated,this)},o.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.Close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(e.PublicConsts.LotteryRecordCreated,this.LotteryRecordCreated,this)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.tempCollection=void 0},o}(BaseEuiComponent);e.LotteryRecord=t,__reflect(t.prototype,"common.LotteryRecord")}(common||(common={}));var common;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return App.MessageCenter.dispatch(e.PublicConsts.LotteryRecordCreated),o}return __extends(o,t),o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(0==this.data.order?(this.FirstIssue.text=this.data.issue,this.FirstNumber.text=this.data.number,this.FirstResult.text=this.data.result,this.FirstResult.textColor=0==this.data.textColor?11931166:1==this.data.textColor?466603:363304,this.GroupFirst.visible=!0,this.GroupOther.visible=!1):(this.OtherIssue.text=this.data.issue,this.OtherNumber.text=this.data.number,this.OtherResult.text=this.data.result,this.OtherResult.textColor=0==this.data.textColor?11931166:1==this.data.textColor?466603:363304,this.GroupFirst.visible=!1,this.GroupOther.visible=!0))},o}(eui.ItemRenderer);e.LotteryRecordItem=t,__reflect(t.prototype,"common.LotteryRecordItem")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"MessageInfoSkin")||this;return o.GroupMoneyLight=[],o._mResultPoint=new egret.Point,o}return __extends(o,t),o.prototype.setPluteLelf=function(){App.OffsetLeft(this.leftFive)},o.prototype.setUserName=function(e){this.UserName.text=e},o.prototype.setUserImage=function(e){this.UserImage.source=e},o.prototype.setUserFrame=function(e){this.UserFrame.source=e},o.prototype.setUserMoney=function(e){this.UserMoney.text=e+""},o.prototype.setUserBet=function(e){this.hibebetUser(),this.UserBet.visible=!0,this.UserBet.text=e},o.prototype.setMulUserBet=function(e,t){this.hibebetUser(),this.MulUserBet.visible=!0,this.MulUserBet.text=e+"（押"+t+"）"},o.prototype.resetBetMoney=function(){this.UserBet.text="",this.MulUserBet.text=""},o.prototype.hibebetUser=function(){this.UserBet.visible=!1,this.MulUserBet.visible=!1},o.prototype.avatarShake=function(e){var t=this["_Plute"+e],o=(t.x,0);o=1>=e||4==e?10:-10,egret.Tween.get(t).to({rotation:o},50).call(function(){egret.Tween.get(t).to({rotation:0},50,egret.Ease.sineInOut)}.bind(this))},o.prototype.setPluteImage=function(e,t){this["PluteImage"+t].source=e},o.prototype.setPluteName=function(e,t){this["PluteName"+t].text=e},o.prototype.specialPlayerMoney=function(e,t){this["PluteMoney"+t].text=e+""},o.prototype.getSpecialPlayerMoney=function(e){return Number(this["PluteMoney"+e].text)},o.prototype.playerWinMoney=function(e,t){this["PluteWinMoney"+t].text="+"+e},o.prototype.playerDisplay=function(e){this.allPlayerDisplay();for(var t=0;e+1>t;t++)this["Plute"+t].visible=!0},o.prototype.allPlayerDisplay=function(){for(var e=0;4>e;e++)this["Plute"+e].visible=!1},o.prototype.getPoint=function(){return this.localToGlobal(this.starPos.x,this.starPos.y,this._mResultPoint),this._mResultPoint},o.prototype.initInfo=function(){for(var e=0;5>e;e++)this["PluteWinMoney"+e].alpha=0,this["PluteWinMoney"+e].scaleX=.5,this["PluteWinMoney"+e].scaleY=.5,egret.Tween.removeTweens(this["PluteWinMoney"+e]),R.removeAllTimeOut(this)},o.prototype.fontEnlarge=function(e){var t=this["PluteWinMoney"+e];egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(t).to({y:t.y-50,alpha:0},300,egret.Ease.sineInOut).call(function(){t.y=t.y+50}.bind(this))},this,1200)},o.prototype.directFontEnlarge=function(e){var t=this["PluteWinMoney"+e];t.alpha=1,t.scaleX=1,t.scaleY=1,R.setTimeOnce(function(){this.initInfo()},this,3e3)},o.prototype.getMoneyLight=function(t){var o=e.comBones.create();if(this.GroupMoneyLight.push(o),!o.parent){var i=void 0,n=void 0;4==t?(i=this.GroupInfo,n=this.UserImage):(i=this["_Plute"+t],n=this["PluteImage"+t]),i.addChild(o),o.updateId("money_linght"),o.blendMode=egret.BlendMode.ADD;var r=n.x+44,s=n.y+44.5;o.setPosition(r,s),o.play(1),o.addPlayEndCallBack(function(){o&&o.parent&&e.comBones.realese(o)}.bind(this),this),this.fontEnlarge(t)}},o.prototype.clearAllMoneyLight=function(){for(;this.GroupMoneyLight.length;){var t=this.GroupMoneyLight.pop();e.comBones.realese(t)}},o.prototype.flyCoordinate=function(){for(var e=[],t=0;5>t;t++){var o=this["starPos"+t];o=4>t?this["PluteImage"+t]:this.UserImage;var i=this.localToGlobal(o.x,o.y);e.push(i)}return e},o.prototype.setInformation=function(e,t,o){if(e){0==e.avatar&&(e.avatar=1),this["PluteImage"+t].source="ui_headImg_"+e.avatar,this["PluteName"+t].text=e.nickname,this["Plute"+t].visible=!0,this.specialPlayerMoney(App.CommonUtils.money2Str(e.userbalance),t);for(var i=3;i>=o;i--)this["Plute"+i].visible=!1}},o.prototype.destroy=function(){t.prototype.destroy.call(this),R.removeAllTimeOut(this),this.initInfo(),this._mResultPoint=void 0},o}(BaseEuiComponent);e.MessageInfo=t,__reflect(t.prototype,"common.MessageInfo")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){var o=e.call(this,"MutipleScrollerSkin")||this;return o.BtnType=0,o}return __extends(t,e),t.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this.applyFunc("openVSlider"),egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:315},100)},t.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:315},100),this.BtnType=0},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.addEvent=function(){this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},t.prototype.removeEvent=function(){this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.MutipleScrller=t,__reflect(t.prototype,"common.MutipleScrller")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){var o=e.call(this,"PromptSkin")||this;return o.visible=!1,o}return __extends(t,e),t.prototype.closePoput=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.PromptMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.prompIsShow||(this.visible=!1)}.bind(this))},t.prototype.closeTip=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,egret.Tween.get(this.PromptTip).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.visible=!1}.bind(this))},t.prototype.confirmPoput=function(){App.SoundManager.playEffect("click_mp3"),this.closePoput(),1==this.promptType?this.applyFunc("confirmLimitBet"):2==this.promptType?this.applyFunc("confirmShowhand"):4==this.promptType?this.applyFunc("confirmShowLimitBet"):6==this.promptType&&this.applyFunc("confirmShowRecharge")},t.prototype.showPrompt=function(e,t,o,i){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=e,e){case 1:this.renderType1(t,o,i);break;case 2:this.renderType2(t);break;case 3:this.renderType3(),R.setTimeOnce(function(){this.closePoput()}.bind(this),this,1500)}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this.PromptMenu),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},t.prototype.renderText=function(){this.visible=!0},t.prototype.renderType1=function(e,t,o){this.BtnBox.visible=!0;var i=this.getTextField(39);i.textFlow=[{text:"当前牌桌投注限红为"},{text:t+""},{text:"~"},{text:o+""}],i.x=this.TextBox.width/2-i.textWidth/2,this.TextBox.addChild(i);var n=this.getTextField(80);n.textFlow=[{text:"是否投注 "},{text:e,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(n),n.x=this.TextBox.width/2-n.textWidth/2},t.prototype.renderType2=function(e){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"投注金额 "},{text:e,style:{textColor:16045931}}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t);var o=this.getTextField(80);o.textFlow=[{text:"是否梭哈?"}],this.TextBox.addChild(o),o.x=this.TextBox.width/2-o.textWidth/2},t.prototype.renderType3=function(){this.BtnBox.visible=!1;var e=this.getTextField(87);e.textFlow=[{text:"当前牌桌投注限红为"},{text:1e3},{text:"~"},{text:1e4}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e)},t.prototype.getTextField=function(e){var t=new egret.TextField;return t.y=e,t.fontFamily="Microsoft YaHei",t.size=22,t.textColor=16777215,t.textAlign=egret.HorizontalAlign.CENTER,t},t.prototype.showPromptBrnn=function(e,t){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=e,e){case 4:this.renderBrnnType4(t);break;case 6:this.renderBrnnType6()}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this.PromptMenu),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},t.prototype.renderBrnnType4=function(e){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"当前牌桌投注限红为"},{text:1},{text:"~"},{text:1e5}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t);var o=this.getTextField(80);o.textFlow=[{text:"是否投注 "},{text:e,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(o),o.x=this.TextBox.width/2-o.textWidth/2},t.prototype.renderBrnnType6=function(){this.BtnBox.visible=!0;var e=this.getTextField(39);e.textFlow=[{text:"余额不足，是否前往充值？"}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e)},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},t.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.Prompt=t,__reflect(t.prototype,"common.Prompt")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){var o=e.call(this,"PulsBtn")||this;return o.BtnType=0,o._maskRct=new egret.Rectangle(0,233,30,233),o._rectYYlist=[],o._closeUI.visible=!1,o._mandi.mask=o._maskRct,o}return __extends(t,e),t.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},t.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:297},100)},t.prototype.moveMeun=function(e){var t=e.localY,o=!1;this.setENDCoordinate(t,o)},t.prototype.setVSlide=function(e){this._thumb.y=e},t.prototype.setCoordinate=function(e,t,o){var i=o?e-18.62:e-28.5,n=o?e-6.62:e-17.5,r=o?e+12.5:e;this.setVSlide(i),this.setMask(r),this.setCardCoordinate(n,t)},t.prototype.setENDCoordinate=function(e,t){for(var o=0;o<this._rectYYlist.length;o++)e>=236?(e=t?this._rectYYlist[0]:235,this.setCoordinate(e,0,t)):e>=this._rectYYlist[9]&&e<this._rectYYlist[8]||e<this._rectYYlist[9]?(e=t?this._rectYYlist[9]:10,this.setCoordinate(e,9,t)):e>=this._rectYYlist[o]&&e<this._rectYYlist[o-1]&&(e=t?this._rectYYlist[o]:e,this.setCoordinate(e,o,t))},t.prototype.setCardCoordinate=function(e,t){var o=t+1;this._LabelMutiple0.text=o+"倍",this._GroupTip.y=e,this.applyFunc("changeMultiple",o)},t.prototype.countHeight=function(e){return this._rect_0.y-Number(this._rect_0.height/2)-e},t.prototype.smailBoxnate=function(){for(var e=0;10>e;e++)this._rectYYlist.push(this["_rect_"+e].y)},t.prototype.beginMeun=function(e){var t=e.localY,o=!1;this.setENDCoordinate(t,o)},t.prototype.endMeun=function(e){var t=e.localY,o=!0;this.setENDCoordinate(t,o),this.retractMenu()},t.prototype.outMeun=function(e){var t=e.localY;if(t>0){var o=235,i=!0;this.setENDCoordinate(o,i)}else{var n=this._rectYYlist[9]+10,i=!0;this.setENDCoordinate(n,i)}},t.prototype.setMask=function(e){var t=233-(251-e);0>=t?t=0:t>=233&&(t=233),this._maskRct.y=t,this._mandi.mask=this._maskRct},t.prototype.ShowsetChip=function(e){this.applyFunc("ShowsetChip")},t.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0},t.prototype.testtest=function(){},t.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},t.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.addEvent=function(){this.RepeatBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this._setChip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this),this.smailBoxnate()},t.prototype.removeEvent=function(){this.RepeatBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._setChip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.PulsBtn=t,__reflect(t.prototype,"common.PulsBtn")}(common||(common={}));var common;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=""+App.CommonUtils.money2Str(this.data.win_money),this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="ui_common_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);e.RankIcon=t,__reflect(t.prototype,"common.RankIcon")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"RankingSkin")||this;return o.visible=!1,o}return __extends(o,t),o.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1,this.visible=!0,this.RankBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu,300,0,1,function(){this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBg.visible=!0,this.ScrollBox.touchEnabled=!0),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},o.prototype.closePoput=function(){this.RankBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.RankMenu,300,0,function(){e.visible=!1}),App.MouseUtils.removeMouseWheel()},o.prototype.rankData=function(e){var t=new eui.ArrayCollection;e.forEach(function(e){t.addItem(e)}),this.refreshGameList(t)},o.prototype.refreshGameList=function(t){return this.gameList.itemRenderer=e.RankIcon,this.gameList.dataProvider=t,this.gameList.itemRendererSkinName="resource/games/public/skins/RankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},o.prototype.touchMove=function(e){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var t=this.scrollerItem.viewport;e.localY<24?t.scrollV=0:e.localY>t.height-24?t.scrollV=this.gameList.contentHeight-t.height:t.scrollV=(this.gameList.contentHeight-t.height)/(t.height-48)*(e.localY-24)},o.prototype.onMouseWheel=function(t){e.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},o.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},o.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.addEvent=function(){this.RankClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.removeEvent=function(){this.RankClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);e.Ranking=t,__reflect(t.prototype,"common.Ranking")}(common||(common={}));var common;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.Issue.text=this.data.issue,this.Winning.text=""+this.data.hit_money)},t}(eui.ItemRenderer);e.RecordIcon=t,__reflect(t.prototype,"common.RecordIcon")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"SetChip")||this;return o.BtnType=0,o.selectPos={},o.pickPos={},o._chipList=[],o._fiyChip=[],o.visible=!1,o._fiyChip=[],o}return __extends(o,t),o.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.pickChip.scaleX=this.pickChip.scaleY=0,this.visible=!0,App.EffectUtils.showUI(this.pickChip)},o.prototype.closePopup=function(){this.retractMenu()},o.prototype.confirmPoput=function(){this._fiyChip.length>=5?(this.applyFunc("getFiveChip",this._fiyChip),this.retractMenu()):App.ScrollTxtTips.showTip("请选择5个筹码，再点击确定，谢谢。")},o.prototype.retractMenu=function(){var e=this;App.EffectUtils.hideUI(this.pickChip,200,0,function(){e.visible=!1})},o.prototype.createChip=function(){for(var t=0;10>t;t++){var o=e.chipBtn.create();o.init(t),o.x=this.pickPos[t].x,o.y=this.pickPos[t].y,this.GroupBtn.addChild(o),this._chipList.push(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,t),this)}},o.prototype.touchBtn=function(e){if(App.SoundManager.playEffect("click_mp3"),this._fiyChip.length<6){for(var t=0;t<this._fiyChip.length;t++)if(this._fiyChip[t]==e)return this._fiyChip.splice(t,1),this.setFlyPos(),void this.flyChip(e);this._fiyChip.length<5&&(this._fiyChip.push(e),this.setFlyPos(),this.flyChip(e))}},o.prototype.getFiveChip=function(){return this._fiyChip},o.prototype.initChip=function(){for(var e=0;e<this._fiyChip.length;e++){var t=this._fiyChip[e],o=this._chipList[t],i=this.pickPos[t].x,n=this.pickPos[t].y;o.x=i,o.y=n}this._fiyChip=[]},o.prototype.getcoordinate=function(){for(var e=this._pickChip,t=this._pickChip0,o=this._selectChip,i=0;5>i;i++)this.pickPos[i+0]={x:e.x+99.67*i,y:e.y},this.pickPos[i+5]={x:t.x+99.67*i,y:t.y},this.selectPos[i+0]={x:o.x+105.35*i,y:o.y}},o.prototype.flyChip=function(e){var t=0,o=0;if(-1==this._fiyChip.indexOf(e)){this.initialPos(e);for(var i=0;i<this._fiyChip.length;i++)this.horizontalMove(i)}else for(var n=0;n<this._fiyChip.length;n++){var r=this._chipList[e];this._fiyChip[n]==e?(t=this.selectPos[n].x,o=this.selectPos[n].y,egret.Tween.get(r).to({x:t,y:o},300,egret.Ease.sineInOut)):this.horizontalMove(n)}},o.prototype.initialPos=function(e){var t=this._chipList[e],o=this.pickPos[e].x,i=this.pickPos[e].y;egret.Tween.get(t).to({x:o,y:i},300,egret.Ease.sineInOut)},o.prototype.horizontalMove=function(e){var t=this._chipList[this._fiyChip[e]],o=this.selectPos[e].x,i=this.selectPos[e].y;egret.Tween.get(t).to({x:o,y:i},300,egret.Ease.sineInOut)},o.prototype.setFlyPos=function(){this._fiyChip.length>=2&&this._fiyChip.sort()},o.prototype.setDefaultChip=function(e){this.initChip();for(var t=0;t<e.length;t++){var o=e[t],i=this._chipList[o];i.x=this.selectPos[t].x,i.y=this.selectPos[t].y}this._fiyChip=[].concat(e)},o.prototype.clearChip=function(){for(var t=this._chipList;t.length;){var o=t.pop();o&&e.chipBtn.release(o)}},o.prototype.clearflyChip=function(){this._fiyChip.length=0},o.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},o.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this.clearChip(),this.clearflyChip(),this.selectPos={},this.pickPos={},e.chipBtn.cleanchipBtnPool()},o}(BaseEuiComponent);e.SetChip=t,__reflect(t.prototype,"common.SetChip")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"ToolBarSkin")||this;return o.BtnType=0,o._approach=null,o.boneList=[],o.boneName=["light","sweep"],o}return __extends(o,t),o.prototype.initComponent=function(e,o){t.prototype.initComponent.call(this,e,o),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate},o.prototype.setOnlineLelf=function(){App.OffsetLeft(this.leftFive)},o.prototype.hideBtnForWebInsert=function(){this.BtnBack.visible=!App.isWebInsert},o.prototype.showMenu=function(e){var t=e.currentTarget;this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(t.source="ui_set_json.common_ui_xlh",egret.Tween.get(this.MenuBox).to({y:0},100)):(t.source="ui_set_json.common_ui_xl",egret.Tween.get(this.MenuBox).to({y:-245},100)),this.applyFunc("btnShowMenu")},o.prototype.moveCharge=function(){this.GroupRechage.right=112},o.prototype.changeOnlineNum=function(e){this.OnlineNum.text=e},o.prototype.hideBtnOnlineNum=function(){this.BtnOnline.visible=!1},o.prototype.backToLobby=function(){this.applyFunc("backToLobby")},o.prototype.showHelp=function(){this.applyFunc("showHelp")},o.prototype.showRank=function(){this.applyFunc("showRank")},o.prototype.showRecord=function(){this.applyFunc("showRecord")},o.prototype.showGameSet=function(){this.applyFunc("showGameSet")},o.prototype.rechargeMoney=function(){this.applyFunc("rechargeMoney")},o.prototype.onlineShake=function(){var e=this.BtnOnline,t=e.x,o=10,i=15;egret.Tween.get(e).to({rotation:o,x:i},50).call(function(){egret.Tween.get(e).to({rotation:0,x:t},50,egret.Ease.sineInOut)}.bind(this))},o.prototype.getAllMoneyLight=function(){var t=e.comBones.create();if(!t.parent){this.BtnOnline.addChild(t),t.updateId("money_linght"),t.blendMode=egret.BlendMode.ADD;var o=this.BtnOnline.getChildAt(0).x+44,i=this.BtnOnline.getChildAt(0).y+44.5;t.setPosition(o,i),t.play(1),t.addPlayEndCallBack(function(){t&&t.parent&&e.comBones.realese(t)},this)}},o.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},o.prototype.diceInit=function(){if(!this.boneList.length)for(var t=0;2>t;t++){var o=e.comBones.create();this.boneList.push(o)}},o.prototype.diceInitRenders=function(){for(var e=0;2>e;e++)if(!this.boneList[e].parent){var t=this.boneName[e];this.moneyGroup.addChild(this.boneList[e]),this.boneList[e].updateId(t);var o=43.5,i=43.5;this.boneList[e].setPosition(o,i),this.boneList[e].play(0)}},o.prototype.individualAward=function(){for(var t=function(){var t=new e.comBones,n="sweep"+i;t.updateId(n),o.moneyGroup.addChild(t);var r=o._recharge.x,s=o._recharge.y;t.setPosition(r,s),t.play(1),t.addPlayEndCallBack(function(){t.parent&&this.moneyGroup.removeChild(t)},o)},o=this,i=0;2>i;i++)t()},o.prototype.clearbone=function(){for(var t=this.boneList;t.length;){var o=t.pop();e.comBones.realese(o)}},o.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},o.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this,{}),App.CommonUtils.effectButton(this.BtnOnline,this.showRank,this,{}),App.CommonUtils.effectButton(this.BtnRecord,this.showRecord,this,{}),App.CommonUtils.effectButton(this.BtnSet,this.showGameSet,this,{}),App.CommonUtils.effectButton(this.BtnBack,this.backToLobby,this,{}),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this,{}),App.CommonUtils.effectButton(this.moneyGroup,this.rechargeMoney,this,{})},o.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.BtnOnline),App.CommonUtils.removeButton(this.BtnRecord),App.CommonUtils.removeButton(this.BtnSet),App.CommonUtils.removeButton(this.BtnBack),App.CommonUtils.removeButton(this.BtnHelp),App.CommonUtils.removeButton(this.moneyGroup)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),App.TimerManager.removeAll(this),this.clearbone()},o}(BaseEuiComponent);e.ToolBar=t,__reflect(t.prototype,"common.ToolBar")}(common||(common={}));var common;!function(e){var t=function(e){function t(t){return e.call(this,"VSliderSkin")||this}return __extends(t,e),t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(BaseEuiComponent);e.VSliderSkin=t,__reflect(t.prototype,"common.VSliderSkin")}(common||(common={}));var common;!function(e){var t=function(t){function o(e){var o=t.call(this,"WinningRecordSkin")||this;return o.visible=!1,o}return __extends(o,t),o.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.RecordMenu.scaleX=this.RecordMenu.scaleY=0,App.EffectUtils.showUI(this.RecordMenu,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},o.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.RecordMenu,200,0,function(){e.visible=!1}),App.MouseUtils.removeMouseWheel()},o.prototype.rankData=function(e){var t=new eui.ArrayCollection;
e.forEach(function(e){t.addItem(e)}),this.refreshGameList(t)},o.prototype.refreshGameList=function(t){return this.gameList.itemRenderer=e.RecordIcon,this.gameList.dataProvider=t,this.gameList.itemRendererSkinName="resource/games/public/skins/RecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},o.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},o.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.onMouseWheel=function(t){e.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.addEvent=function(){this.RecordClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},o.prototype.removeEvent=function(){this.RecordClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},o.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},o}(BaseEuiComponent);e.WinningRecord=t,__reflect(t.prototype,"common.WinningRecord")}(common||(common={}));var common;!function(e){var t=function(){function e(){}return e.LotteryRecordCreated="50001",e}();e.PublicConsts=t,__reflect(t.prototype,"common.PublicConsts")}(common||(common={}));var common;!function(e){var t=function(){function e(){}return e.touchScrollMove=function(e,t,o){var i=e.viewport,n=e.viewport.contentHeight,r=o/2;e.stopAnimation(),t.localY<r?i.scrollV=0:t.localY>i.height-r?i.scrollV=n-i.height:i.scrollV=(n-i.height)/(i.height-o)*(t.localY-r)},e.touchMouseWheel=function(e,t,o){var i=e.viewport;if(!(t.contentHeight-i.height<0)){var n=i.scrollV-o;0>n?i.scrollV=0:n>t.contentHeight-i.height?i.scrollV=t.contentHeight-i.height:i.scrollV-=o}},e.deepClone=function(e){return App.CommonUtils.copyDataHandler(e)},e.showTableLight=function(e,t,o,i,n){void 0===t&&(t=0),void 0===o&&(o=400),void 0===i&&(i=1),void 0===n&&(n=.7),egret.Tween.get(e).wait(0).to({alpha:i},t),egret.Tween.get(e).wait(100).to({alpha:n},o),egret.Tween.get(e).wait(550).to({alpha:i},t),egret.Tween.get(e).wait(650).to({alpha:n},o),egret.Tween.get(e).wait(1050).to({alpha:i},t)},e.numShake=function(e){egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},e}();e.GUtils=t,__reflect(t.prototype,"common.GUtils");var o=function(){function t(){this.allChipList=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createWinChip=function(t,o,i,n,r,s,a){void 0===a&&(a=5),Log.log("生成赢钱筹码",t,o);for(var p=s.globalToLocal(r.x,r.y),c=0;a>c;c++){var h=App.MathUtils.random(0,i.width),l=App.MathUtils.random(0,i.height),u=e.chipBtn.create();u.init(c),u.setNameNum(o);var d=Math.floor(n.x+h),m=Math.floor(n.y+l),g=Math.floor(p.x),y=Math.floor(p.y);s.addChild(u),u.x=i.x+i.width/2,u.y=i.y+i.height/2,u.scaleX=.5,u.scaleY=.5,u.alpha=0,u.setScore(),u.setFlyX(d),u.setFlyY(m),u.setFlyChipX(g),u.setFlyChipY(y),this.allChipList.push(u)}},t.prototype.flyWinChip=function(e){var t=this.allChipList;if(t&&t.length){for(var o=0;o<t.length;o++){var i=t[o];i.moveTo()}e&&App.SoundManager.playEffect(e)}},t.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();e.chipBtn.release(t)}},t._i=null,t}();e.GameWinChipMgr=o,__reflect(o.prototype,"common.GameWinChipMgr");var i=function(){function t(){this.coinBox=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initCoinBox=function(e,t){if(this.coinBox.length=0,e){for(var o=0;e>o;o++){var i={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(i)}if(t)for(var n=0;t>n;n++){var r={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(r)}}},t.prototype.showCoin=function(e,t,o,i,n){var r=this.getNumObj(o),s=Object.keys(r),a=t.$children[0],p=t.$children[1],c=t.$children[2];this.renderCoinType(s[0],r[s[0]],this.coinBox[e].coinBoxObj0,a,n),i>e&&(s.length>1?this.renderCoinType(s[1],r[s[1]],this.coinBox[e].coinBoxObj1,p,n):(p.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),s.length>2?this.renderCoinType(s[2],r[s[2]],this.coinBox[e].coinBoxObj2,c,n):(c.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0))},t.prototype.renderCoinType=function(e,t,o,i,n){e==o._coinType?t>o._coinNum?this.addCoin(i,e,t-o._coinNum,o,n):t<o._coinNum&&(i.removeChildren(),o._currentY=0,this.addCoin(i,e,t,o,n)):(i.removeChildren(),o._currentY=0,this.addCoin(i,e,t,o,n)),o._coinType=e,o._coinNum=t},t.prototype.addCoin=function(t,o,i,n,r){var s,a="";switch(o){case"sw":a="common_ui_10_png",s=1e5;break;case"w":a="common_ui_4_png",s=1e4;break;case"q":a="common_ui_8_png",s=1e3;break;case"b":a="common_ui_5_png",s=100;break;case"s":a="common_ui_2_png",s=10;break;case"g":a="common_ui_0_png",s=1}for(var p=0,c=-100,h=0,l=[],u=0;i>u;u++){var d=e.CoinFactory.i.createCoin();d.refresh(a,s,p,c),d.alpha=0,l.push(d),t.addChild(d)}for(var m,g=function(){0==n._currentY?h=0:y.randomNum()>.65?(m=y.randomNum(),h=m>.5?2.5:-2.5):h=0;var e=y;egret.Tween.get(l[f]).wait(150*f).to({y:n._currentY,x:h},150).call(function(){App.SoundManager.playEffect(r)},y),function(t){App.TimerManager.doTimer(150*t,1,function(){l[t].alpha=1},e)}(f),n._currentY-=5},y=this,f=0;f<l.length;f++)g()},t.prototype.randomNum=function(){return Math.random()},t.prototype.getNumObj=function(e){var t=String(e).split(""),o={sw:0,w:0,q:0,b:0,s:0,g:0};switch(t.length){case 1:o.g=Number(t[0]);break;case 2:o.s=Number(t[0]),o.g=Number(t[1]);break;case 3:o.b=Number(t[0]),o.s=Number(t[1]),o.g=Number(t[2]);break;case 4:o.q=Number(t[0]),o.b=Number(t[1]),o.s=Number(t[2]),o.g=Number(t[3]);break;case 5:o.w=Number(t[0]),o.q=Number(t[1]),o.b=Number(t[2]),o.s=Number(t[3]),o.g=Number(t[4]);break;case 6:o.sw=Number(t[0]),o.w=Number(t[1]),o.q=Number(t[2]),o.b=Number(t[3]),o.s=Number(t[4]),o.g=Number(t[5])}for(var i in o)0==o[i]&&delete o[i];return o},t._i=null,t}();e.GameShowBetChipMgr=i,__reflect(i.prototype,"common.GameShowBetChipMgr")}(common||(common={}));var RechargeConst=function(){function e(){}return e.RechargeTypeReq=2001e3,e.RechargeReq=2001001,e.RechargeRecordReq=2001002,e}();__reflect(RechargeConst.prototype,"RechargeConst");var RechargeController=function(e){function t(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.rechargeModel=new RechargeModel(this),this.rechargeProxy=new RechargeProxy(this,this.rechargeModel),this.rechargeView=new RechargeView(this,LayerManager.UI_Popup),App.ViewManager.register(LobbyViewConst.Recharge,this.rechargeView),this.setModel(this.rechargeModel)},t.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(RechargeConst.RechargeTypeReq,this.onRechargeTypeReq,this),this.registerFunc(RechargeConst.RechargeReq,this.onRechargeMoneyReq,this),this.registerFunc(RechargeConst.RechargeRecordReq,this.onRechargeRecordReq,this)},t.prototype.onRechargeTypeReq=function(){this.rechargeProxy.rechargeTypeReq()},t.prototype.onRechargeMoneyReq=function(e){this.rechargeProxy.rechargeMoneyReq(e)},t.prototype.onRechargeRecordReq=function(e){this.rechargeProxy.rechargeRecodReq(e)},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.rechargeProxy.addEvent()},t.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.rechargeProxy.removeEvent()},Object.defineProperty(t.prototype,"model",{get:function(){return this.rechargeModel},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.rechargeView.destroy(),this.rechargeProxy.destroy(),this.rechargeModel.destroy(),this.rechargeView=void 0,this.rechargeProxy=void 0,this.rechargeModel=void 0},t}(BaseController);__reflect(RechargeController.prototype,"RechargeController");var RechargeModel=function(e){function t(t){var o=e.call(this,t)||this;return o.payTypeListData={},o.payChannelListData={},o.curryPayInfo={},o.payTypeInfo=[],o.payTypeListData={},o.payChannelListData={},o.curryPayInfo={},o.payTypeInfo=[],o}return __extends(t,e),t.prototype.savePayTypeList=function(e){this.payTypeInfo=e;for(var t=0;t<e.length;t++){var o=e[t].pay_code;this.payTypeListData[o]=e[t].id,this.payChannelListData[o]=e[t].channel}Log.trace("保存充值渠道信息",this.payTypeInfo)},t.prototype.getPayTypeInfo=function(){return this.payTypeInfo},t.prototype.getCurrPayType=function(e){var t=e;return this.payTypeListData[t]},t.prototype.getCurrPayChannel=function(e){return this.payChannelListData[e]},t.prototype.setCurrPayInfo=function(e,t){this.curryPayInfo={channel_id:e[t].channel_id,max_limit:e[t].max_limit,min_limit:e[t].min_limit,pay_code:e[t].pay_code,name:e[t].name}},t.prototype.getCurrPayInfo=function(){return this.curryPayInfo},t.prototype.destroy=function(){this.payTypeListData=void 0,this.payChannelListData=void 0,this.curryPayInfo=void 0,this.payTypeInfo=void 0},t}(BaseModel);__reflect(RechargeModel.prototype,"RechargeModel");var RechargeProxy=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.rechargeTypeReq=function(){var e={token:GamePlayerMgr.i.getPlayer().getToken()};this.send(CommonProxyConst.Lobby_RechargeType,e),App.EasyLoading.showOnTimeOut(),Log.trace("充值类型请求")},t.prototype.rechargeTypeAck=function(e){App.isWebDecorate||(Log.trace("rechargeTypeAck",e),this.model.savePayTypeList(e.pay_types),App.MessageCenter.dispatch("rechargeTypeAck",e.pay_types),App.EasyLoading.hideLoading())},t.prototype.rechargeMoneyReq=function(e){var t={token:GamePlayerMgr.i.getPlayer().getToken(),pay_channel:e.pay_channel,money:e.money,bank_code:e.bank_code,pay_type:e.pay_type};Log.trace("rechargeMoneyReq",t),this.send(CommonProxyConst.Lobby_RechargeMoney,t),App.EasyLoading.showOnTimeOut()},t.prototype.rechargeMoneyAck=function(e){App.isWebDecorate||(App.EasyLoading.hideLoading(),Log.trace("rechargeMoneyAck",e.payurl),R.openRechargeUrlInside(e.payurl))},t.prototype.rechargeRecodReq=function(e){var t={token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type};this.send(CommonProxyConst.Lobby_RechargeRecord,t),App.EasyLoading.showOnTimeOut(),Log.trace("充值记录请求")},t.prototype.rechargeRecodAck=function(e){App.isWebDecorate||(Log.trace("充值记录返回",e),App.MessageCenter.dispatch("rechargeRecodAck",e),App.EasyLoading.hideLoading())},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){this.addListener(CommonProxyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.addListener(CommonProxyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.addListener(CommonProxyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},t.prototype.removeEvent=function(){this.removeListener(CommonProxyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.removeListener(CommonProxyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.removeListener(CommonProxyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseProxy);__reflect(RechargeProxy.prototype,"RechargeProxy");var RechargeRecordItemRender=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.tx&&(this.tx.textFlow=[{text:this.data.pay_type,style:{size:20,textColor:0}},{text:"   "+this.data.money+"\n",style:{size:23,textColor:16750848}},{text:this.data.order_no+"\n",style:{size:20,textColor:0}},{text:this.data.created_at+"\n",style:{size:23,textColor:0}},{text:this.data.status+"\n",style:{size:23,textColor:0}}])},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),Log.trace("测试富文本"),this.tx=new egret.TextField,this.tx.width=400,this.tx.x=166,this.tx.y=20,this.tx.lineSpacing=10,this.tx.textColor=16777215,this.tx.fontFamily="微软雅黑",this.tx.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this.tx),App.CommonUtils.effectButton(this.copyBtn,this.copyContent,this)},t.prototype.copyContent=function(){if(App.IsNative)R.setClipboardInfo(this.data.order_no);else try{var e=document.createElement("input");e.readOnly=!0,e.value=this.data.order_no,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)}catch(t){Log.trace(t)}App.ScrollTxtTips.showTip("已成功复制到粘贴板")},t.prototype.destroy=function(){App.CommonUtils.removeButton(this.copyBtn),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this.tx=void 0},t}(eui.ItemRenderer);__reflect(RechargeRecordItemRender.prototype,"RechargeRecordItemRender");var RechargeView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.toggleBtns=[],i.tabBtns={},i.inputValue=[100,300,500,1e3,1500,3e3,5e3,9999],i.skinName="RechargeSkin",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("初始化UI"),this.recordGroup.visible=!1,this.rechargeContent.visible=!1;var t=new eui.VerticalLayout;this.recordList.layout=t,this.recordScroller.viewport=this.recordList,this.recordScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.recordScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.recordCollection=new eui.ArrayCollection,this.recordList.itemRenderer=RechargeRecordItemRender,this.recharge_limTips.text="",this.errTips.visible=!1},t.prototype.createTabBtn=function(e){if(Log.trace("createTabBtn",e),0==e.length)return this.rechargeContent.visible=!1,void(this.errTips.visible=!0);this.rechargeContent.visible=!0,this.selectSign.visible=!1;for(var t=0;t<e.length;t++){var o=new MToggleButton,i=e[t].pay_code;o.setName(i),o.setContentText(e[t].name),o.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tabBtns[e[t].pay_code]=o,this.tabBtnGroup.addChild(o)}for(var n in this.tabBtnGroup.$children)this.toggleBtns.push(this.tabBtnGroup.$children[n]);var r=this.getBaseController(),s=r.getModel();this.toggleBtns[0].selected=!0,this.currPayChanelName=this.toggleBtns[0].name;var a=s.getCurrPayChannel(this.currPayChanelName);Log.trace("充值",a),this.channelProperty(a,!0),e[0].pay_code&&this.createChannelList(this.currPayChanelName)},t.prototype.createChannelList=function(e,t){Log.trace("创建充值渠道列表",e);for(var o,i,n=this.getBaseController(),r=n.getModel(),s=this.toggleBtns.length,a=r.getPayTypeInfo(),p=0,c=0;s>c;c++)if(t&&t.name==a[c].pay_code){this.channelProperty(r.getCurrPayChannel(t.name),!0);for(var h=r.getCurrPayChannel(t.name).length,l=0;h>l;l++){if(4>=l){var u=this.channelList.getChildAt(l);p+=u.getChildAt(1).width}Log.trace("当前宽度"+l,p)}break}if(p+=114,Log.trace("tempW",p),p>=this.channelList.width)i=new eui.TileLayout,i.orientation="rows",i.horizontalGap=32,i.verticalGap=15,i.paddingLeft=21,i.paddingTop=7,this.channelList.layout=i;else{i=new eui.BasicLayout,this.channelList.layout=i;for(var c=0;s>c;c++){var d=this.channelList.getChildAt(c);d.width=113,d.x=21+132*c}}if(this.channelList.validateNow(),!r.getCurrPayChannel(e))return void App.ScrollTxtTips.showTip("该充值方式暂时无渠道可用");o=r.getCurrPayChannel(e),this.selectDefaultChannel(this.channelList.getChildAt(0));for(var m=o.length,g=0;m>g;g++)this.channelList.getChildAt(g).visible=!0;for(var g=9;g>=m;g--)this.channelList.getChildAt(g).visible=!1},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.recordCloseBtn,this.closeRecord,this),App.CommonUtils.effectButton(this.confirmBtn,this.onConfirm,this),App.CommonUtils.effectButton(this.clear,this.onClearInput,this),this.rechargeMoneyInput.addEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var o=this.numInput.$children[t];App.CommonUtils.effectButton(o,this.onNumBtnClick,this,this.inputValue[t])}this.recordAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordFailed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordSucceed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),App.MessageCenter.addListener("rechargeTypeAck",this.createTabBtn,this),App.MessageCenter.addListener("rechargeRecodAck",this.createRecordList,this);for(var i=0;10>i;i++){var n=this.channelList.getChildAt(i);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectChannel,this)}},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.recordCloseBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.clear),this.rechargeMoneyInput.removeEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var o=this.numInput.$children[t];App.CommonUtils.removeButton(o)}for(var t in this.tabBtnGroup.$children){var o=this.tabBtnGroup.$children[t];o.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this)}this.recordAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordFailed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordSucceed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),App.MessageCenter.removeListener("rechargeTypeAck",this.createTabBtn,this),App.MessageCenter.removeListener("rechargeRecodAck",this.createRecordList,this);for(var i=0;10>i;i++){var n=this.channelList.getChildAt(i);n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectChannel,this)}},t.prototype.open=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.open.call(this,t),Log.trace("打开界面"),this.applyFunc(RechargeConst.RechargeTypeReq),App.EffectUtils.showUI(this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this;App.EffectUtils.hideUI(this,200,0,function(){o.closeView(e)})},t.prototype.selectChannel=function(e){var t=this.getBaseController(),o=t.getModel();this.selectSign.x=e.currentTarget.x,this.selectSign.y=e.currentTarget.y,this.selectSign.width=e.currentTarget.getChildAt(0).width;var i=o.getCurrPayChannel(this.currPayChanelName),n=Number(e.currentTarget.name);if(0!=i.length){this.selectSign.visible=!0,o.setCurrPayInfo(i,n);var r=o.getCurrPayInfo();this.recharge_limTips.text="充值范围"+r.min_limit+"-"+r.max_limit+"元,比例为1:1"}},t.prototype.selectDefaultChannel=function(e){var t=this.getBaseController(),o=t.getModel();this.selectSign.x=e.x,this.selectSign.y=e.y,e.getChildAt(1).width<=113?(e.getChildAt(0).width=113,this.selectSign.width=113,e.getChildAt(1).x=(113-e.getChildAt(1).width)/2,e.$setWidth(113)):(e.getChildAt(1).x=0,e.$setWidth(e.getChildAt(1).width),e.getChildAt(0).width=e.getChildAt(1).width,this.selectSign.width=e.getChildAt(1).width);var i=o.getCurrPayChannel(this.currPayChanelName);if(0!=i.length){this.selectSign.visible=!0;var n=Number(e.name);o.setCurrPayInfo(i,n);var r=o.getCurrPayInfo();this.recharge_limTips.text="充值范围"+r.min_limit+"-"+r.max_limit+"元,比例为1:1"}},t.prototype.onConfirm=function(){var e=this.getBaseController(),t=e.getModel(),o=t.getCurrPayInfo(),i={pay_channel:o.channel_id,money:Number(this.rechargeMoneyInput.text),bank_code:o.pay_code,pay_type:t.getCurrPayType(this.currPayChanelName)};return o.channel_id?Number(this.rechargeMoneyInput.text)<o.min_limit?void App.ScrollTxtTips.showTip("该充值方式最低限额为"+o.min_limit):Number(this.rechargeMoneyInput.text)>o.max_limit?void App.ScrollTxtTips.showTip("该充值方式最大限额为"+o.max_limit):void(this.rechargeMoneyInput.text&&this.applyFunc(RechargeConst.RechargeReq,i)):void App.ScrollTxtTips.showTip("请点击界面上方选择框,选择一个充值渠道")},t.prototype.onNumBtnClick=function(e){Log.trace("value",e),this.promptDisplay.visible=!1,Number(this.rechargeMoneyInput.text)+e<1e4?this.rechargeMoneyInput.text=Number(this.rechargeMoneyInput.text)+e+"":(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},t.prototype.toggleChangeHandler=function(e){Log.trace("tabBtn绑定事件");for(var t=0;t<this.toggleBtns.length;t++){var o=this.toggleBtns[t];o.selected=o==e.target}var i=e.currentTarget;this.currPayChanelName=i.name,this.selectSign.visible=!1;var n=this.getBaseController(),r=n.getModel(),s=r.getCurrPayInfo();s.channel_id="",this.recharge_limTips.text="",this.createChannelList(this.currPayChanelName,i)},t.prototype.channelProperty=function(e,t){var o=e.length;Log.trace("渠道属性设置",o);for(var i=0;o>i;i++){var n=this.channelList.getChildAt(i);n.visible=t;var r=n.getChildAt(1);r.text=e[i].name;var s=n.getChildAt(0);r.width<=113?(s.width=113,r.x=(113-r.width)/2):(r.x=0,s.width=r.width)}},t.prototype.onEditableInput=function(){this.promptDisplay.visible=!1,Log.trace("数值改变",this.rechargeMoneyInput.text),Number(this.rechargeMoneyInput.text)>1e4&&(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},t.prototype.onEditableOut=function(){this.rechargeMoneyInput.text||(this.promptDisplay.visible=!0,Number(this.rechargeMoneyInput.text)>=1e4&&(this.rechargeMoneyInput.text="10000"))},t.prototype.onClearInput=function(){this.rechargeMoneyInput.text="",this.promptDisplay.visible=!0},t.prototype.closeView=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.toggleBtns.length=0,this.tabBtnGroup.removeChildren(),this.onClearInput(),App.ViewManager.closeView(this)},t.prototype.openRecord=function(){this.recordGroup.visible=!0;var e={type:3};this.applyFunc(RechargeConst.RechargeRecordReq,e),this.rechargeMainGroup.cacheAsBitmap=!0},t.prototype.onRecord=function(e){var t={type:0};switch(e.currentTarget){case this.recordAll:t.type=3,this.recordAllTxt.textColor=14864300,this.recordSucceedTxt.textColor=13222851,this.recordFailedTxt.textColor=13222851;break;case this.recordFailed:t.type=2,this.recordAllTxt.textColor=13222851,this.recordSucceedTxt.textColor=13222851,this.recordFailedTxt.textColor=14864300;break;case this.recordSucceed:t.type=1,this.recordAllTxt.textColor=13222851,this.recordSucceedTxt.textColor=14864300,this.recordFailedTxt.textColor=13222851}this.applyFunc(RechargeConst.RechargeRecordReq,t)},t.prototype.createRecordList=function(e){this.recordCollection.refresh();var t=e,o=this.initListData(t);this.recordCollection.replaceAll(o),this.recordList.dataProvider=this.recordCollection,this.recordCollection.refresh()},t.prototype.initListData=function(e){Log.trace("充值记录列表",e);for(var t=[],o=0;o<e.list.length;o++)t[o]={created_at:App.DateUtils.getFormatBySecond(1e3*Number(e.list[o].created_at),2),order_no:e.list[o].order_no,pay_type:e.list[o].pay_type,status:e.list[o].status,money:e.list[o].money/1e4};return t},t.prototype.closeRecord=function(){this.recordGroup.visible=!1,this.rechargeMainGroup.cacheAsBitmap=!1},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseEuiView);__reflect(RechargeView.prototype,"RechargeView");var RedPacketConst=function(){function e(){}return e.getTypeStr=function(e){var t;switch(e){case 1001:t="10包1倍";break;case 715:t="7包1.5倍";break;case 52:t="5包2倍"}return t},e.showRedEnvelopeReq=3001e3,e.fastGrabRedEnvelopeReq=3001001,e.layMineReq=3001002,e.grabRedEnvelopeReq="3001003",e.redEnvelopeIncomeReq=3001004,e.recvIncomeReq=3001005,e.seeDetailsReq="3001006",e.showRedEnvelopeBack="showRedEnvelopeBack",e.grabRedEnvelopeBack="grabRedEnvelopeBack",e.redEnvelopeIncomeBack="redEnvelopeIncomeBack",e.recvIncomeBack="recvIncomeBack",e.seeDetailsBack="seeDetailsBack",e.Open_View="HongBao_Open_View",e.newRedEnvelopeNotity="newRedEnvelopeNotity",e.layMineBack="layMineBack",e.expiredRedEnvelopeNotify="expiredRedEnvelopeNotify",e.infoStatusChange="infoStatusChange",e}();__reflect(RedPacketConst.prototype,"RedPacketConst");var RedPacketController=function(e){function t(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.redPacketModel=new RedPacketModel(this),this.redPacketProxy=new RedPacketProxy(this,this.redPacketModel),this.redPacketView=new RedPacketView(this,LayerManager.UI_Popup),App.ViewManager.register(LobbyViewConst.RedPacket,this.redPacketView),this.setModel(this.redPacketModel)},t.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(RedPacketConst.showRedEnvelopeReq,this.showRedEnvelopeReq,this),this.registerFunc(RedPacketConst.fastGrabRedEnvelopeReq,this.fastGrabRedEnvelopeReq,this),this.registerFunc(RedPacketConst.layMineReq,this.layMineReq,this),this.registerFunc(RedPacketConst.redEnvelopeIncomeReq,this.redEnvelopeIncomeReq,this),this.registerFunc(RedPacketConst.recvIncomeReq,this.recvIncomeReq,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeReq,this.grabRedEnvelopeReq,this),App.MessageCenter.addListener(RedPacketConst.seeDetailsReq,this.seeDetailsReq,this)},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.redPacketProxy.addEvent()},t.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.redPacketProxy.removeEvent(),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeReq,this.grabRedEnvelopeReq,this),App.MessageCenter.removeListener(RedPacketConst.seeDetailsReq,this.seeDetailsReq,this)},t.prototype.showRedEnvelopeReq=function(e){this.redPacketProxy.sendShowEnvelopeReq(e)},t.prototype.fastGrabRedEnvelopeReq=function(e){this.redPacketProxy.sendFastGrapReq(e)},t.prototype.layMineReq=function(e,t,o){this.redPacketProxy.sendLayMineReq(e,t,o)},t.prototype.grabRedEnvelopeReq=function(e){this.redPacketProxy.sendGrabRedEnvelopeReq(e)},t.prototype.redEnvelopeIncomeReq=function(){this.redPacketProxy.sendIncomeReq()},t.prototype.recvIncomeReq=function(){this.redPacketProxy.sendRecvIncomeReq()},t.prototype.seeDetailsReq=function(e){this.redPacketProxy.sendSeeDetailsReq(e)},Object.defineProperty(t.prototype,"model",{get:function(){return this.redPacketModel},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.redPacketView.destroy(),this.redPacketProxy.destroy(),this.redPacketModel.destroy(),this.redPacketView=void 0,this.redPacketProxy=void 0,this.redPacketModel=void 0},t}(BaseController);__reflect(RedPacketController.prototype,"RedPacketController");var RedPacketModel=function(e){function t(t){var o=e.call(this,t)||this;return o.redPackListData={},o}return __extends(t,e),t.prototype.saveRedPackList=function(e){for(var t=0;t<e.length;t++){var o=e[t].id;this.redPackListData[o]=e[t]}},t.prototype.getCurrRedPackInfo=function(e){return this.redPackListData[e]},t.prototype.destroy=function(){this.redPackListData=void 0},t}(BaseModel);__reflect(RedPacketModel.prototype,"RedPacketModel");var RedPacketProxy=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){this.addListener(CommonProxyConst.Lobby_ShowRedEnvelope_Back,this.showRedEnvelopeBack,this),this.addListener(CommonProxyConst.Lobby_FastGrabRedEnvelope_Back,this.fastGrabBack,this),this.addListener(CommonProxyConst.Lobby_LayMine_Back,this.layMineBack,this),this.addListener(CommonProxyConst.Lobby_GrabRedEnvelope_Back,this.grabRedEnvelopeBack,this),this.addListener(CommonProxyConst.Lobby_RedEnvelopeIncome_Back,this.incomeBack,this),this.addListener(CommonProxyConst.Lobby_RecvIncome_Back,this.recvIncomeBack,this),this.addListener(CommonProxyConst.Lobby_SeeDetails_Back,this.seeDetailsBack,this),this.addListener(CommonProxyConst.Lobby_NewRedEnvelopeNotify,this.newRedEnvelopeNotify,this),this.addListener(CommonProxyConst.Lobby_ExpiredRedEnvelopeNotify,this.expiredRedEnvelopeNotify,this)},t.prototype.removeEvent=function(){this.removeListener(CommonProxyConst.Lobby_ShowRedEnvelope_Back,this.showRedEnvelopeBack,this),this.removeListener(CommonProxyConst.Lobby_FastGrabRedEnvelope_Back,this.fastGrabBack,this),this.removeListener(CommonProxyConst.Lobby_LayMine_Back,this.layMineBack,this),this.removeListener(CommonProxyConst.Lobby_GrabRedEnvelope_Back,this.grabRedEnvelopeBack,this),this.removeListener(CommonProxyConst.Lobby_RedEnvelopeIncome_Back,this.incomeBack,this),this.removeListener(CommonProxyConst.Lobby_RecvIncome_Back,this.recvIncomeBack,this),this.removeListener(CommonProxyConst.Lobby_SeeDetails_Back,this.seeDetailsBack,this),this.removeListener(CommonProxyConst.Lobby_NewRedEnvelopeNotify,this.newRedEnvelopeNotify,this),this.removeListener(CommonProxyConst.Lobby_ExpiredRedEnvelopeNotify,this.expiredRedEnvelopeNotify,this)},t.prototype.showRedEnvelopeBack=function(e){Log.trace("红包列表返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(RedPacketConst.showRedEnvelopeBack,e)},t.prototype.fastGrabBack=function(){App.EasyLoading.hideLoading()},t.prototype.layMineBack=function(e){Log.trace("埋雷返回",e.errcode),App.MessageCenter.dispatch(RedPacketConst.layMineBack,e),R.sendPlayerAction("HBsent_seccess"),App.EasyLoading.hideLoading()},t.prototype.grabRedEnvelopeBack=function(e){Log.trace("抢红包返回",e),App.isInGame?R.sendPlayerAction("HBgrab_ingame"):R.sendPlayerAction("HBgrab_HB"),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(RedPacketConst.grabRedEnvelopeBack,e),e.hit&&R.sendPlayerAction("HBgrab_boom")},t.prototype.incomeBack=function(e){Log.trace("收益返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(RedPacketConst.redEnvelopeIncomeBack,e)},t.prototype.recvIncomeBack=function(e){Log.trace("领取收益返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(RedPacketConst.recvIncomeBack,e)},t.prototype.seeDetailsBack=function(e){Log.trace("查看详情返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(RedPacketConst.seeDetailsBack,e)},t.prototype.newRedEnvelopeNotify=function(e){App.MessageCenter.dispatch(RedPacketConst.newRedEnvelopeNotity,e)},t.prototype.expiredRedEnvelopeNotify=function(e){App.MessageCenter.dispatch(RedPacketConst.expiredRedEnvelopeNotify,e)},t.prototype.sendFastGrapReq=function(e){App.EasyLoading.showOnTimeOutDealy();var t=GamePlayerMgr.i.getPlayer().getUserId();Log.trace("请求设置快捷抢红包",t,",yes:",e);var o={uid:t,yes:e};this.send(CommonProxyConst.Lobby_FastGrabRedEnvelope,o),e&&R.sendPlayerAction("HBgrab_fast")},t.prototype.sendShowEnvelopeReq=function(e){App.EasyLoading.showOnTimeOutDealy();var t=GamePlayerMgr.i.getPlayer().getUserId();Log.trace("请求红包列表"+t,",yes:",e);var o={uid:t,yes:e};this.send(CommonProxyConst.Lobby_ShowRedEnvelope,o)},t.prototype.sendLayMineReq=function(e,t,o){App.EasyLoading.showOnTimeOutDealy(),Log.trace("埋雷请求typeNum:",e[0]+",amount=",e[1],",layNum=",e[2]);var i={type:e[0],amount:e[1],mine_number:e[2]};this.send(CommonProxyConst.Lobby_LayMine,i),1001==i.type?R.sendPlayerAction("HBsent_10"):715==i.type?R.sendPlayerAction("HBsent_7"):52==i.type&&R.sendPlayerAction("HBsent_5")},t.prototype.sendGrabRedEnvelopeReq=function(e){App.EasyLoading.showOnTimeOutDealy();var t=GamePlayerMgr.i.getPlayer().getUserId(),o={uid:t,id:e};this.send(CommonProxyConst.Lobby_GrabRedEnvelope,o),Log.trace("抢红包请求")
},t.prototype.sendIncomeReq=function(){App.EasyLoading.showOnTimeOutDealy();var e=GamePlayerMgr.i.getPlayer().getUserId(),t={uid:e};this.send(CommonProxyConst.Lobby_RedEnvelopeIncome,t),Log.trace("显示收益请求")},t.prototype.sendRecvIncomeReq=function(){App.EasyLoading.showOnTimeOutDealy();var e=GamePlayerMgr.i.getPlayer().getUserId(),t={uid:e};this.send(CommonProxyConst.Lobby_RecvIncome,t),Log.trace("领取收益请求")},t.prototype.sendSeeDetailsReq=function(e){App.EasyLoading.showOnTimeOutDealy();var t=GamePlayerMgr.i.getPlayer().getUserId(),o={uid:t,id:e};this.send(CommonProxyConst.Lobby_SeeDetails,o),Log.trace("查看红包详情请求")},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseProxy);__reflect(RedPacketProxy.prototype,"RedPacketProxy");var RedPacketView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.min=10,i.skinName="resource/lobby/skins/RedPacketSkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.visible=!1,this.qipao.visible=!1,this.touchShape=new egret.Shape,this.touchShape.graphics.beginFill(16711935,0),this.touchShape.graphics.drawRect(0,0,App.StageUtils.getWidth(),App.StageUtils.getHeight()),this.touchShape.graphics.endFill(),this.addChildAt(this.touchShape,0),this.touchShape.touchEnabled=!0,Log.trace("初始化UI"),this.normalGroup.visible=!1,this.detailGroup.visible=!1,this.makeGroup.visible=!1,this.rullGroup.visible=!1,this.reciveGroup.visible=!1,this.removeChild(this.grabMask),this.pgscroller=new pageScroller,this.makeGroup.addChild(this.pgscroller),this.pgscroller.x=12,this.pgscroller.y=77,this.pgscroller.width=310,this.pgscroller.height=260,this.pgscroller.init(191,260,!1),this.refreshTypeList(),this.packMoney.text=""+this.min,this.grabBackGroup.visible=!1,this.payMoney.visible=!1,this.img_status.visible=!1,this.goldBone=RedPackGoldBone.create(),this.goldBone.initPlayedEndCallBack(this.removeGoldBone,this),this.goldBone.init(),this.showQipao()},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandler,this),App.EffectUtils.addEffectBtn(this.btnPacket,this.btnPacketHandler,this),App.EffectUtils.addEffectBtn(this.btncloseMake,this.claseMakeHandler,this),App.EffectUtils.addEffectBtn(this.btnTakeMoney,this.takeMoneyHandler,this),App.EffectUtils.addEffectBtn(this.btnRule,this.showRule,this),App.EffectUtils.addEffectBtn(this.btnReceive,this.btnReciveHandler,this),App.EffectUtils.addEffectBtn(this.BtnMake,this.btnMakeHandler,this),App.EffectUtils.addEffectBtn(this.btncloseRecive,this.btncloseReciveHandler,this),App.EffectUtils.addEffectBtn(this.btnRule2,this.showRule,this),this.touchShape.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHide,this),this.grabMask.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.hideThings,this),this.packSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btnQuickTake.addEventListener(egret.Event.CHANGE,this.setFastGrab,this),this.txt_rull.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.txt_rull2.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this);for(var t in this.numGroup.$children){var o=this.numGroup.$children[t];App.CommonUtils.effectButton(o,this.onNumBtnClick,this,o.name)}App.MessageCenter.addListener(RedPacketConst.showRedEnvelopeBack,this.showRedPackList,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.addListener(RedPacketConst.redEnvelopeIncomeBack,this.showIncome,this),App.MessageCenter.addListener(RedPacketConst.recvIncomeBack,this.reciveIncomeBack,this),App.MessageCenter.addListener(RedPacketConst.seeDetailsBack,this.seeDetails,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.refreshList,this),App.MessageCenter.addListener(RedPacketConst.layMineBack,this.layMineBackInfo,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.expiredRedEnvelope,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnClose,this.closeHandler,this),App.EffectUtils.removeEffectBtn(this.btnPacket,this.btnPacketHandler,this),App.EffectUtils.removeEffectBtn(this.btncloseMake,this.claseMakeHandler,this),App.EffectUtils.removeEffectBtn(this.btnTakeMoney,this.takeMoneyHandler,this),App.EffectUtils.removeEffectBtn(this.btnRule,this.showRule,this),App.EffectUtils.removeEffectBtn(this.btnReceive,this.btnReciveHandler,this),App.EffectUtils.removeEffectBtn(this.BtnMake,this.btnMakeHandler,this),App.EffectUtils.removeEffectBtn(this.btncloseRecive,this.btncloseReciveHandler,this),App.EffectUtils.removeEffectBtn(this.btnRule2,this.showRule,this),this.txt_rull2.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.txt_rull.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.touchShape.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHide,this),this.grabMask.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.hideThings,this),this.packSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btnQuickTake.removeEventListener(egret.Event.CHANGE,this.setFastGrab,this);for(var t in this.numGroup.$children){var o=this.numGroup.$children[t];App.CommonUtils.removeButton(o)}App.MessageCenter.removeListener(RedPacketConst.showRedEnvelopeBack,this.showRedPackList,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.removeListener(RedPacketConst.redEnvelopeIncomeBack,this.showIncome,this),App.MessageCenter.removeListener(RedPacketConst.recvIncomeBack,this.reciveIncomeBack,this),App.MessageCenter.removeListener(RedPacketConst.seeDetailsBack,this.seeDetails,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.refreshList,this),App.MessageCenter.removeListener(RedPacketConst.layMineBack,this.layMineBackInfo,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.expiredRedEnvelope,this)},t.prototype.open=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.open.call(this,t),this.visible=!1,Log.trace("打开界面"),this.applyFunc(RedPacketConst.showRedEnvelopeReq,!0)},t.prototype.closeHandler=function(){this.applyFunc(RedPacketConst.showRedEnvelopeReq,!1),this.hideThings(),this.resetMakeUIData(),App.EffectUtils.hideView(this.normalGroup,function(){this.visible=!1,App.ViewManager.closeView(this)}.bind(this)),Log.log("关闭按钮")},t.prototype.showRedPackList=function(e){e.multiple&&(this.visible=!0,this.scaleX=App.isScaleModeSpecial?App.fixUISX():1,App.EffectUtils.showView2(this.normalGroup,300,0,0,this.scaleX,1)),Log.log("请求红包列表返回，view内showRedPackList：data"+e);for(var t in e)for(var o in e[t])Log.log("data[i]:",e[t],",j=",o,",data[i][j]=",e[t][o]);this.btnQuickTake.selected=e.is_fast_red_envelope,this.packSlider.maximum=e.multiple,this.txtMax.text=""+e.multiple+"倍";var i=e.show;i=i.reverse(),this.listDatass=i;var n=new eui.ArrayCollection;for(var r in i)Log.log("prop:",r,"listData[prop]=",i[r]),n.addItem(i[r]);this.packList.itemRenderer=RedPacketItemRender,this.packList.dataProvider=n},t.prototype.grabRedPackBack=function(e){if(3==e.errcode)return void App.ScrollTxtTips.showTip("没有足够的余额抢红包");this.payMoney.visible=!1,this.img_status.visible=!1,this.grabBackGroup.addChildAt(this.grabMask,0),this.grabBackGroup.visible=!0,this.goldBone.x=this.grabBackGroup.width/2+30,this.goldBone.y=this.grabBackGroup.height/2,this.grabBackGroup.addChild(this.goldBone),this.goldBone.play(),this.grabpackType.text=RedPacketConst.getTypeStr(e.type),this.layNum.text="雷号"+e.mine_number,this.grabUname.text=e.nickname,1==e.errcode?this.grabMoney.text="已扫完":2==e.errcode?(this.grabMoney.text="",this.img_status.visible=!0,this.img_status.source="hongbaosaolei_hongbao_zhuangtai4"):0==e.errcode&&(this.grabMoney.text=App.CommonUtils.money2Str(e.income),e.hit&&(this.payMoney.visible=!0,this.img_status.visible=!0,this.img_status.source="hongbaosaolei_hongbao_zhuangtai5",this.payMoney.text="(-"+App.CommonUtils.money2Str(e.pay_amount)+")"),GamePlayerMgr.i.getPlayer().setMoney(e.balance));var t=12;1==e.errcode?t=13:2==e.errcode?t=14:0==e.errcode&&e.hit&&(t=11);for(var o=0;o<this.listDatass.length;o++)if(this.listDatass[o].id==e.id){this.listDatass[o].state=t,App.MessageCenter.dispatch(RedPacketConst.infoStatusChange,this.listDatass[o]),Log.log("抢红包返回，更新对应id=",e.id,"item.status:",t,",data.errcode=",e.errcode,",isHit=",e.hit);break}},t.prototype.expiredRedEnvelope=function(e){if(!this.listDatass)return void Log.trace("this.listDatass为空",this.listDatass);for(var t=0;t<this.listDatass.length;t++)if(Log.log("红包过期广播：",e.state,",id=",e.id+"=itenId=",this.listDatass[t].id+",state="+this.listDatass[t].state),this.listDatass[t].id==e.id){var o=this.listDatass[t].state;11!=o&&12!=o&&(this.listDatass[t].state=e.state,App.MessageCenter.dispatch(RedPacketConst.infoStatusChange,this.listDatass[t]));break}},t.prototype.refreshList=function(e){Log.log("view.refreshlist,新红包广播通知",e);var t={id:e.id,lay_mine_nickname:e.nickname,type:e.type,state:10,mine_number:-1};this.listDatass.length>=5&&this.listDatass.pop(),this.listDatass.unshift(t);var o=this.listDatass,i=new eui.ArrayCollection;for(var n in o)Log.log("prop:",n,"listData[prop]=",o[n]),i.addItem(o[n]);this.packList.itemRenderer=RedPacketItemRender,this.packList.dataProvider=i},t.prototype.showQipao=function(){t.isShowQipao||(t.isShowQipao=!0,this.qipao.visible=!0,this.normalGroup.addChildAt(this.grabMask,this.normalGroup.getChildIndex(this.qipao)-1),egret.Tween.get(this.qipao,{loop:!0}).to({y:274},100).wait(80).to({y:276},100))},t.prototype.clearQipao=function(){this.qipao.visible&&(this.qipao.visible=!1,egret.Tween.removeTweens(this.qipao),this.qipao.y=276,this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask))},t.prototype.showIncome=function(e){Log.log("展示未领取收益界面:"),this.addChildAt(this.grabMask,this.getChildIndex(this.reciveGroup)-1),this.reciveGroup.visible=!0,this.txtRecive.text=""+App.CommonUtils.money2Str(e.income)},t.prototype.reciveIncomeBack=function(e){this.goldBone.x=this.reciveGroup.width/2,this.goldBone.y=this.reciveGroup.height/2,this.reciveGroup.addChild(this.goldBone),this.goldBone.play(),this.txtRecive.text="0.00",GamePlayerMgr.i.getPlayer().setMoney(e.balance)},t.prototype.seeDetails=function(e){this.addChildAt(this.grabMask,this.getChildIndex(this.detailGroup)-1),this.detailGroup.visible=!0,this.txtDate.text=e.id,this.uName.text=e.lay_mine_nickname,this.packetType.text=RedPacketConst.getTypeStr(e.type)+"-雷号"+e.hit_number,this.txtMoney.text="￥"+App.CommonUtils.money2Str(e.amount);var t=this.rankDetailData(e),o=new eui.ArrayCollection;for(var i in t)Log.log("prop:",i,"listData[prop]=",t[i]),o.addItem(t[i]);this.detailList.itemRenderer=RedPacDetailItemRender,this.detailList.dataProvider=o},t.prototype.btnPacketHandler=function(){this.normalGroup.visible=!1,this.makeGroup.visible=!0},t.prototype.refreshTypeList=function(){Log.log("设置红包类型列表");var e={data_0:{type:1001,packNum:10,multiple:1},data_1:{type:715,packNum:7,multiple:1.5},data_2:{type:52,packNum:5,multiple:2}};this.pgscroller.initItems(PacketTypeItem,e)},t.prototype.claseMakeHandler=function(){this.makeGroup.visible=!1,this.resetMakeUIData(),this.normalGroup.visible=!0},t.prototype.resetMakeUIData=function(){this.pgscroller.resetIndex(),this.packMoney.text="10",this.thunderNum.text="0",this.packSlider.value=1},t.prototype.takeMoneyHandler=function(){this.applyFunc(RedPacketConst.redEnvelopeIncomeReq)},t.prototype.btnReciveHandler=function(){"0.00"!=this.txtRecive.text&&this.applyFunc(RedPacketConst.recvIncomeReq)},t.prototype.btnMakeHandler=function(){var e=App.CommonUtils.moneyC2S(parseInt(this.packMoney.text));Log.log("当前选择的红包类型：",this.pgscroller.currentData);var t=this.pgscroller.currentData.type,o=parseInt(this.thunderNum.text);this.applyFunc(RedPacketConst.layMineReq,[t,e,o])},t.prototype.layMineBackInfo=function(e){3==e.errcode?App.ScrollTxtTips.showTip("没有足够的余额埋雷"):(App.ScrollTxtTips.showTip("埋雷成功"),GamePlayerMgr.i.getPlayer().setMoney(e.balance))},t.prototype.btncloseReciveHandler=function(){this.hideThings()},t.prototype.showRule=function(){this.addChildAt(this.grabMask,this.getChildIndex(this.rullGroup)-1),this.rullGroup.visible=!0,R.sendPlayerAction("HBhelp")},t.prototype.onChangeValue=function(e){Log.log("拖动条数值变化：",this.packSlider.value),this.packMoney.text=""+this.packSlider.value*this.min},t.prototype.setFastGrab=function(){Log.log("勾选框：",this.btnQuickTake.selected),this.applyFunc(RedPacketConst.fastGrabRedEnvelopeReq,this.btnQuickTake.selected)},t.prototype.hideThings=function(){this.rullGroup.visible&&(this.rullGroup.visible=!1),this.reciveGroup.visible&&(this.reciveGroup.visible=!1,this.removeGoldBone()),this.grabBackGroup.visible&&(this.grabBackGroup.visible=!1,this.removeGoldBone()),this.detailGroup.visible&&(this.detailGroup.visible=!1),this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask),this.clearQipao()},t.prototype.removeGoldBone=function(){this.goldBone&&this.goldBone.parent&&(this.goldBone.stop(),this.goldBone.parent.removeChild(this.goldBone))},t.prototype.touchHide=function(){this.makeGroup.visible?(this.makeGroup.visible=!1,this.normalGroup.visible=!0):this.closeHandler()},t.prototype.onNumBtnClick=function(e){Log.trace("数字点击，value",e),this.thunderNum.text=e},t.prototype.rankDetailData=function(e){var t=e.hit_mine_players;t.sort(App.MathUtils.sortMoreFun(["ranking"],[0]));var o=e.grab_players;o.sort(App.MathUtils.sortMoreFun(["ranking"],[0]));for(var i in o)o[i].payout_amount=0;var n=[];if(o.length>0&&t.length>0){var r=(o[0].ranking,t[0].ranking,o[0].income),s=t[0].income;r>s&&n.push(o.shift())}var a=t.concat(o);n=n.concat(a);for(var i=0;i<n.length;i++)n[i].indexss=i;return n},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.touchShape&&(this.touchShape.parent&&this.touchShape.parent.removeChild(this.touchShape),this.touchShape=void 0),this.pgscroller&&(this.pgscroller.parent&&this.pgscroller.parent.removeChild(this.pgscroller),this.pgscroller=void 0),this.grabMask&&(this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask),this.grabMask=void 0),this.goldBone&&(this.goldBone.parent&&this.goldBone.parent.removeChild(this.goldBone),this.goldBone=void 0)},t}(BaseEuiView);__reflect(RedPacketView.prototype,"RedPacketView");var PacketTypeItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/lobby/skins/component/PackTypeItem.exml",t}return __extends(t,e),t.prototype.updateData=function(e,t){this.index=e,this.data=t,this.dataChanged()},t.prototype.dataChanged=function(){this.data&&Log.log("redPacketItem.data=",this.data.packNum),this.txtType.text=this.data.packNum+"包"+this.data.multiple+"倍"},Object.defineProperty(t.prototype,"itemIndex",{get:function(){return this.index},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),Log.trace("测试富文本")},t}(eui.Component);__reflect(PacketTypeItem.prototype,"PacketTypeItem",["eui.UIComponent","egret.DisplayObject"]);var pageScroller=function(e){function t(){var t=e.call(this)||this;return t.itemNum=0,t.stopMove=!1,t.curIndex=0,t.nextIndex=1,t.isMove=!1,t.mainGroup=new eui.Group,t.group0=new eui.Group,t.group1=new eui.Group,t.btn_pre=new eui.Image,t.btn_next=new eui.Image,t.btn_pre.source="hongbaosaolei_qumailei_jiantou1",t.btn_next.source="hongbaosaolei_qumailei_jiantou2",t}return __extends(t,e),t.prototype.initUi=function(){this.mainGroup.width=this.pageWid,this.mainGroup.height=this.pageHei,this.mainGroup.x=50,this.addChild(this.mainGroup),this.group0.width=this.group1.width=this.pageWid,this.group0.height=this.group1.height=this.pageHei,this.mainGroup.addChild(this.group0),this.mainGroup.addChild(this.group1),this.group1.x=this.pageWid,this.btn_pre.y=26,this.btn_next.x=50+this.pageWid,this.btn_next.y=26,this.addChild(this.btn_pre),this.addChild(this.btn_next)},t.prototype.init=function(e,t,o){this.pageWid=e,this.pageHei=t,this.initUi();var i=new egret.Shape;i.graphics.beginFill(16711935,1),i.graphics.drawRect(0,0,this.pageWid,this.pageHei),i.graphics.endFill(),i.x=this.mainGroup.x,i.y=this.mainGroup.y,this.addChildAt(i,0),this.mainGroup.mask=i,this.touchsp=new egret.Shape,this.touchsp.graphics.beginFill(16711935,0),this.touchsp.graphics.drawRect(0,0,this.pageWid-8,this.pageHei),this.touchsp.graphics.endFill(),this.touchsp.x=this.mainGroup.x+4,this.touchsp.y=this.mainGroup.y,this.addChild(this.touchsp),this.touchsp.touchEnabled=!0,this.touchsp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginTouch,this),this.btn_pre.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.preHandler,this),this.btn_next.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.nextHandler,this)},t.prototype.initItems=function(e,t){if(t){this.dataList=t;t.length;this.itemNum=3,this.item=new e,this.item.x=this.group0.x,this.item.y=this.group0.y,this.mainGroup.addChildAt(this.item,0),this.item.updateData(0,this.dataList.data_0),this.item1=new e,this.item1.x=this.group1.x,this.item1.y=this.group1.y,this.mainGroup.addChildAt(this.item1,0),this.item1.updateData(1,this.dataList.data_1)}},Object.defineProperty(t.prototype,"currentData",{get:function(){return this.dataList["data_"+this.curIndex]},enumerable:!0,configurable:!0}),t.prototype.beginTouch=function(e){this.touchBeginX=e.stageX,this.touchsp.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.toucheMove,this),this.touchsp.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},t.prototype.toucheMove=function(e){},t.prototype.touchEnd=function(e){var t=e.stageX-this.touchBeginX;0>t?this.moveDirection=-1:t>0&&(this.moveDirection=1),0!=t&&(this.isMove||this.moveGroup(this.pageWid),this.touchsp.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.toucheMove,this),this.touchsp.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this))},t.prototype.preHandler=function(){this.moveDirection=-1,this.isMove||this.moveGroup(this.pageWid)},t.prototype.nextHandler=function(){this.moveDirection=1,this.isMove||this.moveGroup(this.pageWid)},t.prototype.moveGroup=function(e){this.isMove=!0,-1==this.moveDirection?(this.preData(),this.item.x<=-this.pageWid&&(this.item.x=this.pageWid),this.item1.x<=-this.pageWid&&(this.item1.x=this.pageWid),this.item.x==this.pageWid?this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]):this.item1.updateData(this.curIndex,this.dataList["data_"+this.curIndex])):1==this.moveDirection&&(this.nextData(),this.item.x>=this.pageWid&&(this.item.x=-this.pageWid),this.item1.x>=this.pageWid&&(this.item1.x=-this.pageWid),this.item.x==-this.pageWid?this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]):this.item1.updateData(this.curIndex,this.dataList["data_"+this.curIndex]));var t=this.item.x+e*this.moveDirection,o=this.item1.x+e*this.moveDirection;Log.log("newx:",t,"newx1111=",o),egret.Tween.get(this.item).to({x:t},400,egret.Ease.quintOut).call(this.endMove,this,[this.item]),egret.Tween.get(this.item1).to({x:o},400,egret.Ease.quintOut).call(this.endMove,this,[this.item1])},t.prototype.endMove=function(e){egret.Tween.removeTweens(e),Log.log("动画完成，刷新数据：this.moveDirection=",this.moveDirection),-1==this.moveDirection?e.x<=-this.pageWid&&(e.x=this.pageWid):1==this.moveDirection&&e.x>=this.pageWid&&(e.x=-this.pageWid),this.isMove=!1},t.prototype.preData=function(){this.curIndex-=1,this.curIndex<0&&(this.curIndex=this.itemNum-1),Log.log("preData data():this.curIndex="+this.curIndex),-1==this.moveDirection},t.prototype.nextData=function(){this.curIndex+=1,this.curIndex>this.itemNum-1&&(this.curIndex=0),Log.log("next data():this.curIndex="+this.curIndex)},t.prototype.resetIndex=function(){this.curIndex=0,this.nextIndex=1,this.item.x=0,this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]),this.item1.x=this.pageWid,this.item1.updateData(this.nextIndex,this.dataList["data_"+this.nextIndex])},t}(eui.Component);__reflect(pageScroller.prototype,"pageScroller");var RedPacDetailItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/lobby/skins/component/RedPacDetailItem.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){this.txtUName.text=this.data.nickname;var t=App.CommonUtils.money2Str(this.data.income);0==this.data.indexss&&0==this.data.payout_amount&&(this.txtMoney.textFlow=[{text:""+t,style:{textColor:15038709,size:23,bold:!0}}]),this.data.payout_amount>0&&(this.txtMoney.textFlow=[{text:""+t,style:{textColor:13419901,size:23,bold:!0}},{text:" (-"+App.CommonUtils.money2Str(this.data.payout_amount)+")",style:{textColor:16777215,size:23,bold:!0}}]),this.data.indexss>0&&0==this.data.payout_amount&&(this.txtMoney.textFlow=[{text:""+t,style:{textColor:16777215,size:24,bold:!0}}])}},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),Log.trace("测试富文本")},t}(eui.ItemRenderer);__reflect(RedPacDetailItemRender.prototype,"RedPacDetailItemRender");var RedPackBone=function(e){function t(){var t=e.call(this,null)||this;return t._mIsOver=!1,t}return __extends(t,e),t.create=function(){return ObjectPool.pop("RedPackBone")},t.release=function(e){e.clean(),ObjectPool.push(e)},Object.defineProperty(t.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this._mIsOver=!1,this.initRes()},t.prototype.initRes=function(){var e="hongbao-donghua_2";this.initDBRes(e),this.armature=this.createArmature("Armature",e,t._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},t.prototype.initPlayedEndCallBack=function(e,t){this._mCallBack=e,this._mThisobj=t},t.prototype.setPosition=function(e,t){this.x=e,this.y=t},t.prototype.play=function(e){this.armature.stop(),this.armature.play(e,0)},t.prototype.armaturePlayEnd=function(e){this._mIsOver=!0},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},t.Animation="newAnimation",t.Animation1="newAnimation_1",t._mActionList=[t.Animation,t.Animation1],t}(base.BaseGameObject);__reflect(RedPackBone.prototype,"RedPackBone");var RedPacketItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="redPacketItem",App.MessageCenter.addListener(RedPacketConst.infoStatusChange,t.statusChange,t),t}return __extends(t,e),t.prototype.dataChanged=function(){switch(e.prototype.dataChanged.call(this),this.data&&Log.log("redPacketItem.data=",this.data.packNum),10==this.data.state?(this.pack_bg.source="hongbaosaolei_hongbao_hongbao",this.img_caiyuan.visible=!0,this.img_status.visible=!1,this.txtDetail.visible=!1):(this.pack_bg.source="hongbaosaolei_hongbao_hongbao2",this.img_caiyuan.visible=!1,this.img_status.visible=!0,this.txtDetail.visible=!0),this.data.state){case 10:break;case 11:this.img_status.source="hongbaosaolei_hongbao_zhuangtai5";break;case 12:this.img_status.source="hongbaosaolei_hongbao_zhuangtai2";break;case 13:this.img_status.source="hongbaosaolei_hongbao_zhuangtai3";break;case 14:this.img_status.source="hongbaosaolei_hongbao_zhuangtai4"}this.addEventListener(egret.TouchEvent.TOUCH_END,this.grabPack,this),this.paketType.text=RedPacketConst.getTypeStr(this.data.type),this.uName.text=this.data.lay_mine_nickname},t.prototype.statusChange=function(e){this.data.id==e.id&&(this.data=e,this.dataChanged())},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.txtDetail.visible=!1,Log.trace("测试富文本"),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.reqDetail,this)},t.prototype.reqDetail=function(){1==this.txtDetail.visible&&App.MessageCenter.dispatch(RedPacketConst.seeDetailsReq,this.data.id)},t.prototype.grabPack=function(){10==this.data.state&&App.MessageCenter.dispatch(RedPacketConst.grabRedEnvelopeReq,this.data.id)},t}(eui.ItemRenderer);__reflect(RedPacketItemRender.prototype,"RedPacketItemRender");var RedPackGoldBone=function(e){function t(){var t=e.call(this,null)||this;return t._mIsOver=!1,t}return __extends(t,e),t.create=function(){return ObjectPool.pop("RedPackGoldBone")},t.release=function(e){e.clean(),ObjectPool.push(e)},Object.defineProperty(t.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this._mIsOver=!1,this.initRes()},t.prototype.initRes=function(){var e="gold";this.initDBRes(e),this.armature=this.createArmature("Armature",e,t._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},t.prototype.initPlayedEndCallBack=function(e,t){this._mCallBack=e,this._mThisobj=t},t.prototype.setPosition=function(e,t){this.x=e,this.y=t},t.prototype.play=function(){this.armature.stop(),this.armature.play(t.Animation,3)},t.prototype.stop=function(){this._mIsOver=!1,this.armature.stop()},t.prototype.armaturePlayEnd=function(e){this._mCallBack&&this._mCallBack.call(this._mThisobj),Log.log("红包动画播放完毕，，"),this._mIsOver=!0},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._mIsOver=!1,this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},t.Animation="newAnimation",t._mActionList=[t.Animation],t}(base.BaseGameObject);__reflect(RedPackGoldBone.prototype,"RedPackGoldBone");var RegisterView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.skinName="resource/lobby/skins/RegisterSkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.getVerifyBtn.visible=!0,this.verifyCountdown.visible=!1},t.prototype.initData=function(){e.prototype.initData.call(this),this.codeData={0:"1wqe",1:"g2qe",2:"as2d",3:"kl24",4:"1rtu",5:"q14k",6:"7y6t",7:"hj4e",8:"88sb",9:"ghjk",10:"1lk7"}},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getVerifyBtn,this.getVerify,this),App.CommonUtils.effectButton(this.changeBtn,this.changeVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.closeView,this),App.CommonUtils.effectButton(this.btnMemberLogin,this.memberLogin,this),App.MessageCenter.addListener("logOutAfertRegist",this.registerSucess,this),this.accountInput.addEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this),this.passwordInput.addEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getVerifyBtn),App.CommonUtils.removeButton(this.changeBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.btnMemberLogin),App.MessageCenter.removeListener("logOutAfertRegist",this.registerSucess,this),this.accountInput.removeEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this),this.passwordInput.removeEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},t.prototype.onChangeInput=function(e){var t=e.currentTarget;return t.text.length>12?void(t.text=t.text.slice(0,12)):void(t.text=App.StringUtils.rejectValue(t.text))},t.prototype.switchTab=function(e){},t.prototype.getVerify=function(){if(!App.StringUtils.checkMobile(this.accountInput.text))return void App.ScrollTxtTips.showTip("输入的电话号码不正确，请重新输入");if(!this.passwordInput.text||this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的密码");if(!this.accountInput.text||this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的账号");App.ScrollTxtTips.showTip("验证码已发送到手机中，请查看"),this.verifyCountdown.visible=!0,this.getVerifyBtn.enabled=!1;var e=1;App.TimerManager.doTimer(1e3,60,function(){this.verifyCountdown.text="("+(60-e)+")",e++,e>=60&&(e=1,this.verifyCountdown.visible=!1,this.getVerifyBtn.enabled=!0)},this);var t;GamePlayerMgr.i.isVisiter&&(t={phone_no:this.accountInput.text}),Log.trace("获取验证码",t),App.MessageCenter.dispatch(ResgiterConstEvent.Resgiter_Get_Captcha,t)},t.prototype.changeVerify=function(){Log.trace(Math.ceil(10*Math.random())),Log.trace(this.codeData[0]),this.checkCode.text=this.codeData[Math.ceil(10*Math.random())]},t.prototype.confirm=function(){Log.trace("提交信息");var e=2;if(!this.accountInput.text||!this.passwordInput.text)return void App.ScrollTxtTips.showTip("账号或密码不能为空");if(this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("账号长度不能少于6位");if(this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("密码长度不能少于6位");if(this.verifyInput.text!=this.checkCode.text&&2!=e)return void App.ScrollTxtTips.showTip("验证码错误请重新输入");var t={loginame:this.accountInput.text,password:this.passwordInput.text,registerType:e,captcha:this.verifyInput.text,deviceid:GameBase.getDeviceId};App.MessageCenter.dispatch(ResgiterConstEvent.Register_Account_Req,t)},t.prototype.memberLogin=function(){App.SceneManager.runScene(SceneConsts.Login,{isVipLogin:!0})},t.prototype.open=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},t.prototype.closeView=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];App.EffectUtils.hideUI(this,200,0,function(){App.ViewManager.closeView(this)},this),Log.trace("关闭注册账号"),App.MessageCenter.dispatch(ResgiterConstEvent.Register_View_Close)},t.prototype.registerSucess=function(){GamePlayerMgr.i.exitCurrAccount(this.loginOut,this)},t.prototype.loginOut=function(){App.SceneManager.runScene(SceneConsts.Login)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseEuiView);__reflect(RegisterView.prototype,"RegisterView");var ResetLoginPasswordView=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.skinName="resource/lobby/skins/ResetLPSkin.exml",i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("重置登录密码",GamePlayerMgr.i.getPlayer().getIsRegistBytel()),GamePlayerMgr.i.getPlayer().getIsRegistBytel()||App.isInLogin||(this.tips.visible=!1,this.getverify_phone.visible=!1,this.phoneVerify_input.visible=!1,this.oldPassword_input.visible=!0,this.tempName.text="旧密码",this.phoneNum_input.prompt="请输入正确的会员账号")},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getverify_phone,this.getVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.phoneNum_input.addEventListener(egret.TextEvent.CHANGE,this.checkInput,this),this.newPassword_input.addEventListener(egret.TextEvent.CHANGE,this.checkInput,this),this.oldPassword_input.addEventListener(egret.TextEvent.CHANGE,this.checkInput,this),App.MessageCenter.addListener("onResetLoginPasswordAck",this.onResetLPAck,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getverify_phone),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),this.phoneNum_input.removeEventListener(egret.TextEvent.CHANGE,this.checkInput,this),this.newPassword_input.removeEventListener(egret.TextEvent.CHANGE,this.checkInput,this),this.oldPassword_input.removeEventListener(egret.TextEvent.CHANGE,this.checkInput,this),App.MessageCenter.removeListener("onResetLoginPasswordAck",this.onResetLPAck,this)},t.prototype.checkInput=function(e){var t=e.currentTarget;if(t.text.length>12)return void(t.text=t.text.slice(0,12));switch(e.currentTarget){case this.phoneNum_input:App.StringUtils.isChinese(this.phoneNum_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.phoneNum_input.text="",this.phoneNum_input.text.length>12&&(App.ScrollTxtTips.showTip("请输入6-12位的账号"),this.phoneNum_input.text=""));break;case this.newPassword_input:App.StringUtils.isChinese(this.newPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.newPassword_input.text=""),this.newPassword_input.text.length>12&&(App.ScrollTxtTips.showTip("请输入6-12位的新密码"),this.newPassword_input.text="");
break;case this.oldPassword_input:App.StringUtils.isChinese(this.oldPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.oldPassword_input.text=""),this.oldPassword_input.text.length>12&&(App.ScrollTxtTips.showTip("请输入6-12位的旧密码"),this.oldPassword_input.text="")}},t.prototype.getVerify=function(){Log.trace("获取验证码");var e;this.phoneNum_input.text&&(e={phone_no:this.phoneNum_input.text},App.MessageCenter.dispatch(ResgiterConstEvent.Resgiter_Get_Captcha,e))},t.prototype.onResetLPAck=function(){var e=GamePlayerMgr.i;this.phoneNum_input.text==e.getAccount1()&&(Log.trace("修改的是当前账号"),GameBase.saveGlobalData("Game_Login_Account1",this.phoneNum_input.text),GameBase.saveGlobalData("Game_Login_Password1",this.newPassword_input.text)),this.newPassword_input.text="",this.oldPassword_input.text="",this.phoneNum_input.text="",Log.trace("当前账号的账号密码",e.getAccount1(),e.getPw1())},t.prototype.confirm=function(){if(Log.trace("提交信息"),!this.phoneNum_input.text)return void App.ScrollTxtTips.showTip("请输入账号");if(!this.phoneVerify_input.text&&GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入验证码");if(!this.oldPassword_input.text&&!GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入旧密码");if(!this.newPassword_input.text||this.newPassword_input.text.length<6||this.newPassword_input.text.length>12)return void App.ScrollTxtTips.showTip("请输入6-12位新密码");var e={token:GamePlayerMgr.i.getPlayer().getToken(),loginame:this.phoneNum_input.text,newpassword:this.newPassword_input.text,oldpassword:this.oldPassword_input.text,captcha:this.phoneVerify_input.text};App.MessageCenter.dispatch(ResgiterConstEvent.Register_Reset_Password,e)},t.prototype.open=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this;App.EffectUtils.hideUI(this,200,0,function(){o.closeView(e)})},t.prototype.closeView=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Log.trace("关闭重置登录密码"),App.ViewManager.closeView(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(BaseEuiView);__reflect(ResetLoginPasswordView.prototype,"ResetLoginPasswordView");var DeskScene=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Desk)},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),App.ControllerManager.unregister(ControllerConst.Desk),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},t}(BaseScene);__reflect(DeskScene.prototype,"DeskScene");var GameScene=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Game)},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.SoundManager.stopAll(),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),GameModuleMgr.i.exitGame()},t}(BaseScene);__reflect(GameScene.prototype,"GameScene");var LayerManager=function(){function e(){}return e.Game_Bg=new BaseEuiLayer,e.Game_Main=new BaseEuiLayer,e.UI_Main=new BaseEuiLayer,e.UI_Popup=new BaseEuiLayer,e.UI_Message=new BaseEuiLayer,e.UI_Tips=new BaseEuiLayer,e}();__reflect(LayerManager.prototype,"LayerManager");var LoadingScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.initModule()},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Loading)},t.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Loading,new LoadingController)},t}(BaseScene);__reflect(LoadingScene.prototype,"LoadingScene");var LobbyScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){if(e.prototype.onEnter.call(this),StatisticsAction.i.FirstInLobby(),StatisticsAction.i.FirstAgentData(),App.isWebDecorate&&web_enterScene(SceneConsts.Lobby),!this._mLobbyEntrance){var t=egret.getDefinitionByName("lobby.Entrance.lobby");this._mLobbyEntrance=new t}this._mLobbyEntrance.enter()},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.PromTipsView.hide(),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),this._mLobbyEntrance&&this._mLobbyEntrance.exit()},t}(BaseScene);__reflect(LobbyScene.prototype,"LobbyScene");var LoginScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(t){e.prototype.onEnter.call(this),BridgeStatic.EntryIconViewScrollH=0,App.Socket.close(),App.isWebDecorate&&t&&!t.isWebClear&&web_socketClose(),App.ControllerManager.register(ControllerConst.Login,new LoginController(t))},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Login)},t}(BaseScene);__reflect(LoginScene.prototype,"LoginScene");var RoomScene=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Room)},t.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Room),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},t}(BaseScene);__reflect(RoomScene.prototype,"RoomScene");var IphoneXMatch=function(){function e(){}return e.checkIphoneX=function(){if(e.IsTestIphoneX&&(e._mOffsetLeft=50,e._mOffsetBottom=10),App.IsNative&&App.DeviceUtils.isIOS||e.checkIOSH5()){var t=window.innerWidth,o=window.innerHeight;t>=812&&o>=375&&(e._mOffsetLeft=50,e._mOffsetBottom=16)}},e.isIphoneX=function(){return e._mOffsetLeft>0},e.OffsetLeft=function(t){var o=e._mOffsetLeft;if(o)if(0!=t.x)t.x+=o;else if(egret.is(t,"eui.UIComponent")){var i=t;isNaN(i.left)?t.x+=o:i.left+=o}else t.x+=o},e.OffsetBottom=function(t){var o=e._mOffsetBottom;if(o)if(0!=t.y)t.y-=o;else if(egret.is(t,"eui.UIComponent")){var i=t;isNaN(i.bottom)?t.y-=o:i.bottom+=o}else t.y-=o},e.checkIOSH5=function(){return"undefined"!=typeof is_ios_h5&&is_ios_h5 instanceof Function&&is_ios_h5()>0?!0:!1},e.IsTestIphoneX=!1,e._mOffsetLeft=0,e._mOffsetBottom=0,e}();__reflect(IphoneXMatch.prototype,"IphoneXMatch");var PromSuperposeView=function(e){function t(){var t=e.call(this,null,LayerManager.UI_Tips)||this;return t._mPromList=[],t._mIsShow=!1,t.skinName="PromTipsSkin",t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.show=function(e,t,o,i,n,r){this._mPromList.push({str:e,funOnSure:t,funOnCancel:o,thisObj:i,isCancel:n,data:r}),this.parent||this.showTips()},t.prototype.showTips=function(){var e=this._mPromList;if(!(e.length<=0||this._mIsShow)){this._mIsShow=!0;var t=e.shift();this._mData=t.data,this._thisObj=t.thisObj,this._funOnSure=t.funOnSure,this._funOnCancel=t.funOnCancel,this.txtTips.text=t.str,this.fixBtn(t.isCancel),this.addEvent(),this.addToParent()}},t.prototype.onSure=function(e){this._mIsShow&&(this._funOnSure&&this._funOnSure.call(this._thisObj,this._mData),this.hide())},t.prototype.onCancel=function(e){this._mIsShow&&(this._funOnCancel&&this._funOnCancel.call(this._thisObj,this._mData),this.hide())},t.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnSure,this.onSure,this),App.EffectUtils.addEffectBtn(this.btnCancel,this.onCancel,this)},t.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnSure),App.EffectUtils.removeEffectBtn(this.btnCancel)},t.prototype.hide=function(){if(this._mIsShow){if(this._mIsShow=!1,this._mPromList.length>0)return void R.setTimeOut(function(){this.showTips()}.bind(this),this,100);this.removeFromParent(),this.removeEvent(),this._funOnCancel=void 0,this._funOnSure=void 0,this._thisObj=void 0,this._mData=void 0}},t.prototype.hideAll=function(){for(;this._mPromList.length;){var e=this._mPromList.pop();for(var t in e)e[t]=void 0}this.hide()},t.prototype.fixBtn=function(e){var t=e?!0:!1;this.btnCancel.visible=t,t?(this.btnSure.horizontalCenter=void 0,this.btnSure.x=416):this.btnSure.horizontalCenter=0},t._instance=null,t}(BaseEuiView);__reflect(PromSuperposeView.prototype,"PromSuperposeView");var PromTipsView=function(e){function t(){var t=e.call(this,null,LayerManager.UI_Tips)||this;return t.skinName="PromTipsSkin",t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.show=function(e,t,o,i,n){this._funOnSure=t,this._funOnCancel=o,this._thisObj=i,this.txtTips.text=e,this.fixBtn(n),this.addEvent(),this.addToParent(),this.scaleX=App.isScaleModeSpecial?App.fixUISX():1,App.EffectUtils.showView2(this.uView,300,0,0,this.scaleX,1)},t.prototype.transformTxtCancel=function(e){this.uTxtCancel.source=e},t.prototype.transformTxtSure=function(e){this.uTxtSure.source=e},t.prototype.onSure=function(e){this._funOnSure&&this._funOnSure.apply(this._thisObj),this.hide()},t.prototype.onCancel=function(e){this._funOnCancel&&this._funOnCancel.apply(this._thisObj),this.hide()},t.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnSure,this.onSure,this),App.EffectUtils.addEffectBtn(this.btnCancel,this.onCancel,this)},t.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnSure),App.EffectUtils.removeEffectBtn(this.btnCancel)},t.prototype.hide=function(){this.removeFromParent(),this.removeEvent(),this._funOnSure=void 0,this._funOnCancel=void 0,this._thisObj=void 0},t.prototype.fixBtn=function(e){var t=e?!0:!1;this.btnCancel.visible=t,t?(this.btnSure.horizontalCenter=void 0,this.btnSure.x=416):this.btnSure.horizontalCenter=0,this.uTxtSure.source="common_confirm",this.uTxtCancel.source="common_cancel"},t._instance=null,t}(BaseEuiView);__reflect(PromTipsView.prototype,"PromTipsView");var ToolView=function(e){function t(){var t=e.call(this,null,LayerManager.UI_Tips)||this;return t.skinName="ToolViewSkin",t.init(),t}return __extends(t,e),t.i=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.init=function(){this.addEvent(),this.addToParent()},t.prototype.addEvent=function(){this.btnProfile.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){e.currentTarget==this.btnProfile&&ProfileUtils.profile()},t._instance=null,t}(BaseEuiView);__reflect(ToolView.prototype,"ToolView");var ErrorTipsView=function(e){function t(){var t=e.call(this,null,LayerManager.UI_Tips)||this;return t.skinName="ErrorTipsSkin",t}return __extends(t,e),Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.show=function(e){this.txt.text=e,this.addEvent(),this.addToParent()},t.prototype.onCancel=function(e){this.hide()},t.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnClose,this.onCancel,this)},t.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnClose)},t.prototype.hide=function(){this.removeFromParent(),this.removeEvent()},t._instance=null,t}(BaseEuiView);__reflect(ErrorTipsView.prototype,"ErrorTipsView");var EasyLoading=function(e){function t(){var t=e.call(this,null,null)||this;return t.skinName="EasyLoadingSkin",t.init(),t}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.init=function(){this.initBone()},t.prototype.initBone=function(){var e=RES.getRes("easy_loading_ske_json"),t=RES.getRes("easy_loading_tex_json"),o=RES.getRes("easy_loading_tex_png"),i=dragonBones.EgretFactory.factory;i.parseDragonBonesData(e),i.parseTextureAtlasData(t,o),this._mAni=i.buildArmatureDisplay("Armature"),this.uPoint.addChild(this._mAni)},t.prototype.updateTxt=function(e){this.parent&&(this.txt.text=e)},t.prototype.txtVisible=function(e){void 0===e&&(e=!1),this.txt.visible=e},t.prototype.showReconnetTip=function(){var e=App.isInLoading||App.isInLogin?"":"正在重连中, 请稍等...";this.showLoading(e)},t.prototype.showOnTimeOutDealy=function(e,t,o,i,n){void 0===e&&(e=1200),void 0===t&&(t=1e4);var r=this;R.removeAllTimeOut(this),R.setTimeOutOnly(function(){r.showOnTimeOut(t,o,i,n)},this,e)},t.prototype.showOnTimeOut=function(e,t,o,i){void 0===e&&(e=1e4),this.showLoading(""),this._mCallBack=o,this._mThisObj=i,R.removeAllTimeOut(this),R.setTimeOut(this.onTimeOut.bind(this,t),this,e)},t.prototype.onTimeOut=function(e){App.PromTipsView.show(e?e:"请求超时！"),this.hideLoading(),this._mCallBack&&this._mCallBack.call(this._mThisObj)},t.prototype.showLoading=function(e){void 0===e&&(e=""),this.parent||(LayerManager.UI_Tips.addChild(this),this._mAni.animation.play("1",99999),this.updateTxt(e),this.txt.visible=!0)},t.prototype.hideLoading=function(){R.removeAllTimeOut(this),this.parent&&(LayerManager.UI_Tips.removeChild(this),this._mAni.animation.stop()),this._mCallBack=void 0,this._mThisObj=void 0},t._instance=null,t}(BaseEuiView);__reflect(EasyLoading.prototype,"EasyLoading");var ScrollTxtTips=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._mPool=[],this.touchEnabled=!1,this.touchChildren=!1},t.prototype.showTip=function(e){if(!(this.numChildren>=5)){var t=this._mPool.pop();t||(t=new ScrollTxt),t.setTxt(e),this.addChild(t),this.tween(t),this.parent||LayerManager.UI_Tips.addChild(this)}},t.prototype.cleanAll=function(){for(;this.numChildren;){var e=this.getChildAt(0);this.realese(e)}},t.prototype.tween=function(e){var t=e.y-60;egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut).wait(800).to({y:t,alpha:0},800,egret.Ease.backOut).call(this.realese,this,[e])},t.prototype.realese=function(e){egret.Tween.removeTweens(e),R.removeFromParent(e),this._mPool.push(e),this.numChildren<=0&&R.removeFromParent(this)},t._i=null,t}(eui.Component);__reflect(ScrollTxtTips.prototype,"ScrollTxtTips");var ScrollTxt=function(e){function t(){var t=e.call(this)||this;return t.skinName="ScrollTxtSkin",t.touchChildren=!1,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.setTxt=function(e){this.txt.text=e,this.scaleX=this.scaleY=this.alpha=0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=App.StageUtils.getWidth()/2,this.y=App.StageUtils.getHeight()/2,this.bg.width=Math.max(this.txt.textWidth+20,415)},t}(eui.Component);__reflect(ScrollTxt.prototype,"ScrollTxt");var ArrayUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.copy=function(e,t){var o=t;return t||(o=[]),o=o.concat(e)},t.prototype.equals=function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var o=0,i=e.length;i>o;o++){var n=e[o],r=t[o];if(n instanceof Array&&r instanceof Array){if(!this.equals(n,r))return!1}else if(n!=r)return!1}return!0},t.prototype.removeOfArray=function(e,t){var o=e.indexOf(t);o>=0&&e.splice(o,1)},t.prototype.sumOfArray=function(e){return e.reduce(function(e,t){return e+t})},t.prototype.stringOfArray=function(e){return e.join()},t.prototype.equals2=function(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(-1===t.indexOf(e[o]))return!1;return!0},t}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var BitmapUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.bitmap2Base64=function(e){var t=e.texture.toDataURL("image/*"),o=t.indexOf(";base64,");return 20>o&&(t=t.slice(o+8)),Log.info("base64 len:",t.length),t},t.prototype.base642Bitmap=function(e,t){egret.BitmapData.create("base64",t,function(t){Log.info("base64 back data ");var o=new egret.Texture;o.bitmapData=t,e.texture=o})},t.prototype.loadImageByUrl=function(e,t,o){var i=new egret.URLLoader;i.dataFormat=egret.URLLoaderDataFormat.BINARY,i.once(egret.Event.COMPLETE,function(i){var n=i.currentTarget,r=egret.BitmapData.create("arraybuffer",n.data);t.call(o,r),Log.log("loadImageByUrl ended:",e)},this),i.once(egret.IOErrorEvent.IO_ERROR,function(e){Log.error("loadImageByUrl error:",e),t.call(o)},this),i.load(new egret.URLRequest(e))},t}(BaseClass);__reflect(BitmapUtils.prototype,"BitmapUtils");var ColorFilters=function(){function e(){}return Object.defineProperty(e,"FilterGray",{get:function(){return e._mFilterGray||(e._mFilterGray=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])),e._mFilterGray},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FilterGold",{get:function(){return e._mFilterGold||(e._mFilterGold=new egret.ColorMatrixFilter([1,0,0,0,200,0,1,0,0,200,0,0,1,0,22,0,0,0,1,0])),e._mFilterGold},enumerable:!0,configurable:!0}),e}();__reflect(ColorFilters.prototype,"ColorFilters");var CommonUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.money=function(e){return Math.floor(e/100)/100},t.prototype.moneyself=function(e){return Math.floor(100*e)/100},t.prototype.money2Str=function(e){var t=""+Math.floor(e/100)/100,o=t.lastIndexOf(".");return-1==o?t+=".00":o==t.length-2&&(t+="0"),t},t.prototype.money2StrTwo=function(e){return""+Math.floor(e/100)/100},t.prototype.moneyC2S=function(e){return 1e4*e},t.prototype.isOut=function(e,t){return 0>e||e>GameBase.GameWidth?!0:0>t||t>GameBase.GameHeight?!0:!1},t.prototype.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var o=Object.keys(e),i=0,n=o.length;n>i;i++){var r=o[i];t[r]=this.copyDataHandler(e[r])}return t},t.prototype.deepCopyData=function(e){var t,o=Object.prototype.toString.call(e);if("[object Array]"===o){if(t=[],e.length>0)for(var i=0;i<e.length;i++)t.push(this.deepCopyData(e[i]))}else if("[object Object]"===o){t={};for(var i in e)t[i]=this.deepCopyData(e[i])}else t=e;return t},t.prototype.lock=function(){var e=StageUtils.getInstance().getStage();e.$children.forEach(function(e){e instanceof egret.DisplayObjectContainer&&(e.touchEnabled=e.touchChildren=!1)})},t.prototype.unlock=function(){var e=StageUtils.getInstance().getStage();e.$children.forEach(function(e){e instanceof egret.DisplayObjectContainer&&(e.touchEnabled=e.touchChildren=!0)})},t.prototype.labelIsOverLenght=function(e){var t="";return t=1e4>e?""+e:Math.floor(e/1e4)+"万"},t.prototype.int64ToNumber=function(e){return parseInt(e.toString())},t.prototype.getFileName=function(e){return e.substring(e.lastIndexOf("/")+1)},t.prototype.isNullOrUndefined=function(e){return!(e&&"null"!=e&&"undefined"!=e)},t.prototype.isJSON=function(e){try{if("object"==typeof JSON.parse(e))return!0}catch(t){}return!1},t.prototype.effectButton=function(e,t,o,i){EffectUtils.getInstance().addEffectBtn(e,t,o,i)},t.prototype.removeButton=function(e){EffectUtils.getInstance().removeEffectBtn(e)},t}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getFormatBySecond=function(e,t){return void 0===t&&(t=1),DateUt.getInstance().getFormatBySecond(e,t)},t}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var EffectUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.macIconShake=function(e,t){for(var o=[[20,300],[15,300],[10,300],[5,300]],i="egret.Tween.get("+e+")",n=0,r=o.length;r>n;n++)i+=".to({'y':"+t+"-"+o[n][0]+"}, "+o[n][1]+")",i+=".to({'y':"+t+"}, "+o[n][1]+")";return i+=";"},t.prototype.startFlicker=function(e,t){e.alpha=1,egret.Tween.get(e).to({alpha:0},t).to({alpha:1},t).call(this.startFlicker,this,[e,t])},t.prototype.stopFlicker=function(e){egret.Tween.removeTweens(e)},t.prototype.startHeartEffect=function(e,t){var o=e.s_scaleX=e.scaleX,i=e.s_scaleY=e.scaleY;egret.Tween.get(e,{loop:!0}).to({scaleX:.8*o,scaleY:.8*i},t).to({scaleX:o,scaleY:i},t)},t.prototype.stopHeartEffect=function(e){egret.Tween.removeTweens(e),e.scaleX=e.s_scaleX,e.scaleY=e.s_scaleY},t.prototype.showView=function(e,t,o,i,n,r){void 0===t&&(t=300),void 0===o&&(o=0),void 0===i&&(i=1),this.showView2(e,t,o,o,i,i,n,r)},t.prototype.hideView=function(e,t,o,i,n){void 0===i&&(i=200),void 0===n&&(n=0),egret.Tween.get(e).to({scaleX:n,scaleY:n},i,egret.Ease.backIn).call(function(){e.visible=!1,t&&t.call(o)})},t.prototype.showView2=function(e,t,o,i,n,r,s,a){void 0===t&&(t=300),void 0===o&&(o=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=1),e.visible=!0,e.scaleX=o,e.scaleY=i,egret.Tween.get(e).to({scaleX:n,scaleY:r},t,egret.Ease.backOut).call(function(){s&&s.call(a)})},t.prototype.showUI=function(e,t,o,i,n,r){void 0===t&&(t=300),void 0===o&&(o=0),void 0===i&&(i=1),this.showView(e,t,o,i,n,r)},t.prototype.hideUI=function(e,t,o,i,n){void 0===t&&(t=200),void 0===o&&(o=0),this.hideView(e,i,n,t,o)},t.prototype.addEffectBtn=function(e,t,o,i,n,r,s){function a(e){var t=e.currentTarget;t._touch_num_++,egret.Tween.get(t).to({scaleX:h*r,scaleY:l*s},50),n&&SoundManager.getInstance().playEffect("click_mp3")}function p(e){var n=e.currentTarget;n._touch_num_&&(n._touch_num_--,egret.Tween.get(n).to({scaleX:h,scaleY:l},50),i&&(i.localX=e.localX,i.localY=e.localY,i.stageX=e.stageX,i.stageY=e.stageY,i.currentTarget=n),t.call(o,i))}function c(e){var t=e.currentTarget;t._touch_num_&&(t._touch_num_--,egret.Tween.get(t).to({scaleX:h,scaleY:l},50))}if(void 0===n&&(n=!0),void 0===r&&(r=.9),void 0===s&&(s=.9),!e._callbcak_begin){e._sx_||(e._sx_=e.scaleX),e._sy_||(e._sy_=e.scaleY);var h=e._sx_,l=e._sy_;e._touch_num_=0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,this),e.addEventListener(egret.TouchEvent.TOUCH_END,p,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,c,this),e._callbcak_begin=a,e._callbcak_end=p,e._callbcak_out=c}},t.prototype.addEffectBtnOut=function(e,t,o,i,n,r,s){void 0===n&&(n=!0),void 0===r&&(r=1.1),void 0===s&&(s=1.1),this.addEffectBtn(e,t,o,i,n,r,s)},t.prototype.hasBtnEffect=function(e){return!!e._callbcak_begin},t.prototype.removeEffectBtn=function(e,t,o){if(e._callbcak_begin){egret.Tween.removeTweens(e),e.scaleX=e._sx_,e.scaleY=e._sy_;var i=e._callbcak_begin,n=e._callbcak_end,r=e._callbcak_out;e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,i,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,n,this),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,r,this),e._callbcak_begin=void 0,e._callbcak_end=void 0,e._callbcak_out=void 0,e._sx_=void 0,e._sy_=void 0,delete e._callbcak_begin,delete e._callbcak_end,delete e._callbcak_out,delete e._sx_,delete e._sy_,delete e._touch_num_}},t}(BaseClass);__reflect(EffectUtils.prototype,"EffectUtils");var HitUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.circleHitRect=function(e,t,o,i){var n=Math.abs(e-i.x),r=Math.abs(t-i.y),s=i.width/2,a=i.height/2;return s>=n?!0:a>=r?!0:n>s+o?!1:r>a+o?!1:MathUtils.getInstance().getDistance(s,a,n,r)<=o},t.prototype.pointHitCircle=function(e,t,o,i,n){return MathUtils.getInstance().getDistance(e,t,o,i)<=n},t}(BaseClass);__reflect(HitUtils.prototype,"HitUtils");var MathUtils=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortMoreFun=function(e,t){return void 0===t&&(t=null),function(o,i){var n=0;t&&(n=t.length);var r;for(var s in e){var a=parseInt(s);if(r=parseInt(o[e[s]])-parseInt(i[e[s]]),0!=r)return n>a&&0==t[s]?r:-r}return 0}},t}return __extends(t,e),t.prototype.getAngle=function(e){return 180*e/Math.PI},t.prototype.getAngle2=function(e,t,o,i){return this.getAngle(this.getRadian2(e,t,o,i))},t.prototype.getAngle360=function(e){var t=this.getAngle(e);return 0>t&&(t+=360),t},t.prototype.getRadian=function(e){return e/180*Math.PI},t.prototype.getRadian2=function(e,t,o,i){var n=o-e,r=i-t;return Math.atan2(r,n)},t.prototype.getDistance=function(e,t,o,i){var n=o-e,r=i-t,s=n*n+r*r;return Math.sqrt(s)},t.prototype.getDistance2=function(e,t){var o=t.x-e.x,i=t.y-e.y,n=o*o+i*i;return Math.sqrt(n)},t.prototype.random=function(e,t){var o=Math.min(e,t),i=Math.max(e,t);return o+Math.random()*Math.abs(i-o)},t.prototype.randomInt=function(e,t){return Math.floor(this.random(e,t+1))},t.prototype.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},t}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var NetUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.URLEncode=function(e,t,o){if(void 0===o&&(o=!0),null==e)return"";var i=this.urlEncode(e,t,o);return i.slice(1)},t.prototype.urlEncode=function(e,t,o){var i="",n=typeof e;if("string"==n||"number"==n||"boolean"==n)i+="&"+t+"="+(o?encodeURIComponent(e):e);else for(var r in e){var s=null==t?r:t+(e instanceof Array?"["+r+"]":"."+r);i+=this.urlEncode(e[r],s,o)}return i},t.prototype.urlRootBack=function(e,t){var o=t,i=o.split("/");i.length<=1?i.unshift("."):i[0].length<=0?i[0]=".":i;var n=e,r=n.split("/");r=r.slice(0,r.length-i[0].length);var s=r.join("/")+"/"+i[1];return s},t}(BaseClass);__reflect(NetUtils.prototype,"NetUtils");var StringUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.prototype.getStrLen=function(e){for(var t=e.split(""),o=0,i=0;i<t.length;i++){var n=t[i];o+=this.isChinese(n)?2:1}return o},t.prototype.isChinese=function(e){var t=/^.*[\u4E00-\u9FA5]+.*$/;return t.test(e)},t.prototype.rejectValue=function(e,o){var i=o?o:t.IllegalString,n=e.length-1,r=e.charAt(n);return i.lastIndexOf(r)>=0?e.substring(0,n):e},t.prototype.isIllegalString=function(e,o){var i=o?o:t.IllegalString,n=e.length-1,r=e.charAt(n);return i.lastIndexOf(r)>=0?!0:!1},t.prototype.checkMobile=function(e){return/^1\d{10}$/.test(e)},t.prototype.checkEmail=function(e){return/^[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$/.test(e)},t.prototype.isNumber=function(e){return!isNaN(Number(e))},t.IllegalString="[%+-`~!#$^&*()=|{}':;',\\[\\].<>/?~！#￥……&*（）——|{}【】‘；：”“'。，、？]‘’",t}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var web;!function(e){function t(t,o,i){var n={token:e.game_getPlayer().getToken(),nowpage:t};e.send(Protos.M.CsWorldNoticeListReqType,n,Protos.M.ScWorldNoticeListResType,o,i)}function o(t,o,i){var n={token:e.game_getPlayer().getToken(),id:t};e.send(Protos.M.CsWorldNoticeReqType,n,Protos.M.ScWorldNoticeResType,o,i)}function i(t,o,i){var n={token:e.game_getPlayer().getToken(),id:t};e.send(Protos.M.CsWorldDeleteNoticeReqType,n,Protos.M.ScWorldDeleteNoticeResType,o,i)}function n(t,o,i){var n={token:e.game_getPlayer().getToken(),nowpage:t};e.send(Protos.M.CsWorldMailListReqType,n,Protos.M.ScWorldMailListResType,o,i)}function r(t,o,i){var n={token:e.game_getPlayer().getToken(),id:t};e.send(Protos.M.CsWorldSingleMailReqType,n,Protos.M.ScWorldSingleMailResType,o,i)}function s(t,o,i){var n={token:e.game_getPlayer().getToken(),id:t};e.send(Protos.M.CsWorldDeleteMailReqType,n,Protos.M.ScWorldDeleteMailResType,o,i)}e.game_get_message=t,e.game_get_message_single=o,e.game_get_message_dele=i,e.game_get_email=n,e.game_get_email_single=r,e.game_get_email_dele=s}(web||(web={}));var web;!function(e){function t(t,o,i){var n={nickname:t};e.send(Protos.M.CsWorldRoleSettingReqType,n,Protos.M.ScWorldRoleSettingResType,o,i)}function o(t,o,i){var n={avatar:t};e.send(Protos.M.CsWorldRoleSettingReqType,n,Protos.M.ScWorldRoleSettingResType,o,i)}function i(t,o,i){var n={avatar_frame:t};e.send(Protos.M.CsWorldRoleSettingReqType,n,Protos.M.ScWorldRoleSettingResType,o,i)}function n(t,o,i){var n={sex:t};e.send(Protos.M.CsWorldRoleSettingReqType,n,Protos.M.ScWorldRoleSettingResType,o,i)}e.game_updateName=t,e.game_updateAvatar=o,e.game_updateFrame=i,e.game_updateSex=n}(web||(web={}));var web;!function(e){function t(t,o){var i={token:e.game_getPlayer().getToken()};e.send(Protos.M.CsWorldRechargeTypeReqType,i,Protos.M.ScWorldRechargeTypeResType,t,o)}function o(t,o,i,n,r,s){var a={token:e.game_getPlayer().getToken(),pay_channel:o,money:t,bank_code:i,pay_type:n};e.send(Protos.M.CsWorldRechargeReqType,a,Protos.M.ScWorldRechargeResType,r,s)}function i(t,o,i){var n={token:e.game_getPlayer().getToken(),type:t};e.send(Protos.M.CsWorldRechargeListReqType,n,Protos.M.ScWorldRechargeListResType,o,i)}e.game_recharge_types=t,e.game_recharge_url=o,e.game_recharge_recods=i}(web||(web={}));var web;!function(e){function t(e,t,o){GamePlayerMgr.i.web_login_guest(e,t,o)}function o(t,o,i,n,r){var s={token:e.game_getPlayer().getToken(),loginame:t,password:o,regtype:2,captcha:i};e.send(Protos.M.CsWorldRegisterMemberReqType,s,Protos.M.ScWorldRegisterMemberResType,n,r)}function i(){App.Socket.close()}e.game_register_enter=t,e.game_register=o,e.game_register_exit=i}(web||(web={}));var web;!function(e){function t(t,o,i,n,r){var s={token:e.game_getPlayer().getToken(),loginame:t,new_pwd:o,captcha:i};e.send(Protos.M.CsWorldResetLoginpwdReqType,s,Protos.M.ScWorldResetLoginpwdResType,n,r)}function o(t,o,i,n,r){var s={token:e.game_getPlayer().getToken(),loginame:t,new_pwd:o,old_pwd:i};e.send(Protos.M.CsWorldResetLoginpwdReqType,s,Protos.M.ScWorldResetLoginpwdResType,n,r)}function i(t,o,i){var n={token:e.game_getPlayer().getToken(),type:1,new_pwd:t};e.send(Protos.M.CsWorldModifyMoneyPwdReqType,n,Protos.M.ScWorldModifyMoneyPwdResType,o,i)}function n(t,o,i,n){var r={token:e.game_getPlayer().getToken(),type:2,new_pwd:t,captcha:o};e.send(Protos.M.CsWorldModifyMoneyPwdReqType,r,Protos.M.ScWorldModifyMoneyPwdResType,i,n)}function r(t,o,i,n){var r={token:e.game_getPlayer().getToken(),type:2,new_pwd:t,old_pwd:o};e.send(Protos.M.CsWorldModifyMoneyPwdReqType,r,Protos.M.ScWorldModifyMoneyPwdResType,i,n)}function s(t,o,i){var n={token:e.game_getPlayer().getToken(),phone_no:t};e.send(Protos.M.CsWorldGenerateCaptchaReqType,n,Protos.M.ScWorldGenerateCaptchaResType,o,i)}function a(t,o){var i={token:e.game_getPlayer().getToken()};e.send(Protos.M.CsWorldGenerateCaptchaReqType,i,Protos.M.ScWorldGenerateCaptchaResType,t,o)}e.game_resetLoginPass_tel=t,e.game_resetLoginPass_noTel=o,e.game_initMoneyPass=i,e.game_resetMoneyPass_tel=n,e.game_resetMoneyPass_noTel=r,e.game_getCaptcha_noBindTel=s,e.game_getCaptcha_bindTel=a}(web||(web={}));var web;!function(e){function t(t,o,i,n){var r={token:e.game_getPlayer().getToken(),money:t,password:o};e.send(Protos.M.CsWorldIntoSafeboxReqType,r,Protos.M.ScWorldIntoSafeboxResType,i,n)}function o(t,o,i,n){var r={token:e.game_getPlayer().getToken(),money:t,password:o};e.send(Protos.M.CsWorldFromSafeboxReqType,r,Protos.M.ScWorldFromSafeboxResType,i,n)}e.game_safeMoney=t,e.game_takeMoney=o}(web||(web={}));var web;!function(e){function t(){return GamePlayerMgr.i.getPlayer()}function o(e){GameModuleMgr.i.startGame(e)}function i(e){e?GameModuleMgr.i.back2GameFromLobby():GameModuleMgr.i.back2GameCancel()}function n(e,t,o,i,n){GamePlayerMgr.i.web_login(e,t,o,i,n)}function r(e,t){GamePlayerMgr.i.exitCurrAccount(e,t)}function s(){App.EasyLoading.showReconnetTip(),App.Socket.reconnect()}function a(e,o){var i={token:t().getToken()};h(Protos.M.CsWorldAgentBackgroundReqType,i,Protos.M.ScWorldAgentBackgroundResType,e,o)}function p(){hot.HotGame.gameClear(!0)}function c(e,t){h(Protos.M.CsWorldLeaveSceneReqType,{},Protos.M.ScWorldLeaveSceneResType,e,t)}function h(e,t,o,i,n){function r(e){App.MessageCenter.removeListener(BaseProxy.Socket_Type(o),r,this),i.call(n,e)}App.MessageCenter.addListener(BaseProxy.Socket_Type(o),r,this),App.Socket.send({key:e,body:t})}e.game_getPlayer=t,e.game_startGame=o,e.game_back2GameFromLobby=i,e.game_login=n,e.game_exit=r,e.game_relogin=s,e.game_agent_url=a,e.game_clear=p,e.game_exit_scene=c,e.send=h
}(web||(web={}));var web;!function(e){function t(t,o,i){var n={token:e.game_getPlayer().getToken(),type:t};e.send(Protos.M.CsWorldBindBankListReqType,n,Protos.M.ScWorldBindBankListResType,o,i)}function o(t,o,i,n,r,s){var a={token:e.game_getPlayer().getToken(),type:t,cardholder:o,bankname:i,cardno:n};e.send(Protos.M.CsWorldBindBankCardReqType,a,Protos.M.ScWorldBindBankCardResType,r,s)}function i(t,o,i,n){var r={token:e.game_getPlayer().getToken(),type:t,bankid:o};e.send(Protos.M.CsWorldUnbindBankReqType,r,Protos.M.ScWorldUnbindBankResType,i,n)}function n(t,o,i,n){var r={token:e.game_getPlayer().getToken(),money:t,bankid:o};e.send(Protos.M.CsWorldDrawoutReqType,r,Protos.M.ScWorldDrawoutResType,i,n)}e.game_bank_lists=t,e.game_bindBank=o,e.game_unBindBank=i,e.game_drawout=n}(web||(web={}));