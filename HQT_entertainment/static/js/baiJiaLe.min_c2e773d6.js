var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);i.prototype=t.prototype,e.prototype=new i},baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,"BaiJiaLeLottertRecord")||this;return i.visible=!1,i}return __extends(i,t),i.prototype.initComponent=function(i){t.prototype.initComponent.call(this,i),this.record_collection=new eui.ArrayCollection,this.recordList.itemRenderer=e.BaiJiaLeHelpItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.recordList},i.prototype.showPopup=function(){this.visible=!0,this.RankBg.visible=!0,this.recordMenu.scaleX=this.recordMenu.scaleY=0,App.EffectUtils.showUI(this.recordMenu)},i.prototype.closePopup=function(){this.RankBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.recordMenu,200,0,function(){e.visible=!1})},i.prototype.createList=function(e){Log.trace("gaming createList",e),this.record_collection.refresh();var t=e,i=this.initListData(t);this.record_collection.replaceAll(i),this.recordList.dataProvider=this.record_collection,this.record_collection.refresh()},i.prototype.initListData=function(e){var t=[];return t},i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.recordClose,this.closePopup,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.recordClose)},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);e.LotteryHis=t,__reflect(t.prototype,"baiJiaLe.LotteryHis")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(){var t=e.call(this,null)||this;return t._mSpeed=0,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.initPlayedEndCallBack=function(e,t){this._mCallBack=e,this._mThisobj=t},t.prototype.updateId=function(e){this.initDBRes(e),this.armature=this.createArmature("Armature",e,t._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},t.prototype.setPosition=function(e,i){this.x=e,this.y=i,this.armature.play(t.Animation,1)},t.prototype.play=function(e){void 0===e&&(e=1),this._mSpeed=e,this.armature.play(t.Animation,999999,e),App.TimerManager.doFrame(1,99999,this.update,this)},t.prototype.update=function(e){this.x+=e/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},t.prototype.clean=function(){e.prototype.clean.call(this)},t.prototype.armaturePlayEnd=function(e){e.animationName==t.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.armature.destroy(),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},t.Animation="move",t.AnimationDead="dead",t._mActionList=[t.Animation,t.AnimationDead],t}(base.BaseGameObject);e.EffectBones=t,__reflect(t.prototype,"baiJiaLe.EffectBones")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(){}return e.Desk_ListInfo="10225",e.Desk_ListInfo_Back="10226",e.DeskChartChange="10234",e.DeskStateChange="10235",e}();e.DeskProxyKeyConst=t,__reflect(t.prototype,"baiJiaLe.DeskProxyKeyConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._proxy=null,e._view=null,Log.trace("DeskController init()"),e}return __extends(i,t),i.prototype.onCreate=function(){t.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){t.prototype.onInit.call(this),this.registers(),App.ViewManager.open(e.ViewConst.Base)},i.prototype.inits=function(){this._model=new e.DeskModel(this),this._proxy=new e.DeskProxy(this,this.getModel()),this._view=new e.DeskView(this)},i.prototype.registers=function(){t.prototype.registers.call(this),App.ViewManager.register(e.ViewConst.Base,this._view),this.registerFunc("onClickBackLobby",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this),this.registerFunc(e.DeskConst.TableListReq,this.tableListReq,this)},i.prototype.tableListReq=function(e){this._proxy.tableListReq(e)},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.onEnterGame=function(e,t,i){this.enterGameByDeskId(e,{tableType:t,tableName:i})},i.prototype.onExitGame=function(){t.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){t.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.DeskController);e.DeskController=t,__reflect(t.prototype,"baiJiaLe.DeskController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(t){var i=e.call(this,t)||this;return i.roleName="",i.repeatMessage=0,i.roomListInfo=[],i}return __extends(t,e),t.currTableType=1,t}(base.DeskModel);e.DeskModel=t,__reflect(t.prototype,"baiJiaLe.DeskModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e,i){return t.call(this,e,i)||this}return __extends(i,t),i.prototype.tableListReq=function(t){var i={bookmark:t.bookmark};this.send(e.DeskProxyKeyConst.Desk_ListInfo,i),App.EasyLoading.showOnTimeOut()},i.prototype.onTableListAck=function(e){Log.trace("桌子列表信息",e),App.MessageCenter.dispatch("onTableListAck",e),App.EasyLoading.hideLoading()},i.prototype.onTableChartChange=function(e){App.MessageCenter.dispatch("onTableChartChange",e)},i.prototype.onTableStateChange=function(e){App.MessageCenter.dispatch("onTableStateChange",e)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.addListener(e.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this),this.addListener(e.DeskProxyKeyConst.DeskChartChange,this.onTableChartChange,this),this.addListener(e.DeskProxyKeyConst.DeskStateChange,this.onTableStateChange,this)},i.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.removeListener(e.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this),this.removeListener(e.DeskProxyKeyConst.DeskChartChange,this.onTableChartChange,this),this.removeListener(e.DeskProxyKeyConst.DeskStateChange,this.onTableStateChange,this)},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(base.DeskProxy);e.DeskProxy=t,__reflect(t.prototype,"baiJiaLe.DeskProxy")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,e,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeDeskSkin")||this;return i.toggleBtns=[],i}return __extends(i,t),i.prototype.initUI=function(){t.prototype.initUI.call(this);var i=new eui.VerticalLayout;this.deskList.layout=i,this.deskScroller.viewport=this.deskList,this.deskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.deskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.tab_classicBtn.inSelected.source="common_ui_xzjdd_png",this.tab_classicBtn.unSelected.source="common_ui_xzjdx_png",this.toggleBtns.push(this.tab_classicBtn),this.toggleBtns.push(this.tab_lotteryBtn),this.tab_classicBtn.selected=1==e.DeskModel.currTableType?!0:!1,this.tab_lotteryBtn.selected=!this.tab_classicBtn.selected,this.tab_classicBtn.touchEnabled=!this.tab_classicBtn.selected,this.tab_lotteryBtn.touchEnabled=this.tab_classicBtn.selected,this.deskList.itemRenderer=e.BaiJiaLeDeskItem,this.tempCollection=new eui.ArrayCollection,this.deskHelp.initComponent(),this.initBroadcast(this),App.OffsetLeft(this.leftBtnGroup),this.exitBtn.visible=!App.isWebInsert},i.prototype.open=function(){t.prototype.open.call(this);var i={bookmark:e.DeskModel.currTableType};this.applyFunc(e.DeskConst.TableListReq,i)},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackLobby"),e.DeskModel.currTableType=1},i.prototype.onEnterGame=function(t){App.SoundManager.playEffect("click_mp3");var i=this.deskList.selectedIndex,a=this.deskList.getElementAt(i),o=this.tempCollection.getItemAt(i).tablename;e.DeskModel.currTableType=this.tab_classicBtn.selected?1:2,this.applyFunc("onEnterGame",a.tableId,this.tab_classicBtn.selected?1:2,o)},i.prototype.createList=function(e){this.tempCollection.refresh();var t=e,i=this.initListData(t);this.tempCollection.replaceAll(i),this.deskList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.onTableChartChange=function(e){if(Log.trace("正常数据",this.tempCollection,this),0==e.win_place.length||!this.tempCollection)return void Log.trace("数据有误",this.tempCollection,this);for(var t=this.tempCollection.source.length,i=0;t>i;i++)if(this.tempCollection.getItemAt(i).tableid==e.table_id){this.tempCollection.getItemAt(i).termno=e.issue;var a=[{winPlace:e.win_place}],o=this.tempCollection.getItemAt(i).winplace.concat(a);o.length>60&&(o=o.slice(60)),Log.trace("curryData"+i,o),this.tempCollection.getItemAt(i).winplace=o,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(i))}},i.prototype.onTableStateChange=function(e){var t=this.tempCollection.source.length;if(Log.trace("页签时间状态更新",e),!this.tempCollection)return void Log.trace("数据有误",this.tempCollection,this);for(var i=function(t){if(a.tempCollection.getItemAt(t)&&a.tempCollection.getItemAt(t).tableid==e.table_id){var i=Math.floor(e.total_time/1e3);if(a.tempCollection.getItemAt(t).gametime=i,a.tempCollection.getItemAt(t).gamestatus=e.state,a.tempCollection.itemUpdated(a.tempCollection.getItemAt(t)),0==i||5==e.state)return{value:void 0};App.TimerManager.doTimer(1e3,i,function(){this.tempCollection.getItemAt(t).gametime>0&&(this.tempCollection.getItemAt(t).gametime--,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(t)))}.bind(a),a)}},a=this,o=0;t>o;o++){var s=i(o);if("object"==typeof s)return s.value}},i.prototype.initListData=function(e){if(!(e.bookmark.length<=0)){for(var t=[],i=0;i<e.bookmark.length;i++)t[i]={gamestatus:e.bookmark[i].gamestatus,gametime:e.bookmark[i].gametime,total_time:e.bookmark[i].total_time,tablename:e.bookmark[i].tablename,termno:e.bookmark[i].termno,sortid:e.bookmark[i].sortid,limitmoney:e.bookmark[i].limitmoney,winplace:e.bookmark[i].winPlaces,tableid:e.tableinfo[i].tableid,tabletype:e.tableinfo[i].tabletype,tableinfo:e.tableinfo[i]};return t.sort(function(e,t){return e.sortid-t.sortid!=0?e.sortid-t.sortid:void 0}),t}},i.prototype.onClickHelp=function(){App.MouseUtils.removeMouseWheel(),this.deskHelp.showPopup()},i.prototype.toggleChangeHandler=function(t){this.deskScroller.stopAnimation(),App.TimerManager.removeAll(this);for(var i=this.toggleBtns.length,a=0;i>a;a++){var o=this.toggleBtns[a];o.selected=o==t.target,o.touchEnabled=!(o==t.target)}var s={bookmark:this.tab_classicBtn.selected?1:2};this.applyFunc(e.DeskConst.TableListReq,s)},i.prototype.onMouseWheel=function(e){common.GUtils.touchMouseWheel(this.deskScroller,this.deskList,e.data)},i.prototype.onCloseHelp=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.deskHelp.addEvent(),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.addListener("onTableListAck",this.createList,this),App.MessageCenter.addListener("onTableStateChange",this.onTableStateChange,this),App.MessageCenter.addListener("onTableChartChange",this.onTableChartChange,this),App.MessageCenter.addListener("closeHelpAtDesk",this.onCloseHelp,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.deskHelp.removeEvent(),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.removeListener("onTableListAck",this.createList,this),App.MessageCenter.removeListener("onTableStateChange",this.onTableStateChange,this),App.MessageCenter.removeListener("onTableChartChange",this.onTableChartChange,this),App.MessageCenter.removeListener("closeHelpAtDesk",this.onCloseHelp,this),App.MouseUtils.removeMouseWheel()},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.deskHelp.destroy(),this.toggleBtns=void 0,this.tempCollection&&(this.tempCollection.removeAll(),this.tempCollection=null),App.TimerManager.removeAll(this),e.BeadFactory.i.clear(),common.BeadFactory.i.clear(),this.deskList.removeChildren()},i}(base.DeskView);e.DeskView=t,__reflect(t.prototype,"baiJiaLe.DeskView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t;!function(t){var i=function(){function t(){}return t.prototype.getVersion=function(){return"v1.0.0"},t.prototype.reconstruction=function(e){var t=base.getController(e);t&&t.onReconstruction()},t.prototype.create=function(t){t==ControllerConst.Room||(t==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new e.GameController):t==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new e.DeskController));var i=base.getController(t);i&&i.onCreate()},t.prototype.initialize=function(e,t){var i=base.getController(e);i&&i.onInit(t)},t.prototype.destroy=function(e){},t}();t.baiJiaLe=i,__reflect(i.prototype,"baiJiaLe.Entrance.baiJiaLe",["base.IEntranceface"])}(t=e.Entrance||(e.Entrance={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(){var t=e.call(this,"AwardAnimationSkin")||this;return t.visible=!1,t}return __extends(t,e),t.prototype.showAward=function(e,t){this.visible=!0,this._groupAward.alpha=0,this._playerWin.visible=!1,this._bankerWin.visible=!1,this._he.visible=!1,1==e?this._playerWin.visible=!0:2==e?this._bankerWin.visible=!0:this._he.visible=!0,egret.Tween.get(this._groupAward).to({alpha:1},500,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this._groupAward).to({alpha:0},300,egret.Ease.sineInOut),this.visible=!1}.bind(this),this,2e3),t&&t>0?(this._winMoney.text="+"+App.CommonUtils.money2Str(t),this._winMoney.visible=!0):this._winMoney.visible=!1},t}(BaseEuiComponent);e.AwardAnimation=t,__reflect(t.prototype,"baiJiaLe.AwardAnimation")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(){return e.call(this,"BaiJiaLeBtnAreaSkin")||this}return __extends(t,e),t.prototype.onBtnClick=function(e){this.applyFunc("bet",e)},t.prototype.setBtnArea=function(e){this._btnArea8.touchEnabled=1==e,this._btnArea9.touchEnabled=1==e},t.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=1;t<this._btnAreaGroup.numChildren+1;t++)this["_btnArea"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick.bind(this,t),this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=1;t<this._btnAreaGroup.numChildren+1;t++)this["_btnArea"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.BaiJiaLeBtnArea=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeBtnArea")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,"BaiJiaLeChangeTableSkin")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,t),i.prototype.initComponent=function(i){t.prototype.initComponent.call(this,i),this.tempCollection=new eui.ArrayCollection,this.deskList.itemRenderer=e.BaiJiaLeDeskItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.deskList},i.prototype.addEvent=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.touchMove=function(e){this.ScrollBox.width=1e3,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,100)},i.prototype.touchEnd=function(){this.ScrollBox.width=50,this.ScrollBox.x=850},i.prototype.onEnterGame=function(e){var t=this.deskList.selectedIndex,i=this.deskList.getElementAt(t),a={table_id_old:GameModuleMgr.i.getCurrDeskId(),table_id_new:i.tableId,table_name:i.tableName};this.applyFunc("enterTableReq",a)},i.prototype.onMouseWheel=function(e){common.GUtils.touchMouseWheel(this.scrollerItem,this.deskList,e.data)},i.prototype.showPopup=function(){this.visible=!0,this.changeBg.visible=!0,this.changeMenu.scaleX=this.changeMenu.scaleY=0,App.EffectUtils.showUI(this.changeMenu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePopup=function(){this.changeBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.changeMenu,300,0,function(){e.visible=!1}),App.TimerManager.removeAll(this),this.applyFunc("changeTableReq",!1),App.MouseUtils.removeMouseWheel()},i.prototype.createList=function(e,t){Log.trace("gaming createList",e),this.tempCollection.refresh();var i=e,a=[],o=[],s=this.initListData(i);s.forEach(function(e){t&&t==e.tableid?e.isCurrentTable=!0:e.isCurrentTable=!1,1==e.tabletype?a.push(e):o.push(e)}),a.sort(function(e,t){return e.sortid-t.sortid}),s=a.concat(o),this.tempCollection.replaceAll(s),this.deskList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.initListData=function(e){if(!(e.bookmark.length<=0)){for(var t=[],i=0;i<e.bookmark.length;i++)t[i]={gamestatus:e.bookmark[i].gamestatus,gametime:e.bookmark[i].gametime,total_time:e.bookmark[i].total_time,tablename:e.bookmark[i].tablename,termno:e.bookmark[i].termno,limitmoney:e.bookmark[i].limitmoney,winplace:e.bookmark[i].winPlaces,sortid:e.bookmark[i].sortid,tableid:e.tableinfo[i].tableid,tabletype:e.tableinfo[i].tabletype,tableinfo:e.tableinfo[i],isCurrentTable:!1};for(var a=[],i=0;i<e.bookmark.length;i++){if(!(e.bookmark[i].sortid>0))return t;a[e.bookmark[i].sortid-1]=t[i]}for(var o=[],i=0;i<a.length;i++)""!=a[i]&&void 0!=a[i]&&o.push(a[i]);return t}},i.prototype.onTableChartChange=function(e){if(0!=e.win_place.length)for(var t=this.tempCollection.source.length,i=0;t>i;i++)if(this.tempCollection.getItemAt(i).tableid==e.table_id){this.tempCollection.getItemAt(i).termno=e.issue;var a=[{winPlace:e.win_place}],o=this.tempCollection.getItemAt(i).winplace.concat(a);o.length>60&&(o.length=0,o.concat(a)),this.tempCollection.getItemAt(i).winplace=o,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(i))}},i.prototype.onTableStateChange=function(e){Log.trace("状态更新",e);for(var t=this.tempCollection.source.length,i=function(t){if(a.tempCollection.getItemAt(t).tableid==e.table_id){var i=Math.floor(e.total_time/1e3);if(a.tempCollection.getItemAt(t).gametime=i,a.tempCollection.getItemAt(t).gamestatus=e.state,a.tempCollection.itemUpdated(a.tempCollection.getItemAt(t)),0==i||5==e.state)return{value:void 0};App.TimerManager.doTimer(1e3,i,function(){this.tempCollection.getItemAt(t).gametime>0&&(this.tempCollection.getItemAt(t).gametime--,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(t)))}.bind(a),a)}},a=this,o=0;t>o;o++){var s=i(o);if("object"==typeof s)return s.value}},i.prototype.destroy=function(){t.prototype.destroy.call(this),this._lementList=void 0,this.tempCollection&&(this.tempCollection.removeAll(),this.tempCollection=null),App.TimerManager.removeAll(this)},i}(BaseEuiComponent);e.BaiJiaLeChangeTable=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeChangeTable")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.largeX=0,e.verticalNum=1,e.maxBottomLine=6,e.lastTableId=-1,e.beadList=[],eui.Watcher.watch(e,["data","tableinfo"],e.onLoadedData,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(i,t),i.prototype.onLoadedData=function(){JSON.stringify(this.tempTableInfo)!=JSON.stringify(this.data.tableinfo)&&(this._tableName.text=this.data.tablename,this._date.text="期号:"+this.data.termno,this._limited.text="限红:"+this.data.limitmoney[0].down+"~"+this.data.limitmoney[0].up,this.setDeskItemInfo(),Log.trace("渲染全部？"),this.renderAll(this.data.winplace)),this.tempTableInfo=this.data.tableinfo},i.prototype.updataRoadMap=function(){this.collectResult(),this.setDeskItemInfo(),this.renderAll(this.data.winplace)},i.prototype.updataStatus=function(){var e;2==this.data.gamestatus?(e="投注中  "+this.data.gametime,this.MaskBetTimer.visible=!0,this.data.gametime>=this.data.total_time&&(this.data.total_time=this.data.gametime),this.mask_progress.scaleX=this.data.gametime/this.data.total_time):5==this.data.gamestatus&&1==this.data.tabletype&&(e="结算中...",this.MaskBetTimer.visible=!1),this._gameStatus.text=e},i.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.data.isCurrentTable?(this.EnterGame.visible=!1,this.CurrentRoom.visible=!0):(this.EnterGame.visible=!0,this.CurrentRoom.visible=!1),this.updataStatus(),this._date.text="期号:"+this.data.termno,JSON.stringify(this.tempRoadInfo)!=JSON.stringify(this.data.winplace)&&this.updataRoadMap(),this.tempRoadInfo=this.data.winplace)},i.prototype.collectResult=function(){var e=this.data.winplace,t=[];t[1]=0,t[2]=0,t[3]=0;for(var i=0;i<=e.length-1;i++)1==e[i].winPlace[0]&&(t[1]=t[1]+1),2==e[i].winPlace[0]&&(t[2]=t[2]+1),3==e[i].winPlace[0]&&(t[3]=t[3]+1);return t},i.prototype.setDeskItemInfo=function(e){var t=this.collectResult();this._bankerSum.text="庄:"+t[1],this._playerSum.text="闲:"+t[2],this._drawSum.text="和:"+t[3]},Object.defineProperty(i.prototype,"tableId",{get:function(){return this.data?this.data.tableid:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableType",{get:function(){return this.data.tabletype},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableName",{get:function(){return this.data.tablename},enumerable:!0,configurable:!0}),i.prototype.renderBead=function(e){this.record=e,this.record.length?(this.lastTableId!=this.tableId?(this.isRender=!0,this.removeFrame(),this.lastTableId=this.tableId):(1==this.record.length&&(this.removeFrame(),this.isRender=!1),this.isRender&&this.removeFrame()),App.TimerManager.doFrame(1,99,this.frameRender,this)):this.removeFrame()},i.prototype.removeBead=function(){if(this.beadList.length)for(;this.beadList.length;){var t=this.beadList.pop();e.BeadFactory.i.releaseBead(t)}},i.prototype.frameRender=function(){for(var e=0;3>e;e++)this.index<this.record.length?this.renderOne():(this.isRender=!1,App.TimerManager.remove(this.frameRender,this))},i.prototype.removeFrame=function(){this.removeBead(),this.index=0,App.TimerManager.remove(this.frameRender,this)},i.prototype.renderOne=function(){this.renderPublic(this.index),this.index++},i.prototype.renderPublic=function(t){var i=e.BeadFactory.i.createBead(),a=t/6,o=24*parseInt(String(a)),s=t%6;i.x=o,i.y=24*s,i._winner.source=1==this.record[t].winPlace[0]?"bjl_ui_zhuang":2==this.record[t].winPlace[0]?"bjl_ui_xian":"bjl_ui_he",i._playerDouble.visible=this.record[t].winPlace.indexOf(5)>-1?!0:!1,i._bankerrDouble.visible=this.record[t].winPlace.indexOf(4)>-1?!0:!1,this.beadList.push(i),this.GroupBead.addChild(i)},i.prototype.renderAll=function(e){this.renderBead(e);var t=[];e.forEach(function(e,i){t[i]=e.winPlace[0]-1}),this.ChartOther.renderOtherChart(t,"bjl",this.tableId)},i.prototype.destroy=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},i}(eui.ItemRenderer);e.BaiJiaLeDeskItem=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeDeskItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,"BaiJiaLeHelpSkin")||this;return i.visible=!1,i}return __extends(i,t),i.prototype.initComponent=function(){this.help_collection=new eui.ArrayCollection,this.helpList.itemRenderer=e.BaiJiaLeHelpItem,this.helpScroller.viewport.scrollH=0,this.helpScroller.viewport=this.helpList},i.prototype.showPopup=function(){this.visible=!0,this.bg.visible=!0,this.helpMain.scaleX=this.helpMain.scaleY=0,App.EffectUtils.showUI(this.helpMain),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePopup=function(){this.bg.visible=!1;var e=this;App.EffectUtils.hideUI(this.helpMain,200,0,function(){e.visible=!1}),App.MessageCenter.dispatch("closeHelpAtDesk"),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(e){common.GUtils.touchMouseWheel(this.helpScroller,this.helpList,e.data)},i.prototype.touchMoveHandel=function(e){var t=this.helpScroller.viewport;t.scrollV=(this.helpList.getChildAt(0).height-t.height)/t.height*e.localY},i.prototype.touchTapHandle=function(e){var t=this.helpScroller.viewport,i=(this.helpList.getChildAt(0).height-t.height)/t.height*e.localY;egret.Tween.get(t).to({scrollV:i},1e3)},i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.closeBtn,this.closePopup,this),this.scrollerBar_Area.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveHandel,this),this.scrollerBar_Area.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapHandle,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.closeBtn),this.scrollerBar_Area.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveHandel,this),this.scrollerBar_Area.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapHandle,this)},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),egret.Tween.removeTweens(this.helpScroller.viewport)},i}(BaseEuiComponent);e.BaiJiaLeHelp=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeHelp")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(eui.ItemRenderer);e.BaiJiaLeHelpItem=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeHelpItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(t){var i=e.call(this,"BaiJiaLeLotteryHelpSkin")||this;return i.visible=!1,i}return __extends(t,e),t.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.takeclose,this.closePoput,this,{}),this.RankBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.takeclose),this.RankBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.showPopup=function(){App.EffectUtils.showView(this)},t.prototype.closePoput=function(){var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},t}(BaseEuiComponent);e.BaiJiaLeLotteryHelp=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeLotteryHelp")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(){var e=t.call(this,"BaiJiaLeTimeSkin")||this;return e._status={1:"下注中",2:"开奖中",3:"空闲",4:"发牌中"},e}return __extends(i,t),i.prototype.setCurryTimer=function(e){this.classicTimer.visible=1==e,this.lotteryTimer.visible=2==e,this._tableType=e},i.prototype.startTimer=function(e){var t=Math.round(e/1e3);switch(this._tableType){case 1:this.timer1(t);break;case 2:this.timer2(t)}},i.prototype.updateTimerStatus=function(t){switch(t){case e.BaiJiaLeConst.GAME_STATE.BET:this._currentGameStatus=1;break;case e.BaiJiaLeConst.GAME_STATE.AWARD:this._currentGameStatus=2;break;case e.BaiJiaLeConst.GAME_STATE.WAIT:this._currentGameStatus=3;break;case e.BaiJiaLeConst.GAME_STATE.DEAL:this._currentGameStatus=4}this._gameStatus.text=this._status[this._currentGameStatus]},i.prototype.timerHandler1=function(){this._currentSecond>1?(this._currentSecond--,this._currentGameStatus==e.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==e.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3")):this._timer.stop(),this._currentSecond>=0&&(this._timeLbL.text=""+this._currentSecond,this._currentGameStatus==e.BaiJiaLeConst.GAME_STATE.BET&&(3==this._currentSecond&&(this._timeLbL.text="w"),2==this._currentSecond&&(this._timeLbL.text="m"),1==this._currentSecond&&(this._timeLbL.text="n"))),this._currentSecond<=3&&e.Application.numShake(this._timeLbL)},i.prototype.timerHandler2=function(){return this._currentSecond--,this._currentGameStatus==e.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==e.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3"),this._currentSecond<0?(this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,void App.TimerManager.removeAll(this)):void this.renderLottery()},i.prototype.timerHandlerOver2=function(){this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond},i.prototype.numShake=function(){var e=this._timeLbL;egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.timer1=function(e){this._timer?this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this):(this._timer=new egret.Timer(1e3,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this)),e>=0&&(this._currentSecond=e,this._timeLbL.text=""+this._currentSecond,this._timer.start())},i.prototype.timer2=function(e){this._currentSecond=e,this.renderLottery(),App.TimerManager.doTimer(1e3,e,this.timerHandler2,this,this.timerHandlerOver2,this)},i.prototype.setTimerVisible=function(e){1==this._tableType&&(this.classicTimer.visible=e),2==this._tableType&&(this.lotteryTimer.visible=e)},i.prototype.getCurryTime=function(){return this._currentSecond},i.prototype.resetTimer=function(){App.TimerManager.removeAll(this)},i.prototype.renderLottery=function(){if(this._currentSecond<3600){var e=this._currentSecond%60,t=Math.floor(this._currentSecond/60);this.timeSecond.text=10>e?"0"+e:""+e,this.timeMinute.text=10>t?"0"+t:""+t
}},i.prototype.destroy=function(){t.prototype.destroy.call(this),this._shape&&this.classicTimer.removeChild(this._shape),this._timer&&this._timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this),this._shape=null,this._timer=null,this._status=null,this._currentSecond=null,this._tableType=null},i}(BaseEuiComponent);e.BaiJiaLeTime=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeTime")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(){e.BeadPool=[]}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.createBead=function(){var t=e.BeadPool.pop();return t||(t=new i),t},e.prototype.releaseBead=function(t){t.clear(),e.BeadPool.unshift(t)},e.prototype.clear=function(){for(;e.BeadPool.length;)e.BeadPool.pop().destroy()},e._i=null,e.BeadPool=null,e}();e.BeadFactory=t,__reflect(t.prototype,"baiJiaLe.BeadFactory");var i=function(e){function t(){return e.call(this,"BeadSkin")||this}return __extends(t,e),t.prototype.clear=function(){R.removeFromParent(this)},t.prototype.destroy=function(){this._winner.source=void 0,this._winner.texture=void 0,this.clear()},t}(BaseEuiComponent);e.Bead=i,__reflect(i.prototype,"baiJiaLe.Bead")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(){}return e.TableListReq=20100,e}();e.DeskConst=t,__reflect(t.prototype,"baiJiaLe.DeskConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(){var e=t.call(this,"RoadMapSkin")||this;return e.largeX=0,e.verticalNum=1,e.maxBottomLine=6,e.isOpenRoad=!1,e}return __extends(i,t),i.prototype.collectResult=function(e){var t=e;Log.trace("收集开始",t);for(var i={},a=0;a<=t.length-1;a++)if(1==t[a].winPlace.length){var o=t[a].winPlace[0];i[o]=i[o]+1||1}else if(t[a].winPlace.length>1)for(var s=[],n=t[a].winPlace.length-1,r=0;n>=r;r++)s[r]=t[a].winPlace[r],i[s[r]]=i[s[r]]+1||1;return Log.trace("收集结束",i),i},i.prototype.setDeskItemInfo=function(e){var t=this.collectResult(e);this._banker.text=""+(void 0===t[1]?0:t[1]),this._player.text=""+(void 0===t[2]?0:t[2]),this._tie.text=""+(void 0===t[3]?0:t[3]),this._bankerPair.text=""+(void 0===t[4]?0:t[4]),this._playerPair.text=""+(void 0===t[5]?0:t[5]),this._sum.text=""+e.length},i.prototype.renderBead=function(t){this.GroupBead.removeChildren();var i=0,a=0;t.length>0&&t.forEach(function(t,o){var s=new e.Bead,n=o/6;i=24*parseInt(String(n)),o%6==0&&(a=0),s.x=i,s.y=a,s._winner.source=1==t.winPlace[0]?"bjl_ui_zhuang":2==t.winPlace[0]?"bjl_ui_xian":"bjl_ui_he",s._playerDouble.visible=t.winPlace.indexOf(5)>-1?!0:!1,s._bankerrDouble.visible=t.winPlace.indexOf(4)>-1?!0:!1,a+=24,this.GroupBead.addChild(s)}.bind(this));var o=this.ChartOther.getAskRoad(0),s=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(o),this.renderBlackAskRoad(s)},i.prototype.renderRedAskRoad=function(e){this.bankerAskRoad.removeChildren(),this.renderAskRoad(e,this.bankerAskRoad)},i.prototype.renderBlackAskRoad=function(e){this.playerAskRoad.removeChildren(),this.renderAskRoad(e,this.playerAskRoad)},i.prototype.renderAskRoad=function(e,t){if(e.length){var i=new eui.Image;i.x=0,i.y=2,i.source="bjl_ui_dyl_"+e[0],t.addChild(i)}if(e.length>1){var i=new eui.Image;i.x=12,i.y=2,i.source="bjl_ui_xl_"+e[1],t.addChild(i)}if(e.length>2){var i=new eui.Image;i.x=24,i.y=2,i.source="bjl_ui_xql_"+e[2],t.addChild(i)}},i.prototype.renderAll=function(e){var t=[];e.forEach(function(e,i){t[i]=e.winPlace[0]-1}),this.ChartOther.renderOtherChart(t,"bjl",111),this.renderBead(e),this.setDeskItemInfo(e)},i.prototype.renderIssue=function(e){this.Issue.text="期号:"+e},i.prototype.showRoadMap=function(){egret.Tween.get(this.RoadMapMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.openRoadMap=function(){this.isOpenRoad?(this.closeRoadMap(),this.isOpenRoad=!1):(this.applyFunc("showRoadMap"),this.isOpenRoad=!0)},i.prototype.closeRoadMap=function(){App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.RoadMapMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut),this.applyFunc("closeRoadMap")},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},i.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnRoadMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.removeEvent=function(){this.BtnRoadMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),common.BeadFactory.i.clear()},i}(BaseEuiComponent);e.RoadMap=t,__reflect(t.prototype,"baiJiaLe.RoadMap")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(){}return e.CHIP_CONFIG=[1,10,50,100,500,1e3,5e3,1e4],e.BET_SLOT=3,e.FLY_CHIP_TIME=.4,e.TABLE_CHIP_SCALE=.4,e.DEAL_CARD_TIME=.35,e.FLIP_CARD_TIME=.5,e.SHOW_CHAIR_NUM=6,e.BET_TIME=10,e.REWARD_TIME=10,e.PI=3.1416926,e.GAME_STATE={BET:1,AWARD:2,WAIT:3,DEAL:4},e.Game_CHIP_AREA={PLAYER:1,HE:2,BANKER:3,ANY_DUI:4,PLAYER_DUI:5,BIG:6,SMALL:7,BANKER_DUI:8,PERFECT_DUI:9},e.RESULT={BankerWin:1,PlayerWin:2,Tie:3},e.CARD_TYPE={DAN_ZHANG:-1,DUI_ZI:-1,SHUN_ZI:-1,JIN_HUA:-1,SHUN_JIN:-1,BAO_ZI:-1},e.BENEFIT={0:1,1:1,2:2,3:3,4:5,5:10},e.CARD_TYPE_STR=(i={},i[0]="单张",i[1]="对子",i[2]="顺子",i[3]="金花",i[4]="顺金",i[5]="豹子",i),e.NET_MSG={ONLINE_NUM:"1005",LEAVE_GAME:"10104",LEAVE_GAME_R:"10105",BET_START_R:"10202",ME_BET:"10203",ME_BET_R:"10204",CARDLIST_R:"10205",GAME_RESULT:"10206",GAME_RECONECTINFO_R:"10207",REWARD_START_R:"10211",DEAL_START_R:"10212",TOTAL_BET_R:"10213",LEADER_BOARD_R:"10214",LEADER_BOARD:"10215",ROAD_MAP_R:"10216",INIT_FINISH:"10217",ONLINE_NUMBER_R:"10218",SPECIAL_PLAYER_R:"10219",CHIP_SETTING:"10221",CHIP_SETTING_R:"10220",TERMNO_R:"10224",GAMESTATE_R:"10229",CHANGE_TABLE:"10230",CHANGE_TABLE_R:"10226",ENTER_TABLE:"10231",ENTER_TABLE_R:"10232",CHARTCHANGE_R:"10234",STATECHANGE_R:"10235",SPECIAL_WIN_R:"10236",OPENSTATUS_R:"10237",RESULT_BALL_R:"10238",LOTTERY_HIS:"10239",LOTTERY_HIS_R:"10240",RemainTime:"10241",RemainTime_R:"10242",RESULT_START_R:"10113"},e.NET_MSG_LOG={7002:"玩家下注",7003:"其他玩家下注",7004:"玩家自己发起上庄",7005:"其他玩家进入庄家排队",7006:"新玩家进入",7007:"新玩家离开",7008:"当前玩家离开房间",7009:"自己提前下庄或者离开上庄列表",7010:"玩家被踢出房间",7011:"可下注状态通知",7012:"开奖状态通知",7014:"其他玩家下庄或者离开上庄队列",7017:"房间更新中奖",7018:"房间更新其他信息"},e.ANIM_STAGE={NONE:-1,DEAL_CARD:-1,FLIP_LEFT_CARD:-1,FLIP_Right_CARD:-1,SHOW_LEFT_PX:-1,SHOW_RIGHT_PX:-1,CHIP_ANIM:-1,SHOW_SCORE:-1,WAIT:-1},e.NET_ERROR_MSG=(a={},a[101]="条件不满足",a[102]="下注数字错误",a[103]="下注额过大",a[104]="下注金额超过余额 ",a[105]="庄家无法赔付这么多下注额",a[106]="下注时间结束",a[107]="余额小于上庄最低要求",a[108]="上庄队列已满",a[109]="自己就在庄家队列",a[110]="当前玩家不是庄家也不在庄家列表",a[111]="当前玩家长时间不参与",a[112]="下注金额过小",a[113]="当前没有庄家,下注失败",a),e.Const_onEnterGameCallBack="Const_1001",e.onOtherBetCallBack="1002",e.onSelfBetCallBack="1003",e.onShowHandCallBack="1004",e.onOnlineNumCallBack="1005",e.onBetStartCallBack="1006",e.onRewardStartCallBack="1007",e.setJettonCallBack="1008",e.onResultCallBack="1009",e.onBetCallBack="1010",e.onCardListCallBack="1011",e.onDealStartCallBack="1012",e.onTotalBetCallBack="1013",e.onMeBetCallBack="1014",e.onGameResultCallBack="1015",e.onLeaveGameCallBack="1016",e.onRoadMapCallBack="1017",e.onLeaderBoardCallBack="1018",e.onOnlineNumberCallBack="1019",e.onSpecialPlayerCallBack="1020",e.onAddChipCallBack="1021",e.onReconectBack="1022",e.onTermnoBack="1023",e.onGameStateBack="1024",e.onChangeTableBack="1025",e.onEnterTableBack="1026",e.onSpecialWinBack="1027",e.onChartChangeBack="1028",e.onStatusChangeBack="1029",e.onOpenStatusBack="1030",e.onResultBallBack="1031",e.onLotteryHisBack="1032",e.onRemainTimeBack="1033",e}();e.BaiJiaLeConst=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeConst");var i,a}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e,i){var a=t.call(this,e,i)||this;return a.register(),a}return __extends(i,t),i.prototype.register=function(){this.addListener(e.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.addListener(e.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.addListener(e.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.addListener(e.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.addListener(e.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.addListener(e.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.addListener(e.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.addListener(e.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.addListener(e.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.addListener(e.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.addListener(e.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.addListener(e.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.addListener(e.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this),this.addListener(e.BaiJiaLeConst.NET_MSG.CHANGE_TABLE_R,this.onChangeTable,this),this.addListener(e.BaiJiaLeConst.NET_MSG.ENTER_TABLE_R,this.onEnterTable,this),this.addListener(e.BaiJiaLeConst.NET_MSG.SPECIAL_WIN_R,this.onSpecialWin,this),this.addListener(e.BaiJiaLeConst.NET_MSG.OPENSTATUS_R,this.onOpenStatus,this),this.addListener(e.BaiJiaLeConst.NET_MSG.CHARTCHANGE_R,this.onChartChange,this),this.addListener(e.BaiJiaLeConst.NET_MSG.STATECHANGE_R,this.onStatusChange,this),this.addListener(e.BaiJiaLeConst.NET_MSG.RESULT_BALL_R,this.onResultBall,this),this.addListener(e.BaiJiaLeConst.NET_MSG.LOTTERY_HIS_R,this.onLotteryHis,this),this.addListener(e.BaiJiaLeConst.NET_MSG.RemainTime_R,this.onRemainTime,this)},i.prototype.onTotalBet=function(t){this.applyFunc(e.BaiJiaLeConst.onTotalBetCallBack,t)},i.prototype.onMeBet=function(t){this.applyFunc(e.BaiJiaLeConst.onMeBetCallBack,t)},i.prototype.onRewardStart=function(t){this.applyFunc(e.BaiJiaLeConst.onRewardStartCallBack,t)},i.prototype.onCardList=function(t){Log.trace("获取牌",t),this.applyFunc(e.BaiJiaLeConst.onCardListCallBack,t)},i.prototype.onGameResult=function(t){Log.trace("结算开奖结果",t),this.applyFunc(e.BaiJiaLeConst.onGameResultCallBack,t)},i.prototype.onRoadMap=function(t){this.applyFunc(e.BaiJiaLeConst.onRoadMapCallBack,t)},i.prototype.onLeaderBoard=function(t){this.applyFunc(e.BaiJiaLeConst.onLeaderBoardCallBack,t)},i.prototype.onOnlineNumber=function(t){this.applyFunc(e.BaiJiaLeConst.onOnlineNumberCallBack,t)},i.prototype.onSpecialPlayer=function(t){this.applyFunc(e.BaiJiaLeConst.onSpecialPlayerCallBack,t)},i.prototype.onAddChip=function(t){Log.trace("筹码设置返回",t),this.applyFunc(e.BaiJiaLeConst.onAddChipCallBack,t)},i.prototype.onReconect=function(t){Log.trace("重连",t),this.applyFunc(e.BaiJiaLeConst.onReconectBack,t)},i.prototype.onTermno=function(t){this.applyFunc(e.BaiJiaLeConst.onTermnoBack,t)},i.prototype.onGameStateChange=function(t){this.applyFunc(e.BaiJiaLeConst.onGameStateBack,t)},i.prototype.onChangeTable=function(t){Log.trace("onChangeTable",t),App.EasyLoading.hideLoading(),0!=t.bookmark.length&&this.applyFunc(e.BaiJiaLeConst.onChangeTableBack,t)},i.prototype.onEnterTable=function(t){this.applyFunc(e.BaiJiaLeConst.onEnterTableBack,t),App.EasyLoading.hideLoading()},i.prototype.onSpecialWin=function(t){this.applyFunc(e.BaiJiaLeConst.onSpecialWinBack,t)},i.prototype.onOpenStatus=function(t){this.applyFunc(e.BaiJiaLeConst.onOpenStatusBack,t)},i.prototype.onChartChange=function(t){this.applyFunc(e.BaiJiaLeConst.onChartChangeBack,t)},i.prototype.onStatusChange=function(t){this.applyFunc(e.BaiJiaLeConst.onStatusChangeBack,t)},i.prototype.onResultBall=function(t){this.applyFunc(e.BaiJiaLeConst.onResultBallBack,t)},i.prototype.onLotteryHis=function(t){this.applyFunc(e.BaiJiaLeConst.onLotteryHisBack,t),App.EasyLoading.hideLoading()},i.prototype.onRemainTime=function(t){this.applyFunc(e.BaiJiaLeConst.onRemainTimeBack,t),App.EasyLoading.hideLoading()},i.prototype.requestBet=function(t){Log.trace("请求下注",t),this.send(e.BaiJiaLeConst.NET_MSG.ME_BET,t)},i.prototype.requestExitDesk=function(){this.sendLeaveDesk(GameModuleMgr.i.getCurrDeskId())},i.prototype.requestLeaderBoard=function(t){this.send(e.BaiJiaLeConst.NET_MSG.LEADER_BOARD,t)},i.prototype.requestInitFinish=function(){this.send(e.BaiJiaLeConst.NET_MSG.INIT_FINISH)},i.prototype.requestAddChip=function(t){Log.trace("设置筹码请求",t),this.send(e.BaiJiaLeConst.NET_MSG.CHIP_SETTING,t)},i.prototype.requestChangeTable=function(t){Log.trace("换桌数据请求",t),this.send(e.BaiJiaLeConst.NET_MSG.CHANGE_TABLE,t),App.EasyLoading.showOnTimeOut()},i.prototype.requestEnterTable=function(t){Log.trace("游戏内换桌请求",t),this.send(e.BaiJiaLeConst.NET_MSG.ENTER_TABLE,t),App.EasyLoading.showOnTimeOut()},i.prototype.requestLotteryHis=function(t){this.send(e.BaiJiaLeConst.NET_MSG.LOTTERY_HIS,t),App.EasyLoading.showOnTimeOut()},i.prototype.requestRemainTime=function(){this.send(e.BaiJiaLeConst.NET_MSG.RemainTime),App.EasyLoading.showOnTimeOut()},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeListener(e.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.CHANGE_TABLE_R,this.onChangeTable,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.ENTER_TABLE_R,this.onEnterTable,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.SPECIAL_WIN_R,this.onSpecialWin,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.OPENSTATUS_R,this.onOpenStatus,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.CHARTCHANGE_R,this.onChartChange,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.STATECHANGE_R,this.onStatusChange,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.RESULT_BALL_R,this.onResultBall,this),this.removeListener(e.BaiJiaLeConst.NET_MSG.LOTTERY_HIS_R,this.onLotteryHis,this)},i}(base.GameProxy);e.BaiJiaLeNet=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeNet")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t;!function(e){e[e.baiJiaLeBg=201e4]="baiJiaLeBg",e[e.baiJiaLeChip=2010001]="baiJiaLeChip",e[e.baiJiaLeMenu=2010002]="baiJiaLeMenu",e[e.baiJiaLeAni=2010003]="baiJiaLeAni",e[e.baiJiaLePopup=2010004]="baiJiaLePopup",e[e.baiJiaLeTips=2010005]="baiJiaLeTips"}(t=e.BaiJiaLeViewConst||(e.BaiJiaLeViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(e){this._preData=null,this._data=e,this._listeners=[]}return e.create=function(t){var i=new e(t);return i},e.prototype.addDataListener=function(e,t){var i;i={callback:e,target:t};for(var a=0,o=this._listeners;a<o.length;a++){var s=o[a];if(t===s.target)return}this._listeners.push(i)},e.prototype.removeDataListener=function(e,t){for(var i=0;i<this._listeners.length;i++)if(t===this._listeners[i].target){this._listeners.splice(i,1);break}},e.prototype.getData=function(){return this._data},e.prototype.setData=function(e){e&&(this._preData=this._data,this._data=e,this.applyCallBack())},e.prototype.applyCallBack=function(){var e=this;this._listeners.forEach(function(t){t.callback.call(t.target,e._data,e._preData)})},e}();e.DataNotify=t,__reflect(t.prototype,"baiJiaLe.DataNotify")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(i){var a=e.call(this,i)||this;a._currState="";var o="wash";return a.initDBRes(o),a.armature=a.createArmature("play",o,t._mActionList),a.armature.addCompleteCallFunc(a.armaturePlayEnd,a),a}return __extends(t,e),t.prototype.getState=function(){return this._currState},t.prototype.setState=function(e){this._currState=e},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEffect(),this.armature=void 0},t.prototype.goToWash=function(){this.armature.play(t.ACTION_WASH,1),this.removeEffect(),this.setState(t.ACTION_WASH)},t.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:0,x:StageUtils.getInstance().getWidth()/10*6.8,scaleX:0,scaleY:0,rotation:45},400,egret.Ease.sineInOut)},t.prototype.stopAnim=function(){this.armature.stop()},t.prototype.removeEffect=function(){},t.prototype.playEffect=function(e){},t.ACTION_WASH="clean",t._mActionList=[t.ACTION_WASH],t}(base.BaseGameObject);e.Shuffle=t,__reflect(t.prototype,"baiJiaLe.Shuffle")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t;!function(e){e[e.Base=201e3]="Base",e[e.BaiJiaLeHelp=201001]="BaiJiaLeHelp"}(t=e.ViewConst||(e.ViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.isMove=!1,e.isBeted=!1,e}return __extends(i,t),i.prototype.onCreate=function(){t.prototype.onCreate.call(this),this.inits(),this.addEventListeners(),this.addListeners(),this.addModelListeners(),Log.trace("GameController onCreate()")},i.prototype.onInit=function(e){t.prototype.onInit.call(this),this.registers(),e&&(this._baiJiaLeModel.curryTableName=e.tableName,e.tableType&&(this._baiJiaLeModel.tableType=e.tableType,this.setCurrDeskType(e.tableType))),this.enterGame(),Log.trace("GameController onInit()")},i.prototype.enterGame=function(){App.ViewManager.open(e.BaiJiaLeViewConst.baiJiaLeBg),App.ViewManager.open(e.BaiJiaLeViewConst.baiJiaLeChip),App.ViewManager.open(e.BaiJiaLeViewConst.baiJiaLeMenu),App.ViewManager.open(e.BaiJiaLeViewConst.baiJiaLePopup),App.SoundManager.stopBg(),App.SoundManager.playBg("bg_mp3"),this._baiJiaLeBgView.setTableName(this._baiJiaLeModel.curryTableName),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this._baiJiaLeModel._isAutoChecked=!0,this._baiJiaLeMenuView._logicBtn.setAutoConfirm(this._baiJiaLeModel._isAutoChecked),this._player=GamePlayerMgr.i.getPlayer(),this._baiJiaLeMenuView._messageinfo.setUserName(this._player.getNickName()),this._baiJiaLeModel._balance=this._player.getMoney(),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._player.getMoney())),this._baiJiaLeMenuView._messageinfo.setUserImage("ui_headImg_"+this._player.getAvatar()),this._baiJiaLeMenuView._messageinfo.setUserFrame("ui_headBox_"+this._player.getAvatarBox()),this._baiJiaLeMenuView._toolBar.reChargeEffect(),this._baiJiaLeMenuView.changeTablebtnEffect(),this._baiJiaLeMenuView.initRedPacket()},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToDesk,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("showWinner",this.showWinner,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showRoadMap",this.showRoadMap,this),this.registerFunc("closeRoadMap",this.closeRoadMap,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showLotteryHelp",this.showLotteryHelp,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("rechargeMoney",this.openRecharge,this),this.registerFunc("changeTableReq",this.changeTable,this),this.registerFunc("enterTableReq",this.enterTable,this),this.registerFunc("btnShowMenu",this.btnShowMenu,this),this.registerFunc("lotteryHis",this.lotteryHis,this),this.registerFunc("operateAddcounter",this.operateAddcounter,this),this.registerFunc(e.BaiJiaLeConst.onCardListCallBack,this.onCardListCallBack,this),this.registerFunc(e.BaiJiaLeConst.onTotalBetCallBack,this.onTotalBetCallBack,this),this.registerFunc(e.BaiJiaLeConst.onMeBetCallBack,this.onMeBetCallBack,this),this.registerFunc(e.BaiJiaLeConst.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(e.BaiJiaLeConst.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(e.BaiJiaLeConst.onRoadMapCallBack,this.onRoadMapCallBack,this),this.registerFunc(e.BaiJiaLeConst.onLeaderBoardCallBack,this.onLeaderBoardCallBack,this),this.registerFunc(e.BaiJiaLeConst.onOnlineNumberCallBack,this.onOnlineNumberCallBack,this),this.registerFunc(e.BaiJiaLeConst.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(e.BaiJiaLeConst.onAddChipCallBack,this.onAddChipCallBack,this),this.registerFunc(e.BaiJiaLeConst.onReconectBack,this.onReconectCallBack,this),this.registerFunc(e.BaiJiaLeConst.onTermnoBack,this.onTermnoCallBack,this),this.registerFunc(e.BaiJiaLeConst.onGameStateBack,this.onGameStateCallBack,this),this.registerFunc(e.BaiJiaLeConst.onRemainTimeBack,this.onRemainTimeCallBack,this),this.registerFunc(e.BaiJiaLeConst.onChangeTableBack,this.onChangeTableCallBack,this),this.registerFunc(e.BaiJiaLeConst.onEnterTableBack,this.onEnterTableCallBack,this),this.registerFunc(e.BaiJiaLeConst.onSpecialWinBack,this.onSpecialWinCallBack,this),this.registerFunc(e.BaiJiaLeConst.onOpenStatusBack,this.onOpenStatusCallBack,this),this.registerFunc(e.BaiJiaLeConst.onChartChangeBack,this.onTableChartChange,this),this.registerFunc(e.BaiJiaLeConst.onStatusChangeBack,this.onTableStateChange,this),this.registerFunc(e.BaiJiaLeConst.onResultBallBack,this.onLotteryResultBallCallBack,this),this.registerFunc(e.BaiJiaLeConst.onLotteryHisBack,this.onLotteryHisCallBack,this)},i.prototype.inits=function(){t.prototype.inits.call(this),this._baiJiaLeModel=new e.GameModel(this),this._baiJiaLeNet=new e.BaiJiaLeNet(this,this._baiJiaLeModel),this.setModel(this._baiJiaLeModel),this._baiJiaLeBgView=new e.GameView(this),this._baiJiaLeChipView=new e.BaiJiaLeChipView(this,LayerManager.UI_Main),this._baiJiaLeMenuView=new e.BaiJiaLeMenuView(this,LayerManager.UI_Popup),this._baiJiaLePopupView=new e.BaiJiaLePopupView(this,LayerManager.UI_Message),this._baiJiaLeBgView.touchChildren=!1,this._baiJiaLeBgView.touchEnabled=!1,this._baiJiaLeMenuView._jeButton.enableBtn(),this._baiJiaLeMenuView._jeButton.toggleBtn(0),this._baiJiaLeModel._selBtnIndex=0,this.isBeted=!1,this.delayTime=0,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0]},i.prototype.registers=function(){t.prototype.registers.call(this),App.ViewManager.register(e.BaiJiaLeViewConst.baiJiaLeBg,this._baiJiaLeBgView),App.ViewManager.register(e.BaiJiaLeViewConst.baiJiaLeChip,this._baiJiaLeChipView),App.ViewManager.register(e.BaiJiaLeViewConst.baiJiaLeMenu,this._baiJiaLeMenuView),App.ViewManager.register(e.BaiJiaLeViewConst.baiJiaLePopup,this._baiJiaLePopupView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addModelListeners=function(){this._baiJiaLeModel._gameStatusInfoDataNotify.addDataListener(this.gameStatusCallback,this),this._baiJiaLeModel._betPlaceInfosDataNotify.addDataListener(this.betPlaceInfosCallBack,this),this._baiJiaLeModel._selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this),this._baiJiaLeModel._isBetDataNotify.addDataListener(this.isBetCallBack,this)},i.prototype.addListeners=function(){t.prototype.addListeners.call(this),this._baiJiaLeNet.addEvent()},i.prototype.removeListeners=function(){t.prototype.removeListeners.call(this),this._baiJiaLeNet.removeEvent()},i.prototype.GameFrameResume=function(){t.prototype.GameFrameResume.call(this),Log.trace("百家乐恢复到前台"),this.clearTable(),this._baiJiaLeModel.isBackstage=!0,R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this._baiJiaLeNet.requestRemainTime()},i.prototype.onReconstruction=function(){t.prototype.onReconstruction.call(this),this._baiJiaLeModel.isBackstage=!1},i.prototype.onGameStateCallBack=function(t){Log.trace("状态改变",t),2==t.state&&(this._baiJiaLeModel.isRecord=!0,this._baiJiaLeModel.curryGameStatus=2,this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeModel._isBet=2,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeModel.flyStarList=[],this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!0),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(e.BaiJiaLeConst.GAME_STATE.BET),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeBgView.resetHighLightArea(),this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeBgView.initCoinBox(),this.initPreBet(),this.initSelfBet(),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)<=0&&this._baiJiaLeMenuView._logicBtn.betAsh(),t.remaining_time==t.total_time&&(App.SoundManager.playEffect("start_mp3"),this._baiJiaLeMenuView._betAni.playAni(0,"bjl")),t.remaining_time>=14699?(1==this.currDeskType&&(this.shuffle(),App.TimerManager.doTimer(2700,1,function(){this._baiJiaLeChipView.faPai()}.bind(this),this)),App.SoundManager.playEffect("cardwash_mp3")):1==this.currDeskType&&this._baiJiaLeChipView.showCard(),2==this._baiJiaLeModel.tableType&&(Log.trace("currDeskType",this.currDeskType),this._baiJiaLeBgView.hideCurryTermno(!0),this._baiJiaLeBgView.resetStar(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeModel.specialWinList=[],this._baiJiaLeModel.bankOrPlayer=[],this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList))),this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0]),5==t.state&&(this._baiJiaLeModel.curryGameStatus=5,this.initPreBet(),this._baiJiaLeBgView.clearPreBet(),this._baiJiaLeModel._isBet=1,this._baiJiaLeModel.flyStarList=[],this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(e.BaiJiaLeConst.GAME_STATE.AWARD),this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!1),this._baiJiaLeModel._onRewardActionTime=Math.floor(t.remaining_time/1e3),Log.trace("结算状态",this._baiJiaLeModel._onRewardActionTime),2==this._baiJiaLeModel.tableType&&(this._baiJiaLeBgView.hideCurryTermno(!1),this._baiJiaLeBgView.resetStar(),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeModel.specialWinList=[],this._baiJiaLeModel.bankOrPlayer=[],this.isBeted&&(this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList))),this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0],this.initPreBet(),this.initSelfBet())),this._baiJiaLeBgView._baiJiaLeTime.startTimer(t.remaining_time)},i.prototype.onCardListCallBack=function(e){if(Log.trace("获取牌结果",e),this._baiJiaLeModel._gameResultData=common.GUtils.deepClone(e),!this._baiJiaLeModel.isBackstage){var t,i,a,o=e.bankerCardList,s=e.playerCardList,n=0,r=0;this._baiJiaLeChipView.showCard();var h=this._baiJiaLeChipView.isDouble(o),l=this._baiJiaLeChipView.isDouble(s),p={winPlace:[]};if(3==e.bankerCardList.length?(r=o[2],i=2):i=1,3==e.playerCardList.length?(n=s[2],t=2):t=1,e.bankerCardNumber>e.playerCardNumber?(this._baiJiaLeModel._winner="banker",p.winPlace.push(1)):e.bankerCardNumber<e.playerCardNumber?(this._baiJiaLeModel._winner="player",p.winPlace.push(2)):(this._baiJiaLeModel._winner="he",p.winPlace.push(3)),h&&p.winPlace.push(4),l&&p.winPlace.push(5),this._baiJiaLeModel.isRecord&&(Log.trace("当前开奖记录",p),this._baiJiaLeModel._recordHistory.push(p),this._baiJiaLeModel._recordHistory.length>60&&this._baiJiaLeModel._recordHistory.splice(0,60)),this._baiJiaLeModel._onRewardActionTime>5){if(2==this.currDeskType&&(this._baiJiaLeModel.curryRemainTime=this._baiJiaLeBgView.getCurryTime(),this._baiJiaLeBgView.getCurryTime()<=8))return this._baiJiaLeChipView.liangpai(o,s),this._baiJiaLeChipView.buPaiShow(n,r),void this._baiJiaLeChipView.setLbNum(e.playerCardNumber,e.bankerCardNumber,1);0!=n||0!=r?this.delayTime=1500:this.delayTime=0,this._baiJiaLeChipView.kaiPai(o,s),App.TimerManager.doTimer(1e3,1,function(){this._baiJiaLeChipView.buPai(n,r)}.bind(this),this),e.bankerCardList.length>2||e.playerCardList.length>2?App.TimerManager.doTimer(2e3,1,function(){this._baiJiaLeChipView.setLbNum(e.playerCardNumber,e.bankerCardNumber,1e3),1==t&&e.playerCardNumber>7?(App.SoundManager.playEffect("player_"+e.playerCardNumber+"_mp3"),a=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+e.playerCardNumber+"_mp3")}.bind(this),this),a=1200),App.TimerManager.doTimer(a,1,function(){1==i&&e.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+e.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+e.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this):App.TimerManager.doTimer(500,1,function(){this._baiJiaLeChipView.setLbNum(e.playerCardNumber,e.bankerCardNumber,1e3),1==t&&e.playerCardNumber>7?(App.SoundManager.playEffect("player_"+e.playerCardNumber+"_mp3"),a=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+e.playerCardNumber+"_mp3")}.bind(this),this),a=1200),App.TimerManager.doTimer(a,1,function(){1==i&&e.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+e.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+e.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this)}else this._baiJiaLeChipView.liangpai(o,s),this._baiJiaLeChipView.buPaiShow(n,r),this._baiJiaLeChipView.setLbNum(e.playerCardNumber,e.bankerCardNumber,1)}},i.prototype.onTotalBetCallBack=function(e){Log.trace("总下注返回",e),this._baiJiaLeModel._betPlaceInfos=e.betInfo,this._baiJiaLeModel._betPlaceInfos.length>0&&this._baiJiaLeBgView.showBetMoney(this._baiJiaLeModel._betPlaceInfos)},i.prototype.onMeBetCallBack=function(t){if(Log.trace("投注返回",t),t.isSpecial){this._baiJiaLeMenuView._toolBar.onlineShake();var i=void 0;i=this._baiJiaLeModel._betNum?this._baiJiaLeModel._betNum:1;for(var a=0;a<t.betInfo.length;a++)this._baiJiaLeBgView.betToPlaceAni(5,t.betInfo[a].betPlace,1e4*i);for(var a=0;a<t.specialRole.length;a++)this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(t.balance),t.specialRole[a]);if(t.userid!=GamePlayerMgr.i.getPlayer().getUserId())for(var a=0;a<t.betInfo.length;a++){this._baiJiaLeBgView.allBetNumShacke(t.betInfo[a].betPlace);for(var o=0;o<t.specialRole.length;o++)this._baiJiaLeBgView.betToPlaceAni(t.specialRole[o],t.betInfo[a].betPlace,t.betInfo[a].betMoney)}}else if(t.userid==GamePlayerMgr.i.getPlayer().getUserId()&&1==t.result)for(var a=0;a<t.betInfo.length;a++)this._baiJiaLeBgView.betToPlaceAni(4,t.betInfo[a].betPlace,1e4*this._baiJiaLeModel._betNum);if(t.isSpecial&&0!=t.specialRole[0])this._baiJiaLeMenuView._messageinfo.avatarShake(t.specialRole[0]);else if(t.isSpecial&&0==t.specialRole[0]){for(var a=0;a<t.betInfo.length;a++){var s=t.betInfo[a].betPlace;
-1==this._baiJiaLeModel.flyStarList.indexOf(s)&&(this._baiJiaLeBgView.starAnim(s,this.isMove),this._baiJiaLeModel.flyStarList.push(s))}t.specialRole.length>1&&this._baiJiaLeMenuView._messageinfo.avatarShake(t.specialRole[1]),this._baiJiaLeMenuView._messageinfo.avatarShake(0)}else t.specialRole.length>4&&egret.error("specialRole:",t.specialRole);switch(t.result){case 1:if(t.userid!=GamePlayerMgr.i.getPlayer().getUserId())return;this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0];for(var a=0;a<t.betInfo.length;a++)if(this._baiJiaLeModel._meBetInfos[t.betInfo[a].betPlace]=t.betInfo[a].betMoney,this._baiJiaLeBgView.allBetNumShacke(t.betInfo[a].betPlace),t.isSpecial)for(var o=0;o<t.specialRole.length;o++)this._baiJiaLeBgView.betToPlaceAni(t.specialRole[o],t.betInfo[a].betPlace,1e4*this._baiJiaLeModel._betNum),this._baiJiaLeBgView.betToPlaceAni(4,t.betInfo[a].betPlace,1e4*this._baiJiaLeModel._betNum);this._baiJiaLeModel._meBetInfos.forEach(function(e,t){e>0&&(this._baiJiaLeModel._selfBetList[t]=e+this._baiJiaLeModel._selfBetList[t])}.bind(this)),this._baiJiaLeModel._selfBetAll=App.ArrayUtils.sumOfArray(this._baiJiaLeModel._selfBetList),this._baiJiaLeBgView.showSelfBet(this._baiJiaLeModel._selfBetList),this._baiJiaLeModel._balance=t.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)),this._baiJiaLeMenuView._messageinfo.setUserBet(App.CommonUtils.money2Str(this._baiJiaLeModel._selfBetAll)),this.initPreBet(),this._baiJiaLeBgView.clearPreBet(),this.isBeted=!0,e.Application.baccaratCounterBet(this._baiJiaLeModel._betNum,this.currDeskType);break;case 3:e.Application.textReminder(3,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up);break;case 4:e.Application.textReminder(4);break;case 5:e.Application.textReminder(5);break;case 6:e.Application.textReminder(6,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up);break;case 7:e.Application.textReminder(7,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].down);break;case 9:e.Application.textReminder(9)}},i.prototype.onGameResultCallBack=function(e){this._baiJiaLeModel._currWinAreaList=e.gameResultInfoList,this._baiJiaLeModel._currBetAreaList=e.playerBetResultInfoList,this._baiJiaLeModel._awardMoney=0,this._baiJiaLeModel._balance=e.balance,this._baiJiaLeModel.bankOrPlayer=[],e.playerBetResultInfoList.forEach(function(e){this._baiJiaLeModel._awardMoney+=e.resultMoney}.bind(this)),this._baiJiaLeModel._awardMoney>0&&2==this.currDeskType&&(Log.trace("当前为彩票场"),App.SoundManager.playEffect("win_game_mp3"),this.setRecordInit(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney)),this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)));var t=[];if(e.gameResultInfoList.forEach(function(i){e.playerBetResultInfoList[i-1].resultMoney>0&&t.push(i)}.bind(this)),t.length>0&&t.forEach(function(e){this._baiJiaLeBgView.createWinChip(e,4)}.bind(this)),this.isBeted&&1==this.currDeskType&&(this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList)),Log.trace("保存当局投注",this._baiJiaLeModel._lastBetRecord,JSON.stringify(this._baiJiaLeModel._selfBetList))),1==this.currDeskType&&5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0]),2==this.currDeskType&&2==this._baiJiaLeModel.curryGameStatus&&this._baiJiaLeModel._awardMoney>0&&(this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.getMoneyLight(4)),2==this.currDeskType){var i={winPlace:[]};i.winPlace=this._baiJiaLeModel._currWinAreaList,this._baiJiaLeModel._recordHistory.push(i),this._baiJiaLeModel._recordHistory.length>60&&this._baiJiaLeModel._recordHistory.splice(0,60),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory)}},i.prototype.showWinner=function(){Log.trace("showWinner",this._baiJiaLeModel._currWinAreaList),this.isBeted=!1;var e=this.delayTime;if(1!=this._baiJiaLeModel.lotteryResultStatus&&2==this.currDeskType){if(3==this._baiJiaLeModel.lotteryResultStatus)return;return void(2==this._baiJiaLeModel.lotteryResultStatus)}this._baiJiaLeModel.curryRemainTime<4&&2==this.currDeskType||(this._baiJiaLeBgView.coinAniClear(this._baiJiaLeModel._currWinAreaList),this._baiJiaLeModel.specialWinList.length>0&&R.setTimeOut(function(){for(var e=0;e<this._baiJiaLeModel.specialWinList.length;e++){var t=this._baiJiaLeModel.specialWinList;this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(t[e].winmoney),t[e].role),this._baiJiaLeMenuView._messageinfo.getMoneyLight(t[e].role);var i=t[e].balance;this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(i),t[e].role)}this._baiJiaLeModel.specialWinList=[]},this,1e3),this._baiJiaLeModel._awardMoney>0&&R.setTimeOut(function(){this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.getMoneyLight(4)},this,1e3),"player"==this._baiJiaLeModel._winner?App.TimerManager.doTimer(1+e,1,function(){App.SoundManager.playEffect("player_win_mp3"),this._baiJiaLeBgView.showResultAnim(1)}.bind(this),this):"banker"==this._baiJiaLeModel._winner?App.TimerManager.doTimer(1+e,1,function(){App.SoundManager.playEffect("banker_win_mp3"),this._baiJiaLeBgView.showResultAnim(2)}.bind(this),this):App.TimerManager.doTimer(1+e,1,function(){App.SoundManager.playEffect("tie_mp3"),this._baiJiaLeBgView.showResultAnim(3)}.bind(this),this),this._baiJiaLeModel._awardMoney>0&&1==this.currDeskType&&App.TimerManager.doTimer(1e3,1,function(){App.SoundManager.playEffect("win_game_mp3"),this.setRecordInit(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney))}.bind(this),this),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),App.TimerManager.doTimer(1500,1,function(){this._baiJiaLeModel._balance>0&&(Log.trace("余额改变",this._baiJiaLeModel._balance),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance))),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeBgView.resetStar(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0)}.bind(this),this))},i.prototype.onLeaveGameCallBack=function(){this.goBack2Room()},i.prototype.onRemainTimeCallBack=function(t){Log.trace("当前状态和剩余时间",t),this._baiJiaLeModel.isBackstage=!1,this._baiJiaLeModel.curryGameStatus=t.state;var i=this._baiJiaLeModel._gameResultData;2==this._baiJiaLeModel.curryGameStatus?(Log.trace("投注阶段"),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(e.BaiJiaLeConst.GAME_STATE.BET),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeChipView.showCard(),this._baiJiaLeBgView.resetHighLightArea()):(Log.trace("结算阶段重连亮牌",i.bankerCardList,i.playerCardList),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(e.BaiJiaLeConst.GAME_STATE.AWARD),this._baiJiaLeChipView.showCard(),this._baiJiaLeChipView.liangpai(i.bankerCardList,i.playerCardList),this._baiJiaLeChipView.buPaiShow(i.playerCardList[2],i.bankerCardList[2])),this._baiJiaLeBgView._baiJiaLeTime.startTimer(t.remaining_time)},i.prototype.onRoadMapCallBack=function(e){5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeModel.isRecord=!1);var t=e.winPlaces.length;this._baiJiaLeModel._recordHistory=t>80?e.winPlaces.slice(t-80,t-1):e.winPlaces,this._baiJiaLeModel._issue=String(e.termno)},i.prototype.onLeaderBoardCallBack=function(e){Log.trace("排行版",e),this._baiJiaLePopupView.Ranking.rankData(e.LeaderInfo)},i.prototype.onOnlineNumberCallBack=function(e){this._baiJiaLeMenuView._toolBar.changeOnlineNum(e.OnlineNumber)},i.prototype.onSpecialPlayerCallBack=function(e){var t=e.specialPlayer,i=[];for(var a in t)i[t[a].playerrole]=t[a];for(var o=0;o<i.length;o++)Log.trace("设置特殊玩家信息",o,i[o]),this._baiJiaLeMenuView._messageinfo.setInformation(i[o],o,i.length)},i.prototype.onAddChipCallBack=function(e){Log.trace("onAddChipCallBack",e),this.setFiveChipAck(e)},i.prototype.onReconectCallBack=function(e){Log.trace("重连显示自己投注");for(var t=0;t<e.betInfo.length;t++)this._baiJiaLeModel._selfBetList[e.betInfo[t].betPlace]=e.betInfo[t].betMoney,this._baiJiaLeBgView.showSelfBet(this._baiJiaLeModel._selfBetList)},i.prototype.onTermnoCallBack=function(e){Log.trace("上期期号 彩球",e),0==this._baiJiaLeModel.tableType&&(this._baiJiaLeModel.tableType=e.tableinfo.tabletype,this.setCurrDeskType(this._baiJiaLeModel.tableType),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this.setCurrDeskId(e.tableinfo.tableid)),e.table_name&&this._baiJiaLeBgView.setTableName(e.table_name),this._currIssue=e.termno,1==this.currDeskType?this._baiJiaLeBgView.setTermno(e.termno):(e.history_termno&&this._baiJiaLeBgView.setTermno(e.history_termno),this._baiJiaLeBgView.setCurryTermno(e.termno),this._baiJiaLeBgView.showLotteryBall(e.lotterydata)),e.balance&&(this._baiJiaLeModel._balance=e.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance))),this._baiJiaLeModel.limitList=[],this._baiJiaLeModel.limitList=e.limit,this._baiJiaLeModel.limitList.unshift(0)},i.prototype.onChangeTableCallBack=function(e){this._baiJiaLePopupView.BaiJiaLeChangeTable.createList(e,this.currDeskId)},i.prototype.onEnterTableCallBack=function(e){Log.trace("进入新桌子返回",e),e.is_success&&(Log.trace("进入新桌子成功"),base.GameCoinMgr.i.clean(),this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0],this._baiJiaLeMenuView._messageinfo.allPlayerDisplay(),this._baiJiaLeBgView.setTableName(this._baiJiaLeModel.curryTableName),this.setCurrDeskId(e.table_id_new),this.setCurrDeskType(e.table_type),this._baiJiaLeModel.tableType=e.table_type,this._baiJiaLePopupView.BaiJiaLeChangeTable.closePopup(),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.cleanTween(),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this._baiJiaLeBgView.resetHighLightArea(),this._baiJiaLeBgView.resetStar(),this._baiJiaLeBgView.afterShowReslt(),this._baiJiaLeBgView._baiJiaLeTime.resetTimer(),App.TimerManager.removeAll(this),this.isMove&&this.closeRoadMap())},i.prototype.onSpecialWinCallBack=function(e){Log.trace("结算消息2"+e.role,e),this._baiJiaLeModel._currWinAreaList.length>0&&e.bonus>0&&(this._baiJiaLeModel._currWinAreaList.forEach(function(t){this._baiJiaLeBgView.createWinChip(t,e.role),this._baiJiaLeBgView.createWinChip(t,5)}.bind(this)),this._baiJiaLeModel.specialWinList.push({role:e.role,winmoney:e.bonus,balance:e.balance}),2==this.currDeskType&&2==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(e.bonus),e.role),this._baiJiaLeMenuView._messageinfo.getMoneyLight(e.role),this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),e.role)))},i.prototype.onTableChartChange=function(e){0!=e.win_place.length&&this._baiJiaLePopupView.BaiJiaLeChangeTable.onTableChartChange(e)},i.prototype.onTableStateChange=function(e){this._baiJiaLePopupView.BaiJiaLeChangeTable.onTableStateChange(e)},i.prototype.onOpenStatusCallBack=function(e){Log.trace("彩票场开奖状态返回",e),this._baiJiaLeModel.lotteryResultStatus=e.code},i.prototype.onLotteryResultBallCallBack=function(e){Log.trace("彩票场彩球返回",e),this._baiJiaLeBgView.showLotteryBall(e.lotterydata),this._currIssue=e.termno,this._baiJiaLeBgView.setTermno(e.termno),App.ScrollTxtTips.showTip(e.termno+"期：已开奖")},i.prototype.onLotteryHisCallBack=function(t){if(Log.trace("彩票场历史记录返回",t),!(t.infos.length<=0)){for(var i=[],a=0;a<t.infos.length;a++){var o=JSON.parse(t.infos[a].issue_number).join(""),s=t.infos[a].winPlace==e.BaiJiaLeConst.RESULT.BankerWin?"庄":t.infos[a].winPlace==e.BaiJiaLeConst.RESULT.PlayerWin?"闲":"和",n=t.infos[a].winPlace==e.BaiJiaLeConst.RESULT.BankerWin?0:t.infos[a].winPlace==e.BaiJiaLeConst.RESULT.PlayerWin?1:2;i[a]={order:a,issue:t.infos[a].issue_id,number:o,result:s,textColor:n}}this._baiJiaLePopupView.renderLotteryRecord(i)}},i.prototype.onUserMoneyChange=function(e){Log.trace("充值",e),this._baiJiaLeModel._balance=e.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance))},i.prototype.betPlaceInfosCallBack=function(){},i.prototype.selBtnIndexCallBack=function(){this._baiJiaLeMenuView._jeButton.toggleBtn(this._baiJiaLeModel._selBtnIndex-1),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.isBetCallBack=function(){1==this._baiJiaLeModel._isBet?(this._baiJiaLeMenuView._logicBtn.disabledConserBet(),this._baiJiaLeMenuView._logicBtn.disabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.disabledRepeatBet()):2==this._baiJiaLeModel._isBet&&(this._baiJiaLeMenuView._logicBtn.enabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.enabledConserBet(),this._baiJiaLeMenuView._logicBtn.enabledRepeatBet())},i.prototype._isAutoCheckedCallBack=function(){},i.prototype.gameStatusCallback=function(){},i.prototype.clearTable=function(){this._baiJiaLeBgView.stopAnim(),this._baiJiaLeChipView.cleanTween(),this._shuffle&&(this._shuffle.parent&&this._baiJiaLeBgView.removeChild(this._shuffle),this._shuffle.stopAnim())},i.prototype.onLeaveDesk=function(){t.prototype.onLeaveDesk.call(this),this.goBack2Desk()},i.prototype.shuffle=function(){this._shuffle||(this._shuffle=new e.Shuffle(this),this._shuffle.parent||this._baiJiaLeBgView.addChild(this._shuffle)),this._shuffle.init(),this._shuffle.anchorOffsetX=this._shuffle.width/2,this._shuffle.anchorOffsetX=this._shuffle.height/2,this._shuffle.x=StageUtils.getInstance().getWidth()/10*5.2,this._shuffle.y=StageUtils.getInstance().getHeight()/10*6,this._shuffle.scaleX=this._shuffle.scaleY=1,this._shuffle.rotation=0,this._shuffle.goToWash()},i.prototype.showRank=function(){this._baiJiaLePopupView.Ranking.showPopup();var e={index:1,size:50};this._baiJiaLeNet.requestLeaderBoard(e),R.sendPlayerAction("Baccarat"+this.currDeskType+"leaderboard_button")},i.prototype.showRecord=function(){var e=this._baiJiaLeModel.recordList;this._baiJiaLePopupView.WinningRecord.showPopup(),this._baiJiaLePopupView.WinningRecord.rankData(e),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_record_button")},i.prototype.setRecordInit=function(e){var t=this._currIssue,i=e,a={issue:t,hit_money:i};this._baiJiaLeModel.recordList.unshift(a)},i.prototype.showGameSet=function(){this._baiJiaLePopupView.GameSet.initSet(),this._baiJiaLePopupView.GameSet.showPopup(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_set_button")},i.prototype.showRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:-90},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:-90},200,egret.Ease.sineInOut),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),this._baiJiaLeMenuView._roadMap.showRoadMap(),this.isMove=!0,R.sendPlayerAction("Baccarat"+this.currDeskType+"direct_maps")},i.prototype.closeRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:0},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:0},200,egret.Ease.sineInOut),this._baiJiaLeMenuView._roadMap.RoadMapMenu.scaleX=0,this._baiJiaLeMenuView._roadMap.isOpenRoad=!1,this.isMove=!1},i.prototype.confirmShowhand=function(){var e={betMoney:this._baiJiaLeModel._balance,betPlace:this._baiJiaLeModel._betPlace},t={tableid:GameModuleMgr.i.getCurrDeskId()},i=this._baiJiaLeModel._betPlace;if(this._baiJiaLeModel._isAutoChecked){var a=[],o=[];a.push(e),o.push(t);var s={betInfo:a,tableinfo:o};if(this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void App.PromTipsView.show("当前投注项限红为"+this._baiJiaLeModel.limitList[i].down/1e4+"-"+this._baiJiaLeModel.limitList[i].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i])/1e4+"达到上限",function(){s.betInfo[0].betMoney=this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i],this._baiJiaLeNet.requestBet(s)},function(){},this,!0);this._baiJiaLeNet.requestBet(s)}else{if(this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void App.PromTipsView.show("当前投注项限红为"+this._baiJiaLeModel.limitList[i].down/1e4+"-"+this._baiJiaLeModel.limitList[i].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i])/1e4+"达到上限",function(){this._baiJiaLeModel._preBetInfos[this._baiJiaLeModel._betPlace]=this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i],this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)},function(){},this,!0);this._baiJiaLeModel._preBetInfos[this._baiJiaLeModel._betPlace]=this._baiJiaLeModel._balance,this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)}},i.prototype.touch=function(e){Log.trace("触摸",e),this._baiJiaLeModel._selBtnIndex=e+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex)},i.prototype.setAutoBet=function(e){this._baiJiaLeModel._isAutoChecked=e,this._baiJiaLeMenuView._logicBtn.setAutoConfirm(this._baiJiaLeModel._isAutoChecked),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)<=0&&this._baiJiaLeMenuView._logicBtn.betAsh(),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_autoconfirm")},i.prototype.operateAddcounter=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_addcounter")},i.prototype.confirmBet=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttonconfirm");for(var e=[],t=1;10>t;t++)if(this._baiJiaLeModel._preBetInfos[t]>0){var i={betPlace:t,betMoney:this._baiJiaLeModel._preBetInfos[t]};e.push(i)}var a={tableid:GameModuleMgr.i.getCurrDeskId()},o=[];o.push(a);var s={betInfo:e,tableinfo:o};return Log.trace("确认投注","this._baiJiaLeModel._preBetInfos---",this._baiJiaLeModel._preBetInfos,"body---",s),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)>this._baiJiaLeModel._balance?void App.ScrollTxtTips.showTip("当前投注额大于当前余额"):void(0!=e.length&&this._baiJiaLeNet.requestBet(s))},i.prototype.conserBet=function(){this.initPreBet(),this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0],this._baiJiaLeBgView.clearPreBet(),this._baiJiaLeModel.bankOrPlayer.length>0&&(this._baiJiaLeModel.bankOrPlayer=[]),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttoncancel")},i.prototype.repeatBet=function(){if(Log.trace("重复投注1",this._baiJiaLeModel._lastBetRecord),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttonrepeat"),this._baiJiaLeModel._isAutoChecked){var t=[],i={tableid:GameModuleMgr.i.getCurrDeskId()},a=[];if(a.push(i),0==this._baiJiaLeModel._lastBetRecord.length)return;if(Log.trace("重复投注的总额",App.ArrayUtils.sumOfArray(this._baiJiaLeModel._lastBetRecord),this._baiJiaLeModel._balance),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._lastBetRecord)>this._baiJiaLeModel._balance&&this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[0].down/1e4)return void this._baiJiaLePopupView.Prompt.showPrompt(2,App.CommonUtils.money2Str(this._baiJiaLeModel._balance));this._baiJiaLeModel._balance<this._baiJiaLeModel.limitList[0].down/1e4&&App.PromTipsView.show("账户余额不足,是否前往充值",function(){this.openRecharge()},function(){},this,!0),this._baiJiaLeModel._lastBetRecord.forEach(function(e,i){if(Log.trace("_lastBetRecord",e,i),e>0){var a={betPlace:i,betMoney:e};t.push(a)}}.bind(this));var o={betInfo:t,tableinfo:a};t.length>0&&(this._baiJiaLeNet.requestBet(o),Log.trace("重复投注2",this._baiJiaLeModel._selfBetList,this._baiJiaLeModel._lastBetRecord))}else{var s=void 0;s=1==this.currDeskType?10:8;for(var n=1;s>n;n++){if(this._baiJiaLeModel._preBetInfos[n]>this._baiJiaLeModel.limitList[n].up)return e.Application.textReminder(3,this._baiJiaLeModel.limitList[n].up),void(this._baiJiaLeModel._preBetInfos[n]=this._baiJiaLeModel.limitList[n].up);this._baiJiaLeModel._preBetInfos[n]=this._baiJiaLeModel._lastBetRecord[n]+this._baiJiaLeModel._preBetInfos[n]}this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)>0&&(this._baiJiaLeMenuView._logicBtn.enabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.enabledConserBet()),Log.trace("重复投注3",this._baiJiaLeModel._preBetInfos)}},i.prototype.ShowHandBtn=function(e){2==this._baiJiaLeModel._isBet&&(this._baiJiaLeModel._selBtnIndex=e+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex))},i.prototype.backToDesk=function(){this._baiJiaLeNet.requestExitDesk(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_back_button")},i.prototype.bet=function(t){if(e.Application.baccaratCounterBetPlace(t,this.currDeskType),2==this._baiJiaLeModel._isBet&&(this._baiJiaLeMenuView._logicBtn.enabledConserBet(),this._baiJiaLeMenuView._logicBtn.enabledConfirmBet()),(0==App.CommonUtils.money(this._baiJiaLeModel._balance)||App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel._balance)&&App.PromTipsView.show("账户余额不足,是否前往充值",function(){this.openRecharge()},function(){},this,!0),this._baiJiaLeModel._betNum||0==this._baiJiaLeModel._betNum||(this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0]),2==this._baiJiaLeModel._isBet){this._baiJiaLeModel._betPlace=t;var i={betMoney:App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum),betPlace:t},a={tableid:GameModuleMgr.i.getCurrDeskId()},o=[];if(o.push(a),0!=this._baiJiaLeModel._betNum&&App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)<this._baiJiaLeModel._balance)if(this._baiJiaLeModel._isAutoChecked){var s=[];s.push(i);var n={betInfo:s,tableinfo:o};if(this._baiJiaLeModel._selfBetList[t]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[t].up&&this._baiJiaLeModel._selfBetList[t]<this._baiJiaLeModel.limitList[t].up)return void App.PromTipsView.show("该位置投注限红为"+this._baiJiaLeModel.limitList[t].down/1e4+"-"+this._baiJiaLeModel.limitList[t].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[t].up-this._baiJiaLeModel._selfBetList[t])/1e4+"达到上限",function(){Log.trace("body111",n),n.betInfo[0].betMoney=this._baiJiaLeModel.limitList[t].up-this._baiJiaLeModel._selfBetList[t],Log.trace("body222",n),this._baiJiaLeNet.requestBet(n)},function(){},this,!0);this._baiJiaLeNet.requestBet(n),Log.trace("普通下注",this._baiJiaLeModel._meBetInfos,this._baiJiaLeModel._selfBetList)}else{if(1==t||2==t)if(0==this._baiJiaLeModel.bankOrPlayer.length)this._baiJiaLeModel.bankOrPlayer.push(t);else if(this._baiJiaLeModel.bankOrPlayer.length>0&&t!=this._baiJiaLeModel.bankOrPlayer[0])return void App.ScrollTxtTips.showTip("不能同时投注庄和闲");if(App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel._balance)return void App.ScrollTxtTips.showTip("预投注金额大于用户余额");if(this._baiJiaLeModel._preBetInfos[t]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[t].up)return void e.Application.textReminder(3,this._baiJiaLeModel.limitList[t].up);if(this._baiJiaLeModel._selfBetList[t]+this._baiJiaLeModel._preBetInfos[t]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[t].up)return void e.Application.textReminder(3,this._baiJiaLeModel.limitList[t].up);this._baiJiaLeModel._preBetInfos[t]=this._baiJiaLeModel._preBetInfos[t]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum),Log.trace("预投注限红",this._baiJiaLeModel._preBetInfos[t]),this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)}else if(0==this._baiJiaLeModel._betNum){if(0==this._baiJiaLeModel._balance)return;if(this._baiJiaLeModel._selfBetList[this._baiJiaLeModel._betPlace]>=this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void e.Application.textReminder(3,this._baiJiaLeModel.limitList[t].up);this._baiJiaLePopupView.Prompt.showPrompt(2,App.CommonUtils.money2Str(this._baiJiaLeModel._balance))}}},i.prototype.getFiveChip=function(e){var t="";t=JSON.stringify(e);var i={tableid:GameModuleMgr.i.getCurrDeskId()},a={chip:t,tableinfo:i};this._baiJiaLeNet.requestAddChip(a)},i.prototype.setFiveChipAck=function(e){Log.trace("设置筹码返回",e);var t;t=e.chip?JSON.parse(e.chip):[0,3,6,8,9],this._baiJiaLeModel._chipArray=t,this._baiJiaLeMenuView._jeButton.setBtnChip(t),this._baiJiaLeMenuView._jeButton.setchipValue(this._baiJiaLeModel._multiple),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.changeMultiple=function(e){this._baiJiaLeModel._multiple=e,this._baiJiaLeMenuView._jeButton.setchipValue(e)},i.prototype.getChipValue=function(t){Log.trace("当前筹码数组",t),this._baiJiaLeModel._currChipMoney=t,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1];for(var i=0;i<t.length;i++){var a=t[i];e.Application.baccaratCounterPick(a,this.currDeskType)}},i.prototype.getStartPos=function(){return this._baiJiaLeMenuView._messageinfo.getPoint()},i.prototype.MSGSuccess=function(e){return"1"==e?!0:!1},i.prototype.initSelfBet=function(){this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0]},i.prototype.initPreBet=function(){this._baiJiaLeModel._preBetInfos=[0,0,0,0,0,0,0,0,0,0]},i.prototype.showHelp=function(){this._baiJiaLePopupView.BaiJiaLeHelp.showPopup(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_help_button")},i.prototype.showLotteryHelp=function(){this._baiJiaLePopupView.LottertHelp.showPopup(),R.sendPlayerAction("Baccarat2operate_rulehint")},i.prototype.ShowsetChip=function(){this._baiJiaLePopupView.SetChip.showMenu(),this._baiJiaLePopupView.SetChip.setDefaultChip(this._baiJiaLeModel._chipArray),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_setcounter")},i.prototype.openRecharge=function(){this.openRechargeView()},i.prototype.changeTable=function(e){this._baiJiaLePopupView.BaiJiaLeChangeTable.showPopup();var t;t=e?e:!1;var i={table_id:GameModuleMgr.i.getCurrDeskId(),is_switch_table:t};this._baiJiaLeNet.requestChangeTable(i)},i.prototype.enterTable=function(e){var t={table_id_old:e.table_id_old,table_id_new:e.table_id_new};this._baiJiaLeBgView.getCurryTime()<7&&5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeChipView.cleanTween(),this._baiJiaLeBgView.afterShowReslt(),this._baiJiaLeBgView._baiJiaLeTime.resetTimer()),this._baiJiaLeModel.curryTableName=e.table_name,this._baiJiaLeNet.requestEnterTable(t)},i.prototype.btnShowMenu=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_button")},i.prototype.lotteryHis=function(){this._baiJiaLePopupView.showLotteryRecord();var e={table_id:this.currDeskId};this._baiJiaLeNet.requestLotteryHis(e),R.sendPlayerAction("Baccarat2operate_historyaward")},i.prototype.destroy=function(){t.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._shuffle&&this._shuffle.destroy(),common.StarExpand.cleanFormPool(),this._baiJiaLeBgView._baiJiaLeTime.destroy(),this._baiJiaLeModel.destroy(),this._baiJiaLeNet.destroy(),this._baiJiaLeMenuView.destroy(),this._baiJiaLePopupView.destroy(),this._baiJiaLeChipView.destroy(),this._baiJiaLeBgView.destroy(),this._baiJiaLeModel=void 0,this._baiJiaLeNet=void 0,this._baiJiaLeMenuView=void 0,this._baiJiaLePopupView=void 0,this._baiJiaLeChipView=void 0,this._baiJiaLeBgView=void 0,this._shuffle=void 0,this._player=void 0,this.isBeted=!1,R.removeAllTimeOut(this)},i}(base.GameController);e.GameController=t,__reflect(t.prototype,"baiJiaLe.GameController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,e)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,t),i.prototype.initData=function(){this._issue="",this._isBet=0,this._balance=0,this._betPlace=0,this._selfInfo={},this._multiple=1,this._onlineNum=0,this._chipArray=[0,3,6,8,9],this._awardMoney=0,this._meBetInfos=[0,0,0,0,0,0,0,0,0,0],this._selfBetAll=0,this._selfBetList=[0,0,0,0,0,0,0,0,0,0],this._preBetInfos=[0,0,0,0,0,0,0,0,0,0],this._selBtnIndex=-1,this._awardHistory=[],this._betPlaceInfos=[],this._recordHistory=[],this._isAutoChecked=!1,this._lastBetRecord=[],this._gameStatusInfo={},this._selfPreBetList=[],this._currChipMoney=[1,10,100,1e3,0],this._currWinAreaList=[],this._currBetAreaList=[],this.isRecord=!1,this.tableType=0,this.limitList=[{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0}],this.recordList=[],this.isBackstage=!1,this.flyStarList=[],this.bankOrPlayer=[],this.specialWinList=[],this.curryTableName="",this.curryRemainTime=0,this.curryGameStatus=0,this.lotteryResultStatus=2},i.prototype.initDataNotify=function(){this._selfInfoDataNotify=e.DataNotify.create({}),this._awardHistoryDataNotify=e.DataNotify.create({}),this._onlineNumDataNotify=e.DataNotify.create(0),this._gameStatusInfoDataNotify=e.DataNotify.create(0),this._betPlaceInfosDataNotify=e.DataNotify.create(this._betPlaceInfos),this._selBtnIndexNotify=e.DataNotify.create(this._selBtnIndex),this._isBetDataNotify=e.DataNotify.create(this._isBet),this._isAutoCheckedDataNotify=e.DataNotify.create(this._isAutoChecked)},i.prototype.destroy=function(){t.prototype.destroy.call(this),this._balance=void 0,this._selfInfo=void 0,this._multiple=void 0,this._meBetInfos=void 0,this._preBetInfos=void 0,this._selfBetList=void 0,this._awardHistory=void 0,this._betPlaceInfos=void 0,this._recordHistory=void 0,this._lastBetRecord=void 0,this._gameStatusInfo=void 0,this._selfPreBetList=void 0,this._gameResultData=void 0,this._isBetDataNotify=void 0,this._currBetAreaList=void 0,this._currWinAreaList=void 0,this._selBtnIndexNotify=void 0,this._selfInfoDataNotify=void 0,this._onlineNumDataNotify=void 0,this._awardHistoryDataNotify=void 0,this._betPlaceInfosDataNotify=void 0,this._isAutoCheckedDataNotify=void 0,this._gameStatusInfoDataNotify=void 0,this._chipArray.length=0,this._chipArray=void 0,this._currChipMoney.length=0,this._currChipMoney=void 0,this.isRecord=void 0,this.tableType=void 0,this.limitList=void 0,this.recordList=void 0,this.isBackstage=void 0,this.flyStarList=void 0,this.bankOrPlayer=void 0,this.curryTableName=void 0,this.specialWinList=void 0,this.curryGameStatus=void 0,this.curryRemainTime=void 0,this.lotteryResultStatus=void 0},i}(base.GameModel);e.GameModel=t,__reflect(t.prototype,"baiJiaLe.GameModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(){function e(){}return e.getCardWithNum=function(e){var t=e>>16,i=(65535&e)>>8;if(0==t)var a="spade";else if(1==t)var a="heart";else if(2==t)var a="flower";else if(3==t)var a="block";var o="ui_hhdz_data_card_json.card_hhdz_"+a+"_"+i;return 0==t&&0==i&&(o=""),o},e.getNumObj=function(e){var t=String(e).split("");Log.trace("筹码显示的数组",t);var i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(t.length){case 1:i.g=Number(t[0]);break;case 2:i.s=Number(t[0]),i.g=Number(t[1]);break;case 3:i.b=Number(t[0]),i.s=Number(t[1]),i.g=Number(t[2]);break;case 4:i.q=Number(t[0]),i.b=Number(t[1]),i.s=Number(t[2]),i.g=Number(t[3]);break;case 5:i.w=Number(t[0]),i.q=Number(t[1]),i.b=Number(t[2]),i.s=Number(t[3]),i.g=Number(t[4]);break;case 6:i.sw=Number(t[0]),i.w=Number(t[1]),i.q=Number(t[2]),i.b=Number(t[3]),i.s=Number(t[4]),i.g=Number(t[5])}for(var a in i)0==i[a]&&delete i[a];return i},e.getBetNum=function(e,t){e.forEach(function(e){1==e.betType?t.black+=e.betNum:2==e.betType?t.red+=e.betNum:t.lucky+=e.betNum})},e.isRepeat=function(e){var t={};for(var i in e){if(t[e[i]])return!0;t[e[i]]=!0}return!1},e.textReminder=function(e,t,i){switch(e){case 1:App.ScrollTxtTips.showTip("下注位置错误");break;case 2:App.ScrollTxtTips.showTip("下注金额太小或太大溢出");break;case 3:App.ScrollTxtTips.showTip("超出单人最大限红"+t/1e4);
break;case 4:App.ScrollTxtTips.showTip("非投注阶段，请稍后");break;case 5:App.ScrollTxtTips.showTip("超出总最大限红");break;case 6:App.ScrollTxtTips.showTip("超出单人最大限红"+t/1e4);break;case 7:App.ScrollTxtTips.showTip("当前项投注限额为"+i/1e4+"-"+t/1e4);break;case 8:App.ScrollTxtTips.showTip("未知错误");break;case 9:App.ScrollTxtTips.showTip("庄闲不可同时投注")}},e.numShake=function(e){var t=e;egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,300)},e.baccaratCounterPick=function(e,t){0==e&&(e="Allin");var i="Baccarat"+t+"counter_pick"+e;R.sendPlayerAction(i)},e.baccaratCounterBet=function(e,t){0==e&&(e="allin");var i="Baccarat"+t+"counter_bet"+e;R.sendPlayerAction(i)},e.baccaratCounterBetPlace=function(e,t){var i="Baccarat"+t+this.tempBetPlace[e];Log.trace("埋点",e,i),R.sendPlayerAction(i)},e.tempBetPlace=["","bets_banker","bets_player","bets_tie","bets_bankerpair","bets_playerpair","bets_big","bets_small","bets_arbitrarypair","bets_perfectpair"],e}();e.Application=t,__reflect(t.prototype,"baiJiaLe.Application")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e,i){var a=t.call(this,e,i)||this;return a.skinName="BaiJiaLeChipViewSkin",a._baiJiaLeBtnArea.initComponent(e),a}return __extends(i,t),i.prototype.initAllPaiStatus=function(){var e=this;Log.trace("初始化牌的位置状态"),this._imageCardGroup.$children.forEach(function(t){var i=t;i.source="common_ui_cardback_png",i.x=e._pokerModel.x,i.y=e._pokerModel.y,i.scaleX=e._pokerModel.scaleX,i.scaleY=e._pokerModel.scaleY,i.rotation=e._pokerModel.rotation,i.alpha=e._pokerModel.alpha}),this._playerNumBox.alpha=0,this._bankerNumBox.alpha=0},i.prototype.faPai=function(){egret.Tween.get(this._playerPai1).wait(400).to({x:this._imgPos1.x,y:this._imgPos1.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(800).to({x:this._imgPos2.x,y:this._imgPos2.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(1200).to({x:this._imgPos3.x,y:this._imgPos3.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(1600).to({x:this._imgPos4.x,y:this._imgPos4.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,400),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,800),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1200),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1600)},i.prototype.showCard=function(){this.showCardItem(this._playerPai1,this._imgPos1),this.showCardItem(this._bankerPai1,this._imgPos2),this.showCardItem(this._playerPai2,this._imgPos3),this.showCardItem(this._bankerPai2,this._imgPos4)},i.prototype.showCardItem=function(e,t){e.x=t.x,e.y=t.y,e.scaleX=e.scaleY=1,e.rotation=0,e.alpha=1},i.prototype.buPai=function(e,t){var i=this.getCardWithNum(e),a=this.getCardWithNum(t);""!=i&&egret.Tween.get(this._playerPaiBu).wait(0).to({x:this._imgPos5.x,y:this._imgPos5.y,scaleX:1,scaleY:1,rotation:90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._playerPaiBu.source=i}.bind(this)).to({scaleY:1},200),""!=a&&egret.Tween.get(this._bankerPaiBu).wait(900).to({x:this._imgPos6.x,y:this._imgPos6.y,scaleX:1,scaleY:1,rotation:-90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._bankerPaiBu.source=a}.bind(this)).to({scaleY:1},200)},i.prototype.buPaiShow=function(e,t){var i=this.getCardWithNum(e),a=this.getCardWithNum(t);""!=i&&(this._playerPaiBu.x=this._imgPos5.x,this._playerPaiBu.y=this._imgPos5.y,this._playerPaiBu.scaleX=this._playerPaiBu.scaleY=1,this._playerPaiBu.rotation=90,this._playerPaiBu.alpha=1,this._playerPaiBu.source=i),R.setTimeOnce(function(){""!=a&&(this._bankerPaiBu.x=this._imgPos6.x,this._bankerPaiBu.y=this._imgPos6.y,this._bankerPaiBu.scaleX=this._bankerPaiBu.scaleY=1,this._bankerPaiBu.rotation=-90,this._bankerPaiBu.alpha=1,this._bankerPaiBu.source=a)},this,0)},i.prototype.kaiPai=function(e,t){egret.Tween.get(this._playerPai1).wait(200).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[0]);this._playerPai1.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(400).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[1]);this._playerPai2.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(600).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[0]);this._bankerPai1.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(800).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[1]);this._bankerPai2.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.liangpai=function(e,t){this._playerPai1.source=this.getCardWithNum(t[0]),this._playerPai2.source=this.getCardWithNum(t[1]),this._bankerPai1.source=this.getCardWithNum(e[0]),this._bankerPai2.source=this.getCardWithNum(e[1])},i.prototype.setLbNum=function(e,t,i){R.setTimeOnce(function(){this._playerNumBox.alpha=1,this._bankerNumBox.alpha=1,this._playerNum.text=e+"",this._bankerNum.text=t+""},this,i)},i.prototype.isDouble=function(t){var i=[],a=t.slice(0,2);a.forEach(function(e){i.push(this.getCardNumber(e))}.bind(this));var o=e.Application.isRepeat(i);return o},i.prototype.getCardWithNum=function(e){var t=e>>16,i=(65535&e)>>8,a=11==i?"j":12==i?"q":13==i?"k":i;if(0==t)var o="black";else if(1==t)var o="heart";else if(2==t)var o="flower";else if(3==t)var o="square";var s="common_ui_card"+o+a+"_png";return 0==t&&0==a&&(s=""),s},i.prototype.getCardNumber=function(e){var t=(65535&e)>>8;return t},i.prototype.setBtnArea=function(e){this._baiJiaLeBtnArea.setBtnArea(e)},i.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._baiJiaLeBtnArea.addEvent()},i.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._baiJiaLeBtnArea.removeEvent()},i.prototype.cleanTween=function(){egret.Tween.removeTweens(this._playerPai1),egret.Tween.removeTweens(this._bankerPai1),egret.Tween.removeTweens(this._playerPai2),egret.Tween.removeTweens(this._bankerPai2),this._playerPai1.alpha=0,this._bankerPai1.alpha=0,this._playerPai2.alpha=0,this._bankerPai2.alpha=0},i.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this._playerPai1),egret.Tween.removeTweens(this._bankerPai1),egret.Tween.removeTweens(this._playerPai2),egret.Tween.removeTweens(this._bankerPai2),this._baiJiaLeBtnArea.destroy()},i}(BaseEuiView);e.BaiJiaLeChipView=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeChipView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a._approach=null,a.skinName="BaiJiaLeMenuViewSkin",a._jeButton.initComponent(t),a._logicBtn.initComponent(t),a._toolBar.initComponent(t),a._roadMap.initComponent(t),a.initUI(),a}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("初始化BaiJiaLeMenuView");var t=this.getBaseController().getModel();this._jeButton.createChip(t._chipArray),this._jeButton.setchipValue(t._multiple),this._messageinfo.allPlayerDisplay(),this._messageinfo.initInfo(),this._messageinfo.setPluteLelf(),this._toolBar.setOnlineLelf(),this._logicBtn.open()},t.prototype.initData=function(){e.prototype.initData.call(this)},t.prototype.changeTablebtnEffect=function(){this.diceInit(),this.diceInitRenders(),this._approach.play(0)},t.prototype.diceInit=function(){this._approach||(this._approach=new common.comBones)},t.prototype.diceInitRenders=function(){if(!this._approach.parent){var e="table";this._changeTableBtn.addChild(this._approach),this._approach.updateId(e)}},t.prototype.initRedPacket=function(){this.btnRedPacket2=RedPackBone.create(),this.btnRedPacket2.init(),this._redPacketBtn.addChild(this.btnRedPacket2),this.btnRedPacket2.play(RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0},t.prototype.onChangeTableHandler=function(){Log.trace("点击换桌",this._approach.y);var e=this.getBaseController();egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:0},80).call(function(){e.applyFunc("changeTableReq",!0)},this)},t.prototype.onLotteryHisHandler=function(){this.applyFunc("lotteryHis")},t.prototype.onLotteryHelpHandler=function(){this.applyFunc("showLotteryHelp")},t.prototype.setLotteryHis=function(e){this.lotteryHisTrigger.touchEnabled=2==e?!0:!1},t.prototype.specialPlayerMoney=function(e,t){t>3||0>t||this._messageinfo.specialPlayerMoney(e,t)},t.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket2.play(RedPackBone.Animation1)},t.prototype.RedPackNotify=function(){this.btnRedPacket2.play(RedPackBone.Animation)},t.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(RedPackBone.Animation1)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._changeTableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.lotteryHisTrigger.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHisHandler,this),this.lotteryHelpTrigger.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHelpHandler,this),this._redPacketBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._changeTableBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.lotteryHisTrigger.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHisHandler,this),this.lotteryHelpTrigger.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHelpHandler,this),this._redPacketBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._jeButton.destroy(),this._logicBtn.destroy(),this._toolBar.destroy(),this._roadMap.destroy(),this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0)},t}(BaseEuiView);e.BaiJiaLeMenuView=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeMenuView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.skinName="BaiJiaLePopupViewSkin",a.Prompt.initComponent(t),a.SetChip.initComponent(t),a.BaiJiaLeHelp.initComponent(),a.BaiJiaLeChangeTable.initComponent(t),a.LotteryRecord.initComponent(t),a.LottertHelp.initComponent(t),a.initUI(),a}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.SetChip.getcoordinate(),this.SetChip.createChip(),this.LotteryRecord.initUI()},t.prototype.setDefaultChip=function(e){this.SetChip.setDefaultChip(e)},t.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.SetChip.addEvent(),this.BaiJiaLeChangeTable.addEvent(),this.LotteryRecord.addEvent()},t.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.SetChip.removeEvent(),this.BaiJiaLeChangeTable.removeEvent(),this.LotteryRecord.removeEvent()},t.prototype.showLotteryRecord=function(){this.LotteryRecord.showPopup()},t.prototype.renderLotteryRecord=function(e){this.LotteryRecord.refreshData(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this.Prompt.destroy(),this.BaiJiaLeHelp.destroy(),this.SetChip.destroy(),this.BaiJiaLeChangeTable.destroy(),this.LotteryRecord.destroy(),this.LottertHelp.destroy()},t}(BaseEuiView);e.BaiJiaLePopupView=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLePopupView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t}(BaseEuiView);e.BaiJiaLeTipsView=t,__reflect(t.prototype,"baiJiaLe.BaiJiaLeTipsView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(e){var t=function(t){function i(e){var i=t.call(this,e,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeBgViewSkin")||this;return i.currentY=0,i._delayTime=1e3,i.coinBox=[],i.allChipList=[],i.winpos=[],i._baiJiaLeTime.initComponent(e),i}return __extends(i,t),i.prototype.initUI=function(){t.prototype.initUI.call(this),this.initCoinBox(),this.initBoneAnim(),this.resetHighLightArea(),this.clearCoin(),this.createHeadPosition(),this.initBroadcast(LayerManager.UI_Tips)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var e=0;3>e;e++){var t={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(t)}for(var i=0;6>i;i++){var a={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(a)}},i.prototype.initBoneAnim=function(){this._timer=new egret.Timer(3e3,1),this._timer.addEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._heAnim=new common.comBones,this._heAnim.updateId("HeAnim",["HeAnim"]),this._xianAnim=new common.comBones,this._xianAnim.updateId("XianAnim",["XianAnim"]),this._zhuangAnim=new common.comBones,this._zhuangAnim.updateId("ZhuangAnim",["ZhuangAnim"])},i.prototype.resetHighLightArea=function(){for(var e in this._highLight.$children)this._highLight.$children[e].visible=!1},i.prototype.showHighLightArea=function(e){var t=this.getBaseController().getModel();2==t.tableType&&(App.ArrayUtils.removeOfArray(e,8),App.ArrayUtils.removeOfArray(e,9)),e.forEach(function(e){var t=this["_highLight"+e];t.visible=!0,t.tw=egret.Tween.get(t),t.tw.to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){t.visible=!1,egret.Tween.removeTweens(t)},t)}.bind(this))},i.prototype.showBetMoney=function(e){e.forEach(function(e){var t=this["_scoreGroupItem"+e.betPlace];if(e.betMoney>0){t.$children[0].text=""+Math.floor(App.CommonUtils.money(e.betMoney));var i=Math.floor(e.betMoney/1e4);this.showCoin(e.betPlace,i)}}.bind(this))},i.prototype.allBetNumShacke=function(t){var i=this["_scoreGroupItem"+t],a=i.getChildAt(0);e.Application.numShake(a)},i.prototype.renderCoinType=function(e,t,i,a){e==i._coinType?t>i._coinNum?this.addCoin(a,e,t-i._coinNum,i):t<i._coinNum&&(a.removeChildren(),i._currentY=0,this.addCoin(a,e,t,i)):(a.removeChildren(),i._currentY=0,this.addCoin(a,e,t,i)),i._coinType=e,i._coinNum=t},i.prototype.showCoin=function(t,i){var a=e.Application.getNumObj(i),o=Object.keys(a),s=this["_chipGroupItem"+t].$children[0],n=this["_chipGroupItem"+t].$children[1],r=this["_chipGroupItem"+t].$children[2];this.renderCoinType(o[0],a[o[0]],this.coinBox[t-1].coinBoxObj0,s),4>t&&(o.length>1?this.renderCoinType(o[1],a[o[1]],this.coinBox[t-1].coinBoxObj1,n):(n.removeChildren(),this.coinBox[t-1].coinBoxObj1._coinType="",this.coinBox[t-1].coinBoxObj1._coinNum=0,this.coinBox[t-1].coinBoxObj1._currentY=0),o.length>2?this.renderCoinType(o[2],a[o[2]],this.coinBox[t-1].coinBoxObj2,r):(r.removeChildren(),this.coinBox[t-1].coinBoxObj2._coinType="",this.coinBox[t-1].coinBoxObj2._coinNum=0,this.coinBox[t-1].coinBoxObj2._currentY=0))},i.prototype.addCoin=function(e,t,i,a){var o,s="";switch(t){case"sw":s="common_ui_t_9_png",o=1e5;break;case"w":s="common_ui_t_4_png",o=1e4;break;case"q":s="common_ui_t_8_png",o=1e3;break;case"b":s="common_ui_t_5_png",o=100;break;case"s":s="common_ui_t_2_png",o=10;break;case"g":s="common_ui_t_0_png",o=1}for(var n=0,r=-60,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,o,n,r),c.alpha=0,l.push(c),e.addChild(c)}l.forEach(function(e,t){if(0==a._currentY)h=0;else if(Math.random()>.65){var i=Math.random();h=i>.5?2:-2}else h=0;egret.Tween.get(l[t]).wait(100*t).to({y:a._currentY,x:h},100,egret.Ease.sineInOut),function(e){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[e].alpha=1},this,100*e)}(t),a._currentY-=5}.bind(this))},i.prototype.resetStar=function(){for(var e=1;9>=e;e++)this["_starEndPos"+e].visible=!1},i.prototype.starAnim=function(e,t){var i=this.getBaseController(),a=i.getStartPos(),o=this.getMiddlePos(e),s=this.getEndPos(e,t),n=common.StarExpand.create();if(n){n.init(this);var r=App.MathUtils.getDistance2(a,s)+400;n.run(a,o,s,r,function(){this["_starEndPos"+e].visible=!0},this)}},i.prototype.getMiddlePos=function(e){var t=this["_middlePos"+e],i=this._middlePos.localToGlobal(t.x,t.y);return i},i.prototype.getEndPos=function(e,t){var i=this["_starEndPos"+e],a=t?i.x+140:i.x,o=this._starEndPos.localToGlobal(a,i.y);return o},i.prototype.showResultAnim=function(e){switch(e){case 1:this._resultAnim.addChild(this._xianAnim),this._xianAnim&&this._xianAnim.play(1,1,"XianAnim");break;case 2:this._resultAnim.addChild(this._zhuangAnim),this._zhuangAnim&&this._zhuangAnim.play(1,1,"ZhuangAnim");break;case 3:this._resultAnim.addChild(this._heAnim),this._heAnim&&this._heAnim.play(1,1,"HeAnim")}this._timer.start()},i.prototype.afterShowReslt=function(){this._resultAnim.removeChildren(),this._timer.stop(),this._timer.reset()},i.prototype.createWinChip=function(e,t){var i=this["ChipPos"+e],a=this["_chipGroupItem"+e];if(0!=this.winpos.length){var o,s,n=this.winpos[t];o=i.x,s=i.y;for(var r=this.GroupChip.globalToLocal(n.x,n.y),h=0;5>h;h++){var l=App.MathUtils.random(0,a.width),p=App.MathUtils.random(0,a.height),c=common.chipBtn.create();c.init(h),c.setNameNum(t);var _=Math.floor(o+l),u=Math.floor(s+p),d=Math.floor(r.x),b=Math.floor(r.y);this.GroupChip.addChild(c),c.x=a.x+a.width/2,c.y=a.y+a.height/2,c.scaleX=.5,c.scaleY=.5,c.alpha=0,c.setScore(),c.setFlyX(_),c.setFlyY(u),c.setFlyChipX(d),c.setFlyChipY(b),this.allChipList.push(c)}Log.trace("GroupChip",this.GroupChip.$children)}},i.prototype.coinAniClear=function(e){e.length&&(this.coinFlicker(e),R.setTimeOnce(function(){this.coinStopFlicker(e)},this,150),this.showHighLightArea(e)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.coinFlicker=function(e){e.forEach(function(e){Log.trace("winPlace",e);var t=this["_chipGroupItem"+e];egret.Tween.get(t).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){t.visible=!0,egret.Tween.removeTweens(t)},t)}.bind(this))},i.prototype.coinStopFlicker=function(e){e.forEach(function(e){var t=this["_chipGroupItem"+e];t.alpha=1}.bind(this))},i.prototype.flyWinChip=function(){Log.trace("飞筹码1",this.allChipList),this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(e){e.moveTo()}),this.allChipList.length=0},i.prototype.createHeadPosition=function(){for(var e=0;e<this.GroupHeadPos.numChildren;e++){var t=void 0,i=void 0;switch(e){case 0:t=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:t=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:t=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:t=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:t=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:t=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var a=this.GroupHeadPos.localToGlobal(t,i);this.winpos.push(a)}},i.prototype.betToPlaceAni=function(e,t,i){base.GameCoinMgr.i.flyToPlace(e,this["ChipPos"+t],i,this.winpos,this.GroupChip)},i.prototype.showSelfBet=function(e){for(var t=e.length,i=1;t>i;i++){var a=this["_scoreGroupItem"+i];e[i]>0?a.$children[1].text=""+Math.floor(App.CommonUtils.money(e[i])):a.$children[1].text=""}},i.prototype.showPreBet=function(e){for(var t=e.length,i=1;t>i;i++){var a=this["_scoreGroupItem"+i];e[i]>0?a.$children[2].text=""+Math.floor(App.CommonUtils.money(e[i])):a.$children[2].text=""}},i.prototype.clearCoin=function(){for(var e=1;10>e;e++)if(this["_scoreGroupItem"+e].$children[0].text="",this["_scoreGroupItem"+e].$children[1].text="",this["_scoreGroupItem"+e].$children[2].text="",this["_chipGroupItem"+e].$children[0].removeChildren(),4>e)for(var t=0;3>t;t++)this.removeCoins(this["_chipGroupItem"+e].getChildAt(t))},i.prototype.removeCoins=function(e){for(;e.numChildren;){var t=e.removeChildAt(0);common.CoinFactory.i.releaseCoin(t)}},i.prototype.clearPreBet=function(){for(var e=1;10>e;e++)this["_scoreGroupItem"+e].$children[2].text=""},i.prototype.setTermno=function(e){this._issue.text="期号:"+e},i.prototype.setCurryTermno=function(e){this._curryIssue.text="期号:"+e},i.prototype.hideCurryTermno=function(e){this._curryIssue.visible=e},i.prototype.setTableName=function(e){this._curryTableName.text=e},i.prototype.getCurryTime=function(){return this._baiJiaLeTime.getCurryTime()},i.prototype.setTableBG=function(e){0!=e&&e&&(this.table_bg.source=1==e?"baijiale_ui_table_jpg":"bjl_ui_caipiaozhuo_jpg",this._scoreGroupItem8.visible=1==e,this._scoreGroupItem9.visible=1==e,this.lottery_bg.visible=2==e,this.baijialeHelpBtn.visible=2==e,this._issue.size=1==e?18:16,this._curryIssue.visible=2==e,this._baiJiaLeTime.setCurryTimer(e),2==e&&(this._issue.text="获取上期开奖结果...",this.lottery_result.visible=!1))},i.prototype.showLotteryBall=function(e){if(e){var t=JSON.parse(e);Log.trace("tempData",t);for(var i=0;4>=i;i++){var a=this.lottery_result.getChildAt(i);a.source="common_ui_cp"+t[i]+"_png"}this.lottery_result.visible=!0}},i.prototype.onChangeTableHandler=function(){Log.trace("点击换桌"),egret.Tween.get(this._changeTableBtn).to({y:this._changeTableBtn.y+10},80).to({y:this._changeTableBtn.y},80)},i.prototype.openLotteryHis=function(){Log.trace("打开彩票记录"),this.applyFunc("lotteryHis")},i.prototype.addEvent=function(){t.prototype.addEvent.call(this),Log.trace("GameView添加事件监听")},i.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var e=this.allChipList.pop();common.chipBtn.release(e)}},i.prototype.stopAnim=function(){egret.Tween.removeTweens(this),this._baiJiaLeTime.resetTimer(),this._resultAnim.removeChildren(),this._heAnim.stopGame(),this._xianAnim.stopGame(),this._zhuangAnim.stopGame()},i.prototype.destroy=function(){t.prototype.destroy.call(this),this._baiJiaLeTime.destroy(),this._chipList=null,this._chipImgList=null,this.coinBox=null,this._heAnim&&(this._heAnim.clean(),this._heAnim.destroy(),this._heAnim=void 0),this._xianAnim&&(this._xianAnim.clean(),this._xianAnim.destroy(),this._xianAnim=void 0),this._zhuangAnim&&(this._zhuangAnim.clean(),this._zhuangAnim.destroy(),this._zhuangAnim=void 0),this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._timer.stop()),this._resultAnim.removeChildren(),this._timer=null,base.GameCoinMgr.i.clean(),this.clearFlyWinChip()},i}(base.GameView);e.GameView=t,__reflect(t.prototype,"baiJiaLe.GameView")}(baiJiaLe||(baiJiaLe={}));