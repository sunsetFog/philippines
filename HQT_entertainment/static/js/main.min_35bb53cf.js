var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,s){function r(t){try{h(o.next(t))}catch(e){s(e)}}function a(t){try{h(o["throw"](t))}catch(e){s(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(r,a)}h((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return o([t,e])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,s&&(r=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(r=h.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){h.label=i[1];break}if(6===i[0]&&h.label<r[1]){h.label=r[1],r=i;break}if(r&&h.label<r[2]){h.label=r[2],h.ops.push(i);break}r[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(o){i=[6,o],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,s,r,a,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.RoomModel=e,__reflect(e.prototype,"base.RoomModel")}(base||(base={}));var fishjoy;!function(t){var e=function(){function t(t,e){this._mId=0,this._mIsDead=!0,this._mIsOver=!0,this._mParent=null,this.x=0,this.y=0,this.mSpeed=1,this.mAddSpeed=0,this.mSpeedX=1,this.mSpeedY=1,this.mRotation=0,this.mRadian=0,this._mServerId=-1,this._mIsDestroy=!1,this._mCurrTime=0,this._mIt=0,this._mId=t,this._mParent=e}return t.prototype.init=function(){this._mRender=new egret.DisplayObjectContainer,this._mRender.touchEnabled=!1,this._mRender.touchChildren=!1},t.prototype.setParent=function(t){this._mParent=t},t.prototype.refresh=function(t){this._mId=t,this._mIsDead=!1,this._mIsOver=!1},t.prototype.setTime=function(t){this._mCurrTime=t},t.prototype.it=function(){return this._mIt},t.prototype.updateAddByTime=function(t){for(var e=Math.floor(t/16),i=0;e>i;i++)this.update(this._mCurrTime+16)},t.prototype.update=function(t){this._mIt=t-this._mCurrTime,this._mCurrTime=t},t.prototype.clean=function(){this.removeRender(),this._mRender.rotation=0,this._mRender.scaleX=1,this._mRender.scaleY=1,this._mRender.removeChildren(),this._mId=0,this._mIsDead=!0,this._mIsOver=!0,this.mRotation=0,this.mRadian=0,this.mSpeedX=1,this.mSpeedY=1,this._mServerId=-1,this._mCurrTime=0,this._mIt=0},t.prototype.setServerId=function(t){this._mServerId=t},t.prototype.getServerId=function(){return this._mServerId},Object.defineProperty(t.prototype,"mId",{get:function(){return this._mId},set:function(t){this._mId=t},enumerable:!0,configurable:!0}),t.prototype.isDead=function(){return this._mIsDead},t.prototype.isOver=function(){return this._mIsOver},t.prototype.setDead=function(){this._mIsDead=!0},t.prototype.setOver=function(){this._mIsOver=!0},Object.defineProperty(t.prototype,"isLive",{get:function(){return!this._mIsDead&&!this._mIsOver},enumerable:!0,configurable:!0}),t.prototype.removeRender=function(){R.removeFromParent(this._mRender)},t.prototype.destroy=function(){this.clean(),this._mIsDestroy=!0,this._mParent=void 0,this._mRender=void 0},t}();t.FishJoyBase=e,__reflect(e.prototype,"fishjoy.FishJoyBase")}(fishjoy||(fishjoy={}));var base;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i._mArmatureList={},i}return __extends(e,t),e.prototype.initDBRes=function(t){App.DragonBonesFactory.initArmatureFileByName(t)},e.prototype.init=function(){},e.prototype.createArmature=function(t,e,i,o){void 0===o&&(o=1),this.cleanAllArmature();var n=this._mArmatureList[e];return n||(n=new DragonBonesArmatureContainer,n.register(App.DragonBonesFactory.makeArmature(t,e,o),i),this._mArmatureList[e]=n),n.parent||this.addChild(n),n},e.prototype.cleanAllArmature=function(){var t=this._mArmatureList;for(var e in t){var i=t[e];i.stop(),i.removeFromParent()}},e.prototype.clean=function(){this.cleanAllArmature(),R.removeFromParent(this)},e.prototype.destroy=function(){var t=this._mArmatureList;for(var e in t){var i=t[e];i&&i.destroy(),t[e]=void 0}this.removeChildren(),R.removeFromParent(this),this._mArmatureList=void 0},e}(egret.DisplayObjectContainer);t.BaseGameObject=e,__reflect(e.prototype,"base.BaseGameObject")}(base||(base={}));var base;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},i.prototype.onUserMoneyChange=function(t){Log.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},i.prototype.onErrorCallBack=function(t){Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},i.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},i.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},i.prototype.onExitGame=function(){Log.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},i.prototype.onGameConstEvent=function(t){t==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},i.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},i.prototype.enterGameByDeskId=function(t,e){var i={deskId:t};if(e)for(var o in e)i[o]=e[o];this.enterGameByFromDesk(i)},i.prototype.enterGameByFromDesk=function(t){GameModuleMgr.i.enterGameFromDesk(t)},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},Object.defineProperty(i.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskType=function(t){GameModuleMgr.i.setCurrDeskType(t)},i.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},i.prototype.registerRedpacket=function(){App.ControllerManager.register(lobby.LobbyControllerConst.redPacket,new lobby.RedPacketController)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge),App.ControllerManager.unregister(lobby.LobbyControllerConst.redPacket))},i}(BaseController);t.DeskController=e,__reflect(e.prototype,"base.DeskController")}(base||(base={}));var base;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this)},i.prototype.onInit=function(){e.prototype.onInit.call(this)},i.prototype.inits=function(){e.prototype.inits.call(this)},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.BaseConst.Goto_Leave_Game,this.onExitGame,this),this.registerFunc(t.BaseConst.Goto_Leave_Desk,this.onLeaveDesk,this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_Maintain_Const,this.onGameConstEvent,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},i.prototype.onUserMoneyChange=function(t){Log.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},i.prototype.onErrorCallBack=function(t){hot.HotGame.showErrorMsg(t),Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},i.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},i.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),App.MessageCenter.removeAll(this)},i.prototype.onGameConstEvent=function(t){t==ErrorManager.ec.ServerMaintain&&this.goBack2Lobby()},i.prototype.onExitGame=function(){Log.log("------------------------ 退出游戏 子类继承此方法 -------------------------")},i.prototype.onLeaveDesk=function(){Log.log("------------------------ 离开桌子 子类继承此方法 -------------------------")},i.prototype.goBack2Lobby=function(){App.SceneManager.runScene(SceneConsts.Lobby),GameModuleMgr.i.exitRoom()},i.prototype.goBack2Room=function(){GameModuleMgr.i.backRoomScene()},i.prototype.goBack2Desk=function(){GameModuleMgr.i.backDeskScene()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},Object.defineProperty(i.prototype,"currDeskType",{get:function(){return GameModuleMgr.i.getCurrDeskType()},enumerable:!0,configurable:!0}),i.prototype.setCurrDeskType=function(t){GameModuleMgr.i.setCurrDeskType(t)},i.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},i.prototype.registerRedpacket=function(){App.ControllerManager.register(lobby.LobbyControllerConst.redPacket,new lobby.RedPacketController)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge),App.ControllerManager.unregister(lobby.LobbyControllerConst.redPacket))},i}(BaseController);t.GameController=e,__reflect(e.prototype,"base.GameController")}(base||(base={}));var base;!function(t){var e=function(){function t(t){this._controller=t}return t.prototype.onCreate=function(){},t.prototype.onInit=function(){},t.prototype.inits=function(){},t.prototype.onReconstruction=function(){},t.prototype.registers=function(){},t.prototype.addListeners=function(){},t.prototype.removeListeners=function(){},t.prototype.getController=function(){return this._controller},Object.defineProperty(t.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currDeskId",{get:function(){return GameModuleMgr.i.getCurrDeskId()},enumerable:!0,configurable:!0}),t.prototype.setCurrDeskId=function(t){GameModuleMgr.i.setCurrDeskId(t)},t.prototype.destroy=function(){this._controller=void 0},t.prototype.registerFunc=function(t,e,i){this._controller.registerFunc(t,e,i)},t.prototype.applyFunc=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this._controller.applyFunc.apply(this._controller,arguments)},t.prototype.applyControllerFunc=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return this._controller.applyControllerFunc.apply(this._controller,arguments)},t}();t.GameSeparateCtrl=e,__reflect(e.prototype,"base.GameSeparateCtrl")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.goBack2Lobby=function(){GameModuleMgr.i.exitRoom(),App.SceneManager.runScene(SceneConsts.Lobby)},e.prototype.enterGameBySceneType=function(t,e){var i={sceneType:t};if(e)for(var o in e)i[o]=e[o];this.goEnterGame(i)},e.prototype.registers=function(){t.prototype.registers.call(this),this.registerFunc(GameConsEvent.Game_Frame_Pause,this.onGameFramePause,this),this.registerFunc(GameConsEvent.Game_Frame_Resume,this.GameFrameResume,this)},e.prototype.addListeners=function(){t.prototype.addListeners.call(this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorCallBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.onUserMoneyChange,this)},e.prototype.onUserMoneyChange=function(t){Log.log("------------------------ 充值成功返回: "+t+" 子类继承此方法 -------------------------")},e.prototype.onErrorCallBack=function(t){Log.log("------------------------ 错误返回 子类继承此方法 -------------------------")},e.prototype.onGameFramePause=function(){Log.log("------------------------ 游戏切换到后台 子类继承此方法 -------------------------")},e.prototype.GameFrameResume=function(){Log.log("------------------------ 游戏回切到前台 子类继承此方法 -------------------------")},e.prototype.goEnterGame=function(t){GameModuleMgr.i.enterGameFromRoom(t)},Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currSceneType",{get:function(){return GameModuleMgr.i.getCurrSceneType()},enumerable:!0,configurable:!0}),e.prototype.registerRecharge=function(){App.ControllerManager.register(lobby.LobbyControllerConst.Recharge,new lobby.RechargeController)},e.prototype.registerRedpacket=function(){App.ControllerManager.register(lobby.LobbyControllerConst.redPacket,new lobby.RedPacketController)},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.isInLobby||(App.ControllerManager.unregister(lobby.LobbyControllerConst.Recharge),App.ControllerManager.unregister(lobby.LobbyControllerConst.redPacket))},e}(BaseController);t.RoomController=e,__reflect(e.prototype,"base.RoomController")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.DeskModel=e,__reflect(e.prototype,"base.DeskModel")}(base||(base={}));var base;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseModel);t.GameModel=e,__reflect(e.prototype,"base.GameModel")}(base||(base={}));var ActionExpand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.runParabola=function(t,e,i,o,n,s){this._mPoint0=t,this._mPoint1=e,this._mPoint2=i,egret.Tween.get(this).to({parabola:1},o).wait(80).call(function(){this.clean(),n&&n.call(s)})},Object.defineProperty(e.prototype,"parabola",{get:function(){return 0},set:function(t){var e=this._mPoint0,i=this._mPoint1,o=this._mPoint2;this.x=(1-t)*(1-t)*e.x+2*t*(1-t)*i.x+t*t*o.x,this.y=(1-t)*(1-t)*e.y+2*t*(1-t)*i.y+t*t*o.y},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this._mPoint0&&egret.Point.release(this._mPoint0),this._mPoint1&&egret.Point.release(this._mPoint1),this._mPoint2&&egret.Point.release(this._mPoint2),this._mPoint0=void 0,this._mPoint1=void 0,this._mPoint2=void 0},e.prototype.destroy=function(){this.clean()},e}(egret.DisplayObjectContainer);__reflect(ActionExpand.prototype,"ActionExpand");var base;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onLeaveGame=function(e){var i=this.player;i.getUserId()==e.uid&&i.setMoney(e.balance),this.applyFunc(t.BaseConst.Goto_Leave_Game,e),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this)},i.prototype.sendLeaveGame=function(){this.send(t.ProxyKeyConst.CsWorldLeaveSceneReqType,{}),App.EasyLoading.showOnTimeOut()},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),i}(BaseProxy);t.DeskProxy=e,__reflect(e.prototype,"base.DeskProxy")}(base||(base={}));var base;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onLeaveGame=function(e){App.EasyLoading.hideLoading();var i=this.player;i.getUserId()==e.uid&&i.setMoney(e.balance),this.applyFunc(t.BaseConst.Goto_Leave_Game,e)},i.prototype.onLeaveDesk=function(){this.removeErrDeskLis(),App.EasyLoading.hideLoading(),this.applyFunc(t.BaseConst.Goto_Leave_Desk)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.addListener(t.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveSceneResType,this.onLeaveGame,this),this.removeListener(t.ProxyKeyConst.ScWorldLeaveTableResType,this.onLeaveDesk,this),this.removeErrDeskLis()},i.prototype.sendLeaveGame=function(){App.EasyLoading.showOnTimeOut(),this.send(t.ProxyKeyConst.CsWorldLeaveSceneReqType,{})},i.prototype.sendLeaveDesk=function(e){App.EasyLoading.showOnTimeOut(15e3,"",this.onErrorLeaveDesk,this),GameModuleMgr.i.backDeskSceneCreate(),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLeaveDesk,this),this.send(t.ProxyKeyConst.CsWorldLeaveTableReqType,{table_id:e})},i.prototype.onErrorLeaveDesk=function(t){this.removeErrDeskLis(),App.ControllerManager.isExists(ControllerConst.Desk)&&App.ControllerManager.unregister(ControllerConst.Desk)},i.prototype.removeErrDeskLis=function(){App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLeaveDesk,this)},i.prototype.send=function(t,i){var o=GameModuleMgr.i.mIsGameLineOut;return o?void Log.warn("游戏正在重连中..."):void e.prototype.send.call(this,t,i)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),i}(BaseProxy);t.GameProxy=e,__reflect(e.prototype,"base.GameProxy")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"player",{get:function(){return GamePlayerMgr.i.getPlayer()},enumerable:!0,configurable:!0}),e}(BaseProxy);t.RoomProxy=e,__reflect(e.prototype,"base.RoomProxy")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return s.skinName="resource/games/"+o+"/skins/"+n+".exml",s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=100),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Desk))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.DeskView=e,__reflect(e.prototype,"base.DeskView")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return o&&n&&(s.skinName="resource/games/"+o+"/skins/"+n+".exml"),s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=120),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Game))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.GameView=e,__reflect(e.prototype,"base.GameView")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i,o,n){var s=t.call(this,e,i)||this;return s.skinName="resource/games/"+o+"/skins/"+n+".exml",s}return __extends(e,t),e.prototype.initBroadcast=function(t,e,i){void 0===e&&(e=120),void 0===i&&(i=0),this._mBroadcastView||(this._mBroadcastView=new lobby.BroadcastView,this._mBroadcastView.horizontalCenter=i,this._mBroadcastView.top=e,this._mBroadcastView.init(this.getBaseController(),t,SceneConsts.Room))},Object.defineProperty(e.prototype,"mBroadcastView",{get:function(){return this._mBroadcastView},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mBroadcastView&&this._mBroadcastView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mBroadcastView&&this._mBroadcastView.removeEvent()},e.prototype.removeBroadcast=function(){this._mBroadcastView&&this._mBroadcastView.destroy(),this._mBroadcastView=void 0},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeBroadcast())},e}(BaseEuiView);t.RoomView=e,__reflect(e.prototype,"base.RoomView")}(base||(base={}));var ddz;!function(t){var e=function(){function e(){this._mMatchTimes=0}return e.prototype.checkValidity=function(t){return!1},e.prototype.match=function(t,e){return this._mMapMain?void 0:(this._mMapMain=t,this._mMapMinor=e,!1)},e.prototype.matchMore=function(t,e){this._mMapMain&&(this._mMapMain=this._mMapMain.concat(t),this._mMapMinor=this._mMapMinor?this._mMapMinor.concat(e):void 0)},e.prototype.getMatch=function(){return this._mMatchList?this._mMatchList:void 0},e.prototype.getMatchMinor=function(){return this._mMatchListMinor?this._mMatchListMinor:void 0},e.prototype.removeMinor=function(){},e.prototype.removeKing=function(e){for(var i=e.length-1;i>=0;i--){var o=e[i][0];o.val>t.PokerValue.POKER_VALUE_TWO&&e.splice(i,1)}},e.prototype.getMatchShunZi=function(t){var e=this._mMapMain,i=[],o=t.length;if(e.length<o)return null;for(var n=e.length-1,s=o-1;n>=s;n--)for(var r=void 0,a=void 0,h=[],l=n;l>0;l--){if(r=e[l],a=e[l-1],a[0].val!=r[0].val+1){n=Math.min(n,l);break}if(h=h.concat(r),h.length==s*r.length&&(h=h.concat(a)),h.length==o*r.length){i.push(h);break}}return i},e.prototype.clean=function(){this._mMapMain=void 0,this._mMapMinor=void 0,this._mMatchList=void 0,this._mMatchListMinor=void 0},e.prototype.destroy=function(){this.clean()},e}();t.CombBase=e,__reflect(e.prototype,"ddz.CombBase")}(ddz||(ddz={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e.chiplist=[1,5,10,20,50,100,200,500,1e3,0],e.skinName="chipBtn",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("common.chipBtn");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanchipBtnPool=function(){ObjectPool.clearClass("common.chipBtn","destroy")},e.prototype.init=function(t,e){this.setNameNum(t),this.setBtnValue(t),this.setBtntextValue(),this.setBtnChip(t,e)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.setBtnText=function(t){this.BtnText.text=this._mchipValue?this._mchipValue*t+"":""},e.prototype.setBtnValue=function(t){this._mchipValue=this.chiplist[t]},e.prototype.setBtntextValue=function(){this.BtnText.text=this._mchipValue?this._mchipValue+"":""},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.moveTo=function(){var t=this.mIsX,i=this.mIsY,o=this._flyX,n=this._flyY;egret.Tween.get(this).to({x:t,y:i,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this).to({x:o,y:n},300,egret.Ease.sineInOut).call(function(){e.release(this)}.bind(this))}.bind(this))},e.prototype.moveToPlace=function(t){this.setScore();var i=App.MathUtils.getDistance(this._flyX,this._flyY,this.x,this.y);egret.Tween.get(this).wait(.8*t).to({x:this._flyX,y:this._flyY,alpha:1},.8*i,egret.Ease.sineOut).call(function(){e.release(this)}.bind(this))},e.prototype.cleanTween=function(){egret.Tween.removeTweens(this)},e.prototype.setBtnChip=function(t,e){this._chip.source="common_ui_"+(e?e+t:t)+"_png",this.BtnLight.source="common_ui_g"+t+"_png"},e.prototype.setNameNum=function(t){this._mChipId=t},e.prototype.getNameNum=function(){return this._mChipId},e.prototype.getChipNum=function(t){return this._mchipValue*t},e.prototype.stopChip=function(){this._btnchip.touchEnabled=!1},e.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._chip.$bitmapData=void 0,this._chip.texture=void 0,this._chip.source=void 0,this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mchipValue=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.chipBtn=e,__reflect(e.prototype,"common.chipBtn")}(common||(common={}));var ZhifubaoModel=function(){function t(){this.account="",this.name="",this.locked=!1}return t}();__reflect(ZhifubaoModel.prototype,"ZhifubaoModel");var ControllerConst;!function(t){t[t.Loading=999900]="Loading",t[t.Login=999901]="Login",t[t.Lobby=999902]="Lobby",t[t.Game=999903]="Game",t[t.Room=999904]="Room",t[t.Desk=999905]="Desk"}(ControllerConst||(ControllerConst={}));var GameConsEvent=function(){function t(){}return t.Game_Frame_Pause="Game_Frame_Pause_Event",t.Game_Frame_Resume="Game_Frame_Resume_Event",t.Game_Player_LoginWeb_Success="Game_Player_LoginWeb_Success_Event",t.Game_Player_LoginLobby_Success="Game_Player_LoginLobby_Success_Event",t.Game_Maintain_Const="Game_Maintain_Const_Event",t.Game_Broadcast_Notification="Game_Broadcast_Notification_Event",t.Game_UserMoneyChange="UserMoneyChange",t.Game_UserUnReadEmail="Game_UserUnReadEmail",t.Game_UserUnReadMsg="Game_UserUnReadMsg",t.Game_UserChangeAccount="Game_UserChangeAccount",t}();__reflect(GameConsEvent.prototype,"GameConsEvent");var GameUpdateEvent=function(){function t(){}return t.Update_Loading_Event="Update_Loading_Event",t.Update_Main_Version="Update_Main_Version",t.Update_Game_Module_Progress="Update_Game_Module_Progress",t.Update_Game_Module_Version="Update_Game_Module_Version",t.Update_Game_Module_Complete="Update_Game_Module_Complete",t.Update_Game_Public_Complete="Update_Game_Public_Complete",t}();__reflect(GameUpdateEvent.prototype,"GameUpdateEvent");var SceneConsts;!function(t){t[t.Loading=999990]="Loading",t[t.Login=999991]="Login",t[t.Lobby=999992]="Lobby",t[t.Room=999993]="Room",t[t.Game=999994]="Game",t[t.Desk=999995]="Desk"}(SceneConsts||(SceneConsts={}));var baiJiaLe;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature.destroy(),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"baiJiaLe.EffectBones")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.TableListReq=20100,t}();t.DeskConst=e,__reflect(e.prototype,"baiJiaLe.DeskConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.Desk_ListInfo="10225",t.Desk_ListInfo_Back="10226",t.DeskChartChange="10234",t.DeskStateChange="10235",t}();t.DeskProxyKeyConst=e,__reflect(e.prototype,"baiJiaLe.DeskProxyKeyConst")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._baijialePopupView=null,Log.trace("DeskController init()"),t
}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._view=new t.DeskView(this)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackLobby",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this),this.registerFunc(t.DeskConst.TableListReq,this.tableListReq,this)},i.prototype.tableListReq=function(t){this._proxy.tableListReq(t)},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.onEnterGame=function(t,e,i){this.enterGameByDeskId(t,{tableType:e,tableName:i})},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"baiJiaLe.DeskController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.roleName="",i.repeatMessage=0,i.roomListInfo=[],i}return __extends(e,t),e.currTableType=1,e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"baiJiaLe.DeskModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.tableListReq=function(e){var i={bookmark:e.bookmark};this.send(t.DeskProxyKeyConst.Desk_ListInfo,i),App.EasyLoading.showOnTimeOut()},i.prototype.onTableListAck=function(t){Log.trace("桌子列表信息",t),App.MessageCenter.dispatch("onTableListAck",t),App.EasyLoading.hideLoading()},i.prototype.onTableChartChange=function(t){App.MessageCenter.dispatch("onTableChartChange",t)},i.prototype.onTableStateChange=function(t){App.MessageCenter.dispatch("onTableStateChange",t)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this),this.addListener(t.DeskProxyKeyConst.DeskChartChange,this.onTableChartChange,this),this.addListener(t.DeskProxyKeyConst.DeskStateChange,this.onTableStateChange,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.DeskProxyKeyConst.Desk_ListInfo_Back,this.onTableListAck,this),this.removeListener(t.DeskProxyKeyConst.DeskChartChange,this.onTableChartChange,this),this.removeListener(t.DeskProxyKeyConst.DeskStateChange,this.onTableStateChange,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"baiJiaLe.DeskProxy")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeDeskSkin")||this;return i.toggleBtns=[],i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);var i=new eui.VerticalLayout;this.deskList.layout=i,this.deskScroller.viewport=this.deskList,this.deskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.deskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.tab_classicBtn.inSelected.source="common_ui_xzjdd_png",this.tab_classicBtn.unSelected.source="common_ui_xzjdx_png",this.toggleBtns.push(this.tab_classicBtn),this.toggleBtns.push(this.tab_lotteryBtn),this.tab_classicBtn.selected=1==t.DeskModel.currTableType?!0:!1,this.tab_lotteryBtn.selected=!this.tab_classicBtn.selected,this.tab_classicBtn.touchEnabled=!this.tab_classicBtn.selected,this.tab_lotteryBtn.touchEnabled=this.tab_classicBtn.selected,this.deskList.itemRenderer=t.BaiJiaLeDeskItem,this.tempCollection=new eui.ArrayCollection,this.deskHelp.initComponent(),this.initBroadcast(this),App.OffsetLeft(this.leftBtnGroup)},i.prototype.open=function(){e.prototype.open.call(this);var i={bookmark:t.DeskModel.currTableType};this.applyFunc(t.DeskConst.TableListReq,i)},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackLobby"),t.DeskModel.currTableType=1},i.prototype.onEnterGame=function(e){App.SoundManager.playEffect("click_mp3");var i=this.deskList.selectedIndex,o=this.deskList.getElementAt(i),n=this.tempCollection.getItemAt(i).tablename;t.DeskModel.currTableType=this.tab_classicBtn.selected?1:2,this.applyFunc("onEnterGame",o.tableId,this.tab_classicBtn.selected?1:2,n)},i.prototype.createList=function(t){this.tempCollection.refresh();var e=t,i=this.initListData(e);this.tempCollection.replaceAll(i),this.deskList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.onTableChartChange=function(t){if(0==t.win_place.length||!this.tempCollection)return void Log.trace("数据有误",this.tempCollection);for(var e=this.tempCollection.source.length,i=0;e>i;i++)if(this.tempCollection.getItemAt(i).tableid==t.table_id){this.tempCollection.getItemAt(i).termno=t.issue;var o=[{winPlace:t.win_place}],n=this.tempCollection.getItemAt(i).winplace.concat(o);n.length>50&&(n=n.slice(50)),Log.trace("curryData"+i,n),this.tempCollection.getItemAt(i).winplace=n,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(i))}},i.prototype.onTableStateChange=function(t){var e=this.tempCollection.source.length;Log.trace("页签时间状态更新",t);for(var i=function(e){if(o.tempCollection.getItemAt(e)&&o.tempCollection.getItemAt(e).tableid==t.table_id){var i=Math.floor(t.total_time/1e3);if(o.tempCollection.getItemAt(e).gametime=i,o.tempCollection.getItemAt(e).gamestatus=t.state,o.tempCollection.itemUpdated(o.tempCollection.getItemAt(e)),0==i||5==t.state)return{value:void 0};App.TimerManager.doTimer(1e3,i,function(){this.tempCollection.getItemAt(e).gametime>0&&(this.tempCollection.getItemAt(e).gametime--,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(e)))}.bind(o),o)}},o=this,n=0;e>n;n++){var s=i(n);if("object"==typeof s)return s.value}},i.prototype.initListData=function(t){if(!(t.bookmark.length<=0)){for(var e=[],i=0;i<t.bookmark.length;i++)e[i]={gamestatus:t.bookmark[i].gamestatus,gametime:t.bookmark[i].gametime,total_time:t.bookmark[i].total_time,tablename:t.bookmark[i].tablename,termno:t.bookmark[i].termno,sortid:t.bookmark[i].sortid,limitmoney:t.bookmark[i].limitmoney,winplace:t.bookmark[i].winPlaces,tableid:t.tableinfo[i].tableid,tabletype:t.tableinfo[i].tabletype,tableinfo:t.tableinfo[i]};return e.sort(function(t,e){return t.sortid-e.sortid!=0?t.sortid-e.sortid:void 0}),e}},i.prototype.onClickHelp=function(){App.MouseUtils.removeMouseWheel(),this.deskHelp.showPopup()},i.prototype.toggleChangeHandler=function(e){this.deskScroller.stopAnimation(),App.TimerManager.removeAll(this);for(var i=this.toggleBtns.length,o=0;i>o;o++){var n=this.toggleBtns[o];n.selected=n==e.target,n.touchEnabled=!(n==e.target)}var s={bookmark:this.tab_classicBtn.selected?1:2};this.applyFunc(t.DeskConst.TableListReq,s)},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.deskScroller,this.deskList,t.data)},i.prototype.onCloseHelp=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.deskHelp.addEvent(),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.addListener("onTableListAck",this.createList,this),App.MessageCenter.addListener("onTableStateChange",this.onTableStateChange,this),App.MessageCenter.addListener("onTableChartChange",this.onTableChartChange,this),App.MessageCenter.addListener("closeHelpAtDesk",this.onCloseHelp,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.deskHelp.removeEvent(),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.exitBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.tab_classicBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tab_lotteryBtn.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.helpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHelp,this),App.MessageCenter.removeListener("onTableListAck",this.createList,this),App.MessageCenter.removeListener("onTableStateChange",this.onTableStateChange,this),App.MessageCenter.removeListener("closeHelpAtDesk",this.onCloseHelp,this),App.MouseUtils.removeMouseWheel()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.deskHelp.destroy(),this.toggleBtns=void 0,this.tempCollection&&(this.tempCollection.removeAll(),this.tempCollection=null),App.TimerManager.removeAll(this),t.BeadFactory.i.clear(),common.BeadFactory.i.clear(),this.deskList.removeChildren()},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"baiJiaLe.DeskView")}(baiJiaLe||(baiJiaLe={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"brnn.EffectBones")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.roomPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.create=function(){var e=t.roomPool.pop();return e||(e=new i),e.initup(),e},t.prototype.releaseCoin=function(e){return egret.is(e,"BrnnRoom")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.roomPool.unshift(e)):void Log.log(e,"is not BrnnRoom")},t.prototype.clear=function(){for(;t.roomPool.length;)t.roomPool.pop().destroy()},t._i=null,t.roomPool=null,t}();t.roomFactory=e,__reflect(e.prototype,"brnn.roomFactory");var i=function(e){function i(){var t=e.call(this)||this;return t._mIsInPool=!1,t._maskRct=new egret.Rectangle(0,0,88,17),t._tableId=0,t._typeId=0,t._isRelease=!1,t.indexMask=0,t.index=0,t.skinName="BrnnRoomIcon",t._mandi.mask=t._maskRct,t}return __extends(i,e),i.create=function(){var t=ObjectPool.pop("brnn.BrnnRoom");return t._mIsInPool=!1,t},i.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},i.cleanRoomBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRoom","destroy")},i.prototype.init=function(t){this.dataChanged(t)},i.prototype.initup=function(){this._isRelease=!1},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},i.prototype.dataChanged=function(t){t.charts&&(this.ChangeChartList(t.charts),this.ChangeStatusList(t))},i.prototype.ChangeChartList=function(t){this.visibleChildElement();for(var e=0;e<t.length;e++){var i=t[e];for(var o in i){var n=0;switch(o){case"is_win_east":n=0;break;case"is_win_south":n=1;break;case"is_win_west":n=2;break;case"is_win_north":n=3;break;default:continue}var s=this["region_"+n];s.getChildAt(e).texture=i[o]?RES.getRes("brnn_room_json.brnn_ui_dui_room"):RES.getRes("brnn_room_json.brnn_ui_cuo_room"),s.getChildAt(e).visible=!0}}},i.prototype.ChangeStatusList=function(e){if(e.bet_limit){var i=e.bet_limit/1e4,o=e.bet_max/1e4;this._limit.text="限红: "+i+"~"+o}e.table_name&&(this._scene.text=e.table_name),e.issue&&(this.Issuenumber0.text="期号："+e.issue);var n=Math.floor(e.remaining_time/1e3);this.setttleTime.text=n+"",this.gameType.text=2==e.state?"下注中":"结算中",this._tableId=e.table_id,this._typeId=e.table_type,2==e.state?(this.startTimer(n),this.setMask(e.remaining_time,e.total_time),this.maskGame.visible=!0):(this.maskGame.visible=!1,this.setttleTime.text="···"),e.table_type==t.BrnnGameTypeConst.Lottery?this.setLotteyYY():this.setClassicYY()},i.prototype.getTableId=function(){return this._tableId},i.prototype.getTypeId=function(){return this._typeId},i.prototype.setGOGameImg=function(t){this.goGame.source=t?"brnn_room_json.common_ui_dqfj":"brnn_room_json.common_ui_jryx"},i.prototype.setLimitData=function(t,e){this._limit.text="限红: "+t+"~"+e},i.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var i=this["region_"+t];i.getChildAt(e).visible=!1}},i.prototype.setMask=function(t,e){var i=Math.ceil(t/e*88),o=89-i;this._maskRct.width=o;var n=t/i;App.TimerManager.doTimer(n,i,function(){this._maskRct.width+=1,this._mandi.mask=this._maskRct},this)},i.prototype.startTimer=function(t){this.index=0;var e=t;this.setttleTime.text=e+"",this.visible=!0,this.index=e,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){return this.index--,this.index<=0?(this.index=0,this.setttleTime.text="···",void App.TimerManager.removeAll(this)):void(this.setttleTime.text=this.index+"")},i.prototype.over=function(){this.index=0,this.setttleTime.text="···"},i.prototype.setClassicYY=function(){this._sceneGroup.y=this._sceneY.y,this.IssueClassic.visible=!1,this._limitGroup.y=this._limitY.y},i.prototype.setLotteyYY=function(){this._sceneGroup.y=this._sceneY.y-13,this.IssueClassic.visible=!0,this._limitGroup.y=this._limitY.y+13},i.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.destroy=function(){this.clean()},i}(eui.Component);t.BrnnRoom=i,__reflect(i.prototype,"brnn.BrnnRoom")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mIsInPool=!1,t._maskRct=new egret.Rectangle(0,0,88,17),t._tableId=0,t._typeId=0,t._isRelease=!1,t.openTypes=[],t.indexMask=0,t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(i,e),i.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data&&(this.ChangeStatusList(),this.data.charts)){if(this.data.charts==this.openTypes)return;this.ChangeChartList(),this.setGOGameImg(),this.openTypes=this.data.charts}this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},i.prototype.ChangeChartList=function(){this.visibleChildElement(),this.roomIndex=0,App.TimerManager.doFrame(1,99,this.frameRender,this)},i.prototype.frameRender=function(){this.roomIndex<this.data.charts.length?this.renderOne():App.TimerManager.remove(this.frameRender,this)},i.prototype.renderOne=function(){if(!(this.roomIndex>this.data.charts.length-1)){var t=this.data.charts[this.roomIndex];for(var e in t){var i=0;switch(e){case"is_win_east":i=0;break;case"is_win_south":i=1;break;case"is_win_west":i=2;break;case"is_win_north":i=3;break;default:continue}var o=this["region_"+i];o.getChildAt(this.roomIndex).texture=t[e]?RES.getRes("brnn_room_json.brnn_ui_dui_room"):RES.getRes("brnn_room_json.brnn_ui_cuo_room"),o.getChildAt(this.roomIndex).visible=!0}this.roomIndex++}},i.prototype.ChangeStatusList=function(){this.data.table_name&&(this._scene.text=this.data.table_name),this._tableId=this.data.table_id,this._typeId=this.data.table_type,this.renderIssue(),this.renderTimer(),this.setLimitData(),this.data.table_type==t.BrnnGameTypeConst.Lottery?this.setLotteyYY():this.setClassicYY()},i.prototype.getTableId=function(){return this._tableId},i.prototype.getTypeId=function(){return this._typeId},i.prototype.setGOGameImg=function(){var t=this.data.oldId;this.goGame.source=t?"brnn_room_json.common_ui_dqfj":"brnn_room_json.common_ui_jryx"},i.prototype.setLimitData=function(){if(this.data.bet_limit){var t=App.CommonUtils.money(this.data.bet_limit),e=App.CommonUtils.money(this.data.bet_max);this._limit.text="限红: "+t+"~"+e}},i.prototype.renderIssue=function(){this.data.issue&&(this.Issuenumber0.text="期号:"+this.data.issue)},i.prototype.visibleChildElement=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++){var i=this["region_"+t];i.getChildAt(e).visible=!1}App.TimerManager.remove(this.frameRender,this)},i.prototype.setMask=function(t,e){var i=Math.ceil(t/e*88),o=89-i;this._maskRct.width=o;var n=t/i;App.TimerManager.doTimer(n,i,function(){this._maskRct.width+=1,this._mandi.mask=this._maskRct},this)},i.prototype.setClassicYY=function(){this._sceneGroup.y=this._sceneY.y,this.IssueClassic.visible=!1,this._limitGroup.y=this._limitY.y},i.prototype.setLotteyYY=function(){this._sceneGroup.y=this._sceneY.y-13,this.IssueClassic.visible=!0,this._limitGroup.y=this._limitY.y+13},i.prototype.renderTimer=function(){switch(this.data.state){case t.BrnnGameState.BETTING:this.betTimer(this.data.total_time,this.data.remaining_time);break;case t.BrnnGameState.EXCHANGE:this.exchangeTimer()}},i.prototype.exchangeTimer=function(){this._typeId==t.BrnnGameTypeConst.Lottery?(this.gameType.text="不在销售期",this.setttleTime.text=""):(this.gameType.text="结算中",this.setttleTime.text="···"),this.maskGame.visible=!1},i.prototype.betTimer=function(t,e){var i=this.data.remaining_time;this.gameType.text="下注中",i>=100?this.setttleTime.text="···":this.setttleTime.text=i+"",this._mandi.scaleX=e/t,this.maskGame.visible=!0},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i),!this.data},i.prototype.changeTest=function(t){this.setttleTime.text=t+""},i.prototype.onRemove=function(){this.destroy()},i.prototype.destroy=function(){Log.trace("销毁 IconRenderer"),App.TimerManager.removeAll(this)},i}(eui.ItemRenderer);t.BrnnRoomIcon=e,__reflect(e.prototype,"brnn.BrnnRoomIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnTableList")||this;return i.deskType=1,i.deskList=[],i.gameid=-1,i}return __extends(i,e),i.prototype.initUI=function(e,i){this.eventName=e;var o=new eui.VerticalLayout;this.gameList.layout=o,this.scrollerItem.viewport=this.gameList,this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.OFF,this.gameList.itemRenderer=t.BrnnRoomIcon,this.tempCollection=new eui.ArrayCollection,i==t.BrnnTableConst.Change?(this.deskType=0,this.scrollerItem.verticalScrollBar.visible=!0):this.scrollerItem.verticalScrollBar.visible=!1},i.prototype.setDeskType=function(t){this.deskType=t},i.prototype.stopScroller=function(){this.scrollerItem.stopAnimation()},i.prototype.createList=function(e,i){App.TimerManager.removeAll(this),i&&(this.gameid=i);var o=t.conFun.deepClone(e.table_info_list);this.deskList.length=0,this.deskList=o;for(var n=function(t){return function(e,i){var o=e[t],n=i[t];return o-n}},s=o.sort(n("sort_id")),r=0;r<s.length;r++){var a=s[r];a.table_id==this.gameid?a.oldId=1:a.oldId=0}this.deskList.length&&this.refreshList()},i.prototype.getCheckedList=function(){if(0==this.deskType)return this.deskList;for(var t=[],e=this.deskList,i=0;i<e.length;i++){var o=e[i];o.table_type==this.deskType&&t.push(o)}return t},i.prototype.refreshList=function(){if(this.deskList.length){this.tempCollection.refresh();var t=this.deskList;this.tempCollection.replaceAll(t),this.gameList.dataProvider=this.tempCollection;for(var e=0;e<this.deskList.length;e++){var i=this.deskList[e];this.updateItemData(i)}this.tempCollection.refresh()}},i.prototype.insertState=function(t){for(var e=this.deskList,i=0;i<e.length;i++){var o=e[i];o.table_id==t.table_id&&this.updateItemData(o,t)}},i.prototype.updateItemData=function(e,i){i&&(e.state=i.state);var o=i?i.remaining_time:e.remaining_time,n=i?i.total_time:e.total_time,s=i?i.state:e.state;switch(e.remaining_time=Math.round(o/1e3),e.total_time=Math.round(n/1e3),s){case t.BrnnGameState.BETTING:App.TimerManager.doTimer(1e3,e.remaining_time+1,function(){e.remaining_time>=0&&e.state==t.BrnnGameState.BETTING&&(e.remaining_time--,e.remaining_time<=0&&(e.remaining_time=0),this.updateRenderData())},this)}this.updateRenderData()},i.prototype.updateRenderData=function(){for(var t=this.deskList,e=0;e<t.length;e++){var i=this.tempCollection.getItemAt(e);i=t[e],this.tempCollection.itemUpdated(i)}},i.prototype.insertChart=function(t){if(this.deskList.length){for(var e=0;e<this.deskList.length;e++){var i=this.deskList[e];i.table_id==t.table_id&&(i.charts?i.charts=i.charts.concat(t.charts[0]):i.charts=t.charts,i.charts.length>9&&i.charts.splice(0,1))}this.updateRenderData()}},i.prototype.onEnterGame=function(){var t=this.gameList.selectedIndex,e=this.gameList.getElementAt(t),i=e.getTableId();this.applyFunc(this.eventName,i)},i.prototype.touchTableMove=function(t,e){common.GUtils.touchScrollMove(this.scrollerItem,t,e)},i.prototype.onTableMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t)},i.prototype.addEvent=function(){this.gameList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},i.prototype.removeEvent=function(){this.gameList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.tempCollection=void 0,this.deskList=void 0},i}(BaseEuiComponent);t.BrnnTableList=e,__reflect(e.prototype,"brnn.BrnnTableList")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.RProxyKeyConst=e,__reflect(e.prototype,"brnn.RProxyKeyConst")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.Base=500]="Base"}(e=t.RViewConst||(t.RViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("DeskController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base,this.getDeskModel()),App.ViewManager.open(t.ViewConst.brnnPopup),this.getDeskModel().tableType=this.currDeskType,this.enterGameInfo()},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._proxy=new t.DeskProxy(this,this.getModel()),this._view=new t.DeskView(this)},i.prototype.getDeskModel=function(){return this._model},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterBrnnGame",this.onEnterGame,this),this.registerFunc(t.ControllerCon.btnHallcharTReq,this.btnHallcharTReq,this),this.registerFunc(t.ControllerCon.createHallChart,this.createHallChart,this),this.registerFunc(t.ControllerCon.changeHallChart,this.changeHallChart,this),this.registerFunc(t.ControllerCon.changeHallstaus,this.changeHallstaus,this),this.registerFunc(t.ControllerCon.closeHallChart,this.closeHallChart,this)},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.getFistHallChartReq=function(t){this.getDeskModel().tableType=t,this._view.setToggleBtn(t)},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.onEnterGame=function(t){this.setCurrDeskId(t),this.setCurrDeskType(this.getDeskModel().tableType),this.enterGameByDeskId(t,{table_type:t})},i.prototype.enterGameInfo=function(){this.getDeskModel().isOpenGame=!0;var t=this.getDeskModel().initGameMss;null!=t&&this.createHallChart(t)},i.prototype.btnHallcharTReq=function(t){var e={req_id:t,table_id:0};App.EasyLoading.showOnTimeOut(),this._proxy.getHallChart(e)},i.prototype.createHallChart=function(t){this.getDeskModel().isOpenGame&&(this.getDeskModel().isBackstage=!1,this.getFistHallChartReq(t.req_id),this._view.createList(t))},i.prototype.changeHallChart=function(t){this.getDeskModel().isBackstage||this._view.insertChart(t)},i.prototype.changeHallstaus=function(t){this.getDeskModel().isBackstage||this._view.insertState(t)},i.prototype.closeHallChart=function(){this._view.reMoveLement(),App.ScrollTxtTips.showTip("游戏维护中")},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("销毁BrnnDeskController"),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"brnn.DeskController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.roleName="",i.initData(),i}return __extends(e,t),e.prototype.initData=function(){this.tableType=0,this.chartList=[],this.tableId=0,this.chartNewList={},this.isBackstage=!1,this.initGameMss=null,this.isOpenGame=!1},e.prototype.changeChartList=function(){for(var t in this.chartNewList)this.chartNewList[t].length>9&&this.chartNewList[t].splice(0,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"brnn.DeskModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getDeskModel=function(){return this._model},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onHallStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onHallChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onHHallChartNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this)},i.prototype.onHallStatusNotifyBack=function(e){Log.log("onHallStatusNotifyBack",e),this.applyFunc(t.ControllerCon.changeHallstaus,e)},i.prototype.onHallChartResBack=function(e){Log.log("onHallChartResBack",e),this.getDeskModel().initGameMss=t.conFun.deepClone(e),this.applyFunc(t.ControllerCon.createHallChart,e),App.EasyLoading.hideLoading()},i.prototype.onHHallChartNotifyBack=function(e){Log.log("onHHallChartNotifyBack",e),this.applyFunc(t.ControllerCon.changeHallChart,e)},i.prototype.onHitRateRes=function(e){Log.log("onHitDestRateResBack",e);var i=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.conFun.setBrnnHitRate(i)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.getHallChart=function(e){this.send(t.ControllerCon.NET_MSG.HALL_CHART_REQ,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"brnn.DeskProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"brnn","BrnnRoomSkin")||this;return i._gameList=[],i._lementList=[],i.TableList.initComponent(t),i.helpPop.initComponent(t),i.helpPop.initBrnnComponent(),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),Log.log("初始化大厅跑马灯信息"),this.initBroadcast(this)},i.prototype.open=function(i){e.prototype.open.call(this),this._mMoudel=i,this.btnClassical0.visible=!0,this.btnClassical1.visible=!1,this.btnClassical2.visible=!1,this.btnClassical3.visible=!0,this.TableList.initUI(t.ControllerCon.onEnterBrnnGame,t.BrnnTableConst.Hall),App.OffsetLeft(this.leftFive)},i.prototype.onHelpPay=function(){Log.log("进入帮助"),this.onClickBackHelp()},i.prototype.onClickBackHelp=function(){App.MouseUtils.removeMouseWheel(),this.helpPop.showPopup(!1)},i.prototype.onBackRoom=function(){Log.log("返回大厅"),this.applyFunc("onClickBackRoom")},i.prototype.onEnterGame=function(t){},i.prototype.createList=function(t){this.TableList.createList(t)},i.prototype.insertState=function(t){this.TableList.insertState(t)},i.prototype.insertChart=function(t){this.TableList.insertChart(t)},i.prototype.toggleBtn=function(e){var i=e.currentTarget;switch(this.TableList.stopScroller(),i){case this.btnClassical1:this.setToggleBtn(t.BrnnGameTypeConst.Classic),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Classic),this.TableList.setDeskType(t.BrnnGameTypeConst.Classic);break;case this.btnClassical3:this.setToggleBtn(t.BrnnGameTypeConst.Lottery),this.applyFunc(t.ControllerCon.btnHallcharTReq,t.BrnnGameTypeConst.Lottery),this.TableList.setDeskType(t.BrnnGameTypeConst.Lottery)}},i.prototype.setToggleBtn=function(e){e==t.BrnnGameTypeConst.Classic?(this.btnClassical0.visible=!0,this.btnClassical1.visible=!1,this.btnClassical2.visible=!1,this.btnClassical3.visible=!0):(this.btnClassical0.visible=!1,this.btnClassical1.visible=!0,this.btnClassical2.visible=!0,this.btnClassical3.visible=!1)},i.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)},i.prototype.addPageSignMove=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.createLement=function(e){this.reMoveLement(),Log.log("生成场次"),Log.log(e);for(var i=0;i<e.length;i++){var o=e[i],n=(e[i].table_id,t.BrnnRoom.create());n.init(o),n.x=0,n.y=0+195*i,this._lementList.push(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this)}},i.prototype.touchBtn=function(t){var e=t.currentTarget,i=e.getTableId();Log.log(i),this.applyFunc("onEnterBrnnGame",i)},i.prototype.ChangeChartList=function(t){for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();if(i==t.table_id){var o=this._mMoudel.chartNewList[t.table_id];this._lementList[e].ChangeChartList(o)}}},i.prototype.ChangeStatusList=function(t){for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();i==t.table_id&&this._lementList[e].ChangeStatusList(t)}},i.prototype.setLimitData=function(t){for(var e=t.bet_limit/1e4,i=t.bet_max/1e4,o=0;o<this._lementList.length;o++){var n=this._lementList[o].getTableId();n==t.table_id&&this._lementList[o].setLimitData(e,i)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.BrnnRoom.release(e))}this._lementList.length=0},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),Log.log("addEvent"),App.CommonUtils.effectButton(this.btnHelp,this.onHelpPay,this,{}),App.CommonUtils.effectButton(this.btnReturn,this.onBackRoom,this,{}),App.CommonUtils.effectButton(this.btnClassical1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.btnClassical3,this.toggleBtn,this,{}),App.MessageCenter.addListener(t.ControllerCon.addPageSignMove,this.addPageSignMove,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.TableList.addEvent(),this.helpPop.addEvent()
},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.MessageCenter.removeListener(t.ControllerCon.addPageSignMove,this.addPageSignMove,this),App.CommonUtils.removeButton(this.btnHelp),App.CommonUtils.removeButton(this.btnReturn),App.CommonUtils.removeButton(this.btnClassical1),App.CommonUtils.removeButton(this.btnClassical3),this.TableList.removeEvent(),this.helpPop.removeEvent(),App.MouseUtils.removeMouseWheel()},i.prototype.destroy=function(){e.prototype.destroy.call(this),Log.log("销毁BrnnDesk"),this.reMoveLement(),this.TableList.destroy()},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"brnn.DeskView")}(brnn||(brnn={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isRefresh=!1,t.openTypes=[],eui.Watcher.watch(t,["data"],t.onLoadedData,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(i,e),i.prototype.onLoadedData=function(){this.data&&(this.TableName.text=this.data.table_name,this.renderLimitBet(),this.data.isCurrentTable?(this.EnterGame.visible=!1,this.CurrentRoom.visible=!0):(this.EnterGame.visible=!0,this.CurrentRoom.visible=!1))},i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.renderTimer(),this.renderIssue(),this.data.issue&&JSON.stringify(this.data.issue)==JSON.stringify(this.issue)&&(this.renderIssue(),this.issue=this.data.issue),this.data.openTypes&&JSON.stringify(this.data.openTypes)!=JSON.stringify(this.openTypes)&&(this.renderChart(this.data.table_id),this.openTypes=this.data.openTypes)),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},Object.defineProperty(i.prototype,"tableId",{get:function(){return this.data.table_id},enumerable:!0,configurable:!0}),i.prototype.renderLimitBet=function(){var t=App.CommonUtils.money(this.data.limit_min_bet),e=App.CommonUtils.money(this.data.limit_max_bet);this.Limited.text="限红:"+t+"~"+e},i.prototype.renderIssue=function(){this.data.issue&&(this.Issue.text="期号:"+this.data.issue)},i.prototype.renderTimer=function(){switch(this.data.state){case t.GameStateConst.BETTING:this.betTimer(this.data.totalTime,this.data.remainingTime);break;case t.GameStateConst.EXCHANGE:this.GameStatus.text="结算中",this.StateTime.text="...",this.StateTime.y=38,this.MaskBetTimer.visible=!1}},i.prototype.betTimer=function(t,e){this.GameStatus.text="投注中",this.StateTime.text=""+Math.round(this.data.remainingTime/10),this.StateTime.y=44,this.Mandi.scaleX=e/t,this.MaskBetTimer.visible=!0},i.prototype.renderChart=function(t){var e=0,i=0,o=0;this.data.openTypes.forEach(function(t){0==t?e++:1==t?i++:o++}),this.BankerSum.text="龙"+e,this.PlayerSum.text="虎"+i,this.DrawSum.text="和"+o,this.ChartBead.renderBead(this.data.openTypes,"lhd",t),this.ChartOther.renderOtherChart(this.data.openTypes,"lhd",t)},i.prototype.destroy=function(){this.ChartBead.destroy(),this.ChartOther.destroy()},i}(eui.ItemRenderer);t.LhdDeskItem=e,__reflect(e.prototype,"lhd.LhdDeskItem")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,"LhdTableListSkin")||this;return i.deskType=1,i.deskList=[],i}return __extends(i,e),i.prototype.initUI=function(e,i){this.eventName=e;var o=new eui.VerticalLayout;this.ListItem.layout=o,this.DeskScroller.viewport=this.ListItem,this.DeskScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.DeskScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.ListItem.itemRenderer=t.LhdDeskItem,this.tempCollection=new eui.ArrayCollection,2==i?(this.deskType=0,this.DeskScroller.verticalScrollBar.visible=!0):this.DeskScroller.verticalScrollBar.visible=!1},i.prototype.setDeskType=function(t){this.deskType=t},i.prototype.createList=function(e,i){var o=t.LhdUtil.deepClone(e.tables),n=[],s=[];o.forEach(function(t){i&&i==t.table_id?t.isCurrentTable=!0:t.isCurrentTable=!1,1==t.table_type?n.push(t):s.push(t)}),n.sort(function(t,e){return t.order-e.order}),s.sort(function(t,e){return t.order-e.order}),this.deskList.length=0,this.deskList=n.concat(s),this.deskList.length&&this.refreshList()},i.prototype.getCheckedList=function(){if(0==this.deskType)return this.deskList;var t=[];return this.deskList.forEach(function(e){e.table_type==this.deskType&&t.push(e)}.bind(this)),t},i.prototype.refreshList=function(){if(this.deskList.length){this.DeskScroller.stopAnimation(),this.tempCollection.refresh();var t=this.getCheckedList();this.tempCollection.replaceAll(t),this.ListItem.dataProvider=this.tempCollection,this.tempCollection.refresh()}},i.prototype.insertState=function(t){this.deskList.forEach(function(e,i){e.table_id==t.table_id&&this.updateItemData(e,t)}.bind(this))},i.prototype.updateItemData=function(e,i){switch(e.issue=i.issue,e.state=i.state,e.remainingTime=Math.round(i.remaining_time/100),e.totalTime=Math.round(i.total_time/100),i.state){case t.GameStateConst.BETTING:App.TimerManager.doTimer(100,e.remainingTime,function(){e.remainingTime>=10&&e.state==t.GameStateConst.BETTING&&(e.remainingTime--,this.updateRenderData())},this);break;case t.GameStateConst.EXCHANGE:App.TimerManager.doTimer(1e3,e.remainingTime/10,function(){e.remainingTime>=10&&e.state==t.GameStateConst.EXCHANGE&&(e.remainingTime-=10,this.updateRenderData())}.bind(this),this)}this.updateRenderData()},i.prototype.updateRenderData=function(){for(var t=this.getCheckedList(),e=0;e<t.length;e++){var i=this.tempCollection.getItemAt(e);i=t[e],this.tempCollection.itemUpdated(i)}},i.prototype.insertChart=function(t){this.deskList.length&&(this.deskList.forEach(function(e){e.table_id==t.table_id&&(e.openTypes?e.openTypes=e.openTypes.concat(t.open_types):e.openTypes=t.open_types,e.openTypes.length>60&&e.openTypes.splice(0,60))}.bind(this)),this.updateRenderData())},i.prototype.onEnterGame=function(){var t=this.ListItem.selectedIndex,e=this.ListItem.getElementAt(t);this.applyFunc(this.eventName,e.tableId)},i.prototype.setScrollV=function(t){this.DeskScroller.viewport.scrollV=t},i.prototype.getListHeight=function(){var t=this.DeskScroller.viewport.contentHeight;return t},i.prototype.getViewportHeight=function(){var t=this.DeskScroller.viewport.height;return t},i.prototype.stopAnimation=function(){this.DeskScroller.stopAnimation()},i.prototype.addEvent=function(){this.ListItem.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},i.prototype.removeEvent=function(){this.ListItem.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),common.BeadFactory.i.clear(),App.TimerManager.removeAll(this),this.tempCollection=void 0,this.deskList=void 0},i}(BaseEuiComponent);t.LhdTableList=e,__reflect(e.prototype,"lhd.LhdTableList")}(lhd||(lhd={}));var lhd;!function(t){var e;!function(t){t[t.DESK_LIST_N=11601]="DESK_LIST_N",t[t.DESK_STATE_N=11602]="DESK_STATE_N",t[t.DESK_CHART_N=11603]="DESK_CHART_N",t[t.CHIPS_RECORD_N=11605]="CHIPS_RECORD_N",t[t.LOBBY_SET_Q=11631]="LOBBY_SET_Q",t[t.LOBBY_SET_R=11632]="LOBBY_SET_R"}(e=t.DeskProxyConst||(t.DeskProxyConst={}));var i;!function(t){t[t.onDeskListCallBack=2e4]="onDeskListCallBack",t[t.onDeskStateCallBack=20001]="onDeskStateCallBack",t[t.onDeskChartCallBack=20002]="onDeskChartCallBack",t[t.onLobbySetCallBack=20003]="onLobbySetCallBack",t[t.onEnterGame=20004]="onEnterGame"}(i=t.DeskCallBacks||(t.DeskCallBacks={}))}(lhd||(lhd={}));var lhd;!function(t){var e=function(){function t(){this.initChips()}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initChips=function(){this._chips="[0, 2, 5, 8, 9]"},t.prototype.setChips=function(t){this._chips=t},Object.defineProperty(t.prototype,"Chips",{get:function(){return this._chips},enumerable:!0,configurable:!0}),t._i=null,t}();t.LhdChips=e,__reflect(e.prototype,"lhd.LhdChips")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("DeskController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base),this.initDesk()},i.prototype.inits=function(){this._model=new t.DeskModel(this),this._view=new t.DeskView(this),this._proxy=new t.DeskProxy(this,this.getModel())},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.DeskCallBacks.onDeskListCallBack,this.onDeskListCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskStateCallBack,this.onDeskStateCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskChartCallBack,this.onDeskChartCallBack,this),this.registerFunc(t.DeskCallBacks.onLobbySetCallBack,this.onLobbySetCallBack,this),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc(t.DeskCallBacks.onEnterGame,this.onEnterGame,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this.model.isBackstage=!0,this._proxy.requestLobbySet(!1),this._proxy.requestLobbySet(!0)},Object.defineProperty(i.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),i.prototype.initDesk=function(){this._proxy.requestLobbySet(!0)},i.prototype.onDeskListCallBack=function(t){this.model.isBackstage||this._view.createList(t)},i.prototype.onDeskStateCallBack=function(t){this.model.isBackstage||this._view.insertState(t)},i.prototype.onDeskChartCallBack=function(t){this.model.isBackstage||this._view.insertChart(t)},i.prototype.onLobbySetCallBack=function(t){this.model.isBackstage=!1},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.onBack2Lobby=function(){this._proxy.sendLeaveGame()},i.prototype.onEnterGame=function(t){this.enterGameByDeskId(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._proxy=void 0},i}(base.DeskController);t.DeskController=e,__reflect(e.prototype,"lhd.DeskController")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.DeskModel);t.DeskModel=e,__reflect(e.prototype,"lhd.DeskModel")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onDeskList=function(e){this.applyFunc(t.DeskCallBacks.onDeskListCallBack,e)},i.prototype.onDeskState=function(e){this.applyFunc(t.DeskCallBacks.onDeskStateCallBack,e)},i.prototype.onDeskChart=function(e){this.applyFunc(t.DeskCallBacks.onDeskChartCallBack,e)},i.prototype.onChipsRecord=function(e){""!=e.chips&&t.LhdChips.i.setChips(e.chips)},i.prototype.onLobbySet=function(e){this.applyFunc(t.DeskCallBacks.onLobbySetCallBack,e)},i.prototype.requestLobbySet=function(e){this.send(t.DeskProxyConst.LOBBY_SET_Q,{on:e})},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.DeskProxyConst.DESK_LIST_N,this.onDeskList,this),this.addListener(t.DeskProxyConst.DESK_STATE_N,this.onDeskState,this),this.addListener(t.DeskProxyConst.DESK_CHART_N,this.onDeskChart,this),this.addListener(t.DeskProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.addListener(t.DeskProxyConst.LOBBY_SET_R,this.onLobbySet,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.DeskProxyConst.DESK_LIST_N,this.onDeskList,this),this.removeListener(t.DeskProxyConst.DESK_STATE_N,this.onDeskState,this),this.removeListener(t.DeskProxyConst.DESK_CHART_N,this.onDeskChart,this),this.removeListener(t.DeskProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.removeListener(t.DeskProxyConst.LOBBY_SET_R,this.onLobbySet,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.DeskProxy);t.DeskProxy=e,__reflect(e.prototype,"lhd.DeskProxy")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"lhd","DeskSkin")||this;return i.TableList.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.BtnClassics1.visible=!1,this.BtnClassics2.visible=!0,this.BtnTicket1.visible=!0,this.BtnTicket2.visible=!1,this.TableList.initUI(t.DeskCallBacks.onEnterGame),this.initBroadcast(this),App.OffsetLeft(this.leftFive)},i.prototype.createList=function(t){this.TableList.createList(t)},i.prototype.insertState=function(t){this.TableList.insertState(t)},i.prototype.insertChart=function(t){this.TableList.insertChart(t)},i.prototype.toggleBtn=function(t){var e=t.currentTarget;switch(e.visible=!1,e){case this.BtnClassics1:this.BtnClassics2.visible=!0,this.BtnTicket1.visible=!0,this.BtnTicket2.visible=!1,this.TableList.setDeskType(1);break;case this.BtnTicket1:this.BtnTicket2.visible=!0,this.BtnClassics1.visible=!0,this.BtnClassics2.visible=!1,this.TableList.setDeskType(2)}this.TableList.refreshList()},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.TableList.DeskScroller,this.TableList.ListItem,t.data)},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.BtnClassics1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.BtnTicket1,this.toggleBtn,this,{}),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.TableList.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.BtnClassics1),App.CommonUtils.removeButton(this.BtnTicket1),App.CommonUtils.removeButton(this.BtnReturn),App.MouseUtils.removeMouseWheel(),this.TableList.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.TableList.destroy()},i}(base.DeskView);t.DeskView=e,__reflect(e.prototype,"lhd.DeskView")}(lhd||(lhd={}));var baiJiaLe;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.baiJiaLe=i,__reflect(i.prototype,"baiJiaLe.Entrance.baiJiaLe",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){var e=t.call(this,"AwardAnimationSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.showAward=function(t,e){this.visible=!0,this._groupAward.alpha=0,this._playerWin.visible=!1,this._bankerWin.visible=!1,this._he.visible=!1,1==t?this._playerWin.visible=!0:2==t?this._bankerWin.visible=!0:this._he.visible=!0,egret.Tween.get(this._groupAward).to({alpha:1},500,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this._groupAward).to({alpha:0},300,egret.Ease.sineInOut),this.visible=!1}.bind(this),this,2e3),e&&e>0?(this._winMoney.text="+"+App.CommonUtils.money2Str(e),this._winMoney.visible=!0):this._winMoney.visible=!1},e}(BaseEuiComponent);t.AwardAnimation=e,__reflect(e.prototype,"baiJiaLe.AwardAnimation")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){return t.call(this,"BaiJiaLeBtnAreaSkin")||this}return __extends(e,t),e.prototype.onBtnClick=function(t){this.applyFunc("bet",t)},e.prototype.setBtnArea=function(t){this._btnArea8.touchEnabled=1==t,this._btnArea9.touchEnabled=1==t},e.prototype.addEvent=function(){t.prototype.addEvent.call(this);for(var e=1;e<this._btnAreaGroup.numChildren+1;e++)this["_btnArea"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick.bind(this,e),this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this);for(var e=1;e<this._btnAreaGroup.numChildren+1;e++)this["_btnArea"+e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BaiJiaLeBtnArea=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeBtnArea")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,"BaiJiaLeChangeTableSkin")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.initComponent=function(i){e.prototype.initComponent.call(this,i),this.tempCollection=new eui.ArrayCollection,this.deskList.itemRenderer=t.BaiJiaLeDeskItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.deskList},i.prototype.addEvent=function(){this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.deskList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.deskList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.touchMove=function(t){this.ScrollBox.width=1e3,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,t,100)},i.prototype.touchEnd=function(){this.ScrollBox.width=50,this.ScrollBox.x=850},i.prototype.onEnterGame=function(t){var e=this.deskList.selectedIndex,i=this.deskList.getElementAt(e),o={table_id_old:GameModuleMgr.i.getCurrDeskId(),table_id_new:i.tableId,table_name:i.tableName};this.applyFunc("enterTableReq",o)},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.deskList,t.data)},i.prototype.showPopup=function(){this.visible=!0,this.changeBg.visible=!0,this.changeMenu.scaleX=this.changeMenu.scaleY=0,App.EffectUtils.showUI(this.changeMenu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePopup=function(){this.changeBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.changeMenu,300,0,function(){t.visible=!1}),App.TimerManager.removeAll(this),this.applyFunc("changeTableReq",!1),App.MouseUtils.removeMouseWheel()},i.prototype.createList=function(t,e){Log.trace("gaming createList",t),this.tempCollection.refresh();var i=t,o=[],n=[],s=this.initListData(i);s.forEach(function(t){e&&e==t.tableid?t.isCurrentTable=!0:t.isCurrentTable=!1,1==t.tabletype?o.push(t):n.push(t)}),o.sort(function(t,e){return t.sortid-e.sortid}),s=o.concat(n),this.tempCollection.replaceAll(s),this.deskList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.initListData=function(t){if(!(t.bookmark.length<=0)){for(var e=[],i=0;i<t.bookmark.length;i++)e[i]={gamestatus:t.bookmark[i].gamestatus,gametime:t.bookmark[i].gametime,total_time:t.bookmark[i].total_time,tablename:t.bookmark[i].tablename,termno:t.bookmark[i].termno,limitmoney:t.bookmark[i].limitmoney,winplace:t.bookmark[i].winPlaces,sortid:t.bookmark[i].sortid,tableid:t.tableinfo[i].tableid,tabletype:t.tableinfo[i].tabletype,tableinfo:t.tableinfo[i],isCurrentTable:!1};for(var o=[],i=0;i<t.bookmark.length;i++){if(!(t.bookmark[i].sortid>0))return e;o[t.bookmark[i].sortid-1]=e[i]}for(var n=[],i=0;i<o.length;i++)""!=o[i]&&void 0!=o[i]&&n.push(o[i]);return e}},i.prototype.onTableChartChange=function(t){if(0!=t.win_place.length)for(var e=this.tempCollection.source.length,i=0;e>i;i++)if(this.tempCollection.getItemAt(i).tableid==t.table_id){this.tempCollection.getItemAt(i).termno=t.issue;var o=[{winPlace:t.win_place}],n=this.tempCollection.getItemAt(i).winplace.concat(o);n.length>50&&(n.length=0,n.concat(o)),this.tempCollection.getItemAt(i).winplace=n,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(i))}},i.prototype.onTableStateChange=function(t){Log.trace("状态更新",t);for(var e=this.tempCollection.source.length,i=function(e){if(o.tempCollection.getItemAt(e).tableid==t.table_id){var i=Math.floor(t.total_time/1e3);if(o.tempCollection.getItemAt(e).gametime=i,o.tempCollection.getItemAt(e).gamestatus=t.state,o.tempCollection.itemUpdated(o.tempCollection.getItemAt(e)),0==i||5==t.state)return{value:void 0};App.TimerManager.doTimer(1e3,i,function(){this.tempCollection.getItemAt(e).gametime>0&&(this.tempCollection.getItemAt(e).gametime--,this.tempCollection.itemUpdated(this.tempCollection.getItemAt(e)))}.bind(o),o)}},o=this,n=0;e>n;n++){var s=i(n);if("object"==typeof s)return s.value}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._lementList=void 0,this.tempCollection&&(this.tempCollection.removeAll(),this.tempCollection=null),App.TimerManager.removeAll(this)},i}(BaseEuiComponent);t.BaiJiaLeChangeTable=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeChangeTable")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.largeX=0,t.verticalNum=1,t.maxBottomLine=6,t.lastTableId=-1,t.beadList=[],eui.Watcher.watch(t,["data","tableinfo"],t.onLoadedData,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.destroy,t),t}return __extends(i,e),i.prototype.onLoadedData=function(){JSON.stringify(this.tempTableInfo)!=JSON.stringify(this.data.tableinfo)&&(this._tableName.text=this.data.tablename,this._date.text="期号:"+this.data.termno,this._limited.text="限红:"+this.data.limitmoney[0].down+"~"+this.data.limitmoney[0].up,this.setDeskItemInfo(),Log.trace("渲染全部？"),this.renderAll(this.data.winplace)),this.tempTableInfo=this.data.tableinfo},i.prototype.updataRoadMap=function(){this.collectResult(),this.setDeskItemInfo(),this.renderAll(this.data.winplace)},i.prototype.updataStatus=function(){var t;2==this.data.gamestatus?(t="投注中  "+this.data.gametime,this.MaskBetTimer.visible=!0,this.data.gametime>=this.data.total_time&&(this.data.total_time=this.data.gametime),this.mask_progress.scaleX=this.data.gametime/this.data.total_time):5==this.data.gamestatus&&1==this.data.tabletype&&(t="结算中...",this.MaskBetTimer.visible=!1),this._gameStatus.text=t},i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.data.isCurrentTable?(this.EnterGame.visible=!1,this.CurrentRoom.visible=!0):(this.EnterGame.visible=!0,this.CurrentRoom.visible=!1),this.updataStatus(),this._date.text="期号:"+this.data.termno,JSON.stringify(this.tempRoadInfo)!=JSON.stringify(this.data.winplace)&&this.updataRoadMap(),this.tempRoadInfo=this.data.winplace)},i.prototype.collectResult=function(){var t=this.data.winplace,e=[];e[1]=0,e[2]=0,e[3]=0;for(var i=0;i<=t.length-1;i++)1==t[i].winPlace[0]&&(e[1]=e[1]+1),2==t[i].winPlace[0]&&(e[2]=e[2]+1),3==t[i].winPlace[0]&&(e[3]=e[3]+1);return e},i.prototype.setDeskItemInfo=function(t){var e=this.collectResult();this._bankerSum.text="庄:"+e[1],this._playerSum.text="闲:"+e[2],this._drawSum.text="和:"+e[3]},Object.defineProperty(i.prototype,"tableId",{get:function(){return this.data?this.data.tableid:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableType",{get:function(){return this.data.tabletype},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableName",{get:function(){return this.data.tablename},enumerable:!0,configurable:!0}),i.prototype.renderBead=function(t){this.record=t,this.record.length?(this.lastTableId!=this.tableId?(this.isRender=!0,this.removeFrame(),this.lastTableId=this.tableId):(1==this.record.length&&(this.removeFrame(),this.isRender=!1),this.isRender&&this.removeFrame()),App.TimerManager.doFrame(1,99,this.frameRender,this)):this.removeFrame()},i.prototype.removeBead=function(){if(this.beadList.length)for(;this.beadList.length;){var e=this.beadList.pop();t.BeadFactory.i.releaseBead(e)}},i.prototype.frameRender=function(){for(var t=0;3>t;t++)this.index<this.record.length?this.renderOne():(this.isRender=!1,App.TimerManager.remove(this.frameRender,this))},i.prototype.removeFrame=function(){this.removeBead(),this.index=0,App.TimerManager.remove(this.frameRender,this)},i.prototype.renderOne=function(){this.renderPublic(this.index),this.index++},i.prototype.renderPublic=function(e){var i=t.BeadFactory.i.createBead(),o=e/6,n=24*parseInt(String(o)),s=e%6;i.x=n,i.y=24*s,i._winner.source=1==this.record[e].winPlace[0]?"bjl_ui_zhuang":2==this.record[e].winPlace[0]?"bjl_ui_xian":"bjl_ui_he",i._playerDouble.visible=this.record[e].winPlace.indexOf(5)>-1?!0:!1,i._bankerrDouble.visible=this.record[e].winPlace.indexOf(4)>-1?!0:!1,this.beadList.push(i),this.GroupBead.addChild(i)},i.prototype.renderAll=function(t){this.renderBead(t);var e=[];t.forEach(function(t,i){e[i]=t.winPlace[0]-1}),this.ChartOther.renderOtherChart(e,"bjl",this.tableId)},i.prototype.destroy=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this)},i}(eui.ItemRenderer);t.BaiJiaLeDeskItem=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeDeskItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,"BaiJiaLeHelpSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.initComponent=function(){this.help_collection=new eui.ArrayCollection,this.helpList.itemRenderer=t.BaiJiaLeHelpItem,this.helpScroller.viewport.scrollH=0,this.helpScroller.viewport=this.helpList},i.prototype.showPopup=function(){this.visible=!0,this.bg.visible=!0,this.helpMain.scaleX=this.helpMain.scaleY=0,App.EffectUtils.showUI(this.helpMain),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePopup=function(){this.bg.visible=!1;var t=this;App.EffectUtils.hideUI(this.helpMain,200,0,function(){t.visible=!1}),App.MessageCenter.dispatch("closeHelpAtDesk"),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.helpScroller,this.helpList,t.data)},i.prototype.touchMoveHandel=function(t){var e=this.helpScroller.viewport;e.scrollV=(this.helpList.getChildAt(0).height-e.height)/e.height*t.localY},i.prototype.touchTapHandle=function(t){var e=this.helpScroller.viewport,i=(this.helpList.getChildAt(0).height-e.height)/e.height*t.localY;egret.Tween.get(e).to({scrollV:i},1e3)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.closeBtn,this.closePopup,this),this.scrollerBar_Area.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveHandel,this),this.scrollerBar_Area.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapHandle,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.closeBtn),this.scrollerBar_Area.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMoveHandel,this),this.scrollerBar_Area.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTapHandle,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),egret.Tween.removeTweens(this.helpScroller.viewport)},i}(BaseEuiComponent);t.BaiJiaLeHelp=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeHelp")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.BaiJiaLeHelpItem=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeHelpItem")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e){var i=t.call(this,"BaiJiaLeLotteryHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.takeclose,this.closePoput,this,{}),this.RankBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.takeclose),this.RankBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BaiJiaLeLotteryHelp=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeLotteryHelp")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this,"BaiJiaLeTimeSkin")||this;return t._status={1:"下注中",2:"开奖中",3:"空闲",4:"发牌中"},t}return __extends(i,e),i.prototype.setCurryTimer=function(t){this.classicTimer.visible=1==t,this.lotteryTimer.visible=2==t,this._tableType=t},i.prototype.startTimer=function(t){var e=Math.round(t/1e3);switch(this._tableType){case 1:this.timer1(e);break;case 2:this.timer2(e)}},i.prototype.updateTimerStatus=function(e){switch(e){case t.BaiJiaLeConst.GAME_STATE.BET:this._currentGameStatus=1;break;case t.BaiJiaLeConst.GAME_STATE.AWARD:this._currentGameStatus=2;break;case t.BaiJiaLeConst.GAME_STATE.WAIT:this._currentGameStatus=3;break;case t.BaiJiaLeConst.GAME_STATE.DEAL:this._currentGameStatus=4}this._gameStatus.text=this._status[this._currentGameStatus]},i.prototype.timerHandler1=function(){this._currentSecond>1?(this._currentSecond--,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3")):this._timer.stop(),this._currentSecond>=0&&(this._timeLbL.text=""+this._currentSecond,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&(3==this._currentSecond&&(this._timeLbL.text="w"),2==this._currentSecond&&(this._timeLbL.text="m"),1==this._currentSecond&&(this._timeLbL.text="n"))),this._currentSecond<=3&&t.Application.numShake(this._timeLbL)},i.prototype.timerHandler2=function(){return this._currentSecond--,this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.AWARD?4==this._currentSecond&&this.applyFunc("showWinner"):this._currentGameStatus==t.BaiJiaLeConst.GAME_STATE.BET&&3==this._currentSecond&&App.SoundManager.playEffect("alert_mp3"),this._currentSecond<0?(this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,void App.TimerManager.removeAll(this)):void this.renderLottery()},i.prototype.timerHandlerOver2=function(){this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond},i.prototype.numShake=function(){var t=this._timeLbL;egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.timer1=function(t){this._timer?this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this):(this._timer=new egret.Timer(1e3,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this)),t>=0&&(this._currentSecond=t,this._timeLbL.text=""+this._currentSecond,this._timer.start())
},i.prototype.timer2=function(t){this._currentSecond=t,this.renderLottery(),App.TimerManager.doTimer(1e3,t,this.timerHandler2,this,this.timerHandlerOver2,this)},i.prototype.setTimerVisible=function(t){1==this._tableType&&(this.classicTimer.visible=t),2==this._tableType&&(this.lotteryTimer.visible=t)},i.prototype.getCurryTime=function(){return this._currentSecond},i.prototype.resetTimer=function(){App.TimerManager.removeAll(this)},i.prototype.renderLottery=function(){if(this._currentSecond<3600){var t=this._currentSecond%60,e=Math.floor(this._currentSecond/60);this.timeSecond.text=10>t?"0"+t:""+t,this.timeMinute.text=10>e?"0"+e:""+e}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._shape&&this.classicTimer.removeChild(this._shape),this._timer&&this._timer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandler1,this),this._shape=null,this._timer=null,this._status=null,this._currentSecond=null,this._tableType=null},i}(BaseEuiComponent);t.BaiJiaLeTime=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeTime")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){t.BeadPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createBead=function(){var e=t.BeadPool.pop();return e||(e=new i),e},t.prototype.releaseBead=function(e){e.clear(),t.BeadPool.unshift(e)},t.prototype.clear=function(){for(;t.BeadPool.length;)t.BeadPool.pop().destroy()},t._i=null,t.BeadPool=null,t}();t.BeadFactory=e,__reflect(e.prototype,"baiJiaLe.BeadFactory");var i=function(t){function e(){return t.call(this,"BeadSkin")||this}return __extends(e,t),e.prototype.clear=function(){R.removeFromParent(this)},e.prototype.destroy=function(){this._winner.source=void 0,this._winner.texture=void 0,this.clear()},e}(BaseEuiComponent);t.Bead=i,__reflect(i.prototype,"baiJiaLe.Bead")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,"BaiJiaLeLottertRecord")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.initComponent=function(i){e.prototype.initComponent.call(this,i),this.record_collection=new eui.ArrayCollection,this.recordList.itemRenderer=t.BaiJiaLeHelpItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.recordList},i.prototype.showPopup=function(){this.visible=!0,this.RankBg.visible=!0,this.recordMenu.scaleX=this.recordMenu.scaleY=0,App.EffectUtils.showUI(this.recordMenu)},i.prototype.closePopup=function(){this.RankBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.recordMenu,200,0,function(){t.visible=!1})},i.prototype.createList=function(t){Log.trace("gaming createList",t),this.record_collection.refresh();var e=t,i=this.initListData(e);this.record_collection.replaceAll(i),this.recordList.dataProvider=this.record_collection,this.record_collection.refresh()},i.prototype.initListData=function(t){var e=[];return e},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.recordClose,this.closePopup,this)},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.recordClose)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.LotteryHis=e,__reflect(e.prototype,"baiJiaLe.LotteryHis")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this,"RoadMapSkin")||this;return t.largeX=0,t.verticalNum=1,t.maxBottomLine=6,t.isOpenRoad=!1,t}return __extends(i,e),i.prototype.collectResult=function(t){var e=t;Log.trace("收集开始",e);for(var i={},o=0;o<=e.length-1;o++)if(1==e[o].winPlace.length){var n=e[o].winPlace[0];i[n]=i[n]+1||1}else if(e[o].winPlace.length>1)for(var s=[],r=e[o].winPlace.length-1,a=0;r>=a;a++)s[a]=e[o].winPlace[a],i[s[a]]=i[s[a]]+1||1;return Log.trace("收集结束",i),i},i.prototype.setDeskItemInfo=function(t){var e=this.collectResult(t);this._banker.text=""+(void 0===e[1]?0:e[1]),this._player.text=""+(void 0===e[2]?0:e[2]),this._tie.text=""+(void 0===e[3]?0:e[3]),this._bankerPair.text=""+(void 0===e[4]?0:e[4]),this._playerPair.text=""+(void 0===e[5]?0:e[5]),this._sum.text=""+t.length},i.prototype.renderBead=function(e){this.GroupBead.removeChildren();var i=0,o=0;e.length>0&&e.forEach(function(e,n){var s=new t.Bead,r=n/6;i=24*parseInt(String(r)),n%6==0&&(o=0),s.x=i,s.y=o,s._winner.source=1==e.winPlace[0]?"bjl_ui_zhuang":2==e.winPlace[0]?"bjl_ui_xian":"bjl_ui_he",s._playerDouble.visible=e.winPlace.indexOf(5)>-1?!0:!1,s._bankerrDouble.visible=e.winPlace.indexOf(4)>-1?!0:!1,o+=24,this.GroupBead.addChild(s)}.bind(this));var n=this.ChartOther.getAskRoad(0),s=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(n),this.renderBlackAskRoad(s)},i.prototype.renderRedAskRoad=function(t){this.bankerAskRoad.removeChildren(),this.renderAskRoad(t,this.bankerAskRoad)},i.prototype.renderBlackAskRoad=function(t){this.playerAskRoad.removeChildren(),this.renderAskRoad(t,this.playerAskRoad)},i.prototype.renderAskRoad=function(t,e){if(t.length){var i=new eui.Image;i.x=0,i.y=2,i.source="bjl_ui_dyl_"+t[0],e.addChild(i)}if(t.length>1){var i=new eui.Image;i.x=12,i.y=2,i.source="bjl_ui_xl_"+t[1],e.addChild(i)}if(t.length>2){var i=new eui.Image;i.x=24,i.y=2,i.source="bjl_ui_xql_"+t[2],e.addChild(i)}},i.prototype.renderAll=function(t){var e=[];t.forEach(function(t,i){e[i]=t.winPlace[0]-1}),this.ChartOther.renderOtherChart(e,"bjl",111),this.renderBead(t),this.setDeskItemInfo(t)},i.prototype.renderIssue=function(t){this.Issue.text="期号:"+t},i.prototype.showRoadMap=function(){egret.Tween.get(this.RoadMapMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.openRoadMap=function(){this.isOpenRoad?(this.closeRoadMap(),this.isOpenRoad=!1):(this.applyFunc("showRoadMap"),this.isOpenRoad=!0)},i.prototype.closeRoadMap=function(){App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.RoadMapMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut),this.applyFunc("closeRoadMap")},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnRoadMap.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.removeEvent=function(){this.BtnRoadMap.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRoadMap,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),common.BeadFactory.i.clear()},i}(BaseEuiComponent);t.RoadMap=e,__reflect(e.prototype,"baiJiaLe.RoadMap")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.CHIP_CONFIG=[1,10,50,100,500,1e3,5e3,1e4],t.BET_SLOT=3,t.FLY_CHIP_TIME=.4,t.TABLE_CHIP_SCALE=.4,t.DEAL_CARD_TIME=.35,t.FLIP_CARD_TIME=.5,t.SHOW_CHAIR_NUM=6,t.BET_TIME=10,t.REWARD_TIME=10,t.PI=3.1416926,t.GAME_STATE={BET:1,AWARD:2,WAIT:3,DEAL:4},t.Game_CHIP_AREA={PLAYER:1,HE:2,BANKER:3,ANY_DUI:4,PLAYER_DUI:5,BIG:6,SMALL:7,BANKER_DUI:8,PERFECT_DUI:9},t.RESULT={BankerWin:1,PlayerWin:2,Tie:3},t.CARD_TYPE={DAN_ZHANG:-1,DUI_ZI:-1,SHUN_ZI:-1,JIN_HUA:-1,SHUN_JIN:-1,BAO_ZI:-1},t.BENEFIT={0:1,1:1,2:2,3:3,4:5,5:10},t.CARD_TYPE_STR=(i={},i[0]="单张",i[1]="对子",i[2]="顺子",i[3]="金花",i[4]="顺金",i[5]="豹子",i),t.NET_MSG={ONLINE_NUM:"1005",LEAVE_GAME:"10104",LEAVE_GAME_R:"10105",BET_START_R:"10202",ME_BET:"10203",ME_BET_R:"10204",CARDLIST_R:"10205",GAME_RESULT:"10206",GAME_RECONECTINFO_R:"10207",REWARD_START_R:"10211",DEAL_START_R:"10212",TOTAL_BET_R:"10213",LEADER_BOARD_R:"10214",LEADER_BOARD:"10215",ROAD_MAP_R:"10216",INIT_FINISH:"10217",ONLINE_NUMBER_R:"10218",SPECIAL_PLAYER_R:"10219",CHIP_SETTING:"10221",CHIP_SETTING_R:"10220",TERMNO_R:"10224",GAMESTATE_R:"10229",CHANGE_TABLE:"10230",CHANGE_TABLE_R:"10226",ENTER_TABLE:"10231",ENTER_TABLE_R:"10232",CHARTCHANGE_R:"10234",STATECHANGE_R:"10235",SPECIAL_WIN_R:"10236",OPENSTATUS_R:"10237",RESULT_BALL_R:"10238",LOTTERY_HIS:"10239",LOTTERY_HIS_R:"10240",RESULT_START_R:"10113"},t.NET_MSG_LOG={7002:"玩家下注",7003:"其他玩家下注",7004:"玩家自己发起上庄",7005:"其他玩家进入庄家排队",7006:"新玩家进入",7007:"新玩家离开",7008:"当前玩家离开房间",7009:"自己提前下庄或者离开上庄列表",7010:"玩家被踢出房间",7011:"可下注状态通知",7012:"开奖状态通知",7014:"其他玩家下庄或者离开上庄队列",7017:"房间更新中奖",7018:"房间更新其他信息"},t.ANIM_STAGE={NONE:-1,DEAL_CARD:-1,FLIP_LEFT_CARD:-1,FLIP_Right_CARD:-1,SHOW_LEFT_PX:-1,SHOW_RIGHT_PX:-1,CHIP_ANIM:-1,SHOW_SCORE:-1,WAIT:-1},t.NET_ERROR_MSG=(o={},o[101]="条件不满足",o[102]="下注数字错误",o[103]="下注额过大",o[104]="下注金额超过余额 ",o[105]="庄家无法赔付这么多下注额",o[106]="下注时间结束",o[107]="余额小于上庄最低要求",o[108]="上庄队列已满",o[109]="自己就在庄家队列",o[110]="当前玩家不是庄家也不在庄家列表",o[111]="当前玩家长时间不参与",o[112]="下注金额过小",o[113]="当前没有庄家,下注失败",o),t.Const_onEnterGameCallBack="Const_1001",t.onOtherBetCallBack="1002",t.onSelfBetCallBack="1003",t.onShowHandCallBack="1004",t.onOnlineNumCallBack="1005",t.onBetStartCallBack="1006",t.onRewardStartCallBack="1007",t.setJettonCallBack="1008",t.onResultCallBack="1009",t.onBetCallBack="1010",t.onCardListCallBack="1011",t.onDealStartCallBack="1012",t.onTotalBetCallBack="1013",t.onMeBetCallBack="1014",t.onGameResultCallBack="1015",t.onLeaveGameCallBack="1016",t.onRoadMapCallBack="1017",t.onLeaderBoardCallBack="1018",t.onOnlineNumberCallBack="1019",t.onSpecialPlayerCallBack="1020",t.onAddChipCallBack="1021",t.onReconectBack="1022",t.onTermnoBack="1023",t.onGameStateBack="1024",t.onChangeTableBack="1025",t.onEnterTableBack="1026",t.onSpecialWinBack="1027",t.onChartChangeBack="1028",t.onStatusChangeBack="1029",t.onOpenStatusBack="1030",t.onResultBallBack="1031",t.onLotteryHisBack="1032",t}();t.BaiJiaLeConst=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeConst");var i,o}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.register(),o}return __extends(i,e),i.prototype.register=function(){this.addListener(t.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.addListener(t.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.addListener(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.addListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.addListener(t.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.addListener(t.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CHANGE_TABLE_R,this.onChangeTable,this),this.addListener(t.BaiJiaLeConst.NET_MSG.ENTER_TABLE_R,this.onEnterTable,this),this.addListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_WIN_R,this.onSpecialWin,this),this.addListener(t.BaiJiaLeConst.NET_MSG.OPENSTATUS_R,this.onOpenStatus,this),this.addListener(t.BaiJiaLeConst.NET_MSG.CHARTCHANGE_R,this.onChartChange,this),this.addListener(t.BaiJiaLeConst.NET_MSG.STATECHANGE_R,this.onStatusChange,this),this.addListener(t.BaiJiaLeConst.NET_MSG.RESULT_BALL_R,this.onResultBall,this),this.addListener(t.BaiJiaLeConst.NET_MSG.LOTTERY_HIS_R,this.onLotteryHis,this)},i.prototype.onTotalBet=function(e){this.applyFunc(t.BaiJiaLeConst.onTotalBetCallBack,e)},i.prototype.onMeBet=function(e){this.applyFunc(t.BaiJiaLeConst.onMeBetCallBack,e)},i.prototype.onRewardStart=function(e){this.applyFunc(t.BaiJiaLeConst.onRewardStartCallBack,e)},i.prototype.onCardList=function(e){Log.trace("获取牌",e),this.applyFunc(t.BaiJiaLeConst.onCardListCallBack,e)},i.prototype.onGameResult=function(e){Log.trace("结算开奖结果",e),this.applyFunc(t.BaiJiaLeConst.onGameResultCallBack,e)},i.prototype.onRoadMap=function(e){this.applyFunc(t.BaiJiaLeConst.onRoadMapCallBack,e)},i.prototype.onLeaderBoard=function(e){this.applyFunc(t.BaiJiaLeConst.onLeaderBoardCallBack,e)},i.prototype.onOnlineNumber=function(e){this.applyFunc(t.BaiJiaLeConst.onOnlineNumberCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.BaiJiaLeConst.onSpecialPlayerCallBack,e)},i.prototype.onAddChip=function(e){Log.trace("筹码设置返回",e),this.applyFunc(t.BaiJiaLeConst.onAddChipCallBack,e)},i.prototype.onReconect=function(e){Log.trace("重连",e),this.applyFunc(t.BaiJiaLeConst.onReconectBack,e)},i.prototype.onTermno=function(e){this.applyFunc(t.BaiJiaLeConst.onTermnoBack,e)},i.prototype.onGameStateChange=function(e){this.applyFunc(t.BaiJiaLeConst.onGameStateBack,e)},i.prototype.onChangeTable=function(e){Log.trace("onChangeTable",e),App.EasyLoading.hideLoading(),0!=e.bookmark.length&&this.applyFunc(t.BaiJiaLeConst.onChangeTableBack,e)},i.prototype.onEnterTable=function(e){this.applyFunc(t.BaiJiaLeConst.onEnterTableBack,e),App.EasyLoading.hideLoading()},i.prototype.onSpecialWin=function(e){this.applyFunc(t.BaiJiaLeConst.onSpecialWinBack,e)},i.prototype.onOpenStatus=function(e){this.applyFunc(t.BaiJiaLeConst.onOpenStatusBack,e)},i.prototype.onChartChange=function(e){this.applyFunc(t.BaiJiaLeConst.onChartChangeBack,e)},i.prototype.onStatusChange=function(e){this.applyFunc(t.BaiJiaLeConst.onStatusChangeBack,e)},i.prototype.onResultBall=function(e){this.applyFunc(t.BaiJiaLeConst.onResultBallBack,e)},i.prototype.onLotteryHis=function(e){this.applyFunc(t.BaiJiaLeConst.onLotteryHisBack,e),App.EasyLoading.hideLoading()},i.prototype.requestBet=function(e){Log.trace("请求下注",e),this.send(t.BaiJiaLeConst.NET_MSG.ME_BET,e)},i.prototype.requestExitDesk=function(){this.sendLeaveDesk(GameModuleMgr.i.getCurrDeskId())},i.prototype.requestLeaderBoard=function(e){this.send(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD,e)},i.prototype.requestInitFinish=function(){this.send(t.BaiJiaLeConst.NET_MSG.INIT_FINISH)},i.prototype.requestAddChip=function(e){Log.trace("设置筹码请求",e),this.send(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING,e)},i.prototype.requestChangeTable=function(e){Log.trace("换桌数据请求",e),this.send(t.BaiJiaLeConst.NET_MSG.CHANGE_TABLE,e),App.EasyLoading.showOnTimeOut()},i.prototype.requestEnterTable=function(e){Log.trace("游戏内换桌请求",e),this.send(t.BaiJiaLeConst.NET_MSG.ENTER_TABLE,e),App.EasyLoading.showOnTimeOut()},i.prototype.requestLotteryHis=function(e){this.send(t.BaiJiaLeConst.NET_MSG.LOTTERY_HIS,e),App.EasyLoading.showOnTimeOut()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeListener(t.BaiJiaLeConst.NET_MSG.REWARD_START_R,this.onRewardStart,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CARDLIST_R,this.onCardList,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.TOTAL_BET_R,this.onTotalBet,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAME_RESULT,this.onGameResult,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ROAD_MAP_R,this.onRoadMap,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ME_BET_R,this.onMeBet,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.LEADER_BOARD_R,this.onLeaderBoard,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ONLINE_NUMBER_R,this.onOnlineNumber,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_PLAYER_R,this.onSpecialPlayer,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CHIP_SETTING_R,this.onAddChip,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAME_RECONECTINFO_R,this.onReconect,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.TERMNO_R,this.onTermno,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.GAMESTATE_R,this.onGameStateChange,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CHANGE_TABLE_R,this.onChangeTable,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.ENTER_TABLE_R,this.onEnterTable,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.SPECIAL_WIN_R,this.onSpecialWin,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.OPENSTATUS_R,this.onOpenStatus,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.CHARTCHANGE_R,this.onChartChange,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.STATECHANGE_R,this.onStatusChange,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.RESULT_BALL_R,this.onResultBall,this),this.removeListener(t.BaiJiaLeConst.NET_MSG.LOTTERY_HIS_R,this.onLotteryHis,this)},i}(base.GameProxy);t.BaiJiaLeNet=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeNet")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e;!function(t){t[t.baiJiaLeBg=201e4]="baiJiaLeBg",t[t.baiJiaLeChip=2010001]="baiJiaLeChip",t[t.baiJiaLeMenu=2010002]="baiJiaLeMenu",t[t.baiJiaLeAni=2010003]="baiJiaLeAni",t[t.baiJiaLePopup=2010004]="baiJiaLePopup",t[t.baiJiaLeTips=2010005]="baiJiaLeTips"}(e=t.BaiJiaLeViewConst||(t.BaiJiaLeViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"baiJiaLe.DataNotify")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this.armature=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,1),this.removeEffect(),this.setState(e.ACTION_WASH)},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:0,x:StageUtils.getInstance().getWidth()/10*6.8,scaleX:0,scaleY:0,rotation:45},400,egret.Ease.sineInOut)},e.prototype.stopAnim=function(){this.armature.stop()},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"baiJiaLe.Shuffle")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e;!function(t){t[t.Base=201e3]="Base",t[t.BaiJiaLeHelp=201001]="BaiJiaLeHelp"}(e=t.ViewConst||(t.ViewConst={}))}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.isMove=!1,t.isBeted=!1,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addEventListeners(),this.addListeners(),this.addModelListeners(),Log.trace("GameController onCreate()")},i.prototype.onInit=function(t){e.prototype.onInit.call(this),this.registers(),t&&(this._baiJiaLeModel.curryTableName=t.tableName,t.tableType&&(this._baiJiaLeModel.tableType=t.tableType,this.setCurrDeskType(t.tableType))),this.enterGame(),Log.trace("GameController onInit()")},i.prototype.enterGame=function(){App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeBg),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeChip),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLeMenu),App.ViewManager.open(t.BaiJiaLeViewConst.baiJiaLePopup),App.SoundManager.stopBg(),App.SoundManager.playBg("bg_mp3"),this._baiJiaLeBgView.setTableName(this._baiJiaLeModel.curryTableName),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this._baiJiaLeModel._isAutoChecked=!0,this._baiJiaLeMenuView._logicBtn.setAutoConfirm(this._baiJiaLeModel._isAutoChecked),this._player=GamePlayerMgr.i.getPlayer(),this._baiJiaLeMenuView._messageinfo.setUserName(this._player.getNickName()),this._baiJiaLeModel._balance=this._player.getMoney(),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._player.getMoney())),this._baiJiaLeMenuView._messageinfo.setUserImage("ui_headImg_"+this._player.getAvatar()),this._baiJiaLeMenuView._messageinfo.setUserFrame("ui_headBox_"+this._player.getAvatarBox()),this._baiJiaLeMenuView._toolBar.reChargeEffect(),this._baiJiaLeMenuView.changeTablebtnEffect(),this._baiJiaLeMenuView.initRedPacket()},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToDesk,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("showWinner",this.showWinner,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showRoadMap",this.showRoadMap,this),this.registerFunc("closeRoadMap",this.closeRoadMap,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showLotteryHelp",this.showLotteryHelp,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("rechargeMoney",this.openRecharge,this),this.registerFunc("changeTableReq",this.changeTable,this),this.registerFunc("enterTableReq",this.enterTable,this),this.registerFunc("btnShowMenu",this.btnShowMenu,this),this.registerFunc("lotteryHis",this.lotteryHis,this),this.registerFunc("operateAddcounter",this.operateAddcounter,this),this.registerFunc(t.BaiJiaLeConst.onCardListCallBack,this.onCardListCallBack,this),this.registerFunc(t.BaiJiaLeConst.onTotalBetCallBack,this.onTotalBetCallBack,this),this.registerFunc(t.BaiJiaLeConst.onMeBetCallBack,this.onMeBetCallBack,this),this.registerFunc(t.BaiJiaLeConst.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.BaiJiaLeConst.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(t.BaiJiaLeConst.onRoadMapCallBack,this.onRoadMapCallBack,this),this.registerFunc(t.BaiJiaLeConst.onLeaderBoardCallBack,this.onLeaderBoardCallBack,this),this.registerFunc(t.BaiJiaLeConst.onOnlineNumberCallBack,this.onOnlineNumberCallBack,this),this.registerFunc(t.BaiJiaLeConst.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.BaiJiaLeConst.onAddChipCallBack,this.onAddChipCallBack,this),this.registerFunc(t.BaiJiaLeConst.onReconectBack,this.onReconectCallBack,this),this.registerFunc(t.BaiJiaLeConst.onTermnoBack,this.onTermnoCallBack,this),this.registerFunc(t.BaiJiaLeConst.onGameStateBack,this.onGameStateCallBack,this),this.registerFunc(t.BaiJiaLeConst.onChangeTableBack,this.onChangeTableCallBack,this),this.registerFunc(t.BaiJiaLeConst.onEnterTableBack,this.onEnterTableCallBack,this),this.registerFunc(t.BaiJiaLeConst.onSpecialWinBack,this.onSpecialWinCallBack,this),this.registerFunc(t.BaiJiaLeConst.onOpenStatusBack,this.onOpenStatusCallBack,this),this.registerFunc(t.BaiJiaLeConst.onChartChangeBack,this.onTableChartChange,this),this.registerFunc(t.BaiJiaLeConst.onStatusChangeBack,this.onTableStateChange,this),this.registerFunc(t.BaiJiaLeConst.onResultBallBack,this.onLotteryResultBallCallBack,this),this.registerFunc(t.BaiJiaLeConst.onLotteryHisBack,this.onLotteryHisCallBack,this)},i.prototype.inits=function(){e.prototype.inits.call(this),this._baiJiaLeModel=new t.GameModel(this),this._baiJiaLeNet=new t.BaiJiaLeNet(this,this._baiJiaLeModel),this.setModel(this._baiJiaLeModel),this._baiJiaLeBgView=new t.GameView(this),this._baiJiaLeChipView=new t.BaiJiaLeChipView(this,LayerManager.UI_Main),this._baiJiaLeMenuView=new t.BaiJiaLeMenuView(this,LayerManager.UI_Popup),this._baiJiaLePopupView=new t.BaiJiaLePopupView(this,LayerManager.UI_Message),this._baiJiaLeBgView.touchChildren=!1,this._baiJiaLeBgView.touchEnabled=!1,this._baiJiaLeMenuView._jeButton.enableBtn(),this._baiJiaLeMenuView._jeButton.toggleBtn(0),this._baiJiaLeModel._selBtnIndex=0,this.isBeted=!1,this.delayTime=0,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0]},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeBg,this._baiJiaLeBgView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeChip,this._baiJiaLeChipView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLeMenu,this._baiJiaLeMenuView),App.ViewManager.register(t.BaiJiaLeViewConst.baiJiaLePopup,this._baiJiaLePopupView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addModelListeners=function(){this._baiJiaLeModel._gameStatusInfoDataNotify.addDataListener(this.gameStatusCallback,this),this._baiJiaLeModel._betPlaceInfosDataNotify.addDataListener(this.betPlaceInfosCallBack,this),this._baiJiaLeModel._selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this),this._baiJiaLeModel._isBetDataNotify.addDataListener(this.isBetCallBack,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._baiJiaLeNet.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._baiJiaLeNet.removeEvent()},i.prototype.onGameStateCallBack=function(e){Log.trace("状态改变",e),2==e.state&&(this._baiJiaLeModel.isRecord=!0,this._baiJiaLeModel.curryGameStatus=2,this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeModel._isBet=2,this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeModel.flyStarList=[],this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!0),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(t.BaiJiaLeConst.GAME_STATE.BET),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeBgView.resetHighLightArea(),this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeBgView.initCoinBox(),this.initPreBet(),this.initSelfBet(),e.remaining_time==e.total_time&&(App.SoundManager.playEffect("start_mp3"),this._baiJiaLeMenuView._betAni.playAni(0)),e.remaining_time>=14699?(1==this.currDeskType&&(this.shuffle(),App.TimerManager.doTimer(2700,1,function(){this._baiJiaLeChipView.faPai()}.bind(this),this)),App.SoundManager.playEffect("cardwash_mp3")):1==this.currDeskType&&this._baiJiaLeChipView.showCard(),2==this._baiJiaLeModel.tableType&&(Log.trace("currDeskType",this.currDeskType),this._baiJiaLeBgView.hideCurryTermno(!0),this._baiJiaLeBgView.resetStar(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeModel.specialWinList=[],this._baiJiaLeModel.bankOrPlayer=[],this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList))),this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0]),5==e.state&&(this._baiJiaLeModel.curryGameStatus=5,this.initPreBet(),this._baiJiaLeBgView.clearPreBet(),this._baiJiaLeModel._isBet=1,this._baiJiaLeModel.flyStarList=[],this._baiJiaLeModel._isBetDataNotify.setData(this._baiJiaLeModel._isBet),this._baiJiaLeBgView._baiJiaLeTime.updateTimerStatus(t.BaiJiaLeConst.GAME_STATE.AWARD),this._baiJiaLeBgView._baiJiaLeTime.setTimerVisible(!1),this._baiJiaLeModel._onRewardActionTime=Math.floor(e.remaining_time/1e3),Log.trace("结算状态",this._baiJiaLeModel._onRewardActionTime),2==this._baiJiaLeModel.tableType&&(this._baiJiaLeBgView.hideCurryTermno(!1),this._baiJiaLeBgView.resetStar(),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0),this._baiJiaLeModel.specialWinList=[],this._baiJiaLeModel.bankOrPlayer=[],this.isBeted&&(this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList))),this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0],this.initPreBet(),this.initSelfBet())),this._baiJiaLeBgView._baiJiaLeTime.startTimer(e.remaining_time)},i.prototype.onCardListCallBack=function(t){Log.trace("获取牌结果",t);var e,i,o,n=t.bankerCardList,s=t.playerCardList,r=0,a=0;this._baiJiaLeChipView.showCard();var h=this._baiJiaLeChipView.isDouble(n),l=this._baiJiaLeChipView.isDouble(s),p={winPlace:[]};if(3==t.bankerCardList.length?(a=n[2],i=2):i=1,3==t.playerCardList.length?(r=s[2],e=2):e=1,t.bankerCardNumber>t.playerCardNumber?(this._baiJiaLeModel._winner="banker",p.winPlace.push(1)):t.bankerCardNumber<t.playerCardNumber?(this._baiJiaLeModel._winner="player",p.winPlace.push(2)):(this._baiJiaLeModel._winner="he",p.winPlace.push(3)),h&&p.winPlace.push(4),l&&p.winPlace.push(5),this._baiJiaLeModel.isRecord&&(Log.trace("当前开奖记录",p),this._baiJiaLeModel._recordHistory.push(p),this._baiJiaLeModel._recordHistory.length>50&&this._baiJiaLeModel._recordHistory.splice(0,50)),this._baiJiaLeModel._onRewardActionTime>5){if(2==this.currDeskType&&(this._baiJiaLeModel.curryRemainTime=this._baiJiaLeBgView.getCurryTime(),this._baiJiaLeBgView.getCurryTime()<=8))return this._baiJiaLeChipView.liangpai(n,s),this._baiJiaLeChipView.buPaiShow(r,a),void this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber,1);0!=r||0!=a?this.delayTime=1500:this.delayTime=0,this._baiJiaLeChipView.kaiPai(n,s),App.TimerManager.doTimer(1e3,1,function(){this._baiJiaLeChipView.buPai(r,a)}.bind(this),this),t.bankerCardList.length>2||t.playerCardList.length>2?App.TimerManager.doTimer(2e3,1,function(){this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber,1e3),1==e&&t.playerCardNumber>7?(App.SoundManager.playEffect("player_"+t.playerCardNumber+"_mp3"),o=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.playerCardNumber+"_mp3")}.bind(this),this),o=1200),App.TimerManager.doTimer(o,1,function(){1==i&&t.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+t.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this):App.TimerManager.doTimer(500,1,function(){this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber,1e3),1==e&&t.playerCardNumber>7?(App.SoundManager.playEffect("player_"+t.playerCardNumber+"_mp3"),o=1800):(App.SoundManager.playEffect("player_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.playerCardNumber+"_mp3")}.bind(this),this),o=1200),App.TimerManager.doTimer(o,1,function(){1==i&&t.bankerCardNumber>7?App.SoundManager.playEffect("banker_"+t.bankerCardNumber+"_mp3"):(App.SoundManager.playEffect("banker_mp3"),App.TimerManager.doTimer(600,1,function(){App.SoundManager.playEffect("point_"+t.bankerCardNumber+"_mp3")}.bind(this),this))}.bind(this),this)}.bind(this),this)}else this._baiJiaLeChipView.liangpai(n,s),this._baiJiaLeChipView.buPaiShow(r,a),this._baiJiaLeChipView.setLbNum(t.playerCardNumber,t.bankerCardNumber,1)},i.prototype.onTotalBetCallBack=function(t){Log.trace("总下注返回",t),this._baiJiaLeModel._betPlaceInfos=t.betInfo,this._baiJiaLeModel._betPlaceInfos.length>0&&this._baiJiaLeBgView.showBetMoney(this._baiJiaLeModel._betPlaceInfos)},i.prototype.onMeBetCallBack=function(e){if(Log.trace("投注返回",e),e.isSpecial){this._baiJiaLeMenuView._toolBar.onlineShake();for(var i=0;i<e.betInfo.length;i++)this._baiJiaLeBgView.betToPlaceAni(5,e.betInfo[i].betPlace,1e4*this._baiJiaLeModel._betNum);
for(var i=0;i<e.specialRole.length;i++)this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),e.specialRole[i]);if(e.userid!=GamePlayerMgr.i.getPlayer().getUserId())for(var i=0;i<e.betInfo.length;i++){this._baiJiaLeBgView.allBetNumShacke(e.betInfo[i].betPlace);for(var o=0;o<e.specialRole.length;o++)this._baiJiaLeBgView.betToPlaceAni(e.specialRole[o],e.betInfo[i].betPlace,1e4*this._baiJiaLeModel._betNum)}}else if(e.userid==GamePlayerMgr.i.getPlayer().getUserId()&&1==e.result)for(var i=0;i<e.betInfo.length;i++)this._baiJiaLeBgView.betToPlaceAni(4,e.betInfo[i].betPlace,1e4*this._baiJiaLeModel._betNum);if(e.isSpecial&&0!=e.specialRole[0])this._baiJiaLeMenuView._messageinfo.avatarShake(e.specialRole[0]);else if(e.isSpecial&&0==e.specialRole[0]){for(var i=0;i<e.betInfo.length;i++){var n=e.betInfo[i].betPlace;-1==this._baiJiaLeModel.flyStarList.indexOf(n)&&(this._baiJiaLeBgView.starAnim(n,this.isMove),this._baiJiaLeModel.flyStarList.push(n))}e.specialRole.length>1&&this._baiJiaLeMenuView._messageinfo.avatarShake(e.specialRole[1]),this._baiJiaLeMenuView._messageinfo.avatarShake(0)}else e.specialRole.length>4&&egret.error("specialRole:",e.specialRole);switch(e.result){case 1:if(e.userid!=GamePlayerMgr.i.getPlayer().getUserId())return;this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0];for(var i=0;i<e.betInfo.length;i++)if(this._baiJiaLeModel._meBetInfos[e.betInfo[i].betPlace]=e.betInfo[i].betMoney,this._baiJiaLeBgView.allBetNumShacke(e.betInfo[i].betPlace),e.isSpecial)for(var o=0;o<e.specialRole.length;o++)this._baiJiaLeBgView.betToPlaceAni(e.specialRole[o],e.betInfo[i].betPlace,1e4*this._baiJiaLeModel._betNum),this._baiJiaLeBgView.betToPlaceAni(4,e.betInfo[i].betPlace,1e4*this._baiJiaLeModel._betNum);this._baiJiaLeModel._meBetInfos.forEach(function(t,e){t>0&&(this._baiJiaLeModel._selfBetList[e]=t+this._baiJiaLeModel._selfBetList[e])}.bind(this)),this._baiJiaLeModel._selfBetAll=App.ArrayUtils.sumOfArray(this._baiJiaLeModel._selfBetList),this._baiJiaLeBgView.showSelfBet(this._baiJiaLeModel._selfBetList),this._baiJiaLeModel._balance=e.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)),this._baiJiaLeMenuView._messageinfo.setUserBet(App.CommonUtils.money2Str(this._baiJiaLeModel._selfBetAll)),this.initPreBet(),this._baiJiaLeBgView.clearPreBet(),this.isBeted=!0,t.Application.baccaratCounterBet(this._baiJiaLeModel._betNum,this.currDeskType);break;case 3:t.Application.textReminder(3,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up);break;case 4:t.Application.textReminder(4);break;case 5:t.Application.textReminder(5);break;case 6:t.Application.textReminder(6,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up);break;case 7:t.Application.textReminder(7,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up,this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].down);break;case 9:t.Application.textReminder(9)}},i.prototype.onGameResultCallBack=function(t){this._baiJiaLeModel._currWinAreaList=t.gameResultInfoList,this._baiJiaLeModel._currBetAreaList=t.playerBetResultInfoList,this._baiJiaLeModel._awardMoney=0,this._baiJiaLeModel._balance=t.balance,this._baiJiaLeModel.bankOrPlayer=[],t.playerBetResultInfoList.forEach(function(t){this._baiJiaLeModel._awardMoney+=t.resultMoney}.bind(this)),this._baiJiaLeModel._awardMoney>0&&2==this.currDeskType&&(Log.trace("当前为彩票场"),App.SoundManager.playEffect("win_game_mp3"),this.setRecordInit(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney)),this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)));var e=[];if(t.gameResultInfoList.forEach(function(i){t.playerBetResultInfoList[i-1].resultMoney>0&&e.push(i)}.bind(this)),e.length>0&&e.forEach(function(t){this._baiJiaLeBgView.createWinChip(t,4)}.bind(this)),this.isBeted&&1==this.currDeskType&&(this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._lastBetRecord=JSON.parse(JSON.stringify(this._baiJiaLeModel._selfBetList)),Log.trace("保存当局投注",this._baiJiaLeModel._lastBetRecord,JSON.stringify(this._baiJiaLeModel._selfBetList))),1==this.currDeskType&&5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0]),2==this.currDeskType&&2==this._baiJiaLeModel.curryGameStatus&&this._baiJiaLeModel._awardMoney>0&&(this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.getMoneyLight(4)),2==this.currDeskType){var i={winPlace:[]};i.winPlace=this._baiJiaLeModel._currWinAreaList,this._baiJiaLeModel._recordHistory.push(i),this._baiJiaLeModel._recordHistory.length>50&&this._baiJiaLeModel._recordHistory.splice(0,50),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory)}},i.prototype.showWinner=function(){Log.trace("showWinner",this._baiJiaLeModel._currWinAreaList),this.isBeted=!1;var t=this.delayTime;if(1!=this._baiJiaLeModel.lotteryResultStatus&&2==this.currDeskType){if(3==this._baiJiaLeModel.lotteryResultStatus)return;return void(2==this._baiJiaLeModel.lotteryResultStatus)}this._baiJiaLeModel.curryRemainTime<4&&2==this.currDeskType||(this._baiJiaLeBgView.coinAniClear(this._baiJiaLeModel._currWinAreaList),this._baiJiaLeModel.specialWinList.length>0&&R.setTimeOut(function(){for(var t=0;t<this._baiJiaLeModel.specialWinList.length;t++){var e=this._baiJiaLeModel.specialWinList;this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(e[t].winmoney),e[t].role),this._baiJiaLeMenuView._messageinfo.getMoneyLight(e[t].role);var i=e[t].balance;this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(i),e[t].role)}this._baiJiaLeModel.specialWinList=[]},this,1e3),this._baiJiaLeModel._awardMoney>0&&R.setTimeOut(function(){this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney),4),this._baiJiaLeMenuView._messageinfo.getMoneyLight(4)},this,1e3),"player"==this._baiJiaLeModel._winner?App.TimerManager.doTimer(1+t,1,function(){App.SoundManager.playEffect("player_win_mp3"),this._baiJiaLeBgView.showResultAnim(1)}.bind(this),this):"banker"==this._baiJiaLeModel._winner?App.TimerManager.doTimer(1+t,1,function(){App.SoundManager.playEffect("banker_win_mp3"),this._baiJiaLeBgView.showResultAnim(2)}.bind(this),this):App.TimerManager.doTimer(1+t,1,function(){App.SoundManager.playEffect("tie_mp3"),this._baiJiaLeBgView.showResultAnim(3)}.bind(this),this),this._baiJiaLeModel._awardMoney>0&&1==this.currDeskType&&App.TimerManager.doTimer(1e3,1,function(){App.SoundManager.playEffect("win_game_mp3"),this.setRecordInit(App.CommonUtils.money2Str(this._baiJiaLeModel._awardMoney))}.bind(this),this),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),App.TimerManager.doTimer(1500,1,function(){this._baiJiaLeModel._balance>0&&this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance)),this._baiJiaLeBgView.clearCoin(),this._baiJiaLeBgView.resetStar(),this._baiJiaLeModel._selfBetAll=0,this._baiJiaLeMenuView._messageinfo.setUserBet(0)}.bind(this),this))},i.prototype.onLeaveGameCallBack=function(){this.goBack2Room()},i.prototype.onRoadMapCallBack=function(t){5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeModel.isRecord=!1);var e=t.winPlaces.length;this._baiJiaLeModel._recordHistory=e>80?t.winPlaces.slice(e-80,e-1):t.winPlaces,this._baiJiaLeModel._issue=String(t.termno)},i.prototype.onLeaderBoardCallBack=function(t){Log.trace("排行版",t),this._baiJiaLePopupView.Ranking.rankData(t.LeaderInfo)},i.prototype.onOnlineNumberCallBack=function(t){this._baiJiaLeMenuView._toolBar.changeOnlineNum(t.OnlineNumber)},i.prototype.onSpecialPlayerCallBack=function(t){var e=t.specialPlayer,i=[];for(var o in e)i[e[o].playerrole]=e[o];for(var n=0;n<i.length;n++)Log.trace("设置特殊玩家信息",n,i[n]),this._baiJiaLeMenuView._messageinfo.setInformation(i[n],n,i.length)},i.prototype.onAddChipCallBack=function(t){Log.trace("onAddChipCallBack",t),this.setFiveChipAck(t)},i.prototype.onReconectCallBack=function(t){Log.trace("重连显示自己投注");for(var e=0;e<t.betInfo.length;e++)this._baiJiaLeModel._selfBetList[t.betInfo[e].betPlace]=t.betInfo[e].betMoney,this._baiJiaLeBgView.showSelfBet(this._baiJiaLeModel._selfBetList)},i.prototype.onTermnoCallBack=function(t){Log.trace("上期期号 彩球",t),0==this._baiJiaLeModel.tableType&&(this._baiJiaLeModel.tableType=t.tableinfo.tabletype,this.setCurrDeskType(this._baiJiaLeModel.tableType),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this.setCurrDeskId(t.tableinfo.tableid)),t.table_name&&this._baiJiaLeBgView.setTableName(t.table_name),this._currIssue=t.termno,1==this.currDeskType?this._baiJiaLeBgView.setTermno(t.termno):(t.history_termno&&this._baiJiaLeBgView.setTermno(t.history_termno),this._baiJiaLeBgView.setCurryTermno(t.termno),this._baiJiaLeBgView.showLotteryBall(t.lotterydata)),t.balance&&(this._baiJiaLeModel._balance=t.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance))),this._baiJiaLeModel.limitList=[],this._baiJiaLeModel.limitList=t.limit,this._baiJiaLeModel.limitList.unshift(0)},i.prototype.onChangeTableCallBack=function(t){this._baiJiaLePopupView.BaiJiaLeChangeTable.createList(t,this.currDeskId)},i.prototype.onEnterTableCallBack=function(t){Log.trace("进入新桌子返回",t),t.is_success&&(Log.trace("进入新桌子成功"),base.GameCoinMgr.i.clean(),this._baiJiaLeModel._lastBetRecord=[],this._baiJiaLeModel._selfBetList=[0,0,0,0,0,0,0,0,0,0],this._baiJiaLeMenuView._messageinfo.allPlayerDisplay(),this._baiJiaLeBgView.setTableName(this._baiJiaLeModel.curryTableName),this.setCurrDeskId(t.table_id_new),this.setCurrDeskType(t.table_type),this._baiJiaLeModel.tableType=t.table_type,this._baiJiaLePopupView.BaiJiaLeChangeTable.closePopup(),this._baiJiaLeBgView.setTableBG(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.setBtnArea(this._baiJiaLeModel.tableType),this._baiJiaLeChipView.cleanTween(),this._baiJiaLeChipView.initAllPaiStatus(),this._baiJiaLeMenuView.setLotteryHis(this._baiJiaLeModel.tableType),this._baiJiaLeBgView.resetHighLightArea(),this._baiJiaLeBgView.resetStar(),this._baiJiaLeBgView.afterShowReslt(),this._baiJiaLeBgView._baiJiaLeTime.resetTimer(),App.TimerManager.removeAll(this),this.isMove&&this.closeRoadMap())},i.prototype.onSpecialWinCallBack=function(t){Log.trace("结算消息2"+t.role,t),this._baiJiaLeModel._currWinAreaList.length>0&&t.bonus>0&&(this._baiJiaLeModel._currWinAreaList.forEach(function(e){this._baiJiaLeBgView.createWinChip(e,t.role),this._baiJiaLeBgView.createWinChip(e,5)}.bind(this)),this._baiJiaLeModel.specialWinList.push({role:t.role,winmoney:t.bonus,balance:t.balance}),2==this.currDeskType&&2==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeMenuView._messageinfo.playerWinMoney(App.CommonUtils.money2Str(t.bonus),t.role),this._baiJiaLeMenuView._messageinfo.getMoneyLight(t.role),this._baiJiaLeMenuView.specialPlayerMoney(App.CommonUtils.money2Str(t.balance),t.role)))},i.prototype.onTableChartChange=function(t){0!=t.win_place.length&&this._baiJiaLePopupView.BaiJiaLeChangeTable.onTableChartChange(t)},i.prototype.onTableStateChange=function(t){this._baiJiaLePopupView.BaiJiaLeChangeTable.onTableStateChange(t)},i.prototype.onOpenStatusCallBack=function(t){Log.trace("彩票场开奖状态返回",t),this._baiJiaLeModel.lotteryResultStatus=t.code},i.prototype.onLotteryResultBallCallBack=function(t){Log.trace("彩票场彩球返回",t),this._baiJiaLeBgView.showLotteryBall(t.lotterydata),this._currIssue=t.termno,this._baiJiaLeBgView.setTermno(t.termno),App.ScrollTxtTips.showTip(t.termno+"期：已开奖")},i.prototype.onLotteryHisCallBack=function(e){if(Log.trace("彩票场历史记录返回",e),!(e.infos.length<=0)){for(var i=[],o=0;o<e.infos.length;o++){var n=JSON.parse(e.infos[o].issue_number).join(""),s=e.infos[o].winPlace==t.BaiJiaLeConst.RESULT.BankerWin?"庄":e.infos[o].winPlace==t.BaiJiaLeConst.RESULT.PlayerWin?"闲":"和",r=e.infos[o].winPlace==t.BaiJiaLeConst.RESULT.BankerWin?0:e.infos[o].winPlace==t.BaiJiaLeConst.RESULT.PlayerWin?1:2;i[o]={order:o,issue:e.infos[o].issue_id,number:n,result:s,textColor:r}}this._baiJiaLePopupView.renderLotteryRecord(i)}},i.prototype.onUserMoneyChange=function(t){this._baiJiaLeModel._balance=t.balance,this._baiJiaLeMenuView._messageinfo.setUserMoney(App.CommonUtils.money2Str(this._baiJiaLeModel._balance))},i.prototype.betPlaceInfosCallBack=function(){},i.prototype.selBtnIndexCallBack=function(){this._baiJiaLeMenuView._jeButton.toggleBtn(this._baiJiaLeModel._selBtnIndex-1),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.isBetCallBack=function(){1==this._baiJiaLeModel._isBet?(this._baiJiaLeMenuView._logicBtn.disabledConserBet(),this._baiJiaLeMenuView._logicBtn.disabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.disabledRepeatBet()):2==this._baiJiaLeModel._isBet&&(this._baiJiaLeMenuView._logicBtn.enabledConserBet(),this._baiJiaLeMenuView._logicBtn.enabledConfirmBet(),this._baiJiaLeMenuView._logicBtn.enabledRepeatBet())},i.prototype._isAutoCheckedCallBack=function(){},i.prototype.gameStatusCallback=function(){},i.prototype.clearTable=function(){this._baiJiaLeBgView.stopAnim(),this._baiJiaLeChipView.cleanTween(),this._shuffle&&this._shuffle.stopAnim()},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},i.prototype.shuffle=function(){this._shuffle||(this._shuffle=new t.Shuffle(this),this._baiJiaLeBgView.addChild(this._shuffle)),this._shuffle.init(),this._shuffle.anchorOffsetX=this._shuffle.width/2,this._shuffle.anchorOffsetX=this._shuffle.height/2,this._shuffle.x=StageUtils.getInstance().getWidth()/10*5.2,this._shuffle.y=StageUtils.getInstance().getHeight()/10*6,this._shuffle.scaleX=this._shuffle.scaleY=1,this._shuffle.rotation=0,this._shuffle.goToWash()},i.prototype.showRank=function(){this._baiJiaLePopupView.Ranking.showPopup();var t={index:1,size:50};this._baiJiaLeNet.requestLeaderBoard(t),R.sendPlayerAction("Baccarat"+this.currDeskType+"leaderboard_button")},i.prototype.showRecord=function(){var t=this._baiJiaLeModel.recordList;this._baiJiaLePopupView.WinningRecord.showPopup(),this._baiJiaLePopupView.WinningRecord.rankData(t),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_record_button")},i.prototype.setRecordInit=function(t){var e=this._currIssue,i=t,o={issue:e,hit_money:i};this._baiJiaLeModel.recordList.unshift(o)},i.prototype.showGameSet=function(){this._baiJiaLePopupView.GameSet.initSet(),this._baiJiaLePopupView.GameSet.showPopup(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_set_button")},i.prototype.showRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:-90},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:-90},200,egret.Ease.sineInOut),this._baiJiaLeMenuView._roadMap.renderAll(this._baiJiaLeModel._recordHistory),this._baiJiaLeMenuView._roadMap.showRoadMap(),this.isMove=!0,R.sendPlayerAction("Baccarat"+this.currDeskType+"direct_maps")},i.prototype.closeRoadMap=function(){egret.Tween.get(this._baiJiaLeBgView).to({x:0},200,egret.Ease.sineInOut),egret.Tween.get(this._baiJiaLeChipView).to({x:0},200,egret.Ease.sineInOut),this._baiJiaLeMenuView._roadMap.RoadMapMenu.scaleX=0,this._baiJiaLeMenuView._roadMap.isOpenRoad=!1,this.isMove=!1},i.prototype.confirmShowhand=function(){var t={betMoney:this._baiJiaLeModel._balance,betPlace:this._baiJiaLeModel._betPlace},e={tableid:GameModuleMgr.i.getCurrDeskId()},i=this._baiJiaLeModel._betPlace;if(this._baiJiaLeModel._isAutoChecked){var o=[],n=[];o.push(t),n.push(e);var s={betInfo:o,tableinfo:n};if(this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void App.PromTipsView.show("当前投注项限红为"+this._baiJiaLeModel.limitList[i].down/1e4+"-"+this._baiJiaLeModel.limitList[i].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i])/1e4+"达到上限",function(){s.betInfo[0].betMoney=this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i],this._baiJiaLeNet.requestBet(s)},function(){},this,!0);this._baiJiaLeNet.requestBet(s)}else{if(this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void App.PromTipsView.show("当前投注项限红为"+this._baiJiaLeModel.limitList[i].down/1e4+"-"+this._baiJiaLeModel.limitList[i].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i])/1e4+"达到上限",function(){this._baiJiaLeModel._preBetInfos[this._baiJiaLeModel._betPlace]=this._baiJiaLeModel.limitList[i].up-this._baiJiaLeModel._selfBetList[i],this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)},function(){},this,!0);this._baiJiaLeModel._preBetInfos[this._baiJiaLeModel._betPlace]=this._baiJiaLeModel._balance,this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)}},i.prototype.touch=function(t){Log.trace("触摸",t),this._baiJiaLeModel._selBtnIndex=t+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex)},i.prototype.setAutoBet=function(t){this._baiJiaLeModel._isAutoChecked=t,this._baiJiaLeMenuView._logicBtn.setAutoConfirm(this._baiJiaLeModel._isAutoChecked),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_autoconfirm")},i.prototype.operateAddcounter=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_addcounter")},i.prototype.confirmBet=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttonconfirm");for(var t=[],e=1;10>e;e++)if(this._baiJiaLeModel._preBetInfos[e]>0){var i={betPlace:e,betMoney:this._baiJiaLeModel._preBetInfos[e]};t.push(i)}var o={tableid:GameModuleMgr.i.getCurrDeskId()},n=[];n.push(o);var s={betInfo:t,tableinfo:n};return Log.trace("确认投注","this._baiJiaLeModel._preBetInfos---",this._baiJiaLeModel._preBetInfos,"body---",s),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)>this._baiJiaLeModel._balance?void App.ScrollTxtTips.showTip("当前投注额大于当前余额"):void(0!=t.length&&this._baiJiaLeNet.requestBet(s))},i.prototype.conserBet=function(){this.initPreBet(),this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0],this._baiJiaLeBgView.clearPreBet(),this._baiJiaLeModel.bankOrPlayer.length>0&&(this._baiJiaLeModel.bankOrPlayer=[]),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttoncancel")},i.prototype.repeatBet=function(){if(Log.trace("重复投注1",this._baiJiaLeModel._lastBetRecord),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_buttonrepeat"),this._baiJiaLeModel._isAutoChecked){var e=[],i={tableid:GameModuleMgr.i.getCurrDeskId()},o=[];if(o.push(i),0==this._baiJiaLeModel._lastBetRecord.length)return;if(Log.trace("重复投注的总额",App.ArrayUtils.sumOfArray(this._baiJiaLeModel._lastBetRecord),this._baiJiaLeModel._balance),App.ArrayUtils.sumOfArray(this._baiJiaLeModel._lastBetRecord)>this._baiJiaLeModel._balance&&this._baiJiaLeModel._balance>this._baiJiaLeModel.limitList[0].down/1e4)return void this._baiJiaLePopupView.Prompt.showPrompt(2,App.CommonUtils.money2Str(this._baiJiaLeModel._balance));this._baiJiaLeModel._balance<this._baiJiaLeModel.limitList[0].down/1e4&&App.PromTipsView.show("账户余额不足,是否前往充值",function(){this.openRecharge()},function(){},this,!0),this._baiJiaLeModel._lastBetRecord.forEach(function(t,i){if(Log.trace("_lastBetRecord",t,i),t>0){var o={betPlace:i,betMoney:t};e.push(o)}}.bind(this));var n={betInfo:e,tableinfo:o};e.length>0&&(this._baiJiaLeNet.requestBet(n),Log.trace("重复投注2",this._baiJiaLeModel._selfBetList,this._baiJiaLeModel._lastBetRecord))}else{var s=void 0;s=1==this.currDeskType?10:8;for(var r=1;s>r;r++){if(this._baiJiaLeModel._preBetInfos[r]>this._baiJiaLeModel.limitList[r].up)return t.Application.textReminder(3,this._baiJiaLeModel.limitList[r].up),void(this._baiJiaLeModel._preBetInfos[r]=this._baiJiaLeModel.limitList[r].up);this._baiJiaLeModel._preBetInfos[r]=this._baiJiaLeModel._lastBetRecord[r]+this._baiJiaLeModel._preBetInfos[r]}this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos),Log.trace("重复投注3",this._baiJiaLeModel._preBetInfos)}},i.prototype.ShowHandBtn=function(t){2==this._baiJiaLeModel._isBet&&(this._baiJiaLeModel._selBtnIndex=t+1,this._baiJiaLeModel._selBtnIndexNotify.setData(this._baiJiaLeModel._selBtnIndex))},i.prototype.backToDesk=function(){this._baiJiaLeNet.requestExitDesk(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_back_button")},i.prototype.bet=function(e){if(t.Application.baccaratCounterBetPlace(e,this.currDeskType),(0==App.CommonUtils.money(this._baiJiaLeModel._balance)||App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel._balance)&&App.PromTipsView.show("账户余额不足,是否前往充值",function(){this.openRecharge()},function(){},this,!0),this._baiJiaLeModel._betNum||0==this._baiJiaLeModel._betNum||(this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[0]),2==this._baiJiaLeModel._isBet){this._baiJiaLeModel._betPlace=e;var i={betMoney:App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum),betPlace:e},o={tableid:GameModuleMgr.i.getCurrDeskId()},n=[];if(n.push(o),0!=this._baiJiaLeModel._betNum&&App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)<this._baiJiaLeModel._balance)if(this._baiJiaLeModel._isAutoChecked){var s=[];s.push(i);var r={betInfo:s,tableinfo:n};if(this._baiJiaLeModel._selfBetList[e]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[e].up&&this._baiJiaLeModel._selfBetList[e]<this._baiJiaLeModel.limitList[e].up)return void App.PromTipsView.show("该位置投注限红为"+this._baiJiaLeModel.limitList[e].down/1e4+"-"+this._baiJiaLeModel.limitList[e].up/1e4+"是否投注"+(this._baiJiaLeModel.limitList[e].up-this._baiJiaLeModel._selfBetList[e])/1e4+"达到上限",function(){Log.trace("body111",r),r.betInfo[0].betMoney=this._baiJiaLeModel.limitList[e].up-this._baiJiaLeModel._selfBetList[e],Log.trace("body222",r),this._baiJiaLeNet.requestBet(r)},function(){},this,!0);this._baiJiaLeNet.requestBet(r),Log.trace("普通下注",this._baiJiaLeModel._meBetInfos,this._baiJiaLeModel._selfBetList)}else{if(1==e||2==e)if(0==this._baiJiaLeModel.bankOrPlayer.length)this._baiJiaLeModel.bankOrPlayer.push(e);else if(this._baiJiaLeModel.bankOrPlayer.length>0&&e!=this._baiJiaLeModel.bankOrPlayer[0])return void App.ScrollTxtTips.showTip("不能同时投注庄和闲");if(App.ArrayUtils.sumOfArray(this._baiJiaLeModel._preBetInfos)+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel._balance)return void App.ScrollTxtTips.showTip("预投注金额大于用户余额");if(this._baiJiaLeModel._preBetInfos[e]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[e].up)return void t.Application.textReminder(3,this._baiJiaLeModel.limitList[e].up);if(this._baiJiaLeModel._selfBetList[e]+this._baiJiaLeModel._preBetInfos[e]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum)>this._baiJiaLeModel.limitList[e].up)return void t.Application.textReminder(3,this._baiJiaLeModel.limitList[e].up);this._baiJiaLeModel._preBetInfos[e]=this._baiJiaLeModel._preBetInfos[e]+App.CommonUtils.moneyC2S(this._baiJiaLeModel._betNum),Log.trace("预投注限红",this._baiJiaLeModel._preBetInfos[e]),this._baiJiaLeBgView.showPreBet(this._baiJiaLeModel._preBetInfos)}else if(0==this._baiJiaLeModel._betNum){if(0==this._baiJiaLeModel._balance)return;if(this._baiJiaLeModel._selfBetList[this._baiJiaLeModel._betPlace]>=this._baiJiaLeModel.limitList[this._baiJiaLeModel._betPlace].up)return void t.Application.textReminder(3,this._baiJiaLeModel.limitList[e].up);this._baiJiaLePopupView.Prompt.showPrompt(2,App.CommonUtils.money2Str(this._baiJiaLeModel._balance))}}},i.prototype.getFiveChip=function(t){var e="";e=JSON.stringify(t);var i={tableid:GameModuleMgr.i.getCurrDeskId()},o={chip:e,tableinfo:i};this._baiJiaLeNet.requestAddChip(o)},i.prototype.setFiveChipAck=function(t){Log.trace("设置筹码返回",t);var e;e=t.chip?JSON.parse(t.chip):[0,3,6,8,9],this._baiJiaLeModel._chipArray=e,this._baiJiaLeMenuView._jeButton.setBtnChip(e),this._baiJiaLeMenuView._jeButton.setchipValue(this._baiJiaLeModel._multiple),this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1]},i.prototype.changeMultiple=function(t){this._baiJiaLeModel._multiple=t,this._baiJiaLeMenuView._jeButton.setchipValue(t)},i.prototype.getChipValue=function(e){Log.trace("当前筹码数组",e),this._baiJiaLeModel._currChipMoney=e,this._baiJiaLeModel._betNum=this._baiJiaLeModel._currChipMoney[this._baiJiaLeModel._selBtnIndex-1];for(var i=0;i<e.length;i++){var o=e[i];t.Application.baccaratCounterPick(o,this.currDeskType)}},i.prototype.getStartPos=function(){return this._baiJiaLeMenuView._messageinfo.getPoint()},i.prototype.MSGSuccess=function(t){return"1"==t?!0:!1},i.prototype.initSelfBet=function(){this._baiJiaLeModel._meBetInfos=[0,0,0,0,0,0,0,0,0,0]},i.prototype.initPreBet=function(){this._baiJiaLeModel._preBetInfos=[0,0,0,0,0,0,0,0,0,0]},i.prototype.showHelp=function(){this._baiJiaLePopupView.BaiJiaLeHelp.showPopup(),R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_help_button")},i.prototype.showLotteryHelp=function(){this._baiJiaLePopupView.LottertHelp.showPopup(),R.sendPlayerAction("Baccarat2operate_rulehint")},i.prototype.ShowsetChip=function(){this._baiJiaLePopupView.SetChip.showMenu(),this._baiJiaLePopupView.SetChip.setDefaultChip(this._baiJiaLeModel._chipArray),R.sendPlayerAction("Baccarat"+this.currDeskType+"operate_setcounter")},i.prototype.openRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.changeTable=function(t){this._baiJiaLePopupView.BaiJiaLeChangeTable.showPopup();var e;e=t?t:!1;var i={table_id:GameModuleMgr.i.getCurrDeskId(),is_switch_table:e};this._baiJiaLeNet.requestChangeTable(i)},i.prototype.enterTable=function(t){var e={table_id_old:t.table_id_old,table_id_new:t.table_id_new};this._baiJiaLeBgView.getCurryTime()<7&&5==this._baiJiaLeModel.curryGameStatus&&(this._baiJiaLeChipView.cleanTween(),this._baiJiaLeBgView.afterShowReslt(),this._baiJiaLeBgView._baiJiaLeTime.resetTimer()),this._baiJiaLeModel.curryTableName=t.table_name,this._baiJiaLeNet.requestEnterTable(e)},i.prototype.btnShowMenu=function(){R.sendPlayerAction("Baccarat"+this.currDeskType+"menu_button")},i.prototype.lotteryHis=function(){this._baiJiaLePopupView.showLotteryRecord();var t={table_id:this.currDeskId};this._baiJiaLeNet.requestLotteryHis(t),R.sendPlayerAction("Baccarat2operate_historyaward")},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._shuffle&&this._shuffle.destroy(),common.StarExpand.cleanFormPool(),this._baiJiaLeBgView._baiJiaLeTime.destroy(),this._baiJiaLeModel.destroy(),this._baiJiaLeNet.destroy(),this._baiJiaLeMenuView.destroy(),this._baiJiaLePopupView.destroy(),this._baiJiaLeChipView.destroy(),this._baiJiaLeBgView.destroy(),this._baiJiaLeModel=void 0,this._baiJiaLeNet=void 0,this._baiJiaLeMenuView=void 0,this._baiJiaLePopupView=void 0,this._baiJiaLeChipView=void 0,this._baiJiaLeBgView=void 0,this._shuffle=void 0,this._player=void 0,this.isBeted=!1,R.removeAllTimeOut(this)},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"baiJiaLe.GameController")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.initData=function(){this._issue="",this._isBet=0,this._balance=0,this._betPlace=0,this._selfInfo={},this._multiple=1,this._onlineNum=0,this._chipArray=[0,3,6,8,9],this._awardMoney=0,this._meBetInfos=[0,0,0,0,0,0,0,0,0,0],this._selfBetAll=0,this._selfBetList=[0,0,0,0,0,0,0,0,0,0],this._preBetInfos=[0,0,0,0,0,0,0,0,0,0],this._selBtnIndex=-1,this._awardHistory=[],this._betPlaceInfos=[],this._recordHistory=[],this._isAutoChecked=!1,this._lastBetRecord=[],this._gameStatusInfo={},this._selfPreBetList=[],this._currChipMoney=[1,10,100,1e3,0],this._currWinAreaList=[],this._currBetAreaList=[],this.isRecord=!1,this.tableType=0,this.limitList=[{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0},{up:0,down:0}],this.recordList=[],this.isBackstage=!1,this.flyStarList=[],this.bankOrPlayer=[],this.specialWinList=[],this.curryTableName="",this.curryRemainTime=0,this.curryGameStatus=0,this.lotteryResultStatus=2},i.prototype.initDataNotify=function(){this._selfInfoDataNotify=t.DataNotify.create({}),this._awardHistoryDataNotify=t.DataNotify.create({}),this._onlineNumDataNotify=t.DataNotify.create(0),this._gameStatusInfoDataNotify=t.DataNotify.create(0),this._betPlaceInfosDataNotify=t.DataNotify.create(this._betPlaceInfos),this._selBtnIndexNotify=t.DataNotify.create(this._selBtnIndex),this._isBetDataNotify=t.DataNotify.create(this._isBet),this._isAutoCheckedDataNotify=t.DataNotify.create(this._isAutoChecked)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._balance=void 0,this._selfInfo=void 0,this._multiple=void 0,this._meBetInfos=void 0,this._preBetInfos=void 0,this._selfBetList=void 0,this._awardHistory=void 0,this._betPlaceInfos=void 0,this._recordHistory=void 0,this._lastBetRecord=void 0,this._gameStatusInfo=void 0,this._selfPreBetList=void 0,this._isBetDataNotify=void 0,this._currBetAreaList=void 0,this._currWinAreaList=void 0,this._selBtnIndexNotify=void 0,this._selfInfoDataNotify=void 0,this._onlineNumDataNotify=void 0,this._awardHistoryDataNotify=void 0,this._betPlaceInfosDataNotify=void 0,this._isAutoCheckedDataNotify=void 0,this._gameStatusInfoDataNotify=void 0,this._chipArray.length=0,this._chipArray=void 0,this._currChipMoney.length=0,this._currChipMoney=void 0,this.isRecord=void 0,this.tableType=void 0,this.limitList=void 0,this.recordList=void 0,this.isBackstage=void 0,this.flyStarList=void 0,this.bankOrPlayer=void 0,this.curryTableName=void 0,this.specialWinList=void 0,this.curryGameStatus=void 0,this.curryRemainTime=void 0,this.lotteryResultStatus=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"baiJiaLe.GameModel")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(){function t(){}return t.getCardWithNum=function(t){console.log(t);var e=t>>16,i=(65535&t)>>8;if(0==e)var o="spade";else if(1==e)var o="heart";else if(2==e)var o="flower";else if(3==e)var o="block";var n="ui_hhdz_data_card_json.card_hhdz_"+o+"_"+i;return 0==e&&0==i&&(n=""),console.log("服务端发来的牌",n),n},t.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},t.getBetNum=function(t,e){t.forEach(function(t){1==t.betType?e.black+=t.betNum:2==t.betType?e.red+=t.betNum:e.lucky+=t.betNum})},t.isRepeat=function(t){var e={};for(var i in t){if(e[t[i]])return!0;e[t[i]]=!0}return!1},t.textReminder=function(t,e,i){switch(t){case 1:App.ScrollTxtTips.showTip("下注位置错误");break;case 2:App.ScrollTxtTips.showTip("下注金额太小或太大溢出");break;case 3:App.ScrollTxtTips.showTip("超出单人最大限红"+e/1e4);break;case 4:App.ScrollTxtTips.showTip("非投注阶段，请稍后");break;case 5:App.ScrollTxtTips.showTip("超出总最大限红");break;case 6:App.ScrollTxtTips.showTip("超出单人最大限红"+e/1e4);break;case 7:App.ScrollTxtTips.showTip("当前项投注限额为"+i/1e4+"-"+e/1e4);break;case 8:App.ScrollTxtTips.showTip("未知错误");break;case 9:App.ScrollTxtTips.showTip("庄闲不可同时投注")}},t.numShake=function(t){var e=t;egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,300)},t.baccaratCounterPick=function(t,e){0==t&&(t="Allin");
var i="Baccarat"+e+"counter_pick"+t;R.sendPlayerAction(i)},t.baccaratCounterBet=function(t,e){0==t&&(t="allin");var i="Baccarat"+e+"counter_bet"+t;R.sendPlayerAction(i)},t.baccaratCounterBetPlace=function(t,e){var i="Baccarat"+e+this.tempBetPlace[t];Log.trace("埋点",t,i),R.sendPlayerAction(i)},t.tempBetPlace=["","bets_banker","bets_player","bets_tie","bets_bankerpair","bets_playerpair","bets_big","bets_small","bets_arbitrarypair","bets_perfectpair"],t}();t.Application=e,__reflect(e.prototype,"baiJiaLe.Application")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="BaiJiaLeChipViewSkin",o._baiJiaLeBtnArea.initComponent(t),o}return __extends(i,e),i.prototype.initAllPaiStatus=function(){var t=this;Log.trace("初始化牌的位置状态"),this._imageCardGroup.$children.forEach(function(e){var i=e;i.source="common_ui_cardback_png",i.x=t._pokerModel.x,i.y=t._pokerModel.y,i.scaleX=t._pokerModel.scaleX,i.scaleY=t._pokerModel.scaleY,i.rotation=t._pokerModel.rotation,i.alpha=t._pokerModel.alpha}),this._playerNumBox.alpha=0,this._bankerNumBox.alpha=0},i.prototype.faPai=function(){egret.Tween.get(this._playerPai1).wait(400).to({x:this._imgPos1.x,y:this._imgPos1.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(800).to({x:this._imgPos2.x,y:this._imgPos2.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(1200).to({x:this._imgPos3.x,y:this._imgPos3.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(1600).to({x:this._imgPos4.x,y:this._imgPos4.y,scaleX:1,scaleY:1,rotation:0,alpha:1},400,egret.Ease.sineInOut),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,400),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,800),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1200),R.setTimeOnce(function(){App.SoundManager.playEffect("flipcard_mp3")},this,1600)},i.prototype.showCard=function(){this.showCardItem(this._playerPai1,this._imgPos1),this.showCardItem(this._bankerPai1,this._imgPos2),this.showCardItem(this._playerPai2,this._imgPos3),this.showCardItem(this._bankerPai2,this._imgPos4)},i.prototype.showCardItem=function(t,e){t.x=e.x,t.y=e.y,t.scaleX=t.scaleY=1,t.rotation=0,t.alpha=1},i.prototype.buPai=function(t,e){var i=this.getCardWithNum(t),o=this.getCardWithNum(e);""!=i&&egret.Tween.get(this._playerPaiBu).wait(0).to({x:this._imgPos5.x,y:this._imgPos5.y,scaleX:1,scaleY:1,rotation:90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._playerPaiBu.source=i}.bind(this)).to({scaleY:1},200),""!=o&&egret.Tween.get(this._bankerPaiBu).wait(900).to({x:this._imgPos6.x,y:this._imgPos6.y,scaleX:1,scaleY:1,rotation:-90,alpha:1},300,egret.Ease.sineInOut).to({scaleY:0},200).call(function(){this._bankerPaiBu.source=o}.bind(this)).to({scaleY:1},200)},i.prototype.buPaiShow=function(t,e){var i=this.getCardWithNum(t),o=this.getCardWithNum(e);""!=i&&(this._playerPaiBu.x=this._imgPos5.x,this._playerPaiBu.y=this._imgPos5.y,this._playerPaiBu.scaleX=this._playerPaiBu.scaleY=1,this._playerPaiBu.rotation=90,this._playerPaiBu.alpha=1,this._playerPaiBu.source=i),R.setTimeOnce(function(){""!=o&&(this._bankerPaiBu.x=this._imgPos6.x,this._bankerPaiBu.y=this._imgPos6.y,this._bankerPaiBu.scaleX=this._bankerPaiBu.scaleY=1,this._bankerPaiBu.rotation=-90,this._bankerPaiBu.alpha=1,this._bankerPaiBu.source=o)},this,0)},i.prototype.kaiPai=function(t,e){egret.Tween.get(this._playerPai1).wait(200).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[0]);this._playerPai1.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._playerPai2).wait(400).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var t=this.getCardWithNum(e[1]);this._playerPai2.source=t}.bind(this),[e]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai1).wait(600).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[0]);this._bankerPai1.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut),egret.Tween.get(this._bankerPai2).wait(800).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){var e=this.getCardWithNum(t[1]);this._bankerPai2.source=e}.bind(this),[t]).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},i.prototype.liangpai=function(t,e){this._playerPai1.source=this.getCardWithNum(e[0]),this._playerPai2.source=this.getCardWithNum(e[1]),this._bankerPai1.source=this.getCardWithNum(t[0]),this._bankerPai2.source=this.getCardWithNum(t[1])},i.prototype.setLbNum=function(t,e,i){R.setTimeOnce(function(){this._playerNumBox.alpha=1,this._bankerNumBox.alpha=1,this._playerNum.text=t+"",this._bankerNum.text=e+""},this,i)},i.prototype.isDouble=function(e){var i=[],o=e.slice(0,2);o.forEach(function(t){i.push(this.getCardNumber(t))}.bind(this));var n=t.Application.isRepeat(i);return n},i.prototype.getCardWithNum=function(t){var e=t>>16,i=(65535&t)>>8,o=11==i?"j":12==i?"q":13==i?"k":i;if(egret.log("hua:",e),egret.log("number:",o),0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s=""),egret.log("cardStr:",s),s},i.prototype.getCardNumber=function(t){var e=(65535&t)>>8;return e},i.prototype.setBtnArea=function(t){this._baiJiaLeBtnArea.setBtnArea(t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._baiJiaLeBtnArea.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._baiJiaLeBtnArea.removeEvent()},i.prototype.cleanTween=function(){egret.Tween.removeTweens(this._playerPai1),egret.Tween.removeTweens(this._bankerPai1),egret.Tween.removeTweens(this._playerPai2),egret.Tween.removeTweens(this._bankerPai2),this._playerPai1.alpha=0,this._bankerPai1.alpha=0,this._playerPai2.alpha=0,this._bankerPai2.alpha=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),egret.Tween.removeTweens(this._playerPai1),egret.Tween.removeTweens(this._bankerPai1),egret.Tween.removeTweens(this._playerPai2),egret.Tween.removeTweens(this._bankerPai2),this._baiJiaLeBtnArea.destroy()},i}(BaseEuiView);t.BaiJiaLeChipView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeChipView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._approach=null,o.skinName="BaiJiaLeMenuViewSkin",o._jeButton.initComponent(e),o._logicBtn.initComponent(e),o._toolBar.initComponent(e),o._roadMap.initComponent(e),o.initUI(),o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),Log.trace("初始化BaiJiaLeMenuView");var e=this.getBaseController().getModel();this._jeButton.createChip(e._chipArray),this._jeButton.setchipValue(e._multiple),this._messageinfo.allPlayerDisplay(),this._messageinfo.initInfo(),this._messageinfo.setPluteLelf(),this._toolBar.setOnlineLelf(),this._logicBtn.open()},e.prototype.initData=function(){t.prototype.initData.call(this)},e.prototype.changeTablebtnEffect=function(){this.diceInit(),this.diceInitRenders(),this._approach.play(0)},e.prototype.diceInit=function(){this._approach||(this._approach=new common.comBones)},e.prototype.diceInitRenders=function(){if(!this._approach.parent){var t="table";this._changeTableBtn.addChild(this._approach),this._approach.updateId(t)}},e.prototype.initRedPacket=function(){this.btnRedPacket2=lobby.RedPackBone.create(),this.btnRedPacket2.init(),this._redPacketBtn.addChild(this.btnRedPacket2),this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0},e.prototype.onChangeTableHandler=function(){Log.trace("点击换桌",this._approach.y);var t=this.getBaseController();egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:0},80).call(function(){t.applyFunc("changeTableReq",!0)},this)},e.prototype.onLotteryHisHandler=function(){this.applyFunc("lotteryHis")},e.prototype.onLotteryHelpHandler=function(){this.applyFunc("showLotteryHelp")},e.prototype.setLotteryHis=function(t){this.lotteryHisTrigger.touchEnabled=2==t?!0:!1},e.prototype.specialPlayerMoney=function(t,e){e>3||0>e||this._messageinfo.specialPlayerMoney(t,e)},e.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},e.prototype.RedPackNotify=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation)},e.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._changeTableBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.lotteryHisTrigger.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHisHandler,this),this.lotteryHelpTrigger.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHelpHandler,this),this._redPacketBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._changeTableBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.lotteryHisTrigger.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHisHandler,this),this.lotteryHelpTrigger.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLotteryHelpHandler,this),this._redPacketBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._jeButton.destroy(),this._logicBtn.destroy(),this._toolBar.destroy(),this._roadMap.destroy(),this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0)},e}(BaseEuiView);t.BaiJiaLeMenuView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeMenuView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="BaiJiaLePopupViewSkin",o.Prompt.initComponent(e),o.SetChip.initComponent(e),o.BaiJiaLeHelp.initComponent(),o.BaiJiaLeChangeTable.initComponent(e),o.LotteryRecord.initComponent(e),o.LottertHelp.initComponent(e),o.initUI(),o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.SetChip.getcoordinate(),this.SetChip.createChip(),this.LotteryRecord.initUI()},e.prototype.setDefaultChip=function(t){this.SetChip.setDefaultChip(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.SetChip.addEvent(),this.BaiJiaLeChangeTable.addEvent(),this.LotteryRecord.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.SetChip.removeEvent(),this.BaiJiaLeChangeTable.removeEvent(),this.LotteryRecord.removeEvent()},e.prototype.showLotteryRecord=function(){this.LotteryRecord.showPopup()},e.prototype.renderLotteryRecord=function(t){this.LotteryRecord.refreshData(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this.Prompt.destroy(),this.BaiJiaLeHelp.destroy(),this.SetChip.destroy(),this.BaiJiaLeChangeTable.destroy(),this.LotteryRecord.destroy(),this.LottertHelp.destroy()},e}(BaseEuiView);t.BaiJiaLePopupView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLePopupView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(BaseEuiView);t.BaiJiaLeTipsView=e,__reflect(e.prototype,"baiJiaLe.BaiJiaLeTipsView")}(baiJiaLe||(baiJiaLe={}));var baiJiaLe;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"baiJiaLe","BaiJiaLeBgViewSkin")||this;return i.currentY=0,i._delayTime=1e3,i.coinBox=[],i.allChipList=[],i.winpos=[],i._baiJiaLeTime.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.initCoinBox(),this.initBoneAnim(),this.resetHighLightArea(),this.clearCoin(),this.createHeadPosition(),this.initBroadcast(LayerManager.UI_Tips)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}for(var i=0;6>i;i++){var o={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(o)}},i.prototype.initBoneAnim=function(){this._timer=new egret.Timer(3e3,1),this._timer.addEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._heAnim=new common.comBones,this._heAnim.updateId("HeAnim",["HeAnim"]),this._xianAnim=new common.comBones,this._xianAnim.updateId("XianAnim",["XianAnim"]),this._zhuangAnim=new common.comBones,this._zhuangAnim.updateId("ZhuangAnim",["ZhuangAnim"])},i.prototype.resetHighLightArea=function(){for(var t in this._highLight.$children)this._highLight.$children[t].visible=!1},i.prototype.showHighLightArea=function(t){var e=this.getBaseController().getModel();2==e.tableType&&(App.ArrayUtils.removeOfArray(t,8),App.ArrayUtils.removeOfArray(t,9)),t.forEach(function(t){var e=this["_highLight"+t];e.visible=!0,e.tw=egret.Tween.get(e),e.tw.to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){e.visible=!1,egret.Tween.removeTweens(e)},e)}.bind(this))},i.prototype.showBetMoney=function(t){t.forEach(function(t){var e=this["_scoreGroupItem"+t.betPlace];t.betMoney>0&&(e.$children[0].text=""+App.CommonUtils.money2StrTwo(t.betMoney),this.showCoin(t.betPlace,t.betMoney))}.bind(this))},i.prototype.allBetNumShacke=function(e){var i=this["_scoreGroupItem"+e],o=i.getChildAt(0);t.Application.numShake(o)},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.showCoin=function(e,i){var o=t.Application.getNumObj(App.CommonUtils.money(i)),n=Object.keys(o),s=this["_chipGroupItem"+e].$children[0],r=this["_chipGroupItem"+e].$children[1],a=this["_chipGroupItem"+e].$children[2];this.renderCoinType(n[0],o[n[0]],this.coinBox[e-1].coinBoxObj0,s),4>e&&(n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e-1].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e-1].coinBoxObj1._coinType="",this.coinBox[e-1].coinBoxObj1._coinNum=0,this.coinBox[e-1].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e-1].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e-1].coinBoxObj2._coinType="",this.coinBox[e-1].coinBoxObj2._coinNum=0,this.coinBox[e-1].coinBoxObj2._currentY=0))},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_t_9_png",n=1e5;break;case"w":s="common_ui_t_4_png",n=1e4;break;case"q":s="common_ui_t_8_png",n=1e3;break;case"b":s="common_ui_t_5_png",n=100;break;case"s":s="common_ui_t_2_png",n=10;break;case"g":s="common_ui_t_0_png",n=1}for(var r=0,a=-60,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(Math.random()>.65){var i=Math.random();h=i>.5?2:-2}else h=0;egret.Tween.get(l[e]).wait(100*e).to({y:o._currentY,x:h},100,egret.Ease.sineInOut),function(t){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[t].alpha=1},this,100*t)}(e),o._currentY-=5}.bind(this))},i.prototype.resetStar=function(){for(var t=1;9>=t;t++)this["_starEndPos"+t].visible=!1},i.prototype.starAnim=function(t,e){var i=this.getBaseController(),o=i.getStartPos(),n=this.getMiddlePos(t),s=this.getEndPos(t,e),r=common.StarExpand.create();if(r){r.init(this);var a=App.MathUtils.getDistance2(o,s)+400;r.run(o,n,s,a,function(){this["_starEndPos"+t].visible=!0},this)}},i.prototype.getMiddlePos=function(t){var e=this["_middlePos"+t],i=this._middlePos.localToGlobal(e.x,e.y);return i},i.prototype.getEndPos=function(t,e){var i=this["_starEndPos"+t],o=e?i.x+140:i.x,n=this._starEndPos.localToGlobal(o,i.y);return n},i.prototype.showResultAnim=function(t){switch(t){case 1:this._resultAnim.addChild(this._xianAnim),this._xianAnim&&this._xianAnim.play(1,1,"XianAnim");break;case 2:this._resultAnim.addChild(this._zhuangAnim),this._zhuangAnim&&this._zhuangAnim.play(1,1,"ZhuangAnim");break;case 3:this._resultAnim.addChild(this._heAnim),this._heAnim&&this._heAnim.play(1,1,"HeAnim")}this._timer.start()},i.prototype.afterShowReslt=function(){this._resultAnim.removeChildren(),this._timer.stop(),this._timer.reset()},i.prototype.createWinChip=function(t,e){var i=this["ChipPos"+t],o=this["_chipGroupItem"+t];if(0!=this.winpos.length){var n,s,r=this.winpos[e];n=i.x,s=i.y;for(var a=this.GroupChip.globalToLocal(r.x,r.y),h=0;5>h;h++){var l=App.MathUtils.random(0,o.width),p=App.MathUtils.random(0,o.height),c=common.chipBtn.create();c.init(h),c.setNameNum(e);var u=Math.floor(n+l),d=Math.floor(s+p),m=Math.floor(a.x),y=Math.floor(a.y);this.GroupChip.addChild(c),c.x=o.x+o.width/2,c.y=o.y+o.height/2,c.scaleX=.5,c.scaleY=.5,c.alpha=0,c.setScore(),c.setFlyX(u),c.setFlyY(d),c.setFlyChipX(m),c.setFlyChipY(y),this.allChipList.push(c)}Log.trace("GroupChip",this.GroupChip.$children)}},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,150),this.showHighLightArea(t)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.coinFlicker=function(t){t.forEach(function(t){Log.trace("winPlace",t);var e=this["_chipGroupItem"+t];egret.Tween.get(e).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).to({alpha:0},400,egret.Ease.quadIn).to({alpha:1},400,egret.Ease.quadIn).call(function(){e.visible=!0,egret.Tween.removeTweens(e)},e)}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){var e=this["_chipGroupItem"+t];e.alpha=1}.bind(this))},i.prototype.flyWinChip=function(){Log.trace("飞筹码1",this.allChipList),this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()}),this.allChipList.length=0},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.betToPlaceAni=function(t,e,i){base.GameCoinMgr.i.flyToPlace(t,this["ChipPos"+e],i,this.winpos,this.GroupChip)},i.prototype.showSelfBet=function(t){for(var e=t.length,i=1;e>i;i++){var o=this["_scoreGroupItem"+i];t[i]>0?o.$children[1].text=""+App.CommonUtils.money2StrTwo(t[i]):o.$children[1].text=""}},i.prototype.showPreBet=function(t){for(var e=t.length,i=1;e>i;i++){var o=this["_scoreGroupItem"+i];t[i]>0?o.$children[2].text=""+App.CommonUtils.money2StrTwo(t[i]):o.$children[2].text=""}},i.prototype.clearCoin=function(){for(var t=1;10>t;t++)if(this["_scoreGroupItem"+t].$children[0].text="",this["_scoreGroupItem"+t].$children[1].text="",this["_scoreGroupItem"+t].$children[2].text="",this["_chipGroupItem"+t].$children[0].removeChildren(),4>t)for(var e=0;3>e;e++)this.removeCoins(this["_chipGroupItem"+t].getChildAt(e))},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.clearPreBet=function(){for(var t=1;10>t;t++)this["_scoreGroupItem"+t].$children[2].text=""},i.prototype.setTermno=function(t){this._issue.text="期号:"+t},i.prototype.setCurryTermno=function(t){this._curryIssue.text="期号:"+t},i.prototype.hideCurryTermno=function(t){this._curryIssue.visible=t},i.prototype.setTableName=function(t){this._curryTableName.text=t},i.prototype.getCurryTime=function(){return this._baiJiaLeTime.getCurryTime()},i.prototype.setTableBG=function(t){0!=t&&t&&(this.table_bg.source=1==t?"baijiale_ui_table_jpg":"bjl_ui_caipiaozhuo_jpg",this._scoreGroupItem8.visible=1==t,this._scoreGroupItem9.visible=1==t,this.lottery_bg.visible=2==t,this.baijialeHelpBtn.visible=2==t,this._issue.size=1==t?18:16,this._curryIssue.visible=2==t,this._baiJiaLeTime.setCurryTimer(t),2==t&&(this._issue.text="获取上期开奖结果...",this.lottery_result.visible=!1))},i.prototype.showLotteryBall=function(t){if(t){var e=JSON.parse(t);Log.trace("tempData",e);for(var i=0;4>=i;i++){var o=this.lottery_result.getChildAt(i);o.source="common_ui_cp"+e[i]+"_png"}this.lottery_result.visible=!0}},i.prototype.onChangeTableHandler=function(){Log.trace("点击换桌"),egret.Tween.get(this._changeTableBtn).to({y:this._changeTableBtn.y+10},80).to({y:this._changeTableBtn.y},80)},i.prototype.openLotteryHis=function(){Log.trace("打开彩票记录"),this.applyFunc("lotteryHis")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),Log.trace("GameView添加事件监听")},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this)},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.stopAnim=function(){egret.Tween.removeTweens(this),this._baiJiaLeTime.resetTimer(),this._heAnim.stopGame(),this._xianAnim.stopGame(),this._zhuangAnim.stopGame()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._baiJiaLeTime.destroy(),this._chipList=null,this._chipImgList=null,this.coinBox=null,this._heAnim&&(this._heAnim.clean(),this._heAnim.destroy(),this._heAnim=void 0),this._xianAnim&&(this._xianAnim.clean(),this._xianAnim.destroy(),this._xianAnim=void 0),this._zhuangAnim&&(this._zhuangAnim.clean(),this._zhuangAnim.destroy(),this._zhuangAnim=void 0),this._timer&&(this._timer.removeEventListener(egret.TimerEvent.TIMER,this.afterShowReslt,this),this._timer.stop()),this._resultAnim.removeChildren(),this._timer=null,base.GameCoinMgr.i.clean(),this.clearFlyWinChip()},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"baiJiaLe.GameView")}(baiJiaLe||(baiJiaLe={}));var Main=function(t){function e(){var e=t.call(this)||this;return e._hotGame=null,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this._hotGame=new hot.HotGame,this._hotGame.initScene(),this.initLifecycle(),this.loadResConfig(),GameNative.openInstallEffect("enter_game")},e.prototype.initLifecycle=function(){var t=this;egret.lifecycle.onPause=function(){App.Socket.setPause(!0),App.IsSimulate&&(App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Pause),e.onPause(),egret.ticker.pause())},egret.lifecycle.onResume=function(){App.IsSimulate&&(App.ControllerManager.applyFuncAll(GameConsEvent.Game_Frame_Resume),e.onResume(),egret.ticker.resume()),t._hotGame.onHeart(),App.Socket.setPause(!1)}},e.onPause=function(){this._mTimePauseResume=egret.getTimer()},e.onResume=function(){this._mTimePauseResume=egret.getTimer()-this._mTimePauseResume,this._mTimePauseResume>GameBase.reConnetTime&&App.IsSimulate&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},Object.defineProperty(e,"webResource",{get:function(){return App.platformMoudel==GamePlatform.WebDecorate},enumerable:!0,configurable:!0}),e.prototype.loadResConfig=function(){e.webResource&&(EXML.prefixURL="static/"),App.ResourceUtils.addConfig("resource.json",e.webResource?"static/resource/":"resource/"),App.ResourceUtils.addConfig("config/base.json",e.webResource?"static/resource/":"resource/"),App.ResourceUtils.loadConfig(this.onConfigComplete,this)},e.prototype.onConfigComplete=function(){var t="resource/theme.json";t=e.webResource?"static/"+t:t;var i=new eui.Theme(t,this.stage);i.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){var t=["base_config","preload_loading"];App.ResourceUtils.loadGroups("Init_Config",t,this.onResourceLoadComplete,this.onResourceLoadProgress,this)},e.prototype.onResourceLoadComplete=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return Log.log("===== Main onResourceLoadComplete ====="),App.Init(),this._hotGame.showLoading(),App.DeviceUtils.IsNative?(GameBase.IsTest=!1,App.IsTest=!1,App.IsSimulate=!0,App.IsTestIphoneX=!1,App.IsOpenToolView=!1,GameNative.initNativeExternal(),this._hotGame.initBuildData(),R.setTimeOut(function(){GameNative.sendToNative(GameNative.GameReadyComplete,"")},this,100)):(App.isWebPhone||App.MouseUtils.setMouseEnable(),(App.isWebDecorate||App.isWebPhone)&&(App.IsDecrypt=!0,App.IsTest=!1,App.IsSimulate=!0,App.IsTestIphoneX=!1,App.IsOpenToolView=!1,this._hotGame.updateUrlFirst(),this._hotGame.asyncLoadFz()),removeLoadingDiv(),GameBase.getDeviceId()||GameBase.saveDeviceId(m.LocalData.GenerateUUID()),this._hotGame.start(),App.IsTestIphoneX&&(App.checkIphoneX(),t=new egret.Shape,t.graphics.beginFill(16711680,1),t.graphics.drawRect(0,0,55,350),t.graphics.endFill(),t.y=315-t.height/2+20,LayerManager.UI_Tips.addChild(t))),App.IsOpenToolView&&ToolView.i(),App.IsTest&&App.TimerManager.doFrame(60,0,function(){Log.info("hashCount:",ProfileUtils.hashCount())},this),[2]})})},e.prototype.onResourceLoadProgress=function(t,e){},e._mTimePauseResume=0,e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var base;!function(t){var e=function(){function t(){this.chipArr_0_0=[],this.chipArr_0_2=[],this.chipArr_0_5=[],this.chipArr_0_8=[],this.chipArr_0_4=[],this.chipArr_0_10=[],this.chipArr_1_0=[],this.chipArr_1_2=[],this.chipArr_1_5=[],this.chipArr_1_8=[],this.chipArr_1_4=[],this.chipArr_1_10=[],this.chipArr_2_0=[],this.chipArr_2_2=[],this.chipArr_2_5=[],this.chipArr_2_8=[],this.chipArr_2_4=[],this.chipArr_2_10=[],this.chipArr_3_0=[],this.chipArr_3_2=[],this.chipArr_3_5=[],this.chipArr_3_8=[],this.chipArr_3_4=[],this.chipArr_3_10=[],this.chipArr_4_0=[],this.chipArr_4_2=[],this.chipArr_4_5=[],this.chipArr_4_8=[],this.chipArr_4_4=[],this.chipArr_4_10=[],this.chipArr_5_0=[],this.chipArr_5_2=[],this.chipArr_5_5=[],this.chipArr_5_8=[],this.chipArr_5_4=[],this.chipArr_5_10=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.flyToPlace=function(t,e,i,o,n,s){var r=Math.floor(App.CommonUtils.money(i));if(r){for(var a=String(r),h=this.createChip(a),l=Number(a[0]),p=0;l>p;p++){var c=common.chipBtn.create();this["chipArr_"+t+"_"+h].push(c);var u=o[t],d=n.globalToLocal(u.x,u.y);n.addChild(c),s?(c.init(h,"t_"),c.scaleX=1,c.scaleY=1):(c.init(h),c.scaleX=.5,c.scaleY=.5),c.x=d.x,c.y=d.y,c.alpha=0;var m=e;c.setFlyChipX(m.x),c.setFlyChipY(m.y),this.removeChips(t)}this.moveToPlace(this["chipArr_"+t+"_"+h])}},t.prototype.createChip=function(t){var e,i=[0,2,5,8,4,10];return e=i[t.length-1]},t.prototype.moveToPlace=function(t){if(t&&t.length){var e=t.pop();e.alpha=1,e.moveToPlace(),R.setTimeOnce(function(){this.moveToPlace(t)},this,50)}},t.prototype.removeChips=function(t){for(var e=[0,2,5,8,4,10],i=0;i<e.length;i++)this.removeChip(this["chipArr_"+t+"_"+e[i]])},t.prototype.removeChip=function(t){if(t&&t.length){if(!(t.length>7))return;var e=t.shift();common.chipBtn.release(e),this.removeChip(t)}},t.prototype.clean=function(){for(var t=[0,2,5,8,4,10],e=0;e<t.length;e++)for(var i=0;6>i;i++)if(this["chipArr_"+i+"_"+t[e]]&&this["chipArr_"+i+"_"+t[e]].length)for(;this["chipArr_"+i+"_"+t[e]].length;){var o=this["chipArr_"+i+"_"+t[e]].pop();common.chipBtn.release(o)}R.removeAllTimeOut(this)},t._i=null,t}();t.GameCoinMgr=e,__reflect(e.prototype,"base.GameCoinMgr")}(base||(base={}));var base;!function(t){var e=function(){function t(){}return t.Goto_Leave_Game="Goto_Leave_the_Game",t.Goto_Leave_Desk="Goto_Leave_the_Desk",t}();t.BaseConst=e,__reflect(e.prototype,"base.BaseConst")}(base||(base={}));var base;!function(t){var e=function(){function t(){}return t.CsWorldLeaveSceneReqType=10104,t.ScWorldLeaveSceneResType=10105,t.CsWorldLeaveTableReqType=10148,t.ScWorldLeaveTableResType=10149,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"base.ProxyKeyConst")}(base||(base={}));var base;!function(t){var e;!function(t){t[t.Base=1e3]="Base"}(e=t.ViewConst||(t.ViewConst={}))}(base||(base={}));var ErrorManager=function(){function t(){this._config=null,this._config=RES.getRes(App.GlobalData.ErrorConfig)}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Error_Msg_Tips_Show",{get:function(){return BaseProxy.Socket_CMD+"10051"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ec",{get:function(){return t.i.ErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ErrorCode",{get:function(){return hqtpb.common.ErrorCode},enumerable:!0,configurable:!0}),t.prototype.getErrorByData=function(t){var e=t.description?t.description:this.getError(t.code);return e=e&&e.length>0?e:"未知错误："+t.code},t.prototype.getError=function(t){return this._config[""+t]||""},t.prototype.showError=function(e){App.MessageCenter.dispatch(t.Error_Msg_Tips_Show,{description:e})},t._instance=null,t}();__reflect(ErrorManager.prototype,"ErrorManager");var GameBase=function(){function t(){}return Object.defineProperty(t,"AssetsServerIp",{get:function(){var e=t.getGlobalData("_mAssetsServerIp");return e&&App.IsDecrypt&&(e=ED.prototype(e)),e},enumerable:!0,configurable:!0}),t.saveResoureServerIp=function(e){App.CommonUtils.isNullOrUndefined(e)||t.saveGlobalData("_mAssetsServerIp",e)},Object.defineProperty(t,"GameServerIp",{get:function(){var e=t.getGlobalData("_mGameServerIp");return e&&App.IsDecrypt&&(e=ED.prototype(e)),e},enumerable:!0,configurable:!0}),t.saveGameServerIp=function(e){App.CommonUtils.isNullOrUndefined(e)||t.saveGlobalData("_mGameServerIp",e)},Object.defineProperty(t,"CurrAppVersion",{get:function(){return t._mCurrAppVersion},enumerable:!0,configurable:!0}),t.initCurrAppVersion=function(e){t._mCurrAppVersion=e},Object.defineProperty(t,"CurrAppMerchant",{get:function(){return t._mCurrAppMerchant},enumerable:!0,configurable:!0}),t.initCurrAppMerchant=function(e){t._mCurrAppMerchant=e},t.getMainVersion=function(){var e=App.GlobalData.WebVer?App.GlobalData.WebVer:"v1.9.x";return App.DeviceUtils.IsNative&&(e=t.getLocalData("last_main_version_s"),e=e?e.split("_").join("."):t.CurrAppVersion),e+"."+t._mCodeVersion},t.getGameVersion=function(e){var i=t.getLocalData("last_"+e+"_version_s");return i?i.split("_").join("."):"v0.0.1"},t.getDeviceId=function(){return m.LocalData.getLocalData(App.IsDecrypt?GR.prototype("GameDeviceId"):"GameDeviceId")
},t.saveDeviceId=function(t){var e=App.IsDecrypt?GR.prototype("GameDeviceId"):"GameDeviceId";m.LocalData.saveLocalData(e,t)},t.getCurrServerTime=function(){var e=egret.getTimer()-t._currOldTime;return t._currServerTime<=0?0:t._currServerTime+e},t.saveCurrServerTime=function(e){t._currOldTime=egret.getTimer(),t._currServerTime=e},t.getLocalData=function(e){return e=t.CurrAppVersion+e,e=App.IsDecrypt?GR.prototype(e):e,m.LocalData.getLocalData(e)},t.saveLocalData=function(e,i){e=t.CurrAppVersion+e,e=App.IsDecrypt?GR.prototype(e):e,m.LocalData.saveLocalData(e,i)},t.getGlobalData=function(t){t=App.IsDecrypt?GR.prototype(t):t;var e=m.LocalData.getLocalData(t);return e&&"null"!=e&&"undefined"!=e?ED.prototype(e):""},t.saveGlobalData=function(t,e){t=App.IsDecrypt?GR.prototype(t):t,m.LocalData.saveLocalData(t,EE.prototype(e))},t._mCodeVersion="109",t.IsTest=!0,t.reConnetTime=18e4,t.GameWidth=1120,t.GameHeight=630,t._mCurrAppVersion="v1.12.0",t._mCurrAppMerchant="50001",t.mIsPublicDownloaded=!1,t._currServerTime=0,t._currOldTime=0,t}();__reflect(GameBase.prototype,"GameBase");var GR;!function(t){function e(t){var e=t;e=i.encode(e),e="GR"+e+"TT",e=(""+e).split("").reverse().join(""),e=i.encode(e);var o=(""+e).split("");return o.splice(5,0,"KFC"),e=o.join(""),e=i.encode(e)}var i=new Basiie;t.prototype=e}(GR||(GR={}));var GameModuleMgr=function(){function t(){this._mCurrGame=null,this._mGameEntrances={},this._mCurrSceneType=0,this._mCurrSceneId=0,this._mCurrDeskId=0,this._mCurrDeskType=0,this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mIsOnlySceneList={},this._mIsShowProgress=!1}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.initGameMoudle=function(){this._mArrGameMoudel=[];var t=RES.getRes(App.GlobalData.Games).Games;Log.log("initGameMoudle: ",t);for(var e in t){var i=t[e],o=new GameMoudleInfo;o.key=e,o.gameName=i.title,o.gameIcon=i.icon,o.isOpen=i.isOpen,o.isHotGame=i.isHotGame,o.gameIndex=i.index,o.isRoom=i.isRoom,o.isDesk=i.isDesk,o.gameIconAnim=i.animRes,o.fixX=i.fixX||0,o.fixY=i.fixY||0,o.fixSX=i.fixSX||0,o.fixSY=i.fixSY||0,o.isResBig=i.isResBig||!1,o.isOnly=i.isOnly||!1,o.isForTest=i.isForTest||!1;for(var n=i.gameType.split("|"),s=0;s<n.length;s++){var r=parseInt(n[s]);o.mArrGameType.push(r),o.isOnly&&(this._mIsOnlySceneList[r]="1")}o.setArrRoomName(i.roomName?i.roomName.split("|"):[]),this._mArrGameMoudel.push(o)}this._mArrGameMoudel.sort(function(t,e){return t.gameIndex-e.gameIndex});for(var a=this._mArrGameMoudel,s=0;s<a.length;s++)if(a[s].gameIndex!=s){Log.error("游戏入口配置，从0开始依次递加！","对比前后 index ",a[s].gameName,"不符合规范");break}},t.prototype.getGameEntrace=function(){var t=this.getGame();if(t){var e=this._mGameEntrances[t.key];if(!e){var i=egret.getDefinitionByName(t.key+".Entrance."+t.key);this._mGameEntrances[t.key]=e=new i}return e}},t.prototype.getGame=function(){return this._mCurrGame},t.prototype.getGameByName=function(t){var e=this._mArrGameMoudel;for(var i in e)if(e[i].key==t)return e[i];return Log.error("未配置游戏类型：",t),null},t.prototype.getGameByType=function(t){var e=this._mArrGameMoudel;for(var i in e)for(var o=e[i].mArrGameType,n=o.length-1;n>=0;n--)if(o[n]==t)return e[i];return Log.error("未配置游戏类型：",t),null},t.prototype.getGameFullName=function(t){var e=this.getGameByType(t);return e?e.getFullName(t):"未知游戏："+t},t.prototype.startGame=function(t){this._mCurrGame=this.getGameByName(t),this._mCurrGame&&(this._mIsGameLineOut=!1,this.showAssetLoading(),App.TimerManager.doFrame(1,0,this.publicDownloaded,this),App.MessageCenter.addListener(SocketConst.SOCKET_START_RECONNECT,this.onReconnentting,this),Log.log("开始游戏：",t))},t.prototype.startGameByType=function(t){var e=this.getGameByType(t);e&&this.startGame(e.key)},t.prototype.showAssetLoading=function(){this._mIsShowProgress=!0,App.EasyLoading.showLoading()},t.prototype.hideAssetLoading=function(){this._mIsShowProgress=!1,App.EasyLoading.hideLoading()},t.prototype.publicDownloaded=function(){if(GameBase.mIsPublicDownloaded){App.TimerManager.remove(this.publicDownloaded,this);var t=this.getGame();if(t.loaded)this.onConfigComplete();else{var e=Main.webResource?"static/resource/":"resource/";App.ResourceUtils.addConfig("games/"+t.key+"/config/res_"+t.key+".json",e),App.ResourceUtils.loadConfig(this.onConfigComplete,this)}}},t.prototype.onReconnentting=function(){Log.warn("游戏中掉线了"),this._mIsGameLineOut=!0},Object.defineProperty(t.prototype,"mIsGameLineOut",{get:function(){return this._mIsGameLineOut},enumerable:!0,configurable:!0}),t.prototype.backRoomScene=function(){(App.isInGame||App.isInDesk)&&(this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room))},t.prototype.backDeskScene=function(){App.isInRoom?this.sendLoginGame2():App.isInGame&&this.initializeScene(SceneConsts.Desk,ControllerConst.Desk)},t.prototype.backDeskSceneCreate=function(){this.createScene(ControllerConst.Desk)},t.prototype.enterGameFromDesk=function(t){App.isInDesk&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mEnterGameInfo=t,this.showAssetLoading(),this.loginOnDesk(),Log.log("enterGameFromDesk:",t))},t.prototype.enterGameFromRoom=function(t){App.isInRoom&&(this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mEnterGameInfo=t,this.showAssetLoading(),this.sendLoginGame(this._mEnterGameInfo.sceneType),Log.log("enterGameFromRoom:",t))},t.prototype.exitRoom=function(){Log.log("退出房间清理");var t=this.getGame();if(t){Log.log("退出房间清理-成功");var e=t.key,i=t.key+"_room";RES.isGroupLoaded(e)&&RES.destroyRes(e),RES.isGroupLoaded(i)&&RES.destroyRes(i),t.isRoDLoaded=!1,t.isGameLoaded=!1,this._mIsGameLineOut=!1,this.removeGC(),this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrDeskType=0,this._mCurrSceneType=0,this.removeEvent()}},t.prototype.removeGC=function(){App.ControllerManager.isExists(ControllerConst.Game)&&this.exitGame(),App.ControllerManager.isExists(ControllerConst.Desk)&&App.ControllerManager.unregister(ControllerConst.Desk)},t.prototype.exitGame=function(){Log.log("退出游戏清理");var t=this.getGame();if(t){Log.log("退出游戏清理-成功"),App.ControllerManager.unregister(ControllerConst.Game),ScrollTxtTips.i.cleanAll();var e=this.getGameEntrace();e&&e.destroy(),t.isRoDLoaded||(RES.destroyRes(t.key),t.isGameLoaded=!1,this._mCurrGame=void 0,this._mCurrDeskId=0,this._mCurrSceneId=0,this._mCurrSceneType=0,this.removeEvent()),App.isInLobby||(App.DragonBonesFactory.clear(),egret.Tween.removeAllTweens()),this._mIsBack2Game=!1,this._mIsGameLineOut=!1,this._mIsShowProgress=!1,this._mEnterGameInfo=void 0}},t.prototype.onConfigComplete=function(){var t=this.getGame();t.loaded=!0;var e=t.key;t.isRoD&&(e=t.key+"_room"),App.ResourceUtils.loadGroup(e,this.loadGroupCompete,this.loadGroupProgress,this)},t.prototype.loadGroupCompete=function(){var t=this.getGame();if(t&&t.loaded)if(t.isRoD?t.isRoDLoaded=!0:t.isGameLoaded=!0,this.initProtocol(t),t.isLoadedEXML)this.initModuleResource();else{var e="thm_"+t.key+"_json";App.ResourceUtils.loadModuleTheme(e,this.initModuleResource,this)}},t.prototype.initProtocol=function(t){if(!t.loadedProtoConfig){var e=RES.getRes("proto_"+t.key+"_json");e?(App.Socket.addProtocolNum(e),t.loadedProtoConfig=!0):Log.error(t.key+"initProtocol --- "," 没有注册协议文件 ")}},t.prototype.loadGroupProgress=function(t,e){if(this._mIsShowProgress){var i=Math.floor(t/e*100);App.EasyLoading.updateTxt(i+"%"),App.isWebDecorate&&web_easyLoading(i)}},t.prototype.initModuleResource=function(){this.hideAssetLoading(),App.EasyLoading.showLoading("100%");var t=this.getGame();t.isLoadedEXML=!0,this.roomInit(),this.loadResLater()},t.prototype.loadResLater=function(){var t=this.getGame();t.isRoD&&App.ResourceUtils.loadGroup(t.key,this.loadGameGroupCompete,this.loadGroupProgress,this)},t.prototype.loadGameGroupCompete=function(){var t=this.getGame();t&&(t.isGameLoaded=!0)},t.prototype.roomInit=function(){this._mIsBack2Game?(this.showAssetLoading(),this.sendLoginGame(this._mEnterGameInfo.sceneType)):this.loginGame()},t.prototype.loginGame=function(){var t=this.getGame();t.isRoom?(this.createScene(ControllerConst.Room),this.initializeScene(SceneConsts.Room,ControllerConst.Room),App.EasyLoading.hideLoading(),Log.log("进入游戏",t.gameName,"房间场景")):t.isForTest?(this.createScene(t.isDesk?ControllerConst.Desk:ControllerConst.Game),this.onLoginGameBack({result:!0})):this.sendLoginGame(t.gameType)},t.prototype.sendLoginGame=function(t){var e=this.getGame();this._mCurrSceneType=t>0?t:e.gameType,e.isDesk?this._mIsBack2Game?App.TimerManager.doFrame(1,0,this.loadEnd,this):this.sendLoginGame2():App.TimerManager.doFrame(1,0,this.loadEnd,this)},t.prototype.loadEnd=function(){var t=this.getGame();t.isGameLoaded&&(App.TimerManager.remove(this.loadEnd,this),this.sendLoginGame2())},t.prototype.sendLoginGame2=function(){var e=this.getGame(),i=this._mEnterGameInfo;this._mIsBack2Game?(e.isDesk?App.isInLobby&&(this.createScene(i.deskId>0?ControllerConst.Game:ControllerConst.Desk),this._mCurrDeskId=i.deskId>0?i.deskId:this._mCurrDeskId):App.isInLobby&&this.createScene(ControllerConst.Game),this.sendBack2Game()):(this.createScene(e.isDesk?ControllerConst.Desk:ControllerConst.Game),this.sendFirst2Game(this._mCurrSceneType)),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.TimerManager.doTimer(t.LoginTimeOut,1,this.loginSceneTimeOut,this)},t.prototype.sendBack2Game=function(){var e=this.getGame();App.Socket.send({key:t.CsWorldReturnSceneReqType,body:{yes:!0}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ScWorldReturnSceneResType),this.onLoginGameBack,this),Log.log("重回场景请求登录 -- ",e.gameName)},t.prototype.sendFirst2Game=function(e){var i=this.getGame();App.Socket.send({key:t.Game_Login,body:{scene_type:e}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.Game_Login_Back),this.onLoginGameBack,this),Log.log("首次场景请求登录 -- ",i.gameName)},t.prototype.onLoginGameBack=function(e){if(App.TimerManager.remove(this.loginSceneTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.ScWorldReturnSceneResType),this.onLoginGameBack,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.Game_Login_Back),this.onLoginGameBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginScene,this),App.EasyLoading.hideLoading(),e.result){this._mCurrSceneId=e.scene_id,this._mCurrSceneType=e.scene_type,this._mCurrDeskId=e.table_id>0?e.table_id:this._mCurrDeskId;var i=this.getGame(),o=this._mEnterGameInfo;i.isDesk?(Log.log("登录--",i.gameName,"--桌子成功",e),this._mIsBack2Game?(App.isInLobby?o.deskId>0?this.initializeScene(SceneConsts.Game,ControllerConst.Game):this.initializeScene(SceneConsts.Desk,ControllerConst.Desk):App.isInDesk?this.reconstructionScene(ControllerConst.Desk):App.isInGame&&this.reconstructionScene(ControllerConst.Game),this._mIsBack2Game=!1):this.initializeScene(SceneConsts.Desk,ControllerConst.Desk)):(Log.log("登录--",i.gameName,"--游戏成功",e),App.isInGame?this._mIsBack2Game&&this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game),this._mIsBack2Game=!1),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginLobby_Success,this.reloginGame,this)}else{var n=e.scene_type;if(this._mIsOnlySceneList[n]){var s=this;App.PromTipsView.show("您在【"+s.getGameFullName(n)+"】有未完成的游戏，是否返回继续？",function(){var i=!1;s._mCurrGame&&(i=s._mCurrGame.mArrGameType.indexOf(n)>=0),App.isInLobby||i||App.SceneManager.runScene(SceneConsts.Lobby),i||this.clearGameTips(),t.i.saveBack2GameInfo(e.scene_type,e.table_id),t.i.back2GameFromLobby()},null,s,!0)}else Log.warn("【"+this.getGameByType(n).gameName+"】登录不成功",e)}},t.prototype.loginOnDesk=function(){App.TimerManager.doFrame(1,0,this.loginOnDesk2,this)},t.prototype.loginOnDesk2=function(){var t=this.getGame();if(!t||t.isGameLoaded){App.TimerManager.remove(this.loginOnDesk2,this),App.isInGame||this.createScene(ControllerConst.Game);var e=this._mIsBack2Game?this._mCurrDeskId:this._mEnterGameInfo.deskId;t.isForTest?this.sendLoginOnDeskBack({result:!0}):(this.sendLoginOnDesk(e),this._mCurrDeskId=e),Log.log("请求上桌 -- ",t.gameName,"deskId:",e)}},t.prototype.sendLoginOnDesk=function(e){this.getGame();App.Socket.send({key:t.CsWorldEnterTableReqType,body:{table_id:e}}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.TimerManager.doTimer(t.LoginTimeOut,1,this.loginDeskTimeOut,this)},t.prototype.sendLoginOnDeskBack=function(e){App.TimerManager.remove(this.loginDeskTimeOut,this),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.ScWorldEnterTableResType),this.sendLoginOnDeskBack,this),App.MessageCenter.removeListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorLoginDesk,this),App.EasyLoading.hideLoading(),e.result&&(Log.log("上桌--",this.getGame().gameName,"--成功",e),App.isInGame?this.reconstructionScene(ControllerConst.Game):this.initializeScene(SceneConsts.Game,ControllerConst.Game)),this._mIsBack2Game=!1},t.prototype.createScene=function(t){var e=this.getGameEntrace();e.create(t)},t.prototype.initializeScene=function(t,e){App.SceneManager.runScene(t),this.getGameEntrace().initialize(e,this._mEnterGameInfo)},t.prototype.reconstructionScene=function(t){this._mIsGameLineOut=!1;var e=this.getGameEntrace();e.reconstruction(t)},t.prototype.callBack2Game=function(t,e){this._mIsBack2Game=!0,this._mEnterGameInfo={sceneType:t,deskId:e},this.startGameByType(t)},t.prototype.saveBack2GameInfo=function(t,e){this._mCurrSceneType=t,this._mCurrDeskId=e},t.prototype.back2GameFromLobby=function(){this.callBack2Game(this.getCurrSceneType(),this.getCurrDeskId())},t.prototype.back2GameCancel=function(){App.Socket.send({key:t.CsWorldReturnSceneReqType,body:{yes:!1}})},t.prototype.reloginGame=function(t){t.scene_type>0?(this._mIsBack2Game=!0,this.sendLoginGame(this._mCurrSceneType)):((App.isInDesk||App.isInGame)&&App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.onErrorLoginScene=function(){this.removeEvent(),App.EasyLoading.hideLoading(),(App.isInLobby||App.isInDesk||App.isInGame)&&(App.isInLobby||App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.loginSceneTimeOut=function(){Log.log(this.getGame().gameName+"场景登录超时！"),ErrorManager.i.showError("进入游戏超时！"),this.removeEvent(),App.EasyLoading.hideLoading(),(App.isInLobby||App.isInDesk||App.isInGame)&&(App.isInLobby||App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()),App.isWebDecorate&&web_timeOut(3)},t.prototype.onErrorLoginDesk=function(){App.EasyLoading.hideLoading(),App.isInGame&&(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips())},t.prototype.removeEvent=function(){App.MessageCenter.removeAll(this),App.TimerManager.remove(this.loginSceneTimeOut,this),App.TimerManager.remove(this.loginDeskTimeOut,this)},t.prototype.loginDeskTimeOut=function(){Log.log(this.getGame().gameName+"桌子登录超时！"),ErrorManager.i.showError("进入游戏超时！"),App.isInGame?(App.SceneManager.runScene(SceneConsts.Lobby),this.clearGameTips()):(this.removeEvent(),App.EasyLoading.hideLoading()),App.isWebDecorate&&web_timeOut(3)},t.prototype.clearGameTips=function(){this.removeEvent(),this.exitGame(),this.exitRoom(),App.EasyLoading.hideLoading()},t.prototype.getCurrSceneType=function(){return this._mCurrSceneType},t.prototype.getCurrDeskId=function(){return this._mCurrDeskId},t.prototype.setCurrDeskId=function(t){this._mCurrDeskId=t},t.prototype.getCurrDeskType=function(){return this._mCurrDeskType},t.prototype.setCurrDeskType=function(t){this._mCurrDeskType=t},Object.defineProperty(t.prototype,"gameCfgList",{get:function(){return this._mArrGameMoudel},enumerable:!0,configurable:!0}),t._i=null,t.LoginTimeOut=1e4,t.Game_Login="10102",t.Game_Login_Back="10103",t.CsWorldReturnSceneReqType=10106,t.ScWorldReturnSceneResType=10107,t.CsWorldEnterTableReqType=10108,t.ScWorldEnterTableResType=10109,t}();__reflect(GameModuleMgr.prototype,"GameModuleMgr");var GameMoudleInfo=function(){function t(){this.isForTest=!1,this.key="",this.loaded=!1,this.loadedProtoConfig=!1,this.isLoadedEXML=!1,this.isRoDLoaded=!1,this.isGameLoaded=!1,this.mArrGameType=[],this.gameName="",this._mArrRoomName=[],this.isOpen=!1,this.isOnly=!1,this.isHotGame=!1,this.gameIcon="",this.gameIconAnim="",this.gameIndex=1,this.isDesk=!1,this.isRoom=!1,this.isResBig=!1,this.fixX=0,this.fixY=0,this.fixSX=0,this.fixSY=0}return Object.defineProperty(t.prototype,"gameType",{get:function(){return this.mArrGameType[0]},enumerable:!0,configurable:!0}),t.prototype.getFullName=function(t){var e=this.getGameNameByType(t);return e?this.gameName+" "+e:this.gameName},t.prototype.setArrRoomName=function(t){this._mArrRoomName=t},t.prototype.getGameNameByType=function(t){var e=this.mArrGameType.indexOf(t);return 0>e?"类型不符："+t:this._mArrRoomName[e]?" "+this._mArrRoomName[e]:""},Object.defineProperty(t.prototype,"isRoD",{get:function(){return this.isDesk||this.isRoom},enumerable:!0,configurable:!0}),t}();__reflect(GameMoudleInfo.prototype,"GameMoudleInfo");var GamePlayerMgr=function(){function t(){this._mCurrAccount="",this._mCurrPW="",this._mIsVisiter=!1,this._mIsSwitchAccount=!1,this._mUnreadMailCount=0,this._mUnreadNoticeCount=0,this._mWebUrl="50001",this._mPlayer=new Player,App.MessageCenter.addListener(BaseProxy.Socket_Type(t.RechargeResult),this.onRechargeBack,this),App.MessageCenter.addListener(BaseProxy.Socket_Type("10052"),this.onMoneyChange,this)}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mUnreadMailCount",{get:function(){return this._mUnreadMailCount},set:function(t){this._mUnreadMailCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mUnreadNoticeCount",{get:function(){return this._mUnreadNoticeCount},set:function(t){this._mUnreadNoticeCount=t},enumerable:!0,configurable:!0}),t.prototype.getPlayer=function(){return this._mPlayer},Object.defineProperty(t.prototype,"isVisiter",{get:function(){return this._mIsVisiter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mCurrAccount",{get:function(){return this._mCurrAccount},enumerable:!0,configurable:!0}),t.prototype.setAP=function(t,e){this._mCurrAccount=t,this._mCurrPW=e},t.prototype.relogin=function(){this.login(this._mIsVisiter)},t.prototype.loginByHistory=function(){var t=this.getAccount1();this.login(!(t&&t.length>0))},t.prototype.login=function(t){this._mIsVisiter=t,t&&this.setAP("",""),App.Socket.isConnecting()?this.loginWebInfo():(App.Socket.connect(),GameNative.openInstallEffect("enter_socket_on")),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在登录游戏，请稍等...")},t.prototype.web_login=function(t,e,i,o,n){this.setAP(t,e),this.login(!1),this._mWebUrl=i,this._mWebCallBack=o,this._mWebCallBackObj=n},t.prototype.web_login_guest=function(t,e,i){this.login(!0),this._mWebUrl=t,this._mWebCallBack=e,this._mWebCallBackObj=i},t.prototype.loginWebInfo=function(){var e=this._mIsVisiter;this._mCurrAccount||(this._mCurrAccount=e?"":this.getAccount1(),this._mCurrPW=e?"":this.getPw1());var i={loginame:this._mCurrAccount,password:this._mCurrPW,usertype:e?2:1,deviceid:e?GameBase.getDeviceId():"",channel:App.isWebDecorate?this._mWebUrl:GameBase.CurrAppMerchant,agent_id:this.getAgentId(),os:App.OS};for(var o in i)Log.log(o,":",i[o]);App.Socket.send({key:t.LoginWeb,body:i}),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.LoginWeb_Back),this.onLoginWebInfoBack,this),App.MessageCenter.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"获取登录信息超时.请稍后再试",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(1),App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.LoginWeb_Back),this.onLoginWebInfoBack,this)}.bind(this)),GameNative.openInstallEffect("enter_php_login")},t.prototype.onLoginWebInfoBack=function(e){App.MessageCenter.removeListener(BaseProxy.Socket_Type(t.LoginWeb_Back),this.onLoginWebInfoBack,this),Log.log("onLoginWebInfoBack:",e),this.saveAcc();var i=this.getPlayer();i.setPlayerInfo(e.role),i.setLoginame(e.loginame),i.setUserId(e.uid),i.setMoney(e.money),i.setSafeMoney(e.safe_money),i.setToken(e.token),i.setIsPwdSeted(e.is_fund_pwd_set),i.setIsRegistBytel(e.is_account_or_tel_reg),i.mAgentId=e.agent_id,i.mShowUid=e.show_uid,i.mIsAgent=e.is_agent,this.saveAgentId(""+i.mAgentId),this._mUnreadMailCount=e.unread_mail_count,this._mUnreadNoticeCount=e.unread_notice_count,0!=e.role.avatar&&e.role.avatar||(e.role.avatar=1),0!=e.role.avatar_box&&e.role.avatar_box||(e.role.avatar_box=1),!this.getAcIcon1()&&e.role.avatar&&this.saveIcon("ui_headImg_"+e.role.avatar),!this.getAcIconRound1()&&e.role.avatar_box&&this.saveIconRound("ui_headBox_"+e.role.avatar_box),this._mIsSwitchAccount=!1,App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginWeb_Success)},t.prototype.saveAcc=function(){if(!this._mIsVisiter){var e=t.i.getAccount1(),i=t.i.getPw1();(this._mCurrAccount!=e||i!=this._mCurrPW)&&(this.saveAccount2(e?e:"",i?i:""),this.saveAccount1(this._mCurrAccount,this._mCurrPW))}},t.prototype.loginLobby=function(){var t=this.getPlayer(),e=this._mIsVisiter;Log.log("登录大厅",t.getLoginame());var i={login_type:1,token:t.getToken(),user_type:e?2:1,loginame_or_deviceid:e?GameBase.getDeviceId():t.getLoginame(),uid:t.getUserId(),channel:App.isWebDecorate?this._mWebUrl:GameBase.CurrAppMerchant,show_uid:t.mShowUid};App.Socket.send({key:lobby.ProxyKeyConst.Lobby_LoginLobby,body:i}),App.MessageCenter.addListener(BaseProxy.Socket_Type(lobby.ProxyKeyConst.Lobby_LoginLobby_Back),this.loginLobbyBack,this),App.MessageCenter.removeListener(GameConsEvent.Game_Player_LoginWeb_Success,this.loginLobby,this),App.EasyLoading.showOnTimeOut(1e4,"游戏大厅登录超时.",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(1),App.MessageCenter.removeListener(BaseProxy.Socket_Type(lobby.ProxyKeyConst.Lobby_LoginLobby_Back),this.loginLobbyBack,this)}.bind(this)),GameNative.openInstallEffect("et_lobby_login")},t.prototype.loginLobbyBack=function(t){if(Log.log("LobbyProxy onLoginWebBack:",t),app.BuildData.saveBuildTime(),GameNative.openInstallEffect("et_lobby_success"),App.MessageCenter.removeListener(BaseProxy.Socket_CMD+lobby.ProxyKeyConst.Lobby_LoginLobby_Back,this.loginLobbyBack,this),App.isInLoading||App.isInLogin||App.isInLobby||App.isInRoom){if((App.isInLoading||App.isInLogin)&&App.SceneManager.runScene(SceneConsts.Lobby),t.scene_type>0){App.isWebDecorate&&web_showPrompt(1);var e=GameModuleMgr.i;e.saveBack2GameInfo(t.scene_type,t.table_id),App.TimerManager.doFrame(10,1,function(){App.PromTipsView.show("您在【"+e.getGameFullName(t.scene_type)+"】有未完成的游戏，是否前往继续？",function(){e.back2GameFromLobby()},function(){e.back2GameCancel()},this,!0)},this)}App.EasyLoading.hideLoading()}else App.MessageCenter.dispatch(GameConsEvent.Game_Player_LoginLobby_Success,t);this._mWebCallBack&&this._mWebCallBack.call(this._mWebCallBackObj),this._mWebCallBack=void 0},t.prototype.changeLogin=function(t){Log.log("切换账户1"),this._mIsSwitchAccount=!0,t=t?t:2;var e=1==t?this.getAccount1():this.getAccount2(),i=1==t?this.getPw1():this.getPw2();e&&(this.exitCurrAccount(this.changeLoginAck,this),this.setAP(e,i))},t.prototype.changeLoginAck=function(t){Log.log("切换账户2",t),this.login(!1)},t.prototype.exitCurrAccount=function(t,e){function i(o){App.EasyLoading.hideLoading(),App.MessageCenter.removeListener(s,i,this),t.call(e,o)}Log.trace("退出当前账号");var o=this.getPlayer(),n={usertype:this._mIsVisiter?2:1,loginame_or_deviceid:this._mIsVisiter?GameBase.getDeviceId():o.getLoginame(),uid:o.getUserId(),token:o.getToken()},s=BaseProxy.Socket_Type(lobby.ProxyKeyConst.Lobby_webLogOut_Back);App.MessageCenter.addListener(s,i,this),App.Socket.send({key:lobby.ProxyKeyConst.Lobby_webLogOut,body:n}),App.EasyLoading.showOnTimeOut(15e3,"退出游戏超时",function(){App.isInLogin||App.SceneManager.runScene(SceneConsts.Login),App.isWebDecorate&&web_timeOut(4),App.MessageCenter.removeListener(s,i,this)}.bind(this))},t.prototype.onRechargeBack=function(t){Log.log("充值结果返回",t),this.moneyChange(t.balance),App.isWebDecorate&&web_rechargeBack(t.balance)},t.prototype.onMoneyChange=function(t){Log.log("服务器变更余额:",t),this.moneyChange(t.balance)},t.prototype.moneyChange=function(t){this.getPlayer().setMoney(t)},t.prototype.getAccount1=function(){return GameBase.getGlobalData("Game_Login_Account1")},t.prototype.getAccount2=function(){return GameBase.getGlobalData("Game_Login_Account2")},t.prototype.getPw1=function(){return GameBase.getGlobalData("Game_Login_Password1")},t.prototype.getPw2=function(){return GameBase.getGlobalData("Game_Login_Password2")},t.prototype.getCurrPw=function(){return GameBase.getGlobalData("Game_Login_CurrPassword")},t.prototype.saveAccount1=function(t,e){GameBase.saveGlobalData("Game_Login_Account1",t?t:""),GameBase.saveGlobalData("Game_Login_Password1",e?e:"")},t.prototype.saveAccount2=function(t,e){GameBase.saveGlobalData("Game_Login_Account2",t?t:""),GameBase.saveGlobalData("Game_Login_Password2",e?e:"")},t.prototype.getAgentId=function(){var t=GameBase.getGlobalData("Game_Login_AgentId"),e=parseInt(t);return e>0?e:-1},t.prototype.saveAgentId=function(t,e){void 0===e&&(e=!0),e?this.saveAgentIdP(t):this.getAgentId()<=0&&this.saveAgentIdP(t)},t.prototype.saveAgentIdP=function(t){GameBase.saveGlobalData("Game_Login_AgentId",App.CommonUtils.isNullOrUndefined(t)?"":t)},t.prototype.getAcIcon1=function(){return GameBase.getGlobalData(this.getAccount1()+"_icon")},t.prototype.getAcIcon2=function(){return GameBase.getGlobalData(this.getAccount2()+"_icon")},t.prototype.getAcIconRound1=function(){return GameBase.getGlobalData(this.getAccount1()+"_round")},t.prototype.getAcIconRound2=function(){return GameBase.getGlobalData(this.getAccount2()+"_round")},t.prototype.saveIcon=function(t){GameBase.saveGlobalData(this._mCurrAccount+"_icon",t)},t.prototype.saveIconRound=function(t){GameBase.saveGlobalData(this._mCurrAccount+"_round",t)},Object.defineProperty(t.prototype,"isSwitchAccount",{get:function(){return this._mIsSwitchAccount},enumerable:!0,configurable:!0}),t.prototype.setIsOpenEffect=function(t){this._mPlayer.setIsOpenEffect(t)},Object.defineProperty(t.prototype,"isOpenEffect",{get:function(){return this._mPlayer.getOpenEffect()},enumerable:!0,configurable:!0}),t._i=null,t.LoginWeb="10110",t.LoginWeb_Back="10111",t.RechargeResult="10150",t}();__reflect(GamePlayerMgr.prototype,"GamePlayerMgr");var base;!function(t){function e(t){return t||(t=ControllerConst.Game),App.ControllerManager.getController(t)}t.getController=e}(base||(base={}));var HotUpdateMgr=function(){function t(){this._mCurrList=[],this._mLoadedList=[],this._mNewVerInfo=null,this._updateCallBack=null,this._updateErrorCall=null,this._thisObj=null,this._currUpdateInfo={}}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.checkUpdate=function(e,i,o){var n=this;this._updateCallBack=e,this._updateErrorCall=i,this._thisObj=o;var s=t.getUpdateBaseUrl()+"ma&ni&fest_&last_&ver.&js&on".split("&").join("")+"?v="+Math.random();HttpDownload.i.download(s,function(e){if(e&&e.version)if(App.DeviceUtils.isAndroid&&e.apk){var i=App.NetUtils.urlRootBack(t.getUpdateBaseUrl(),e.apk);App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,100,100),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命下载新安装包..."),GameNative.sendToNative(GameNative.GameApkUpgrade,i)}else if(App.DeviceUtils.isIOS&&e.ipa){var i=App.NetUtils.urlRootBack(t.getUpdateBaseUrl(),e.ipa);App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,100,100),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命下载新安装包..."),GameNative.sendToNative(GameNative.GameApkUpgrade,i)}else e.tips?App.PromTipsView.show(e.tips,function(){e.tips_url&&R.openUrlOutside(e.tips_url)}):n.update(e.verNum);else Log.log("更新文件读取错误！"),this._updateErrorCall&&this._updateErrorCall.call(this._thisObj)},function(t){n._updateErrorCall&&n._updateErrorCall.call(n._thisObj)},this)},t.prototype.update=function(e){var i=this,o=t.getUpdateBaseUrl()+"m&an&if&est&.&js&on".split("&").join("")+"?v="+e;HttpDownload.i.download(o,function(t){i.initNewVersion(t)},function(t){i._updateErrorCall&&i._updateErrorCall.call(i._thisObj)},this)},t.prototype.initNewVersion=function(t){this._mNewVerInfo=t,this.checkMainVersion()||this._updateCallBack&&this._updateCallBack.call(this._thisObj)},t.prototype.checkMainVersion=function(){var e=this._mNewVerInfo;if(!e||!e.main||!e.main.new_ver_num)return!1;var i=e.main,o=this._currUpdateInfo,n=GameBase.getLocalData("last_main_version");n||(n=1==i.new_ver_num?"0":"1");var s=i.new_ver_num>0?i.new_ver_num:"1";if(s==n){var r=i["index_"+s],a=this.getVerMainMd5();if(!r||!r.md5||!a||r&&a==r.md5)return!1}var h=parseInt(n)+1,l=i["index_"+h];if(l||(l=i["index_"+n]),l){var p=l.ver.split("-")[1];o.main=""+s,o.main_ver=""+p,o.main_md5=""+i["index_"+i.new_ver_num].md5;var c=t.getUpdateBaseUrl()+"main/"+l.res;return GameNative.sendToNative(GameNative.GameStartUpdate,c),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"请稍等，资源正在下载更新..."),!0}return Log.warn("Main不存在可更新资源","lastMainVerIndex:",n,"newMainVerIndex:",s),!1},t.prototype.getVerMainMd5=function(){return GameBase.getLocalData("last_main_version_md5")||""},t.prototype.setVerMainMd5=function(t){GameBase.saveLocalData("last_main_version_md5",t)},t.prototype.getVerGameMd5=function(t){return GameBase.getLocalData("last_"+t+"_version_md5")||""},t.prototype.setVerGameMd5=function(t,e){GameBase.saveLocalData("last_"+t+"_version_md5",e)},t.prototype.checkGameUpdate=function(t){var e=this._mNewVerInfo,i=this._currUpdateInfo;if(!(e&&e.games&&e.games[t]&&e.games[t].new_ver_num))return!1;if(i[t])return!0;var o=e.games[t],n=GameBase.getLocalData("last_"+t+"_version")||"0",s=o.new_ver_num;if(s==n){var r=o["index_"+s],a=this.getVerGameMd5(t);if(!r||!r.md5||!a||r&&a==r.md5)return!1}var h=""+(parseInt(n)+1),l=o["index_"+h];if(l||(l=o["index_"+n]),l){var p=l.ver.split("-")[1];return i[t]=""+s,i[t+"ver"]=""+p,i[t+"res"]=""+l.res,i[t+"md5"]=""+o["index_"+o.new_ver_num].md5,!0}return Log.warn("Game不存在可更新资源","lastGameVerIndex",n,"newIndex:",h),!1},t.prototype.loadGameUpdate=function(e){var i=this._currUpdateInfo;if(!(i[e+"updateing"]||(this._mLoadedList.indexOf(e)<0&&this._mLoadedList.push(e),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:e,progress:0,total:1}),this._mCurrList.length>=t.Max_Load_Num))){this._mCurrList.push(e),this._mLoadedList.splice(this._mLoadedList.indexOf(e),1),i[e+"updateing"]="100000";var o=t.getUpdateBaseUrl()+"games/"+e+"/"+i[e+"res"];GameNative.sendToNative(GameNative.GameStartUpdate,o),Log.log("开始下载：",e,"len:",this._mLoadedList.length)}},t.prototype.saveVersion=function(t){var e=this._currUpdateInfo;if(t.indexOf("main")>-1){if(GameBase.saveLocalData("last_main_version",e.main),GameBase.saveLocalData("last_main_version_s",e.main_ver),this.setVerMainMd5(e.main_md5),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),this.checkMainVersion())return;Log.log("Main热更新完成，重启游戏"),App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,100,100),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"更新完成，正在准备游戏资源..."),App.TimerManager.doTimer(2e3,1,function(){GameNative.restartGame()},this),e.main=void 0,e.main_ver=void 0,e.main_md5=void 0}else if(t.indexOf("games")>-1){var i=t.split("/"),o=i.indexOf("games")+1,n=i[o],s=e[n],r=e[n+"ver"];Log.log("saveVersion:",n,s,r),GameBase.saveLocalData("last_"+n+"_version",s),GameBase.saveLocalData("last_"+n+"_version_s",r),this.setVerGameMd5(n,e[n+"md5"]),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Version,n),e[n]=void 0,e[n+"res"]=void 0,e[n+"md5"]=void 0,e[n+"updateing"]=void 0;var a=this._mCurrList.indexOf(n);
if(this._mCurrList.splice(a,1),Log.log("下载完成x：","_mCurrList len:",this._mCurrList.length,"_mLoadedList len:",this._mLoadedList.length),t.indexOf("public")>-1?App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Public_Complete):App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Complete,n),this._mLoadedList.length>0){var h=this._mLoadedList.shift();this.checkGameUpdate(h)&&this.loadGameUpdate(h)}}},t.getUpdateBaseUrl=function(){return""+GameBase.AssetsServerIp+"/hotUpdate/"+GameBase.CurrAppVersion+"/"},t._instance=null,t.Max_Load_Num=5,t}();__reflect(HotUpdateMgr.prototype,"HotUpdateMgr");var UrlPoolMgr=function(){function t(){this._mIsInitUrlsed=!1,this._mIsGameUrlCheckBack=!1,this._mupdateCallBack=null,this._mupdateErrorCall=null,this._mthisObj=null,this.___mupdateCallBack=!0,this._mIsUrlCheckBack=!1}return Object.defineProperty(t,"i",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initUrls=function(){App.IsNative&&GameBase.getGlobalData("UrlList_1")?this._mIsInitUrlsed=!0:this.udata(RES.getRes(t.UAName),!1)},Object.defineProperty(t.prototype,"isInitUrlsed",{get:function(){return this._mIsInitUrlsed},enumerable:!0,configurable:!0}),t.prototype.udata=function(e,i){var o=this;this.___mupdateCallBack=!0,JSZip.loadAsync(e).then(function(t){return t.file("u_a.f_z".split("_").join("")).async("text")}).then(function(e){if(e=JSON.parse(e).data,e&&e.u){for(var n=t.UrlList;n.length;)n.pop();for(var s=0;s<e.u.length;s++)n.push(e.u[s]);o.mupdateCallBack(i)}}),JSZip.loadAsync(e).then(function(t){return t.file("u_g.f_z".split("_").join("")).async("text")}).then(function(e){if(e=JSON.parse(e).data,e&&e.u){for(var n=t.GameUrlList;n.length;)n.pop();for(var s=0;s<e.u.length;s++)n.push(e.u[s]);o.mupdateCallBack(i)}})},Object.defineProperty(t.prototype,"ug",{get:function(){var t=GameBase.getGlobalData("GameUrlList_index"),e=parseInt(t?t:"0");e++;var i=GameBase.getGlobalData("GameUrlList_"+e);if(!i||i.length<=0){if(this._mIsGameUrlCheckBack)return!1;e=1,this._mIsGameUrlCheckBack=!0}return i=GameBase.getGlobalData("GameUrlList_"+e),GameBase.saveGlobalData("GameUrlList_index",""+e),GameBase.saveGameServerIp(i),App.Socket.updateUrl(GameBase.GameServerIp),!0},enumerable:!0,configurable:!0}),t.prototype.loginSuccess=function(){this._mIsGameUrlCheckBack=!1},t.prototype.u=function(t,e,i){this._mupdateCallBack=t,this._mupdateErrorCall=e,this._mthisObj=i,this.getUA()},t.prototype.getUA=function(){this.___mupdateCallBack=!0;var e=HotUpdateMgr.getUpdateBaseUrl()+"u_a.f_z".split("_").join("")+"?v="+Math.random(),i=this;HttpDownload.i.download(e,function(e){if(e&&e.u){for(var o=t.UrlList;o.length;)o.pop();for(var n=0;n<e.u.length;n++)o.push(e.u[n]);i.mupdateCallBack(!0),i.getUG()}else this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),function(){this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),this,1500)},t.prototype.getUG=function(){var e=HotUpdateMgr.getUpdateBaseUrl()+"u_g.f_z".split("_").join("")+"?v="+Math.random(),i=this;HttpDownload.i.download(e,function(e){if(e&&e.u){for(var o=t.GameUrlList;o.length;)o.pop();for(var n=0;n<e.u.length;n++)o.push(e.u[n]);i.mupdateCallBack(!0)}else this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),function(){this.checkNewUrl(this._mupdateCallBack,this._mupdateErrorCall,this._mthisObj)}.bind(this),this,1500)},t.prototype.mupdateCallBack=function(t){if(this.___mupdateCallBack)return void(this.___mupdateCallBack=!1);if(this.saveUrls(),!t)return void(this._mIsInitUrlsed=!0);var e=this._mupdateCallBack;e&&e.call(this._mthisObj)},t.prototype.saveUrls=function(){for(var e=t.UrlList,i=0;i<e.length;i++)GameBase.saveGlobalData("UrlList_"+(i+1),e[i]);e=t.GameUrlList;for(var i=0;i<e.length;i++)GameBase.saveGlobalData("GameUrlList_"+(i+1),e[i]);GameBase.saveGlobalData("UrlList_"+(t.UrlList.length+1),""),GameBase.saveGlobalData("GameUrlList_"+(t.GameUrlList.length+1),"")},t.prototype.checkNewUrl=function(t,e,i){var o=this;R.ping("www.baidu.com",function(n){"1"==n?o.checkNewUrl2(t,e,i):o.showNetErrorTips(t,e,i)},o)},t.prototype.checkNewUrl2=function(t,e,i){var o=GameBase.getGlobalData("UrlList_index"),n=parseInt(o?o:"0");n++;var s=GameBase.getGlobalData("UrlList_"+n);if(!s||s.length<=0){if(this._mIsUrlCheckBack){var r=this._mupdateErrorCall;return void(r&&r.call(this._mthisObj))}n=1,this._mIsUrlCheckBack=!0}s=GameBase.getGlobalData("UrlList_"+n),GameBase.saveResoureServerIp(s),GameBase.saveGlobalData("UrlList_index",""+n),this.u(t,e,i)},t.prototype.showNetErrorTips=function(t,e,i){var o=this,n="检查到网络不可用，请检查后再重试";App.PromTipsView.show(n,function(){o.u(t,e,i)},function(){GameNative.appGameExit()},this,!0)},t._instance=null,t.UrlList=[],t.GameUrlList=[],t.UAName="f..z.._..f..z".split("..").join(""),t}();__reflect(UrlPoolMgr.prototype,"UrlPoolMgr");var GamePlatform=function(){function t(){}return t.APP=0,t.WebDecorate=1,t.Web_Phone=2,t}();__reflect(GamePlatform.prototype,"GamePlatform");var GameOsTypes=function(){function t(){}return t.Android="Android",t.IOS="IOS",t.Web="Web",t}();__reflect(GameOsTypes.prototype,"GameOsTypes");var App=function(){function t(){}return Object.defineProperty(t,"OS",{get:function(){return t.isWebDecorate?GameOsTypes.Web:t.DeviceUtils.isIOS?GameOsTypes.IOS:GameOsTypes.Android},enumerable:!0,configurable:!0}),Object.defineProperty(t,"platformMoudel",{get:function(){return t.DeviceUtils.IsNative?0:web_platform()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebDecorate",{get:function(){return t.platformMoudel==GamePlatform.WebDecorate||999==t.platformMoudel},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebPhone",{get:function(){return t.platformMoudel==GamePlatform.Web_Phone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebPools",{get:function(){return t.isWebPhone||t.isWebDecorate},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLoading",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLogin",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Login},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInLobby",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Lobby},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInRoom",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Room},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInDesk",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Desk},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isInGame",{get:function(){return t.SceneManager.getCurrScene()==SceneConsts.Game},enumerable:!0,configurable:!0}),t.setOpenLog=function(e){egret.Logger.logLevel=e?egret.Logger.ALL:egret.Logger.OFF,t.DebugUtils.isOpen(e)},Object.defineProperty(t,"IsNative",{get:function(){return t.DeviceUtils.IsNative},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Http",{get:function(){return Http.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Socket",{get:function(){return Socket.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ControllerManager",{get:function(){return ControllerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ViewManager",{get:function(){return ViewManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SceneManager",{get:function(){return SceneManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DebugUtils",{get:function(){return DebugUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MessageCenter",{get:function(){return MessageCenter.getInstance(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EffectUtils",{get:function(){return EffectUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EasyLoading",{get:function(){return EasyLoading.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DragonBonesFactory",{get:function(){return DragonBonesFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MovieClipFactory",{get:function(){return MovieClipFactory.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HitUtils",{get:function(){return HitUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GeometryUtils",{get:function(){return GeometryUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PromTipsView",{get:function(){return PromTipsView.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PromSuperposeView",{get:function(){return PromSuperposeView.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ScrollTxtTips",{get:function(){return ScrollTxtTips.i},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BitmapUtils",{get:function(){return BitmapUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NetUtils",{get:function(){return NetUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MouseUtils",{get:function(){return MouseUtils.getInstance()},enumerable:!0,configurable:!0}),t.setLandscape=function(){t.StageUtils.setOrientationMode(egret.OrientationMode.LANDSCAPE)},t.setPortrait=function(){t.StageUtils.setOrientationMode(egret.OrientationMode.PORTRAIT)},t.setScaleModeNormal=function(){t.StageUtils.setScaleMode(egret.StageScaleMode.FIXED_HEIGHT)},t.setScaleModeSpecial=function(){t.StageUtils.setScaleMode(egret.StageScaleMode.EXACT_FIT)},Object.defineProperty(t,"isScaleModeSpecial",{get:function(){return t.StageUtils.getStage().scaleMode==egret.StageScaleMode.EXACT_FIT},enumerable:!0,configurable:!0}),t.getWpH=function(){return window.innerHeight/window.innerWidth},t.fixUISX=function(e){void 0===e&&(e=1);var i=e-(GameBase.GameHeight/GameBase.GameWidth-t.getWpH());return i>1?1:.5>i?.5:i},t.checkIphoneX=function(){if(t.IsTestIphoneX&&(t._mOffsetLeft=50),t.IsNative&&t.DeviceUtils.isIOS){var e=window.innerWidth,i=window.innerHeight;e>=812&&i>=375&&(t._mOffsetLeft=50)}},t.OffsetLeft=function(e){var i=t._mOffsetLeft;if(i)if(0!=e.x)e.x+=i;else if(egret.is(e,"eui.UIComponent")){var o=e;isNaN(o.left)?e.x+=i:o.left+=i}else e.x+=i},t.Init=function(){t.GlobalData=RES.getRes("global"),t.DebugUtils.isOpen(t.GlobalData.IsDebug),GameBase.IsTest=t.GlobalData.IsTest,t.IsSimulate=t.GlobalData.IsSimulate,t.IsDecrypt=t.GlobalData.IsDecrypt,t.DebugUtils.setThreshold(5);var e=RES.getRes(t.GlobalData.ProtoConfig);t.Socket.initServerUrl(t.GlobalData.SocketServer,new ByteArrayMsgByProtobuf),t.Socket.addProtocolNum(e),GameModuleMgr.i.initGameMoudle(),Log.log("当前引擎版本: ",egret.Capabilities.engineVersion)},t.GlobalData=null,t.IsTest=!1,t.IsTestIphoneX=!1,t.IsSimulate=!1,t.IsOpenToolView=!1,t.IsDecrypt=!1,t.IsAppTest=!0,t._mOffsetLeft=0,t}();__reflect(App.prototype,"App");var ED;!function(t){function e(t){return t=i.decode(t),t=R.prototype(t),t=i.decode(t),t=RR.prototype(t),t=i.decode(t)}var i=new Basiie;t.prototype=e}(ED||(ED={}));var EE;!function(t){function e(t){var e=t;e=i.encode(e),e=(""+e).split("").reverse().join(""),e=i.encode(e),e="Bg"+e+"Hn";var o=(""+e).split("");return o.splice(2,0,"K"),e=o.join(""),e=i.encode(e)}var i=new Basiie;t.prototype=e}(EE||(EE={}));var R;!function(t){function e(t){App.DeviceUtils.IsNative?GameNative.openUrl("1#OA"+t):window.open(t)}function i(t){function e(){App.MessageCenter.removeListener(GameNative.GameWebViewShow,e,this),App.setPortrait(),App.EasyLoading.hideLoading()}App.DeviceUtils.IsNative?(App.MessageCenter.addListener(GameNative.GameWebViewShow,e,this),GameNative.openUrl("0#OA"+t),App.EasyLoading.showOnTimeOut(3e4)):App.isWebDecorate||window.open(t)}function o(t){function i(){App.MessageCenter.removeListener(GameNative.GameWebViewShow,i,this),App.setPortrait(),App.EasyLoading.hideLoading()}App.DeviceUtils.IsNative?App.DeviceUtils.isAndroid?(App.MessageCenter.addListener(GameNative.GameWebViewShow,i,this),GameNative.openUrl("2#OA"+t),App.EasyLoading.showOnTimeOut(3e4)):e(t):App.isWebDecorate||window.open(t)}function n(t,e){u||(u=function(i){App.MessageCenter.removeListener(GameNative.GameGetClipboardInfo,u,this),t.call(e,i),u=null}),App.MessageCenter.addListener(GameNative.GameGetClipboardInfo,u,this),GameNative.sendToNative(GameNative.GameGetClipboardInfo,"")}function s(t,e,i){GameNative.ping(t,e,i)}function r(t,e){App.DeviceUtils.IsNative?GameNative.checkNetWorkOpen(t,e):t.call(e,"1")}function a(t){GameNative.sendToNative(GameNative.GameSetClipboardInfo,t)}function h(t){for(var e in d){var i=t.indexOf(e);if(i>=0)return d[e]}return 10}function l(e){Log.trace("埋点",e),t.setTimeOut(function(){m--,App.Socket.send({key:10159,body:{module:h(e),event_name:e}})},this,16*m++)}function p(t,e){y||(y=function(i){App.MessageCenter.removeListener(GameNative.GameGetImageBase64,y,this),t.call(e,i),y=null}),App.MessageCenter.addListener(GameNative.GameGetImageBase64,y,this),GameNative.sendToNative(GameNative.GameGetImageBase64,"")}function c(t){var e=(""+t).split("");return e.splice(2,1),t=e.join(""),t=(""+t).substring(2),t=t.substring(0,t.length-2)}t.openUrlOutside=e,t.openUrlInside=i,t.openRechargeUrlInside=o;var u;t.getClipboardInfo=n,t.ping=s,t.checkNetWorkOpen=r,t.setClipboardInfo=a;var d={App:10,Lobby:11,HB:91,Brnn1:101,Brnn2:102,Baccarat1:201,Baccarat2:202,HHDZ:301,DDZ:401,SHZ:601,SGJ:701,LHD1:801,LHD2:802},m=1;t.sendPlayerAction=l;var y;t.getImageFromApp=p,t.prototype=c}(R||(R={}));var base;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(BaseEuiComponent);t.ComponentView=e,__reflect(e.prototype,"base.ComponentView")}(base||(base={}));var GameNative=function(){function t(){}return t.initNativeExternal=function(){this.addCallback(t.GameConstInit),this.addCallback(t.GameUpdateProgress),this.addCallback(t.GameUpdateComplete),this.addCallback(t.GameDownloadFail),this.addCallback(t.GameDownloadZipFail),this.addCallback(t.GameDeviceIdInit),this.addCallback(t.GameAndroidBackKey),this.addCallback(t.GameSetClipboardInfo),this.addCallback(t.GameGetClipboardInfo),this.addCallback(t.GameIsNetworkOpen),this.addCallback(t.GameCheckNetWork),this.addCallback(t.GameWebViewShow),this.addCallback(t.GameWebViewHide),this.addCallback(t.GameGetImageBase64),this.addCallback(t.GameAppBuildData),this.addCallback(t.GameAppOpenData)},t.addCallback=function(e){egret.ExternalInterface.addCallback(e,function(i){t.GameEventList.push({funcName:e,value:i}),App.TimerManager.doFrame(1,1,function(){for(var e=t.GameEventList;e.length>0;){var i=e.shift();App.MessageCenter.dispatch(i.funcName,i.value)}},this)})},t.sendToNative=function(t,e){egret.ExternalInterface.call(t,e)},t.openInstallEffect=function(e,i){void 0===i&&(i=!0);var o=t.OSEffectObj;(i&&!o[e]||!i)&&(o[e]="success",t.sendToNative(t.GameOpenInstallEffect,e))},t.openUrl=function(e){t.sendToNative(t.GameGotoWebUrl,e)},t.restartGame=function(){t.sendToNative(t.GameRestartApp,"resource/assets/login_bg1.jpg")},t.appGameExit=function(){t.sendToNative(t.GameAndroidExit,"")},t.checkNetWorkOpen=function(e,i){function o(n){App.MessageCenter.removeListener(t.GameIsNetworkOpen,o,this),e.call(i,n)}App.MessageCenter.addListener(t.GameIsNetworkOpen,o,this),t.sendToNative(t.GameIsNetworkOpen,"")},t.ping=function(e,i,o){function n(e){App.MessageCenter.removeListener(t.GameCheckNetWork,n,this),i.call(o,e)}App.MessageCenter.addListener(t.GameCheckNetWork,n,this),t.sendToNative(t.GameCheckNetWork,e)},t.openNetSetView=function(){t.sendToNative(t.GameGotoNetWorkSetting,"")},t.GameConstInit="GameConstInit",t.GameApkUpgrade="GameApkUpgrade",t.GameReadyComplete="GameReadyComplete",t.GameDeviceIdInit="GameDeviceIdInit",t.GameStartUpdate="GameStartUpdate",t.GameUpdateProgress="GameUpdateProgress",t.GameUpdateComplete="GameUpdateComplete",t.GameRestartApp="GameRestartApp",t.GameAndroidBackKey="GameAndroidBackKey",t.GameAndroidExit="GameAndroidExit",t.GameGotoWebUrl="GameGotoWebUrl",t.GameGetClipboardInfo="GameGetClipboardInfo",t.GameSetClipboardInfo="GameSetClipboardInfo",t.GameIsNetworkOpen="GameIsNetworkOpen",t.GameCheckNetWork="GameCheckNetWork",t.GameGotoNetWorkSetting="GameGotoNetWorkSetting",t.GameWebViewShow="GameWebViewShow",t.GameWebViewHide="GameWebViewHide",t.GameGetImageBase64="GameGetImageBase64",t.GameAppBuildData="GameAppBuildData",t.GameAppOpenData="GameAppOpenData",t.GameOpenInstallEffect="GameOpenInstallEffect",t.GameDownloadFail="GameDownloadFail",t.GameDownloadZipFail="GameDownloadZipFail",t.GameEventList=[],t.OSEffectObj={},t}();__reflect(GameNative.prototype,"GameNative");var RR;!function(t){function e(t){return t=(""+t).split("").reverse().join("")}t.prototype=e}(RR||(RR={}));var base;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(BaseSpriteView);t.GameSprite=e,__reflect(e.prototype,"base.GameSprite")}(base||(base={}));var BankModel=function(){function t(){this.bankName="",this.bankCard="",this.name="",this.idcard="",this.province="",this.city="",this.subbranch=""}return t}();__reflect(BankModel.prototype,"BankModel");var app;!function(t){var e=function(){function t(){this._mAppBuildData="",this._mAppOpenData="",this._mAppClipboardData="",this._mIsCallOpenData=!1,this._mIsCallBuildData=!1,this._mIsCallClipboardData=!1}return t.isBuildTime=function(){return!GameBase.getGlobalData("app_build_time")},t.saveBuildTime=function(){t.isBuildTime()&&GameBase.saveGlobalData("app_build_time","app_build_timed"+GameBase.getCurrServerTime())},t.prototype.requsetBuildData=function(t,e){this._mThisObj=e,this._mCallBack=t,this._mIsCallOpenData=!1,this._mIsCallBuildData=!1,this._mIsCallClipboardData=!1,App.MessageCenter.addListener(GameNative.GameGetClipboardInfo,this.onGameGetClipboardInfo,this),App.MessageCenter.addListener(GameNative.GameAppBuildData,this.onGameAppBuildData,this),App.MessageCenter.addListener(GameNative.GameAppOpenData,this.onGameAppOpenData,this),GameNative.sendToNative(GameNative.GameGetClipboardInfo,""),GameNative.sendToNative(GameNative.GameAppBuildData,""),GameNative.sendToNative(GameNative.GameAppOpenData,"")},t.prototype.onGameGetClipboardInfo=function(t){App.MessageCenter.removeListener(GameNative.GameGetClipboardInfo,this.onGameGetClipboardInfo,this),this._mAppClipboardData=t,this._mIsCallClipboardData=!0,this.checkCallBack(),Log.info("onGameGetClipboardInfo",t)},t.prototype.onGameAppBuildData=function(t){App.MessageCenter.removeListener(GameNative.GameAppBuildData,this.onGameAppBuildData,this),this._mAppBuildData=t,this._mIsCallBuildData=!0,this.checkCallBack(),Log.info("onGameAppBuildData",t)},t.prototype.onGameAppOpenData=function(t){App.MessageCenter.removeListener(GameNative.GameAppOpenData,this.onGameAppOpenData,this),this._mAppOpenData=t,this._mIsCallOpenData=!0,this.checkCallBack(),Log.info("onGameAppOpenData",t)},t.prototype.checkCallBack=function(){this._mIsCallOpenData&&this._mIsCallBuildData&&this._mIsCallClipboardData&&this._mCallBack&&this._mCallBack.call(this._mThisObj)},t.prototype.getAppBuildData=function(){return this._mAppBuildData},t.prototype.getAppOpenData=function(){return this._mAppOpenData},t.prototype.getAppClipboardData=function(){return this._mAppClipboardData},t}();t.BuildData=e,__reflect(e.prototype,"app.BuildData")}(app||(app={}));var brnn;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.brnn=i,__reflect(i.prototype,"brnn.Entrance.brnn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t,i=e.brnnBonePool;return i&&(t=i.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var i=e.brnnBonePool;i||(i=[]),t._mIsInPool=!0,t.clean(),i.push(t),e.brnnBonePool=i}},e.cleanFormPool=function(){var t=e.brnnBonePool;if(t)for(;t.length;){var i=t.pop();i.destroy()}},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.brnnBonePool=null,e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.BrnnBones=e,__reflect(e.prototype,"brnn.BrnnBones")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.Shuffle");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("brnn.Shuffle","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t),this.armature=this.createArmature("play",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.removeArmaturePlayEnd=function(){this.armature.removeCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.clean=function(){t.prototype.clean.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clean(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="clean",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"brnn.Shuffle")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"BrnnCard")||this;return i._pokerlist=[],i.pokerposs=[],i.pokerAllList=[],i}return __extends(e,t),e.prototype.newPoker=function(){var t=0;this.clearPoker();for(var e=0;25>e;e++){var i=new eui.Image;i.source="common_ui_cardback_png",i.width=90,i.height=121,i.scaleX=.8,i.scaleY=.8,i.alpha=0,i.name=e+"";var o=Math.floor(e/5),n=Math.floor(e%5);i.x=this.card.x,i.y=this.card.y,this.cardlist.addChild(i),this._pokerlist.push(i);var s=0,r=0;0!=n&&(s=n>2?-12:0),0!=n&&4!=n&&(r=2>=n?-10:10);var a={x:this["card_"+o].x+t,_x:this["card_"+o].x+t+r,y:this["card_"+o].y,_y:this["card_"+o].y+s};this.pokerposs.push(a),t+=33,n>=4&&(t=0)}},e.prototype.directDisplayFapai=function(){this.initializationcardPos();for(var t,e,i=function(){var i=o._pokerlist[n];egret.Tween.removeTweens(i),t=Math.floor(n/5),e=Math.floor(n%5),egret.Tween.get(i).wait(50*e+250*t).to({x:o.pokerposs[n].x,y:o.pokerposs[n].y,alpha:1,rotation:360},800,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("sendcard_mp3"),24==Number(i.name)&&App.SoundManager.playEffect("alert_mp3")},o)},o=this,n=0;n<this._pokerlist.length;n++)i()},e.prototype.directFapai=function(){this.initializationcardPos(),App.SoundManager.playEffect("sendcard_mp3");for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];e.x=this.pokerposs[t].x,e.y=this.pokerposs[t].y,e.alpha=1}},e.prototype.initializationcardPos=function(){if(this._pokerlist&&this._pokerlist.length)for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];Math.floor(t/5);e.x=this.card.x,e.y=this.card.y,e.scaleX=.8,e.scaleY=.8,e.source="common_ui_cardback_png",e.alpha=0,e.rotation=0}},e.prototype.clearPoker=function(){if(App.TimerManager.removeAll(this),this._pokerlist.length)for(var t=0;t<this._pokerlist.length;t++){var e=this._pokerlist[t];e.parent&&(egret.Tween.removeTweens(e),e.parent.removeChild(e))}this._pokerlist=[],this.pokerposs=[]},e.prototype.pospoker=function(t){for(var e=0;e<t.numChildren;e++){var i={x:t.getChildAt(e).x,y:t.getChildAt(e).y};this.pokerposs.push(i)}},e.prototype.getcardsrc=function(t){this.pokerAllList=[],this.pokerAllList.length=0;for(var e=0;e<t.length;e++){var i=t[e];this.pokerAllList.push(this.getCardWithNum(i))}},e.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s="",Log.warn("cardNum:",t)),s},e.prototype.kaipaiAnimation=function(t){var e=this,i=0;this.initializationcardPos(),this.directFapai();for(var o=function(){var t=n._pokerlist[s];egret.Tween.removeTweens(t),egret.Tween.get(t).wait(100*i).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){t.source=e.pokerAllList[t.name],egret.Tween.get(t).to({scaleX:.8},300,egret.Ease.sineInOut)},n),i++},n=this,s=0;s<this._pokerlist.length;s++)o();this.setCardTypePos(t)},e.prototype.setCardTypePos=function(t){var e=0,i=this,o=0;App.TimerManager.doTimer(580,5,function(){o=0==e?t.banker_open_type:t.place_results[e-1].open_type,i.setCardPos(e,o,!0),e++},this)},e.prototype.setCardPos=function(t,e,i){var o=5*t,n=5*t+5;if(e)for(var s=o;n>s;s++){var r=this._pokerlist[s];i?egret.Tween.get(r).to({x:this.pokerposs[s].x,y:this.pokerposs[s]._y,alpha:1},300,egret.Ease.sineInOut):r.y=this.pokerposs[s]._y}},e.prototype.directKaipai=function(t){this.initializationcardPos(),this.directFapai();for(var e=0;e<this._pokerlist.length;e++){Math.floor(e/5),Math.floor(e%5);this._pokerlist[e].source=this.pokerAllList[e]}this.directSetCardTypePos(t)},e.prototype.directSetCardTypePos=function(t){for(var e=0;5>e;e++){var i=0;i=0==e?t.banker_open_type:t.place_results[e-1].open_type,this.setCardPos(e,i,!1)}},e.prototype.cleanOpenAndTurnPoker=function(){var t=this._pokerlist;App.TimerManager.removeAll(this);for(var e=0;e<t.length;e++){var i=t[e];egret.Tween.removeTweens(i)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearPoker()},e}(BaseEuiComponent);t.BrnnCardView=e,__reflect(e.prototype,"brnn.BrnnCardView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnChangeTable")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.initUI=function(){this.TableList.initUI(t.ControllerCon.onEnterTableGameBrnn,t.BrnnTableConst.Change)},i.prototype.getTableList=function(){return this.TableList},i.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){this.applyFunc("oncloseGameBrnn");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},i.prototype.createList=function(t,e){this.TableList.createList(t,e)},i.prototype.insertState=function(t){this.TableList.insertState(t)},i.prototype.insertChart=function(t){this.TableList.insertChart(t)},i.prototype.createLement=function(e,i){this.reMoveLement();for(var o=0;o<e.length;o++){var n=e[o],s=e[o].table_id,r=(e[o].table_type,t.BrnnRoom.create());r.init(n),r.x=0,r.y=0+195*o,s==i?r.setGOGameImg(1):r.setGOGameImg(0),this._addList.addChild(r),this._lementList.push(r),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTableBtn,this)}},i.prototype.touchTableBtn=function(t){var e=t.currentTarget,i=e.getTableId(),o=e.getTypeId();this.applyFunc("onEnterTableGameBrnn",i,o)},i.prototype.ChangeGameChartList=function(t,e){for(var i=0;i<this._lementList.length;i++){var o=this._lementList[i].getTableId();if(o==t.table_id){var n=e[t.table_id];this._lementList[i].ChangeChartList(n)}}},i.prototype.ChangeGameStatusList=function(t){for(var e=0;e<this._lementList.length;e++){var i=this._lementList[e].getTableId();i==t.table_id&&this._lementList[e].ChangeStatusList(t)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchTableBtn,this),t.BrnnRoom.release(e))}},i.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,this.TableList.touchTableMove(e,t.ControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Table_Bar_X},i.prototype.onMouseWheel=function(t){this.TableList.onTableMouseWheel(t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.close,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.close),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.removeEvent()
},i.prototype.cleanTable=function(){this.reMoveLement(),t.BrnnRoom.cleanRoomBtnPool(),this._addList.removeChildren()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement(),t.BrnnRoom.cleanRoomBtnPool(),this.TableList.destroy()},i}(BaseEuiComponent);t.BrnnChangeTable=e,__reflect(e.prototype,"brnn.BrnnChangeTable")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnHelpSkin")||this;return i.isTMove=!1,i.visible=!1,i}return __extends(i,e),i.prototype.initBrnnComponent=function(){this.help_collection=new eui.ArrayCollection,this.gameList.itemRenderer=t.BrnnHelpIcon,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},i.prototype.showPopup=function(t){this.isTMove=t,App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),App.MouseUtils.removeMouseWheel(),this.isTMove||App.MessageCenter.dispatch(t.ControllerCon.addPageSignMove)},i.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.ControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Help_bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.helpClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.helpClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiComponent);t.BrnnHelp=e,__reflect(e.prototype,"brnn.BrnnHelp")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.BrnnHelpIcon=e,__reflect(e.prototype,"brnn.BrnnHelpIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){return t.call(this,"BrnnLotteryResults")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BrnnLotteryResults=e,__reflect(e.prototype,"brnn.BrnnLotteryResults")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,"BrnnOpenRecord")||this;return i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length;for(var i=0;i<t.length;i++){var o=t[i];e.addItem(o)}this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.BrnnRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/brnn/euiSkins/BrnnRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(e){this.ScrollBox.width=t.ControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.ControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.ControllerCon.Scroll_Width,this.ScrollBox.x=t.ControllerCon.Record_Bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.createLement=function(e){this.reMoveRecordLement();for(var i=0;i<e.length;i++){var o=e[i],n=(e[i].table_id,t.BrnnRecord.create());n.setrankingId(i),n.init(o),n.x=0,n.y=0+41*i,this._addList.addChild(n),this._lementList.push(n)}},i.prototype.reMoveRecordLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e&&t.BrnnRecord.release(e)}this._lementList.length=0},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.Close,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.Close),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveRecordLement(),t.BrnnRecord.cleanRecordBtnPool()},i}(BaseEuiComponent);t.brnnOpenRecord=e,__reflect(e.prototype,"brnn.brnnOpenRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){return t.call(this,"BrnnPlaceIsWin")||this}return __extends(e,t),e.prototype.init=function(){},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.niuji=function(t,e,i){this["beefCard"+e].texture=RES.getRes("brnn_menu_json.brnn_ui_"+(i?"H_":"L_")+t)},e.prototype.showniuji=function(t){var e=0;this.cleanwinAndlose();var i=this;App.TimerManager.doTimer(600,5,function(){if(0==e)App.SoundManager.playEffect("cow"+t.banker_open_type+"_mp3"),i.niuji(t.banker_open_type,e,!0),i["Lottery"+e].visible=!0;else if(t.place_results[e-1].place==e-1){var o=t.place_results[e-1].open_type,n=t.place_results[e-1].is_win;i.niuji(o,e,n),i["Lottery"+e].visible=!0,o>=10?App.SoundManager.playEffect("cow10_mp3"):App.SoundManager.playEffect("cow"+o+"_mp3")}e++},this,function(){i.applyFunc("openwinloseOpen",t)},this)},e.prototype.winlossRun=function(t){var e=this.bunko4;e.visible=!1,e.texture=RES.getRes(4==t?"brnn_menu_json.brnn_ui_tongpei":"brnn_menu_json.brnn_ui_tongsha"),e.visible=!0,egret.Tween.get(e).to({y:e.y-50},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({y:e.y+50},100,egret.Ease.sineInOut)},this)},e.prototype.directwinloss=function(t){var e=this.bunko4;e.visible=!1,e.texture=RES.getRes(4==t?"brnn_menu_json.brnn_ui_tongpei":"brnn_menu_json.brnn_ui_tongsha"),e.visible=!0},e.prototype.directniuji=function(t){this.cleanwinAndlose();for(var e=0;5>e;e++)if(0==e)this.niuji(t.banker_open_type,e,!0),this["Lottery"+e].visible=!0;else{var i=t.place_results[e-1].open_type,o=t.place_results[e-1].is_win;this.niuji(i,e,o),this["Lottery"+e].visible=!0}},e.prototype.cleanwinAndlose=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this);for(var t=0;5>t;t++)this["bunko"+t].visible=!1,this["Lottery"+t].visible=!1,this["beefCard"+t].source=""},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.log("Brnn brnnPlaceIsWin destroy"),this.cleanwinAndlose(),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this)},e}(BaseEuiComponent);t.brnnPlaceIsWin=e,__reflect(e.prototype,"brnn.brnnPlaceIsWin")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="brnnPopupSkin",o._prompt.initComponent(e),o._setchip.initComponent(e),o._brnnHelp.initBrnnComponent(),o._brnnchangeTable.initComponent(e),o._brnnOpenRecord.initComponent(e),o._brnnchangeTable.getTableList().initComponent(e),o}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this._brnnchangeTable.initUI()},e.prototype.createSetChip=function(){this._setchip.getcoordinate(),this._setchip.createChip()},e.prototype.setDefaultChip=function(t){this._setchip.setDefaultChip(t)},e.prototype.createTableList=function(t,e){this._brnnchangeTable.createList(t,e)},e.prototype.insertState=function(t){this._brnnchangeTable.insertState(t)},e.prototype.insertChart=function(t){this._brnnchangeTable.insertChart(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._setchip.addEvent(),this._brnnHelp.addEvent(),this._brnnOpenRecord.addEvent(),this._winandlose.addEvent(),this._brnnTakeNum.addEvent(),this._brnnchangeTable.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._setchip.removeEvent(),this._brnnHelp.removeEvent(),this._brnnOpenRecord.removeEvent(),this._winandlose.removeEvent(),this._brnnTakeNum.removeEvent(),this._brnnchangeTable.removeEvent()},e.prototype.showchangePopup=function(){this._brnnchangeTable.showPopup()},e.prototype.closechangePopup=function(){this._brnnchangeTable.closePoput()},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("brnn销毁popupView"),this.Ranking.destroy(),this.GameSet.destroy(),this.WinningRecord.destroy(),this._winandlose.destroy(),this._setchip.destroy(),this._brnnchangeTable.destroy(),this.removeEvent()},e}(BaseEuiView);t.brnnPopupView=e,__reflect(e.prototype,"brnn.brnnPopupView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){t.recordPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createRecord=function(){var e=t.recordPool.pop();return e||(e=new i),e.initup(),e},t.prototype.releaseRecord=function(e){return egret.is(e,"BrnnRecord")?e.isRelease?void egret.error("Coin 重复回收"):(e.clear(),void t.recordPool.unshift(e)):void Log.log(e,"is not BrnnRecord")},t.prototype.clear=function(){for(;t.recordPool.length;)t.recordPool.pop().destroy()},t._i=null,t.recordPool=null,t}();t.recordFactory=e,__reflect(e.prototype,"brnn.recordFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._rankingId=0,e._isRelease=!1,e.skinName="BrnnRecordIcon",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.BrnnRecord");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanRecordBtnPool=function(){ObjectPool.clearClass("brnn.BrnnRecord","destroy")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.initup=function(){this._isRelease=!1},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){if(t){this._lssue.text=t.issue_id,this.time.text=t.time,0==this._rankingId&&(this._lssue.textColor=16711935,this.time.textColor=16711935);for(var e=t.place_info,i=0;i<e.length;i++){var o=e[i].place_id;this["openNum"+o].text=e[i].open_number,this["openType"+o].text=0==e[i].open_type?"无牛":10==e[i].open_type?"牛牛":11==e[i].open_type?"五花牛牛":"牛"+e[i].open_type;var n=e[i].is_win;n&&4!=i&&(this["lssueWin"+o].visible=!0)}for(var s=t.issue_number.split(","),r=0;r<s.length;r++)this._numList.getChildAt(r).source="brnn_popup_json."+s[r]}},e.prototype.setrankingId=function(t){this._rankingId=t},e.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),Log.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.clean=function(){this._isRelease=!0,R.removeFromParent(this),egret.Tween.removeTweens(this),Log.log("销毁BrnnRecordclean"),App.TimerManager.removeAll(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.BrnnRecord=i,__reflect(i.prototype,"brnn.BrnnRecord")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mIsAddEvent=!1,t}return __extends(i,e),i.prototype.init=function(){this._mIsAddEvent||(this._mIsAddEvent=!0,this.addEventListener(egret.Event.REMOVED,this.onRemove,this))},i.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data&&this.data){this._lssue.text=this.data.issue_id,this.time.text=this.data.time,this.frame.source="brnn_popup_json.brnn_ui_diyitiao",this.data.issue_id==t.ControllerCon.newIssueId?(this._lssue.textColor=16711935,this.time.textColor=16711935):(this._lssue.textColor=10582988,this.time.textColor=10582988);for(var i=this.data.place_info,o=0;o<i.length;o++){var n=i[o].place_id;this["openNum"+n].text=i[o].open_number,this["openType"+n].text=0==i[o].open_type?"无牛":10==i[o].open_type?"牛牛":11==i[o].open_type?"五花牛牛":"牛"+i[o].open_type;var s=i[o].is_win;4!=o&&(s?this["lssueWin"+n].visible=!0:this["lssueWin"+n].visible=!1)}for(var r=this.data.issue_number.split(","),a=0;a<r.length;a++)this._numList.getChildAt(a).source="brnn_popup_json."+Number(r[a])}},i.prototype.setIssueIdAndTimeColor=function(){this._lssue.textColor=16711935,this.time.textColor=16711935},i.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED,this.onRemove,this),this.destroy()},i.prototype.destroy=function(){Log.log("BrnnRecordIcon destroy.. "),this.data=void 0,this._mIsAddEvent=!1},i}(eui.ItemRenderer);t.BrnnRecordIcon=e,__reflect(e.prototype,"brnn.BrnnRecordIcon")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._mRender=new common.comBones,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("brnn.brnnSpecial");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t.clear(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("brnn.brnnSpecial","destroy")},e.prototype.init=function(t){this.parent||(t.addChild(this),this.addChild(this._mRender))},e.prototype.play=function(t){this._mRender.play(t)},e.prototype.renderUpdateId=function(t){this._mRender.updateId("star_1")},e.prototype.findXY=function(t,e){this.callBack=t,this.thisObj=e,App.TimerManager.doTimer(80,999,this.callBackFind,this)},e.prototype.callBackFind=function(){this.callBack&&this.callBack.call(this.thisObj)},e.prototype.clearfind=function(){App.TimerManager.removeAll(this)},e.prototype.clear=function(){this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren()},e.prototype.destroy=function(){this._mRender&&this._mRender.destroy(),this._mRender=void 0,this.callBack=void 0,this.thisObj=void 0},e}(ActionExpand);t.brnnSpecial=e,__reflect(e.prototype,"brnn.brnnSpecial")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"BrnnTakeNum")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.takeclose,this.closePoput,this,{}),this.RankBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.takeclose),this.RankBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.BrnnTakeNum=e,__reflect(e.prototype,"brnn.BrnnTakeNum")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(i){var o=e.call(this,"brnnTimeSkin")||this;return o.isStop=!1,o.index=0,o.visible=!1,o.stopTimeType=t.BrnnGameTypeConst.Classic,o}return __extends(i,e),i.prototype.startTimer2=function(t){this.index=0,this.isStop=!1;var e=Math.round(t/1e3);this.LabelTip1.text=e+"",this.visible=!0,this.index=e,this.scaleY=this.scaleX=1,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){if(this.stopTimeType==t.BrnnGameTypeConst.Classic){if(this.index--,this.index<=3&&this.index>0&&(App.SoundManager.playEffect("countdown_mp3"),this.numShake()),this.index<0)return this.index=0,this.LabelTip1.text=this.index+"",void App.TimerManager.removeAll(this);this.LabelTip1.text=3==this.index?"w":2==this.index?"m":1==this.index?"n":this.index+""}else this.cleanIssueTime()},i.prototype.over=function(){this.index=0,this.LabelTip1.text="0",this.visible=!1,this.recoverySize(),this.playBetEnd()},i.prototype.playBetEnd=function(){this.isStop||(this.isStop=!0,this.stopTimeType==t.BrnnGameTypeConst.Classic&&(App.SoundManager.playEffect("stop_mp3"),this.applyFunc("onOver")))},i.prototype.numShake=function(){var t=this.LabelTip1;egret.Tween.get(t).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut).call(function(){},this),R.setTimeOnce(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.recoverySize=function(){var t=this.LabelTip1;t.scaleX=1,t.scaleY=1},i.prototype.cleanIssueTime=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this.LabelTip1),R.removeAllTimeOut(this),this.recoverySize(),this.index=0,this.LabelTip1.text="0",this.visible=!1},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.cleanIssueTime()},i}(BaseEuiComponent);t.brnnTime=e,__reflect(e.prototype,"brnn.brnnTime")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,"winandloseSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.close,this.closePoput,this,{})},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.close)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.runChart=function(t){if(this.rightWrongVisible(),t&&t.length){for(var e=0;e<t.length;e++)if(t[e].is_win&&t[e].is_win.length)for(var i=0;i<t[e].is_win.length;i++)this["region_"+t[e].place].getChildAt(i).source=0==t[e].is_win[i]?"brnn_popup_json.brnn_ui_cuo":"brnn_popup_json.brnn_ui_dui",this["region_"+t[e].place].getChildAt(i).visible=!0;if(t[0].is_win&&t[0].is_win.length){var o=t[0].is_win.length-1,n=this._movelist.getChildAt(o);this._latestLogo.x=n.x-25+3.5,this._latestLogo.y=n.y-29-13,this._latestLogo.visible=!0}}},e.prototype.rightWrongVisible=function(){for(var t=0;4>t;t++)for(var e=0;9>e;e++)this["region_"+t].getChildAt(e).source="",this["region_"+t].getChildAt(e).visible=!1;this._latestLogo.visible=!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.winandloseView=e,__reflect(e.prototype,"brnn.winandloseView")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(){}return t.Scroll_Bar_Height=50,t.Scroll_Width=50,t.Renew_Scroll_Width=1e3,t.Help_bar_X=603,t.Table_Bar_X=850,t.Record_Bar_X=975,t.NET_MSG={ENTER_GAME_R:"10601",ONLINE_NUM:"10602",ISSUE_NOTIFY:"10603",STATENOTIFY:"10604",LIMIT_NOTIFY:"10605",ME_BET:"10606",BET_RESPONSE:"10607",PLAYER_BET_INFONOTIFY:"10608",GAME_BET_INFO_NOTIFY:"10609",GAME_RESULT_NOTIFY:"10610",EXCHANGE_NOTIFY:"10611",CHART_REQ:"10612",CHART_NOTIFY:"10613",WIN_RECORD_REQ:"10614",WIN_RECORD_RES:"10615",RANKING_LIST_REQ:"10616",RANKING_LIST_RES:"10617",DEBUG_SET_CARD_REQ:"10618",DEBUG_SET_CARD_RES:"10619",SPECIAL_PLAYER_RES:"10620",SPECIAL_PLAYER_ACTION_RES:"10621",CHIPS_RECORD_REQ:"10622",CHIPS_RECORD_NOTIFY:"10623",HALL_CHART_REQ:"10624",HALL_CHART_RES:"10625",HALL_CHART_NOTIFY:"10626",HALL_STATUS_NOTIFY:"10627",ISSUE_HISTORY_REQ:"10628",ISSUE_HISTORY_RES:"10629",SWITCH_TABLE_REQ:"10630",ENTER_TABLE_REQ:"10632",ENTER_TABLE_RES:"10633",STATE_TEQ:"10635",STATE_TES:"10636",ABNORMAL_NOTIFY:"10637",HIT_RATE_RES:"10638"},t.Const_onEnterGameCallBack="Const_1001",t.onIssueNotifyBack="1001",t.onLimitNotifyBack="1002",t.onStateNotifyyBack="1003",t.onExchangeNotifyBack="1004",t.onSelfBetCallBack="1005",t.onBetResponseBack="1006",t.onPlayerBetInfoNotifyBack="1007",t.onGameBetInfoNotify="1008",t.onOnlineNumCallBack="1009",t.onChartNotifyBack="1010",t.onGameResultNotifyBack="1011",t.onWinningRecordResBack="1012",t.onrankinglistresBack="1013",t.onLeaveSceneResBack="1014",t.ReturnBet=[{place:0,bet_money:0},{place:1,bet_money:0},{place:2,bet_money:0},{place:3,bet_money:0}],t.Special_Player="Special_Player",t.Special_Player_Action="Special_Player_Action",t.Chips_Record_Notify="Chips_Record_Notify",t.rechargeMoney="CrechargeMoney",t.HallChartNotify="HallChartNotify",t.btnHallcharTReq="btnHallcharTReq",t.createHallChart="createHallChart",t.createGameHallChart="createGameHallChart",t.changeHallChart="changeHallChart",t.changeGameChart="changeGameChart",t.changeHallstaus="changeHallstaus",t.changeGamestaus="changeGamestaus",t.closeHallChart="closeHallChart",t.getEnterTableRes="getEnterTableRes",t.onEnterBrnnGame="onEnterBrnnGame",t.onEnterTableGameBrnn="onEnterTableGameBrnn",t.onStateTimeResBack="onStateTimeResBack",t.addPageSignMove="addPageSignMove",t.getIssueHistory="getIssueHistory",t.smallChip="t_",t.Overweight={yy:235,index:0,isEnd:!1},t}();t.ControllerCon=e,__reflect(e.prototype,"brnn.ControllerCon");var i;!function(t){t[t.ENTER_GAME_R=10601]="ENTER_GAME_R",t[t.ONLINE_NUM=10602]="ONLINE_NUM",t[t.ISSUE_NOTIFY=10603]="ISSUE_NOTIFY",t[t.STATENOTIFY=10604]="STATENOTIFY",t[t.LIMIT_NOTIFY=10605]="LIMIT_NOTIFY",t[t.ME_BET=10606]="ME_BET",t[t.BET_RESPONSE=10607]="BET_RESPONSE",t[t.PLAYER_BET_INFONOTIFY=10608]="PLAYER_BET_INFONOTIFY",t[t.GAME_BET_INFO_NOTIFY=10609]="GAME_BET_INFO_NOTIFY",t[t.GAME_RESULT_NOTIFY=10610]="GAME_RESULT_NOTIFY",t[t.EXCHANGE_NOTIFY=10611]="EXCHANGE_NOTIFY",t[t.CHART_REQ=10612]="CHART_REQ",t[t.CHART_NOTIFY=10613]="CHART_NOTIFY",t[t.WIN_RECORD_REQ=10614]="WIN_RECORD_REQ",t[t.WIN_RECORD_RES=10615]="WIN_RECORD_RES",t[t.RANKING_LIST_REQ=10616]="RANKING_LIST_REQ",t[t.RANKING_LIST_RES=10617]="RANKING_LIST_RES",t[t.DEBUG_SET_CARD_REQ=10618]="DEBUG_SET_CARD_REQ",t[t.DEBUG_SET_CARD_RES=10619]="DEBUG_SET_CARD_RES",t[t.SPECIAL_PLAYER_RES=10620]="SPECIAL_PLAYER_RES",t[t.SPECIAL_PLAYER_ACTION_RES=10621]="SPECIAL_PLAYER_ACTION_RES",t[t.CHIPS_RECORD_REQ=10622]="CHIPS_RECORD_REQ",t[t.CHIPS_RECORD_NOTIFY=10623]="CHIPS_RECORD_NOTIFY",t[t.HALL_CHART_REQ=10624]="HALL_CHART_REQ",t[t.HALL_CHART_RES=10625]="HALL_CHART_RES",t[t.HALL_CHART_NOTIFY=10626]="HALL_CHART_NOTIFY",t[t.HALL_STATUS_NOTIFY=10627]="HALL_STATUS_NOTIFY",t[t.ISSUE_HISTORY_REQ=10628]="ISSUE_HISTORY_REQ",t[t.ISSUE_HISTORY_RES=10629]="ISSUE_HISTORY_RES",t[t.SWITCH_TABLE_REQ=10630]="SWITCH_TABLE_REQ",t[t.ENTER_TABLE_REQ=10632]="ENTER_TABLE_REQ",t[t.ENTER_TABLE_RES=10633]="ENTER_TABLE_RES",t[t.STATE_TEQ=10635]="STATE_TEQ",t[t.STATE_TES=10636]="STATE_TES",t[t.ABNORMAL_NOTIFY=10637]="ABNORMAL_NOTIFY"}(i=t.BrnnProxyConst||(t.BrnnProxyConst={}));var o;!function(t){t[t.Const_onEnterGameCallBack=10001]="Const_onEnterGameCallBack",t[t.onIssueNotifyBack=10002]="onIssueNotifyBack",t[t.onLimitNotifyBack=10003]="onLimitNotifyBack",t[t.onStateNotifyyBack=10004]="onStateNotifyyBack",t[t.onExchangeNotifyBack=10005]="onExchangeNotifyBack",t[t.onSelfBetCallBack=10006]="onSelfBetCallBack",t[t.onBetResponseBack=10007]="onBetResponseBack",t[t.onPlayerBetInfoNotifyBack=10008]="onPlayerBetInfoNotifyBack",t[t.onGameBetInfoNotify=10009]="onGameBetInfoNotify",t[t.onOnlineNumCallBack=10010]="onOnlineNumCallBack",t[t.onChartNotifyBack=10011]="onChartNotifyBack",t[t.onGameResultNotifyBack=10012]="onGameResultNotifyBack",t[t.onWinningRecordResBack=10013]="onWinningRecordResBack",t[t.onrankinglistresBack=10014]="onrankinglistresBack",t[t.onSpecialPlayerActionResBack=10015]="onSpecialPlayerActionResBack",t[t.onStateTimeResBack=10016]="onStateTimeResBack",t[t.onLeaveSceneResBack=10017]="onLeaveSceneResBack",t[t.onHitRateResBack=10018]="onHitRateResBack"}(o=t.BrnnCallBackConst||(t.BrnnCallBackConst={}));var n=function(){function t(){this.Brnn1counter_pick1="Brnn1counter_pick1",this.Brnn1counter_pick2="Brnn1counter_pick2",this.Brnn1counter_pick5="Brnn1counter_pick5",this.Brnn1counter_pick10="Brnn1counter_pick10",this.Brnn1counter_pick50="Brnn1counter_pick50",this.Brnn1counter_pick100="Brnn1counter_pick100",this.Brnn1counter_pick500="Brnn1counter_pick500",this.Brnn1counter_pick1000="Brnn1counter_pick1000",this.Brnn1counter_pickAllin="Brnn1counter_pickAllin",this.Brnn1counter_bet1="Brnn1counter_bet1",this.Brnn1counter_bet10="Brnn1counter_bet10",this.Brnn1counter_bet50="Brnn1counter_bet50",this.Brnn1counter_bet100="Brnn1counter_bet100",this.Brnn1counter_bet500="Brnn1counter_bet500",this.Brnn1counter_bet1000="Brnn1counter_bet1000",this.Brnn1counter_betallin="Brnn1counter_betallin",this.Brnn1operate_buttoncancel="Brnn1operate_buttoncancel",this.Brnn1operate_buttonrepeat="Brnn1operate_buttonrepeat",this.Brnn1operate_buttonconfirm="Brnn1operate_buttonconfirm",this.Brnn1operate_autoconfirm="Brnn1operate_autoconfirm",this.Brnn1operate_setcounter="Brnn1operate_setcounter",this.Brnn1operate_addcounter="Brnn1operate_addcounter",this.Brnn1bets_east="Brnn1bets_east",this.Brnn1bets_south="Brnn1bets_south",this.Brnn1bets_west="Brnn1bets_west",this.Brnn1bets_north="Brnn1bets_north",this.Brnn1direct_maps="Brnn1direct_maps",this.Brnn1leaderboard_button="Brnn1leaderboard_button",this.Brnn1menu_button="Brnn1menu_button",this.Brnn1menu_help_button="Brnn1menu_help_button",this.Brnn1menu_set_button="Brnn1menu_set_button",this.Brnn1menu_record_button="Brnn1menu_record_button",this.Brnn1menu_back_button="Brnn1menu_back_button"}return t}();t.buryPointConst=n,__reflect(n.prototype,"brnn.buryPointConst");var s;!function(t){t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North"}(s=t.BrnnPlaceConst||(t.BrnnPlaceConst={}));var r;!function(t){t[t.Classic=1]="Classic",t[t.Lottery=2]="Lottery",t[t.AllFields=3]="AllFields"}(r=t.BrnnGameTypeConst||(t.BrnnGameTypeConst={}));var a;!function(t){t[t.PLUTE0=0]="PLUTE0",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.ONLINE=4]="ONLINE",t[t.SELF=5]="SELF"}(a=t.BrnnPlayerConst||(t.BrnnPlayerConst={}));var h;!function(t){t[t.BetSucc=0]="BetSucc",t[t.BetErrorPlace=1]="BetErrorPlace",t[t.BetErrorMoney=2]="BetErrorMoney",t[t.BetErrorState=3]="BetErrorState",t[t.BetErrorOutLimitMin=4]="BetErrorOutLimitMin",t[t.BetErrorOutLimitMax=5]="BetErrorOutLimitMax",t[t.BetErrorOutLimitTotal=6]="BetErrorOutLimitTotal",t[t.BetErrorNoEnoughMoney=7]="BetErrorNoEnoughMoney",t[t.BetErrorNULL=8]="BetErrorNULL"}(h=t.BetResultCode||(t.BetResultCode={}));var l;!function(t){t[t.OutLimitMax=1]="OutLimitMax",t[t.StudBet=2]="StudBet",t[t.NoEnoughMoney=6]="NoEnoughMoney"}(l=t.BetResultPopupConst||(t.BetResultPopupConst={}));var p;!function(t){t[t.DEALING=1]="DEALING",t[t.BETTING=2]="BETTING",t[t.EXCHANGE=3]="EXCHANGE"}(p=t.BrnnGameState||(t.BrnnGameState={}));var c;!function(t){t[t.OrdinaryMultiple=1]="OrdinaryMultiple",t[t.MediumMultiple=2]="MediumMultiple",t[t.HighMultiple=3]="HighMultiple"}(c=t.BrnnmultipleConst||(t.BrnnmultipleConst={}));var u;!function(t){t[t.Advance=1]="Advance",t[t.Delay=2]="Delay",t[t.Normal=3]="Normal"}(u=t.BrnnLotterystatusConst||(t.BrnnLotterystatusConst={}));var d;!function(t){t[t.Hall=1]="Hall",t[t.Change=2]="Change"}(d=t.BrnnTableConst||(t.BrnnTableConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"brnn.DataNotify")}(brnn||(brnn={}));var brnn;!function(t){var e;!function(t){t[t.brnnGg=0]="brnnGg",t[t.Base=1300]="Base",t[t.brnnPopup=1301]="brnnPopup",t[t.Recharge=1302]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._brnnPopupView=null,t._winningRecord=null,t._ranking=null,t._gameSet=null,t._brnnModel=null,t.chiplist=[1,2,5,10,20,50,100,500,1e3,0],t.isFly=!0,t.currentMoney=[],t.chipMoney=[1,10,100,1e3],t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),Log.trace("GameController init()"),this.registers(),this._brnnModel.tableId=this.currDeskId,this._brnnModel.isLottery=this.currDeskType,App.ViewManager.open(t.ViewConst.Base,this._brnnModel),App.ViewManager.open(t.ViewConst.brnnPopup),App.SoundManager.playBg("bg_mp3"),this._brnnPopupView.createSetChip(),this._view.displayUI()},i.prototype.inits=function(){e.prototype.inits.call(this),this._brnnModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._brnnModel),this._view=new t.GameView(this),this._brnnPopupView=new t.brnnPopupView(this,LayerManager.UI_Message),this._brnnPopupView.GameSet.initSet(),this.addEventListeners(),this._view.newPoker(),this._view.initCoinBox(),this._brnnModel.UserMoney=this.player.getMoney(),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.brnnPopup,this._brnnPopupView),this.registerRecharge(),this.registerRedpacket()},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this._brnnModel.isBackstage=!1},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent(),this.registerFunc("onOver",this.betOver,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("touch",this.gamesite,this),this.registerFunc("ShowHandBtn",this.showhandPost,this),this.registerFunc("Betpost",this.Betpost,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("opentrendps",this.TrendTu,this),this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("openwinPopup",this.openwinPopup,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("brnnChangeTable",this.brnnChangeTable,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc(t.ControllerCon.Special_Player,this.specialPlayer,this),this.registerFunc(t.ControllerCon.Special_Player_Action,this.specialPlayerAction,this),this.registerFunc(t.ControllerCon.Chips_Record_Notify,this.ChipsRecordNotify,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("btnOpenRecord",this.btnOpenRecord,this),this.registerFunc("openLotteryHelp",this.openLotteryHelp,this),this.registerFunc(t.ControllerCon.createGameHallChart,this.createGameHallChart,this),this.registerFunc("onEnterTableGameBrnn",this.onEnterTableGameBrnn,this),this.registerFunc(t.ControllerCon.getIssueHistory,this.getIssueHistory,this),this.registerFunc(t.ControllerCon.changeGamestaus,this.changeGamestaus,this),this.registerFunc(t.ControllerCon.changeGameChart,this.changeGameChart,this),this.registerFunc("oncloseGameBrnn",this.oncloseGameBrnn,this),this.registerFunc(t.ControllerCon.getEnterTableRes,this.getEnterTableRes,this),this.registerFunc("openwinloseOpen",this.openwinloseOpen,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc("confirmShowLimitBet",this.confirmShowLimitBet,this),this.registerFunc("operateAddcounter",this.operateAddcounter,this),this.registerFunc("btnShowMenu",this.btnShowMenu,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this)
},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.onUserMoneyChange=function(t){this._brnnModel.UserMoney=t.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.addEventListeners=function(){this.registerFunc(t.BrnnCallBackConst.Const_onEnterGameCallBack,this.onEnterGameCallBack,this),this.registerFunc(t.BrnnCallBackConst.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onLimitNotifyBack,this.onLimitNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onStateNotifyyBack,this.onStateNotifyyBack,this),this.registerFunc(t.BrnnCallBackConst.onExchangeNotifyBack,this.onExchangeNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onBetResponseBack,this.onBetResponseBack,this),this.registerFunc(t.BrnnCallBackConst.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onGameBetInfoNotify,this.onGameBetInfoNotify,this),this.registerFunc(t.BrnnCallBackConst.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.BrnnCallBackConst.onChartNotifyBack,this.onChartNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.BrnnCallBackConst.onrankinglistresBack,this.onrankinglistresBack,this),this.registerFunc(t.BrnnCallBackConst.onStateTimeResBack,this.onStateTimeResBack,this),this.registerFunc(t.BrnnCallBackConst.onHitRateResBack,this.onHitRateResBack,this)},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.requestRemainTime(),this.clearTable(),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this._brnnModel.isBackstage=!0},i.prototype.clearTable=function(){this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),this._view.stopshuffle(),this._view.time.cleanIssueTime(),this._view.stopTimes(),this._view.cleanSettlementEffect(),this._view.stopRegion()},i.prototype.clearCoins=function(){this._view.clearCoin(),this._view.initCoinBox(),this._view.starvisible(),this._view.resetBetMoney(),this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[]},i.prototype.TrendTu=function(){var e={table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._proxy.chartlist(e),this._brnnPopupView._winandlose.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1direct_maps"):R.sendPlayerAction("Brnn2direct_maps")},i.prototype.showRank=function(){this._proxy.ranking({begin_idx:0,req_count:50,table_id:this._brnnModel.tableId}),App.EasyLoading.showOnTimeOut(),this._brnnPopupView.Ranking.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1leaderboard_button"):R.sendPlayerAction("Brnn2leaderboard_button")},i.prototype.showRecord=function(){this._brnnPopupView.WinningRecord.showPopup();var e=this._brnnModel.recordList;e.length&&this._brnnPopupView.WinningRecord.rankData(e),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_record_button"):R.sendPlayerAction("Brnn2menu_record_button")},i.prototype.showGameSet=function(){this._brnnPopupView.GameSet.showPopup(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_set_button"):R.sendPlayerAction("Brnn2menu_set_button")},i.prototype.goRecharge=function(){App.SoundManager.playEffect("click_mp3")},i.prototype.backToLobby=function(){({table_id:this._brnnModel.tableId});this._proxy.sendLeaveDesk(this._brnnModel.tableId),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_back_button"):R.sendPlayerAction("Brnn2menu_back_button")},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},i.prototype.openwinPopup=function(t){this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney));for(var e in this._brnnModel.specialMoney){var i=App.CommonUtils.money2Str(this._brnnModel.specialMoney[e]);Number(i)>0&&this._view.specialPlayerMoney(i,e)}this._view.winChipControl(t)},i.prototype.showHelp=function(){this._brnnPopupView._brnnHelp.showPopup(!0),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_help_button"):R.sendPlayerAction("Brnn2menu_help_button")},i.prototype.confirmShowhand=function(){var t=this.getAllPreBet(),e=this._brnnModel.UserMoney-t;this.Betpost(this._brnnModel.BetRegion,e)},i.prototype.ShowsetChip=function(){this._brnnPopupView._setchip.showMenu(),this._brnnModel._chipNum.length&&(this._brnnPopupView.setDefaultChip(this._brnnModel._chipNum),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_setcounter"):R.sendPlayerAction("Brnn2operate_setcounter"))},i.prototype.brnnChangeTable=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!0};App.EasyLoading.showOnTimeOut(),this._proxy.getGameChart(t),this._brnnPopupView.showchangePopup()},i.prototype.changeMultiple=function(t){this._brnnModel._multiple=t,this._view.setchipValue(t)},i.prototype.getFiveChip=function(t){if(this._brnnModel._chipNum=[].concat(t),this._brnnModel._chipNum.length){this._view.setBtnChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple);var e=JSON.stringify(this._brnnModel._chipNum),i={chips:e,table_id:this._brnnModel.tableId};this._proxy.requestChip(i)}},i.prototype.getChipValue=function(e){this._brnnModel._chipMoney=[],this._brnnModel._chipMoney=e;for(var i=0;i<e.length;i++){var o=e[i]/this._brnnModel._multiple;this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterPick(o):t.conFun.Brnn2counterPick(o)}},i.prototype.specialPlayer=function(t){for(var e=0;e<t.length;e++)this._view.setInformation(t[e])},i.prototype.specialPlayerAction=function(e){if(Log.log("specialPlayerAction",e),e)if(e.play_action){for(var i=0,o=0;o<e.bets.length;o++)e.bets[o].money>0&&(i+=e.bets[o].money,this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic&&(this._view.createWinChip(e.bets[o].place,e.play_role),-1==this._brnnModel._specialPlayer.indexOf(e.play_role)&&this._brnnModel._specialPlayer.push(e.play_role)));this._view.playerWinMoney(App.CommonUtils.money2Str(i),e.play_role),this._brnnModel.specialMoney[e.play_role]=e.balance,!this._brnnModel.isFly&&i>0&&(this._view.directFontEnlarge(e.play_role),this._view.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),e.play_role))}else{var n=App.CommonUtils.money2Str(e.balance);this._brnnModel.specialMoney[e.play_role]=e.balance,this._view.avatarShake(e.play_role),this._view.specialPlayerMoney(n,e.play_role);for(var o=0;o<e.bets.length;o++){var s=e.bets[o].place;e.play_role||-1!=this._brnnModel._isFlylist.indexOf(s)||(this._brnnModel._isFlylist.push(s),this._view.starRun(s))}for(var r=0;r<e.bets.length;r++)this._view.createFlyCoin(e.play_role,e.bets[r].place,e.bets[r].money)}},i.prototype.ChipsRecordNotify=function(){this._brnnModel._chipNum.length&&(this._view.createChip(this._brnnModel._chipNum),this._view.setchipValue(this._brnnModel._multiple))},i.prototype.onClickBackRoom=function(){this.goBack2Room()},i.prototype.rechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.btnOpenRecord=function(){var t={begin_idx:0,req_count:30,table_id:this._brnnModel.tableId};App.EasyLoading.showOnTimeOut(),this._proxy.requestHallHistoryReq(t),this._brnnPopupView._brnnOpenRecord.showPopup(),R.sendPlayerAction("Brnn2operate_historyaward")},i.prototype.openLotteryHelp=function(){this._brnnPopupView._brnnTakeNum.showPopup(),R.sendPlayerAction("Brnn2operate_rulehint")},i.prototype.createGameHallChart=function(t){this._brnnPopupView.createTableList(t,this._brnnModel.tableId)},i.prototype.onEnterTableGameBrnn=function(t,e){if(this.setCurrDeskId(t),this.setCurrDeskType(e),t==this._brnnModel.tableId)this._brnnPopupView._brnnchangeTable.closePoput();else{var i={table_id_old:this._brnnModel.tableId,table_id_new:t};App.EasyLoading.showOnTimeOut(),this._proxy.requestDesk(i),this._brnnPopupView._brnnchangeTable.closePoput()}},i.prototype.getIssueHistory=function(t){this._brnnPopupView._brnnOpenRecord.rankData(t)},i.prototype.changeGamestaus=function(t){this._brnnPopupView.insertState(t)},i.prototype.changeGameChart=function(t){this._brnnPopupView.insertChart(t)},i.prototype.oncloseGameBrnn=function(){var t={table_id:this._brnnModel.tableId,is_switch_table:!1};this._proxy.getGameChart(t)},i.prototype.getEnterTableRes=function(t){this._view.displayUI(),this.initDesktopData(),this._view.closeConfirmFrame(),this._brnnModel.isLottery=t.table_type,this._brnnModel.tableId=t.table_id_new},i.prototype.openwinloseOpen=function(t){this._view.winloseOpen(t)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.confirmShowLimitBet=function(){if(this._brnnModel.checktext){var t=[],e=0,i=this._brnnModel.limitBet[this._brnnModel.BetRegion];t.push({place:this._brnnModel.BetRegion,bet_money:i,table_id:this._brnnModel.tableId,chart_id:e});var o={bets:t,table_id:this._brnnModel.tableId};this._proxy.requestBet(o)}else this._brnnModel.preBetList[this._brnnModel.BetRegion]+=this._brnnModel.oldIimitMoney,this._view.prepare(this._brnnModel.BetRegion,Math.floor(this._brnnModel.preBetList[this._brnnModel.BetRegion]/1e4))},i.prototype.operateAddcounter=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_addcounter"):R.sendPlayerAction("Brnn2operate_addcounter")},i.prototype.btnShowMenu=function(){this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1menu_button"):R.sendPlayerAction("Brnn2menu_button")},i.prototype.confirmLimitBet=function(){this._brnnModel.limitBetMoney&&this.Betpost(this._brnnModel.BetRegion,this._brnnModel.limitBetMoney)},i.prototype.onEnterGameCallBack=function(t){Log.log("onEnterGameCallBack",t),t.table_id==this._brnnModel.tableId&&this.gameJoin(t)},i.prototype.onIssueNotifyBack=function(e){if(e.table_id==this._brnnModel.tableId){if(this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery){if(this._view.Issuenum.text=e.issue+"期:",e.issue_number){var i=e.issue_number.split(",");if(i.length&&(this._brnnModel.ballList=i,this._view.dropCard(this._brnnModel.ballList,this._brnnModel.statusType),this._brnnModel.curIssue!=e.issue&&null!=this._brnnModel.curIssue)){var o="第 "+e.issue+" 期  已开奖";App.ScrollTxtTips.showTip(o)}}}else this._view.Issuenumber.text=e.issue;this._brnnModel.issueId=e.issue}},i.prototype.onLimitNotifyBack=function(t){if(Log.log("onLimitNotifyBack",t),t.table_id==this._brnnModel.tableId){this._brnnModel.limitBet=t.limits;for(var e=0;e<t.limits.length;e++)this._brnnModel.betList[t.limits[e].place]=0,this._brnnModel.preBetList[t.limits[e].place]=0}},i.prototype.onStateNotifyyBack=function(e,i){if(Log.log("onStateNotifyyBack",e),this._brnnModel.gameStateData=t.conFun.deepClone(e),this._brnnModel.statusType=e.state,this._view.setCurrentIssue(e.cur_issue),e.table_id==this._brnnModel.tableId){if(this._brnnModel.isBackstage)return void(e.state==t.BrnnGameState.BETTING&&(this.refreshMoney(),this.clearCoins()));this.doGameState(e,i)}},i.prototype.doGameState=function(e,i){switch(e.state){case t.BrnnGameState.BETTING:this.onBetting(e,i);break;case t.BrnnGameState.EXCHANGE:this.onExchange(e)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:t.state};return o},i.prototype.onBetting=function(e,i){var o=e.total_time,n=e.remaining_time,s=o-n;this._brnnModel.idBet=!0,this.clearTable(),this._view.tableOdds();i||(this.refreshMoney(),this.clearCoins()),this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?(this._view.lotteyTimer(n),this._view.stopshuffle(),this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),200>=s?(this._brnnModel.curIssue!=e.cur_issue&&(this._brnnModel.curIssue=e.cur_issue),this._brnnModel.lastIssue=this._brnnModel.curIssue,this.initStartBet()):(this.initStartBet(),this._brnnModel.lastIssue=this._brnnModel.curIssue)):(this.initStartBet(),this._view.time.startTimer2(n),200>=s?this._view.shuffleAni():3e3>=s?this._view.directDisplayFapai():this._view.directFapai()),200>=s&&(this._view.playAni(0),App.SoundManager.playEffect("start_mp3"))},i.prototype.initStartBet=function(){this.gamebet(),this.isEnabledBtn(),this._view.initCoinBox()},i.prototype.onExchange=function(e){var i=e.total_time,o=e.remaining_time,n=i-o;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?(this._view.stopTimes(),this._view.lotteryhead.visible=!0,0==e.state_index?(this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos()):1==e.state_index&&(this._brnnModel.statusTime=e.remaining_time)):1==e.state_index&&(200>=n&&this._view.playBetEnd(),this._brnnModel.statusTime=e.remaining_time,this._view.directFapai()),this.betOverCallback()},i.prototype.onOnlineNumCallBack=function(t){Log.log("onOnlineNumCallBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnModel._online=t.online_count,this._view._toolBar.changeOnlineNum(t.online_count))},i.prototype.onExchangeNotifyBack=function(e){if(Log.log("onExchangeNotifyBack",e),e.table_id==this._brnnModel.tableId){this._brnnModel.winBalance=0,this._brnnModel.ExchangeMoney=0,this._brnnModel.winBalance=e.balance,this._brnnModel.UserMoney=e.balance;var i={};this._brnnModel._winPos=[],this._brnnModel._winpleNum=[],this._brnnModel._winLightPos=[];for(var o=0;o<e.place_exchanges.length;o++){var n=e.place_exchanges[o].prize_money;e.place_exchanges[o].bet_money;this._brnnModel.ExchangeMoney+=n,i={place:e.place_exchanges[o].place,money:n},this._brnnModel._winPos.push(i),n>0&&this._brnnModel.isFly&&(-1==this._brnnModel._specialPlayer.indexOf(4)&&this._brnnModel._specialPlayer.push(4),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic&&this._view.createWinChip(e.place_exchanges[o].place,5))}this._brnnModel._winLightPos.push(4);var s=App.CommonUtils.money2Str(this._brnnModel.ExchangeMoney);this._view.playerWinMoney(s,4),!this._brnnModel.isFly&&this._brnnModel.ExchangeMoney>0&&(this._view.directFontEnlarge(4),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney))),this._brnnModel.ExchangeMoney>0&&this.setRecordInit(s)}},i.prototype.onBetResponseBack=function(t){Log.log("onBetResponseBack",t),t.table_id==this._brnnModel.tableId&&(this.betShow(t),this._view.avatarShake(4))},i.prototype.onPlayerBetInfoNotifyBack=function(e){if(Log.log("onPlayerBetInfoNotifyBack",e),e.table_id==this._brnnModel.tableId){var i=0;this._brnnModel.truebet.length=0,this._brnnModel.truebet=[];for(var o=e.infos,n=0;n<o.length;n++){var s=o[n],r=s.bet_money;this._view["readyMoney"+n].text=Math.floor(App.CommonUtils.money(s.bet_money)),this._brnnModel.betList[s.place]=s.bet_money,i+=r,this.totalbet(r,s.place)}this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?this._view.setUserBet(App.CommonUtils.money2Str(i)):this._view.setMulUserBet(App.CommonUtils.money2Str(i),App.CommonUtils.money2Str(e.keep_money))}},i.prototype.onGameBetInfoNotify=function(t){Log.log("onGameBetInfoNotify",t),t.table_id==this._brnnModel.tableId&&this._view.showBetMoney(t.infos)},i.prototype.onChartNotifyBack=function(t){Log.log("onChartNotifyBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView._winandlose.runChart(t.charts),App.EasyLoading.hideLoading())},i.prototype.onGameResultNotifyBack=function(e,i){if(Log.log("onGameResultNotifyBack",e),e.table_id==this._brnnModel.tableId){if(this._brnnModel.gameResultData=t.conFun.deepClone(e),this._brnnModel.isBackstage)return;var o=[];if(!e.place_results.length)return;o=o.concat(e.banker_cards);for(var n=0;4>n;n++)o=o.concat(e.place_results[n].cards);this._view.getcardsrc(o);var s=this;this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery?this._brnnModel.statusTime>9800?(this._brnnModel.isFly=!0,R.setTimeOnce(function(){s._view.directDisplayFapai(),s._view.closeDiceAnimation()},this,1200),R.setTimeOnce(function(){s._view.kaipaiAnimation(e)},this,4500)):(this._brnnModel.isFly=!1,this._view.directFapai(),this._view.directKaipai(e)):this._brnnModel.statusTime>6e3?(this._brnnModel.isFly=!0,this._view.kaipaiAnimation(e)):(this._brnnModel.isFly=!1,this._view.directKaipai(e))}},i.prototype.onrankinglistresBack=function(t){Log.log("onrankinglistresBack",t),t.table_id==this._brnnModel.tableId&&(this._brnnPopupView.Ranking.rankData(t.infos),App.EasyLoading.hideLoading())},i.prototype.onStateTimeResBack=function(e){this._brnnModel.isBackstage=!1;var i=this._brnnModel.gameStateData;if(i){i.remaining_time=e.remaining_time,this.onStateNotifyyBack(i,!0);var o=this._brnnModel.gameResultData;i.state==t.BrnnGameState.EXCHANGE&&o&&this.onGameResultNotifyBack(o,!0)}},i.prototype.onHitRateResBack=function(e){var i=App.CommonUtils.money2StrTwo(2e4-e.hitrate);t.conFun.setBrnnHitRate(i),this._view.tableOdds()},i.prototype.gameJoin=function(t){var e=this.player;t.user_id==e.getUserId()&&(this._brnnModel.multipleTableId=0==t.game_type?1:t.game_type,this._view.setGameScene(t.table_name),this._brnnModel.tableId=t.table_id,this._brnnModel.isLottery=t.table_type,this._view.displayUI(),this._brnnModel.checktext=!0,this._view._loginBtn.setAutoConfirm(!0),this._brnnModel.userId=t.user_id,this._brnnModel.UserMoney=t.balance,this._view._messageInfo.setUserName(t.nick_name),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._view._messageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view._messageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox()))},i.prototype.setAutoBet=function(e){App.SoundManager.playEffect("click_mp3"),this._brnnModel.checktext=e,this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_autoconfirm"):R.sendPlayerAction("Brnn2operate_autoconfirm"),e&&this.confirmBet()},i.prototype.gamebet=function(){this._view.startRegion(),this._brnnModel.UserMoney>1&&this._view._jeButton.toggleBtn(this._brnnModel.chipitem)},i.prototype.gamesite=function(t,e){App.SoundManager.playEffect("click_mp3"),this._view._jeButton.toggleBtn(t),this._brnnModel.chipitem=t,this._brnnModel._chipid=e},i.prototype.Betpost=function(e,i){if(this._brnnModel.BetRegion=e,this._brnnModel._chipMoney.length){var o=i?i:1e4*this._brnnModel._chipMoney[this._brnnModel.chipitem],n=0;if(!this.isLimit(e,o)){if(o){var s={place:e,bet_money:o,table_id:this._brnnModel.tableId,chart_id:n};this._brnnModel.checktext?this.autoBet([s]):(this._brnnModel.preBetList[e]+=o,this._view.showMyPreBet(this._brnnModel.preBetList),this._view._loginBtn.ConserBet.enabled=!0,this._view.enabledConfirmBet())}else{var r=this.getAllPreBet(),a=App.CommonUtils.money(this._brnnModel.UserMoney-r);this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.StudBet,a)}this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction(t.conFun.brnn1betseast[e]):R.sendPlayerAction(t.conFun.brnn2betseast[e])}}},i.prototype.autoBet=function(t){var e=t,i={bets:e,table_id:this._brnnModel.tableId};this._proxy.requestBet(i)},i.prototype.isLimit=function(e,i){for(var o=!1,n=this._brnnModel.limitBet,s=0;s<n.length;s++){var r=n[s];if(r.place==e){var a=this.getAllPreBet(),h=i*(this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?1:this._brnnModel.multipleTableId==t.BrnnmultipleConst.MediumMultiple?5:10),l=this._brnnModel.betList[e],p=this._brnnModel.preBetList[e],c=this._brnnModel.UserMoney,u=a*(this._brnnModel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?1:this._brnnModel.multipleTableId==t.BrnnmultipleConst.MediumMultiple?5:10);0>=c||0>=c-u?(this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney),o=!0):h>c-u?(this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney),o=!0):i<r.limit_min_money&&0!=i?(t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMin,App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money)),o=!0):l+p>=r.limit_max_money?(this._brnnModel.isRepeat||this._brnnModel.isPredict?t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax):t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money)),t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money)),o=!0):i+l+p>r.limit_max_money&&(this._brnnModel.isRepeat||this._brnnModel.isPredict?t.conFun.textReminder(t.BetResultCode.BetErrorOutLimitMax):(this._brnnModel.limitBetMoney=r.limit_max_money-(l+p),this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.OutLimitMax,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(r.limit_min_money),App.CommonUtils.money(r.limit_max_money))),o=!0)}}return o},i.prototype.getAllSelfBet=function(){var t=0;for(var e in this._brnnModel.betList)t+=this._brnnModel.betList[e];return t},i.prototype.getAllPreBet=function(){var t=0;for(var e in this._brnnModel.preBetList)t+=this._brnnModel.preBetList[e];return t},i.prototype.betShow=function(e){var i=e.code,o=e.bets,n=o.length>1?!0:!1,s=this._brnnModel.limitBet[this._brnnModel.BetRegion];if(0!=i){if(this._brnnModel.checktext||(this._view._loginBtn.ConserBet.enabled=!0,this._view.enabledConfirmBet()),i==t.BetResultCode.BetErrorOutLimitMin)return void t.conFun.textReminder(i,App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money));if(i==t.BetResultCode.BetErrorOutLimitMax){if(n)t.conFun.textReminder(i);else{var r=this._brnnModel.betList[this._brnnModel.BetRegion];r>=s.limit_max_money?t.conFun.textReminder(i,App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money)):(this._brnnModel.limitBetMoney=s.limit_max_money-r,this._brnnPopupView._prompt.showPrompt(t.BetResultPopupConst.OutLimitMax,App.CommonUtils.money(this._brnnModel.limitBetMoney),App.CommonUtils.money(s.limit_min_money),App.CommonUtils.money(s.limit_max_money)))}return}return i==t.BetResultCode.BetErrorNoEnoughMoney?void this._brnnPopupView._prompt.showPromptBrnn(t.BetResultPopupConst.NoEnoughMoney):void t.conFun.textReminder(i)}for(var a=0;a<e.bets.length;a++){var h=e.bets[a].place,l=e.bets[a].bet_money,p=Math.floor(l/1e4);App.CommonUtils.money2Str(l),e.bets[a].chart_id;this._view.createFlyCoin(t.BrnnPlayerConst.SELF,h,l),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(p):t.conFun.Brnn2counterBet(p)}var c=this._brnnModel._chipMoney[this._brnnModel.chipitem];0==c&&(this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?t.conFun.Brnn1counterBet(c):t.conFun.Brnn2counterBet(c)),this._brnnModel.UserMoney=e.balance,this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney)),this._brnnModel.predict=[],this._brnnModel.isRepeat=!1,this._brnnModel.isPredict=!1,this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet();for(var u=0;4>u;u++)this._view["setMoney"+u].text="",this._brnnModel.preBetList[u]=0},i.prototype.confirmBet=function(){var e=[];for(var i in this._brnnModel.preBetList){var o=this._brnnModel.preBetList[i];if(o){var n=t.conFun.createSkin(o),s={place:Number(i),bet_money:o,table_id:this._brnnModel.tableId,chart_id:n};e.push(s),e.length>1&&(this._brnnModel.isPredict=!0)}}if(e.length>0){var r={bets:e,table_id:this._brnnModel.tableId};this._proxy.requestBet(r)}this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonconfirm"):R.sendPlayerAction("Brnn2operate_buttonconfirm")},i.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3");for(var e=0;4>e;e++)this._view["setMoney"+e].text="",this._brnnModel.preBetList[e]=0;this._brnnModel.predict=[],this._brnnModel.allsetMoney=0,this._view._loginBtn.ConserBet.enabled=!1,this._view.disabledConfirmBet(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttoncancel"):R.sendPlayerAction("Brnn2operate_buttoncancel")},i.prototype.repeatBet=function(){if(this._brnnModel.upperBureauchip.length){this._brnnModel.upperBureauchip.length>1&&(this._brnnModel.isRepeat=!0);for(var e=0;e<this._brnnModel.upperBureauchip.length;e++){var i=this._brnnModel.upperBureauchip[e];if(this.isLimit(i.place,i.bet_money))return}if(this._brnnModel.checktext)this.autoBet(this._brnnModel.upperBureauchip);else{for(var o=this._brnnModel.upperBureauchip,n=0;n<o.length;n++){var s=o[n];this.Betpost(s.place,s.bet_money)}this._view.showMyPreBet(this._brnnModel.preBetList)}}this._brnnModel.isLottery==t.BrnnGameTypeConst.Classic?R.sendPlayerAction("Brnn1operate_buttonrepeat"):R.sendPlayerAction("Brnn2operate_buttonrepeat")},i.prototype.showhandPost=function(t){this._view._jeButton.ShowHandlightBtn(),this._brnnModel.chipitem=t},i.prototype.betOver=function(){this.betOverCallback(),this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery||this._view.playAni(1)},i.prototype.betOverCallback=function(){this._brnnModel.predict=[],this._brnnModel.idBet=!1,this._brnnPopupView._prompt.closePoput(),this._view.cleanIssueTime(),this._view.stopRegion(),this._brnnModel.allsetMoney=0,this._view._loginBtn.betAsh(),this._view.disabledRepeatBet(),this._brnnModel.readyeachMoney=0,this._brnnModel.upperBureauchip.length=0,this._brnnModel.upperBureauchip=[],this._brnnModel.upperBureauchip=[].concat(this._brnnModel.truebet);for(var t=0;4>t;t++)this._view["setMoney"+t].text="",this._brnnModel.preBetList[t]=0,this._brnnModel.betList[t]=0},i.prototype.next=function(){this._view.cleanOpenAndTurnPoker(),this._view.initializationcardPos(),this._view.resetBetMoney(),this._view.clearCoin(),this._view.clearstate3(),this._view.cleanSettlementEffect(),this._brnnModel.idBet=!1,this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[]},i.prototype.totalbet=function(e,i){var o=t.conFun.createSkin(App.CommonUtils.money(e)),n={place:i,bet_money:e,table_id:this._brnnModel.tableId,chart_id:o};n.bet_money>0&&this._brnnModel.truebet.push(n),this._brnnModel.allMoney+=e},i.prototype.setallbet=function(){this._brnnModel.allsetMoney=0,this._brnnModel.predict=[];for(var e=0,i=0;4>i;i++){var o=this._brnnModel.preBetList[i];e=t.conFun.createSkin(o);var n={place:i,bet_money:o,table_id:this._brnnModel.tableId,chart_id:e};n.bet_money>0&&this._brnnModel.predict.push(n),this._brnnModel.allsetMoney+=o}},i.prototype.gamehui=function(){var t=Number(App.CommonUtils.money2Str(this._brnnModel.UserMoney));if(!(0>=t))for(var e=this._brnnModel._chipMoney,i=0;i<e.length;i++){var o=e[i];t>=o&&this._view._jeButton.chiplight(i)}},i.prototype.setRecordInit=function(t){var e=this._brnnModel.issueId,i=t,o={issue:e,hit_money:i};this._brnnModel.recordList.unshift(o),this._brnnModel.changerecordList()},i.prototype.resetLimitBet=function(){for(var t=0;4>t;t++)this._brnnModel.limitBet[t]=this._brnnModel.limitOldBet[t],this._brnnModel.betList[t]=0},i.prototype.setPlaceLimitBet=function(t,e){this._brnnModel.limitBet[t]=this._brnnModel.limitBet[t]-e+1e4*this._brnnModel.preBetList[t],this._brnnModel.setMoneyLimit[t]=this._brnnModel.setMoneyLimit[t]-e+1e4*this._brnnModel.preBetList[t]},i.prototype.refreshMoney=function(){this._view.setUserBet(0),this._view.setUserMoney(App.CommonUtils.money2Str(this._brnnModel.UserMoney));for(var t in this._brnnModel.specialMoney){var e=App.CommonUtils.money2Str(this._brnnModel.specialMoney[t]);Number(e)>0&&this._view.specialPlayerMoney(e,t)}},i.prototype.isEnabledBtn=function(){this._brnnModel.upperBureauchip.length?this._view.enabledRepeatBet():this._view.disabledRepeatBet()},i.prototype.initDesktopData=function(){this._view.cleanOpenAndTurnPoker(),this._view.cleanSettlementEffect(),this._brnnModel.clearModelData(),this._view.clearball(),this._view.clearCoin(),this._view.initializationcardPos(),App.TimerManager.removeAll(this),this._view.resetBetMoney(),this._brnnModel.truebet.length=0,this._brnnModel.truebet=[],this._brnnModel.upperBureauchip.length=0,this._brnnModel.upperBureauchip=[],this._brnnModel.recordList.length=0,this._view.cleanTweenAN(),this._view.time.cleanIssueTime(),this._view.initCoinBox(),this._brnnModel._isFlylist.length=0,this._brnnModel._isFlylist=[],this._view.stopshuffle(),common.CoinFactory.i.clear(),this._view.setCoordinate(t.ControllerCon.Overweight.yy,t.ControllerCon.Overweight.index,t.ControllerCon.Overweight.isEnd)},i.prototype.recoveryChip=function(e){var i=this._brnnModel._allBetPos;if(i.length&&this._brnnModel.isLottery==t.BrnnGameTypeConst.Lottery&&200>=e){for(var o=0;o<i.length;o++)for(var n=i[o],s=0;5>s;s++)this._view.createWinChip(n,6);this._view.chipFlyColumnLottery()}},i.prototype.destroy=function(){e.prototype.destroy.call(this),Log.trace("brnn销毁Controller"),common.StarExpand.cleanFormPool(),common.comBones.cleanFormPool(),t.BrnnBones.cleanFormPool(),App.TimerManager.removeAll(this),this._brnnPopupView.destroy(),this._proxy.destroy(),this._view.destroy(),this._brnnModel.destroy(),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.next(),this.betOverCallback(),this._view=void 0,this._proxy=void 0,this._gameSet=void 0,this._brnnPopupView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"brnn.GameController")}(brnn||(brnn={}));var brnn;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.checktext=!0,i.allsetMoney=0,i.initData(),i.initDataNotify(),i}return __extends(e,t),e.prototype.initData=function(){this.userId=0,this.UserMoney=0,this.checktext=!0,this.chipitem=0,this.ExchangeMoney=0,this.winBalance=0,this.upperBureauchip=[],this.readyeachMoney=0,this.allMoney=0,this.truebet=[],this._chipNum=[],this._chipMoney=[],this._winPos=[],this._winpleNum=[],this._winLightPos=[],this._online=0,this.showMoney=0,this.BetRegion=0,this.idBet=!1,this._isFlylist=[],this._specialPlayer=[],this._allBetPos=[],this.setMoneyLimit={},this._betInfoNotify=[0,0,0,0],this._multiple=1,this.isLottery=0,this.recordList=[],this.tableId=103,this.gameChartList={},this.ballList=[],this.issueId=0,this.betList={},this.limitOldBet={},this.limitBet=[],this.predict=[],this.preBetList={},this.isRepeat=!1,this.isPredict=!1,this.oldIimitMoney=0,this.limitBetMoney=0,this.statusTime=0,this.isFly=!1,this.specialMoney={},this.statusType=0,this.multipleTableId=1,this.isBackstage=!1,this.curIssue=null,this.lastIssue=null,this.isRecoverChip=!1,this.hitRate=null},e.prototype.initDataNotify=function(){},e.prototype.changeGameChartList=function(){for(var t in this.gameChartList)this.gameChartList[t].length>9&&this.gameChartList[t].splice(0,1)},e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.clearModelData=function(){this.initData()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"brnn.GameModel")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getModel=function(){return this._model},i.prototype.onEnterGame=function(e){Log.trace("收到进入游戏消息:",e),this.applyFunc(t.BrnnCallBackConst.Const_onEnterGameCallBack,e)},i.prototype.onIssueNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onIssueNotifyBack,e)},i.prototype.onLimitNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onLimitNotifyBack,e)},i.prototype.onStateNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onStateNotifyyBack,e)},i.prototype.onExchangeNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onExchangeNotifyBack,e)},i.prototype.onBetResponse=function(e){App.EasyLoading.hideLoading(),this.applyFunc(t.BrnnCallBackConst.onBetResponseBack,e)},i.prototype.onPlayerBetInfoNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onPlayerBetInfoNotifyBack,e)},i.prototype.onGameBetInfoNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onGameBetInfoNotify,e)
},i.prototype.onOnLineNum=function(e){this.applyFunc(t.BrnnCallBackConst.onOnlineNumCallBack,e)},i.prototype.onChartNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onChartNotifyBack,e)},i.prototype.onGameResultNotify=function(e){this.applyFunc(t.BrnnCallBackConst.onGameResultNotifyBack,e)},i.prototype.onWinningRecordRes=function(e){this.applyFunc(t.BrnnCallBackConst.onWinningRecordResBack,e)},i.prototype.onrankinglistres=function(e){this.applyFunc(t.BrnnCallBackConst.onrankinglistresBack,e)},i.prototype.onSpecialPlayerResBack=function(e){Log.log("onSpecialPlayerResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player,e.special_player)},i.prototype.onSpecialPlayerActionResBack=function(e){Log.log("onSpecialPlayerActionResBack",e),e.table_id==this.getModel().tableId&&this.applyFunc(t.ControllerCon.Special_Player_Action,e)},i.prototype.onChipsRecordNotifyBack=function(e){if(Log.log("onChipsRecordNotifyBack",e),e.table_id==this.getModel().tableId){if(e.chips){var i=JSON.parse(e.chips);this.getModel()._chipNum=i}this.applyFunc(t.ControllerCon.Chips_Record_Notify)}},i.prototype.onIssueHistoryResBack=function(e){Log.log("onIssueHistoryResBack",e),e.table_id==this.getModel().tableId&&e.infos.length&&(t.ControllerCon.newIssueId=e.infos[0].issue_id,this.applyFunc(t.ControllerCon.getIssueHistory,e.infos)),App.EasyLoading.hideLoading()},i.prototype.onGameChartResBack=function(e){Log.log("onGameChartResBack",e),this.applyFunc(t.ControllerCon.createGameHallChart,e),App.EasyLoading.hideLoading()},i.prototype.onGameStatusNotifyBack=function(e){Log.log("onGameStatusNotifyBack",e),this.applyFunc(t.ControllerCon.changeGamestaus,e)},i.prototype.onGameChartNotifyBack=function(e){Log.log("onGameChartNotifyBack",e),this.applyFunc(t.ControllerCon.changeGameChart,e)},i.prototype.onEnterTableResBack=function(e){Log.log("onEnterTableResBack",e),e.is_success&&(this.getModel().tableId=e.table_id_new,this.getModel().isLottery=e.table_type,this.applyFunc(t.ControllerCon.getEnterTableRes,e),App.EasyLoading.hideLoading())},i.prototype.onStateTimeRes=function(e){Log.log("onStateTimeResBack",e),this.applyFunc(t.BrnnCallBackConst.onStateTimeResBack,e)},i.prototype.onAbnormalNotify=function(t){Log.log("onAbnormalNotify",t),!t},i.prototype.onHitRateRes=function(e){Log.log("onHitRateResBack",e),this.applyFunc(t.BrnnCallBackConst.onHitRateResBack,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ControllerCon.NET_MSG.ENTER_GAME_R,this.onEnterGame,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_NOTIFY,this.onIssueNotify,this),this.addListener(t.ControllerCon.NET_MSG.LIMIT_NOTIFY,this.onLimitNotify,this),this.addListener(t.ControllerCon.NET_MSG.STATENOTIFY,this.onStateNotify,this),this.addListener(t.ControllerCon.NET_MSG.EXCHANGE_NOTIFY,this.onExchangeNotify,this),this.addListener(t.ControllerCon.NET_MSG.BET_RESPONSE,this.onBetResponse,this),this.addListener(t.ControllerCon.NET_MSG.PLAYER_BET_INFONOTIFY,this.onPlayerBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_BET_INFO_NOTIFY,this.onGameBetInfoNotify,this),this.addListener(t.ControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.ControllerCon.NET_MSG.CHART_NOTIFY,this.onChartNotify,this),this.addListener(t.ControllerCon.NET_MSG.GAME_RESULT_NOTIFY,this.onGameResultNotify,this),this.addListener(t.ControllerCon.NET_MSG.WIN_RECORD_RES,this.onWinningRecordRes,this),this.addListener(t.ControllerCon.NET_MSG.RANKING_LIST_RES,this.onrankinglistres,this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_RES,this.onSpecialPlayerResBack,this),this.addListener(t.ControllerCon.NET_MSG.SPECIAL_PLAYER_ACTION_RES,this.onSpecialPlayerActionResBack,this),this.addListener(t.ControllerCon.NET_MSG.CHIPS_RECORD_NOTIFY,this.onChipsRecordNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ISSUE_HISTORY_RES,this.onIssueHistoryResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_RES,this.onGameChartResBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_STATUS_NOTIFY,this.onGameStatusNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.HALL_CHART_NOTIFY,this.onGameChartNotifyBack,this),this.addListener(t.ControllerCon.NET_MSG.ENTER_TABLE_RES,this.onEnterTableResBack,this),this.addListener(t.ControllerCon.NET_MSG.STATE_TES,this.onStateTimeRes,this),this.addListener(t.ControllerCon.NET_MSG.ABNORMAL_NOTIFY,this.onAbnormalNotify,this),this.addListener(t.ControllerCon.NET_MSG.HIT_RATE_RES,this.onHitRateRes,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ControllerCon.NET_MSG.ME_BET,e)},i.prototype.winRecord=function(e){this.send(t.ControllerCon.NET_MSG.WIN_RECORD_REQ,e)},i.prototype.ranking=function(e){this.send(t.ControllerCon.NET_MSG.RANKING_LIST_REQ,e)},i.prototype.chartlist=function(e){this.send(t.ControllerCon.NET_MSG.CHART_REQ,e)},i.prototype.requestChip=function(e){this.send(t.ControllerCon.NET_MSG.CHIPS_RECORD_REQ,e)},i.prototype.requestHallHistoryReq=function(e){this.send(t.ControllerCon.NET_MSG.ISSUE_HISTORY_REQ,e)},i.prototype.getGameChart=function(e){this.send(t.ControllerCon.NET_MSG.SWITCH_TABLE_REQ,e)},i.prototype.requestDesk=function(e){this.send(t.ControllerCon.NET_MSG.ENTER_TABLE_REQ,e)},i.prototype.requestRemainTime=function(){this.send(t.ControllerCon.NET_MSG.STATE_TEQ,{table_id:this.getModel().tableId})},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"brnn.GameProxy")}(brnn||(brnn={}));var brnn;!function(t){var e=function(){function e(){}return e.setBrnnHitRate=function(t){e.hitRate=t},e.getBrnnHitRate=function(){return e.hitRate},e.catName=function(t){for(var e=t.toString().split(""),i=[],o=0;o<e.length;o++)i.push(Number(e[o]));return i},e.chipArr=function(t){for(var e=[],i=[],o={},n=0;n<t.length;n++)0!=t[n]&&(o={digit:t[n],bit:n},e.push(o)),i=e.length>=3?e.slice(0,3):e;return i},e.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},e.createSkin=function(t){return 10>t?0:100>t?3:1e3>t?6:1e4>t?8:1e5>t?4:t>=1e5?9:void 0},e.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},e.textReminder=function(e,i,o){var n=null;switch(e){case t.BetResultCode.BetErrorPlace:n="下注位置错误";break;case t.BetResultCode.BetErrorMoney:n="下注金额异常";break;case t.BetResultCode.BetErrorState:n="非投注阶段，请稍后";break;case t.BetResultCode.BetErrorOutLimitMin:n="当前投注限红为"+i+"~"+o;break;case t.BetResultCode.BetErrorOutLimitMax:n=o?"当前投注限红为"+i+"~"+o:"超过限红，投注失败";break;case t.BetResultCode.BetErrorOutLimitTotal:n="当前投注项已达到总限红,投注失败!";break;case t.BetResultCode.BetErrorNoEnoughMoney:n="没有足够的余额";break;case t.BetResultCode.BetErrorNULL:n="下注为空"}App.ScrollTxtTips.showTip(n)},e.Brnn1counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_pick1");break;case 5:R.sendPlayerAction("Brnn1counter_pick5");break;case 10:R.sendPlayerAction("Brnn1counter_pick10");break;case 20:R.sendPlayerAction("Brnn1counter_pick20");break;case 50:R.sendPlayerAction("Brnn1counter_pick50");break;case 100:R.sendPlayerAction("Brnn1counter_pick100");break;case 200:R.sendPlayerAction("Brnn1counter_pick200");break;case 500:R.sendPlayerAction("Brnn1counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn1counter_pick1000");break;case 0:R.sendPlayerAction("Brnn1counter_pickAllin")}},e.Brnn2counterPick=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_pick1");break;case 5:R.sendPlayerAction("Brnn2counter_pick5");break;case 10:R.sendPlayerAction("Brnn2counter_pick10");break;case 20:R.sendPlayerAction("Brnn2counter_pick20");break;case 50:R.sendPlayerAction("Brnn2counter_pick50");break;case 100:R.sendPlayerAction("Brnn2counter_pick100");break;case 200:R.sendPlayerAction("Brnn2counter_pick200");break;case 500:R.sendPlayerAction("Brnn2counter_pick500");break;case 1e3:R.sendPlayerAction("Brnn2counter_pick1000");break;case 0:R.sendPlayerAction("Brnn2counter_pickAllin")}},e.Brnn1counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn1counter_bet1");break;case 5:R.sendPlayerAction("Brnn1counter_bet5");break;case 10:R.sendPlayerAction("Brnn1counter_bet10");break;case 20:R.sendPlayerAction("Brnn1counter_bet20");break;case 50:R.sendPlayerAction("Brnn1counter_bet50");break;case 100:R.sendPlayerAction("Brnn1counter_bet100");break;case 200:R.sendPlayerAction("Brnn1counter_bet200");break;case 500:R.sendPlayerAction("Brnn1counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn1counter_bet1000");break;case 0:R.sendPlayerAction("Brnn1counter_betallin")}},e.Brnn2counterBet=function(t){switch(t){case 1:R.sendPlayerAction("Brnn2counter_bet1");break;case 5:R.sendPlayerAction("Brnn2counter_bet5");break;case 10:R.sendPlayerAction("Brnn2counter_bet10");break;case 20:R.sendPlayerAction("Brnn2counter_bet20");break;case 50:R.sendPlayerAction("Brnn2counter_bet50");break;case 100:R.sendPlayerAction("Brnn2counter_bet100");break;case 200:R.sendPlayerAction("Brnn2counter_bet200");break;case 500:R.sendPlayerAction("Brnn2counter_bet500");break;case 1e3:R.sendPlayerAction("Brnn2counter_bet1000");break;case 0:R.sendPlayerAction("Brnn2counter_betallin")}},e.hitRate=null,e.brnn1betseast=["Brnn1bets_east","Brnn1bets_south","Brnn1bets_west","Brnn1bets_north"],e.brnn2betseast=["Brnn2bets_east","Brnn2bets_south","Brnn2bets_west","Brnn2bets_north"],e.data1=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,0,0,1,1,0],place:1},{is_win:[0,1,1,0,0,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:7,state:2,table:1,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:6,state:1,table:3,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:8,state:1,table:4,isLottery:0},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:9,state:1,table:5,isLottery:0}],e.data2=[{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:0,isLottery:1},{charts:[{is_win:[0,1,1,1,0],place:0},{is_win:[0,0,1,1,0],place:1},{is_win:[0,1,0,1,0],place:2},{is_win:[0,1,1,1,0],place:3}],time:8,state:1,table:1,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0,1,0],place:0},{is_win:[0,1,0,0,1,1,0,1,1],place:1},{is_win:[0,1,1,0,0,1,1,0,1],place:2},{is_win:[0,1,1,0,1,0,1,0,1],place:3}],time:5,state:1,table:2,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:3,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:4,isLottery:1},{charts:[{is_win:[0,1,1,0,1,1,0],place:0},{is_win:[0,1,1,0,1,1,0],place:1},{is_win:[0,1,1,0,1,1,0],place:2},{is_win:[0,1,1,0,1,1,0],place:3}],time:10,state:1,table:5,isLottery:1}],e.data3=[{charts:[{is_win:[0,1,1,0],place:0},{is_win:[0,1,1,0],place:1},{is_win:[0,1,1,0],place:2},{is_win:[0,1,1,0],place:3}],time:10,state:1}],e}();t.conFun=e,__reflect(e.prototype,"brnn.conFun")}(brnn||(brnn={}));var brnn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"brnn","GameSkin")||this;return i.coinBox=[],i.winpos=[],i._posList={},i.chiparr={},i._currentSecond=0,i._cardflaylist=[],i.spotanim=null,i._approach=null,i.allChipFlyList=[],i.allChipList=[],i._mPlace={},i._mResultPoint=new egret.Point,i.time.initComponent(t),i._loginBtn.initComponent(t),i._jeButton.initComponent(t),i._toolBar.initComponent(t),i._messageInfo.initComponent(t),i._brnnCardView.initComponent(t),i._brnnPlaceIsWin.initComponent(t),i._betAnimation.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t;var i=this;this._mMoudel._chipid=this._mMoudel._chipNum[0],this._messageInfo.setPluteLelf(),this._toolBar.setOnlineLelf(),App.OffsetLeft(this.flyLelfFive),this._messageInfo.initInfo(),this.flyCoordinate(),this.starvisible(),this._loginBtn.betAsh(),this._posList=[];for(var o=this.MenuBox.getChildAt(1),n=0;10>n;n++)this._posList[n]={x:o.x+28.66*n,y:o.y};for(var s=0;6>s;s++)this.chiparr["0_"+this.setbetArrNum(s)]=[],this.chiparr["1_"+this.setbetArrNum(s)]=[],this.chiparr["2_"+this.setbetArrNum(s)]=[],this.chiparr["3_"+this.setbetArrNum(s)]=[],this.chiparr["4_"+this.setbetArrNum(s)]=[],this.chiparr["5_"+this.setbetArrNum(s)]=[];this._loginBtn.open(),this.initBroadcast(this),i.changeTablebtnEffect(),i._toolBar.reChargeEffect(),this.btnRedPacket2=lobby.RedPackBone.create(),this.btnRedPacket2.init(),this.dealspot.addChild(this.btnRedPacket2),this.btnRedPacket2.x=-10,this.btnRedPacket2.y=20,this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0},i.prototype.setbetArrNum=function(t){var e=0;switch(t){case 0:e=0;break;case 1:e=2;break;case 2:e=5;break;case 3:e=8;break;case 4:e=4;break;case 5:e=9}return e},i.prototype.displayUI=function(){this._mMoudel.isLottery==t.BrnnGameTypeConst.Classic?(this._classic.visible=!0,this._lottery.visible=!1,this.lotteryClick.visible=!1,this.closeDiceAnimation(),this.lotteryhead.visible=!1):(this._classic.visible=!1,this._lottery.visible=!0,this.lotteryClick.visible=!1,this.lotteryhead.visible=!1),this.tableOdds(),this.time.stopTimeType=this._mMoudel.isLottery},i.prototype.tableOdds=function(){for(var e=t.conFun.getBrnnHitRate(),i=0;4>i;i++)this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery?this["_odds"+i].text="x2":this._mMoudel.multipleTableId==t.BrnnmultipleConst.OrdinaryMultiple?this["_odds"+i].text=null==e?"":"x"+e:this["_odds"+i].text=""},i.prototype.setGameScene=function(t){this.gameScene.text=t},i.prototype.setCurrentIssue=function(t){this.currentIssue.text="第 "+t+" 期"},i.prototype.lotteyTimer=function(t){this._currentSecond=0;var e=Math.round(t/1e3);this._currentSecond=e,this.renderLottery(),this.lotteryClick.visible=!0,App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.renderLottery=function(){if(this._currentSecond<3600){var t=this._currentSecond%60,e=Math.floor(this._currentSecond/60);this.timeSecond.text=10>t?"0"+t:""+t,this.timeMinute.text=10>e?"0"+e:""+e}},i.prototype.start=function(){if(this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery){if(this._currentSecond--,this._currentSecond<=3&&this._currentSecond>=1&&App.SoundManager.playEffect("countdown_mp3"),this._currentSecond<0)return this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,void App.TimerManager.removeAll(this);this.renderLottery()}else this.stopTimes()},i.prototype.over=function(){this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,this.lotteryClick.visible=!1,this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&this.applyFunc("onOver")},i.prototype.stopTimes=function(){App.TimerManager.removeAll(this),this._mMoudel.isLottery==t.BrnnGameTypeConst.Lottery&&this._currentSecond>0&&this.applyFunc("onOver"),this._currentSecond=0,this.timeSecond.text=this._currentSecond>=10?this._currentSecond+"":"0"+this._currentSecond,this.lotteryClick.visible=!1},i.prototype.recordCardDisplay=function(e,i){this.clearball(),this._cardflaylist=[];for(var o=this.MenuBox.getChildAt(0),n=this,s=0;s<e.length;s++){var r=new eui.Image;r.source="common_ui_cp"+Number(e[s])+"_png",r.width=28,r.height=29,r.x=o.x+14,r.y=o.y+14.5,r.anchorOffsetX=14,r.anchorOffsetY=14.5,this.MenuBox.addChild(r),this._cardflaylist.push(r)}i==t.BrnnGameState.EXCHANGE?n._mMoudel.isFly?n.colorBallRotate(this._cardflaylist):n.createBall(this._cardflaylist):this.colorBallRotate(this._cardflaylist)},i.prototype.colorBallRotate=function(t){for(var e=0;e<t.length;e++){var i=t[e];egret.Tween.removeTweens(i),egret.Tween.get(i).wait(100*e).to({x:this._posList[e].x+14,y:this._posList[e].y+14.5,rotation:360},300,egret.Ease.sineInOut)}},i.prototype.createBall=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.x=this._posList[e].x+14,i.y=this._posList[e].y+14.5}this.closeDiceAnimation()},i.prototype.dropCard=function(e,i){var o=this;if(this._cardflaylist.length){this._cardflaylist.reverse();for(var n=function(){var n=s._cardflaylist[r];egret.Tween.removeTweens(n),i==t.BrnnGameState.EXCHANGE?R.setTimeOnce(function(){o._mMoudel.isFly?(egret.Tween.get(n).wait(100*r).to({y:200,alpha:0},300,egret.Ease.sineInOut),R.setTimeOnce(function(){o.recordCardDisplay(e,i)},o,1200)):(n.alpha=0,o.recordCardDisplay(e,i))},s,16):(egret.Tween.get(n).wait(100*r).to({y:200,alpha:0},300,egret.Ease.sineInOut),R.setTimeOnce(function(){o.recordCardDisplay(e,i)},o,1200))},s=this,r=0;r<this._cardflaylist.length;r++)n()}else this.recordCardDisplay(e,i)},i.prototype.clearball=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&(egret.Tween.removeTweens(e),e.parent.removeChild(e))}this._cardflaylist=[]}},i.prototype.createspot=function(){this.spotanim||(this.spotanim=new t.BrnnBones,this.lotteryhead.addChild(this.spotanim)),this.lotteryhead.visible=!0,this.spotanim.updateId("spot");var e=this.lotteryhead.getChildAt(0).x+105,i=this.lotteryhead.getChildAt(0).y+13;this.spotanim.setPosition(e,i),this.spotanim.play(999)},i.prototype.closeDiceAnimation=function(){this.spotanim&&this.spotanim.stopGame(),this.lotteryhead.visible=!1},i.prototype.setUserMoney=function(t){this._messageInfo.setUserMoney(t)},i.prototype.createChip=function(t){this._jeButton.createChip(t)},i.prototype.setBtnChip=function(t){this._jeButton.setBtnChip(t)},i.prototype.enableBtn=function(){this._jeButton.enableBtn()},i.prototype.avatarShake=function(t){this._messageInfo.avatarShake(t)},i.prototype.setInformation=function(t){var e=t.nick_name,i="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),o=App.CommonUtils.money(t.balance),n=t.play_role;this._messageInfo.setPluteImage(i,n),this._messageInfo.setPluteName(e,n),this.specialPlayerMoney(o,n),this._messageInfo.playerDisplay(n)},i.prototype.specialPlayerMoney=function(t,e){this._messageInfo.specialPlayerMoney(t,e)},i.prototype.playerWinMoney=function(t,e){this._messageInfo.playerWinMoney(t,e)},i.prototype.getMoneyLight=function(t){this._messageInfo.getMoneyLight(t)},i.prototype.getAllMoneyLight=function(){this._toolBar.getAllMoneyLight()},i.prototype.disabledRepeatBet=function(){this._loginBtn.disabledRepeatBet()},i.prototype.enabledRepeatBet=function(){this._loginBtn.enabledRepeatBet()},i.prototype.playAni=function(t){this._betAnimation.playAni(t)},i.prototype.changeTablebtnEffect=function(){this._approach||(this._approach=new t.BrnnBones,this._changeTable.addChild(this._approach)),this._approach.updateId("table"),this._approach.play(0)},i.prototype.closeConfirmFrame=function(){this._loginBtn.closeConfirmFrame()},i.prototype.disabledConfirmBet=function(){this._loginBtn.disabledConfirmBet()},i.prototype.enabledConfirmBet=function(){this._loginBtn.enabledConfirmBet()},i.prototype.setCoordinate=function(t,e,i){this._loginBtn.setCoordinate(t,e,i)},i.prototype.cancel1=function(){this.applyFunc("cancelone")},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this);App.CommonUtils.effectButton(this.trendps,this.opentrendps,this),this._changeTable.addEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=0;4>t;t++)this["rectTouch"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this);App.CommonUtils.removeButton(this.trendps),this._changeTable.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.brnnChangeTable,this),this.IssueLottery.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOpenRecord,this),this._lotteryHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryHelp,this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.closePopup=function(){this._loginBtn._closeUI.visible=!0},i.prototype.stopRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!1},i.prototype.startRegion=function(){for(var t=0;4>t;t++)this["rectTouch"+t].touchEnabled=!0},i.prototype.setchipValue=function(t){this._jeButton.setchipValue(t)},i.prototype.getChipValue=function(t){this._jeButton.getChipValue(t)},i.prototype.onlineShake=function(){this._toolBar.onlineShake()},i.prototype.newPoker=function(){this._brnnCardView.newPoker()},i.prototype.directDisplayFapai=function(){this._brnnCardView.directDisplayFapai()},i.prototype.directFapai=function(){this._brnnCardView.directFapai()},i.prototype.initializationcardPos=function(){this._brnnCardView.initializationcardPos()},i.prototype.clearPoker=function(){this._brnnCardView.clearPoker()},i.prototype.numShake=function(t){var e=this["betMoney"+t];egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},i.prototype.resetAllBet=function(){for(var t=0;t<this._mMoudel._betInfoNotify.length;t++)this._mMoudel._betInfoNotify[t]=0},i.prototype.setUserBet=function(t){this._messageInfo.setUserBet(t)},i.prototype.setMulUserBet=function(t,e){this._messageInfo.setMulUserBet(t,e)},i.prototype.resetBetMoney=function(){this._messageInfo.resetBetMoney()},i.prototype.initCoinBox=function(){this.coinBox.length=0,this.coinBox=[];for(var t=0;4>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.showBetMoney=function(e){for(var i=0;i<e.length;i++){var o=e[i],n=o.total_bet_money,s=Math.floor(o.total_bet_money/1e4),r=n-this._mMoudel._betInfoNotify[o.place];this["betMoney"+o.place].text=Math.floor(App.CommonUtils.money(o.total_bet_money)),n>0&&(this.showCoin(o.place,s),this.onlineShake(),-1==this._mMoudel._allBetPos.indexOf(o.place)&&this._mMoudel._allBetPos.push(o.place),r>0&&(this.numShake(o.place),this._mMoudel.statusType==t.BrnnGameState.BETTING&&this.createFlyCoin(t.BrnnPlayerConst.ONLINE,o.place,r))),this._mMoudel._betInfoNotify[o.place]=o.total_bet_money}},i.prototype.showCoin=function(e,i){var o=t.conFun.getNumObj(i),n=Object.keys(o),s=this["regionlist"+e].$children[0],r=this["regionlist"+e].$children[1],a=this["regionlist"+e].$children[2];this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),4>e&&(n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0))},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_t_9_png",n=1e5;break;case"w":s="common_ui_t_4_png",n=1e4;break;case"q":s="common_ui_t_8_png",n=1e3;break;case"b":s="common_ui_t_5_png",n=100;break;case"s":s="common_ui_t_2_png",n=10;break;case"g":s="common_ui_t_0_png",n=1}for(var r=0,a=-100,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}for(var u,d=function(){0==o._currentY?h=0:m.randomNum()>.65?(u=m.randomNum(),h=u>.5?2.5:-2.5):h=0;var t=m;egret.Tween.get(l[y]).wait(150*y).to({y:o._currentY,x:h},150).call(function(){App.SoundManager.playEffect("betcoin_mp3")},m),function(e){App.TimerManager.doTimer(150*e,1,function(){l[e].alpha=1},t)}(y),o._currentY-=5},m=this,y=0;y<l.length;y++)d()},i.prototype.randomNum=function(){return Math.random()},i.prototype.flyBetMoney=function(){this._mMoudel.BetRegion},i.prototype.createFlyCoin=function(e,i,o,n){var s=App.CommonUtils.money(o);if(s){var r=s.toFixed(),a=this.createChipNum(r),h=Number(r[0]),l=this.winpos[e],p=this["regionlist"+i].globalToLocal(l.x,l.y),c=this.chiparr[e+"_"+a];if(c.length>12)return;for(var u=0;h>u;u++){var d=common.chipBtn.create();this.chiparr[e+"_"+a].push(d),this["regionlist"+i].addChild(d),d.init(a,t.ControllerCon.smallChip),d.scaleX=1,d.scaleY=1,d.x=p.x,d.y=p.y,d.alpha=0;var m=this["regionlist"+i].getChildAt(1).x,y=this["regionlist"+i].getChildAt(1).y-150;d.setFlyChipX(m),d.setFlyChipY(y)}this.moveToPlace(this.chiparr[e+"_"+a])}},i.prototype.moveToPlace=function(t){if(t&&t.length){var e=t.pop();e&&(e.alpha=1,e.moveToPlace());var i=this;R.setTimeOnce(function(){i.moveToPlace(t)},this,50)}},i.prototype.removeChips=function(t){for(var e=[0,2,5,8,4,9],i=0;i<e.length;i++){var o=e[i];this.removeChip(this.chiparr[t+"_"+o])}},i.prototype.removeChip=function(t){if(t&&t.length){if(!(t.length>7))return;var e=t.shift();common.chipBtn.release(e),this.removeChip(t)}},i.prototype.removebetFiyChips=function(){for(var t=[0,2,5,8,4,9],e=0;e<t.length;e++)for(var i=t[e],o=0;6>o;o++)if(this.chiparr[o+"_"+i]&&this.chiparr[o+"_"+i].length)for(;this.chiparr[o+"_"+i].length;){var n=this.chiparr[o+"_"+i].pop();n&&(n.cleanTween(),common.chipBtn.release(n))}R.removeTimeOut(this.moveToPlace,this)},i.prototype.createChipNum=function(t){var e,i=[0,2,5,8,4,9];return e=i[t.length-1]},i.prototype.winChipControl=function(t){this.chipFlyColumn(t)},i.prototype.clearCoin=function(){for(var t=0;4>t;t++){this["betMoney"+t].text=0,this["readyMoney"+t].text=0,this["setMoney"+t].text="";for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))}this.clearFlyWinChip(),this._brnnPlaceIsWin.cleanwinAndlose(),this.time.visible=!1,this.starvisible(),this._mMoudel._specialPlayer=[],this._mMoudel._allBetPos=[],this.removebetFiyChips(),this.resetAllBet(),this.chipGroupAlpha(),this._mMoudel.isRecoverChip=!1},i.prototype.clearAllChip=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++)this.removeCoins(this["regionlist"+t].getChildAt(e))},i.prototype.cleanIssueTime=function(){this.time.cleanIssueTime(),this.time.visible=!1},i.prototype.playBetEnd=function(){this.time.playBetEnd()},i.prototype.cleanSettlementEffect=function(){this.closeDiceAnimation(),this._messageInfo.initInfo()},i.prototype.chipFlyColumn=function(t){if(t){this.chipColumn();var e=this._mMoudel._specialPlayer;R.setTimeOnce(function(){this.clearAllChip(),this.flyWinChip(),this.chipStopColumn()},this,150),R.setTimeOnce(function(){for(var t=0;t<e.length;t++)this.getMoneyLight(e[t]);this.getAllMoneyLight()},this,650)}},i.prototype.chipFlyColumnLottery=function(){this.chipColumnLottery(),this.flyChipToBall()},i.prototype.flyChipToBall=function(){this.clearAllChip(),this.flyWinChip(),this.chipStopColumnLottery()},i.prototype.chipColumn=function(){for(var t=this._mMoudel._winPos,e=0;e<t.length;e++){var i=t[e].money,o=t[e].place;if(i>0)for(var n=0;3>n;n++){var s=this["regionlist"+o].getChildAt(n);egret.Tween.get(s).to({alpha:0},120)}}},i.prototype.chipColumnLottery=function(){for(var t=this._mMoudel._allBetPos,e=0;e<t.length;e++)for(var i=t[e],o=0;3>o;o++){var n=this["regionlist"+i].getChildAt(o);egret.Tween.get(n).to({alpha:0},120)}},i.prototype.chipStopColumn=function(){for(var t=this._mMoudel._winPos,e=0;e<t.length;e++){var i=t[e].money,o=t[e].place;if(i>0)for(var n=0;3>n;n++){var s=this["regionlist"+o].getChildAt(n);s.alpha=1}}},i.prototype.chipStopColumnLottery=function(){for(var t=this._mMoudel._allBetPos,e=0;e<t.length;e++)for(var i=t[e],o=0;3>o;o++){var n=this["regionlist"+i].getChildAt(o);n.alpha=1}},i.prototype.chipGroupAlpha=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++){var i=this["regionlist"+t].getChildAt(e);i.visible=!0,i.alpha=1}},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.clearstate3=function(){this.cleanIssueTime(),this.stopRegion();for(var t=0;4>t;t++)this["setMoney"+t].text=""},i.prototype.prepare=function(t,e){this["setMoney"+t].text=e+""},i.prototype.showMyPreBet=function(t){for(var e=0;4>e;e++)this["setMoney"+e].text=t[e]?""+Math.round(App.CommonUtils.money(t[e])):""},i.prototype.getcardsrc=function(t){this._brnnCardView.getcardsrc(t)},i.prototype.kaipaiAnimation=function(t){this._brnnCardView.kaipaiAnimation(t),this._brnnPlaceIsWin.showniuji(t)},i.prototype.directKaipai=function(t){this._brnnCardView.directKaipai(t),this.directniuji(t),this.winloseOpen(t)},i.prototype.winloseOpen=function(t){for(var e=[],i=[],o=!0,n=[],s=[],r=0;4>r;r++){this["bunko"+r];t.place_results[r].is_win?(e.push(r),n.push(t.place_results[r].is_win)):s.push(t.place_results[r].is_win)}e=e.concat(this._mMoudel._allBetPos).sort();for(var a=0;a<e.length;a++)e[a]==e[a+1]&&i.push(e[a]);if(o=i.length?!0:!1,this._mMoudel.isFly){for(var h=0;h<i.length;h++)this.createWinChip(i[h],4);R.setTimeOnce(function(){if(4==n.length||4==s.length){var t=n.length;this.winlossRun(t)}this.applyFunc("openwinPopup",o)},this,200)}else if(4==n.length||4==s.length){var l=n.length;this.directwinloss(l)}},i.prototype.directFontEnlarge=function(t){this._messageInfo.directFontEnlarge(t)
},i.prototype.winlossRun=function(t){this._brnnPlaceIsWin.winlossRun(t)},i.prototype.directwinloss=function(t){this._brnnPlaceIsWin.directwinloss(t)},i.prototype.directniuji=function(t){this._brnnPlaceIsWin.directniuji(t)},i.prototype.createWinChip=function(t,e){for(var i=this["regionlist"+t],o=this["_chipPos"+t],n=this.winpos[e],s=this.cardlist.globalToLocal(n.x,n.y),r=0;5>r;r++){var a=App.MathUtils.random(0,170),h=App.MathUtils.random(0,127),l=common.chipBtn.create();l.init(r),l.setNameNum(e);var p=Math.floor(o.x+a),c=Math.floor(o.y+h),u=Math.floor(s.x),d=Math.floor(s.y);this.cardlist.addChild(l),l.x=i.x+61,l.y=i.y+41.5,l.scaleX=.5,l.scaleY=.5,l.alpha=0,l.setScore(),l.setFlyX(p),l.setFlyY(c),l.setFlyChipX(u),l.setFlyChipY(d),this.allChipList.push(l)}},i.prototype.flyWinChip=function(){for(var t=0;t<this.allChipList.length;t++){var e=this.allChipList[t];e.moveTo()}},i.prototype.clearFlyWinChip=function(){var t=this.allChipList;if(t)for(;t.length;){var e=t.pop();e&&(e.cleanTween(),common.chipBtn.release(e))}},i.prototype.flyCoordinate=function(){for(var t=0;7>t;t++){var e=this["_chip"+t],i=e.x,o=e.y;2==t?(i=App.StageUtils.getWidth()-24,o=App.StageUtils.getHeight()/2-146):3==t?(i=App.StageUtils.getWidth()-24,o=App.StageUtils.getHeight()/2):6==t&&(i=App.StageUtils.getWidth()/2+13);var n=this._chipGroupPos.localToGlobal(i,o);this.winpos.push(n)}},i.prototype.starRun=function(t){var e=this._messageInfo.getPoint(),i=this.getparabolicPoint(t),o=this.getMPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=400+150*t;n.run(e,i,o,s,function(){this["_chipStarPos"+t].visible=!0,this._mPlace[t]=null}.bind(this),this)}},i.prototype.starTrailing=function(e,i){var o=new t.BrnnBones;o.parent||(this.addChild(o),o.updateId("star_0"),o.setPosition(e,i),o.play(1),o.addPlayEndCallBack(function(){o.parent&&(o.stopGame(),o.parent.removeChild(o))},this))},i.prototype.overParabolic=function(t){this["_chipStarPos"+t].visible=!0,App.TimerManager.removeAll(this)},i.prototype.starvisible=function(){for(var t=0;4>t;t++)this["_chipStarPos"+t].visible=!1},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle,this.shuffleGroup.addChild(this.shuffle));var e=this;this.shuffleGroup.visible=!0,this.shuffle.updateId("wash"),this.shuffle.anchorOffsetX=this.shuffle.width/2,this.shuffle.anchorOffsetX=this.shuffle.height/2,this.shuffle.x=StageUtils.getInstance().getWidth()/10*5.2,this.shuffle.y=StageUtils.getInstance().getHeight()/10*6,this.shuffle.scaleX=1,this.shuffle.scaleY=1,this.shuffle.rotation=0,this.shuffle.play(1),this.shuffle.addPlayEndCallBack(function(){e.toMoveCard()},this)},i.prototype.toMoveCard=function(){var t=this;egret.Tween.get(this.shuffle).to({y:0,x:StageUtils.getInstance().getWidth()/10*3,scaleX:0,scaleY:0,rotation:-45},400,egret.Ease.sineInOut).call(function(){t.shuffle&&t.shuffle.parent&&(t.stopshuffle(),t.directDisplayFapai())},this)},i.prototype.stopshuffle=function(){this.shuffle&&(this.shuffle.stopGame(),this.shuffle.removeArmaturePlayEnd(),egret.Tween.removeTweens(this.shuffle)),this.shuffleGroup.visible=!1},i.prototype.clearShuffle=function(){this.shuffle&&(egret.Tween.removeTweens(this.shuffle),this.shuffle.destroy(),this.shuffle=void 0)},i.prototype.touchBtn=function(t){var e=Number(t.currentTarget.name);this.applyFunc("Betpost",e)},i.prototype.opentrendps=function(){this.applyFunc("opentrendps")},i.prototype.brnnChangeTable=function(){App.SoundManager.playEffect("click_mp3");var t=this;egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:this._approach.y},80).call(function(){t.applyFunc("brnnChangeTable")},this)},i.prototype.btnOpenRecord=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("btnOpenRecord")},i.prototype.openLotteryHelp=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("openLotteryHelp")},i.prototype.getMPoint=function(t){var e=this["_chipStarPos"+t],i=this.cardlist.localToGlobal(e.x,e.y);return i},i.prototype.getparabolicPoint=function(t){var e=this["_starParabolic"+t],i=this.cardlist.localToGlobal(e.x,e.y);return i},i.prototype.cleanTweenAN=function(){egret.Tween.removeTweens(this),App.TimerManager.removeAll(this)},i.prototype.cleanOpenAndTurnPoker=function(){this._brnnCardView.cleanOpenAndTurnPoker()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),Log.trace("brnn销毁GameView"),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),this.time.destroy(),this._loginBtn.destroy(),this._jeButton.destroy(),this._toolBar.destroy(),this._brnnCardView.destroy(),this._brnnPlaceIsWin.destroy(),this._messageInfo.destroy(),this._betAnimation.destroy(),this.coinBox.length=0,this.clearFlyWinChip(),this.clearPoker(),common.CoinFactory.i.clear(),this.allChipList=void 0,this._approach&&(egret.Tween.removeTweens(this._approach),this._approach.destroy()),this.spotanim&&this.spotanim.destroy(),this.clearball(),this.removebetFiyChips(),this.clearShuffle(),this.btnRedPacket2&&this.btnRedPacket2.destroy())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"brnn.GameView")}(brnn||(brnn={}));var ddz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.ddz=i,__reflect(i.prototype,"ddz.Entrance.ddz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("ddz.CardTypeBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("ddz.CardTypeBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.CardTypeBones=e,__reflect(e.prototype,"ddz.CardTypeBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"BalanceViewSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.farmerWin=function(){this.visible=!0,this.RecordBg.visible=!0,this.BossWin.visible=!1,this.FarmerWin.visible=!0,this.BoxWinner.visible=!0,this.BoxBalance.visible=!1,this.BoxWinner.alpha=0,egret.Tween.get(this.BoxWinner).to({alpha:1},100)},i.prototype.exchangePoput=function(){this.visible=!0,this.BoxBalance.visible=!0,this.BoxBalance.scaleX=this.BoxBalance.scaleY=0,App.EffectUtils.showUI(this.BoxBalance)},i.prototype.closeExcangePoput=function(){this.BoxBalance.visible=!1;var t=this;App.EffectUtils.hideUI(t.BoxBalance,200,0,function(){t.visible=!1})},i.prototype.setSelfName=function(t){this.UserName.text=t},i.prototype.setSelfHead=function(t){this.UserImage.source=t},i.prototype.setSelfFrame=function(t){this.UserFrame.source=t},i.prototype.setPlayerName=function(t,e){this["UserName_"+t].text=e},i.prototype.setPlayerBaseScore=function(t,e){this["BaseScore_"+t].text=e},i.prototype.setPlayerTimes=function(t,e){this["Times_"+t].text=e},i.prototype.setPlayerMoney=function(t,e){e>0?(this["MoneyAdd_"+t].text=String(e),this["MoneyMinus_"+t].visible=!1,this["MoneyAdd_"+t].visible=!0):(this["MoneyMinus_"+t].text=String(e),this["MoneyAdd_"+t].visible=!1,this["MoneyMinus_"+t].visible=!0)},i.prototype.setPlayerIsBoss=function(t,e){t==e?(this["BossBg_"+t].visible=!0,this["BossHat_"+t].visible=!0):(this["BossBg_"+t].visible=!1,this["BossHat_"+t].visible=!1)},i.prototype.hideWinner=function(){this.BoxWinner.visible=!1},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeExcangePoput,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.BalanceView=e,__reflect(e.prototype,"ddz.BalanceView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardViewSkin")||this;return t.index=0,t.startIndex=-1,t.hoverIndex=-1,t.endIndex=0,t.isDepsit=!1,t.isCardPlayer=!1,t.cardNumber_1=1,t.cardNumber_2=1,t.cardNumberAll_1=0,t.cardNumberAll_2=0,t.openCardIndex_1=0,t.openCardIndex_2=0,t.hoverIndexs=[],t.selectedCards=[],t.cardList=[],t.cardList_1=[],t.cardList_2=[],t.dealCardIndex_1=0,t.dealCardIndex_2=0,t.cardArr=[],t.bottomCardList=[],t.outList_0=[],t.outList_1=[],t.outList_2=[],t}return __extends(i,e),i.prototype.init=function(){this.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.hideBottomBg(),this.hideCardPlayer(),this.GroupOutCardLeft.alpha=0,this.GroupOutCardRight.alpha=0,App.OffsetLeft(this.GroupCard2),App.OffsetLeft(this.GroupShowCard2),App.OffsetLeft(this.GroupCardNum2),App.OffsetLeft(this.GroupOutCardLeft),App.OffsetLeft(this.GroupOpenCard2),App.OffsetLeft(this.CardAniLeftStartPoint),App.OffsetLeft(this.CardAniLeftEndPoint)},i.prototype.showCard=function(t){this.cardList=t,this.GroupCard.removeChildren();var e=this.getCardPoints(this.GroupCard,this.cardList,124,46);this.cardList.forEach(function(t,i){t.scaleX=1,t.scaleY=1,t.x=e[i],t.y=t.isSelected?-30:0,t.add2Stage(this.GroupCard),t.setDeposit(this.isDepsit),t.isDeposit&&t.setDepositMask()}.bind(this))},i.prototype.clearCard=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.clearSeatCard(this.cardList),this.index=0,this.clearSeatCard(this.cardArr);break;case t.DDZPosition.POSITION_RIGHT:this.clearSeatCard(this.cardList_1),this.dealCardIndex_1=0,this.openCardIndex_1=0;break;case t.DDZPosition.POSITION_LEFT:this.clearSeatCard(this.cardList_2),this.dealCardIndex_2=0,this.openCardIndex_2=0}},i.prototype.clearSeatCard=function(e){for(;e&&e.length;){var i=e.pop();t.Poker.realese(i)}},i.prototype.showBottomBg=function(){this.BottomCards.visible=!0},i.prototype.hideBottomBg=function(){this.BottomCards.visible=!1},i.prototype.setCardPlayer=function(t,e){this["CardPlayerNumber_"+e].text=t},i.prototype.showCardPlayer=function(){this.isCardPlayer=!0,this.GroupCardPlayer.visible=!0},i.prototype.hideCardPlayer=function(){this.isCardPlayer=!1,this.GroupCardPlayer.visible=!1},i.prototype.showBtnCardPlayer=function(){this.BtnCardPlayer.visible=!0},i.prototype.hideBtnCardPlayer=function(){this.BtnCardPlayer.visible=!1},i.prototype.setCardDown=function(){this.cardList.length>0&&this.cardList.forEach(function(t){t.isSelected&&(egret.Tween.get(t).wait(1e3).to({y:0},100),App.TimerManager.doTimer(1e3,1,function(){t.setSelected(!1)},this))})},i.prototype.showTableCard=function(t){this.GroupOutCard.removeChildren();var e=this.getCardPoints(this.GroupOutCard,t,111,35);t.forEach(function(t,i){t.x=e[i],t.y=0,t.scaleX=.7,t.scaleY=.7,t.add2Stage(this.GroupOutCard)}.bind(this))},i.prototype.cleanTableCard=function(e){for(var i=this["outList_"+e];i&&i.length>0;){var o=i.pop();t.Poker.realese(o)}},i.prototype.getCardPoints=function(t,e,i,o){var n=[],s=t.width/2-(i/2+o/2*(e.length-1));if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s+o*r;n.push(a)}return n},i.prototype.dealCard=function(t){this.cardList=t,App.TimerManager.doTimer(250,0,this.refresh,this)},i.prototype.refresh=function(){this.index<this.cardList.length?(this.cardArr.push(this.cardList[this.index]),this.index++,this.refreshCard(),App.SoundManager.playEffect("ddz_flipcard_mp3")):App.TimerManager.remove(this.refresh,this)},i.prototype.refreshCard=function(){var t=this.getCardPoints(this.GroupCard,this.cardArr,124,46),e=this.cardArr[this.cardArr.length-1],i=this.GroupCard.numChildren;1>i?e.x=t[0]:e.x=this.GroupCard.getChildAt(i-1).x,e.scaleX=1,e.scaleY=1,e.y=0,e.add2Stage(this.GroupCard);for(var o=0;o<this.GroupCard.numChildren;o++){var n=this.GroupCard.getChildAt(o);egret.Tween.get(n).to({x:t[o]},250)}e.setDeposit(this.isDepsit),e.isDeposit&&e.setDepositMask()},i.prototype.dealOpenCard=function(e,i,o){if(this["dealCardIndex_"+e]=0,this["GroupShowCard"+e].removeChildren(),this["cardList_"+e]=i,this["cardList_"+e].length>0){var n=[];if(this["cardList_"+e].length>1)if(this["cardList_"+e].length>9){var s={x:0,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a=10>r?{x:s.x+25*r,y:0}:{x:s.x+25*(r-10),y:45},n.push(a)}}else if(e==t.DDZPosition.POSITION_RIGHT){var s={x:225,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a={x:s.x-25*r,y:0},n.push(a)}n.reverse()}else{var s={x:0,y:0};n.push(s);for(var r=1;r<this["cardList_"+e].length;r++){var a=void 0;a={x:s.x+25*r,y:0},n.push(a)}}this["cardList_"+e].forEach(function(t,i){t.setSelected(!1),n[i]&&(t.x=n[i].x,t.y=n[i].y),o&&(t.alpha=0),t.addSPokerToStage(this["GroupShowCard"+e])}.bind(this)),o&&(this["cardList_"+e][this["dealCardIndex_"+e]].alpha=1,App.TimerManager.doTimer(250,0,this["deal"+e],this))}},i.prototype.deal1=function(){this.dealCardIndex_1<this.cardList_1.length-1?(this.dealCardIndex_1++,this.cardList_1[this.dealCardIndex_1].alpha=1):App.TimerManager.remove(this.deal1,this)},i.prototype.deal2=function(){this.dealCardIndex_2<this.cardList_2.length-1?(this.dealCardIndex_2++,this.cardList_2[this.dealCardIndex_2].alpha=1):App.TimerManager.remove(this.deal2,this)},i.prototype.showOthersOpenCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!1,this["GroupShowCard"+t].visible=!0},i.prototype.showOthersCards=function(t){this["GroupCard"+t].visible=!0,this["GroupCardNum"+t].visible=!0,this["GroupShowCard"+t].visible=!1},i.prototype.hideOthersCards=function(t){this["GroupCardNum"+t].visible=!1},i.prototype.showOthersCardsNumber=function(t,e){this["CardNum"+t].text=e},i.prototype.dealCardOthers=function(t,e){this["cardNumber_"+t]=0,this["cardNumberAll_"+t]=e,this["CardNum"+t].text=this["cardNumber_"+t],App.TimerManager.doTimer(250,0,this["refreshCardNumber"+t],this)},i.prototype.refreshCardNumber1=function(){this.cardNumber_1<this.cardNumberAll_1?(this.cardNumber_1++,this.CardNum1.text=String(this.cardNumber_1)):App.TimerManager.doTimer(250,0,this.refreshCardNumber1,this)},i.prototype.refreshCardNumber2=function(){this.cardNumber_2<this.cardNumberAll_2?(this.cardNumber_2++,this.CardNum2.text=String(this.cardNumber_2)):App.TimerManager.doTimer(250,0,this.refreshCardNumber2,this)},i.prototype.setCardNumber=function(t,e){this["cardNumberAll_"+t]=e,this["CardNum"+t].text=e},i.prototype.showBottomCard=function(e){this.clearBottomCard(),this.GroupBottomCards.horizontalCenter=0;for(var i=[28,88,148],o=0;3>o;o++){var n=t.Poker.create();n.init(0,0,-1,!1),n.x=i[o],n.y=38,n.scaleX=.45,n.scaleY=.45,n.anchorOffsetX=62,n.anchorOffsetY=82,this.bottomCardList.push(n),n.add2Stage(this.GroupBottomCards)}},i.prototype.openBottomCard=function(t){this.showBottomCard(!1),this.bottomCardList.forEach(function(e,i){egret.Tween.get(e).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){e.setColor(t[i].color),e.setValue(t[i].value),e.setNumber(t[i].number),e.refresh(),egret.Tween.get(e).to({scaleX:.45},200,egret.Ease.sineInOut)}.bind(this))})},i.prototype.clearBottomCard=function(){for(var e=this.bottomCardList;e.length;){var i=e.pop();t.Poker.realese(i)}},i.prototype.deposit=function(){this.isDepsit=!0},i.prototype.cancerDeposit=function(){this.isDepsit=!1},i.prototype.showDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!0),t.setDepositMask(),t.setSelected(!1),t.y=0})},i.prototype.hideDepositMask=function(e){e==t.DDZPosition.POSITION_SELF&&this.cardList.forEach(function(t){t.setDeposit(!1),t.hideDepositMask()})},i.prototype.hoverCard=function(t){this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||this.cardList[t].showMask())}.bind(this))},i.prototype.toggleCardType=function(t){App.SoundManager.playEffect("ddz_s_selectcard_mp3"),this.hoverIndexs.length=0,this.cardList.forEach(function(t){t.isDeposit||t.hideMask()}),t.forEach(function(t){this.cardList[t]&&(this.cardList[t].isDeposit||(this.cardList[t].isSelected?(this.cardList[t].setSelected(!1),this.cardList[t].y=0):(this.cardList[t].setSelected(!0),this.cardList[t].y=-30)))}.bind(this))},i.prototype.showTipCards=function(t){this.cardList.forEach(function(t){t.setSelected(!1)}),t.forEach(function(t){t.setSelected(!0)}),this.showCard(this.cardList)},i.prototype.moveCard=function(t){for(var e=this.getCardPoints(this.GroupCard,t,124,46),i=0;i<t.length;i++)egret.Tween.get(t[i]).to({x:e[i]},200)},i.prototype.showSelfCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_SELF),e.forEach(function(e){var i=t.Poker.create();this.outList_0.push(i),i.init(e.color,e.value,e.number,!1)}.bind(this)),this.showTableCard(this.outList_0)},i.prototype.playCardSelf=function(e){this.cleanTableCard(t.DDZPosition.POSITION_SELF);var i=[];e.forEach(function(t){i.push(t.number)});var o=[];if(this.cardList.forEach(function(t){i.indexOf(t.number)>-1&&(t.setSelected(!0),o.push(t))}.bind(this)),o.length>0){for(var n=0;n<this.cardList.length;n++)this.cardList[n].isSelected&&(this.cardList.splice(n,1),n--);this.moveCardToTable(o),this.moveCard(this.cardList)}},i.prototype.playCard=function(){if(this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cardList.forEach(function(t,e){t.isSelected&&this.selectedCards.push(t)}.bind(this)),this.selectedCards.length>0){for(var e=0;e<this.cardList.length;e++)this.cardList[e].isSelected&&(this.cardList.splice(e,1),e--);this.moveCardToTable(this.selectedCards),this.moveCard(this.cardList)}},i.prototype.moveCardToTable=function(e){if(e.length>0){var i=this.getCardPoints(this.GroupOutCard,e,111,30);i.forEach(function(t,i){var o=this.GroupOutCard.localToGlobal(t,0),n=this.GroupCard.globalToLocal(o.x,o.y);e[i]&&(e[i].hideDepositMask(),egret.Tween.get(e[i]).to({x:n.x,y:n.y,scaleX:.7,scaleY:.7},50))}.bind(this)),App.TimerManager.doTimer(200,1,function(){for(;e.length;){var i=e.pop(),o=t.Poker.create();this.outList_0.push(o),o.init(i.color,i.val,i.number,!1),t.Poker.realese(i)}this.outList_0.reverse(),this.showTableCard(this.outList_0),this.showCard(this.cardList)}.bind(this),this)}},i.prototype.getSelectedCard=function(){var t=[];return this.cardList.forEach(function(e){e.isSelected&&t.push(e)}.bind(this)),t},i.prototype.createTableCard=function(e,i,o){var n=[];if(o==t.DDZPosition.POSITION_RIGHT){this.GroupOutCardRight.right=i;var s=259;if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s-30*r;n.push(a)}n.reverse()}else if(o==t.DDZPosition.POSITION_LEFT){this.GroupOutCardLeft.left=i;var s=0;if(n.push(s),e.length>1)for(var r=1;r<e.length;r++){var a=s+30*r;n.push(a)}}e.forEach(function(e,i){var s=t.Poker.create();s.init(e.color,e.value,e.number,!1),s.x=n[i],s.y=0,s.scaleX=.7,s.scaleY=.7,o==t.DDZPosition.POSITION_RIGHT?(this.outList_1.push(s),s.add2Stage(this.GroupOutCardRight)):o==t.DDZPosition.POSITION_LEFT&&(this.outList_2.push(s),s.add2Stage(this.GroupOutCardLeft))}.bind(this)),o==t.DDZPosition.POSITION_RIGHT?this.GroupOutCardRight.alpha=1:o==t.DDZPosition.POSITION_LEFT&&(this.GroupOutCardLeft.alpha=1)},i.prototype.showRightCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.createTableCard(e,168,t.DDZPosition.POSITION_RIGHT)},i.prototype.playCardRight=function(e){this.cleanTableCard(t.DDZPosition.POSITION_RIGHT);var i=50;if(this.createTableCard(e,58,t.DDZPosition.POSITION_RIGHT),egret.Tween.get(this.GroupOutCardRight).to({right:168,alpha:1},i),this.cardList_1.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var n=[];this.cardList_1.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),n.push(t))}.bind(this));for(var s=0;s<this.cardList_1.length;s++)this.cardList_1[s].isSelected&&(this.cardList_1.splice(s,1),s--);this.dealOpenCard(t.DDZPosition.POSITION_RIGHT,this.cardList_1,!1)}},i.prototype.showLeftCard=function(e){this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.createTableCard(e,this.CardAniLeftEndPoint.left,t.DDZPosition.POSITION_LEFT)},i.prototype.playCardLeft=function(e){this.cleanTableCard(t.DDZPosition.POSITION_LEFT);var i=50;if(this.createTableCard(e,this.CardAniLeftStartPoint.left,t.DDZPosition.POSITION_LEFT),egret.Tween.get(this.GroupOutCardLeft).to({left:this.CardAniLeftEndPoint.left,alpha:1},i),this.cardList_2.length>0){var o=[];e.forEach(function(t){o.push(t.number)});var n=[];this.cardList_2.forEach(function(t){o.indexOf(t.number)>-1&&(t.setSelected(!0),n.push(t))}.bind(this));for(var s=0;s<this.cardList_2.length;s++)this.cardList_2[s].isSelected&&(this.cardList_2.splice(s,1),s--);this.dealOpenCard(t.DDZPosition.POSITION_LEFT,this.cardList_2,!1)}},i.prototype.getOutCard=function(t){return this["outList_"+t]},i.prototype.openCard=function(t,e){if(this["cardList_"+t]=e,e.length>0){var i=[],o={x:0,y:0};if(i.push(o),e.length>1)for(var n=1;n<e.length;n++){var s=void 0;s=10>n?{x:o.x+30*n,y:0}:{x:o.x+30*(n-10),y:48},i.push(s)}e.forEach(function(e,o){e.x=i[o].x,e.y=i[o].y,e.scaleX=.7,e.scaleY=.7,e.alpha=0,e.add2Stage(this["GroupOpenCard"+t])}.bind(this)),this["cardList_"+t][this["openCardIndex_"+t]].alpha=1,App.TimerManager.doTimer(50,0,this["open"+t],this)}},i.prototype.open1=function(){this.openCardIndex_1<this.cardList_1.length-1?(this.openCardIndex_1++,this.cardList_1[this.openCardIndex_1].alpha=1):App.TimerManager.remove(this.open1,this)},i.prototype.open2=function(){this.openCardIndex_2<this.cardList_2.length-1?(this.openCardIndex_2++,this.cardList_2[this.openCardIndex_2].alpha=1):App.TimerManager.remove(this.open2,this)},i.prototype.touchBegin=function(e){this.isDepsit||(this.startIndex=this.checkIndex(e.localX,this.startIndex),this.startIndex>-1&&this.applyFunc(t.EVENT.TOUCH_CARD_BEGIN,this.startIndex))},i.prototype.touchEnd=function(e){this.isDepsit||(this.endIndex=this.checkIndex(e.localX,this.endIndex),this.applyFunc(t.EVENT.TOUCH_CARD_END))},i.prototype.touchMove=function(e){if(!this.isDepsit){this.hoverIndex=this.checkIndex(e.localX,this.hoverIndex),this.hoverIndexs.push(this.hoverIndex);var i=this.hoverIndexs[this.hoverIndexs.length-1];this.applyFunc(t.EVENT.TOUCH_CARD_MOVE,i)}},i.prototype.touchOutside=function(e){this.isDepsit||this.applyFunc(t.EVENT.TOUCH_CARD_END)},i.prototype.checkIndex=function(t,e){for(var i=0;i<this.GroupCard.numChildren;i++)i<this.GroupCard.numChildren-1?t>this.GroupCard.getChildAt(i).x&&t<this.GroupCard.getChildAt(i+1).x&&(e=i):t>this.GroupCard.getChildAt(i).x&&(e=i);return e},i.prototype.toggleCardPlayer=function(){this.isCardPlayer?(this.hideCardPlayer(),this.showBottomBg()):(this.hideBottomBg(),this.showCardPlayer()),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CARDPLAYER)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),App.CommonUtils.effectButton(this.BtnCardPlayer,this.toggleCardPlayer,this)},i.prototype.removeEvent=function(){this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.GroupCard.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchOutside,this),App.CommonUtils.removeButton(this.BtnCardPlayer)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("斗地主 CardView destroy"),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),App.TimerManager.remove(this.refresh,this),App.TimerManager.remove(this.deal1,this),App.TimerManager.remove(this.deal2,this),App.TimerManager.remove(this.open1,this),App.TimerManager.remove(this.open2,this),this.removeEvent(),this.selectedCards=void 0,this.cardList=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.cardArr=void 0,this.bottomCardList=void 0,this.outList_0=void 0,this.outList_1=void 0,this.outList_2=void 0)},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"ddz.CardView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"ClosePoputSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.openPopup=function(){this.visible=!0,this.PoputBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},i.prototype.closePopup=function(){this.PoputBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},i.prototype.exitRoom=function(){this.applyFunc(t.EVENT.EXIT_ROOM)},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.exitRoom,this)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.ClosePoput=e,__reflect(e.prototype,"ddz.ClosePoput")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"DDZBonesSkin")||this;return t._approach=null,t}return __extends(i,e),i.prototype.playAni=function(t){this.diceAnimation(t)},i.prototype.diceAnimation=function(t){this.diceInit(),this.diceInitRenders(t),this._approach.play(1),this.overDiceAnimation()},i.prototype.diceInit=function(){this._approach||(this._approach=new t.CardTypeBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="CardBone_"+t;this.GroupBones.addChild(this._approach),this._approach.updateId(e);var i=StageUtils.getInstance().getWidth()/2,o=StageUtils.getInstance().getHeight()/2;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this.GroupBones.removeChild(this._approach))},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this._approach&&(this._approach.destroy(),this._approach=void 0))},i}(BaseEuiComponent);t.DDZBones=e,__reflect(e.prototype,"ddz.DDZBones")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this,"DDZGameSetSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.Effect.alpha=0},e.prototype.openPopup=function(){this.visible=!0,this.GameSetBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePopup=function(){this.GameSetBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},e.prototype.setVoiceMin=function(){this.VoiceSlider.value=0;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setVoiceMax=function(){this.VoiceSlider.value=100;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setMusicMin=function(){this.MusicSlider.value=0;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.setMusicMax=function(){this.MusicSlider.value=100;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.toggleEffect=function(){this.Effect.selected?this.Effect.alpha=1:this.Effect.alpha=0},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.VoiceMin,this.setVoiceMin,this),App.CommonUtils.effectButton(this.VoiceMax,this.setVoiceMax,this),App.CommonUtils.effectButton(this.MusicMin,this.setMusicMin,this),App.CommonUtils.effectButton(this.MusicMax,this.setMusicMax,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),App.CommonUtils.removeButton(this.VoiceMin),App.CommonUtils.removeButton(this.VoiceMax),App.CommonUtils.removeButton(this.MusicMin),App.CommonUtils.removeButton(this.MusicMax)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeEvent())},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"ddz.GameSet")}(ddz||(ddz={}));
var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.HelpMenu.scaleX=this.HelpMenu.scaleY=0,App.EffectUtils.showUI(this.HelpMenu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(this.HelpMenu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},e.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},e.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=930,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<54?e.scrollV=0:t.localY>e.height-54?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-108)*(t.localY-54)},e.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=695},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeEvent())},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"ddz.Help")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getHeight=function(){return this.height},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.HelpItem=e,__reflect(e.prototype,"ddz.HelpItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"MenuViewSkin")||this;return t.spotNumber=0,t.timerCallBankerNumber=0,t.menuType=!1,t.boneList=[],t.boneName=["light","sweep"],t}return __extends(i,e),i.prototype.initComponent=function(t,i){e.prototype.initComponent.call(this,t,i),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0},i.prototype.init=function(){this.initRecharge(),this.hideDisabledBtn(),this.hideStartBtn(),this.hideDeposit(),this.hideRobBox(),this.hideDoubleBox(),this.setHidePlayBox(),this.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideBtnEffect(),this.BoxMatching.visible=!1,this.BoxMissCarry.x=-555,this.BoxMissCarry.alpha=0,this.MenuBox.y=-300,App.OffsetLeft(this.Timer_2),this.btnRedPacket=lobby.RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(lobby.RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},i.prototype.initRecharge=function(){if(!this.boneList.length)for(var t=0;2>t;t++){var e=common.comBones.create();this.boneList.push(e)}for(var i=0;2>i;i++)if(!this.boneList[i].parent){var o=this.boneName[i];this.moneyGroup.addChild(this.boneList[i]),this.boneList[i].updateId(o);var n=43.5,s=43.5;this.boneList[i].setPosition(n,s),this.boneList[i].play(0)}},i.prototype.hideDisabledBtn=function(){this.DisScore1.visible=!1,this.DisScore2.visible=!1,this.DisScore3.visible=!1},i.prototype.requestStart=function(e){var i=e.currentTarget;switch(i){case this.GameStart:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME);break;case this.OpenCard:this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAMESEEN)}},i.prototype.CallBanker=function(e){var i=e.currentTarget,o=i==this.NoCall?t.OperateType.OPER_NOROB:i==this.CallScore1?t.OperateType.OPER_ROBONE:i==this.CallScore2?t.OperateType.OPER_ROBTWO:t.OperateType.OPER_ROBTHREE;this.applyFunc(t.EVENT.OPERATE_REQ,o)},i.prototype.onMatch=function(){this.BoxMatching.visible=!0,this.hideSpot(),App.TimerManager.doTimer(300,0,this.refreshSpot,this)},i.prototype.refreshSpot=function(){this.spotNumber<6?this.spotNumber++:this.spotNumber=0,this.hideSpot();for(var t=0;t<this.spotNumber;t++)this.BoxSpot.getChildAt(t).visible=!0},i.prototype.hideSpot=function(){for(var t=0;t<this.BoxSpot.numChildren;t++)this.BoxSpot.getChildAt(t).visible=!1},i.prototype.missCarryAni=function(){this.BoxMissCarry.alpha=1;var t=App.StageUtils.getWidth();egret.Tween.get(this.BoxMissCarry).to({x:t/2-this.BoxMissCarry.width/2},400,egret.Ease.sineInOut).call(function(){egret.Tween.get(this.BoxMissCarry).wait(600).to({x:t},400,egret.Ease.sineInOut).call(function(){this.BoxMissCarry.alpha=0,this.BoxMissCarry.x=-555}.bind(this))}.bind(this))},i.prototype.filishMatch=function(){this.BoxMatching.visible=!1,App.TimerManager.remove(this.refreshSpot,this),this.spotNumber=0},i.prototype.showStartBtn=function(){this.BtnBoxOpenCard.visible=!0,this.BtnBoxGameStart.visible=!0},i.prototype.hideStartBtn=function(){this.BtnBoxOpenCard.visible=!1,this.BtnBoxGameStart.visible=!1},i.prototype.disabledRobBtn=function(t){if(this.hideDisabledBtn(),t)for(var e=1;t+1>e;e++)this["DisScore"+e].visible=!0},i.prototype.showRobBox=function(){this.CallBankerBox.visible=!0},i.prototype.hideRobBox=function(){this.CallBankerBox.visible=!1},i.prototype.showDeposit=function(){this.Deposit.visible=!0},i.prototype.hideDeposit=function(){this.Deposit.visible=!1},i.prototype.showCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!0}},i.prototype.hideCancerDepsit=function(e){switch(e){case t.DDZPosition.POSITION_SELF:this.BoxCancer.visible=!1}},i.prototype.startTimer=function(e,i,o,n){if(e==t.DDZPosition.POSITION_SELF)switch(o){case t.TypeConst.TYPE_ROB:this.Timer_0.horizontalCenter=-145;break;case t.TypeConst.TYPE_DOUBLE:this.Timer_0.horizontalCenter=-8;break;case t.TypeConst.TYPE_PLAY:n?this.Timer_0.horizontalCenter=-56:this.Timer_0.horizontalCenter=-12}this["Timer_"+e].showTime(i,e,o)},i.prototype.stopTimer=function(t){this["Timer_"+t].stopTime()},i.prototype.showDoubleBox=function(){this.BoxDouble.visible=!0},i.prototype.hideDoubleBox=function(){this.BoxDouble.visible=!1},i.prototype.setVisiblePlayBox=function(e){switch(e){case t.PlayBtnConst.PLAYBTN_ONE:this.BoxPlay.x=376,this.BoxNoPlay.visible=!1,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!0;break;case t.PlayBtnConst.PLAYBTN_TWO:this.BoxNoPlay.x=376,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!1,this.BoxPlay.visible=!1;break;case t.PlayBtnConst.PLAYBTN_THREE:this.BoxNoPlay.x=82,this.BoxPlayTip.x=342,this.BoxPlay.x=486,this.BoxNoPlay.visible=!0,this.BoxPlayTip.visible=!0,this.BoxPlay.visible=!0}this.BoxPlayCard.visible=!0},i.prototype.setHidePlayBox=function(){this.BoxPlayCard.visible=!1},i.prototype.hideOperBtn=function(){this.CallBankerBox.visible=!1,this.BoxDouble.visible=!1,this.BoxPlayCard.visible=!1},i.prototype.playCard=function(e){switch(e.currentTarget){case this.Play:this.applyFunc(t.EVENT.PLAY_CARD);break;case this.NoPlay:this.applyFunc(t.EVENT.NO_PLAY_CARD)}},i.prototype.playTip=function(){this.applyFunc(t.EVENT.PLAY_TIP)},i.prototype["double"]=function(e){var i;switch(e.currentTarget){case this.Double:i=t.OperateType.OPER_DOUBLE;break;case this.NoDouble:i=t.OperateType.OPER_NODOUBLE}this.applyFunc(t.EVENT.OPERATE_REQ,i)},i.prototype.deposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_DEPOSIT)},i.prototype.cancerDeposit=function(){this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_CANCER_DEP)},i.prototype.showMenu=function(){this.menuType=0==this.menuType?!0:!1,this.menuType?(this.ShowMenu.source=RES.getRes("Dou-dizhu_button12"),egret.Tween.get(this.MenuBox).to({y:0},100)):(this.ShowMenu.source=RES.getRes("Dou-dizhu_button13"),egret.Tween.get(this.MenuBox).to({y:-300},100).call(function(){this.hideBtnEffect()}.bind(this))),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_MENU)},i.prototype.rechargeMoney=function(){this.applyFunc(t.EVENT.RECHARGE)},i.prototype.menuItem=function(e){switch(App.SoundManager.playEffect("click_mp3"),this.hideBtnEffect(),e.currentTarget){case this.BtnHelp:this.BtnHelp_Mask.visible=!0,this.applyFunc(t.EVENT.HELP),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_HELP);break;case this.BtnSet:this.BtnSet_Mask.visible=!0,this.applyFunc(t.EVENT.GAME_SET),R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_SET);break;case this.BtnRecord:this.BtnRecord_Mask.visible=!0,this.applyFunc(t.EVENT.RECORD)}},i.prototype.exitRoom=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc(t.EVENT.EXIT_POPUT)},i.prototype.hideBtnEffect=function(){this.BtnHelp_Mask.visible=!1,this.BtnRecord_Mask.visible=!1,this.BtnSet_Mask.visible=!1},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.addEvent=function(){this.GameStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.addEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.effectButton(this.BtnReturn,this.exitRoom,this),App.CommonUtils.effectButton(this.Deposit,this.deposit,this),App.CommonUtils.effectButton(this.BoxCancer,this.cancerDeposit,this),App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this),App.CommonUtils.effectButton(this.moneyGroup,this.rechargeMoney,this,{}),this.btnRedPacket&&this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){this.GameStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.OpenCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.requestStart,this),this.NoCall.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.CallScore3.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CallBanker,this),this.Play.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.NoPlay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playCard,this),this.PlayTip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.playTip,this),this.Double.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.NoDouble.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["double"],this),this.BtnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.Deposit),App.CommonUtils.removeButton(this.BoxCancer),App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.moneyGroup),this.btnRedPacket&&this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.Timer_0.destroy(),this.Timer_1.destroy(),this.Timer_2.destroy())},i}(BaseEuiComponent);t.MenuView=e,__reflect(e.prototype,"ddz.MenuView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return e.call(this,"PlayerMessageSkin")||this}return __extends(i,e),i.prototype.init=function(){this.hideUser(t.DDZPosition.POSITION_SELF),this.hideUser(t.DDZPosition.POSITION_RIGHT),this.hideUser(t.DDZPosition.POSITION_LEFT),App.OffsetLeft(this.GroupInfo_2),App.OffsetLeft(this.GroupInfo_0)},i.prototype.setUserName=function(t,e){this["UserName_"+t].text=e},i.prototype.getUserName=function(t){return this["UserName_"+t].text},i.prototype.setUserMoney=function(t,e){this["UserMoney_"+t].text=e},i.prototype.setUserHead=function(t,e){this["UserImage_"+t].source=e},i.prototype.setUserFrame=function(t,e){this["UserFrame_"+t].source=e},i.prototype.showUser=function(t){this["GroupInfo_"+t].visible=!0},i.prototype.hideUser=function(t){this["GroupInfo_"+t].visible=!1},i}(BaseEuiComponent);t.PlayerMessage=e,__reflect(e.prototype,"ddz.PlayerMessage")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,"RecordSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.visible=!0,this.RecordBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu,300,0,1,function(){this.gameList.contentHeight<this.scrollerItem.viewport.height?this.scrollerItem.verticalScrollBar.visible=!1:this.scrollerItem.verticalScrollBar.visible=!0}.bind(this)),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordItem,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/ddz/components/RecordItem.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},i}(BaseEuiComponent);t.Record=e,__reflect(e.prototype,"ddz.Record")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Time.text=this.data.date_time,this.Identify.text=this.data.is_landlord?"地主":"农民",this.Money.text=this.data.amount>0?"+"+App.CommonUtils.money(this.data.amount):""+App.CommonUtils.money(this.data.amount))},e}(eui.ItemRenderer);t.RecordItem=e,__reflect(e.prototype,"ddz.RecordItem")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TimerSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.showTime=function(t,e,i){this.visible=!0,this.position=e,this.timeType=i,this.timerNumber=t,this.TimerLable.text=String(this.timerNumber),App.TimerManager.doTimer(1e3,0,this.refreshTimer,this)},i.prototype.refreshTimer=function(){this.timerNumber>0?(this.timerNumber--,this.TimerLable.text=String(this.timerNumber),this.timeType==t.TypeConst.TYPE_PLAY&&(this.position==t.DDZPosition.POSITION_SELF&&App.SoundManager.playEffect("ddz_s_countdown_mp3"),3==this.timerNumber&&App.SoundManager.playEffect("ddz_s_alert_mp3"))):(App.TimerManager.remove(this.refreshTimer,this),this.visible=!1)},i.prototype.stopTime=function(){App.TimerManager.remove(this.refreshTimer,this),this.visible=!1},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),App.TimerManager.remove(this.refreshTimer,this))},i}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"ddz.Timer")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this,"TypeBoxSkin")||this;return t.alarmIndex_0=0,t.alarmIndex_1=0,t.alarmIndex_2=0,t}return __extends(i,e),i.prototype.init=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.hideTab(t.DDZPosition.POSITION_RIGHT),this.hideTab(t.DDZPosition.POSITION_LEFT),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT),this.hideTips(),App.OffsetLeft(this.GroupType_2),App.OffsetLeft(this.BossHat_2),App.OffsetLeft(this.Alarm_2),App.OffsetLeft(this.GroupType_0),App.OffsetLeft(this.BossHat_0),App.OffsetLeft(this.Alarm_0)},i.prototype.showType=function(e,i){var o=this.getType(i);this["Type_"+e].source=RES.getRes(o),e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!0:this["Type_"+e].visible=!0},i.prototype.hideType=function(e){e==t.DDZPosition.POSITION_SELF?this["GroupType_"+e].visible=!1:this["Type_"+e].visible=!1},i.prototype.showTab=function(t){this["DepositTab_"+t].visible=!0},i.prototype.hideTab=function(t){this["DepositTab_"+t].visible=!1},i.prototype.showBoss=function(t){this["BossHat_"+t].visible=!0},i.prototype.hideBoss=function(t){this["BossHat_"+t].visible=!1},i.prototype.showAlarm=function(t){this["Alarm_"+t].visible=!0,App.TimerManager.doTimer(300,0,this["alarmAni_"+t],this)},i.prototype.alarmAni_0=function(){this.alarmAni(t.DDZPosition.POSITION_SELF)},i.prototype.alarmAni_1=function(){this.alarmAni(t.DDZPosition.POSITION_RIGHT)},i.prototype.alarmAni_2=function(){this.alarmAni(t.DDZPosition.POSITION_LEFT)},i.prototype.alarmAni=function(t){this["alarmIndex_"+t]++,this["alarmIndex_"+t]%2==0?this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi"):this["Alarm_"+t].source=RES.getRes("Dou-dizhu_jingbaoqi2")},i.prototype.hideAlarm=function(t){this["Alarm_"+t].visible&&(this["Alarm_"+t].visible=!1,App.TimerManager.remove(this["alarmAni_"+t],this),this["alarmIndex_"+t]=0)},i.prototype.getType=function(t){var e;return e="Dou-dizhu_text"+String(t)},i.prototype.showTips=function(e){switch(e){case t.TipConst.TIP_ONE:this.TipSource.source=RES.getRes("Dou-dizhu_text56");break;case t.TipConst.TIP_TWO:this.TipSource.source=RES.getRes("Dou-dizhu_text55");break;case t.TipConst.TIP_THREE:this.TipSource.source=RES.getRes("Dou-dizhu_text57")}egret.Tween.get(this.PlayTips).to({alpha:1},100),App.TimerManager.doTimer(3e3,1,function(){egret.Tween.get(this.PlayTips).to({alpha:0},100)},this)},i.prototype.hideTips=function(){this.PlayTips.alpha=0},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.hideAlarm(t.DDZPosition.POSITION_SELF),this.hideAlarm(t.DDZPosition.POSITION_RIGHT),this.hideAlarm(t.DDZPosition.POSITION_LEFT))},i}(BaseEuiComponent);t.TypeBox=e,__reflect(e.prototype,"ddz.TypeBox")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Ani=1101]="Ani",t[t.Popup=1102]="Popup",t[t.CommonTest=1102]="CommonTest"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.MALE=1]="MALE",t[t.FAMALE=2]="FAMALE"}(i=t.SexConst||(t.SexConst={}));var o;!function(t){t[t.POSITION_UNDEFINE=-1]="POSITION_UNDEFINE",t[t.POSITION_SELF=0]="POSITION_SELF",t[t.POSITION_RIGHT=1]="POSITION_RIGHT",t[t.POSITION_LEFT=2]="POSITION_LEFT"}(o=t.DDZPosition||(t.DDZPosition={}));var n;!function(t){t[t.STATE_UNDEFINED=-1]="STATE_UNDEFINED",t[t.STATE_IDLE=0]="STATE_IDLE",t[t.STATE_MATCH=1]="STATE_MATCH",t[t.STATE_DEAL=2]="STATE_DEAL",t[t.STATE_ROB=3]="STATE_ROB",t[t.STATE_MISSCARRY=4]="STATE_MISSCARRY",t[t.STATE_DEAL_BOTTOM=5]="STATE_DEAL_BOTTOM",t[t.STATE_DOUBLE=6]="STATE_DOUBLE",t[t.STATE_DISCARD=7]="STATE_DISCARD",t[t.STATE_EXCHANGE=8]="STATE_EXCHANGE"}(n=t.GameStateConst||(t.GameStateConst={}));var s;!function(t){t[t.OPER_READY=25]="OPER_READY",t[t.OPER_STARTGAME=100]="OPER_STARTGAME",t[t.OPER_STARTGAMESEEN=101]="OPER_STARTGAMESEEN",t[t.OPER_NOROB=200]="OPER_NOROB",t[t.OPER_ROBONE=201]="OPER_ROBONE",t[t.OPER_ROBTWO=202]="OPER_ROBTWO",t[t.OPER_ROBTHREE=203]="OPER_ROBTHREE",t[t.OPER_NODOUBLE=300]="OPER_NODOUBLE",t[t.OPER_DOUBLE=301]="OPER_DOUBLE",t[t.OPER_DEPOSIT=400]="OPER_DEPOSIT",t[t.OPER_CANCER_DEP=401]="OPER_CANCER_DEP",t[t.OPER_DESTROY_TO_LOBBY=501]="OPER_DESTROY_TO_LOBBY",t[t.OPER_DESTROY_IDLE=502]="OPER_DESTROY_IDLE",t[t.OPER_DESTROY_MATCH=503]="OPER_DESTROY_MATCH",t[t.OPER_NODISCARD=44]="OPER_NODISCARD"}(s=t.OperateType||(t.OperateType={}));var r;!function(t){t[t.PLAYBTN_UNDEFINED=0]="PLAYBTN_UNDEFINED",t[t.PLAYBTN_ONE=1]="PLAYBTN_ONE",t[t.PLAYBTN_TWO=2]="PLAYBTN_TWO",t[t.PLAYBTN_THREE=3]="PLAYBTN_THREE"}(r=t.PlayBtnConst||(t.PlayBtnConst={}));var a=function(){function t(){}return t.LOW_FOLD="Dou-dizhu_text52",t.MEDIUM_FOLD="Dou-dizhu_text53",t.HIGH_FOLD="Dou-dizhu_text54",t}();t.FoldConst=a,__reflect(a.prototype,"ddz.FoldConst");var h;!function(t){t[t.TIP_UNDEFINED=0]="TIP_UNDEFINED",t[t.TIP_ONE=1]="TIP_ONE",t[t.TIP_TWO=2]="TIP_TWO",t[t.TIP_THREE=3]="TIP_THREE"}(h=t.TipConst||(t.TipConst={}));var l;!function(t){t[t.CODE_ZERO=0]="CODE_ZERO"}(l=t.ErrorConst||(t.ErrorConst={}));var p;!function(t){t[t.TYPE_UNDEFINED=0]="TYPE_UNDEFINED",t[t.TYPE_ROB=1]="TYPE_ROB",t[t.TYPE_DOUBLE=2]="TYPE_DOUBLE",t[t.TYPE_PLAY=3]="TYPE_PLAY"}(p=t.TypeConst||(t.TypeConst={}));var c;!function(t){t[t.EXIT_ROOM=10104]="EXIT_ROOM",t[t.EXIT_ROOM_R=10105]="EXIT_ROOM_R",t[t.BOTTOM_SCORE_N=11001]="BOTTOM_SCORE_N",t[t.STATE_R=11002]="STATE_R",t[t.SEAT_INFO=11003]="SEAT_INFO",t[t.SEAT_R=11004]="SEAT_R",t[t.ACTION_Q=11005]="ACTION_Q",t[t.ACTION_R=11006]="ACTION_R",t[t.ACTION_N=11007]="ACTION_N",t[t.CARD_INFO_R=11008]="CARD_INFO_R",t[t.MULTIPLE_N=11009]="MULTIPLE_N",t[t.BOTTOM_CARD_R=11010]="BOTTOM_CARD_R",t[t.DISCARD_Q=11011]="DISCARD_Q",t[t.DISCARD_R=11012]="DISCARD_R",t[t.DISCARD_N=11013]="DISCARD_N",t[t.DISCARD_RECORD_N=11014]="DISCARD_RECORD_N",t[t.EXCHANGE_N=11015]="EXCHANGE_N",t[t.COMBAT_RECORD_Q=11018]="COMBAT_RECORD_Q",t[t.COMBAT_RECORD_R=11019]="COMBAT_RECORD_R"}(c=t.ProxyConst||(t.ProxyConst={}));var u;!function(t){t[t.onBottomScoreCallBack=10001]="onBottomScoreCallBack",t[t.onStateCallBack=10002]="onStateCallBack",t[t.onActionCallBack=10003]="onActionCallBack",t[t.onSeatCallBack=10004]="onSeatCallBack",t[t.onSeatInfoCallBack=10005]="onSeatInfoCallBack",t[t.onCardInfoCallBack=10006]="onCardInfoCallBack",t[t.onActionNotifyCallBack=10007]="onActionNotifyCallBack",t[t.onBottomCardCallBack=10008]="onBottomCardCallBack",t[t.onDiscardCallBack=10009]="onDiscardCallBack",t[t.onDiscardNotifyCallBack=10010]="onDiscardNotifyCallBack",t[t.onExchangeNotifyCallBack=10011]="onExchangeNotifyCallBack",t[t.onExitRoomCallBack=10012]="onExitRoomCallBack",t[t.onMultipleCalBack=10013]="onMultipleCalBack",t[t.onDiscardRecordCallBack=10014]="onDiscardRecordCallBack",t[t.onCombatRecordCallBack=10015]="onCombatRecordCallBack"}(u=t.CallBacks||(t.CallBacks={}));var d;!function(t){t[t.OPERATE_REQ=1001]="OPERATE_REQ",t[t.TOUCH_CARD_END=1002]="TOUCH_CARD_END",t[t.TOUCH_CARD_MOVE=1003]="TOUCH_CARD_MOVE",t[t.TOUCH_CARD_BEGIN=1004]="TOUCH_CARD_BEGIN",t[t.PLAY_CARD=1005]="PLAY_CARD",t[t.NO_PLAY_CARD=1006]="NO_PLAY_CARD",t[t.PLAY_TIP=1007]="PLAY_TIP",t[t.EXIT_ROOM=1008]="EXIT_ROOM",t[t.GAME_SET=1009]="GAME_SET",t[t.HELP=1010]="HELP",t[t.RECORD=1011]="RECORD",t[t.EXIT_POPUT=1012]="EXIT_POPUT",t[t.RECHARGE=1013]="RECHARGE"}(d=t.EVENT||(t.EVENT={}));var m;!function(t){t[t.START=1]="START",t[t.ROCKET=2]="ROCKET",t[t.BOMB=3]="BOMB",t[t.LIANDUI=4]="LIANDUI",t[t.SHUNZI=5]="SHUNZI",t[t.PLANE=6]="PLANE",t[t.SPRING=7]="SPRING",t[t.BOSSWIN=8]="BOSSWIN",t[t.FARMERWIN=9]="FARMERWIN"}(m=t.BonesConst||(t.BonesConst={}));var y=function(){function t(){}return t.DDZ_POINT={START_CLEARCARD:"DDZstart_clearcard",START_NORMAL:"DDZstart_normal",ROB_201BEI:"DDZrob_1bei",ROB_202BEI:"DDZrob_2bei",ROB_203BEI:"DDZrob_3bei",ROB_200BEI:"DDZrob_no",DOUBLE_300:"DDZdouble_no",DOUBLE_301:"DDZdouble_yes",PANEL_NULTIPLE:"DDZpanel_multiple",BUTTON_CARDPLAYER:"DDZbutton_cardplayer",PANEL_CARDPLAYER:"DDZpanel_cardplayer",BUTTON_MENU:"DDZbutton_menu",BUTTON_BACK:"DDZbutton_back",BUTTON_HELP:"DDZbutton_help",BUTTON_SET:"DDZbutton_set",BUTTON_TIPS:"DDZbutton_tips",BUTTON_DEPOSIT:"DDZbutton_deposit",BUTTON_CANCLEDEPOSIT:"DDZbutton_cancledeposit",EVENT_CONSECUTIVE:"DDZevent_consecutive",EVENT_DISBAND:"DDZevent_disband",EVENT_MATCH:"DDZevent_match",EVENT_MATCHS:"DDZevent_matches",EVENT_BOMB:"DDZevent_bomb",EVENT_SPRING:"DDZevent_spring"},t}();t.PointConst=y,__reflect(y.prototype,"ddz.PointConst")}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.PHT_ERROR=-1]="PHT_ERROR",t[t.PHT_NODISCARD=0]="PHT_NODISCARD",t[t.PHT_SINGLE=1]="PHT_SINGLE",t[t.PHT_PAIR=2]="PHT_PAIR",t[t.PHT_THREE=3]="PHT_THREE",t[t.PHT_THREE_ONE=4]="PHT_THREE_ONE",t[t.PHT_THREE_TWO=5]="PHT_THREE_TWO",t[t.PHT_FOUR_TWO=6]="PHT_FOUR_TWO",t[t.PHT_FOUR_TWO_TWO=7]="PHT_FOUR_TWO_TWO",t[t.PHT_SHUNZI=8]="PHT_SHUNZI",t[t.PHT_PAIR_SHUNZI=9]="PHT_PAIR_SHUNZI",t[t.PHT_PLANE=10]="PHT_PLANE",t[t.PHT_PLANE_WING=11]="PHT_PLANE_WING",t[t.PHT_PLANE_WING_TWO=12]="PHT_PLANE_WING_TWO",t[t.PHT_BOMB=13]="PHT_BOMB",t[t.PHT_ROCKET=14]="PHT_ROCKET"}(e=t.PHandsType||(t.PHandsType={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_COLOR_UNDEFINE=0]="POKER_COLOR_UNDEFINE",t[t.POKER_COLOR_DIAMONDS=1]="POKER_COLOR_DIAMONDS",t[t.POKER_COLOR_COLVERS=2]="POKER_COLOR_COLVERS",t[t.POKER_COLOR_HEARTS=3]="POKER_COLOR_HEARTS",t[t.POKER_COLOR_SPADES=4]="POKER_COLOR_SPADES"}(e=t.PokerColor||(t.PokerColor={}))}(ddz||(ddz={}));var ddz;!function(t){var e;!function(t){t[t.POKER_VALUE_UNDEFINE=0]="POKER_VALUE_UNDEFINE",t[t.POKER_VALUE_THREE=1]="POKER_VALUE_THREE",t[t.POKER_VALUE_FOUR=2]="POKER_VALUE_FOUR",t[t.POKER_VALUE_FIVE=3]="POKER_VALUE_FIVE",t[t.POKER_VALUE_SIX=4]="POKER_VALUE_SIX",t[t.POKER_VALUE_SEVEN=5]="POKER_VALUE_SEVEN",t[t.POKER_VALUE_EIGHT=6]="POKER_VALUE_EIGHT",t[t.POKER_VALUE_NINE=7]="POKER_VALUE_NINE",t[t.POKER_VALUE_TEN=8]="POKER_VALUE_TEN",t[t.POKER_VALUE_JACK=9]="POKER_VALUE_JACK",t[t.POKER_VALUE_QUEEN=10]="POKER_VALUE_QUEEN",t[t.POKER_VALUE_KING=11]="POKER_VALUE_KING",t[t.POKER_VALUE_ACE=12]="POKER_VALUE_ACE",t[t.POKER_VALUE_TWO=13]="POKER_VALUE_TWO",t[t.POKER_VALUE_BLACK_JOKER=14]="POKER_VALUE_BLACK_JOKER",t[t.POKER_VALUE_RED_JOKER=15]="POKER_VALUE_RED_JOKER"}(e=t.PokerValue||(t.PokerValue={}))}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,t._popView=null,t._ddzModel=null,t._proxy=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.mGameUtil=new t.GameUtil,this.mGameTipsUtil=new t.GameTipsUtil,this.inits(),this.addListeners(),this.addEventListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),this.gameInit()},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),t.PokerTextures.cleanAll(),ObjectPool.clearClass("ddz.Poker","destroy"),App.TimerManager.removeAll(this),this._view.hideTypeAll(),this._view.clearCard(t.DDZPosition.POSITION_SELF),this._view.clearCard(t.DDZPosition.POSITION_RIGHT),this._view.clearCard(t.DDZPosition.POSITION_LEFT),this._view.cleanTableCard(t.DDZPosition.POSITION_SELF),this._view.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this._view.cleanTableCard(t.DDZPosition.POSITION_LEFT),this._view.canserDeposit(t.DDZPosition.POSITION_SELF),this._view.canserDeposit(t.DDZPosition.POSITION_RIGHT),this._view.canserDeposit(t.DDZPosition.POSITION_LEFT),this._view.hideAlarm(t.DDZPosition.POSITION_SELF),this._view.hideAlarm(t.DDZPosition.POSITION_RIGHT),this._view.hideAlarm(t.DDZPosition.POSITION_LEFT),this._view.hideDoubleBox(),this._view.hideRobBox(),this._view.hideBtnPlayBox(),this._ddzModel.gameState=-1,this._ddzModel.isDeposit=!1,this._ddzModel.isDiscarded=!1,this._ddzModel.isInsertBottom=!1,this._ddzModel.lastPlayPostion=void 0,this._ddzModel.isContinuity=!0,this._ddzModel.lastScore=0,this._ddzModel.isSprint=!1},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this)},i.prototype.inits=function(){e.prototype.inits.call(this),this._ddzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._ddzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.onUserMoneyChange=function(i){e.prototype.onUserMoneyChange.call(this,i);GamePlayerMgr.i.getPlayer();this._ddzModel.userMoney=this._player.getMoney(),this._view.setUserMoney(t.DDZPosition.POSITION_SELF,App.CommonUtils.money2Str(this._player.getMoney()))},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addEventListeners=function(){this.registerFunc(t.CallBacks.onBottomScoreCallBack,this.onBottomScoreCallBack,this),this.registerFunc(t.CallBacks.onStateCallBack,this.onStateCallBack,this),this.registerFunc(t.CallBacks.onActionCallBack,this.onActionCallBack,this),this.registerFunc(t.CallBacks.onActionNotifyCallBack,this.onActionNotifyCallBack,this),this.registerFunc(t.CallBacks.onSeatCallBack,this.onSeatCallBack,this),this.registerFunc(t.CallBacks.onSeatInfoCallBack,this.onSeatInfoCallBack,this),this.registerFunc(t.CallBacks.onCardInfoCallBack,this.onCardInfoCallBack,this),this.registerFunc(t.CallBacks.onBottomCardCallBack,this.onBottomCardCallBack,this),this.registerFunc(t.CallBacks.onDiscardCallBack,this.onDiscardCallBack,this),this.registerFunc(t.CallBacks.onDiscardNotifyCallBack,this.onDiscardNotifyCallBack,this),this.registerFunc(t.CallBacks.onExchangeNotifyCallBack,this.onExchangeNotifyCallBack,this),this.registerFunc(t.CallBacks.onExitRoomCallBack,this.onExitRoomCallBack,this),this.registerFunc(t.CallBacks.onMultipleCalBack,this.onMultipleCalBack,this),this.registerFunc(t.CallBacks.onDiscardRecordCallBack,this.onDiscardRecordCallBack,this),this.registerFunc(t.CallBacks.onCombatRecordCallBack,this.onCombatRecordCallBack,this),this.registerFunc(t.EVENT.OPERATE_REQ,this.operateReq,this),this.registerFunc(t.EVENT.TOUCH_CARD_END,this.touchCardEnd,this),this.registerFunc(t.EVENT.TOUCH_CARD_MOVE,this.touchCardMove,this),this.registerFunc(t.EVENT.TOUCH_CARD_BEGIN,this.touchCardBegin,this),this.registerFunc(t.EVENT.PLAY_CARD,this.playCard,this),this.registerFunc(t.EVENT.NO_PLAY_CARD,this.noPlay,this),this.registerFunc(t.EVENT.PLAY_TIP,this.playTis,this),this.registerFunc(t.EVENT.EXIT_ROOM,this.exitRoom,this),this.registerFunc(t.EVENT.GAME_SET,this.gameSet,this),this.registerFunc(t.EVENT.HELP,this.help,this),this.registerFunc(t.EVENT.RECORD,this.record,this),this.registerFunc(t.EVENT.EXIT_POPUT,this.exitPoput,this),this.registerFunc(t.EVENT.RECHARGE,this.rechage,this)
},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("ddz_bg_mp3"),this._player=GamePlayerMgr.i.getPlayer(),this._view.setUserName(t.DDZPosition.POSITION_SELF,this._player.getNickName()),this._ddzModel.userMoney=this._player.getMoney(),this._view.setUserMoney(t.DDZPosition.POSITION_SELF,App.CommonUtils.money2Str(this._player.getMoney())),this._view.setUserHead(t.DDZPosition.POSITION_SELF,"ui_headImg_"+this._player.getAvatar()),this._view.setUserFrame(t.DDZPosition.POSITION_SELF,"ui_headBox_"+this._player.getAvatarBox()),this._view.showUser(t.DDZPosition.POSITION_SELF)},i.prototype.onBottomScoreCallBack=function(t){this._ddzModel.baseScore=t.bottom_score},i.prototype.onStateCallBack=function(e){switch(this._ddzModel.gameState=e.state,e.state){case t.GameStateConst.STATE_IDLE:this.onWait();break;case t.GameStateConst.STATE_MATCH:this.onMatch();break;case t.GameStateConst.STATE_DEAL:this.onDeal(e);break;case t.GameStateConst.STATE_ROB:this.onRob(e);break;case t.GameStateConst.STATE_MISSCARRY:this.onMissCarry(e);break;case t.GameStateConst.STATE_DOUBLE:this.onDouble(e);break;case t.GameStateConst.STATE_DISCARD:this.onDiscard(e)}},i.prototype.onWait=function(){this._view.waitGame(),this._popView.hideWinner()},i.prototype.onMatch=function(){this._view.onMatch(),this._popView.closeExcangePoput(),this._popView.hideWinner(),this._ddzModel.isContinuity=!1},i.prototype.onDeal=function(t){this._view.showDeposit(),this._ddzModel.isOpenCard_1=!1,this._ddzModel.isOpenCard_2=!1,this._ddzModel.isDealAni=t.remaining_time==t.total_time?!0:!1,this._ddzModel.isDealAni&&this._view.startDeal(),this._ddzModel.isContinuity&&this.continuityPoint(),this.matchPoint()},i.prototype.onRob=function(e){this._view.showBottomCard(!1),this._view.hideBtnCardPlayer(),this._view.showBottomBg();var i=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition);this._view.hideType(i),i==t.DDZPosition.POSITION_SELF&&(this._view.disabledRobBtn(this._ddzModel.lastScore),this._view.showRobBox());var o=Math.round(e.total_time/1e3);this._view.startTimer(i,o,t.TypeConst.TYPE_ROB)},i.prototype.onMissCarry=function(t){var e=t.remaining_time==t.total_time?!0:!1;this._view.onMissCarry(e)},i.prototype.onDouble=function(e){this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._view.showDeposit(),this._view.showDoubleBox();var i=Math.round(e.remaining_time/1e3);this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_RIGHT,i,t.TypeConst.TYPE_DOUBLE),this._view.startTimer(t.DDZPosition.POSITION_LEFT,i,t.TypeConst.TYPE_DOUBLE)},i.prototype.onDiscard=function(e){this._ddzModel.isDiscarded||(this._view.showBottomBg(),this._view.hideBtnCardPlayer(),this._ddzModel.isDiscarded=!0),this._view.showDeposit();var i=Math.round(e.remaining_time/1e3),o=this.mGameUtil.resetPosition(e.turn_seat,this._ddzModel.selfPosition),n=this.mGameUtil.resetPosition(e.cmp_seat,this._ddzModel.selfPosition);if(void 0==this._ddzModel.lastPlayPostion&&(this._view.hideTypeAll(),this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),this.rendenCardPlayer(),this._view.showCardPlayer(),this._view.showBtnCardPlayer())),this._ddzModel.lastPlayPostion=n,this._view.cleanTableCard(o),this._view.hideType(o),e.turn_seat==this._ddzModel.selfPosition)if(e.turn_seat==e.cmp_seat)this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_ONE),this._view.startTimer(t.DDZPosition.POSITION_SELF,i,t.TypeConst.TYPE_PLAY,!1);else{var s=this._view.getOutCard(n),r=this.mGameTipsUtil.getTipPokerList(s,this._ddzModel.cardList_0,this._ddzModel.lastCardType);r?(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!0),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_THREE)):(this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY,!1),this._view.showPlayBox(t.PlayBtnConst.PLAYBTN_TWO),this._ddzModel.isDeposit||this._view.showTips(t.TipConst.TIP_TWO))}else this._view.startTimer(o,i,t.TypeConst.TYPE_PLAY);this.mGameTipsUtil.clean()},i.prototype.onSeatCallBack=function(t){this._ddzModel.selfPosition=t.seat,this._view.filishMatch()},i.prototype.onSeatInfoCallBack=function(e){this._view.showBaseScore(this._ddzModel.baseScore);var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._view.setUserName(i,e.nick_name),this._view.setUserMoney(i,""+App.CommonUtils.money(e.balance));var o=e.head?e.head:1;switch(this._view.setUserHead(i,"ui_headImg_"+o),this._view.setUserFrame(i,"ui_headBox_"+e.head_frame),this._view.showUser(i),this._ddzModel["sex_"+i]=e.sex?e.sex:1,e.seat==this._ddzModel.selfPosition&&(this._ddzModel.vip=e.vip+1),e.is_trusteeship?(e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0),this._view.deposit(i)):(e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!1),this._view.canserDeposit(i)),this._ddzModel.gameState){case t.GameStateConst.STATE_ROB:switch(e.rob_landlord_val){case 0:this._view.showType(i,t.OperateType.OPER_NOROB);break;case 1:this._view.showType(i,t.OperateType.OPER_ROBONE);break;case 2:this._view.showType(i,t.OperateType.OPER_ROBTWO);break;case 3:this._view.showType(i,t.OperateType.OPER_ROBTHREE)}break;case t.GameStateConst.STATE_DOUBLE:switch(e.double_val){case 0:this._view.showType(i,t.OperateType.OPER_NODOUBLE);break;case 1:this._view.showType(i,t.OperateType.OPER_DOUBLE)}}if(e.last_discard_type!=t.PHandsType.PHT_ERROR)if(this._view.hideType(i),e.last_discard_type==t.PHandsType.PHT_NODISCARD)this._view.showType(i,t.OperateType.OPER_NODISCARD);else{this._ddzModel.lastPlayPostion=i,this._ddzModel.lastCardType=e.last_discard_type;var n=[];e.lately_valid_discard.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);n.push(e)}.bind(this)),e.last_discard_type==t.PHandsType.PHT_SHUNZI&&n.reverse(),this._view.showTableCard(i,n)}},i.prototype.onCardInfoCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._ddzModel.gameState==t.GameStateConst.STATE_DEAL?(this._ddzModel["cardNumber_"+i]=e.count,i==t.DDZPosition.POSITION_SELF?(this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealCard(this._ddzModel.cardList_0):this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._ddzModel.isDealAni?this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!0):this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._ddzModel.isDealAni?this._view.dealCardOthers(i,e.count):this._view.showCardNumberOthers(i,e.count)):this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?e.seat!=this._ddzModel.selfPosition&&(this._ddzModel["isOpenCard_"+i]||(this.createCard(i,e.cards,!1),this._view.openCard(i,this._ddzModel["cardList_"+i]))):this._ddzModel.gameState!=t.GameStateConst.STATE_MISSCARRY&&(this._ddzModel["cardNumber_"+i]=e.count,e.seat==this._ddzModel.selfPosition?(this.createCard(i,e.cards,!1),this._view.showCard(this._ddzModel.cardList_0)):e.cards.length?(this._ddzModel["isOpenCard_"+i]=!0,this.createCard(i,e.cards,!1),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.showCardNumberOthers(i,e.count),2==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i),1==this._ddzModel["cardNumber_"+i]&&this._view.showAlarm(i))},i.prototype.createCard=function(e,i,o){i.length>0&&(o||this._view.clearCard(e),i.forEach(function(i){var n=this.mGameUtil.getCardWithNum(i),s=t.Poker.create();s.init(n.color,n.value,i,o),this._ddzModel["cardList_"+e].push(s)}.bind(this)),t.PokerUtil.sort(this._ddzModel["cardList_"+e]))},i.prototype.onActionCallBack=function(e){if(e.code==t.ErrorConst.CODE_ZERO)switch(e.oper){case t.OperateType.OPER_STARTGAME:this._view.startGameReq(),this.startGamePoint();break;case t.OperateType.OPER_STARTGAMESEEN:this._view.startGameReq(),this.startGameSeenPoint();break;case t.OperateType.OPER_NOROB:this.robReturn(e);break;case t.OperateType.OPER_ROBONE:this.robReturn(e);break;case t.OperateType.OPER_ROBTWO:this.robReturn(e);break;case t.OperateType.OPER_ROBTHREE:this.robReturn(e);break;case t.OperateType.OPER_NODOUBLE:this.doubleReturn(e);break;case t.OperateType.OPER_DOUBLE:this.doubleReturn(e)}},i.prototype.onActionNotifyCallBack=function(e){e.seat==this._ddzModel.selfPosition&&this._view.hideOperBtn();var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);switch(this._view.stopTimer(i),e.oper){case t.OperateType.OPER_STARTGAME:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_STARTGAMESEEN:e.seat==this._ddzModel.selfPosition&&(this._view.onReady(),this._popView.closeExcangePoput(),this._popView.hideWinner()),this._view.showType(i,t.OperateType.OPER_READY);break;case t.OperateType.OPER_NOROB:this._view.showType(i,t.OperateType.OPER_NOROB),App.SoundManager.playEffect("ddz_rob_0_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBONE:this._ddzModel.lastScore=1,this._view.showType(i,t.OperateType.OPER_ROBONE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTWO:this._ddzModel.lastScore=2,this._view.showType(i,t.OperateType.OPER_ROBTWO),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_ROBTHREE:this._ddzModel.lastScore=3,this._view.showType(i,t.OperateType.OPER_ROBTHREE),App.SoundManager.playEffect("ddz_rob_1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_NODOUBLE:this._view.showType(i,t.OperateType.OPER_NODOUBLE),App.SoundManager.playEffect("ddz_no_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DOUBLE:this._view.showType(i,t.OperateType.OPER_DOUBLE),App.SoundManager.playEffect("ddz_double_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.OperateType.OPER_DEPOSIT:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!0,this.depositPoint()),this._view.deposit(i);break;case t.OperateType.OPER_CANCER_DEP:e.seat==this._ddzModel.selfPosition&&(this._ddzModel.isDeposit=!1,this.cancleDepositPoint()),this._view.canserDeposit(i);break;case t.OperateType.OPER_DESTROY_TO_LOBBY:this.disbandPoint(),e.seat==this._ddzModel.selfPosition?(this._player.setMoney(this._ddzModel.userMoney),this.onExitRoomCallBack()):this._view.hideUser(i);break;case t.OperateType.OPER_DESTROY_IDLE:this.disbandPoint(),e.seat!=this._ddzModel.selfPosition&&this._view.hideUser(i);break;case t.OperateType.OPER_DESTROY_MATCH:this.disbandPoint(),e.seat!=this._ddzModel.selfPosition&&this._view.hideUser(i)}},i.prototype.robReturn=function(e){this._view.hideRobBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.robPoint(e.oper)},i.prototype.onBottomCardCallBack=function(e){var i=this.mGameUtil.resetPosition(e.landlord_seat,this._ddzModel.selfPosition);if(this._ddzModel.bossSeat=i,this._view.showBoss(i),this._ddzModel.gameState==t.GameStateConst.STATE_DEAL_BOTTOM&&this._view.hideTypeAll(),this._ddzModel.bottomCardList.length=0,e.bottom_cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel.bottomCardList.push(e)}.bind(this)),this._view.openBottomCard(this._ddzModel.bottomCardList),e.insert_hand_card)if(this._ddzModel["cardNumber_"+i]+=e.bottom_cards.length,i==t.DDZPosition.POSITION_SELF)this._ddzModel.isInsertBottom||(this.createCard(i,e.bottom_cards,!0),App.TimerManager.doTimer(500,1,function(){this._view.showCard(this._ddzModel.cardList_0)}.bind(this),this));else{var o=this._ddzModel["cardNumber_"+i];this._ddzModel["isOpenCard_"+i]?(this.createCard(i,e.bottom_cards,!0),this._view.dealOthersOpenCard(i,this._ddzModel["cardList_"+i],!1)):this._view.setCardNumber(i,o)}},i.prototype.doubleReturn=function(e){this._view.hideDoubleBox(),this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.showType(t.DDZPosition.POSITION_SELF,e.oper),this.doublePoint(e.oper)},i.prototype.onDiscardCallBack=function(e){e.code==t.ErrorConst.CODE_ZERO?(this._view.stopTimer(t.DDZPosition.POSITION_SELF),this._view.hideBtnPlayBox(),this._ddzModel.isDiscard?this._view.playCard():this._view.showType(t.DDZPosition.POSITION_SELF,t.OperateType.OPER_NODISCARD)):this._view.showTips(t.TipConst.TIP_ONE)},i.prototype.onDiscardNotifyCallBack=function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._view.stopTimer(i),this._ddzModel["cardNumber_"+i]-=e.cards.length;var o=this._ddzModel["cardNumber_"+i];if(e.seat==this._ddzModel.selfPosition?this._view.hideBtnPlayBox():this._view.setCardNumber(i,o),e.type==t.PHandsType.PHT_NODISCARD)return this._view.showType(i,t.OperateType.OPER_NODISCARD),void App.SoundManager.playEffect("ddz_pass_"+this._ddzModel["sex_"+i]+"_mp3");this._ddzModel.lastCardType=e.type;var n=[];switch(e.cards.forEach(function(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--,n.push(e)}.bind(this)),this._ddzModel.vip>0&&this.rendenCardPlayer(),e.type){case t.PHandsType.PHT_SINGLE:App.SoundManager.playEffect("ddz_single"+n[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PAIR:App.SoundManager.playEffect("ddz_pair"+n[0].value+"_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE:App.SoundManager.playEffect("ddz_triple_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_ONE:App.SoundManager.playEffect("ddz_3and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_THREE_TWO:App.SoundManager.playEffect("ddz_3and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO:App.SoundManager.playEffect("ddz_4and1_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_FOUR_TWO_TWO:App.SoundManager.playEffect("ddz_4and2_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_SHUNZI:this._view.playBoneAni(t.BonesConst.SHUNZI),App.SoundManager.playEffect("ddz_straight_"+this._ddzModel["sex_"+i]+"_mp3"),n.reverse();break;case t.PHandsType.PHT_PAIR_SHUNZI:this._view.playBoneAni(t.BonesConst.LIANDUI),App.SoundManager.playEffect("ddz_doubelstraight_"+this._ddzModel["sex_"+i]+"_mp3"),n.reverse();break;case t.PHandsType.PHT_PLANE:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_plane_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_PLANE_WING_TWO:this._view.playBoneAni(t.BonesConst.PLANE),App.SoundManager.playEffect("ddz_planewings_"+this._ddzModel["sex_"+i]+"_mp3");break;case t.PHandsType.PHT_BOMB:this._view.playBoneAni(t.BonesConst.BOMB),App.SoundManager.playEffect("ddz_bomb_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint();break;case t.PHandsType.PHT_ROCKET:this._view.playBoneAni(t.BonesConst.ROCKET),App.SoundManager.playEffect("ddz_rocket_"+this._ddzModel["sex_"+i]+"_mp3"),this.bombPoint()}this._view.playCardNotify(i,n,this._ddzModel.isDeposit),(2==o||1==o)&&(this._view.showAlarm(i),R.setTimeOnce(function(){App.SoundManager.playEffect("ddz_left"+o+"_"+this._ddzModel["sex_"+i]+"_mp3")}.bind(this),this,300))},i.prototype.onExchangeNotifyCallBack=function(e){this._view.hideTypeAll(),R.setTimeOnce(function(){this._view.cleanTableCard(t.DDZPosition.POSITION_SELF),this._view.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this._view.cleanTableCard(t.DDZPosition.POSITION_LEFT)}.bind(this),this,1e3),this._view.canserDeposit(t.DDZPosition.POSITION_SELF),this._view.canserDeposit(t.DDZPosition.POSITION_RIGHT),this._view.canserDeposit(t.DDZPosition.POSITION_LEFT),this._view.hideAlarm(t.DDZPosition.POSITION_SELF),this._view.hideAlarm(t.DDZPosition.POSITION_RIGHT),this._view.hideAlarm(t.DDZPosition.POSITION_LEFT),this._ddzModel.isDeposit=!1,this._ddzModel.isDiscarded=!1,this._ddzModel.isInsertBottom=!1,this._ddzModel.lastPlayPostion=void 0,this._ddzModel.isContinuity=!0,this._ddzModel.lastScore=0,e.is_landlord_win?this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.BOSSWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_win_mp3"):App.SoundManager.playEffect("ddz_lose_mp3")):this._ddzModel.isSprint||(this._view.playBoneAni(t.BonesConst.FARMERWIN),this._ddzModel.bossSeat==t.DDZPosition.POSITION_SELF?App.SoundManager.playEffect("ddz_lose_mp3"):App.SoundManager.playEffect("ddz_win_mp3")),this._ddzModel.isSprint=!1,this._popView.setSelfName(this._player.getNickName()),this._popView.setSelfHead("ui_headImg_"+this._player.getAvatar()),this._popView.setSelfFrame("ui_headBox_"+this._player.getAvatarBox()),e.infos.forEach(function(e){var i=this.mGameUtil.resetPosition(e.seat,this._ddzModel.selfPosition);this._popView.setPlayerName(i,this._view.getUserName(i)),this._popView.setPlayerBaseScore(i,this._ddzModel.baseScore),this._popView.setPlayerTimes(i,e.multiple),this._popView.setPlayerMoney(i,""+App.CommonUtils.money(e.change_money)),this._popView.setPlayerIsBoss(i,this._ddzModel.bossSeat),i==t.DDZPosition.POSITION_SELF&&(this._ddzModel.userMoney=e.balance),this._view.setUserMoney(i,""+App.CommonUtils.money(e.balance))}.bind(this)),App.TimerManager.doTimer(2e3,1,function(){this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE&&this._popView.exchangePoput()}.bind(this),this),this.matchsPoint()},i.prototype.onMultipleCalBack=function(e){this._view.setMultipleDetails(e),(e.spring_mul||e.contrary_spring_mul)&&(this._ddzModel.isSprint=!0,this._view.playBoneAni(t.BonesConst.SPRING),App.SoundManager.playEffect("ddz_s_spring_mp3"),this.springPoint())},i.prototype.onDiscardRecordCallBack=function(t){this._ddzModel.vip>0&&(this._ddzModel.initCardPlayer(),t.record.length&&t.record.forEach(function(t){t.cards.length&&t.cards.forEach(function(t){if(t){var e=this.mGameUtil.getCardWithNum(t);this._ddzModel["cardPlayerNum_"+e.value]--}}.bind(this))}.bind(this)),this._view.showCardPlayer(),this._view.showBtnCardPlayer(),this.rendenCardPlayer())},i.prototype.onCombatRecordCallBack=function(t){t.records&&t.records.length&&this._popView.renderRecord(t.records)},i.prototype.onExitRoomCallBack=function(){this.goBack2Room()},i.prototype.rendenCardPlayer=function(){for(var t=1;16>t;t++)this._view.setCardPlayer(this._ddzModel["cardPlayerNum_"+t],t)},i.prototype.operateReq=function(t){this._proxy.actionRequest(t)},i.prototype.exitRoom=function(){this._proxy.requestExitRoom()},i.prototype.gameSet=function(){this._popView.openSet()},i.prototype.help=function(){this._popView.openHelp()},i.prototype.record=function(){this._popView.openRecord();var t={begin_idx:0,req_count:100};this._proxy.requestRecord(t)},i.prototype.rechage=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.exitPoput=function(){this._ddzModel.gameState==t.GameStateConst.STATE_IDLE||this._ddzModel.gameState==t.GameStateConst.STATE_MATCH||this._ddzModel.gameState==t.GameStateConst.STATE_EXCHANGE?this._proxy.requestExitRoom():this._popView.openExitPoput()},i.prototype.touchCardEnd=function(){this._ddzModel.cardBeginIndex=-1,this._view.toggleCardType(this._ddzModel.selectedCards),this._ddzModel.selectedCards.length=0},i.prototype.touchCardMove=function(t){if(this._ddzModel.selectedCards.length=0,this._ddzModel.cardBeginIndex>-1){if(this._ddzModel.cardBeginIndex>t)for(var e=this._ddzModel.cardBeginIndex;e>t-1;e--)this._ddzModel.selectedCards.push(e);else for(var i=this._ddzModel.cardBeginIndex;t+1>i;i++)this._ddzModel.selectedCards.push(i);this._view.hoverCard(this._ddzModel.selectedCards)}},i.prototype.touchCardBegin=function(t){this._ddzModel.cardBeginIndex=t,this._ddzModel.selectedCards.push(this._ddzModel.cardBeginIndex),this._view.hoverCard(this._ddzModel.selectedCards)},i.prototype.playCard=function(){this._ddzModel.isDiscard=!0;var e=this._view.getSelectedCard();if(e.length>0){var i=this.mGameTipsUtil.getPHandsTypeByResult(e);if(i==t.PHandsType.PHT_ERROR)this._view.showTips(t.TipConst.TIP_ONE);else{var o=[];e.forEach(function(t){o.push(t.number)}.bind(this));var n={type:i,cards:o};this._proxy.discardRequest(n)}}else this._view.showTips(t.TipConst.TIP_THREE)},i.prototype.noPlay=function(){this._ddzModel.isDiscard=!1;var e={type:t.PHandsType.PHT_NODISCARD};this._proxy.discardRequest(e)},i.prototype.playTis=function(){var t=this._view.getOutCard(this._ddzModel.lastPlayPostion),e=this.mGameTipsUtil.getTipPokerList(t,this._ddzModel.cardList_0,this._ddzModel.lastCardType);this._view.showTipCards(e),this.tipsPoint()},i.prototype.startGamePoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_NORMAL)},i.prototype.startGameSeenPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.START_CLEARCARD)},i.prototype.robPoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["ROB_"+e+"BEI"])},i.prototype.doublePoint=function(e){R.sendPlayerAction(t.PointConst.DDZ_POINT["DOUBLE_"+e])},i.prototype.tipsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_TIPS)},i.prototype.depositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_DEPOSIT)},i.prototype.cancleDepositPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.BUTTON_CANCLEDEPOSIT)},i.prototype.continuityPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_CONSECUTIVE)},i.prototype.disbandPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_DISBAND)},i.prototype.matchPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCH)},i.prototype.matchsPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_MATCHS)},i.prototype.bombPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_BOMB)},i.prototype.springPoint=function(){R.sendPlayerAction(t.PointConst.DDZ_POINT.EVENT_SPRING)},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.PokerTextures.cleanAll(),ObjectPool.clearClass("ddz.Poker","destroy"),App.TimerManager.removeAll(this),this._view.destroy(),this._popView.destroy(),this._ddzModel.destroy(),this._proxy.destroy(),this._view=void 0,this._popView=void 0,this._ddzModel=void 0,this._proxy=void 0,this.mGameUtil=void 0,this.mGameTipsUtil=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"ddz.GameController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i}return __extends(i,e),i.prototype.initData=function(){this.bossSeat=-1,this.cardList_0=[],this.cardList_1=[],this.cardList_2=[],this.callBossTimes=1,this.farmerDoubleTimes=0,this.bossDoubleTimes=0,this.bottomCardList=[],this.selectedCards=[],this.cardNumber_0=0,this.cardNumber_1=0,this.cardNumber_2=0,this.cardBeginIndex=-1,this.isDealAni=!1,this.lastPlayPostion=void 0,this.selfPosition=0,this.lastCardList=[],this.isInsertBottom=!1,this.sex_0=t.SexConst.MALE,this.sex_1=t.SexConst.MALE,this.sex_2=t.SexConst.MALE,this.lastScore=0},i.prototype.initCardPlayer=function(){this.cardPlayerNum_1=4,this.cardPlayerNum_2=4,this.cardPlayerNum_3=4,this.cardPlayerNum_4=4,this.cardPlayerNum_5=4,this.cardPlayerNum_6=4,this.cardPlayerNum_7=4,this.cardPlayerNum_8=4,this.cardPlayerNum_9=4,this.cardPlayerNum_10=4,this.cardPlayerNum_11=4,this.cardPlayerNum_12=4,this.cardPlayerNum_13=4,this.cardPlayerNum_14=1,this.cardPlayerNum_15=1},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.cardList_0=void 0,this.cardList_1=void 0,this.cardList_2=void 0,this.bottomCardList=void 0,this.selectedCards=void 0,this.lastCardList=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"ddz.GameModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mInit=!1,this._mIsPool=!1,this.onCreate()}return e.create=function(){var t=ObjectPool.pop("ddz.Poker");return t},e.realese=function(t){t._mIsPool||(t.clean(),t._mIsPool=!0,ObjectPool.push(t))},e.prototype.onCreate=function(){this._mData=new t.PokerData,this._mIcon=new t.PokerIcon},e.prototype.init=function(t,e,i,o){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setColor(t),this._mData.setValue(e),this._mData.setNumber(i),this.setSelected(o),this._mIsPool=!1)},e.prototype.add2Stage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.hideMask()))},e.prototype.addSPokerToStage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refreshSPoker()))},e.prototype.addEvent=function(){},e.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},e.prototype.refreshSPoker=function(){this._mInit&&this._mIcon.refreshSIcon(this._mData)},e.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},e.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},e.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},e.prototype.setSelected=function(t){this._mInit&&this._mData.setSeleced(t)},e.prototype.setDeposit=function(t){this._mInit&&this._mData.setDeposit(t)},e.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mIcon.parent&&this._mIcon.parent.removeChild(this._mIcon))},Object.defineProperty(e.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"number",{get:function(){return this._mData.getNumber()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._mIcon.x},set:function(t){this._mIcon.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._mIcon.y},set:function(t){this._mIcon.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(t){this._mIcon.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(t){this._mIcon.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(t){this._mIcon.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(t){this._mIcon.anchorOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(t){this._mIcon.anchorOffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._mData.getSelected()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDeposit",{get:function(){return this._mData.getDeposit()},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){this._mData.setColor(t)},e.prototype.setValue=function(t){this._mData.setValue(t)},e.prototype.setNumber=function(t){this._mData.setNumber(t)},e.prototype.setIsBottom=function(t){this._mIsBottom=t},e.prototype.setDepositMask=function(){this._mIcon.showDepsit()},e.prototype.hideDepositMask=function(){this._mIcon.hideDeposit()},e.prototype.getData=function(){return this._mData},e.prototype.getIcon=function(){return this._mIcon},e.prototype.destroy=function(){this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mParent=void 0,this._mData=void 0,this._mIcon=void 0},e}();t.Poker=e,__reflect(e.prototype,"ddz.Poker")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this.mIsDeposit=!1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1}return e.prototype.init=function(){this._mPokerColor=t.PokerColor.POKER_COLOR_UNDEFINE,this._mPokerValue=t.PokerValue.POKER_VALUE_UNDEFINE,this._mPokerNumber=-1,this.mIsBoss=!1,this.mIsShow=!1,this.mIsSelected=!1},e.prototype.getTexture=function(){return t.PokerTextures.getPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.getSTexture=function(){return t.PokerTextures.getSPokerTexture(this._mPokerColor,this._mPokerValue)},e.prototype.setBoss=function(t){this.mIsBoss=t},e.prototype.setColor=function(t){this._mPokerColor=t},e.prototype.setValue=function(t){this._mPokerValue=t},e.prototype.setNumber=function(t){this._mPokerNumber=t},e.prototype.setSeleced=function(t){this.mIsSelected=t},e.prototype.setDeposit=function(t){this.mIsDeposit=t},e.prototype.getColor=function(){return this._mPokerColor},e.prototype.getValue=function(){return this._mPokerValue},e.prototype.getNumber=function(){return this._mPokerNumber},e.prototype.getSelected=function(){return this.mIsSelected},e.prototype.getDeposit=function(){return this.mIsDeposit},e.prototype.destroy=function(){},e}();t.PokerData=e,__reflect(e.prototype,"ddz.PokerData")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._mInit=!0,this._mIcon=new eui.Image,this.addChild(this._mIcon),this._mMask=new eui.Image,this.addChild(this._mMask)},e.prototype.refreshIcon=function(t){this._mIcon.texture=t.getTexture()},e.prototype.refreshSIcon=function(t){this._mIcon.texture=t.getSTexture()},e.prototype.addMask=function(){this._mMask.texture=RES.getRes("card_ddz_mask"),this._mMask.alpha=.5},e.prototype.showDepsit=function(){this._mMask.alpha=1,this._mMask.visible=!0},e.prototype.hideDeposit=function(){this._mMask.visible=!1},e.prototype.showMask=function(){this._mMask.alpha=.5,this._mMask.visible=!0},e.prototype.hideMask=function(){this._mMask.alpha=.5,this._mMask.visible=!1},e.prototype.clean=function(){this._mIcon.texture=void 0,this._mMask.texture=void 0},e.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean())},e}(eui.Component);t.PokerIcon=e,__reflect(e.prototype,"ddz.PokerIcon")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){}return e.getPokerTexture=function(i,o){var n;if(o==t.PokerValue.POKER_VALUE_UNDEFINE)n="card_ddz_bg";else if(o==t.PokerValue.POKER_VALUE_RED_JOKER)n="card_ddz_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)n="card_ddz_78";else{var s=o+2>13?o-11:o+2;n="card_ddz_"+(i-1)+"_"+s}var r=e._mPokerTextures;return r[n]||(r[n]=RES.getRes(n)),r[n]},e.getSPokerTexture=function(i,o){var n;if(o==t.PokerValue.POKER_VALUE_RED_JOKER)n="scard_79";else if(o==t.PokerValue.POKER_VALUE_BLACK_JOKER)n="scard_78";else{var s=o+2>13?o-11:o+2;n="scard_"+(i-1)+"_"+s}var r=e._mSPokerTextures;return r[n]||(r[n]=RES.getRes(n)),r[n]},e.cleanAll=function(){var t=e._mPokerTextures,i=e._mSPokerTextures;for(var o in t)t[o]=void 0;for(var n in i)i[n]=void 0},e._mPokerTextures={},e._mSPokerTextures={},e}();t.PokerTextures=e,__reflect(e.prototype,"ddz.PokerTextures")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onBottomScore=function(e){this.applyFunc(t.CallBacks.onBottomScoreCallBack,e)},i.prototype.onState=function(e){this.applyFunc(t.CallBacks.onStateCallBack,e)},i.prototype.onAction=function(e){this.applyFunc(t.CallBacks.onActionCallBack,e)},i.prototype.onActionNotify=function(e){this.applyFunc(t.CallBacks.onActionNotifyCallBack,e)},i.prototype.onSeat=function(e){this.applyFunc(t.CallBacks.onSeatCallBack,e)},i.prototype.onSeatInfo=function(e){this.applyFunc(t.CallBacks.onSeatInfoCallBack,e)},i.prototype.onCardInfo=function(e){this.applyFunc(t.CallBacks.onCardInfoCallBack,e)},i.prototype.onBottomCard=function(e){this.applyFunc(t.CallBacks.onBottomCardCallBack,e)},i.prototype.onDiscard=function(e){this.applyFunc(t.CallBacks.onDiscardCallBack,e)},i.prototype.onDiscardNotify=function(e){this.applyFunc(t.CallBacks.onDiscardNotifyCallBack,e)},i.prototype.onExchangeNotify=function(e){this.applyFunc(t.CallBacks.onExchangeNotifyCallBack,e)
},i.prototype.onExitRoomCallBack=function(e){this.applyFunc(t.CallBacks.onExitRoomCallBack,e)},i.prototype.onMultipleCalBack=function(e){this.applyFunc(t.CallBacks.onMultipleCalBack,e)},i.prototype.onDiscardRecord=function(e){this.applyFunc(t.CallBacks.onDiscardRecordCallBack,e)},i.prototype.onCombatRecord=function(e){this.applyFunc(t.CallBacks.onCombatRecordCallBack,e)},i.prototype.actionRequest=function(e){var i={oper:e};this.send(t.ProxyConst.ACTION_Q,i)},i.prototype.discardRequest=function(e){this.send(t.ProxyConst.DISCARD_Q,e)},i.prototype.requestExitRoom=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.requestRecord=function(e){this.send(t.ProxyConst.COMBAT_RECORD_Q,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.addListener(t.ProxyConst.STATE_R,this.onState,this),this.addListener(t.ProxyConst.ACTION_R,this.onAction,this),this.addListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.addListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.addListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.addListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.addListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.addListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.addListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.addListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.addListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.addListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.addListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.removeListener(t.ProxyConst.STATE_R,this.onState,this),this.removeListener(t.ProxyConst.ACTION_R,this.onAction,this),this.removeListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.removeListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.removeListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.removeListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.removeListener(t.ProxyConst.BOTTOM_CARD_R,this.onBottomCard,this),this.removeListener(t.ProxyConst.DISCARD_R,this.onDiscard,this),this.removeListener(t.ProxyConst.DISCARD_N,this.onDiscardNotify,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.removeListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.removeListener(t.ProxyConst.MULTIPLE_N,this.onMultipleCalBack,this),this.removeListener(t.ProxyConst.DISCARD_RECORD_N,this.onDiscardRecord,this),this.removeListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"ddz.GameProxy")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMatchMainListMinor=[],this._mPHandsType=0,this._mMatchMainListRecover=[],this._mMatchMainListMinorRecover=[],this._mTipsTimes=0,this.init()}return e.prototype.init=function(){this._mPokerTipsUtil=new t.PokerUtil},e.prototype.getTipPokerList=function(e,i,o){if(o!=t.PHandsType.PHT_ROCKET){var n=this.getRound(e,i,o);return n||(n=this._mMatchMainListRecover.shift()),n||(this.rest(),n=this.getRound([],i,t.PHandsType.PHT_BOMB)),n&&this._mMatchMainListRecover.push(n),n}},e.prototype.getRound=function(t,e,i){egret.getTimer();this._mMatchMainList||this.analysisPokerList(t,e,i);var o=this.getWinList(t);if(this._mMatchMainList)for(;!o&&this._mMatchMainList.length>0;)o=this.getWinList(t);return o},e.prototype.analysisPokerList=function(t,e,i){this._mPHandsType=this._mPokerTipsUtil.analysisPokerList(e,t,i),this._mMatchMainList=this._mPokerTipsUtil.getMatchMain(),this._mMatchMainListMinor=this._mPokerTipsUtil.getMatchMinor()},e.prototype.getWinList=function(e){var i,o=this._mMatchMainList,n=this._mMatchMainListMinor;if(o&&o.length>0&&(i=o.shift()),i){var s,r,a=this._mPHandsType;if(a==t.PHandsType.PHT_FOUR_TWO||a==t.PHandsType.PHT_FOUR_TWO_TWO)r=this.getMinor(n,i,2),s=r.index>=2?[].concat(i,r):[].concat(i);else if(a==t.PHandsType.PHT_PLANE_WING||a==t.PHandsType.PHT_PLANE_WING_TWO){var h=Math.floor(i.length/3);if(r=this.getMinor(n,i,h),!(r.index>=h))return void egret.warn("没有大过的飞机");s=[].concat(i,r)}else r=this.getMinor(n,i,1),s=[].concat(i,r);var l=this.compare(e,s,this._mPHandsType);return l?s:void 0}},e.prototype.getMinor=function(t,e,i){var o=[],n=0;if(t&&t.length>0)for(var s=0;s<t.length;s++){for(var r=t[s],a=!0,h=0;h<e.length;h++)if(r[0].val==e[h].val){a=!1;break}if(a&&(n++,o=o.concat(r),n>=i))break}return o.index=n,o},e.prototype.compare=function(e,i,o){var n=o;if(n==t.PHandsType.PHT_ROCKET)return!1;var s=e,r=i,a=s.length,h=r.length;if(2==h){if(r[0].val+r[1].val==29)return!0;if(2==a)return r[0].val>s[0].val}if(n==t.PHandsType.PHT_BOMB){if(0==s.length)return!0;if(4==a&&4==h)return r[0].val>s[0].val}if(1==a&&1==h)return r[0].val>s[0].val;if(3==a&&3==h)return r[0].val>s[0].val;if(t.PokerUtil.sort(s),t.PokerUtil.sort(r),n==t.PHandsType.PHT_SHUNZI||n==t.PHandsType.PHT_PAIR_SHUNZI||n==t.PHandsType.PHT_PLANE)return r[0].val>s[0].val;var l=t.PokerUtil.map(s),p=t.PokerUtil.map(r);if(l){var c=(l.length,0);for(var u in l){var d=l[u].length;d>c&&(c=d)}if(p){var m=p.length,y=0;for(var u in p){var _=p[u].length;_>y&&(y=_)}if(1==m&&4==y)return!0;if((n==t.PHandsType.PHT_THREE_ONE||n==t.PHandsType.PHT_THREE_TWO)&&m>1){var g=l[0].length>=3?l[0][0].val:l[1][0].val,f=p[0].length>=3?p[0][0].val:p[1][0].val;return f>g}if(n==t.PHandsType.PHT_FOUR_TWO||n==t.PHandsType.PHT_FOUR_TWO_TWO||n==t.PHandsType.PHT_PLANE_WING||n==t.PHandsType.PHT_PLANE_WING_TWO){for(var g=0,u=0,v=l.length;v>u;u++){var C=l[u];if(C.length>=3){g=C[0].val;break}}for(var f=0,u=0,b=p.length;b>u;u++){var T=p[u];if(T.length>=3){f=T[0].val;break}}return f>g}return egret.warn("匹配不对牌型",s,s),!1}}},e.prototype.getPHandsTypeByResult=function(e){var i=t.PokerUtil.map(t.PokerUtil.sort(e));return this._mPokerTipsUtil.getPHandsTypeByResult(i)},e.prototype.rest=function(){this._mMatchMainListRecover.splice(0),this._mMatchMainListMinorRecover.splice(0),this._mTipsTimes=0,this._mPHandsType=void 0,this._mMatchMainList=void 0,this._mMatchMainListMinor=void 0},e.prototype.clean=function(){this.rest()},e.prototype.destroy=function(){this.rest(),this._mPokerTipsUtil.destroy(),this._mPokerTipsUtil=void 0},e}();t.GameTipsUtil=e,__reflect(e.prototype,"ddz.GameTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){}return t.prototype.resetPosition=function(t,e){var i=t-e;return i=0>i?i+3:i},t.prototype.resetCardList=function(t){return t.forEach(function(t){4==t.color?t.value=14:5==t.color?t.value=15:t.value<3?t.value+=11:t.value>2&&t.value<14&&(t.value-=2)}.bind(this)),t},t.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o={value:i,color:e,number:t};return 4==o.color?o.value=14:5==o.color?o.value=15:(o.value<3?o.value+=11:o.value>2&&o.value<14&&(o.value-=2),o.color++),o},t}();t.GameUtil=e,__reflect(e.prototype,"ddz.GameUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function t(){this._mMapPoker=[]}return t.prototype.sort=function(t){t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val})},t.prototype.tips=function(t){},t.prototype.showPokerByType=function(t,e){this._mMapPoker.splice(0),this.map(t)},t.prototype.showSZ=function(){},t.prototype.map=function(t){if(!(t.length<=0))for(var e=this._mMapPoker,i=t,o=-1,n=0,s=i.length;s>n;n++){var r=i[0].val;o!=r&&e.push([r]),e[e.length].push(r)}},t.prototype.destroy=function(){this._mMapPoker=void 0},t}();t.PokerTipsUtil=e,__reflect(e.prototype,"ddz.PokerTipsUtil")}(ddz||(ddz={}));var ddz;!function(t){var e=function(){function e(){this._mMapPoker=[],this._mCombComm=new t.CombComm,this._mCombShunZi=new t.CombShunZi,this._mCombSanDai=new t.CombSanDai,this._mCombSiDai=new t.CombSiDai,this._mCombZhaDan=new t.CombZhaDan,this._mCombFeiJi=new t.CombFeiJi}return e.sort=function(t){return t.sort(function(t,e){return t.val==e.val?e.color-t.color:e.val-t.val}),t},e.prototype.sort=function(t){return e.sort(t)},e.prototype.tips=function(t){},e.prototype.analysisPokerList=function(t,e,i){this._mCurrComb=void 0,this._mMapPoker=this.map(t);var o=this.map(this.sort(e));return i||(i=this.getPHandsTypeByResult(o)),this.matchType(i,o),i},e.prototype.getMatchMain=function(){return this._mCurrComb?this._mCurrComb.getMatch():void egret.warn("要先执行分析方法  analysisPokerList() ")},e.prototype.getMatchMinor=function(){return this._mCurrComb?this._mCurrComb.getMatchMinor():void 0},e.prototype.getPHandsTypeByResult=function(e){var i=e,o=i.length,n=0;for(var s in i){var r=i[s].length;r>n&&(n=r)}if(1==n){if(1==o){if(this._mCombComm.checkValidityOne(i))return t.PHandsType.PHT_SINGLE}else if(2==o){if(this._mCombZhaDan.checkValidityHJ(i))return t.PHandsType.PHT_ROCKET}else if(o>=5&&this._mCombShunZi.checkValidityOne(i))return t.PHandsType.PHT_SHUNZI}else if(2==n){if(1==o){if(this._mCombComm.checkValidityTwo(i))return t.PHandsType.PHT_PAIR}else if(o>=3&&this._mCombShunZi.checkValidityTwo(i))return t.PHandsType.PHT_PAIR_SHUNZI}else if(3==n){if(1==o){if(this._mCombComm.checkValidityThree(i))return t.PHandsType.PHT_THREE}else if(2==o){if(this._mCombSanDai.checkValidityOne(i))return t.PHandsType.PHT_THREE_ONE;if(this._mCombSanDai.checkValidityTwo(i))return t.PHandsType.PHT_THREE_TWO}else if(o>3&&this._mCombFeiJi.checkValidityTwo(i))return t.PHandsType.PHT_PLANE_WING_TWO;if(this._mCombShunZi.checkValidityThree(i))return t.PHandsType.PHT_PLANE;if(this._mCombFeiJi.checkValidityOne(i,3))return t.PHandsType.PHT_PLANE_WING}else if(4==n){if(2==o||3==o){if(this._mCombSiDai.checkValidityOne(i))return t.PHandsType.PHT_FOUR_TWO;if(this._mCombSiDai.checkValidityTwo(i))return t.PHandsType.PHT_FOUR_TWO_TWO}else if(1==o&&this._mCombZhaDan.checkValidityZD(i))return t.PHandsType.PHT_BOMB;if(this._mCombFeiJi.checkValidityOne(i,4))return t.PHandsType.PHT_PLANE_WING}return t.PHandsType.PHT_ERROR},e.prototype.matchType=function(e,o){var n;switch(e){case t.PHandsType.PHT_SINGLE:this._mCombComm.match(this.match(i.One),this.match(i.One,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_PAIR:this._mCombComm.match(this.match(i.Two),this.match(i.Two,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_THREE:this._mCombComm.match(this.match(i.Three),this.match(i.Three,!0)),this._mCombComm.matchList(o),this._mCurrComb=this._mCombComm;break;case t.PHandsType.PHT_SHUNZI:this._mCombShunZi.match(this.match(i.One,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PAIR_SHUNZI:this._mCombShunZi.match(this.match(i.Two,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_PLANE:this._mCombShunZi.match(this.match(i.Three,!0)),this._mCombShunZi.matchList(o),this._mCurrComb=this._mCombShunZi;break;case t.PHandsType.PHT_THREE_ONE:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.One,!0)),this._mCombSanDai.matchMore([],this.match(i.One,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_THREE_TWO:this._mCombSanDai.match(this.match(i.Three,!0),this.match(i.Two,!0)),this._mCombSanDai.matchMore([],this.match(i.Two,!0)),this._mCombSanDai.matchList(o),this._mCurrComb=this._mCombSanDai;break;case t.PHandsType.PHT_FOUR_TWO:n=this.match(i.One),this._mCombSiDai.match(this.match(i.Four),n),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_FOUR_TWO_TWO:n=this.match(i.Two),this._mCombSiDai.match(this.match(i.Four),n),this._mCombSiDai.matchList(o),this._mCurrComb=this._mCombSiDai;break;case t.PHandsType.PHT_BOMB:case t.PHandsType.PHT_ROCKET:this._mCombZhaDan.match(this.match(i.Four),this.match(i.One)),this._mCombZhaDan.matchList(o),this._mCurrComb=this._mCombZhaDan;break;case t.PHandsType.PHT_PLANE_WING:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.One)),this._mCombFeiJi.matchMore([],this.match(i.One,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi;break;case t.PHandsType.PHT_PLANE_WING_TWO:this._mCombFeiJi.match(this.match(i.Three,!0),this.match(i.Two)),this._mCombFeiJi.matchMore([],this.match(i.Two,!0)),this._mCombFeiJi.matchList(o),this._mCurrComb=this._mCombFeiJi}},e.prototype.map=function(t){return e.map(t)},e.map=function(t){var e=t;if(!(e.length<=0)){for(var i=[],o=-1,n=0,s=e.length;s>n;n++){var r=e[n],a=r.val;o==a?i[i.length-1].push(r):(o=a,i.push([r]))}return i}},e.prototype.match=function(t,e){void 0===e&&(e=!1);var i=this._mMapPoker,o=[];for(var n in i){var s=i[n],r=s.length,a=e?r>=t:t==r;if(a){var h=s.slice(0,t);o.push(h)}}return o},e.prototype.reset=function(){this._mMapPoker.splice(0),this._mCurrComb=void 0},e.prototype.destroy=function(){this._mMapPoker=void 0,this._mCurrComb=void 0},e}();t.PokerUtil=e,__reflect(e.prototype,"ddz.PokerUtil");var i;!function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four"}(i||(i={}))}(ddz||(ddz={}));var CSModel=function(){function t(){}return t.getUrlFromLive800=function(){return t.URL+t.csInfo()},t.csInfo=function(){var t=GamePlayerMgr.i.getPlayer(),e={userId:t.mShowUid,loginname:t.getLoginame(),name:t.getNickName(),timestamp:GameBase.getCurrServerTime(),key:"live800Key"},i={companyID:12698,enterurl:"",codeType:"custom",info:App.NetUtils.URLEncode(e)};return App.NetUtils.URLEncode(i)},t.URL="https://chat32.live800.com/live800/chatClient/chatbox.jsp?",t}();__reflect(CSModel.prototype,"CSModel");var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){var e=t,i=e[0].length;return e.length>1?!1:1==i},e.prototype.checkValidityTwo=function(t){var e=t,i=e[0].length;return e.length>1?!1:2==i},e.prototype.checkValidityThree=function(t){var e=t,i=e[0].length;return e.length>1?!1:3==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);for(var o=this._mMapMinor;o.length;)e.push(o.pop());return this._mMapMinor=void 0,e},e}(t.CombBase);t.CombComm=e,__reflect(e.prototype,"ddz.CombComm")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t,e){var i=t;if(4==e||3==i.length){i=[].concat(t);for(var o=i.length,n=o-1;n>=0;n--){var s=i[n];(4==s.length||2==s.length)&&i.push([s.pop()])}}return this.checkValidityX(i,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i.length;if(4>o||o%2!=0)return!1;for(var n=0,s=0,r=0;o>r;r++){var a=i[r].length;3==a&&n++,a==e&&s++}return n==s},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(this.matchListX(t))),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.matchListX=function(t){for(var e=[].concat(t),i=e.length,o=i-1;o>=0;o--){var n=e[o];4==n.length?n.pop():3>n.length&&e.splice(o,1)}return e},e}(t.CombBase);t.CombFeiJi=e,__reflect(e.prototype,"ddz.CombFeiJi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,n=i[1].length;return i.length>2?!1:3==o&&n==e||3==n&&o==e?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSanDai=e,__reflect(e.prototype,"ddz.CombSanDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.checkValidity=function(t){return!1},i.prototype.checkValidityOne=function(t){var e=t,i=e.length;if(5>i)return!1;for(var o=i-1;o>=5;o--)for(var n=void 0,s=void 0,r=o;r>0;r--)if(n=e[r][0].val,s=e[r-1][0].val,s!=n+1)return!1;return!0},i.prototype.checkValidityTwo=function(t){var e=t,i=e.length;if(3>i)return!1;for(var o=i-1;o>=0;o--)if(2!=e[o].length)return!1;for(var n=i-1;n>=3;n--)for(var s=void 0,r=void 0,o=i-1;o>0;o--)if(s=e[o][0],r=e[o-1][0],r.val!=s.val+1)return!1;return!0},i.prototype.checkValidityThree=function(t){var e=t,i=e.length;if(2>i)return!1;for(var o=i-1;o>=0;o--)if(3!=e[o].length)return!1;for(var n=i-1;n>=2;n--)for(var s=void 0,r=void 0,o=n;o>0;o--)if(s=e[o][0],r=e[o-1][0],r.val!=s.val+1)return!1;return!0},i.prototype.match=function(i,o){this.clean(),e.prototype.match.call(this,i,o);for(var n=this._mMapMain,s=n.length-1;s>=0;s--){var r=n[s][0];r.val>=t.PokerValue.POKER_VALUE_TWO&&n.splice(s,1)}return!0},i.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchShunZi(t))},i}(t.CombBase);t.CombShunZi=e,__reflect(e.prototype,"ddz.CombShunZi")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityOne=function(t){return 2==t.length?this.checkValidityXX(t,1):this.checkValidityX(t,1)},e.prototype.checkValidityTwo=function(t){return 2==t.length?this.checkValidityXX(t,2):this.checkValidityX(t,2)},e.prototype.checkValidityX=function(t,e){var i=t,o=i[0].length,n=i[1].length,s=i[2].length;return i.length>3?!1:4==o&&n==e&&s==e||4==n&&o==e&&s==e||4==s&&o==e&&n==e?!0:!1},e.prototype.checkValidityXX=function(t,e){var i=t,o=i[0].length,n=i[1].length;return i.length>2?!1:4==o&&n==2*e||o==2*e&&4==n?!0:!1},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),this.removeMinor(),this.removeKing(i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList()),this._mMatchListMinor||(this._mMatchListMinor=this.getMatchListMinor())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e.prototype.getMatchListMinor=function(){for(var t=this._mMapMinor,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e},e}(t.CombBase);t.CombSiDai=e,__reflect(e.prototype,"ddz.CombSiDai")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.checkValidity=function(t){return!1},e.prototype.checkValidityZD=function(t){var e=t,i=e[0].length;return e.length>1?!1:4==i},e.prototype.checkValidityHJ=function(t){var e=t,i=e[0][0].val+e[1][0].val;return 29==i},e.prototype.match=function(e,i){return this.clean(),t.prototype.match.call(this,e,i),!0},e.prototype.matchList=function(t){this._mMatchList||(this._mMatchList=this.getMatchList())},e.prototype.getMatchList=function(){for(var t=this._mMapMain,e=[],i=t.length-1;i>=0;i--)e.push(t[i]);var o=this._mMapMinor;if(o&&o.length>1){var n=o[0][0],s=o[1][0];n.val+s.val==29&&e.push([n,s])}return e},e}(t.CombBase);t.CombZhaDan=e,__reflect(e.prototype,"ddz.CombZhaDan")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"ddz","DDZGameSkin")||this;return i.isMultipleOpen=!1,i.MenuView.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){this.ImageCenter.visible=!1,this.Mask.visible=!1,this.hideBaseScore(),this.hideTimes(),this.hideMultiple(),this.MenuView.init(),this.PlayerMessage.init(),this.CardView.init(),this.TypeBox.init(),this.hideBtnCardPlayer(),this.initBroadcast(this)},i.prototype.showBaseScore=function(e){switch(e){case.05:this.BaseScore.source=RES.getRes(t.FoldConst.LOW_FOLD);break;case.5:this.BaseScore.source=RES.getRes(t.FoldConst.MEDIUM_FOLD);break;case 1:this.BaseScore.source=RES.getRes(t.FoldConst.HIGH_FOLD)}this.BaseScoreBox.visible=!0},i.prototype.hideBaseScore=function(){this.BaseScoreBox.visible=!1},i.prototype.setTimes=function(t){this.Times.text="X "+t,this.TimesBox.visible=!0},i.prototype.hideTimes=function(){this.TimesBox.visible=!1},i.prototype.hideMultiple=function(){this.MultipleDetails.y=-this.MultipleDetails.height},i.prototype.setMultipleDetails=function(t){var e=t.self_mul,i=t.public_mul,o=t.enemy_mul?t.enemy_mul:1,n=e*i*o;this.setTimes(n),this.MulOpenStart.text=t.seenseencard_mul?"X "+t.seenseencard_mul:"- -",this.MulRob.text=t.roblandlord_mul?"X "+t.roblandlord_mul:"- -",this.MulDouble.text=t.double_mul?"X "+t.double_mul:"- -",this.MulSpring.text=t.spring_mul?"X "+t.spring_mul:"- -",this.MulConSpring.text=t.contrary_spring_mul?"X "+t.contrary_spring_mul:"- -",this.MulBomb.text=t.bomb_mul?"X "+t.bomb_mul:"- -",this.MulAll.text=e+" X "+i+" X "+o+" = "+n},i.prototype.setUserName=function(t,e){this.PlayerMessage.setUserName(t,e)},i.prototype.getUserName=function(t){return this.PlayerMessage.getUserName(t)},i.prototype.setUserMoney=function(t,e){this.PlayerMessage.setUserMoney(t,e)},i.prototype.setUserHead=function(t,e){this.PlayerMessage.setUserHead(t,e)},i.prototype.setUserFrame=function(t,e){this.PlayerMessage.setUserFrame(t,e)},i.prototype.showUser=function(t){this.PlayerMessage.showUser(t)},i.prototype.hideUser=function(t){this.PlayerMessage.hideUser(t)},i.prototype.waitGame=function(){this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.hideBaseScore(),this.MenuView.showStartBtn(),this.CardView.hideBottomBg(),this.MenuView.filishMatch(),this.MenuView.hideDeposit(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF),this.hideTimes(),this.TypeBox.hideTips(),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.hideTypeAll(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.ImageCenter.visible=!0,this.Mask.visible=!0},i.prototype.startGameReq=function(){this.MenuView.hideStartBtn(),this.ImageCenter.visible=!1,this.Mask.visible=!1},i.prototype.onReady=function(){ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),this.hideTimes(),this.hideBaseScore(),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.CardView.hideCardPlayer(),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),t.PokerTextures.cleanAll(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.cleanTableCard(t.DDZPosition.POSITION_SELF),this.cleanTableCard(t.DDZPosition.POSITION_RIGHT),this.cleanTableCard(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.clearBottomCard(),this.MenuView.hideDeposit(),this.MenuView.hideCancerDepsit(t.DDZPosition.POSITION_SELF)},i.prototype.onMatch=function(){ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.hideTimes(),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.CardView.hideBottomBg(),this.hideBtnCardPlayer(),this.CardView.hideCardPlayer(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.MenuView.hideDeposit(),this.MenuView.onMatch(),this.hideBoss(t.DDZPosition.POSITION_SELF),this.hideBoss(t.DDZPosition.POSITION_RIGHT),this.hideBoss(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_RIGHT),this.PlayerMessage.hideUser(t.DDZPosition.POSITION_LEFT),this.hideTypeAll()},i.prototype.onMissCarry=function(e){e&&this.MenuView.missCarryAni(),ObjectPool.clearClass("ddz.Poker","destroy"),this.canserDeposit(t.DDZPosition.POSITION_RIGHT),this.canserDeposit(t.DDZPosition.POSITION_LEFT),this.canserDeposit(t.DDZPosition.POSITION_SELF),t.PokerTextures.cleanAll(),this.clearCard(t.DDZPosition.POSITION_SELF),this.clearCard(t.DDZPosition.POSITION_RIGHT),this.clearCard(t.DDZPosition.POSITION_LEFT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_RIGHT),this.CardView.hideOthersCards(t.DDZPosition.POSITION_LEFT),this.stopTimer(t.DDZPosition.POSITION_SELF),this.stopTimer(t.DDZPosition.POSITION_RIGHT),this.stopTimer(t.DDZPosition.POSITION_LEFT),this.hideTypeAll()},i.prototype.filishMatch=function(){this.MenuView.filishMatch()},i.prototype.startDeal=function(){this.showBottomBg(),this.hideTypeAll(),this.playBoneAni(t.BonesConst.START)},i.prototype.showBottomBg=function(){this.CardView.showBottomBg()},i.prototype.setCardPlayer=function(t,e){this.CardView.setCardPlayer(t,e)},i.prototype.showCardPlayer=function(){this.CardView.showCardPlayer()},i.prototype.hideBtnCardPlayer=function(){this.CardView.hideBtnCardPlayer()},i.prototype.showBtnCardPlayer=function(){this.CardView.showBtnCardPlayer()},i.prototype.deposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.deposit(),this.MenuView.showCancerDepsit(e),this.CardView.showDepositMask(e)):this.TypeBox.showTab(e)},i.prototype.canserDeposit=function(e){e==t.DDZPosition.POSITION_SELF?(this.CardView.cancerDeposit(),this.MenuView.hideCancerDepsit(e),this.CardView.hideDepositMask(e)):this.TypeBox.hideTab(e)},i.prototype.dealCard=function(t){this.CardView.dealCard(t)},i.prototype.clearCard=function(t){this.CardView.clearCard(t)},i.prototype.clearBottomCard=function(){this.CardView.clearBottomCard()},i.prototype.dealOthersOpenCard=function(t,e,i){this.CardView.showOthersOpenCards(t),this.CardView.dealOpenCard(t,e,i)},i.prototype.dealCardOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.dealCardOthers(t,e)},i.prototype.showCardNumberOthers=function(t,e){this.CardView.showOthersCards(t),this.CardView.showOthersCardsNumber(t,e)},i.prototype.setCardNumber=function(t,e){this.CardView.setCardNumber(t,e)},i.prototype.disabledRobBtn=function(t){this.MenuView.disabledRobBtn(t)},i.prototype.showRobBox=function(){this.MenuView.showRobBox(),this.MenuView.hideDoubleBox(),this.MenuView.setHidePlayBox()},i.prototype.hideRobBox=function(){this.MenuView.hideRobBox()},i.prototype.startTimer=function(t,e,i,o){this.MenuView.startTimer(t,e,i,o)},i.prototype.stopTimer=function(t){this.MenuView.stopTimer(t)},i.prototype.showDoubleBox=function(){this.MenuView.hideRobBox(),this.MenuView.setHidePlayBox(),this.MenuView.showDoubleBox()},i.prototype.hideDoubleBox=function(){this.MenuView.hideDoubleBox()},i.prototype.showDeposit=function(){this.MenuView.showDeposit()},i.prototype.hideDeposit=function(){this.MenuView.hideDeposit()},i.prototype.hideOperBtn=function(){this.MenuView.hideOperBtn()},i.prototype.showAlarm=function(t){this.TypeBox.showAlarm(t)},i.prototype.hideAlarm=function(t){this.TypeBox.hideAlarm(t)},i.prototype.showType=function(t,e){this.TypeBox.showType(t,e)},i.prototype.hideType=function(t){this.TypeBox.hideType(t)},i.prototype.hideTypeAll=function(){this.hideType(t.DDZPosition.POSITION_SELF),this.hideType(t.DDZPosition.POSITION_RIGHT),this.hideType(t.DDZPosition.POSITION_LEFT)},i.prototype.showBoss=function(t){this.TypeBox.showBoss(t)},i.prototype.hideBoss=function(t){this.TypeBox.hideBoss(t)},i.prototype.showCard=function(t){this.CardView.showCard(t),this.CardView.setCardDown()},i.prototype.showBottomCard=function(t){this.CardView.showBottomCard(t)},i.prototype.openBottomCard=function(t){this.CardView.openBottomCard(t)},i.prototype.hoverCard=function(t){this.CardView.hoverCard(t)},i.prototype.showTipCards=function(t){this.CardView.showTipCards(t)},i.prototype.toggleCardType=function(t){this.CardView.toggleCardType(t)},i.prototype.getSelectedCard=function(){return this.CardView.getSelectedCard()},i.prototype.showPlayBox=function(t){this.MenuView.hideRobBox(),this.MenuView.hideDoubleBox(),this.MenuView.setVisiblePlayBox(t)},i.prototype.hideBtnPlayBox=function(){this.MenuView.setHidePlayBox()},i.prototype.playCard=function(){this.CardView.playCard()},i.prototype.playCardNotify=function(e,i,o){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.playCardRight(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.playCardLeft(i);break;case t.DDZPosition.POSITION_SELF:o&&this.CardView.playCardSelf(i)}},i.prototype.showTableCard=function(e,i){switch(e){case t.DDZPosition.POSITION_RIGHT:this.CardView.showRightCard(i);break;case t.DDZPosition.POSITION_LEFT:this.CardView.showLeftCard(i);break;case t.DDZPosition.POSITION_SELF:this.CardView.showSelfCard(i)}},i.prototype.openCard=function(t,e){this.CardView.openCard(t,e)},i.prototype.showTips=function(t){this.TypeBox.showTips(t)},i.prototype.getOutCard=function(t){return this.CardView.getOutCard(t)},i.prototype.cleanTableCard=function(t){this.CardView.cleanTableCard(t)},i.prototype.playBoneAni=function(t){this.DDZBones.playAni(t)},i.prototype.toggleMultipleDetails=function(){this.isMultipleOpen=this.isMultipleOpen?!1:!0,this.isMultipleOpen?egret.Tween.get(this.MultipleDetails).to({y:0},100):egret.Tween.get(this.MultipleDetails).to({y:-this.MultipleDetails.height},100),R.sendPlayerAction(t.PointConst.DDZ_POINT.PANEL_NULTIPLE)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.MenuView.addEvent(),this.TimesBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.MenuView.removeEvent(),this.TimesBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleMultipleDetails,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("斗地主 GameView destroy"),this.MenuView.destroy(),this.CardView.destroy(),this.DDZBones.destroy())
},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"ddz.GameView")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"ddz","DDZPopSkin")||this;return i.BalanceView.initComponent(e),i.ClosePoput.initComponent(e),i.init(),i}return __extends(e,t),e.prototype.init=function(){this.GameSet.initSet(),this.Help.initUI()},e.prototype.openHelp=function(){this.Help.showPopup()},e.prototype.openSet=function(){this.GameSet.openPopup()},e.prototype.exchangePoput=function(){this.BalanceView.exchangePoput()},e.prototype.closeExcangePoput=function(){this.BalanceView.closeExcangePoput()},e.prototype.openRecord=function(){this.Record.showPopup()},e.prototype.renderRecord=function(t){this.Record.rankData(t)},e.prototype.openExitPoput=function(){this.ClosePoput.openPopup()},e.prototype.farmerWin=function(){this.BalanceView.farmerWin()},e.prototype.hideWinner=function(){this.BalanceView.hideWinner()},e.prototype.setSelfName=function(t){this.BalanceView.setSelfName(t)},e.prototype.setSelfHead=function(t){this.BalanceView.setSelfHead(t)},e.prototype.setSelfFrame=function(t){this.BalanceView.setSelfFrame(t)},e.prototype.setPlayerName=function(t,e){this.BalanceView.setPlayerName(t,e)},e.prototype.setPlayerBaseScore=function(t,e){this.BalanceView.setPlayerBaseScore(t,e)},e.prototype.setPlayerTimes=function(t,e){this.BalanceView.setPlayerTimes(t,e)},e.prototype.setPlayerMoney=function(t,e){this.BalanceView.setPlayerMoney(t,e)},e.prototype.setPlayerIsBoss=function(t,e){this.BalanceView.setPlayerIsBoss(t,e)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Help.destroy(),this.GameSet.destroy(),this.Record.destroy(),this.BalanceView.destroy(),this.ClosePoput.destroy())},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"ddz.PopView")}(ddz||(ddz={}));var fishjoy;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&App.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){App.setScaleModeNormal()},e}();e.fishjoy=i,__reflect(i.prototype,"fishjoy.Entrance.fishjoy",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(fishjoy||(fishjoy={}));var Player=function(){function t(){this.mIsAgent=!1,this.mAgentId=0,this.mShowUid=0,this.uid=0,this.loginame="",this.nickname="赵日天",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token="",this.isPwdSeted=!1,this.isRegistBytel=!0,this.isOpenEffect=!0}return t.prototype.setPlayerInfo=function(t){t&&(this.playerInfo=t,this.nickname=t.nickname,0!=t.sex&&(this.sex=t.sex),0!=t.avatar&&(this.avatar=t.avatar>0?t.avatar:1),0!=t.avatar_box&&(this.avatar_box=t.avatar_box>0?t.avatar_box:1),this.vip=t.vip,this.honor=t.honor,App.MessageCenter.dispatch(GameConsEvent.Game_UserChangeAccount))},t.prototype.getPlayerInfo=function(){return this.playerInfo},t.prototype.setLoginame=function(t){t&&(this.loginame=t)},t.prototype.getLoginame=function(){return this.loginame},t.prototype.setNickName=function(t){t&&(this.nickname=t)},t.prototype.getNickName=function(){return this.nickname},t.prototype.setUserId=function(t){this.uid=t},t.prototype.getUserId=function(){return this.uid},t.prototype.setSex=function(t){this.sex=t},t.prototype.getSex=function(t){return this.sex},t.prototype.setAvatar=function(t){this.avatar=t},t.prototype.getAvatar=function(){return this.avatar},t.prototype.setAvatarBox=function(t){this.avatar_box=t},t.prototype.getAvatarBox=function(){return this.avatar_box},t.prototype.setMoney=function(t){this.money=t,App.MessageCenter.dispatch(GameConsEvent.Game_UserMoneyChange,{balance:t})},t.prototype.getMoney=function(){return this.money},t.prototype.setSafeMoney=function(t){this.safe_money=t},t.prototype.getSafeMoney=function(){return this.safe_money},t.prototype.setVip=function(t){this.vip=t},t.prototype.getVip=function(){return this.vip},t.prototype.setHonor=function(t){this.honor=t},t.prototype.getHonor=function(){return this.honor},t.prototype.setToken=function(t){this.token=t},t.prototype.getToken=function(){return this.token},t.prototype.setIsPwdSeted=function(t){this.isPwdSeted=t},t.prototype.getIsPwdSeted=function(){return this.isPwdSeted},t.prototype.setIsRegistBytel=function(t){this.isRegistBytel=t},t.prototype.getIsRegistBytel=function(){return this.isRegistBytel},t.prototype.setIsOpenEffect=function(t){this.isOpenEffect=t},t.prototype.getOpenEffect=function(){return this.isOpenEffect},t.prototype.resetPlayer=function(){this.uid=0,this.loginame="",this.nickname="",this.sex=1,this.avatar=1,this.avatar_box=1,this.money=0,this.safe_money=0,this.vip=0,this.honor="",this.token="",this.isPwdSeted=!1,this.isRegistBytel=!0,this.isOpenEffect=!0},t}();__reflect(Player.prototype,"Player");var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.init(),e.update(),e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(){var t="arm_effect";this.initDBRes(t),this.armature=this.createArmature("anim",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,1)},e.prototype.stop=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(t){t.animationName==e.Animation&&(this.armature.stop(),this._mCallBack&&this._mCallBack.call(this._mThisobj))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="1",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.ArmBones=e,__reflect(e.prototype,"fishjoy.ArmBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._mIcon=null,o._mHitPoint=null,o._mNetId=0,o._mIsMaster=!1,o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.Bullet",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mIcon=new eui.Image,this._mHitPoint=new egret.Point,this.mSpeed=10},i.prototype.refresh=function(i){e.prototype.refresh.call(this,i),this._mRender.parent||(this._mParent.addChild(this._mRender),this._mRender.addChild(this._mIcon));var o=t.FishUtil.getCannonConfigById(this.mId);this.mSpeed=o.bullet_speed,this._mIcon.texture=RES.getRes("fishjoy_cannon_json."+o.bullet_assets),this._mIcon.anchorOffsetX=this._mIcon.width/2,this._mIcon.anchorOffsetY=this._mIcon.height/2},i.prototype.updateNetId=function(t){this._mNetId=t},i.prototype.setMaster=function(t){this._mIsMaster=t},i.prototype.update=function(t){e.prototype.update.call(this,t);var i=this.it();if(!(this.isDead()||0>=i)){if(i>30)return void this.updateAddByTime(i);var o=this.mSpeed*i/16;if(this.x<0||this.x>GameBase.GameWidth?(this.x<=0&&(this.x=0),this.x>=GameBase.GameWidth&&(this.x=GameBase.GameWidth),this.mSpeedX=-this.mSpeedX,this.rebound(o)):(this.y<0||this.y>GameBase.GameHeight)&&(this.y<=0&&(this.y=0),this.y>=GameBase.GameHeight&&(this.y=GameBase.GameHeight),this.mSpeedY=-this.mSpeedY,this.rebound(o)),this.getLockFishSId()>0){var n=this._mFish,s=n.getX(),r=n.getY();n.isOut()||!n.isLive?this.setFish(null):this.setRotation(App.MathUtils.getAngle2(this.x,this.y,s,r))}var a=this.x+o*Math.cos(this.mRadian)*this.mSpeedX,h=this.y+o*Math.sin(this.mRadian)*this.mSpeedY;this.setPos(a,h)}},i.prototype.rebound=function(t){var e=this.x+Math.cos(this.mRadian)*this.mSpeedX,i=this.y+Math.sin(this.mRadian)*this.mSpeedY;this.mRotation=App.MathUtils.getAngle2(this.x,this.y,e,i),this.updateDisplayAngel()},i.prototype.setRotation=function(t){this.mRotation=t,this.mRadian=App.MathUtils.getRadian(t),this.updateDisplayAngel()},i.prototype.updateDisplayAngel=function(){this._mRender.rotation=this.mRotation+90},i.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e,this._mHitPoint.x=t,this._mHitPoint.y=e},i.prototype.getHitBound=function(){return this._mHitPoint},i.prototype.getNetId=function(){return this._mNetId},i.prototype.getLockFishSId=function(){return this._mFish?this._mFish.getServerId():0},i.prototype.setFish=function(t){this._mFish=t,this.mSpeedX=1,this.mSpeedY=1},Object.defineProperty(i.prototype,"mIsMaster",{get:function(){return this._mIsMaster},enumerable:!0,configurable:!0}),i.prototype.clean=function(){e.prototype.clean.call(this),this._mIcon&&(this._mIcon.texture=void 0,this._mIcon.$bitmapData=void 0),this._mNetId=0,this._mFish=void 0,this._mIsMaster=!1},i.prototype.destroy=function(){this._mIsDestroy||(this.clean(),e.prototype.destroy.call(this),this._mIcon=void 0)},i}(t.FishJoyBase);t.Bullet=e,__reflect(e.prototype,"fishjoy.Bullet")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this,null)||this;return t._mCurrId=0,t}return __extends(i,e),i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.updateId=function(e){if(this._mCurrId!=e){this._mCurrId=e;var o=t.FishUtil.getCannonConfigById(e),n=o.gun_assets;this.initDBRes(n),this.armature=this.createArmature("Armature",n,i._mActionList),this.armature.y=-14}},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},i.prototype.play=function(){this.armature.play(i.Animation,1)},i.prototype.clean=function(){e.prototype.clean.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mCurrId=0,this.armature=void 0},i.Animation="fire",i._mActionList=[i.Animation],i}(base.BaseGameObject);t.CannonBones=e,__reflect(e.prototype,"fishjoy.CannonBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.No_Rotation_FishIds={},t}();__reflect(e.prototype,"FishCfg");var i=function(i){function o(t,e){var o=i.call(this,t,e)||this;return o.__PoolId=0,o.speedCoefficient=1e4,o._mFishBones=null,o._mFishShandow=null,o._mCurrPointIndex=0,o._mPath={},o._mBitHit=0,o._mIsRunAways=!1,o._mIsTideFish=!1,o._mRenderNum=0,o._mHitRectViewList=[],o._mCurrAngel=0,o._mNextAngel=0,o._mDealAngel=0,o._mHitFilter=[ColorFilters.FilterGold],o.init(),o.__PoolId=t,o}return __extends(o,i),o.create=function(t,e){var i,n=o.__mFishPool["FishPool_"+t];return n&&(i=n.shift()),i||(i=new o(t,e)),i.setParent(e),i.mId=t,i},o.release=function(t){var e=o.__mFishPool["FishPool_"+t.__PoolId];e||(e=[]),t.clean(),e.push(t),o.__mFishPool["FishPool_"+t.__PoolId]=e},o.clearPool=function(){var t=o.__mFishPool;for(var e in t){for(var i=t[e];i.length;){var n=i.pop();n.destroy()}delete t[e]}},o.prototype.init=function(){i.prototype.init.call(this),this._mHitPointList=[],this._mBounds=new egret.Rectangle,this._mFishBones=new t.FishBones,this._mFishShandow=new t.FishShandowBones,this._mTxtId=new egret.TextField,this._mTxtId.size=16,this._mTxtId.width=200,this._mTxtId.anchorOffsetX=100,this._mTxtId.textAlign=egret.HorizontalAlign.CENTER,this._mIconArm=new eui.Image},o.prototype.initRenders=function(){this._mRender.visible=!0,this._mRender.parent&&R.removeFromParent(this._mRender),this._mTideShandowGroup.addChild(this._mFishShandow),this._mParent.addChild(this._mRender),this._mRender.addChild(this._mFishBones),this._mRender.addChild(this._mTxtId),this._mFishBones.updateId("fish_"+this.mId),this._mFishShandow.updateId("shadow_"+this.mId),this.refreshHitPoints(),this._mTxtId.text=""+this.getServerId(),this._mTxtId.visible=t.FishConst.mIsShowFishHit},o.prototype.refreshHitPoints=function(){var e=t.FishUtil.getFishHitRect(this.mId);if(!e)return void egret.error("没有碰撞配置 type:",this.mId);for(var i=this._mHitPointList,o=0,n=e.length-1;n>=o;o++){var s=e[o],r=s.radius,a=i[o];a||(a={},i.push(a)),a.x=s.dot.x,a.y=s.dot.y,a.m_r=r,this._mBitHit<s.dot.x+r&&(this._mBitHit=s.dot.x+r),this._mBitHit<s.dot.y+r&&(this._mBitHit=s.dot.y+r),a.isOnHit=!0}t.FishConst.mIsShowFishHit&&this.refreshHitRect()},o.prototype.refreshHitRect=function(){for(var e=this._mHitPointList,i=this._mHitRectViewList,o=e.length-1;o>=0;o--){var n=e[o],s=i[o];if(s||(s=new egret.Sprite,this._mHitRectViewList.push(s)),t.FishConst.mIsShowFishHit){var r=n.m_r;s.m_r!=r&&(s.graphics.clear(),s.graphics.beginFill(16711680,.3),s.graphics.drawCircle(0,0,r),s.graphics.endFill()),s.x=n.x,s.y=n.y,s.m_r=r,s.parent||this._mRender.addChild(s)}else R.removeFromParent(s)}this._mTxtId.visible=t.FishConst.mIsShowFishHit},o.prototype.refreshFish=function(e,o,n){i.prototype.refresh.call(this,this.mId),this._mPath=e,this._mIsTideFish=null==e,this._mIsTideFish||(this.speedCoefficient=t.FishUtil.getFishSpeedCoef(this.mId)),this.initRenders(),this.updatePos(0,o,n,-1),this.play()},o.prototype.play=function(){this._mFishBones.play(),this._mFishShandow.play()},o.prototype.playDead=function(t){this.tideDied(t),this.setOver(),this.cleanLock(),this._mFishBones.dead(),this._mFishShandow.dead(),this._mFishBones.initPlayedEndCallBack(this.playEnd,this)},o.prototype.tideDied=function(t){this._mIsTideFish&&t&&(this.removeRender(),this._mParent=t,this._mParent.addChild(this._mRender),R.removeFromParent(this._mFishShandow),this._mParent.addChild(this._mFishShandow),this.setPos(this.getX(),this.getY()),this._mIsTideFish=!1)},o.prototype.playEnd=function(){this.setDead()},o.prototype.updatePos=function(t,e,i,n){if(!this._mIsTideFish&&t>=0){this._mCurrPointIndex=t;var s=this.getPoint(this._mCurrPointIndex);this.mSpeed=-1==n?s.s/o.D_Speed:n,this.mSpeed=this.mSpeed*(this.speedCoefficient/1e4),this.mAddSpeed=s.a/o.D_Speed,this.setPos(e?e:s.x,i?i:s.y)}},o.prototype.update=function(t){i.prototype.update.call(this,t);var e=this.it();if(this._mRenderNum++,!(this.isDead()||this.isOver()||0>=e||(this.check(),this._mIsTideFish))){if(e>30)return void this.updateAddByTime(e);if(!this._mIsRunAways&&(this.mRadian=this.checkIsArrive()?this.nextRadian():this.mRadian,this.mRotation+=this._mDealAngel,this.setRotation(),this.mRadian==o.Err_Value))return void this.setDead();this.mSpeed+=this.mAddSpeed;var n=this.mSpeed*e/16,s=this.getX()+n*Math.cos(this.mRadian),r=this.getY()+n*Math.sin(this.mRadian);this.setPos(s,r)}},o.prototype.runAway=function(){this._mIsRunAways=!0,this.mAddSpeed=.5,this._mFishBones.play(5),this._mFishShandow.play(5),this.isOut()&&this.setDead()},o.prototype.setLock=function(){this._mIsLock=!0},o.prototype.cleanLock=function(){this._mIsLock=!1,this.clearArmIcon(),this.clearArmEffect()},o.prototype.addArmIcon=function(){this._mIconArm.parent||(this._mRender.addChild(this._mIconArm),this._mIconArm.texture=RES.getRes("grabfish_ui_arm"),this._mIconArm.x=-this._mIconArm.width/2,this._mIconArm.y=-this._mIconArm.height/2)},o.prototype.clearArmIcon=function(){this._mIsLock=!1,R.removeFromParent(this._mIconArm)},o.prototype.playArmEffect=function(){this._mArmEffect||(this._mArmEffect=new t.ArmBones,this._mArmEffect.initPlayedEndCallBack(this.removeArmEffcet,this)),this._mRender.addChild(this._mArmEffect),this._mArmEffect.play()},o.prototype.removeArmEffcet=function(){this.clearArmEffect(),Log.log("是否是锁定的鱼：",this._mIsLock),this._mIsLock&&this.addArmIcon()},o.prototype.clearArmEffect=function(){this._mArmEffect&&this._mArmEffect.parent&&(this._mArmEffect.stop(),this._mArmEffect.parent.removeChild(this._mArmEffect))},Object.defineProperty(o.prototype,"isLockedFish",{get:function(){var t=this._mIsLock;return t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mIsTideFish",{get:function(){return this._mIsTideFish},enumerable:!0,configurable:!0}),o.prototype.check=function(){if(this._mRenderNum%5==0){var t=this.getX(),e=this.getY(),i=this.getBounds().width/2,o=this.getBounds().height/2,n=-i>t||t>GameBase.GameWidth+i||-o>e||e>GameBase.GameHeight+o;if(this._mIsTideFish){var s=this._mRender.scaleX;(1==s&&t>GameBase.GameWidth+i||-1==s&&-i>t)&&this.setDead()}else(-500>t||t>GameBase.GameWidth+500||-500>e||e>GameBase.GameHeight+500)&&this.setDead();this._mRender.visible=!n}},o.prototype.setRotation=function(){return e.No_Rotation_FishIds[this.mId]?void this.setDirection(this.mRotation>90&&this.mRotation<270?-1:1):(this._mRender.rotation=this.mRotation,void(this._mFishShandow.rotation=this.mRotation))},o.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e,this._mFishShandow.setPosition(t+2,e+80)},o.prototype.setDirection=function(t){this._mRender.scaleX=t,this._mFishShandow.scaleX=t},o.prototype.setYDirection=function(t){e.No_Rotation_FishIds[this.mId]||(this._mRender.scaleY=t,this._mFishShandow.scaleY=t)},o.prototype.setTideGroup=function(t){this._mTideGroup=t},o.prototype.setTideShandowGroup=function(t){this._mTideShandowGroup=t},o.prototype.checkIsArrive=function(){var t=this.getPoint(this._mCurrPointIndex),e=App.MathUtils.getDistance(t.x,t.y,this.getX(),this.getY());return e<this.mSpeed*this.it()/16||1>e},o.prototype.nextRadian=function(){var t=this.getPoint(this._mCurrPointIndex++),e=this.getPoint(this._mCurrPointIndex),i=this.getPoint(this._mCurrPointIndex+1);if(!e)return o.Err_Value;var n=Math.atan2(e.y-t.y,e.x-t.x);if(this._mCurrAngel=App.MathUtils.getAngle360(n),this._mNextAngel=this._mCurrAngel,i){var s=Math.atan2(i.y-e.y,i.x-e.x);this._mNextAngel=App.MathUtils.getAngle360(s)}return this.mRotation=this._mCurrAngel,this.mSpeed=t.s/o.D_Speed,this.mSpeed=this.mSpeed*(this.speedCoefficient/1e4),this.mAddSpeed=t.a/o.D_Speed,this.setPos(t.x,t.y),this._mDealAngel=this.getAngelRotation(n),this.setYDirection(e.x-t.x<0?-1:1),n},o.prototype.getAngelRotation=function(t){var e=this._mNextAngel-this._mCurrAngel;return e>180?e-=360:-180>e&&(e+=360),e/this.getFrames(t)},o.prototype.getFrames=function(t){for(var e=1,i=this.mSpeed,o=this.getX(),n=this.getY(),s=this.mAddSpeed,r=this.getPoint(this._mCurrPointIndex),a=Math.cos(t),h=Math.sin(t);9999>e;e++){i+=s,o+=i*a,n+=i*h;var l=App.MathUtils.getDistance(r.x,r.y,o,n);if(i>l)break}return e},o.prototype.getPoint=function(t){return this._mPath["data_"+t]},o.prototype.hitAction=function(){this._mFishBones.filters=this._mHitFilter,R.setTimeOnce(function(){this._mFishBones.filters=void 0},this,100)},o.prototype.hitTest=function(t){return this.isHit(t.x,t.y)},o.prototype.isHit=function(t,e){var i=this.getX(),o=this.getY();if(!App.HitUtils.pointHitCircle(t,e,i,o,this._mBitHit))return!1;for(var n=this._mHitPointList,s=egret.Point.create(0,0),r=!1,a=n.length-1;a>=0;a--){var h=n[a];if(h.isOnHit&&(this._mRender.localToGlobal(h.x,h.y,s),App.HitUtils.pointHitCircle(t,e,s.x,s.y,h.m_r))){r=!0;break}}return r},o.prototype.getX=function(){return this._mIsTideFish?this.x+this._mTideGroup.x:this.x},o.prototype.getY=function(){return this._mIsTideFish?this.y+this._mTideGroup.y:this.y},o.prototype.isOut=function(){var t=this.getX(),e=this.getY();return 0>t||t>GameBase.GameWidth||0>e||e>GameBase.GameHeight},o.prototype.hitTouch=function(t,e){return this.isDead()||this.isOver()?!1:this.isOut()?!1:this.isHit(t,e)},o.prototype.getBounds=function(){return this._mBounds.width<=0&&this._mFishBones.getBounds(this._mBounds),this._mBounds},o.prototype.restHit=function(){for(var t=this._mHitPointList,e=0,i=t.length-1;i>=e;e++){var o=t[e];o.isOnHit=!1}},o.prototype.clean=function(){i.prototype.clean.call(this),this.restHit(),this._mFishBones.clean(),this._mFishShandow.clean(),this.cleanLock(),this._mRenderNum=0,this._mRender.visible=!1,this._mIsRunAways=!1,this._mIsTideFish=!1,this._mIsLock=!1,this._mFishBones.filters=void 0,this._mIconArm.texture=void 0,this._mParent=void 0,this._mTideGroup=void 0,this._mTideShandowGroup=void 0},o.prototype.destroy=function(){i.prototype.destroy.call(this),this._mIconArm&&(this._mIconArm=void 0);for(var t=this._mHitRectViewList;t.length;)R.removeFromParent(t.pop());this._mHitPointList.length=0,this._mFishBones.destroy(),this._mFishShandow.destroy(),this._mIsLock=!1,this._mIsRunAways=!1,this._mIsTideFish=!1,this._mPath=void 0,this._mParent=void 0,this._mFishBones=void 0,this._mFishShandow=void 0,this._mRender=void 0,this._mHitPointList=void 0,this._mHitFilter=void 0,this._mTideGroup=void 0,this._mTideShandowGroup=void 0,this._mBounds=void 0,this._mHitRectViewList=void 0,this._mArmEffect&&(this.clearArmEffect(),this._mArmEffect.destroy(),this._mArmEffect=void 0)},o.__mFishPool={},o.Err_Value=999999,o.D_Speed=1e4,o}(t.FishJoyBase);t.Fish=i,__reflect(i.prototype,"fishjoy.Fish")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsOver=!1,e}return __extends(e,t),e.create=function(){return ObjectPool.pop("fishjoy.FishBigEffBone")},e.release=function(t){t.clean(),ObjectPool.push(t)},Object.defineProperty(e.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._mIsOver=!1},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.initRes=function(t){var i=t;this.initDBRes(i),this.alpha=.6,i==e.special_large_res?this.armature=this.createArmature("anim",i,e._mActionList2):this.armature=this.createArmature("anim",i,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.visible=!1,t==e.special_large?this.initRes("fish_big_boom"):this.initRes("fish_newBoom"),egret.Tween.get(this).wait(200).call(function(){this.visible=!0,this.armature.play(t,1)}.bind(this),this)},e.prototype.clean=function(){t.prototype.clean.call(this),egret.Tween.removeTweens(this)},e.prototype.armaturePlayEnd=function(t){this._mIsOver=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this),this.armature=void 0},e.small="s",e.middle="m",e.large="l",e.special_large="boom-1",e.special_large_res="fish_big_boom",e._mActionList=[e.small,e.middle,e.large],e._mActionList2=["boom-1"],e}(base.BaseGameObject);t.FishBigEffBone=e,__reflect(e.prototype,"fishjoy.FishBigEffBone")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return t.call(this,null)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.alpha=1,this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){void 0===t&&(t=1),this.armature.play(e.Animation,999999,t)},e.prototype.dead=function(){this.armature.play(e.AnimationDead,2)},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&egret.Tween.get(this).to({alpha:0},500).call(function(){this._mCallBack&&this._mCallBack.call(this._mThisobj)}.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.FishBones=e,__reflect(e.prototype,"fishjoy.FishBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsOver=!1,e}return __extends(e,t),e.create=function(){return ObjectPool.pop("fishjoy.FishHitBulbBones")},e.release=function(t){t.clean(),ObjectPool.push(t)},Object.defineProperty(e.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._mIsOver=!1,this.initRes()},e.prototype.initRes=function(){var t="fishHit_effect";this.initDBRes(t),this.armature=this.createArmature("anim",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,1)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.Animation&&this._mCallBack&&this._mCallBack.call(this._mThisobj),this._mIsOver=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="bulb",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.FishHitBulbBones=e,__reflect(e.prototype,"fishjoy.FishHitBulbBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function e(){this._mIsMaster=!1,this._mPlayerUid=0,this._mPlayerServerIndex=0,this._mPlayerClientIndex=0,this._mCannonId=0,this.mMoney=0,this._mNickName="",this._mCurrBulletCost=0}return e.prototype.initRender=function(t){this._mRender=t,this.refreshMaster()},e.prototype.initPlayerInfo=function(e){this._mPlayerServerIndex=e.server_index,this._mPlayerClientIndex=e.client_index,(3==this._mPlayerClientIndex||4==this._mPlayerClientIndex)&&(this._mRender.isTopSeat=!0),this._mIsMaster=e.server_index==e.masterIndex,this._mCannonId=e.paoId,this._mNickName=e.nick_name,this.mMoney=e.money,this._mPlayerUid=e.uid,t.FishPlayerController.SeaMap[e.server_index]=e.client_index,this.updateCannonCfg()},e.prototype.getRender=function(){return this._mRender},e.prototype.playerExit=function(){this._mNickName="",this.mMoney=0,this._mPlayerUid=0,this._mCannonId=0,this._mPlayerServerIndex=0,this._mPlayerClientIndex=0,Log.log("fishPlayer.playerExit.updateInfo,",this.mMoney,",nick=",this._mNickName),this.updateInfo()},Object.defineProperty(e.prototype,"mPlayerSeaNumber",{get:function(){return this._mPlayerServerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mPlayerClientIndex",{get:function(){return this._mPlayerClientIndex},enumerable:!0,configurable:!0}),e.prototype.refreshMaster=function(){Log.log("fishPlayer.refreshMaster.updateInfo,",this.mMoney,",nick=",this._mNickName),this._mRender.checkMaster(this._mIsMaster),this.updateInfo()},e.prototype.stopHeatEffect=function(){this._mRender.stopHeatEffect()},e.prototype.showChatMessage=function(t,e){this._mRender.showBubble(t,e)},e.prototype.updateInfo=function(){this._mRender.updateCannon(this._mCannonId),this._mRender.updateMoney(this.mMoney),this._mRender.updateName(this._mNickName),Log.log("fishPlayer.updateInfo,",this.mMoney,",nick=",this._mNickName)},e.prototype.updateCannon=function(t){this._mCannonId=t,this._mRender.updateCannon(this._mCannonId),this.updateCannonCfg()},e.prototype.updateMoney=function(t){this.mMoney;this.mMoney=t,this._mRender.updateMoney(this.mMoney)},e.prototype.getCannonCfg=function(){return this._mCurrCannonCfg},e.prototype.updateCannonCfg=function(){if(!(this._mCannonId<=0)){var e=t.FishUtil.getCannonConfigById(this._mCannonId);this._mCurrCannonCfg=e,this._mCurrBulletCost=e.gun_cost}},e.prototype.cost=function(){var e=this.fireNeedMoney(),i=this.mMoney;this.mMoney-=e,Log.log("开炮成功，原始钱",i,"减后：",this.mMoney,"已减：",i-this.mMoney,"应减钱：",e+",基础消耗=",this._mCurrBulletCost,",本场倍率：",t.FishUtil.mFishBaseMultiple),this.updateMoney(this.mMoney)},e.prototype.fireNeedMoney=function(){var e=this._mCurrBulletCost;return e*t.FishUtil.mFishBaseMultiple},e.prototype.fire=function(){this.getRender().fire()},e.prototype.getCannonId=function(){return this._mCannonId},Object.defineProperty(e.prototype,"mIsMaster",{get:function(){return this._mIsMaster},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mNickName",{get:function(){return this._mNickName},enumerable:!0,configurable:!0}),e.prototype.getBulletCost=function(){return this._mCurrBulletCost},e.prototype.getBulletId=function(){return this._mCannonId},e.prototype.getNetId=function(){return this._mCannonId},e.prototype.destroy=function(){this._mRender=void 0,this._mCurrCannonCfg=void 0},e}();t.FishPlayer=e,__reflect(e.prototype,"fishjoy.FishPlayer")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mCurrCannonId=0,t.isShowHeart=!1,t.cali_r=67,t.level=-1,t._mCurrMaxPaoLv=1,t.isChangeByMove=!1,t.cali_step=20,t}return __extends(i,e),i.prototype.initComponent=function(t){e.prototype.initComponent.call(this,t),this.labelLevel.font="fishjoy_font_2_fnt",this.labelLevel.width=200,this.labelLevel.height=80,this.labelLevel.letterSpacing=-10,this.labelLevel.anchorOffsetX=100,this.labelLevel.anchorOffsetY=40,this.labelLevel.textAlign=egret.HorizontalAlign.CENTER,this.labelLevel.scaleX=this.labelLevel.scaleY=.3,this.initial(),this.initCannon()},i.prototype.initCannon=function(){this.mSptPaotai1.visible=!1,this._mCannonBone=new t.CannonBones,this.mSptPaotai.addChild(this._mCannonBone),this.updateCannon(0)},i.prototype.checkMaster=function(t){this.btnCannonAdd&&(this.btnCannonAdd.visible=t,this.btnCannonSub.visible=t,t&&(this.mSptPaotai.touchEnabled=!1,this.mSptPaotai.touchChildren=!1,this.mSptPaotai1.touchEnabled=!1,this.u_noneTips.touchEnabled=!1,this.labelLevel.touchEnabled=!1,this.u_gCalibration.touchChildren=!0,this.u_gCalibration.touchEnabled=!0,this.btnShowCali&&!this.btnShowCali.hasEventListener(egret.TouchEvent.TOUCH_TAP)&&this.btnShowCali.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showCap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopHeatEffect,this))),this.touchEnabled=!1,this.touchChildren=t},i.prototype.updateCannon=function(t){var e=t>0;this.checkNone(e),e&&(this._mCurrCannonId=t,this.updateCannonTxt(t),this._mCannonBone.updateId(t),this.isChangeByMove||this.changeCaliAngle(t),this.fire(),this.setChangeLimit(t))},i.prototype.updateCannonTxt=function(e){var i=t.FishUtil.getCannonConfigById(e);this.labelLevel.text=""+i.gun_cost*t.FishUtil.mFishBaseMultiple/1e4},i.prototype.checkNone=function(t){this.u_info.visible=t,this.u_render.visible=t,this.u_noneTips.visible=!t},i.prototype.scaleCoinEffect=function(){var e=this;t.SoundUtils.playCoinSound(),egret.Tween.removeTweens(this.img_icon),this.img_icon.scaleX=1,this.img_icon.scaleY=1,egret.Tween.get(this.img_icon).to({scaleX:1.2,scaleY:1.2},200).wait(200).to({scaleX:1,scaleY:1},200).call(function(){egret.Tween.removeTweens(e.img_icon)})},i.prototype.updateName=function(t){this.nickName.text=t},i.prototype.initial=function(){this.nickName.text="",this.labelLevel.verticalAlign=egret.VerticalAlign.MIDDLE,this.bubbleGroup.visible=!1,this.bubbleText.text=""},i.prototype.updateMoney=function(t){this.labelCredit.text=""+App.CommonUtils.money2Str(t)},i.prototype.showBubble=function(e,i){this.setBubbleStyle(1,i),this.bubbleGroup.visible=!0;var o=t.TxtPack.getChatTxtByIndex(e);this.bubbleText.text=o,App.EffectUtils.showUI(this.bubbleGroup,200),R.setTimeOutOnly(this.onCleanBubble,this,2e3)},i.prototype.onCleanBubble=function(){this.bubbleGroup.visible=!1},i.prototype.showSeatBubble=function(){App.EffectUtils.stopHeartEffect(this.bubbleGroup),this.isShowHeart=!0,this.setBubbleStyle(2,0),this.bubbleGroup.visible=!0;var e=t.TxtPack.getExplainTxt("90015");this.bubbleText.text=e,App.EffectUtils.showUI(this.bubbleGroup,200),R.setTimeOutOnly(this.heartEffect,this,250)},i.prototype.heartEffect=function(){App.EffectUtils.startHeartEffect(this.bubbleGroup,400)},i.prototype.setBubbleStyle=function(t,e){1==t?(1==e||2==e?this.bubbleText.y=14.5:this.bubbleText.y=24,this.bubbleText.textAlign="left",this.bubbleText.size=15):(this.bubbleText.y=23.5,this.bubbleText.textAlign="center",this.bubbleText.size=18)},i.prototype.stopHeatEffect=function(){this.isShowHeart&&(App.EffectUtils.stopHeartEffect(this.bubbleGroup),this.onCleanBubble())
},i.prototype.setChangeLimit=function(e){if(this.btnCannonAdd){this.btnCannonSub.enabled=!0,this.btnCannonAdd.enabled=!0;var i=parseInt((""+e).substr(1)),o=1>=i&&!t.FishUtil.getCannonConfigById(e-1),n=i>1&&!t.FishUtil.getCannonConfigById(e+1);o?this.btnCannonSub.enabled=!1:n&&(this.btnCannonAdd.enabled=!1)}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnCannonAdd&&(this.btnCannonAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnCannonSub.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnMin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMin,this),this.btnMax.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMax,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLvByCalib,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.changeLvOnMove,this),this.caliTouch.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.changeLvByCalib,this))},i.prototype.onTouchTap=function(e){var i=e.currentTarget==this.btnCannonAdd;(!i||this.btnCannonAdd.enabled)&&(i||this.btnCannonSub.enabled)&&(t.SoundUtils.playplusSound(),this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:i,levels:-1}))},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnCannonAdd&&(this.btnCannonAdd.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnCannonSub.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.btnShowCali.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showCap,this),this.btnMin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMin,this),this.btnMax.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLevelMax,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeLvByCalib,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.changeLvOnMove,this),this.caliTouch.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.changeLvByCalib,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopHeatEffect,this))},i.prototype.updateCalibration=function(t){if(this.u_gCalibration){var e=t,i=App.MathUtils.getRadian(e),o=Math.cos(i)*this.cali_r+this.lightBg.x,n=Math.sin(i)*this.cali_r+this.lightBg.y;this.u_Calib.x=o,this.u_Calib.y=n,this.u_Calib.rotation=e+90}},i.prototype.setBowAngle=function(t){this.mSptPaotai.rotation=t+90,this.isTopSeat?this.labelLevel.rotation=this.mSptPaotai.rotation-180:this.labelLevel.rotation=this.mSptPaotai.rotation},i.prototype.fire=function(){this._mCannonBone.play()},i.prototype.update=function(){},i.prototype.showCap=function(t){void 0===t&&(t=null),this.stopHeatEffect()},i.prototype.initCapData=function(){var t=this.getMax();this._mCurrMaxPaoLv=parseInt((""+t).substr(1)),this.cali_step=180/(this._mCurrMaxPaoLv-1)},i.prototype.getMax=function(){for(var e=this._mCurrCannonId;;){var i=t.FishUtil.getCannonConfigById(e);if(!i)break;e++}return e-1},i.prototype.tweenComplete=function(){this.u_gCalibration.visible=!this.u_gCalibration.visible},i.prototype.changeLvByCalib=function(e){this.changeLvOnMove(e),this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:this.level})},i.prototype.changeLvOnMove=function(t){this.isChangeByMove=!0;var e=App.MathUtils.getAngle2(this.lightBg.x,this.lightBg.y,t.localX,t.localY);-170>=e&&(e=-170),e>=-11&&(e=-11);var i=App.MathUtils.getRadian(e),o=Math.cos(i)*this.cali_r+this.lightBg.x,n=Math.sin(i)*this.cali_r+this.lightBg.y;this.u_Calib.x=o,this.u_Calib.y=n,this.u_Calib.rotation=e+90+this.cali_step,this.level=1e3*Math.floor(this._mCurrCannonId/1e3)+this.getLevelByAngle(e),this.updateCannonTxt(this.level)},i.prototype.changeLevelMin=function(e){this.isChangeByMove=!1;var i=1e3*Math.floor(this._mCurrCannonId/1e3)+1;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i})},i.prototype.changeLevelMax=function(e){this.isChangeByMove=!1;var i=1e3*Math.floor(this._mCurrCannonId/1e3)+this._mCurrMaxPaoLv;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i})},i.prototype.changeCaliAngle=function(t){var e=parseInt((""+t).substr(1));Log.log("换炮返回：levelss="+e);var i=e*this.cali_step+180;i-=this.cali_step,this.updateCalibration(i)},i.prototype.getLevelByAngle=function(t){var e=-1,i=Math.abs(t);return e=i/this.cali_step,e=this._mCurrMaxPaoLv-Math.floor(e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.btnCannonAdd.filters=void 0,this.btnCannonSub.filters=void 0,this.isTopSeat=!1},i}(BaseEuiComponent);t.FishPlayerRender=e,__reflect(e.prototype,"fishjoy.FishPlayerRender")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return t.call(this,null)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.alpha=.5,this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){void 0===t&&(t=1),this.armature.play(e.Animation,999999,t)},e.prototype.dead=function(){this.armature.play(e.AnimationDead,2)},e.prototype.clean=function(){t.prototype.clean.call(this),this.rotation=0,this.scaleX=1,this.scaleY=1},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&egret.Tween.get(this).to({alpha:0},500).call(function(){this._mCallBack&&this._mCallBack.call(this._mThisobj)}.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.FishShandowBones=e,__reflect(e.prototype,"fishjoy.FishShandowBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._currState="",e}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,3)},e.prototype.stop=function(){this.armature.stop()},e.Animation="move",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.GoldBones=e,__reflect(e.prototype,"fishjoy.GoldBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.GoldEff",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.getGold=function(){var e=i.GoldList.pop();return e||(e=new t.GoldBones),e},i.relGold=function(t){i.GoldList.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mGoldList=[],this._mGoldLabel=new eui.BitmapLabel},i.prototype.setMaster=function(t){this._mRender&&(this._mRender.filters=t?null:[ColorFilters.FilterGray])},i.prototype.createGoldList=function(e,o,n){for(var s,r=22*Math.min(o,5),a=o>5?30:0,h=0;o>h;h++){s=i.getGold(),s.updateId("gold_effect"),this._mGoldList.push(s),this._mRender.addChild(s),s.play(),s.m_i=h+1,s.visible=!1,s.x=this.getFixX(2*r)+45*Math.floor(h%5)-r,s.y=this.fixY+66*Math.floor(h/5)-a;var l=App.MathUtils.getDistance(this.x,this.y,e.x,e.y),p=egret.Tween.get(s);p.wait(i.GoldWaitTime+200+h*App.MathUtils.randomInt(15,30)).to({visible:!0}).to({scaleX:.8,scaleY:1.1,y:s.y-80},300,egret.Ease.sineOut).to({scaleX:1.1,scaleY:.8,y:s.y},180).to({scaleX:.8,scaleY:1.1,y:s.y-30},180).to({scaleX:1,scaleY:1,y:s.y},120).wait(100*Math.floor(h%5)).to({x:e.x,y:e.y},l/1.5).call(function(e){App.MessageCenter.dispatch(t.FishConst.scale_coin_effect,n),e.visible=!1}.bind(this,s))}App.TimerManager.doTimer(3e3,1,this.remove,this)},i.prototype.remove=function(){this.setDead()},i.prototype.createLabel=function(t,e){var o=this._mGoldLabel;e>0?(this._mGoldLabel.font="fishjoy_baoji_fnt",this._mGoldLabel.letterSpacing=-10,o.text=t/1e4+"x"+e):(this._mGoldLabel.font="fishjoy_font_2_fnt",this._mGoldLabel.letterSpacing=-10,o.text=""+t/1e4),o.x=this.getFixX(o.width),o.y=this.fixY,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.scaleX=o.scaleY=o.alpha=0,o.visible=!0,this._mRender.addChild(o),egret.Tween.get(o).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.backOut).wait(i.GoldWaitTime).call(function(t){t.visible=!1}.bind(this,o)),"+0"==o.text&&egret.error("金币=====+0",t)},i.prototype.initRenders=function(){this._mRender.parent||this._mParent.addChild(this._mRender)},i.prototype.refreshGold=function(t,i,o,n,s){void 0===s&&(s=0),e.prototype.refresh.call(this,0),this.initRenders(),this.createGoldList(t,n,o),this.createLabel(i,s)},i.prototype.setPos=function(t,e){this.x=t,this.y=e},i.prototype.getFixX=function(t){var e=t/2,i=this.x;return i+e>GameBase.GameWidth?i=GameBase.GameWidth-e:0>i-e&&(i=e),i},Object.defineProperty(i.prototype,"fixY",{get:function(){var t=this.y;return 120>t&&(t=120),t>500&&(t=500),t},enumerable:!0,configurable:!0}),i.prototype.clean=function(){e.prototype.clean.call(this);for(var t=this._mGoldList;t.length;){var o=t.pop();o.clean(),o.stop(),egret.Tween.removeTweens(o),i.relGold(o)}this._mRender.filters=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this);for(var t=i.GoldList;t.length;){var o=t.pop();egret.Tween.removeTweens(o),o.destroy()}this._mGoldLabel&&(this._mGoldLabel.parent&&this._mGoldLabel.parent.removeChild(this._mGoldLabel),this._mGoldLabel=void 0),this._mGoldList=void 0},i.GoldList=[],i.GoldWaitTime=800,i}(t.FishJoyBase);t.GoldEff=e,__reflect(e.prototype,"fishjoy.GoldEff")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.GoldSpecial",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mGoldBone=new t.GoldSpecialBone,this._mGoldLabel=new eui.BitmapLabel,this._mGoldLabel.font="fishjoy_font_2_fnt",this._mGoldLabel.letterSpacing=-10,this._mGoldLabel.width=200,this._mGoldLabel.height=50,this._mGoldLabel.textAlign=egret.HorizontalAlign.CENTER,this._mGoldLabel.anchorOffsetX=100,this._mGoldLabel.anchorOffsetY=25},i.prototype.updateBone=function(t){this._mRender.addChild(this._mGoldBone),this._mGoldBone.updateId(t),this._mGoldBone.addCallBack(this.callBack,this)},i.prototype.callBack=function(){this.setDead()},i.prototype.createLabel=function(t){var e=this._mGoldLabel;e.text=""+t/1e4,e.scaleX=e.scaleY=e.alpha=0,e.y=62,this._mRender.addChild(e)},i.prototype.initRenders=function(){this._mRender.parent||this._mParent.addChild(this._mRender)},i.prototype.refreshGold=function(t,i){e.prototype.refresh.call(this,0),this.initRenders(),this.updateBone(i),this.createLabel(t),R.setTimeOut(this.play,this,800)},i.prototype.play=function(){this._mGoldBone.play(),egret.Tween.get(this._mGoldLabel).to({scaleX:.6,scaleY:.6,alpha:1},200,egret.Ease.backOut)},i.prototype.setPos=function(t,e){this.x=t,this.y=e,this._mRender.x=t,this._mRender.y=e},i.prototype.clean=function(){e.prototype.clean.call(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this._mGoldLabel),this._mGoldBone.clean(),this._mRender.filters=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mGoldBone.destroy(),this._mGoldBone=void 0},i}(t.FishJoyBase);t.GoldSpecial=e,__reflect(e.prototype,"fishjoy.GoldSpecial")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.getAni="",e.stayAni="",e._mId=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.visible=!1,this._mId=t,e.__Name[""+this._mId]||(egret.error("没有这个鱼的动画 type：",this._mId),this._mId=5002),this.getAni=e.__Name[""+this._mId].get,this.stayAni=e.__Name[""+this._mId].stay;var i="goldSpecial";this.initDBRes(i),this.armature=this.createArmature("badge-anim",i,e._mActionList),this.armature.addCompleteCallFunc(this.callBack,this)},e.prototype.callBack=function(t){t.animationName==this.getAni?this.armature.play(this.stayAni,20):this._mCallBack&&this._mCallBack.call(this._mThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.visible=!0,this.armature.play(this.getAni,1)},e.prototype.addCallBack=function(t,e){this._mCallBack=t,this._mThisObj=e},e.prototype.stop=function(){this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this),this.stop()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.resName="goldSpecial",e.boneName="badge-anim",e._mActionList=["badge dragon","badge girl","badge fish","badge dragon1","badge girl1","badge fish1"],e.__Name={5003:{get:"badge dragon",stay:"badge dragon1"},5002:{get:"badge girl",stay:"badge girl1"},5001:{get:"badge fish",stay:"badge fish1"}},e}(base.BaseGameObject);t.GoldSpecialBone=e,__reflect(e.prototype,"fishjoy.GoldSpecialBone")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._mNetBones=null,o.init(),o}return __extends(i,e),i.create=function(t,e){return ObjectPool.pop("fishjoy.Net",t,e)},i.release=function(t){t.clean(),ObjectPool.push(t)},i.prototype.init=function(){e.prototype.init.call(this),this._mNetBones=new t.NetBones},i.prototype.initRenders=function(){this._mRender.parent||(this._mParent.addChild(this._mRender),this._mRender.addChild(this._mNetBones)),this._mNetBones.updateId(this.mId)},i.prototype.refreshNet=function(t){e.prototype.refresh.call(this,t),this.initRenders(),this.play()},i.prototype.play=function(){this._mNetBones.play(),this._mNetBones.initPlayedEndCallBack(this.playEnd,this)},i.prototype.playEnd=function(){this.setDead()},i.prototype.setPos=function(t,e){this._mRender.x=this.x=t,this._mRender.y=this.y=e},i.prototype.clean=function(){e.prototype.clean.call(this),this._mNetBones.clean()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mNetBones.destroy(),this._mNetBones=void 0},i}(t.FishJoyBase);t.Net=e,__reflect(e.prototype,"fishjoy.Net")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){return e.call(this,null)||this}return __extends(i,e),i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.updateId=function(e){var o=t.FishUtil.getCannonConfigById(e),n=o.bullet_net_assets;this.initDBRes(n),this.armature=this.createArmature("Armature",n,i._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},i.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},i.prototype.play=function(){this.armature.play(i.Animation,1)},i.prototype.armaturePlayEnd=function(t){t.animationName==i.Animation&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},i.Animation="open",i._mActionList=[i.Animation],i}(base.BaseGameObject);t.NetBones=e,__reflect(e.prototype,"fishjoy.NetBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=1;27>=e;e++){var i=10>e?"0"+e:""+e;t.push("shui00"+i+"_jpg")}this.initMc(t,10),this.blendMode=egret.BlendMode.ADD},e}(SpriteMovieClip);t.WaterMC=e,__reflect(e.prototype,"fishjoy.WaterMC")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.init=function(){this.touchEnabled=!1,this.touchChildren=!1,this._mPartcile=new BaseParticleObj,this._mPartcile.init("fish_bulb"),this.addChild(this._mPartcile),this._mTideWave=new BaseParticleObj,this._mTideWave.init("transPartical"),this._mTideWave.y=70,this.addChild(this._mTideWave),this._mTideWave.visible=!1,this._mTxtTip=new eui.Image,this._mTxtTip.texture=RES.getRes("grabfish_ui_text01_png"),this._mTxtTip.anchorOffsetX=this._mTxtTip.width/2,this._mTxtTip.anchorOffsetY=this._mTxtTip.height,this._mTxtTip.x=GameBase.GameWidth/2,this._mTxtTip.y=GameBase.GameHeight-300,this.addChild(this._mTxtTip)},i.prototype.play=function(t){this._directionss=t,this.visible=!0,this.playTxtEff()},i.prototype.playTxtEff=function(){this._mTxtTip.visible=!0,this._mTxtTip.alpha=1,this._mTxtTip.scaleX=this._mTxtTip.scaleY=0,egret.Tween.removeTweens(this._mTxtTip),egret.Tween.get(this._mTxtTip).to({scaleX:1,scaleY:1},300,egret.Ease.backOut).wait(800).to({alpha:0},300).wait(500).call(function(){this._mTxtTip.visible=!1,this.playWave()}.bind(this),this)},i.prototype.playWave=function(){this.dispatchEvent(new egret.Event(i.WAVE_START)),t.SoundUtils.playWaveSound(),this._mPartcile.play(),this._mPartcile.x=-120,this._mPartcile.y=-180,this.waveParti()},i.prototype.waveParti=function(){this._mTideWave.visible=!0;var t=this._directionss;this._mTideWave.x=t>0?-300:1520,this._mTideWave.scaleX=-t,this._mTideWave.play(),this._mTideWave&&egret.Tween.removeTweens(this._mTideWave),egret.Tween.get(this._mTideWave,{onChange:this.waveMove,onChangeObj:this}).to({x:t>0?1520:-300},2200).call(this.stopWave,this)},i.prototype.waveMove=function(){var t=this._mTideWave.x;this.dispatchEvent(new egret.Event(i.WAVE_MOVE,!1,!1,t))},i.prototype.stopWave=function(){this.dispatchEvent(new egret.Event(egret.Event.COMPLETE)),this._mTideWave.stop(),this._mTideWave.visible=!1,this.visible=!1},i.prototype.destroy=function(){egret.Tween.removeTweens(this._mTxtTip),R.removeFromParent(this),this.removeChildren(),this._mTideWave.destroy(),this._mPartcile.destroy(),this._mTxtTip.texture=void 0,this._mTxtTip=void 0,this._mPartcile=void 0,this._mTideWave=void 0},i.WAVE_MOVE="wave_move",i.WAVE_START="wave_start",i}(egret.DisplayObjectContainer);t.TideWave=e,__reflect(e.prototype,"fishjoy.TideWave")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.mIsShowFishHit=!1,t.CannonPosList=[[],[369,595],[751,595],[755,36],[348,36]],t.coinPosList=[[],[100,610],[900,610],[900,54],[94,54]],t.onPlayerEnterCallBack="11001",t.onPlayerLeaveCallBack="11002",t.onDistributeCallBack="11003",t.onPlayerFireCallBack="11004",t.onGameStatusCallBack="11005",t.onDeadFishsCallBack="11006",t.onTideComingPrepareCallBack="11007",t.onSwitchSceneCallBack="11008",t.onChangeGunCallBack="11009",t.onReConnetCallBack="11010",t.onBossComingCallBack="11011",t.onFishTimeSyscCallBack="11012",t.onFishUnlockCallBack="11013",t.onFishChatBack="11014",t.onOffsetFishNotify="11015",t.boLangChange="boLangChange",t.Player_Change_Cannon="Player_Change_Cannon",t.CLICKBACKROOM="ClickBackRoom",t.CLICKBACKLOBBY="ClickBackLobby",t.PLAYER_CHAT="playerChat",t.scale_coin_effect="scale_coin_effect",t.hide_master_paopao="hide_master_paopao",t.fish_move_dead="fish_move_dead",t}();t.FishConst=e,__reflect(e.prototype,"fishjoy.FishConst")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.ScFishPlayerEnterNotifyType=11201]="ScFishPlayerEnterNotifyType",t[t.ScFishPlayerLeaveNotifyType=11202]="ScFishPlayerLeaveNotifyType",t[t.CsFishPlayerReadyReqType=11203]="CsFishPlayerReadyReqType",t[t.ScFishDistributeNotifyType=11204]="ScFishDistributeNotifyType",t[t.CsFishPlayerFireReqType=11205]="CsFishPlayerFireReqType",t[t.ScFishFireNotifyType=11206]="ScFishFireNotifyType",t[t.ScFishGameStatusNotifyType=11207]="ScFishGameStatusNotifyType",t[t.CsFishCollidedNotifyType=11208]="CsFishCollidedNotifyType",t[t.ScFishDeadFishesNotifyType=11209]="ScFishDeadFishesNotifyType",t[t.ScFishSwitchSceneNotifyType=11210]="ScFishSwitchSceneNotifyType",t[t.CsFishChangeGunReqType=11211]="CsFishChangeGunReqType",t[t.ScFishChangeGunNotifyType=11212]="ScFishChangeGunNotifyType",t[t.ScFishBossComingNotifyType=11213]="ScFishBossComingNotifyType",t[t.CsFishChatReqType=11214]="CsFishChatReqType",t[t.ScFishChatNotifyType=11215]="ScFishChatNotifyType",t[t.ScFishOffsetGroupNotifyType=11216]="ScFishOffsetGroupNotifyType"}(e=t.ProxyConst||(t.ProxyConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Guide=1102]="Guide",t[t.Setting=1103]="Setting",t[t.ChangeCanon=1104]="ChangeCanon",t[t.help=1105]="help"}(e=t.ViewsConst||(t.ViewsConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mBulletList=null,i._mBulletCount=0,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mBulletList=[]},i.prototype.createBullet=function(e,i,o,n,s,r,a,h,l,p){if(!(GameBase.getCurrServerTime()-p>6e5)){var c=t.Bullet.create(i,n);c.setRotation(a),c.refresh(i),c.setServerId(e),c.setPos(s,r),c.updateNetId(o),c.setFish(h),c.setMaster(l),c.setTime(p),this._mBulletList.push(c),l&&this._mBulletCount++}},i.prototype.removeBullet=function(t){for(var e=this._mBulletList.length-1;e>=0;e--){var i=this._mBulletList[e];if(i.getServerId()==t)return void i.setDead()}},Object.defineProperty(i.prototype,"isMasterBulletFull",{get:function(){return this._mBulletCount>=30?!0:!1},enumerable:!0,configurable:!0}),i.prototype.getBulletByIndex=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];if(o.getServerId()==t)return o}return null},i.prototype.cleanBulletFish=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];o.getLockFishSId()==t&&o.setFish(void 0)}},i.prototype.gotoHitFish=function(t){for(var e=this._mBulletList,i=e.length-1;i>=0;i--){var o=e[i];o.mIsMaster&&o.isLive&&o.setFish(t)}},i.prototype.update=function(e){for(var i=this._mBulletList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()?(this._mBulletList.splice(o,1),n.mIsMaster&&(this._mBulletCount-=1),t.Bullet.release(n)):n.update(e)}},i.prototype.getList=function(){return this._mBulletList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mBulletList;e.length;){var i=e.pop();t.Bullet.release(i)}},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=this._mBulletList;t.length;){var i=t.pop();i.destroy()}this._mBulletList=void 0,ObjectPool.clearClass("fishjoy.Bullet","destroy")},i}(base.GameSeparateCtrl);t.BulletController=e,__reflect(e.prototype,"fishjoy.BulletController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mPathList={},i._mIsMirror=!1,i.__ct=0,i._mTideSpeed=0,i._mTideDirection=0,i._mTideDuration=0,i._mTideStartTime=0,i._mTideId=0,i._mTideInited=!1,i._mTideRunning=!1,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mFishList=[]},i.prototype.createFish=function(e,i,o,n,s,r,a,h){var l,p=t.Fish.create(i,n);if(!a){if(!(o>0))return void Log.error("路径配置 pathId：",o);l=h?this.getOffsetPath(o,h):this.getPath(o)}return p.setTideShandowGroup(s),p.setServerId(e),p.refreshFish(l),p.setTime(r),this._mFishList.push(p),p},i.prototype.getPath=function(t){var e=this._mPathList["fish_path"+t];if(e)return e;var i=RES.getRes("fish_path"+t+"_json");if(!i||!i.data||i.data.length<=0)return void Log.warn("没有这个路径配置：",t);var o=i.data;e={};for(var n=0,s=o.length;s>n;n++)e["data_"+n]=App.CommonUtils.copyDataHandler(o[n]);if(this._mIsMirror)for(var r in e)e[r].y=GameBase.GameHeight-e[r].y;return this._mPathList["fish_path"+t]=e,e},i.prototype.getOffsetPath=function(t,e){var i=this._mPathList["fish_path"+t],o=RES.getRes("fish_path"+t+"_json");if(!o||!o.data||o.data.length<=0)return void Log.warn("没有这个路径配置：",t);var n=o.data;i={};for(var s=0,r=n.length;r>s;s++)i["data_"+s]=App.CommonUtils.copyDataHandler(n[s]);for(var a in i)i[a].x=i[a].x+e.x,i[a].y=i[a].y+e.y;if(this._mIsMirror)for(var a in i)i[a].y=GameBase.GameHeight-i[a].y;return i},i.prototype.setMirror=function(t){this._mIsMirror=t},i.prototype.removeFish=function(t){var e=this.getFish(t);e&&e.setDead()},i.prototype.getFish=function(t){for(var e=this._mFishList,i=e.length-1;i>=0;i--){var o=e[i];if(o.getServerId()==t)return o}return null},i.prototype.getTouchFish=function(t,e){for(var i=this._mFishList,o=i.length-1;o>=0;o--){var n=i[o];if(n.hitTouch(t,e))return n}return null},i.prototype.getHightFish=function(){for(var t,e=this._mFishList,i=0,o=0,n=e.length-1;n>=o;o++){var s=e[o];!s.isOut()&&s.isLive&&s.mId>i&&(i=s.mId,t=s)}return t},i.prototype.clearArmIcon=function(){for(var t=this._mFishList,e=t.length,i=0;e>i;i++){var o=t[i];o.cleanLock()}},i.prototype.update=function(e){for(var i=this.dt(e),o=this._mFishList,n=o.length-1;n>=0;n--){var s=o[n];s.isDead()?(o.splice(n,1),t.Fish.release(s)):s.update(e)}this.updateTide(i)},i.prototype.dt=function(t){var e=this.__ct-t;return e=e>0?e:16,this.__ct=t,e},i.prototype.runAway=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--){var i=t[e];i&&i.isLive&&i.runAway()}},i.prototype.refreshHitRect=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--)t[e].refreshHitRect()},i.prototype.clean=function(){for(var e=this._mFishList;e.length;){var i=e.pop();t.Fish.release(i)}},Object.defineProperty(i.prototype,"gameController",{get:function(){return this.getController()},enumerable:!0,configurable:!0}),i.prototype.getList=function(){return this._mFishList},i.prototype.destroy=function(){this.cleanTide(),e.prototype.destroy.call(this);for(var i=this._mFishList;i.length;)this._mFishList.pop().destroy();this._mFishList=void 0,this._mPathList=void 0,t.Fish.clearPool(),ObjectPool.clearClass("fishjoy.Fish","destroy")},i.prototype.tideInitData=function(t){var e=t;this._mTideSpeed=e.speed/1e4,this._mTideDuration=e.duration,this._mTideDirection=e.direction,this._mTideInitFishList=[].concat(e.list),this._mTideInitFishList.sort(function(t,e){return Math.abs(t.x)==Math.abs(e.x)?Math.abs(t.y)-Math.abs(e.y):Math.abs(e.x)-Math.abs(t.x)})},i.prototype.onTideInitFish=function(){var t=this._mTideInitFishList;if(t&&!(t.length<=0)){var e=this.gameController.gameView,i=e.mFishGroupTide,o=e.mShandowGroup,n=this._mTideDirection,s=i.x;o.x=i.x;for(var r=egret.getTimer(),a=t.length-1;a>=0;a--){var h=t[a],l=s+h.x;if(1==n&&l>1380||-1==n&&-260>l||!this.isFishLiveTide(h.fish_id))t.splice(a,1);else if(l>=-260&&1380>=l){t.splice(a,1);var p=h.fish_type,c=this.createFish(h.fish_id,p,-1,e.getFishLay(p,!0),o,0,!0),u=this._mIsMirror?GameBase.GameHeight-h.y:h.y;if(c.setPos(h.x,u),c.setTideGroup(i),c.setDirection(n),egret.getTimer()-r>5)break}}t.length<=0&&Log.warn("----------------------- 鱼潮刷新完成完成！ -----------------------")}},i.prototype.isFishLiveTide=function(t){return!this._mTideFishs||this._mTideFishs&&1==this._mTideFishs[""+t]},i.prototype.tideGo=function(e,i,o){t.SoundUtils.playTideBGM(),this.cleanTide(),this._mTideStartTime=e,this._mTideId=i,this.pTideFishs(o),this._mTideInited=!0,App.TimerManager.doFrame(1,999999,this.tideStart,this)},i.prototype.pTideFishs=function(t){if(t){this._mTideFishs={};for(var e=t.length-1;e>=0;e--){var i=t[e];this._mTideFishs[""+i.fish_id]=1}}},i.prototype.tideStart=function(){if(!(GameBase.getCurrServerTime()-this._mTideStartTime<0)){App.TimerManager.remove(this.tideStart,this);var t=RES.getRes("fish_tide"+this._mTideId+"_json");if(!t)return void Log.error("没有鱼潮配置：",this._mTideId);this.tideInitData(t),this.synchronize(),this.onTideInitFish(),this._mTideRunning=!0}},i.prototype.synchronize=function(){var t=GameBase.getCurrServerTime()-this._mTideStartTime,e=Math.floor(t/16);if(this.gameController&&this.gameController.gameView){var i=this.gameController.gameView,o=i.mFishGroupTide,n=i.mShandowGroup,s=1==this._mTideDirection?0:GameBase.GameWidth;s+=this._mTideDirection*this._mTideSpeed*e,n.x=o.x=s}},i.prototype.updateTide=function(e){if(this._mTideRunning){this.onTideInitFish();var i=GameBase.getCurrServerTime();return i-this._mTideStartTime>1e3*this._mTideDuration?(this.cleanTide(),this._mTideRunning=!1,t.SoundUtils.playBGM(),void Log.log("----------------------- 鱼潮结束！ -----------------------")):void this.synchronize()}},Object.defineProperty(i.prototype,"mIsTideRunning",{get:function(){return this._mTideRunning||this._mTideInited},enumerable:!0,configurable:!0}),i.prototype.cleanTideFish=function(){for(var t=this._mFishList,e=t.length-1;e>=0;e--){var i=t[e];i.mIsTideFish&&i.setDead()}},i.prototype.cleanTide=function(){this.cleanTideFish();var t=this.gameController.gameView;t.mFishGroupTide.removeChildren(),t.mShandowGroup.removeChildren(),t.mShandowGroup.x=0,t.mFishGroupTide.x=0,this._mTideRunning=!1,this._mTideSpeed=0,this._mTideDuration=0,this._mTideDirection=0,this._mTideStartTime=0,this._mTideInited=!1,this._mTideFishs=void 0,this._mTideInitFishList=void 0},i}(base.GameSeparateCtrl);t.FishController=e,__reflect(e.prototype,"fishjoy.FishController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mMasterIndexWorld=1,i._mMasterIndex=0,i._mMaster=null,i._mFishPlayers=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mFishPlayers=[null];for(var i=0;4>i;i++)this._mFishPlayers.push(new t.FishPlayer)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this)},i.prototype.initFishPlayerRender=function(t,e){var i=this.getPlayer(t);i.initRender(e),i.mIsMaster&&i.getRender().showSeatBubble(),t>2&&i.getRender().setBowAngle(90)},i.prototype.addPlayer=function(t,e){Log.log("controller.addPlayer。updateInfo",e,",index=",t);var i=this.getPlayer(t);i.initPlayerInfo(e),i.updateInfo()},i.prototype.exitPlayer=function(t){this.getPlayer(t).playerExit()},i.prototype.refreshPlayer=function(t){this.getPlayer(t).updateInfo()},i.prototype.masterFire=function(t){var e=this.master;e.fire(),e.getRender().setBowAngle(t)},i.prototype.checkMoneyEnough=function(){var t=!0,e=this.master;return Log.log("发炮请求前，检测钱是否足够：money=",e.mMoney,",needMoney=",e.fireNeedMoney()),(e.mMoney<=0||e.mMoney<e.fireNeedMoney())&&(t=!1),t},i.prototype.scaleCoinEffect=function(t){this.getPlayer(t).getRender().scaleCoinEffect()},i.prototype.hideCali=function(){var t=this.master;1==t.getRender().u_gCalibration.visible&&t.getRender().showCap()},Object.defineProperty(i.prototype,"masterIndex",{get:function(){return this.master.mPlayerClientIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"masterServerSeaNumber",{get:function(){return this.master.mPlayerSeaNumber},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"master",{get:function(){if(this._mMaster)return this._mMaster;for(var t=this._mFishPlayers.length-1;t>=1;t--){var e=this._mFishPlayers[t];if(e.mIsMaster)return this._mMaster=e,this._mMaster}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"masterPos",{get:function(){return this.getPlayerPos(this.masterIndex)},enumerable:!0,configurable:!0}),i.prototype.masterUpdateAngle=function(t){this.master.getRender().setBowAngle(t)},i.prototype.getPlayer=function(t){return this._mFishPlayers[t]},i.prototype.getPlayerBySeaNumber=function(t){var e=i.SeaMap[t+1];return this._mFishPlayers[e]},i.prototype.getPlayerByUID=function(t){for(var e,i=this._mFishPlayers.length,o=1;i>o;o++)if(t==this._mFishPlayers[o]._mPlayerUid){e=this._mFishPlayers[o];break}return e},i.prototype.getPlayerPos=function(e){return t.FishConst.CannonPosList[e]},i.prototype.updateAngle=function(t,e){this.getPlayer(t).getRender().setBowAngle(e)},i.prototype.updateCannonId=function(t,e){this.getPlayer(t).updateCannon(e)
},i.prototype.fire=function(t,e,i){void 0===i&&(i=!1);var o=this.getPlayer(t);i||o.fire(),o.getRender().setBowAngle(e)},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mFishPlayers.length;){var t=this._mFishPlayers.pop();t&&t.destroy()}this._mFishPlayers=void 0},i.SeaMap=[1,2,3,4],i}(base.GameSeparateCtrl);t.FishPlayerController=e,__reflect(e.prototype,"fishjoy.FishPlayerController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._mProxy=null,t._view=null,t._guideView=null,t._settingView=null,t._changeCannonView=null,t._helpView=null,t._mCtrlBullet=null,t._mCtrlFishPlayer=null,t._mCtrlFish=null,t._mCtrlGoldEff=null,t._mCtrlNet=null,t._mCtrlFishHitBulb=null,t._bgManager=null,t._mIsMirror=!1,t._mIsDataInited=!1,t._mCurrTime=0,t._tempServer=0,t._tempGoldServerId=1,t._tempNetServerId=1,t._mInitArrFish=[],t._mInitArrBullet=[],t._mCountMove=0,t._mIsTouchShoot=!1,t._mCurrAShootAngle=-90,t._mIsAutoShoot=!1,t._isLockFish=!1,t._mLockFishId=0,t._mInitArrFish2=[],t._mFishCreateListId=[],t._mFishCreateList=[],t.showBullTipsCount=0,t.showBullTipsGapTim=0,t.testBgID=501,t.checkCount=0,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners(),this._mIsDataInited=!1,this._mFishDeadCache=[]},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),this.inited()},i.prototype.fishPrecreate=function(){var t=RES.getRes("fish_json");for(var e in t){var i=e.split("_")[1],o=parseInt(i);!o||4e3>o||this._mFishCreateListId.push(o)}App.TimerManager.doFrame(1,999,this.onFishCreated,this)},i.prototype.onFishCreated=function(){if(this._mFishCreateListId.length<=0)return App.TimerManager.remove(this.onFishCreated,this),void R.setTimeOutOnly(this.onFishCreatedRelease,this,200);var e=this._mFishCreateListId.pop(),i=t.Fish.create(e,LayerManager.Game_Bg);i.setTideShandowGroup(LayerManager.Game_Bg),i.refreshFish(null,-500,-200),this._mFishCreateList.push(i)},i.prototype.onFishCreatedRelease=function(){for(var e=this._mFishCreateList;e.length>0;)t.Fish.release(e.pop())},i.prototype.inited=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,t.TxtPack.parsTxt()];case 1:return e.sent(),[4,t.FishUtil.parseFishCfg()];case 2:return e.sent(),[4,t.FishUtil.parseFishTideCfg()];case 3:return e.sent(),[4,t.BgConfig.parsBgConfig()];case 4:return e.sent(),this.gameInit(),this._bgManager.inits(this._view),this._mCurrTime=GameBase.getCurrServerTime(),App.TimerManager.doFrame(1,0,this.update,this),t.SoundUtils.playBGM(),t.SoundUtils.playSwitchPao(),this.onPlayerReady(),[2]}})})},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),Log.log("场景中掉线重回..."),this.cleanAll(),this._mCurrTime=GameBase.getCurrServerTime(),App.TimerManager.doFrame(1,0,this.update,this),this.onPlayerReady()},i.prototype.cleanAll=function(){Log.log("清场"),this._mCtrlFish.clean(),this._mCtrlBullet.clean(),this._mCtrlNet.clean(),this._mCtrlGoldEff.clean(),this._mCtrlFishHitBulb.clean()},i.prototype.inits=function(){e.prototype.inits.call(this),this._mCtrlFish=new t.FishController(this),this._mCtrlBullet=new t.BulletController(this),this._mCtrlGoldEff=new t.GoldEffController(this),this._mCtrlNet=new t.NetController(this),this._mCtrlFishPlayer=new t.FishPlayerController(this),this._mCtrlFishHitBulb=new t.HitBulbController(this),this._mCtrlBullet.inits(),this._mCtrlFishPlayer.inits(),this._mCtrlFish.inits(),this._mCtrlGoldEff.inits(),this._mCtrlNet.inits(),this._mCtrlFishHitBulb.inits(),this._model=new t.GameModel(this),this._mProxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._guideView=new t.GuideView(this),this._settingView=new t.SettingView(this),this._changeCannonView=new t.ChangeCannonView(this),this._helpView=new t.HelpView(this),this._bgManager=new t.BgManagers},i.prototype.onPlayerReady=function(){var t={client_tick:this._mCurrTime};this._mProxy.reqPlayerReady(t)},i.prototype.sendFire=function(e,i,o){Log.log("客户端发送开炮请求：bulletID=",e,",fishID=",o,",this.lockFishID=",this._mLockFishId),this._mProxy.reqPlayerFire(e,this._mIsMirror?t.FishUtil.getMirrorAngle(i):i,o)},i.prototype.checkBulletFull=function(){var t=!1;if(this._mCtrlBullet.isMasterBulletFull){this.showBullTipsCount++;var e=egret.getTimer();return(1==this.showBullTipsCount||e-this.showBullTipsGapTim>2e3)&&(App.ScrollTxtTips.showTip("炮弹已达上限，请休息片刻"),this.showBullTipsGapTim=egret.getTimer()),t=!0}return t},i.prototype.onClickCard=function(t){Log.log(t)},i.prototype.registers=function(){e.prototype.registers.call(this),this._mCtrlBullet.registers(),this._mCtrlFishPlayer.registers(),this._mCtrlFish.registers(),this._mCtrlGoldEff.registers(),this._mCtrlNet.registers(),this._mCtrlFishHitBulb.registers(),App.ViewManager.register(t.ViewsConst.Base,this._view),App.ViewManager.register(t.ViewsConst.Guide,this._guideView),App.ViewManager.register(t.ViewsConst.Setting,this._settingView),App.ViewManager.register(t.ViewsConst.ChangeCanon,this._changeCannonView),App.ViewManager.register(t.ViewsConst.help,this._helpView),this.registerRecharge(),this.registerRedpacket(),this.registerFunc("onTouchBegin",this.onTouchBegin,this),this.registerFunc("onTouchEnd",this.onTouchEnd,this),this.registerFunc("onTouchMove",this.onTouchMove,this),this.registerFunc("onBtnYu",this.onBtnYu,this),this.registerFunc("onAutoShoot",this.onClickAutoShoot,this),this.registerFunc("onLockFish",this.lockFish,this),this.registerFunc("GuideClickFunc",this.onGuideClickFunc,this),this.registerFunc("SettingClickFunc",this.onSettingClickFunc,this),this.registerFunc("ChangeCannonClickFunc",this.onChangeCannonClickFunc,this),this.registerFunc("HelpClickFunc",this.onHelpClickFunc,this),this.registerFunc("screenshots",this.screenshots,this),this.registerFunc("changeBgPos",this.changeBgPos,this),this.registerFunc("waveEnd",this.waveEnd,this),this.registerFunc(t.FishConst.hide_master_paopao,this.hideMasterPaopao,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),App.MessageCenter.addListener(t.FishConst.scale_coin_effect,this.scaleCoinEffect,this),this.registerFunc(t.FishConst.CLICKBACKROOM,this.onBack2Room,this),this.registerFunc(t.FishConst.PLAYER_CHAT,this.sendChat,this),this.registerFunc(t.FishConst.onPlayerEnterCallBack,this.onPlayerEnterCallBack,this),this.registerFunc(t.FishConst.onPlayerLeaveCallBack,this.onPlayerLeaveCallBack,this),this.registerFunc(t.FishConst.onDistributeCallBack,this.onDistributeCallBack,this),this.registerFunc(t.FishConst.onPlayerFireCallBack,this.onPlayerFireCallBack,this),this.registerFunc(t.FishConst.onGameStatusCallBack,this.onGameStatusCallBack,this),this.registerFunc(t.FishConst.onDeadFishsCallBack,this.onDeadFishsCallBack,this),this.registerFunc(t.FishConst.onSwitchSceneCallBack,this.onSwitchSceneCallBack,this),this.registerFunc(t.FishConst.onChangeGunCallBack,this.onChangeGunCallBack,this),this.registerFunc(t.FishConst.onBossComingCallBack,this.onBossComingCallBack,this),this.registerFunc(t.FishConst.onFishTimeSyscCallBack,this.onFishTimeSyscCallBack,this),this.registerFunc(t.FishConst.onFishUnlockCallBack,this.onFishUnlockCallBack,this),this.registerFunc(t.FishConst.Player_Change_Cannon,this.onPlayerChangeCannon,this),this.registerFunc(t.FishConst.onFishChatBack,this.onChatNotify,this),this.registerFunc(t.FishConst.onOffsetFishNotify,this.onOffsetFishNotify,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewsConst.Base);for(var e=1;4>=e;e++)this._mCtrlFishPlayer.initFishPlayerRender(e,this._view.getPlayerRender(e))},i.prototype.onGameStatusCallBack=function(t){Log.log("发送准备请求，服务器返回进场数据，玩家数据等"),this.initConfig(t),this.initPlayers(t),this.initFishsAndBullet(t),this.initTide(t),this._bgManager.setBgIndexOnEnter(t)},i.prototype.initConfig=function(e){var i=e.game_config;t.FishUtil.setFishBaseConfig(i)},i.prototype.initPlayers=function(t){var e=t.masterIndex,i=t.infoList;this.mirror(i,e),this._mIsMirror=e>2,this._mCtrlFish.setMirror(this._mIsMirror);for(var o=1;4>=o;o++){var n=i[o-1];this._mCtrlFishPlayer.getPlayer(o).initPlayerInfo(n),this._mCtrlFishPlayer.initFishPlayerRender(o,this._view.getPlayerRender(o))}this._view.setChatPos(this._mCtrlFishPlayer.masterIndex)},i.prototype.initFishsAndBullet=function(t){for(var e=t.fish_tide.next_scene,i=e>0?[]:t.current_fishes,o=0,n=i.length;n>o;o++)this._mInitArrFish.push(i[o]);for(var s=t.current_bullets,o=0,n=s.length;n>o;o++)this._mInitArrBullet.push(s[o]);var r=t.offset_group;this.parseGroupFish(r),App.TimerManager.doFrame(1,999,this.onFrameInit,this),this.onFrameInit(0)},i.prototype.parseGroupFish=function(t){for(var e=0,i=t.length;i>e;e++)this.parseSignlGroupFish(t[e])},i.prototype.parseSignlGroupFish=function(t){for(var e=t.path_id,i=t.created_at,o=t.fish_group,n=0,s=o.length;s>n;n++){var r={};r.fish_type=o[n].fish_type,r.fish_id=o[n].fish_id,r.fish_pos_index=o[n].fish_pos_index,r.elapsed=o[n].elapsed,r.path_id=e,r.created_at=i,r.offset=o[n].offset,this._mInitArrFish.push(r)}},i.prototype.onFrameInit=function(t){var e=this._mInitArrFish,i=this._mInitArrBullet;Log.log("listFish len:",e.length),Log.log("bulletList len:",i.length),this.generateFish();for(var o=egret.getTimer();e.length<=0&&i.length&&!(egret.getTimer()-o>5);)this.createBullet(i.shift(),!0);e.length<=0&&i.length<=0&&(this._mIsDataInited=!0,App.TimerManager.remove(this.onFrameInit,this),this.dataRefreshInited())},i.prototype.generateFish=function(){var t=this._mInitArrFish;if(t.length>0)for(var e=egret.getTimer();t.length&&!(egret.getTimer()-e>5);)this.createFish(t.shift())},i.prototype.mirror=function(t,e){for(var i=t.length-1;i>=0;i--){var o=t[i];this.mirrorPos(o,e)}t.sort(function(t,e){return t.client_index-e.client_index})},i.prototype.mirrorPos=function(t,e){var i=t,o=i.server_index;e>2&&(o=1==o?4:2==o?3:3==o?2:1),i.client_index=o,i.masterIndex=e},i.prototype.dataRefreshInited=function(){Log.log("--- 鱼池信息初始化完成 ---");for(var t=this._mFishDeadCache;t.length;)this.onDeadFishsCallBack(t.shift())},i.prototype.initTide=function(t){var e=t.fish_tide,i=e.next_scene;if(!(0>=i)){console.info("initTide info",e);var o=e.start_time,n=[].concat(t.current_fishes);this._mCtrlFish.runAway(),this._mCtrlFish.tideGo(o,i,n)}},i.prototype.onGuideClickFunc=function(){App.ViewManager.open(t.ViewsConst.Guide)},i.prototype.onSettingClickFunc=function(){App.ViewManager.open(t.ViewsConst.Setting)},i.prototype.onChangeCannonClickFunc=function(){App.ViewManager.open(t.ViewsConst.ChangeCanon,this._mCtrlFishPlayer.master.getCannonId())},i.prototype.onHelpClickFunc=function(){App.ViewManager.open(t.ViewsConst.help)},i.prototype.screenshots=function(){this._bgManager.screenShotBeforStart()},i.prototype.changeBgPos=function(t){Log.log("改变背景位置,",t),this._bgManager.changeBgPos(t)},i.prototype.waveEnd=function(){this._bgManager.onComplete()},i.prototype.hideMasterPaopao=function(){this._mCtrlFishPlayer.master.stopHeatEffect()},i.prototype.showRecharge=function(){App.PromTipsView.show("余额不足，是否前往充值？",function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},null,this,!0)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.onUserMoneyChange=function(t){Log.log("onUserMoneyChange，账户变更，钱钱=",t);var e=this._mCtrlFishPlayer.master;e.updateMoney(t.balance),this.checkCount=0},i.prototype.onBtnYu=function(){this._mCtrlFish.refreshHitRect();var t=Math.random()>.5?-1:1,e=this.testBgID;e++,e>505&&(e=501),this.testBgID=e,this._bgManager.changeBg(e,t),this._view.playTideWave(t)},i.prototype.sendChat=function(t){var e={uid:this.player.getUserId(),text_id:t};Log.log("向服务器发送聊天请求---userid:"+e.uid),this._mProxy.reqFishChat(e)},i.prototype.onChatNotify=function(t){var e=t.uid,i=t.text_id;Log.log("聊天广播：seatIndex="+e+",text="+i);var o=this._mCtrlFishPlayer.getPlayerByUID(e);o.showChatMessage(i,o.mPlayerClientIndex)},i.prototype.onBack2Room=function(){Log.log("返回房间列表"),App.PromTipsView.show("是否现在退出捕鱼游戏？",function(){App.TimerManager.removeAll(this),this._mProxy.sendLeaveGame()}.bind(this),null,this,!0)},i.prototype.onExitGame=function(){this.goBack2Room(),t.SoundUtils.playGoBackSound()},i.prototype.fire=function(e,i,o,n,s,r,a){var h=this._mCtrlFishPlayer.getPlayerPos(i),l=this._mCtrlFishPlayer.getPlayer(i);if(!l)return void egret.warn("玩家 index:",i," 不存在");a||l.updateMoney(r),Log.log("收到玩家开炮：bulletId=",e,",fishId=",n,",index=",i,",money=",r);var p;n>0&&(p=this._mCtrlFish.getFish(n),p&&(o=App.MathUtils.getAngle2(h[0],h[1],p.getX(),p.getY())));var c=App.MathUtils.getRadian(o),u=50*Math.cos(c)+h[0],d=50*Math.sin(c)+h[1],m=l.getBulletId(),y=l.getNetId();l.mIsMaster||this._mCtrlFishPlayer.fire(i,o,a),this._mCtrlBullet.createBullet(e,m,y,this._view.bulletGroup,u,d,o,p,l.mIsMaster,s),l.mIsMaster&&t.SoundUtils.playFireSound()},i.prototype.onTouchBegin=function(t,e){if(this._mIsDataInited&&this._mCtrlFishPlayer&&this._mCtrlFishPlayer.master){this.hideMasterPaopao();var i=this._mCtrlFishPlayer.master.getCannonCfg();R.intervalTime(i.gun_rate,"fish_touch_shoot")&&(this._mIsAutoShoot||this.goTouchShoot(t,e),this._isLockFish&&this.setLockFishByPos(t,e),this._view.hideMenu())}},i.prototype.onTouchEnd=function(t,e){this._mIsDataInited&&(this.removeTouchFire(),this.changeAngle(t,e),this._mCtrlFishPlayer.hideCali())},i.prototype.removeAutoFire=function(){this._mIsAutoShoot=!1,this._view.resetAutoUI(),App.TimerManager.remove(this.doAutoShoot,this)},i.prototype.removeTouchFire=function(){this._mCountMove=0,this._mIsTouchShoot=!1,App.TimerManager.remove(this.onCountAutoShoot,this),App.TimerManager.remove(this.onTouchShoot,this)},i.prototype.onTouchMove=function(t,e){this._mIsDataInited&&++this._mCountMove%3==0&&this.changeAngle(t,e)},i.prototype.changeAngle=function(t,e){var i=this._mCtrlFishPlayer.masterPos,o=App.MathUtils.getAngle2(i[0],i[1],t,e);o>=-5||-175>=o||(this._mCtrlFishPlayer.masterUpdateAngle(o),this._mCurrAShootAngle=o)},i.prototype.goTouchShoot=function(t,e){if(!this.checkBulletFull()){if(this._isLockFish){var i=this._mCtrlFish.getTouchFish(t,e);if(i&&i.isLive&&!i.isOut())return}var o=this._mCtrlFishPlayer.masterPos,n=App.MathUtils.getAngle2(o[0],o[1],t,e);if(this._mLockFishId>0){var i=this._mCtrlFish.getFish(this._mLockFishId);if(i&&i.isLive&&!i.isOut()){if(n=App.MathUtils.getAngle2(o[0],o[1],i.getX(),i.getY()),n>=-5||-175>=n)return;this._mCtrlFishPlayer.masterFire(n),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),n,this._mLockFishId),this._mCurrAShootAngle=n}}else{if(n>=-5||-175>=n)return;this._mCtrlFishPlayer.masterFire(n),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),n),this._mCurrAShootAngle=n}App.TimerManager.doTimer(500,1,this.onCountAutoShoot,this)}},i.prototype.onCountAutoShoot=function(){if(this.onTouchShoot(),!this._mIsAutoShoot){this._mIsTouchShoot=!0;var t=this._mCtrlFishPlayer.master.getCannonCfg();App.TimerManager.doTimer(t.gun_rate,99999,this.onTouchShoot,this)}},i.prototype.onTouchShoot=function(){this.checkBulletFull()||(Log.log("连续射击,this._mIsTouchShoot="+this._mIsTouchShoot+",this._mLockFishId = "+this._mLockFishId),this._mIsTouchShoot&&(this._mLockFishId>0?this.fireLockFish():(this._mCtrlFishPlayer.masterFire(this._mCurrAShootAngle),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),this._mCurrAShootAngle))))},i.prototype.fireLockFish=function(){var t=this._mCtrlFish.getFish(this._mLockFishId);if(t&&t.isLive&&!t.isOut()){var e=this._mCtrlFishPlayer.masterPos,i=App.MathUtils.getAngle2(e[0],e[1],t.getX(),t.getY());this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),i,this._mLockFishId),this._mCtrlFishPlayer.masterFire(i)}else this.clearBulletLock(this._mLockFishId),this.setLockFish()},i.prototype.onClickAutoShoot=function(t){if(this._mIsAutoShoot=t,this._mIsAutoShoot){var e=this._mCtrlFishPlayer.master.getCannonCfg();App.TimerManager.doTimer(e.gun_rate,99999,this.doAutoShoot,this),this.doAutoShoot()}else Log.log("关闭自动连续射击"),App.TimerManager.remove(this.doAutoShoot,this)},i.prototype.doAutoShoot=function(){if(!this.checkBulletFull())if(this._isLockFish){if(this._mLockFishId<=0){var t=this._mCtrlFish.getHightFish();if(!t)return this._mCtrlFishPlayer.masterFire(this._mCurrAShootAngle),void this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),this._mCurrAShootAngle);this.setLockFish(t)}this.fireLockFish()}else this._mCtrlFishPlayer.masterFire(this._mCurrAShootAngle),this.sendFire(this._mCtrlFishPlayer.master.getCannonId(),this._mCurrAShootAngle)},i.prototype.lockFish=function(t){this._isLockFish=t,this._isLockFish?this.setLockFish():this.onRemoveLockFish()},i.prototype.onRemoveLockFish=function(){var t=this._mCtrlFish.getFish(this._mLockFishId);t&&t.isLive&&t.cleanLock(),this._mLockFishId=-1},i.prototype.setLockFishByPos=function(t,e){var i=this._mCtrlFish.getFish(this._mLockFishId);i&&i.isLive&&!i.isOut()||(i=this._mCtrlFish.getTouchFish(t,e),i?this.setLockFish(i):this.setLockFish())},i.prototype.setLockFish=function(t){var e=t?t:this._mCtrlFish.getHightFish();e&&e.isLive&&!e.isOut()&&(this._mCtrlFish.clearArmIcon(),this._mLockFishId=e.getServerId(),e.setLock(),e.playArmEffect())},i.prototype.checkMoney=function(){return!this._mIsDataInited||App.PromTipsView.parent?!1:(this.checkCount++,this.resetAutoFire(),void(this.checkCount<=1?this.showRecharge():App.ScrollTxtTips.showTip("余额不足")))},i.prototype.resetAutoFire=function(){this.removeAutoFire(),this.removeTouchFire()},i.prototype.updateTime=function(t){if(t>0)for(var e=Math.floor(t/16),i=0;e>i;i++)this.update(16)},i.prototype.update=function(t){if(t>30)return void this.updateTime(t);var e=this._mCurrTime+t;this._mCtrlBullet.update(e),this._mCtrlFish.update(e),this._mCtrlNet.update(e),this._mCtrlGoldEff.update(e),this._mCtrlFishHitBulb.update(e),this._bgManager.update();for(var i=this._mCtrlFish.getList(),o=this._mCtrlBullet.getList(),n=i.length-1;n>=0;n--){var s=i[n];if(!s.isDead()&&!s.isOver()){s.isLockedFish&&this.changeAngle(s.getX(),s.getY());for(var r=o.length-1;r>=0;r--){var a=o[r];a.isDead()||a.isOver()||a.getLockFishSId()>0&&a.getLockFishSId()!=s.getServerId()||s.hitTest(a.getHitBound())&&(s.hitAction(),a.mIsMaster&&this._mProxy.reqHitFish(s.getServerId(),s.mId,a.getServerId()),a.setDead(),this.hitBulb(a),this.showNet(a))}}}this._mCurrTime=e,this._mIsDataInited&&this.generateFish()},i.prototype.showNet=function(t){this._mCtrlNet.createNet(t.getNetId(),this._view.bulletGroup,t.x,t.y)},i.prototype.hitBulb=function(e){e.mIsMaster&&t.SoundUtils.playHitSound(),this._mCtrlFishHitBulb.createFishHitBulb(this._view.bulletGroup,e.x,e.y)},i.prototype.playShake=function(t,e){t>5e3&&5004>t&&this._view.shakeScreen()},i.prototype.showGoldEffect=function(e,i,o,n,s){var r=t.FishConst.CannonPosList[o],a=t.FishUtil.getFishGoldCoins(e.mId),h=egret.Point.create(e.getX(),e.getY()),l=t.FishConst.coinPosList[o],p=egret.Point.create(l[0],l[1]);this._mCtrlGoldEff.createBFEff(e.mId,this._view.effectGroup,h.x,h.y),e.mId>5e3&&this._mCtrlGoldEff.createGoldSpecial(e.mId,i,this._view.effectGroup,r[0],r[1]),this._mCtrlGoldEff.createGold(h,p,o,i,a,this._view.effectGroup,n,e.mId,s)},i.prototype.onPlayerEnterCallBack=function(t){Log.log("玩家加入----------");var e=t.info;this.mirrorPos(e,this._mCtrlFishPlayer.masterServerSeaNumber);var i=e.client_index;this._mCtrlFishPlayer.addPlayer(i,e)},i.prototype.onPlayerLeaveCallBack=function(t){Log.log("玩家离开----------");var e=this._mCtrlFishPlayer.getPlayerBySeaNumber(t.seat_number);e.playerExit()},i.prototype.onDistributeCallBack=function(t){this._mInitArrFish.push(t)},i.prototype.onOffsetFishNotify=function(t){Log.log("收到偏移鱼组消息"),this.parseSignlGroupFish(t)},i.prototype.createFish=function(t){var e=t,i=e.fish_type,o=e.fish_id,n=e.path_id,s=e.created_at;this._mCtrlFish.mIsTideRunning||this._mCtrlFish.createFish(o,i,n,this._view.getFishLay(i),this._view.mShandowGroup,s,!1,e.offset)},i.prototype.onPlayerFireCallBack=function(t){this.createBullet(t)},i.prototype.createBullet=function(e,i){void 0===i&&(i=!1);var o=e,n=this._mCtrlFishPlayer.getPlayerBySeaNumber(o.seat_number);if(!n)return void Log.warn("玩家 seat_number:",o.seat_number," 不存在");o.angle=o.angle?o.angle:App.MathUtils.random(30,150);var s=o.bullet_id,r=o.locked_fish_id,a=this._mIsMirror?t.FishUtil.getMirrorAngle(o.angle):o.angle,h=o.created_at,l=o.balance;this._lastBalance=o.balance,Log.log("createBullet 玩家账户余额:",o.balance),this.fire(s,n.mPlayerClientIndex,a,r,h,l,i)},i.prototype.onDeadFishsCallBack=function(t){var e=t.fish_catched,i=t.balance,o=t.seat_number,n=this._mCtrlFishPlayer.getPlayerBySeaNumber(o);for(var s in e){var r=e[s];this._mIsDataInited?this.showFishResult(n,r):this._mFishDeadCache.push(t)}Log.log("打中鱼，账户余额：",i),this._mIsDataInited&&n.updateMoney(i)},i.prototype.showFishResult=function(e,i){var o=i,n=e,s=o.fish_id,r=o.money,a=o.crit_multiple,h=this._mCtrlFish.getFish(s);h?(h.playDead(this._view.mFishGroup),t.SoundUtils.playCaptureSound(h.mId),this.playShake(h.mId,n.mIsMaster),this.showGoldEffect(h,r,n.mPlayerClientIndex,a,n.mIsMaster),Log.log("打中鱼了 id:",s,"money:",r,"暴击倍数：",a,o),100>=r&&egret.error("金币小于100:",o)):Log.warn("玩家 ",n.mPlayerClientIndex,"打中了没有的鱼 ID：",s),s==this._mLockFishId&&(this.clearBulletLock(s),this._isLockFish&&this.setLockFish())},i.prototype.clearBulletLock=function(t){this._mCtrlBullet.cleanBulletFish(t),this._mLockFishId=-1},i.prototype.onPlayerChangeCannon=function(e){if(R.intervalTime(100,"ChangeCannon")){var i=this._mCtrlFishPlayer.master,o=i.getCannonId();if(e.levels>0)o=e.levels;else if(e.isAddStr){var n=t.FishUtil.getCannonConfigById(o+1);n&&o++}else{var n=t.FishUtil.getCannonConfigById(o-1);n&&o--}this._mProxy.reqChangePao(o)}},i.prototype.onChangeGunCallBack=function(t){var e=this._mCtrlFishPlayer.getPlayerBySeaNumber(t.seat_number);e.updateCannon(t.gun_type),this._changeCannonView.refreshListOnChange(t.gun_type)},i.prototype.onSwitchSceneCallBack=function(t){var e=t.next_scene,i=t.start_time,o=t.background_id;this._mCtrlFish.runAway(),this._mCtrlFish.tideGo(i,e),this.playTideWaveAni(e,o),Log.log("鱼潮来临，切背景ID："+o)},i.prototype.playTideWaveAni=function(t,e){var i=RES.getRes("fish_tide"+t+"_json");if(i){var o=i.direction;this._bgManager.changeBg(e,o),this._view.playTideWave(o)}},i.prototype.onBossComingCallBack=function(t){},i.prototype.onFishTimeSyscCallBack=function(t){},i.prototype.onFishUnlockCallBack=function(t){},i.prototype.onErrorCallBack=function(t){1301!=t.code?e.prototype.onErrorCallBack.call(this,t):this.checkMoney(),this.resetAutoFire()},i.prototype.scaleCoinEffect=function(t){this._mCtrlFishPlayer.scaleCoinEffect(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._mProxy.addEvent(),this._mCtrlFish.addListeners(),this._mCtrlBullet.addListeners(),this._mCtrlGoldEff.addListeners(),this._mCtrlFishPlayer.addListeners()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._mCtrlFish.removeListeners(),this._mCtrlBullet.removeListeners(),this._mCtrlGoldEff.removeListeners(),this._mCtrlFishPlayer.removeListeners(),this._mProxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},Object.defineProperty(i.prototype,"gameView",{get:function(){return this._view},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.onFishCreatedRelease(),t.FishUtil.clear(),t.BgConfig.clear(),t.TxtPack.clear(),this._mCtrlBullet.destroy(),this._mCtrlFishPlayer.destroy(),this._mCtrlFish.destroy(),this._mCtrlGoldEff.destroy(),this._mCtrlNet.destroy(),this._mCtrlFishHitBulb.destroy(),this._model.destroy(),this._mProxy.destroy(),this._view.destroy(),this._bgManager&&(this._bgManager.stopMoveBg(),this._bgManager.desdroyss(),this._bgManager=void 0),t.SoundUtils.isPlayingTdBGM=!1,this._mCtrlFish=void 0,this._mCtrlBullet=void 0,this._mCtrlGoldEff=void 0,this._mCtrlFishPlayer=void 0,this._view=void 0,this._model=void 0,this._mProxy=void 0,this._mCtrlNet=void 0,this._mCtrlFishHitBulb=void 0,this._mInitArrFish=void 0,this._mInitArrBullet=void 0,this._mFishDeadCache=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"fishjoy.GameController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mGoldEffList=null,i._mGoldSpecialList=null,i._mGoldBFEffList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mGoldEffList=[],this._mGoldSpecialList=[],this._mGoldBFEffList=[]},i.prototype.createGold=function(e,i,o,n,s,r,a,h,l){var p=t.GoldEff.create(0,r);p.setPos(e.x,e.y),a>0&&(n=t.FishUtil.getFishValue(h)*t.FishUtil.mFishBaseMultiple),p.refreshGold(i,n,o,s,a),p.setMaster(l),this._mGoldEffList.push(p),egret.Point.release(e),egret.Point.release(i)},i.prototype.createGoldSpecial=function(e,i,o,n,s){var r=t.GoldSpecial.create(0,o);r.setPos(n,100>s?s+160:s-160),r.refreshGold(i,e),this._mGoldSpecialList.push(r)},i.prototype.createBFEff=function(e,i,o,n){var s=t.FishBigEffBone.create();s.init(),s.setPosition(o,n),e>5e3?s.play(t.FishBigEffBone.special_large):e>4e3&&4005>=e?s.play(t.FishBigEffBone.large):e>3e3&&3010>e?s.play(t.FishBigEffBone.middle):e>2e3&&2015>e&&s.play(t.FishBigEffBone.small),s.parent||i.addChild(s),this._mGoldBFEffList.push(s)},i.prototype.update=function(e){for(var i=this._mGoldEffList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()&&(i.splice(o,1),t.GoldEff.release(n))}for(var s=this._mGoldSpecialList,o=s.length-1;o>=0;o--){var n=s[o];n.isDead()&&(s.splice(o,1),t.GoldSpecial.release(n))}for(var r=this._mGoldBFEffList,o=r.length-1;o>=0;o--){var n=r[o];n.isOver&&(r.splice(o,1),t.FishBigEffBone.release(n))}},i.prototype.getList=function(){return this._mGoldEffList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mGoldEffList;e.length;){var i=e.pop();t.GoldEff.release(i)}for(var o=this._mGoldSpecialList;o.length;){var i=o.pop();t.GoldSpecial.release(i)}for(var n=this._mGoldBFEffList;n.length;){var i=n.pop();t.FishBigEffBone.release(i)}},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mGoldEffList.length;){var t=this._mGoldEffList.shift();t.destroy()}for(this._mGoldEffList=null,ObjectPool.clearClass("fishjoy.GoldEff","destroy");this._mGoldSpecialList.length;){var t=this._mGoldSpecialList.shift();t.destroy()}this._mGoldSpecialList=null,ObjectPool.clearClass("fishjoy.GoldSpecial","destroy");for(var i=this._mGoldBFEffList;i.length;){var o=i.pop();o.destroy()}this._mGoldBFEffList=null,ObjectPool.clearClass("fishjoy.FishBigEffBone","destroy")},i}(base.GameSeparateCtrl);t.GoldEffController=e,__reflect(e.prototype,"fishjoy.GoldEffController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mHitBulbList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mHitBulbList=[]},i.prototype.createFishHitBulb=function(e,i,o){var n=t.FishHitBulbBones.create();n.init(),n.setPosition(i,o),n.parent||e.addChild(n),n.play(),this._mHitBulbList.push(n)},i.prototype.update=function(e){for(var i=this._mHitBulbList,o=i.length-1;o>=0;o--){var n=i[o];n.isOver&&(i.splice(o,1),t.FishHitBulbBones.release(n))}},i.prototype.getList=function(){return this._mHitBulbList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mHitBulbList;e.length;){var i=e.pop();t.FishHitBulbBones.release(i)}},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mHitBulbList.length;){var t=this._mHitBulbList.pop();t.destroy()}this._mHitBulbList=null,ObjectPool.clearClass("fishjoy.FishHitBulbBones","destroy")},i}(base.GameSeparateCtrl);t.HitBulbController=e,__reflect(e.prototype,"fishjoy.HitBulbController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mNetList=null,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this._mNetList=[]},i.prototype.createNet=function(e,i,o,n){var s=t.Net.create(e,i);s.refreshNet(e),s.setServerId(e),s.setPos(o,n),this._mNetList.push(s)},i.prototype.update=function(e){for(var i=this._mNetList,o=i.length-1;o>=0;o--){var n=i[o];n.isDead()&&(i.splice(o,1),t.Net.release(n))}},i.prototype.getList=function(){return this._mNetList},i.prototype.registers=function(){},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},i.prototype.clean=function(){for(var e=this._mNetList;e.length;){var i=e.pop();t.Net.release(i)}},i.prototype.destroy=function(){for(e.prototype.destroy.call(this);this._mNetList.length;){var t=this._mNetList.pop();t.destroy()}this._mNetList=null,ObjectPool.clearClass("fishjoy.Net","destroy")},i}(base.GameSeparateCtrl);t.NetController=e,__reflect(e.prototype,"fishjoy.NetController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(base.GameModel);t.FishPlayerMoudel=e,__reflect(e.prototype,"fishjoy.FishPlayerMoudel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"fishjoy.GameModel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.ScFishPlayerEnterNotifyType,this.onPlayerEnter,this),this.addListener(t.ProxyConst.ScFishPlayerLeaveNotifyType,this.onPlayerLeave,this),this.addListener(t.ProxyConst.ScFishDistributeNotifyType,this.onDistribute,this),this.addListener(t.ProxyConst.ScFishFireNotifyType,this.onPlayerFire,this),this.addListener(t.ProxyConst.ScFishGameStatusNotifyType,this.onGameStatus,this),this.addListener(t.ProxyConst.ScFishDeadFishesNotifyType,this.onDeadFishes,this),this.addListener(t.ProxyConst.ScFishSwitchSceneNotifyType,this.onSwitchScene,this),this.addListener(t.ProxyConst.ScFishChangeGunNotifyType,this.onChangeGun,this),this.addListener(t.ProxyConst.ScFishBossComingNotifyType,this.onBossComing,this),this.addListener(t.ProxyConst.ScFishChatNotifyType,this.onChatNotify,this),this.addListener(t.ProxyConst.ScFishOffsetGroupNotifyType,this.onOffsetFishNotify,this)},i.prototype.onGameStatus=function(e){for(var i,o=e.players,n=this.getMasterServerIndex(o),s=[],r=1;4>=r;r++){var a=this.getPlayerFromServer(r,o);i=a?{uid:a.uid,server_index:a.seat_number+1,paoId:a.gun_type,nick_name:a.nickname,money:a.money,vip:a.vip}:{uid:-1,server_index:r,paoId:0,nick_name:"",money:0},s.push(i)}e.infoList=s,e.masterIndex=n,this.applyFunc(t.FishConst.onGameStatusCallBack,e)},i.prototype.getPlayerFromServer=function(t,e){for(var i in e){var o=e[i];if(t==o.seat_number+1)return o}return null},i.prototype.getMasterServerIndex=function(t){var e=this.player;for(var i in t){var o=t[i];if(e.getUserId()==o.uid)return o.seat_number+1}return 0},i.prototype.onPlayerEnter=function(e){var i=e.new_player,o={uid:i.uid,server_index:i.seat_number+1,paoId:i.gun_type,nick_name:i.nickname,money:i.money,vip:i.vip};e.info=o,this.applyFunc(t.FishConst.onPlayerEnterCallBack,e)},i.prototype.onPlayerLeave=function(e){this.applyFunc(t.FishConst.onPlayerLeaveCallBack,e)},i.prototype.onDistribute=function(e){this.applyFunc(t.FishConst.onDistributeCallBack,e)},i.prototype.onPlayerFire=function(e){this.applyFunc(t.FishConst.onPlayerFireCallBack,e)},i.prototype.onDeadFishes=function(e){this.applyFunc(t.FishConst.onDeadFishsCallBack,e)},i.prototype.onSwitchScene=function(e){this.applyFunc(t.FishConst.onSwitchSceneCallBack,e)},i.prototype.onChangeGun=function(e){this.applyFunc(t.FishConst.onChangeGunCallBack,e)
},i.prototype.onBossComing=function(e){this.applyFunc(t.FishConst.onBossComingCallBack,e)},i.prototype.onOffsetFishNotify=function(e){this.applyFunc(t.FishConst.onOffsetFishNotify,e)},i.prototype.onTimeSync=function(e){this.applyFunc(t.FishConst.onFishTimeSyscCallBack,e)},i.prototype.onFishUnlock=function(e){this.applyFunc(t.FishConst.onFishUnlockCallBack,e)},i.prototype.onChatNotify=function(e){this.applyFunc(t.FishConst.onFishChatBack,e)},i.prototype.reqFishChat=function(e){this.send(t.ProxyConst.CsFishChatReqType,e)},i.prototype.reqPlayerReady=function(e){this.send(t.ProxyConst.CsFishPlayerReadyReqType,e)},i.prototype.reqPlayerFire=function(e,i,o){if(R.intervalTime(80,"reqPlayerFire")){var n={gun_multiple:e,angle:i,locked_fish_id:o?o:0,client_tick:GameBase.getCurrServerTime()};this.send(t.ProxyConst.CsFishPlayerFireReqType,n)}},i.prototype.reqChangePao=function(e){var i={gun_type:e};this.send(t.ProxyConst.CsFishChangeGunReqType,i)},i.prototype.reqHitFish=function(e,i,o){var n={fish_id:e,fish_type:i,bullet_id:o};this.send(t.ProxyConst.CsFishCollidedNotifyType,n)},i.prototype.reqTimeSync=function(t){},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"fishjoy.GameProxy")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.parsBgConfig=function(){var t=RES.getRes("Backgrounds_json");Log.log("背景配置解析：",t),this.bgDic=t;for(var e in t){var i=t[e].bulbPosition,o=i.split("|"),n=[];for(var s in o){var r={},a=o[s].split(","),h=Number(a[0]),l=Number(a[1]);r.dot={},r.dot.x=h,r.dot.y=l,n.push(r)}t[e].pList=n}},t.getBgDataByIndex=function(t){return this.bgDic["data_"+t]||""},t.clear=function(){t.bgDic=void 0},t.bgDic=null,t}();t.BgConfig=e,__reflect(e.prototype,"fishjoy.BgConfig")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.getCannonConfigById=function(e){t._mCannonConfig||(t._mCannonConfig=RES.getRes("gun_config_json"));var i=t._mCannonConfig["data_"+e];return i},t.parseFishTideCfg=function(){var e=RES.getRes("fishTidePath_json"),i=-1;for(var o in e){i=parseInt(o.split("_")[1]);var n={};n.speed=e[o].speed;var s=e[o].startPoint.split(","),r=new egret.Point(parseInt(s[0]),parseInt(s[1])),a=e[o].endPoint.split(","),h=new egret.Point(parseInt(a[0]),parseInt(a[1]));n.startPoint=r,n.endPoint=h;var l=e[o].fishList.split("|"),p=[],c=0,u=l.length;for(c=0;u>c;c++){var d={},m=l[c].split(",");d.fishID=parseInt(m[0]);var y=m[1].split("-"),_=parseInt(y[0]),g=parseInt(y[1]),f=new egret.Point(_,g);d.posi=f;var v=m[2].split("-"),C=parseInt(v[0]),b=parseInt(v[1]),T=new egret.Point(C,b);d.offset=T;var B=m[3].split("-"),E=parseInt(B[0]),L=parseInt(B[1]),A=parseInt(B[2]);d.centerPos=[E,L,A],p.push(d)}n.list=p,t._fishTidess["tide_"+i]=n}},t.getFishTideCfg=function(e){return t._fishTidess["tide_"+e]},t.parseFishCfg=function(){var e,i=RES.getRes("fish_json");for(var o in i){e=o.split("_")[1];var n=i[o].FishCollide,s=n.split("|"),r=[];for(var a in s){var h=s[a].split(","),l={},p=Number(h[0]),c=Number(h[1]);l.dot={},l.dot.x=p,l.dot.y=c,l.radius=Number(h[2]),r.push(l)}t.initFishHitRect(e,r),t.initFishGoldCoins(e,i[o].GoldCoins),t.initFishSpeedCoef(e,i[o].SpeedCoefficient),t.initFishValue(e,i[o].FishValue)}},t.initFishGoldCoins=function(e,i){var o=t._mFishBaseConfig;o.GoldCoins||(o.GoldCoins={}),o.GoldCoins["cfg_"+e]=i},t.initFishValue=function(e,i){var o=t._mFishBaseConfig;o.fishValues||(o.fishValues={}),o.fishValues["cfg_"+e]=i},t.getFishValue=function(e){return t._mFishBaseConfig.fishValues["cfg_"+e]},t.initFishSpeedCoef=function(e,i){var o=t._mFishBaseConfig;o.speedCoef||(o.speedCoef={}),o.speedCoef["cfg_"+e]=i},t.getFishSpeedCoef=function(e){return t._mFishBaseConfig.speedCoef["cfg_"+e]},t.getFishGoldCoins=function(e){return t._mFishBaseConfig.GoldCoins["cfg_"+e]},t.initFishHitRect=function(e,i){var o=t._mFishBaseConfig;o.hitRect||(o.hitRect={}),o.hitRect["cfg_"+e]=i},t.getFishHitRect=function(e){return t._mFishBaseConfig.hitRect["cfg_"+e]},t.getMirrorAngle=function(t){return-t},t.setFishBaseConfig=function(e){t._mFishBaseConfig.cfg=e},Object.defineProperty(t,"mFishBaseMultiple",{get:function(){var e=t._mFishBaseConfig.cfg;return e?e.multiple:1},enumerable:!0,configurable:!0}),t.clear=function(){t._mFishBaseConfig={},t._fishTidess={},t._mCannonConfig=void 0},t._mFishBaseConfig={},t._fishTidess={},t}();t.FishUtil=e,__reflect(e.prototype,"fishjoy.FishUtil")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.playBGM=function(){App.SoundManager.stopBg(),t.bgmIndex=this.getIndex(3),App.SoundManager.playBg("FisheryBGM"+t.bgmIndex+"_mp3"),t.isPlayingTdBGM=!1},t.getIndex=function(e){var i=Math.floor(3*Math.random())+1;return i==t.bgmIndex&&this.getIndex(e),i},t.getIndex2=function(e){var i=Math.floor(2*Math.random())+1;return i==t.tideBgmIndex&&this.getIndex(e),i},t.playHallBGM=function(){App.SoundManager.stopBg(),App.SoundManager.playBg("HallBGM_mp3")},t.playTideBGM=function(){t.isPlayingTdBGM||(t.isPlayingTdBGM=!0,App.SoundManager.stopBg(),t.tideBgmIndex=this.getIndex2(2),App.SoundManager.playBg("TideBGM"+t.tideBgmIndex+"_mp3"))},t.playCaptureSound=function(t){t>2e3&&2015>t||t>3e3&&3010>t?App.SoundManager.playEffect("CaptureSE1_mp3"):t>4e3&&4006>t?App.SoundManager.playEffect("CaptureSE2_mp3"):t>5e3&&5004>t&&App.SoundManager.playEffect("CaptureSE3_mp3")},t.playSwitchPao=function(){App.SoundManager.playEffect("SwitchSE_mp3")},t.playplusSound=function(){App.SoundManager.playEffect("PlusSE_mp3")},t.playFireSound=function(){App.SoundManager.playEffect("CannonSE_mp3")},t.playHitSound=function(){App.SoundManager.playEffect("HitSE_mp3")},t.playCoinSound=function(){App.SoundManager.playEffect("CionSE_mp3")},t.playWaveSound=function(){App.SoundManager.playEffect("WaveSE_mp3")},t.playGoBackSound=function(){App.SoundManager.playEffect("BackSE_mp3")},t.playEnterSound=function(){App.SoundManager.playEffect("EnterSE_mp3")},t.playBtnSound=function(){App.SoundManager.playEffect("ButtonSE_mp3")},t.bgmIndex=1,t.tideBgmIndex=1,t.isPlayingTdBGM=!1,t}();t.SoundUtils=e,__reflect(e.prototype,"fishjoy.SoundUtils")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.parsTxt=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,RES.getResByUrl("textPack_fishjoy_json",function(e,i){t.lockDic=e.lockTxts,t.chatTxtss=e.chatTxts,t.explainTxtss=e.explainTxts,t.lockTxtIDArr=[];for(var o in t.lockDic)t.lockTxtIDArr.push(o);t.chatTxtIDArr=[];for(var o in t.chatTxtss)t.chatTxtIDArr.push(o)})];case 1:return e.sent(),[2]}})})},t.getLockTxt=function(e){return t.lockDic||t.parsTxt(),t.lockDic[e]||""},t.getChatTxt=function(e){return t.chatTxtss||t.parsTxt(),t.chatTxtss[e]||""},t.getChatTxtByIndex=function(e){var i="9009";switch(e){case 0:i="9009";break;case 1:i="90010";break;case 2:i="90011";break;case 3:i="90012";break;case 4:i="90013"}return t.getChatTxt(i)},t.getExplainTxt=function(e){return t.explainTxtss||t.parsTxt(),t.explainTxtss[e]},t.clear=function(){t.lockDic=void 0,t.lockTxtIDArr=null,t.chatTxtss=void 0,t.chatTxtIDArr=null,t.explainTxtss=void 0},t.lockDic=null,t.lockTxtIDArr=null,t.chatTxtss=null,t.chatTxtIDArr=null,t.explainTxtss=null,t}();t.TxtPack=e,__reflect(e.prototype,"fishjoy.TxtPack")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function e(){this._bgIndex=0,this._leftBorder=-1450,this._rightBorder=1450,this._pointX=400,this._bitmap=null,this._bitMask=null,this._step=.1,this.isNeedMoveing=!1}return e.prototype.inits=function(t){this._gameView=t,this._bgIndex=GameModuleMgr.i.getCurrSceneType();var e=this._bgIndex;this._gameView.foreBg.setBgData(e),this._gameView.foreBg1.setBgData(e),this._gameView.backGroup2.visible=!1,this._gameView.changeBg.visible=!1},e.prototype.setBgIndexOnEnter=function(t){var e=t.fish_tide;this._bgIndex=e.background_id;var i=this._bgIndex;this._gameView.foreBg.setBgData(i),this._gameView.foreBg1.setBgData(i),this._gameView.foreBg.x=0,this._gameView.foreBg1.x=this._rightBorder,this._gameView.backGroup2.visible=!1,Log.log("初始进入，房间数据状态广播： bgID=",e.background_id),this.isNeedMoveing=!0},e.prototype.update=function(){if(this.isNeedMoveing){var t=this._step;this._gameView.foreBg.x-=t,this._gameView.foreBg.x<=this._leftBorder&&(this._gameView.foreBg.x=this._rightBorder-2),this._gameView.foreBg1.x-=t,this._gameView.foreBg1.x<=this._leftBorder&&(this._gameView.foreBg1.x=this._rightBorder-2)}},e.prototype.BgMove=function(){this.isNeedMoveing=!0},e.prototype.stopMoveBg=function(){this.isNeedMoveing=!1,this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null),this._gameView&&this._gameView.backGroup2&&(this._gameView.backGroup2.visible=!1)},e.prototype.changeBg=function(t,e){this._bgIndex=t,this._dirction=e},e.prototype.screenShotBeforStart=function(){this.stopMoveBg(),this._bitmap||(this._bitmap=new egret.Bitmap);var t=App.StageUtils.getWidth(),e=App.StageUtils.getHeight();this._bitMask=new egret.Shape,this._bitMask.graphics.beginFill(16711935),this._bitMask.graphics.drawRect(0,0,t,e),this._bitMask.graphics.endFill(),this._gameView.backGroup2.addChild(this._bitMask),this._bitmap.mask=this._bitMask;var i=this._gameView.backGroup,o=new egret.RenderTexture;o.drawToTexture(i,new egret.Rectangle(0,0,t,e));this._bitmap.texture=o,this._gameView.backGroup2.addChild(this._bitmap),this._dirction>0?(this._bitMask.x=t,this._bitMask.scaleX=-1):(this._bitMask.x=0,this._bitMask.scaleX=1),this._gameView.backGroup2.visible=!0,this._gameView.foreBg.x=0,this._gameView.foreBg1.x=this._rightBorder,this._gameView.foreBg.setBgData(this._bgIndex),this._gameView.foreBg1.setBgData(this._bgIndex)},e.prototype.changeBgPos=function(t){var e=this._dirction,i=App.StageUtils.getWidth();if(!(e>0&&t-208>=i||0>e&&0>=t+208)){var o=1;o=0>e?(t+208)/i:(t-208)/i-1,this._bitMask.scaleX=o}},e.prototype.onComplete=function(){this._bitmap&&this._bitmap.parent&&(this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null),this._gameView.backGroup2.visible=!1,t.SoundUtils.playTideBGM(),this.BgMove()},e.prototype.desdroyss=function(){this._gameView&&this._gameView.foreBg&&egret.Tween.removeTweens(this._gameView.foreBg),this._gameView&&this._gameView.foreBg1&&egret.Tween.removeTweens(this._gameView.foreBg1),this._bitmap&&(this._bitmap.parent&&this._bitmap.parent.removeChild(this._bitmap),this._bitmap=null),this._bitMask&&(this._bitMask.parent&&this._bitMask.parent.removeChild(this._bitMask),this._bitMask=null)},e}();t.BgManagers=e,__reflect(e.prototype,"fishjoy.BgManagers")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.bubbleList=[],t.skinName="BgUISkin",t}return __extends(i,e),i.prototype.initComponent=function(t){e.prototype.initComponent.call(this,t),this.touchEnabled=!1,this.touchChildren=!1},i.prototype.setBgData=function(e){0==e&&(e=GameModuleMgr.i.getCurrSceneType()),this.clearBubList(),this.bubbleList=[];var i=t.BgConfig.getBgDataByIndex(e);this.bgData=i,this.bgImg.source=i.backGArt;for(var o=i.pList,n=o.length,s=0;n>s;s++){var r=new eui.Group,a=new BaseParticleObj;a.init(i.bulbGArt),r.addChild(a),a.x=-208,a.y=-300,a.play(),a.touchEnabled=!1,a.touchChildren=!1,r.touchEnabled=!1,r.touchChildren=!1,this.addChild(r),r.x=o[s].dot.x,r.y=o[s].dot.y,this.bubbleList.push(r)}},i.prototype.clearBubList=function(){if(this.bubbleList){for(var t=this.bubbleList.length,e=0;t>e;e++){var i=this.bubbleList[e].removeChildAt(0);i.destroy(),i=null,this.bubbleList[e]=void 0}this.bubbleList.length=0}this.bubbleList=null},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearBubList(),this.bgData&&(this.bgData=null),this.bgImg&&this.bgImg.parent&&(this.bgImg.parent.removeChild(this.bgImg),this.bgImg=null)},i}(BaseEuiComponent);t.BgUI=e,__reflect(e.prototype,"fishjoy.BgUI")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsAddEvent=!1,e}return __extends(e,t),e.prototype.init=function(){this._mIsAddEvent||(this._mIsAddEvent=!0,App.EffectUtils.addEffectBtn(this.btnWei,this.onWeiTouchTap,this),App.EffectUtils.addEffectBtn(this.btnYi,this.onYiTouchTap,this),App.EffectUtils.addEffectBtn(this.btnLocked,this.onLockedTouchTap,this),this.addEventListener(egret.Event.REMOVED,this.onRemove,this))},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){this.init(),this.btnWei.visible=this.btnLocked.visible=this.btnYi.visible=!1;var e=this.data.isUnLock;this.cannonImg.source=this.data.res,this.cannonLabel.text=this.data.txt,this.lockedImg.visible=!e,this.btnLocked.visible=!e,this.btnWei.visible=e&&!this.data.isCurr,this.btnYi.visible=e&&this.data.isCurr}},e.prototype.onWeiTouchTap=function(t){this.data.isCurr||this.data.onItemTap&&this.data.onItemTap.call(this.data.onThisObj,this.data)},e.prototype.onLockedTouchTap=function(t){},e.prototype.onYiTouchTap=function(t){},e.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED,this.onRemove,this),this.destroy()},e.prototype.destroy=function(){Log.log("ChangeCannonItem destroy.. "),App.EffectUtils.removeEffectBtn(this.btnWei,this.onWeiTouchTap,this),App.EffectUtils.removeEffectBtn(this.btnYi,this.onYiTouchTap,this),App.EffectUtils.removeEffectBtn(this.btnLocked,this.onLockedTouchTap,this),this.data.onItemTap=void 0,this.data.onThisObj=void 0,this.data=void 0,this._mIsAddEvent=!1},e}(eui.ItemRenderer);t.ChangeCannonItem=e,__reflect(e.prototype,"fishjoy.ChangeCannonItem")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","ChangeCannonSkin")||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.initDatass(),this.refreshGameList(),this.changeItem.dataProvider=this._mArrData},i.prototype.initDatass=function(){for(var e=[],i=1;2>=i;i++){var o={};o.id=i,o.res=1==i?"grabfish_ui_gun5":"grabfish_ui_gun1",o.txt=t.TxtPack.getLockTxt(""+(9e3+i)),o.isUnLock=!1,o.isCurr=!1,o.onItemTap=this.onItemTap,o.onThisObj=this,e.push(o)}e[0].isUnLock=!0,e[1].isUnLock=!0,this._mArrData=new eui.ArrayCollection(e)},i.prototype.open=function(t){e.prototype.open.call(this,t);for(var i=Math.floor(t/1e3),o=this._mArrData,n=this._mArrData.length,s=0;n>s;s++){var r=o.getItemAt(s);r.isCurr=r.id==i}Log.log("type",i,"data",t),this._mArrData.refresh(),this.changeItem.dataProvider=this._mArrData,this.scaleX=App.fixUISX(),App.EffectUtils.showView2(this,300,0,0,this.scaleX,1)},i.prototype.refreshListOnChange=function(t){var e=Math.floor(t/1e3);this._mArrData||this.initDatass();for(var i=this._mArrData,o=this._mArrData.length,n=0;o>n;n++){var s=i.getItemAt(n);s.isCurr=s.id==e}Log.log("type",e,"data",t),this._mArrData.refresh(),this.changeItem.dataProvider=this._mArrData},i.prototype.refreshGameList=function(){this.changeItem.itemRenderer=t.ChangeCannonItem,this.changeItem.itemRendererSkinName="resource/games/fishjoy/skins/component/ChangeCannonItemSkin.exml",this.changeScroller.viewport.scrollH=0,this.changeScroller.viewport=this.changeItem},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.mainGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.groupClick,this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandle,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.mainGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.groupClick,this),App.EffectUtils.removeEffectBtn(this.btnClose,this.closeHandle,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.groupClick=function(t){},i.prototype.onItemTap=function(e){var i=1e3*e.id+1;this.applyFunc(t.FishConst.Player_Change_Cannon,{isAddStr:!1,levels:i}),t.SoundUtils.playSwitchPao(),Log.log("换炮onItemTap ",e,i)},i.prototype.closeHandle=function(e){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.ChangeCanon)},this)},i.prototype.touchMove=function(t){this.changeScroller.stopAnimation(),this.ScrollBox.width=930,this.ScrollBox.x=0;var e=this.changeScroller.viewport;t.localY<54?e.scrollV=0:t.localY>e.height-54?e.scrollV=this.changeItem.contentHeight-e.height:e.scrollV=(this.changeItem.contentHeight-e.height)/(e.height-108)*(t.localY-54)},i.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=671},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.changeItem.removeChildren())},i}(base.GameView);t.ChangeCannonView=e,__reflect(e.prototype,"fishjoy.ChangeCannonView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","FishJoyGameSkin")||this}return __extends(i,e),i.prototype.getFishLay=function(t,e){var i=e?this.fishTide:this.fishGroup;if(i.numChildren<1)for(var o=0;10>o;o++)i.addChild(new egret.DisplayObjectContainer);return i.getChildAt(Math.floor(t/1e3))},Object.defineProperty(i.prototype,"mFishGroup",{get:function(){return this.fishGroup},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mFishGroupTide",{get:function(){return this.fishTide},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mShandowGroup",{get:function(){return this.shandowGroup},enumerable:!0,configurable:!0}),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.btnYu.visible=App.IsTest,this.txtShowHit.visible=App.IsTest,this.backGroup.touchEnabled=!0,this.backGroup.touchChildren=!1,this.backGroup2.touchEnabled=!1,this.backGroup2.touchChildren=!1,this.fishGroup.touchEnabled=!1,this.fishGroup.touchChildren=!1,this.bulletGroup.touchChildren=!1,this.bulletGroup.touchEnabled=!1,this.effectGroup.touchChildren=!1,this.effectGroup.touchEnabled=!1,this.playerGroup.touchEnabled=!1,this.chatGroup.visible=!1,this.menuGroup.visible=!1;for(var i=1;4>=i;i++)this.getPlayerRender(i).initComponent(this._controller);this.foreBg.initComponent(this._controller),this.foreBg1.initComponent(this._controller),this.changeBg.initComponent(this._controller),this.TipsPromt.initComponent(this._controller),this._mTideWave=new t.TideWave,this._mTideWave.init(),this.btnRedPacket2=lobby.RedPackBone.create(),this.btnRedPacket2.init(),this.uiGroup.addChild(this.btnRedPacket2),this.btnRedPacket2.x=40,this.btnRedPacket2.y=124,this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0,this.initBroadcast(this),this.mBroadcastView.scaleX=App.fixUISX()},i.prototype.setTouchEnable=function(t){this.playerGroup.touchChildren=t,this.uiGroup.touchChildren=t},i.prototype.setChatPos=function(t){1==t?(this.chatGroup.x=2,this.btnChat.x=2):2==t&&(this.chatGroup.x=1048,this.btnChat.x=1048)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnYu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYu,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.backGroup.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.btnMenu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenu,this),this.btnChat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChat,this),this.menuGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenuGroup,this),this.chatGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroup,this),this.btnAutoShoot.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoShoot,this),this.btnLock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockFish,this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.expirePack,this),App.CommonUtils.effectButton(this.btnExit,this.onGameExit,this);for(var t=1;4>=t;t++)this.getPlayerRender(t).addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnYu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYu,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.backGroup.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.btnMenu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenu,this),this.btnChat.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChat,this),this.menuGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMenuGroup,this),this.chatGroup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChatGroup,this),this.btnAutoShoot.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAutoShoot,this),this.btnLock.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLockFish,this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.expirePack,this),App.CommonUtils.removeButton(this.btnExit);for(var t=1;4>=t;t++)this.getPlayerRender(t).removeEvent()},i.prototype.shakeScreen=function(){var t=this;egret.Tween.removeTweens(this),this.scaleX=1,this.scaleY=1,egret.Tween.get(this).to({scaleX:1.02,scaleY:1.02},100).wait(10).to({scaleX:1,scaleY:1},100).wait(10).to({scaleX:1.02,scaleY:1.02},100).wait(10).to({scaleX:1,scaleY:1},100).call(function(){t.scaleX=1,t.scaleY=1,egret.Tween.removeTweens(t)})},i.prototype.removeShakeBlank=function(){},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.applyFunc(t.FishConst.hide_master_paopao)},i.prototype.RedPackNotify=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation)},i.prototype.grabRedPackBack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.expirePack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.onAutoShoot=function(e){t.SoundUtils.playBtnSound(),this.applyFunc("onAutoShoot",this.btnAutoShoot.selected),this.applyFunc(t.FishConst.hide_master_paopao)},i.prototype.onLockFish=function(e){t.SoundUtils.playBtnSound(),this.applyFunc("onLockFish",this.btnLock.selected),this.applyFunc(t.FishConst.hide_master_paopao)},i.prototype.resetAutoUI=function(){this.btnAutoShoot.selected=!1},i.prototype.resetLockFishBtn=function(){this.btnLock.selected=!1},i.prototype.hideMenu=function(){this.menuGroup.visible=!1},i.prototype.onMenu=function(){this.applyFunc(t.FishConst.hide_master_paopao),t.SoundUtils.playBtnSound(),this.menuGroup.visible=!this.menuGroup.visible,this.menuGroup.visible?this.btnMenu.source="grabfish_ui_manubutten2":this.btnMenu.source="grabfish_ui_manubutten",this.chatGroup.visible=!1},i.prototype.onChat=function(){this.applyFunc(t.FishConst.hide_master_paopao),this.chatGroup.visible=!this.chatGroup.visible,this.hideMenu()},i.prototype.onMenuGroup=function(e){switch(e.target.name){case"btnGuide":t.SoundUtils.playBtnSound(),this.applyFunc("GuideClickFunc");break;case"btnSetting":t.SoundUtils.playBtnSound(),this.applyFunc("SettingClickFunc");break;case"btnChangeCannon":t.SoundUtils.playBtnSound(),this.applyFunc("ChangeCannonClickFunc");break;case"btnhelp":t.SoundUtils.playBtnSound(),this.applyFunc("HelpClickFunc");break;case"btnChat":t.SoundUtils.playBtnSound(),this.chatGroup.visible=!this.chatGroup.visible}},i.prototype.onGameExit=function(){this.onBack()},i.prototype.onChatGroup=function(e){var i,o;i=e.target.name,o=i.split("_"),this.applyFunc(t.FishConst.PLAYER_CHAT,o[1]),this.chatGroup.visible=!1},i.prototype.getPlayerRender=function(t){var e=this;return e["player"+(t-1)]},i.prototype.onBack=function(){this.applyFunc(t.FishConst.CLICKBACKROOM)},i.prototype.onTouchBegin=function(t){this.setTouchEnable(!1),this.applyFunc("onTouchBegin",t.localX,t.localY)},i.prototype.onTouchEnd=function(t){this.setTouchEnable(!0),this.applyFunc("onTouchEnd",t.localX,t.localY)},i.prototype.onTouchMove=function(t){this.applyFunc("onTouchMove",t.localX,t.localY)},i.prototype.onBtnYu=function(e){t.FishConst.mIsShowFishHit=!t.FishConst.mIsShowFishHit,this.txtShowHit.text=t.FishConst.mIsShowFishHit?"关闭显示碰撞区域":"打开显示碰撞区域",this.applyFunc("onBtnYu"),lobby.BroadcastView.testPlay(),App.getWpH()},i.prototype.onBtnPaoRemove=function(t){this.applyFunc("onBtnPaoRemove")},i.prototype.onBtnPaoAdd=function(t){this.applyFunc("onBtnPaoAdd")},i.prototype.playTideWave=function(e){this._mTideWave.parent||this.effectGroup.addChild(this._mTideWave),this._mTideWave.addEventListener(t.TideWave.WAVE_START,this.waveStart,this),this._mTideWave.addEventListener(t.TideWave.WAVE_MOVE,this.waveMove,this),this._mTideWave.addEventListener(egret.Event.COMPLETE,this.waveEnd,this),this._mTideWave.play(e)},i.prototype.waveEnd=function(e){this._mTideWave&&(this._mTideWave.removeEventListener(t.TideWave.WAVE_START,this.waveStart,this),this._mTideWave.removeEventListener(t.TideWave.WAVE_MOVE,this.waveMove,this),this._mTideWave.removeEventListener(egret.Event.COMPLETE,this.waveEnd,this)),this.applyFunc("waveEnd")},i.prototype.waveStart=function(t){this.applyFunc("screenshots")},i.prototype.waveMove=function(t){this.applyFunc("changeBgPos",t.data)},i.prototype.removeTideWave=function(){this._mTideWave&&(this._mTideWave.destroy(),this._mTideWave=void 0)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeTideWave(),this.fishGroup.removeChildren(),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0),this.TipsPromt.destroy(),this.TipsPromt=void 0,this.foreBg.destroy(),this.foreBg1.destroy(),this.changeBg.destroy(),this.foreBg=void 0,this.foreBg1=void 0,this.changeBg=void 0,Log.trace("销毁 fishjoy.GameView"))},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"fishjoy.GameView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.skinName="GuideItemSkin",t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.cannonImg.source=this.data.FishUI,this.labelGold.text="+ "+CommonUtils.getInstance().money2StrTwo(this.data.FishValue*t.FishUtil.mFishBaseMultiple))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},i}(eui.ItemRenderer);t.GuideItem=e,__reflect(e.prototype,"fishjoy.GuideItem")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","GuideSkin")||this}return __extends(i,e),i.prototype.open=function(){e.prototype.open.call(this);var i=t.TxtPack.getExplainTxt("90014");this.tips_lable.text=i,this.refreshGameList(),this.scaleX=App.fixUISX(),App.EffectUtils.showView2(this,300,0,0,this.scaleX,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.guideScorller,this.guideList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandle,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.refreshGameList=function(){var e=RES.getRes("fish_json"),i=new eui.ArrayCollection;for(var o in e)i.addItem(e[o]);this.guideList.itemRenderer=t.GuideItem,this.guideList.dataProvider=i,this.guideScorller.viewport.scrollH=0,this.guideScorller.viewport=this.guideList},i.prototype.touchMove=function(t){this.guideScorller.stopAnimation(),this.ScrollBox.width=930,this.ScrollBox.x=0;var e=this.guideScorller.viewport;t.localY<54?e.scrollV=0:t.localY>e.height-54?e.scrollV=this.guideList.contentHeight-e.height:e.scrollV=(this.guideList.contentHeight-e.height)/(e.height-108)*(t.localY-54)},i.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=637},i.prototype.closeHandle=function(){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.Guide)},this),App.MouseUtils.removeMouseWheel()},i}(base.GameView);t.GuideView=e,__reflect(e.prototype,"fishjoy.GuideView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"fishjoy","SettingSkin")||this;return i.vMultiple=100,i}return __extends(i,e),i.prototype.initUI=function(){},i.prototype.open=function(){e.prototype.open.call(this),this.initSet(),this.scaleX=App.fixUISX(),App.EffectUtils.showView2(this,300,0,0,this.scaleX,1)},i.prototype.initSet=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0),this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=this.vMultiple,this.VoiceSlider.value=App.SoundManager.getEffectVolume()*this.vMultiple,this.MusicSlider.minimum=0,this.MusicSlider.maximum=this.vMultiple,this.MusicSlider.value=App.SoundManager.getBgVolume()*this.vMultiple},i.prototype.addEvent=function(){this.mainGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mainGroupClick,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btn_musicOff.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_musicOn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOff.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this)},i.prototype.removeEvent=function(){this.mainGroup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mainGroupClick,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.closeHandle,this),this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btn_musicOff.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_musicOn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOff.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this),this.btn_soundOn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onOpen,this)
},i.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/this.vMultiple,App.SoundManager.setEffectVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/this.vMultiple,App.SoundManager.setBgVolume(e)}},i.prototype.onOpen=function(t){switch(t.currentTarget){case this.btn_musicOff:App.SoundManager.setBgOn(!1),this.voiceHandler(0,!1);break;case this.btn_musicOn:App.SoundManager.setBgOn(!0),this.voiceHandler(100,!1);break;case this.btn_soundOff:App.SoundManager.setEffectOn(!1),this.voiceHandler(0,!0);break;case this.btn_soundOn:App.SoundManager.setEffectOn(!0),this.voiceHandler(100,!0)}},i.prototype.voiceHandler=function(t,e){e?(this.VoiceSlider.value=t,App.SoundManager.setEffectVolume(t/this.vMultiple)):(this.MusicSlider.value=t,App.SoundManager.setBgVolume(t/this.vMultiple))},i.prototype.mainGroupClick=function(t){},i.prototype.closeHandle=function(e){App.EffectUtils.hideView(this,function(){App.ViewManager.close(t.ViewsConst.Setting)},this)},i}(base.GameView);t.SettingView=e,__reflect(e.prototype,"fishjoy.SettingView")}(fishjoy||(fishjoy={}));var hhdz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.hhdz=i,__reflect(i.prototype,"hhdz.Entrance.hhdz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(i){var o=t.call(this,i)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,e._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(e,t),e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEffect(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.goToWash=function(){this.armature.play(e.ACTION_WASH,-1),this.setState(e.ACTION_WASH),App.SoundManager.playEffect("cardwash_mp3")},e.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:-270,scaleX:.5,scaleY:.5},400,egret.Ease.sineInOut).call(function(){this.alpha=0,this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)}.bind(this))},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.removeEffect=function(){},e.prototype.playEffect=function(t){},e.prototype.die=function(){},e.ACTION_WASH="clean",e._mActionList=[e.ACTION_WASH],e}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"hhdz.Shuffle")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"BetBtn")||this;return i.coinBox=[],i.winpos=[],i.allChipList=[],i}return __extends(i,e),i.prototype.betBlack=function(){this.applyFunc("bet",1)},i.prototype.betRed=function(){this.applyFunc("bet",0)},i.prototype.betLucky=function(){this.applyFunc("bet",2)},i.prototype.initCoinBox=function(){this.coinBox.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinBox.push(e)}},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.showBetMoney=function(e){var i=Math.floor(App.CommonUtils.money(e[t.PlaceConst.RED])),o=Math.floor(App.CommonUtils.money(e[t.PlaceConst.BLACK])),n=Math.floor(App.CommonUtils.money(e[t.PlaceConst.LUCKY]));this.TotalBetRed.text=i?""+i:"",this.TotalBetBlack.text=o?""+o:"",this.TotalBetLucky.text=n?""+n:"";for(var s=0;s<e.length;s++){var r=Math.floor(App.CommonUtils.money(e[s]));r&&(this["isBet_"+s]=!0,this.showCoin(s,r))}},i.prototype.showCoin=function(e,i){var o=t.Application.getNumObj(i),n=Object.keys(o),s=1==e?this.CoinBoxBlack1:0==e?this.CoinBoxRed1:this.CoinBoxLucky1,r=1==e?this.CoinBoxBlack2:0==e?this.CoinBoxRed2:this.CoinBoxLucky2,a=1==e?this.CoinBoxBlack3:0==e?this.CoinBoxRed3:this.CoinBoxLucky3;this.renderCoinType(n[0],o[n[0]],this.coinBox[e].coinBoxObj0,s),n.length>1?this.renderCoinType(n[1],o[n[1]],this.coinBox[e].coinBoxObj1,r):(r.removeChildren(),this.coinBox[e].coinBoxObj1._coinType="",this.coinBox[e].coinBoxObj1._coinNum=0,this.coinBox[e].coinBoxObj1._currentY=0),n.length>2?this.renderCoinType(n[2],o[n[2]],this.coinBox[e].coinBoxObj2,a):(a.removeChildren(),this.coinBox[e].coinBoxObj2._coinType="",this.coinBox[e].coinBoxObj2._coinNum=0,this.coinBox[e].coinBoxObj2._currentY=0)},i.prototype.addCoin=function(t,e,i,o){var n,s="";switch(e){case"sw":s="common_ui_10_png",n=1e5;break;case"w":s="common_ui_4_png",n=1e4;break;case"q":s="common_ui_8_png",n=1e3;break;case"b":s="common_ui_5_png",n=100;break;case"s":s="common_ui_2_png",n=10;break;case"g":s="common_ui_0_png",n=1}for(var r=0,a=-60,h=0,l=[],p=0;i>p;p++){var c=common.CoinFactory.i.createCoin();c.refresh(s,n,r,a),c.alpha=0,l.push(c),t.addChild(c)}l.forEach(function(t,e){if(0==o._currentY)h=0;else if(this.randomNum()>.65){var i=this.randomNum();h=i>.5?2:-2}else h=0;egret.Tween.get(l[e]).wait(150*e).to({y:o._currentY,x:h},150,egret.Ease.sineInOut),function(t){R.setTimeOnce(function(){App.SoundManager.playEffect("bet_mp3"),l[t].alpha=1},this,150*t)}(e),o._currentY-=5}.bind(this))},i.prototype.randomNum=function(){return Math.random()},i.prototype.coinFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];egret.Tween.get(o).to({alpha:0},120)}}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){for(var e=1==t?"Black":0==t?"Red":"Lucky",i=1;4>i;i++){var o=this["CoinBox"+e+i];o.alpha=1}}.bind(this))},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.createWinChip=function(e,i){var o=e==t.PlaceConst.BLACK?"Black":e==t.PlaceConst.RED?"Red":"Lucky";if(this["isBet_"+e]){var n=this["BetBox"+o],s=this["ChipPos"+e],r=void 0,a=void 0;r=App.StageUtils.getWidth()/2+s.horizontalCenter,a=App.StageUtils.getHeight()-s.bottom-s.height;for(var h=this.winpos[i],l=this.GroupChip.globalToLocal(h.x,h.y),p=0;5>p;p++){var c=App.MathUtils.random(0,n.width),u=App.MathUtils.random(0,n.height),d=common.chipBtn.create();d.init(p),d.setNameNum(i);var m=Math.floor(r+c),y=Math.floor(a+u),_=Math.floor(l.x),g=Math.floor(l.y);this.GroupChip.addChild(d),d.x=n.x+n.width/2,d.y=n.y+n.height/2,d.scaleX=.5,d.scaleY=.5,d.alpha=0,d.setScore(),d.setFlyX(m),d.setFlyY(y),d.setFlyChipX(_),d.setFlyChipY(g),this.allChipList.push(d)}}},i.prototype.betToPlaceAni=function(t,e,i){base.GameCoinMgr.i.flyToPlace(t,this["BetPoint_"+e],i,this.winpos,this.GroupChip)},i.prototype.cleanChip=function(){base.GameCoinMgr.i.clean()},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()})},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.clearCoin=function(){for(var t=1;4>t;t++)this.removeCoins(this["CoinBoxBlack"+t]),this.removeCoins(this["CoinBoxRed"+t]),this.removeCoins(this["CoinBoxLucky"+t]);this.isBet_0=!1,this.isBet_1=!1,this.isBet_2=!1,this.TotalBetBlack.text="",this.TotalBetRed.text="",this.TotalBetLucky.text="",this.MyBetBlack.text="",this.MyBetRed.text="",this.MyBetLucky.text="",this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,150)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,250)},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.showMyPreBet=function(e){this.MyPreBetRed.text=e[t.PlaceConst.RED]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])):"",this.MyPreBetBlack.text=e[t.PlaceConst.BLACK]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])):"",this.MyPreBetLucky.text=e[t.PlaceConst.LUCKY]?""+Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY])):""},i.prototype.showSelfBet=function(e){var i=Math.round(App.CommonUtils.money(e[t.PlaceConst.RED])),o=Math.round(App.CommonUtils.money(e[t.PlaceConst.BLACK])),n=Math.round(App.CommonUtils.money(e[t.PlaceConst.LUCKY]));this.MyBetRed.text=i?""+i:"",this.MyBetBlack.text=o?""+o:"",this.MyBetLucky.text=n?""+n:""},i.prototype.clearPreBet=function(){this.MyPreBetBlack.text="",this.MyPreBetRed.text="",this.MyPreBetLucky.text=""},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){this.StarPos_0.visible=!1,this.StarPos_1.visible=!1,this.StarPos_2.visible=!1},i.prototype.hideTableLight=function(){this.TouchBlack.alpha=0,this.TouchRed.alpha=0,this.TouchLucky.alpha=0},i.prototype.showTableLight=function(e){e.forEach(function(e){var i=e==t.PlaceConst.RED?"Red":e==t.PlaceConst.BLACK?"Black":"Lucky",o=this["Touch"+i];egret.Tween.get(o).wait(0).to({alpha:1},0),egret.Tween.get(o).wait(100).to({alpha:.7},400),egret.Tween.get(o).wait(550).to({alpha:1},0),egret.Tween.get(o).wait(650).to({alpha:.7},400),egret.Tween.get(o).wait(1050).to({alpha:1},0)}.bind(this))},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.TouchBlack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.removeEvent=function(){this.TouchBlack.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betBlack,this),this.TouchRed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betRed,this),this.TouchLucky.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betLucky,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),this.removeEvent(),this.clearFlyWinChip(),this.cleanChip(),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.coinBox=void 0,this.winpos=void 0,this.allChipList=void 0},i}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"hhdz.BetBox")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initComponent=function(e){t.prototype.initComponent.call(this,e),this.JeButton.initComponent(e),this._LogicBtn=new common.LoginBtn(null),this._LogicBtn.initComponent(e,this),this._LogicBtn.bottom=this._LogicBtn.right=0},e.prototype.open=function(){this._LogicBtn.open()},e.prototype.serJeButtonData=function(t){this.JeButton.createChip(t),this.setchipValue(1)},e.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},Object.defineProperty(e.prototype,"LogicBtn",{get:function(){return this._LogicBtn},enumerable:!0,configurable:!0}),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this._LogicBtn.destroy(),this._LogicBtn=void 0)},e}(BaseEuiComponent);t.BottomView=e,__reflect(e.prototype,"hhdz.BottomView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this,"CardSkin")||this;return t.WAIT_CARD_TIME=350,t.blackList=[],t.redList=[],t}return __extends(i,e),i.prototype.clearCard=function(){this.blackList&&this.blackList.length&&(this.blackList.forEach(function(t){t.parent&&(egret.Tween.removeTweens(t),t.parent.removeChild(t))}),this.blackList.length=0),this.redList&&this.redList.length&&(this.redList.forEach(function(t){t.parent&&(egret.Tween.removeTweens(t),t.parent.removeChild(t))}),this.redList.length=0),this.CardTypeBlack.alpha=0,this.CardTypeRed.alpha=0},i.prototype.dealCard=function(e){this.initPoint();for(var i=0;6>i;i++){var o=new eui.Image;o.source="common_ui_cardback_png",o.scaleX=.5,o.scaleY=.5,3>i?(o.x=this.blackPoint.x,o.y=this.blackPoint.y,this.GroupCardBlack.addChild(o),this.blackList.push(o)):(o.x=this.redPoint.x,o.y=this.redPoint.y,this.GroupCardRed.addChild(o),this.redList.push(o))}e?(t.Application.dealCard(this.blackList,this.blackPoints,this.WAIT_CARD_TIME),App.TimerManager.doTimer(this.WAIT_CARD_TIME/2,1,this.dealRed,this)):(t.Application.showCard(this.blackList,this.blackPoints),t.Application.showCard(this.redList,this.redPoints))},i.prototype.dealRed=function(){t.Application.dealCard(this.redList,this.redPoints,this.WAIT_CARD_TIME)},i.prototype.opencard=function(e,i,o){var n="black"==i?this.blackList:"red"==i?this.redList:"";o?t.Application.openCard(e,n,this.WAIT_CARD_TIME):t.Application.openCardInstant(e,n)},i.prototype.showCardType=function(t,e){var i="black"==t?this.CardTypeBlack:"red"==t?this.CardTypeRed:"",o="black"==t?this.CardTypeSourceBlack:this.CardTypeSourceRed,n=0==e?"single_mp3":1==e?"pairs_mp3":2==e?"straight_mp3":3==e?"gold_flower_mp3":4==e?"straight_gold_mp3":"panther_mp3";o.source=0==e?"ui_card_type_json.redblank-ui-danzhang":1==e?"ui_card_type_json.redblank-ui-duizi":2==e?"ui_card_type_json.redblank-ui-shunzi":3==e?"ui_card_type_json.redblank-ui-jinhua":4==e?"ui_card_type_json.redblank-ui-shunjin":"ui_card_type_json.redblank-ui-baozi",App.SoundManager.playEffect(n),egret.Tween.get(i).to({alpha:1},200,egret.Ease.sineInOut)},i.prototype.showWinner=function(t){this.WinnerBox.scaleX=0,this.WinnerBox.scaleY=0,this.WinnerBox.alpha=1,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0),egret.Tween.get(this.WinnerBox).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},i.prototype.showWinnerPromp=function(t){this.WinnerBox.scaleX=1,this.WinnerBox.scaleY=1,this.WinnerBox.alpha=0,1==t?(this.WinBlack.alpha=0,this.WinRed.alpha=1):(this.WinBlack.alpha=1,this.WinRed.alpha=0)},i.prototype.hideWinner=function(){this.WinnerBox.alpha=0},i.prototype.initPoint=function(){var e=this.GroupDeal.localToGlobal(this.GroupDeal.getChildAt(0).x,this.GroupDeal.getChildAt(0).y);this.blackPoint=this.GroupCardBlack.globalToLocal(e.x,e.y),this.redPoint=this.GroupCardRed.globalToLocal(e.x,e.y),this.blackPoints=t.Application.getPoints(this.GroupCardBlack),this.redPoints=t.Application.getPoints(this.GroupCardRed)},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.clearCard(),this.blackList=void 0,this.redList=void 0,this.blackPoint=void 0,this.redPoint=void 0,this.blackPoints=void 0,this.redPoints=void 0},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"hhdz.CardView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ChartSkin")||this;return i.record=[],i.detailRecord=[],i}return __extends(i,e),i.prototype.setIssue=function(t){this.Issue.text=t+"期"},i.prototype.showChart=function(t){this.record.length=0,this.record=JSON.parse(JSON.stringify(t)),this.record.compare_values.length>22&&this.record.compare_values.splice(0,this.record.compare_values.length-22),this.record.open_types.length>7&&this.record.open_types.splice(0,this.record.open_types.length-7),this.CompareBox.removeChildren(),this.OpenTypeBox.removeChildren(),this.OpenTypeTextBox.removeChildren();var e=0,i=2,o=0,n=0,s=20,r=1;this.record.compare_values.forEach(function(t){var o=new eui.Image;o.x=e,o.y=i,o.source=1==t?RES.getRes("honghei_ui_hongquan"):RES.getRes("honghei_ui_heiquan"),e+=26,this.CompareBox.addChild(o)}.bind(this)),this.record.open_types.forEach(function(t){var e=new eui.Image;e.x=o,e.y=n,e.source=0==t?RES.getRes("honghei_ui_leixing1"):RES.getRes("honghei_ui_leixing2"),this.OpenTypeBox.addChild(e);var i=new eui.Image;i.x=s,i.y=r,i.source=RES.getRes("honghei_ui_cardType"+t),this.OpenTypeTextBox.addChild(i),o+=82,s+=82}.bind(this))},i.prototype.renderChartDetail=function(t){this.detailRecord.length=0,this.winRedCount=0,this.winBlackCount=0,this.allCount=0;for(var e=0;e<t.length;e++)this.detailRecord[e]=1==t[e]?0:1;if(this.detailRecord.length){this.detailRecord.length>60&&this.detailRecord.splice(0,60),this.detailRecord.forEach(function(t){0==t?this.winRedCount+=1:this.winBlackCount+=1}.bind(this)),this.allCount=this.detailRecord.length,this.setWinCountRed(this.winRedCount),this.setWinCountBlack(this.winBlackCount),this.setCountAll(this.allCount),this.ChartBead.renderBead(this.detailRecord,"hhdz",111),this.ChartOther.renderOtherChart(this.detailRecord,"hhdz",111);var i=this.ChartOther.getAskRoad(0),o=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(i),this.renderBlackAskRoad(o)}},i.prototype.renderRedAskRoad=function(t){this.RedAskRoad.removeChildren(),this.renderAskRoad(t,this.RedAskRoad)},i.prototype.renderBlackAskRoad=function(t){this.BlackAskRoad.removeChildren(),this.renderAskRoad(t,this.BlackAskRoad)},i.prototype.renderAskRoad=function(t,e){if(t.length){var i=new eui.Image;i.x=0,i.y=2,i.source=RES.getRes("hhdz_ui_dyl_"+t[0]),e.addChild(i)}if(t.length>1){var i=new eui.Image;i.x=12,i.y=2,i.source=RES.getRes("hhdz_ui_xl_"+t[1]),e.addChild(i)}if(t.length>2){var i=new eui.Image;i.x=24,i.y=2,i.source=RES.getRes("hhdz_ui_xql_"+t[2]),e.addChild(i)}},i.prototype.setWinCountRed=function(t){this.CountRed.text=t},i.prototype.setWinCountBlack=function(t){this.CountBlack.text=t},i.prototype.setCountAll=function(t){this.CountAll.text=t},i.prototype.openApproach=function(){egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut),R.sendPlayerAction(t.PointConst.CLASSIC_POINT.DIRECT_MAPS)},i.prototype.closeApproach=function(){egret.Tween.get(this.GroupChart).to({right:-277},200,egret.Ease.sineInOut)},i.prototype.hideApproach=function(){this.GroupChart.right=-277},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.BtnChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openApproach,this),this.BtnCloseChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeApproach,this)},i.prototype.removeEvent=function(){this.BtnChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openApproach,this),this.BtnCloseChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeApproach,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),common.BeadFactory.i.clear(),this.record=void 0,this.detailRecord=void 0,this.removeEvent()},i}(BaseEuiComponent);t.Chart=e,__reflect(e.prototype,"hhdz.Chart")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,"HhdzHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},e.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<24?e.scrollV=0:t.localY>e.height-24?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-48)*(t.localY-24)},e.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},e.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"hhdz.Help")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,"TimeClockSkin")||this;return console.log(t),i}return __extends(i,e),i.prototype.startTime=function(t){this._currentSecond=t.time,this._currentStatus=t.status,t.time&&(this.TimeLbL.text=t.time,App.TimerManager.doTimer(1e3,0,this.timerFunc,this))},i.prototype.showTime=function(){this.GroupClock.alpha=1},i.prototype.timerFunc=function(){this._currentSecond?(this._currentSecond--,this.TimeLbL.text=""+this._currentSecond,this._currentStatus==t.GameState.BETTING&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+"",this._currentSecond<4&&(App.SoundManager.playEffect("countdown_mp3"),this.numShake()))):(App.TimerManager.remove(this.timerFunc,this),this.GroupClock.alpha=0)},i.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.removeTime=function(){App.TimerManager.remove(this.timerFunc,this),this.TimeLbL.scaleX=this.TimeLbL.scaleY=1,this.GroupClock.alpha=0},i.prototype.hideTime=function(){this.TimeLbL.scaleX=this.TimeLbL.scaleY=1,this.GroupClock.alpha=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeTime()},i}(BaseEuiComponent);t.TimeClockView=e,__reflect(e.prototype,"hhdz.TimeClockView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e;!function(t){t[t.Base=1400]="Base",t[t.Popup=1401]="Popup",t[t.Recharge=1402]="Recharge"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.LEAVE_GAME=10104]="LEAVE_GAME",t[t.LEAVE_GAME_R=10105]="LEAVE_GAME_R",t[t.ONLINE_COUNT_R=10402]="ONLINE_COUNT_R",t[t.ISSUE_N=10403]="ISSUE_N",t[t.GAME_STATE_R=10404]="GAME_STATE_R",t[t.LIMIT_N=10405]="LIMIT_N",t[t.ME_BET=10406]="ME_BET",t[t.ME_BET_R=10407]="ME_BET_R",t[t.PLAYER_BET_R=10408]="PLAYER_BET_R",t[t.GAME_BET_R=10409]="GAME_BET_R",t[t.GAME_RESULT_R=10410]="GAME_RESULT_R",t[t.EXCHANGE_R=10411]="EXCHANGE_R",t[t.CHART_R=10412]="CHART_R",t[t.RANKING=10415]="RANKING",t[t.RANKING_R=10416]="RANKING_R",t[t.SPECIAL_PLAYER_N=10419]="SPECIAL_PLAYER_N",t[t.BET_ACTION_N=10420]="BET_ACTION_N",t[t.CHIPS_RECORD_Q=10421]="CHIPS_RECORD_Q",t[t.CHIPS_RECORD_R=10422]="CHIPS_RECORD_R",t[t.REMAIN_TIME_Q=10425]="REMAIN_TIME_Q",t[t.REMAIN_TIEM_R=10426]="REMAIN_TIEM_R",t[t.HITRATE_N=10427]="HITRATE_N"}(i=t.ProxyConst||(t.ProxyConst={}));var o;!function(t){t[t.onGameStateCallBack=1001]="onGameStateCallBack",t[t.onChartCallBack=1002]="onChartCallBack",t[t.onGameResultCallBack=1003]="onGameResultCallBack",t[t.onOnlineCountCallBack=1004]="onOnlineCountCallBack",t[t.onPlayerBetCallBack=1005]="onPlayerBetCallBack",t[t.onSelfBetCallBack=1006]="onSelfBetCallBack",t[t.onGameBetCallBack=1007]="onGameBetCallBack",t[t.onExchangeCallBack=1008]="onExchangeCallBack",t[t.onRankingCallBack=1009]="onRankingCallBack",t[t.onWinningRecordCallBack=1010]="onWinningRecordCallBack",t[t.onLeaveGameCallBack=1011]="onLeaveGameCallBack",t[t.onBetActionCallBack=1012]="onBetActionCallBack",t[t.onSpecialPlayerCallBack=1013]="onSpecialPlayerCallBack",t[t.onChipsRecordCallBack=1014]="onChipsRecordCallBack",t[t.onIssueCallBack=1015]="onIssueCallBack",t[t.onRemainTimeCallBack=1016]="onRemainTimeCallBack",t[t.onHitrateCallBack=1017]="onHitrateCallBack",t[t.dealCard=1018]="dealCard"}(o=t.CallBacks||(t.CallBacks={}));var n;!function(t){t[t.BETTING=1]="BETTING",t[t.EXCHANGE=2]="EXCHANGE"}(n=t.GameState||(t.GameState={}));var s;!function(t){t[t.RED=0]="RED",t[t.BLACK=1]="BLACK",t[t.LUCKY=2]="LUCKY"}(s=t.PlaceConst||(t.PlaceConst={}));var r;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(r=t.PlayerConst||(t.PlayerConst={}));var a=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额未达到最低限红","不在下注状态","超出单人最高限红","超出该投注区域最高限红","没有足够的余额"],t}();t.CodeErrorTxt=a,__reflect(a.prototype,"hhdz.CodeErrorTxt");var h=function(){function t(){}return t.TypeTxt_LIST=["单 张","对 子","顺 子","金 花","顺 金","豹 子"],t}();t.CardTypeTxt=h,__reflect(h.prototype,"hhdz.CardTypeTxt");var l=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"HHDZcounter_pick1",COUNTER_PICK5:"HHDZcounter_pick5",COUNTER_PICK10:"HHDZcounter_pick10",COUNTER_PICK20:"HHDZcounter_pick20",COUNTER_PICK50:"HHDZcounter_pick50",COUNTER_PICK100:"HHDZcounter_pick100",COUNTER_PICK200:"HHDZcounter_pick200",COUNTER_PICK500:"HHDZcounter_pick500",COUNTER_PICK1000:"HHDZcounter_pick1000",COUNTER_PICK0:"HHDZcounter_pickAllin",COUNTER_BET1:"HHDZcounter_bet1",COUNTER_BET5:"HHDZcounter_bet5",COUNTER_BET10:"HHDZcounter_bet10",COUNTER_BET20:"HHDZcounter_bet20",COUNTER_BET50:"HHDZcounter_bet50",COUNTER_BET100:"HHDZcounter_bet100",COUNTER_BET200:"HHDZcounter_bet200",COUNTER_BET500:"HHDZcounter_bet500",COUNTER_BET1000:"HHDZcounter_bet1000",COUNTER_BET0:"HHDZcounter_betallin",OPERATE_BUTTONCANCEL:"HHDZoperate_buttoncancel",OPERATE_BUTTONREPEAT:"HHDZoperate_buttonrepeat",OPERATE_BUTTONCONFIRM:"HHDZoperate_buttonconfirm",OPERATE_AUTOCONFIRM:"HHDZoperate_autoconfirm",OPERATE_SETCOUNTER:"HHDZoperate_setcounter",OPERATE_ADDCOUNTER:"HHDZoperate_addcounter",BETS_0:"HHDZbets_red",BETS_1:"HHDZbets_black",BETS_2:"HHDZbets_luck",DIRECT_MAPS:"HHDZdirect_maps",LEADERBOARD_BUTTON:"HHDZleaderboard_button",MENU_BUTTON:"HHDZmenu_button",MENU_HELP_BUTTON:"HHDZmenu_help_button",MENU_SET_BUTTON:"HHDZmenu_set_button",MENU_RECORD_BUTTON:"HHDZmenu_record_button",MENU_BACK_BUTTON:"HHDZmenu_back_button"},t}();t.PointConst=l,__reflect(l.prototype,"hhdz.PointConst")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._mTempMultiple=1,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.addEventListeners(),this.addDataListeners(),this.registers(),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._hhdzModel=new t.GameModel(this),this._proxy=new t.GameProxy(this,this._hhdzModel),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this._hhdzModel.isBackstage=!1},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket()},i.prototype.addEventListeners=function(){this.registerFunc("backToLobby",this.backToLobby,this),this.registerFunc("bet",this.bet,this),this.registerFunc("touch",this.touch,this),this.registerFunc("ShowHandBtn",this.ShowHandBtn,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("clearTable",this.clearTable,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc(t.CallBacks.onGameStateCallBack,this.onGameStateCallBack,this),this.registerFunc(t.CallBacks.onIssueCallBack,this.onIssueCallBack,this),this.registerFunc(t.CallBacks.onChartCallBack,this.onChartCallBack,this),this.registerFunc(t.CallBacks.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.CallBacks.onOnlineCountCallBack,this.onOnlineCountCallBack,this),this.registerFunc(t.CallBacks.onPlayerBetCallBack,this.onPlayerBetCallBack,this),this.registerFunc(t.CallBacks.onBetActionCallBack,this.onBetActionCallBack,this),this.registerFunc(t.CallBacks.onSelfBetCallBack,this.onSelfBetCallBack,this),this.registerFunc(t.CallBacks.onGameBetCallBack,this.onGameBetCallBack,this),this.registerFunc(t.CallBacks.onExchangeCallBack,this.onExchangeCallBack,this),this.registerFunc(t.CallBacks.onRankingCallBack,this.onRankingCallBack,this),this.registerFunc(t.CallBacks.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.CallBacks.onChipsRecordCallBack,this.onChipsRecordCallBack,this),this.registerFunc(t.CallBacks.onLeaveGameCallBack,this.onLeaveGameCallBack,this),this.registerFunc(t.CallBacks.onRemainTimeCallBack,this.onRemainTimeCallBack,this),this.registerFunc(t.CallBacks.onHitrateCallBack,this.onHitrateCallBack,this),this.registerFunc(t.CallBacks.dealCard,this.dealCard,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this)},i.prototype.onUserMoneyChange=function(i){e.prototype.onUserMoneyChange.call(this,i);var o=GamePlayerMgr.i.getPlayer();this._hhdzModel.playerMoneys[t.PlayerConst.SELF]=App.CommonUtils.money(o.getMoney()),this._view.MessageInfo.setUserMoney(App.CommonUtils.money(o.getMoney()))},i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.requestRemainTime(),this._hhdzModel.isBackstage=!0,this.clearTable()
},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.addDataListeners=function(){this._hhdzModel.selBtnIndexNotify.addDataListener(this.selBtnIndexCallBack,this)},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg("bg_mp3"),this._view.BetBox.initCoinBox(),this.initUserInfo(),this.initJebutton()},i.prototype.initJebutton=function(){this._view.Bottom.serJeButtonData(this._hhdzModel.chipArr),this.changeMultiple(this._mTempMultiple),this._popView.getChipSetView().setDefaultChip(this._hhdzModel.chipArr),this.selBtnIndexCallBack()},i.prototype.initUserInfo=function(){var e=GamePlayerMgr.i.getPlayer();this._view.MessageInfo.setUserName(e.getNickName()),this._hhdzModel.playerMoneys[t.PlayerConst.SELF]=App.CommonUtils.money(e.getMoney()),this._hhdzModel.playerIds[t.PlayerConst.SELF]=e.getUserId(),this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.getMoney())),this._view.MessageInfo.setUserImage("ui_headImg_"+e.getAvatar()),this._view.MessageInfo.setUserFrame("ui_headBox_"+e.getAvatarBox())},i.prototype.onGameStateCallBack=function(e,i){this._hhdzModel.gameStateData=t.Application.deepClone(e),this._hhdzModel.gameState=e.state;var o=this.resetTime(e);if(this._hhdzModel.isBackstage)return void(e.state==t.GameState.BETTING&&(this.refreshMoney(),this.clearCoins(),this.renderWinRecord(),this.renderChart()));switch(this._view.TimeClock.removeTime(),this._view.TimeClock.startTime(o),this._view.disabledBtn(),e.state){case t.GameState.BETTING:this.betting(o,i);break;case t.GameState.EXCHANGE:this.exchanging(o)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:t.state};return o},i.prototype.dealCard=function(){this._view.CardView.dealCard(!0)},i.prototype.betting=function(t,e){this.clearTable(),e||(this.refreshMoney(),this.clearCoins()),this._hhdzModel.betTimes++,this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._view.enabledRepeatBet(),this._hhdzModel.isBet=2,t.time==t.allTime?(this._view.shuffleAni(),R.setTimeOnce(function(){this._view.TimeClock.showTime()}.bind(this),this,5e3),this._view.BetAnimation.playAni(0),App.SoundManager.playEffect("start_mp3")):(this._view.CardView.dealCard(!1),this._view.TimeClock.showTime())},i.prototype.exchanging=function(t){this._hhdzModel.rewardTimeDif=t.allTime-t.time,this._view.TimeClock.hideTime(),this._view.CardView.hideWinner(),this._hhdzModel.isBet=1,this._view.CardView.clearCard(),this._view.CardView.dealCard(!1),t.time==t.allTime&&(this._view.BetAnimation.playAni(1),App.SoundManager.playEffect("stop_mp3"))},i.prototype.onIssueCallBack=function(t){this._hhdzModel.issue=t.issue,this._view.setIssue(t.issue)},i.prototype.onChartCallBack=function(t){t.compare_values.length&&t.compare_values.forEach(function(t){this._hhdzModel.historyRecord.compare_values.push(t)}.bind(this)),t.open_types.length&&t.open_types.forEach(function(t){this._hhdzModel.historyRecord.open_types.push(t)}.bind(this)),this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail()},i.prototype.renderChartDetail=function(){this._hhdzModel.historyRecord.compare_values.length&&this._view.renderChartDetail(this._hhdzModel.historyRecord.compare_values)},i.prototype.onGameResultCallBack=function(e,i){if(this._hhdzModel.gameResultData=t.Application.deepClone(e),!i&&(this._hhdzModel.winPos.length=0,e.place_results.forEach(function(e){e.is_hit&&(this._hhdzModel.winPos.push(e.place),this._view.createWinChip(e.place,t.PlayerConst.ONLINE))}.bind(this)),this._hhdzModel.betTimes)){var o=e.compare_value;this._hhdzModel.historyRecord.compare_values.push(o);var n=e.red_open_type>e.black_open_type?e.red_open_type:e.black_open_type;this._hhdzModel.historyRecord.open_types.push(n),this._hhdzModel.historyRecord.compare_values.length>82&&this._hhdzModel.historyRecord.compare_values.splice(0,60)}if(!this._hhdzModel.isBackstage)switch(this._hhdzModel.rewardTimeDif){case 0:this.openBlackCard(e),R.setTimeOnce(function(){this.openRedCard(e)}.bind(this),this,1500),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,3500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,8e3);break;case 1:this._view.CardView.opencard(e.black_cards,"black",!1),this._view.CardView.showCardType("black",e.black_open_type),R.setTimeOnce(function(){this.openRedCard(e)}.bind(this),this,500),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,2500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,7e3);break;case 2:this.showCardWithOutAni(e),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,1500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,6e3);break;case 3:this.showCardWithOutAni(e),R.setTimeOnce(function(){this.showWinner(e)}.bind(this),this,500),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,5e3);break;case 4:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,4e3);break;case 5:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,3e3);break;case 6:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,2e3);break;case 7:this.showCardWithOutAni(e),this._view.CardView.showWinner(e.compare_value),this.renderChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,1e3);break;default:this.renderChart(),this.refreshMoney(),this.renderWinRecord(),this.clearTable(),this.clearCoins()}},i.prototype.showCardWithOutAni=function(t){this._view.CardView.opencard(t.black_cards,"black",!1),this._view.CardView.showCardType("black",t.black_open_type),this._view.CardView.opencard(t.red_cards,"red",!1),this._view.CardView.showCardType("red",t.red_open_type)},i.prototype.onOnlineCountCallBack=function(t){this._view.ToolBar.changeOnlineNum(t.online_count)},i.prototype.onSelfBetCallBack=function(e){return e.code?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[e.code]),this._view.enabledConfirmBet(),void this._view.enabledConserBet()):(this._hhdzModel.hasBet=!0,this.resetPerBet(),void this.betPoints())},i.prototype.onPlayerBetCallBack=function(e){if(e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var i=0;e.infos.forEach(function(t){i+=t.bet_money,this._hhdzModel.betList[t.place]=t.bet_money}.bind(this)),this._view.BetBox.showSelfBet(this._hhdzModel.betList),this._view.MessageInfo.setUserBet(App.CommonUtils.money(i))}},i.prototype.onBetActionCallBack=function(e){var i=this._hhdzModel.playerIds;i.forEach(function(i,o){e.user_id==i&&(this._hhdzModel.playerMoneys[o]=App.CommonUtils.money(e.balance),e.bets.forEach(function(t){this._view.betToPlaceAni(o,t.place,t.bet_money)}.bind(this)),o==t.PlayerConst.SELF?this._view.MessageInfo.setUserMoney(App.CommonUtils.money(e.balance)):(this._view.avatarShake(o),this._view.specialPlayerMoney(App.CommonUtils.money(e.balance),o)),o==t.PlayerConst.PSYCHIC&&e.bets.forEach(function(t){this._view.starFly(t.place)}.bind(this)))}.bind(this))},i.prototype.onGameBetCallBack=function(e){this._hhdzModel.gameState==t.GameState.EXCHANGE&&this._hhdzModel.rewardTimeDif>5||(e.infos.forEach(function(e,i){if(this._hhdzModel.gameState==t.GameState.BETTING){var o=e.total_bet_money-this._hhdzModel.allBetList[e.place];this._view.betToPlaceAni(t.PlayerConst.ONLINE,e.place,o)}this._hhdzModel.allBetList[e.place]=e.total_bet_money}.bind(this)),this._view.BetBox.showBetMoney(this._hhdzModel.allBetList))},i.prototype.onExchangeCallBack=function(e){this._hhdzModel.hasBet&&(this._hhdzModel.lastBetRecord.length=0),this.resetWinMoney(),this._hhdzModel.winPlayer.length=0,e.infos.length&&(e.infos.forEach(function(e){e.place_exchanges.length&&e.place_exchanges.forEach(function(i){if(i.prize_money&&this.createWinChip(i.place,e.user_id,i.prize_money),e.user_id==this._hhdzModel.playerIds[t.PlayerConst.SELF]){var o={place:i.place,bet_money:i.bet_money};this._hhdzModel.lastBetRecord.push(o)}}.bind(this)),this.createMoney(e)}.bind(this)),this.createWinRecord())},i.prototype.createWinChip=function(t,e,i){var o=this._hhdzModel.playerIds;o.forEach(function(o,n){e==o&&(this._view.createWinChip(t,n),-1==this._hhdzModel.winPlayer.indexOf(n)&&this._hhdzModel.winPlayer.push(n),this._hhdzModel.winMoneys[n]+=Number(App.CommonUtils.money2Str(i)))}.bind(this))},i.prototype.resetWinMoney=function(){for(var t=0;t<this._hhdzModel.winMoneys.length;t++)this._hhdzModel.winMoneys[t]=0},i.prototype.createMoney=function(t){var e=this._hhdzModel.playerIds;e.forEach(function(e,i){e==t.user_id&&(this._hhdzModel.playerMoneys[i]=App.CommonUtils.money(t.balance)),this._hhdzModel.winMoneys[i]&&this._view.MessageInfo.playerWinMoney(App.CommonUtils.money2Str(App.CommonUtils.moneyC2S(this._hhdzModel.winMoneys[i])),i)}.bind(this))},i.prototype.onRankingCallBack=function(t){t.infos.length>0&&this._popView.Ranking.rankData(t.infos)},i.prototype.onSpecialPlayerCallBack=function(t){if(t.special_players){for(var e=0;4>e;e++)this._hhdzModel.playerIds[e]=-1,this._hhdzModel.playerMoneys[e]=0;t.special_players.forEach(function(t){this._hhdzModel.playerIds[t.play_role]=t.user_id,this._hhdzModel.playerMoneys[t.play_role]=App.CommonUtils.money(t.balance),this._view.setPluteName(t.nick_name,t.play_role);var e=t.head?t.head:1;this._view.setPluteImage("ui_headImg_"+e,t.play_role),this._view.specialPlayerMoney(""+App.CommonUtils.money(t.balance),t.play_role),this._view.playerDisplay(t.play_role)}.bind(this))}},i.prototype.onChipsRecordCallBack=function(t){t.chips.length?this._hhdzModel.chipArr=JSON.parse(t.chips):this._hhdzModel.chipArr=[0,2,5,8,9],this.initJebutton()},i.prototype.onLeaveGameCallBack=function(t){App.SceneManager.runScene(SceneConsts.Lobby)},i.prototype.onRemainTimeCallBack=function(e){this._hhdzModel.isBackstage=!1;var i=this._hhdzModel.gameStateData;if(i){i.remaining_time=e.remaining_time,this.onGameStateCallBack(i,!0);var o=this._hhdzModel.gameResultData;i.state==t.GameState.EXCHANGE&&o&&this.onGameResultCallBack(o,!0)}},i.prototype.onHitrateCallBack=function(t){this._view.setBeilv(t.hitrate)},i.prototype.armaturePlayEnd=function(){this._view.CardView.dealCard(!0)},i.prototype.backToLobby=function(){this._proxy.sendLeaveGame(),this.backPoints()},i.prototype.bet=function(e,i){if(2==this._hhdzModel.isBet){var o=i?i:1e4*this._hhdzModel.betNum;if(this._hhdzModel.betPlace=e,this.isLimit(e,o))return void(this._hhdzModel.betPoints.length=0);if(o){var n={bet_money:o,place:e};this._hhdzModel.isAutoBet?this.autoBet([n]):(this._hhdzModel.preBetList[e]+=o,this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList),this._view.enabledConfirmBet(),this._view.enabledConserBet()),this.betPlacePoints(e)}else{var s=this.getAllPreBet(),r=this._hhdzModel.playerMoneys[t.PlayerConst.SELF]-App.CommonUtils.money(s);this._popView.Prompt.showPrompt(2,r)}this._hhdzModel.betPoints.push(this._hhdzModel.betNum)}},i.prototype.autoBet=function(t){var e=t,i={bets:e};this._proxy.requestBet(i)},i.prototype.isLimit=function(e,i){var o=!1;return this._hhdzModel.limits.forEach(function(n){if(n.place==e){var s=(this.getAllSelfBet(),this.getAllPreBet()),r=i,a=this._hhdzModel.betList[e],h=this._hhdzModel.preBetList[e];0==this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):r+s>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),o=!0):r&&r<n.limit_min_money?(App.ScrollTxtTips.showTip("当前投注项限红为"+App.CommonUtils.money(n.limit_min_money)+"~"+App.CommonUtils.money(n.limit_max_money)),o=!0):a+h>=n.limit_max_money?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),o=!0):r+a+h>n.limit_max_money&&(this._hhdzModel.limitBetMoney=n.limit_max_money-(a+h),this._popView.Prompt.showPrompt(1,App.CommonUtils.money(this._hhdzModel.limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)),o=!0)}}.bind(this)),o},i.prototype.getAllSelfBet=function(){for(var t=0,e=0;e<this._hhdzModel.betList.length;e++)t+=this._hhdzModel.betList[e];return t},i.prototype.getAllPreBet=function(){for(var t=0,e=0;e<this._hhdzModel.preBetList.length;e++)t+=this._hhdzModel.preBetList[e];return t},i.prototype.touch=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.ShowHandBtn=function(t){this._hhdzModel.selBtnIndex=t+1,this._hhdzModel.selBtnIndexNotify.setData(this._hhdzModel.selBtnIndex)},i.prototype.setAutoBet=function(t){this._hhdzModel.isAutoBet=t,this.autoBetPoints()},i.prototype.repeatBet=function(){if(this._hhdzModel.lastBetRecord.length){if(this.isLimitRepeat())return;this._hhdzModel.isAutoBet?this.autoBet(this._hhdzModel.lastBetRecord):(this._hhdzModel.lastBetRecord.forEach(function(t,e){this._hhdzModel.preBetList[t.place]+=t.bet_money}.bind(this)),this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList),this._view.enabledConfirmBet(),this._view.enabledConserBet())}this.repeatBetPoints()},i.prototype.isLimitRepeat=function(){var e=!1,i=this._hhdzModel.preBetList,o=this._hhdzModel.betList,n=this._hhdzModel.limits;return this._hhdzModel.lastBetRecord.forEach(function(s){var r=s.bet_money+o[s.place]+i[s.place];n.forEach(function(i){s.place==i.place&&(s.bet_money>1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]?(this._popView.Prompt.showPromptBrnn(6),e=!0):r>i.limit_max_money&&(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),e=!0))}.bind(this))}.bind(this)),e},i.prototype.confirmBet=function(){var t=[];if(this._hhdzModel.preBetList.forEach(function(e,i){if(e){var o={place:i,bet_money:e};t.push(o)}}.bind(this)),t.length>0){var e={bets:t};this._proxy.requestBet(e)}this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.confirmBetPoints()},i.prototype.conserBet=function(){this.resetPerBet(),this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.concerBetPoints()},i.prototype.resetPerBet=function(){for(var t=0;t<this._hhdzModel.preBetList.length;t++)this._hhdzModel.preBetList[t]=0;this._view.BetBox.showMyPreBet(this._hhdzModel.preBetList)},i.prototype.resetBet=function(){for(var t=0;t<this._hhdzModel.betList.length;t++)this._hhdzModel.betList[t]=0},i.prototype.resetAllBet=function(){for(var t=0;t<this._hhdzModel.allBetList.length;t++)this._hhdzModel.allBetList[t]=0},i.prototype.showRank=function(){this._popView.Ranking.showPopup();var t={begin_idx:0,req_count:100};this._proxy.requestRanking(t),this.rankingPoints()},i.prototype.showRecord=function(){this._popView.WinningRecord.showPopup(),this.winningRecordPoints()},i.prototype.showGameSet=function(){this._popView.GameSet.initSet(),this._popView.GameSet.showPopup(),this.gameSetPoints()},i.prototype.showHelp=function(){this._popView.Help.showPopup(),this.helpPoints()},i.prototype.openBlackCard=function(t){this._view.CardView.opencard(t.black_cards,"black",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("black",t.black_open_type)}.bind(this),this)},i.prototype.openRedCard=function(t){this._view.CardView.opencard(t.red_cards,"red",!0),App.TimerManager.doTimer(4*this._view.CardView.WAIT_CARD_TIME,1,function(){this._view.CardView.showCardType("red",t.red_open_type)}.bind(this),this)},i.prototype.showWinner=function(e){this._view.coinAniClear(this._hhdzModel.winPos,this._hhdzModel.winPlayer),this._view.showTableLight(this._hhdzModel.winPos),R.setTimeOnce(function(){this.refreshMoney()}.bind(this),this,1500),this.renderChart(),this._view.CardView.showWinner(e.compare_value),this.renderWinRecord(),this._hhdzModel.winMoneys[t.PlayerConst.SELF]&&App.SoundManager.playEffect("win_game_mp3")},i.prototype.refreshMoney=function(){this._view.MessageInfo.setUserBet(0),this._view.MessageInfo.setUserMoney(this._hhdzModel.playerMoneys[t.PlayerConst.SELF]);for(var e=0;4>e;e++)this._hhdzModel.playerMoneys[e]&&this._view.specialPlayerMoney(""+this._hhdzModel.playerMoneys[e],e)},i.prototype.createWinRecord=function(){if(this._hhdzModel.winMoneys[t.PlayerConst.SELF]){var e={issue:this._hhdzModel.issue,hit_money:App.CommonUtils.money2Str(App.CommonUtils.moneyC2S(this._hhdzModel.winMoneys[t.PlayerConst.SELF]))};this._hhdzModel.winningRecord.unshift(e),this._hhdzModel.winningRecord.length>50&&this._hhdzModel.winningRecord.splice(50,this._hhdzModel.winningRecord.length-50)}},i.prototype.renderWinRecord=function(){this._hhdzModel.winningRecord.length&&this._popView.WinningRecord.rankData(this._hhdzModel.winningRecord)},i.prototype.renderChart=function(){this._hhdzModel.betTimes&&(this._view.Chart.showChart(this._hhdzModel.historyRecord),this.renderChartDetail())},i.prototype.clearTable=function(){this._view.TimeClock.hideTime(),this._view.clearShuffle(),this._view.CardView.hideWinner(),this._view.CardView.clearCard(),this._view.hideTableLight()},i.prototype.clearCoins=function(){this._hhdzModel.hasBet=!1,this._view.BetBox.cleanChip(),this._view.BetBox.initCoinBox(),this._view.hideStar(),this.resetPerBet(),this.resetBet(),this.resetAllBet(),this._view.BetBox.clearCoin(),this._view.MessageInfo.setUserBet(0)},i.prototype.confirmShowhand=function(){this._hhdzModel.betNum=0;var e=this.getAllPreBet(),i=1e4*this._hhdzModel.playerMoneys[t.PlayerConst.SELF]-e;this._hhdzModel.limits.forEach(function(t){t.place==this._hhdzModel.betPlace&&(i<t.limit_min_money?this._popView.Prompt.showPrompt(6):this.bet(this._hhdzModel.betPlace,i))}.bind(this))},i.prototype.confirmLimitBet=function(){this._hhdzModel.limitBetMoney&&this.bet(this._hhdzModel.betPlace,this._hhdzModel.limitBetMoney)},i.prototype.ShowsetChip=function(){var t=this._popView.getChipSetView();t.showMenu(),t.setDefaultChip(this._hhdzModel.chipArr),this.setCounterBtnPoints()},i.prototype.getFiveChip=function(t){var e=JSON.stringify(t),i={chips:e};this._proxy.requestChip(i)},i.prototype.getChipValue=function(t){this._mTempChipMoney=t,this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],this.setCounterPoints()},i.prototype.changeMultiple=function(t){var e=this._view.Bottom;e.setchipValue(t),this._mTempMultiple=t},i.prototype.selBtnIndexCallBack=function(){this._view.Bottom.JeButton.toggleBtn(this._hhdzModel.selBtnIndex-1),this._hhdzModel.betNum=this._mTempChipMoney[this._hhdzModel.selBtnIndex-1],0==this._hhdzModel.betNum&&this._view.Bottom.JeButton.ShowHandlightBtn()},i.prototype.betPoints=function(){this._hhdzModel.betPoints.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+e])}.bind(this)),this._hhdzModel.betPoints.length=0},i.prototype.setCounterPoints=function(){this._mTempChipMoney.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]&&R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e])}.bind(this))},i.prototype.concerBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL)},i.prototype.repeatBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT)},i.prototype.confirmBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM)},i.prototype.autoBetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM)},i.prototype.setCounterBtnPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER)},i.prototype.addCounterPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER)},i.prototype.betPlacePoints=function(e){R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e])},i.prototype.menuPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON)},i.prototype.rechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.helpPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON)},i.prototype.gameSetPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON)},i.prototype.winningRecordPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON)},i.prototype.rankingPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.LEADERBOARD_BUTTON)},i.prototype.backPoints=function(){R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this._hhdzModel.destroy(),this._proxy.destroy(),this._view.destroy(),this._popView.destroy(),this._hhdzModel=void 0,this._proxy=void 0,this._view=void 0,this._popView=void 0,common.StarExpand.cleanFormPool()},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"hhdz.GameController")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.initData=function(){this.winMoneys=[0,0,0,0,0],this.playerIds=[-1,-1,-1,-1,-1],this.playerMoneys=[0,0,0,0,0],this.selBtnIndex=1,this.WAIT_CARD_TIME=300,this.isBet=1,this.isAutoBet=!0,this.preBetList=[0,0,0],this.betList=[0,0,0],this.allBetList=[0,0,0],this.lastBetRecord=[],this.gameResult={},this.historyRecord={compare_values:[],open_types:[]},this.winPos=[],this.winPlayer=[],this.winningRecord=[],this.chipArr=[0,2,5,8,9],this.betTimes=0,this.betPlace=0,this.betPoints=[],this.hasBet=!1,this.limits=[],this.betNum=1e4,this.limitPlace=-1},i.prototype.initDataNotify=function(){this.selBtnIndexNotify=t.DataNotify.create(this.selBtnIndex)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._shuffle&&(this._shuffle.destroy(),this._shuffle=void 0),this.preBetList=void 0,this.betList=void 0,this.lastBetRecord=void 0,this.gameResult=void 0,this.historyRecord=void 0,this.winPos=void 0,this.winningRecord=void 0},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"hhdz.GameModel")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onGameState=function(e){this.applyFunc(t.CallBacks.onGameStateCallBack,e)},i.prototype.onOnlineCount=function(e){this.applyFunc(t.CallBacks.onOnlineCountCallBack,e)},i.prototype.onChart=function(e){this.applyFunc(t.CallBacks.onChartCallBack,e)},i.prototype.onGameResult=function(e){this.applyFunc(t.CallBacks.onGameResultCallBack,e)},i.prototype.onSelfBet=function(e){this.applyFunc(t.CallBacks.onSelfBetCallBack,e)},i.prototype.onPlayerBet=function(e){this.applyFunc(t.CallBacks.onPlayerBetCallBack,e)},i.prototype.onBetAction=function(e){this.applyFunc(t.CallBacks.onBetActionCallBack,e)},i.prototype.onGameBet=function(e){this.applyFunc(t.CallBacks.onGameBetCallBack,e)},i.prototype.onExchange=function(e){this.applyFunc(t.CallBacks.onExchangeCallBack,e)},i.prototype.onRanking=function(e){this.applyFunc(t.CallBacks.onRankingCallBack,e)},i.prototype.onWinningRecord=function(e){this.applyFunc(t.CallBacks.onWinningRecordCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.CallBacks.onSpecialPlayerCallBack,e)},i.prototype.onChipsRecord=function(e){this.applyFunc(t.CallBacks.onChipsRecordCallBack,e)},i.prototype.onIssue=function(e){this.applyFunc(t.CallBacks.onIssueCallBack,e)},i.prototype.onExitRoom=function(e){this.applyFunc(t.CallBacks.onLeaveGameCallBack,e)},i.prototype.onLimit=function(t){this.model.limits=t.limits},i.prototype.onRemainTime=function(e){this.applyFunc(t.CallBacks.onRemainTimeCallBack,e)},i.prototype.onHitrate=function(e){this.applyFunc(t.CallBacks.onHitrateCallBack,e)},i.prototype.requestBet=function(e){this.send(t.ProxyConst.ME_BET,e)},i.prototype.requestRanking=function(e){this.send(t.ProxyConst.RANKING,e)},i.prototype.requestChip=function(e){this.send(t.ProxyConst.CHIPS_RECORD_Q,e)},i.prototype.requestRemainTime=function(){this.send(t.ProxyConst.REMAIN_TIME_Q)},i.prototype.sendLeaveGame=function(){e.prototype.sendLeaveGame.call(this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.addListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.addListener(t.ProxyConst.CHART_R,this.onChart,this),this.addListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.addListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.addListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.addListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.addListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.addListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.addListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.addListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.addListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.addListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.addListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.addListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.addListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.addListener(t.ProxyConst.HITRATE_N,this.onHitrate,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.GAME_STATE_R,this.onGameState,this),this.removeListener(t.ProxyConst.ONLINE_COUNT_R,this.onOnlineCount,this),this.removeListener(t.ProxyConst.CHART_R,this.onChart,this),this.removeListener(t.ProxyConst.GAME_RESULT_R,this.onGameResult,this),this.removeListener(t.ProxyConst.ME_BET_R,this.onSelfBet,this),this.removeListener(t.ProxyConst.PLAYER_BET_R,this.onPlayerBet,this),this.removeListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.removeListener(t.ProxyConst.GAME_BET_R,this.onGameBet,this),this.removeListener(t.ProxyConst.EXCHANGE_R,this.onExchange,this),this.removeListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.removeListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.removeListener(t.ProxyConst.CHIPS_RECORD_R,this.onChipsRecord,this),this.removeListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.removeListener(t.ProxyConst.LEAVE_GAME_R,this.onExitRoom,this),this.removeListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.removeListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.removeListener(t.ProxyConst.HITRATE_N,this.onHitrate,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"hhdz.GameProxy")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(){}return t.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},t.randomPoint=function(t){var e={x:0,y:0};return e.x=Math.floor(Math.random()*t.width),e.y=Math.floor(Math.random()*t.height),e},t.dealCard=function(t,e,i){var o=0;t.forEach(function(t){3>o&&(egret.Tween.removeTweens(t),egret.Tween.get(t).wait(i*o*1.5).to({x:e[o].x,y:e[o].y,horizontalCenter:e[o].h,scaleX:1,scaleY:1,rotation:0},i).call(function(){App.SoundManager.playEffect("sendcard_mp3")}),o++)})},t.showCard=function(t,e){t.forEach(function(t,i){t.x=e[i].x,t.y=e[i].y,t.horizontalCenter=e[i].h,t.scaleX=1,t.scaleY=1})},t.openCard=function(t,e,i){var o=this;if(t&&t.length){var n=0,s=0;e.forEach(function(e){egret.Tween.get(e).wait(i*n).to({scaleX:0},200,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect("flipcard_mp3"),e.source=this.getCardWithNum(t[s]),egret.Tween.get(e).to({scaleX:1},200,egret.Ease.sineInOut),s++}.bind(o)),n++})}},t.openCardInstant=function(t,e){var i=this;t&&t.length&&e.forEach(function(e,o){e.source=i.getCardWithNum(t[o]),e.scaleX=1,e.scaleY=1})},t.getPoints=function(t){for(var e=[],i=0;3>i;i++){var o={x:t.getChildAt(i).x,y:t.getChildAt(i).y,h:t.getChildAt(i).horizontalCenter};e.push(o)}return e},t.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s=""),s},t.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},t.getBetNum=function(t,e){t.forEach(function(t){1==t.betType?e.black+=t.betNum:2==t.betType?e.red+=t.betNum:e.lucky+=t.betNum})},t}();t.Application=e,__reflect(e.prototype,"hhdz.Application")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"hhdz.DataNotify")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"hhdz","GameSkin")||this;return i.BetBox.initComponent(t),i.Bottom.initComponent(t),i.TimeClock.initComponent(t),i.ToolBar.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.open.call(this),this.Bottom.open(),this.MessageInfo.initInfo(),this.MessageInfo.allPlayerDisplay(),this.MessageInfo.setPluteLelf(),this.MessageInfo.setUserBet(0),this.ToolBar.moveCharge(),this.BetBox.createHeadPosition(),this.BetBox.initCoinBox(),this.ToolBar.reChargeEffect(),this.ToolBar.setOnlineLelf(),this.Chart.hideApproach(),this.hideTableLight(),this.TimeClock.hideTime(),this.initBroadcast(this),this.btnRedPacket=lobby.RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(lobby.RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},i.prototype.setBeilv=function(t){var e=2-Number(App.CommonUtils.money2Str(t));this.BeilvRed.text=String(e),this.BeilvBlack.text=String(e)},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle(this._controller),this.GroupShuffle.addChild(this.shuffle)),this.shuffle.init(),this.shuffle.x=0,this.shuffle.y=0,this.shuffle.scaleX=this.shuffle.scaleY=1,this.shuffle.alpha=1,this.shuffle.goToWash(),this.shuffle.addPlayEndCallBack(function(){this.applyFunc(t.CallBacks.dealCard)
}.bind(this),this._controller)},i.prototype.clearShuffle=function(){this.shuffle&&(this.shuffle.destroy(),this.shuffle=void 0)},i.prototype.betToPlaceAni=function(t,e,i){this.BetBox.betToPlaceAni(t,e,i)},i.prototype.playerDisplay=function(t){this.MessageInfo.playerDisplay(t)},i.prototype.setPluteImage=function(t,e){this.MessageInfo.setPluteImage(t,e)},i.prototype.setPluteName=function(t,e){this.MessageInfo.setPluteName(t,e)},i.prototype.specialPlayerMoney=function(t,e){this.MessageInfo.specialPlayerMoney(t,e)},i.prototype.avatarShake=function(t){this.MessageInfo.avatarShake(t)},i.prototype.starFly=function(t){var e=this.MessageInfo.getPoint(),i=this.BetBox.getParabolicPoint(t),o=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,i,o,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},i.prototype.hideStar=function(){this.BetBox.hideStar()},i.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},i.prototype.coinAniClear=function(t,e){this.BetBox.coinAniClear(t),R.setTimeOnce(function(){e.forEach(function(t){this.MessageInfo.getMoneyLight(t)}.bind(this))},this,600)},i.prototype.playerWinMoney=function(t,e){this.MessageInfo.playerWinMoney(t,e)},i.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},i.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},i.prototype.setIssue=function(t){this.Chart.setIssue(t)},i.prototype.renderChartDetail=function(t){this.Chart.renderChartDetail(t)},i.prototype.enabledConfirmBet=function(){this.Bottom.LogicBtn.enabledConfirmBet()},i.prototype.enabledConserBet=function(){this.Bottom.LogicBtn.enabledConserBet()},i.prototype.enabledRepeatBet=function(){this.Bottom.LogicBtn.enabledRepeatBet()},i.prototype.disabledConfirmBet=function(){this.Bottom.LogicBtn.disabledConfirmBet()},i.prototype.disabledConserBet=function(){this.Bottom.LogicBtn.disabledConserBet()},i.prototype.disabledBtn=function(){this.Bottom.LogicBtn.disabledRepeatBet(),this.Bottom.LogicBtn.disabledConfirmBet(),this.Bottom.LogicBtn.disabledConserBet()},i.prototype.enabledBtn=function(){this.Bottom.LogicBtn.enabledRepeatBet(),this.Bottom.LogicBtn.enabledConfirmBet(),this.Bottom.LogicBtn.enabledConserBet()},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this),this.clearShuffle(),this.BetBox.destroy(),this.Bottom.LogicBtn.destroy(),this.Bottom.JeButton.destroy(),this.MessageInfo.clearAllMoneyLight(),this.MessageInfo.destroy(),this.TimeClock.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.Chart.destroy(),common.comBones.cleanFormPool())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"hhdz.GameView")}(hhdz||(hhdz={}));var hhdz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"hhdz","PopSkin")||this;return i.Ranking.initComponent(e),i.WinningRecord.initComponent(e),i.GameSet.initComponent(e),i.Prompt.initComponent(e),i._mChipSetView=new common.SetChip(null),i._mChipSetView.initComponent(e,i),i._mChipSetView.top=i._mChipSetView.left=0,i._mChipSetView.bottom=i._mChipSetView.right=0,i}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),this.Help.initUI(),this._mChipSetView.getcoordinate(),this._mChipSetView.createChip()},e.prototype.showChipSetView=function(){this._mChipSetView.showMenu()},e.prototype.getChipSetView=function(){return this._mChipSetView},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._mChipSetView.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._mChipSetView.removeEvent()},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Ranking.destroy(),this.WinningRecord.destroy(),this.GameSet.destroy(),this.Prompt.destroy(),this._mChipSetView.destroy(),this._mChipSetView=void 0)},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"hhdz.PopView")}(hhdz||(hhdz={}));var lhd;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk&&App.ControllerManager.register(ControllerConst.Desk,new t.DeskController));var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.lhd=i,__reflect(i.prototype,"lhd.Entrance.lhd",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var o=e.call(this,t)||this;o._currState="";var n="wash";return o.initDBRes(n),o.armature=o.createArmature("play",n,i._mActionList),o.armature.addCompleteCallFunc(o.armaturePlayEnd,o),o}return __extends(i,e),i.prototype.getState=function(){return this._currState},i.prototype.setState=function(t){this._currState=t},i.prototype.init=function(){e.prototype.init.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEffect(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},i.prototype.goToWash=function(){this.armature.play(i.ACTION_WASH,-1),this.removeEffect(),this.setState(i.ACTION_WASH),App.SoundManager.playEffect(t.SoundConst.CARD_WASH)},i.prototype.armaturePlayEnd=function(){egret.Tween.get(this).to({y:-210,scaleX:.5,scaleY:.5},400,egret.Ease.sineInOut).call(function(){this.alpha=0,this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)}.bind(this))},i.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},i.prototype.removeEffect=function(){},i.prototype.playEffect=function(t){},i.prototype.die=function(){},i.ACTION_WASH="clean",i._mActionList=[i.ACTION_WASH],i}(base.BaseGameObject);t.Shuffle=e,__reflect(e.prototype,"lhd.Shuffle")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this,"LhdBetBox")||this;return t.coinArr=[],t.winpos=[],t.allChipList=[],t}return __extends(i,e),i.prototype.bet=function(e){this.applyFunc(t.CallBacks.bet,e)},i.prototype.setHitrate=function(t){var e=2-Number(App.CommonUtils.money2Str(t));this.BeilvLong.text=String(e),this.BeilvHu.text=String(e)},i.prototype.initCoinArr=function(){this.coinArr.length=0;for(var t=0;3>t;t++){var e={coinBoxObj0:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj1:{_coinType:"",_coinNum:0,_currentY:0},coinBoxObj2:{_coinType:"",_coinNum:0,_currentY:0}};this.coinArr.push(e)}},i.prototype.showSelfBet=function(t){for(var e=0;e<t.length;e++){var i=Math.floor(App.CommonUtils.money(t[e]));i?this["MyBet_"+e].text=""+i:this["MyBet_"+e].text=""}},i.prototype.showMyPreBet=function(t){for(var e=0;e<t.length;e++){var i=Math.floor(App.CommonUtils.money(t[e]));i?this["MyPreBet_"+e].text=""+i:this["MyPreBet_"+e].text=""}},i.prototype.showBetMoney=function(t){for(var e=0;e<t.length;e++)if(t[e]){var i=Math.floor(App.CommonUtils.money(t[e]));i&&(this["TotalBet_"+e].text=""+i,this["isBet_"+e]=!0,this.showCoin(e,i))}else this["TotalBet_"+e].text=""},i.prototype.showCoin=function(t,e){var i=this.getNumObj(e),o=Object.keys(i),n=this["CoinBox_"+t+"_1"],s=this["CoinBox_"+t+"_2"],r=this["CoinBox_"+t+"_3"];this.renderCoinType(o[0],i[o[0]],this.coinArr[t].coinBoxObj0,n),o.length>1?this.renderCoinType(o[1],i[o[1]],this.coinArr[t].coinBoxObj1,s):(s.removeChildren(),this.coinArr[t].coinBoxObj1._coinType="",this.coinArr[t].coinBoxObj1._coinNum=0,this.coinArr[t].coinBoxObj1._currentY=0),o.length>2?this.renderCoinType(o[2],i[o[2]],this.coinArr[t].coinBoxObj2,r):(r.removeChildren(),this.coinArr[t].coinBoxObj2._coinType="",this.coinArr[t].coinBoxObj2._coinNum=0,this.coinArr[t].coinBoxObj2._currentY=0)},i.prototype.renderCoinType=function(t,e,i,o){t==i._coinType?e>i._coinNum?this.addCoin(o,t,e-i._coinNum,i):e<i._coinNum&&(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)):(o.removeChildren(),i._currentY=0,this.addCoin(o,t,e,i)),i._coinType=t,i._coinNum=e},i.prototype.addCoin=function(e,i,o,n){var s,r="";switch(i){case"sw":r="common_ui_10_png",s=1e5;break;case"w":r="common_ui_4_png",s=1e4;break;case"q":r="common_ui_8_png",s=1e3;break;case"b":r="common_ui_5_png",s=100;break;case"s":r="common_ui_2_png",s=10;break;case"g":r="common_ui_0_png",s=1}for(var a=0,h=-60,l=0,p=[],c=0;o>c;c++){var u=common.CoinFactory.i.createCoin();u.refresh(r,s,a,h),u.alpha=0,p.push(u),e.addChild(u)}p.forEach(function(e,i){if(0==n._currentY)l=0;else if(this.randomNum()>.65){var o=this.randomNum();l=o>.5?2:-2}else l=0;egret.Tween.get(p[i]).wait(150*i).to({y:n._currentY,x:l},150,egret.Ease.sineInOut),function(e){R.setTimeOnce(function(){App.SoundManager.playEffect(t.SoundConst.BET),p[e].alpha=1},this,150*e)}(i),n._currentY-=5}.bind(this))},i.prototype.getNumObj=function(t){var e=String(t).split(""),i={sw:0,w:0,q:0,b:0,s:0,g:0};switch(e.length){case 1:i.g=Number(e[0]);break;case 2:i.s=Number(e[0]),i.g=Number(e[1]);break;case 3:i.b=Number(e[0]),i.s=Number(e[1]),i.g=Number(e[2]);break;case 4:i.q=Number(e[0]),i.b=Number(e[1]),i.s=Number(e[2]),i.g=Number(e[3]);break;case 5:i.w=Number(e[0]),i.q=Number(e[1]),i.b=Number(e[2]),i.s=Number(e[3]),i.g=Number(e[4]);break;case 6:i.sw=Number(e[0]),i.w=Number(e[1]),i.q=Number(e[2]),i.b=Number(e[3]),i.s=Number(e[4]),i.g=Number(e[5])}for(var o in i)0==i[o]&&delete i[o];return i},i.prototype.randomNum=function(){return Math.random()},i.prototype.coinFlicker=function(t){t.forEach(function(t){for(var e=1;4>e;e++){var i=this["CoinBox_"+t+"_"+e];egret.Tween.get(i).to({alpha:0},150)}}.bind(this))},i.prototype.coinStopFlicker=function(t){t.forEach(function(t){for(var e=1;4>e;e++){var i=this["CoinBox_"+t+"_"+e];i.alpha=1}}.bind(this))},i.prototype.createHeadPosition=function(){for(var t=0;t<this.GroupHeadPos.numChildren;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=this.HeadPos4.left,i=App.StageUtils.getHeight()-(this.HeadPos4.bottom+this.HeadPos4.height);break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.betToPlaceAni=function(t,e,i){base.GameCoinMgr.i.flyToPlace(t,this["BetPoint_"+e],i,this.winpos,this.GroupChip)},i.prototype.cleanChip=function(){base.GameCoinMgr.i.clean()},i.prototype.createWinChip=function(t,e){if(this["isBet_"+t]){var i=this["BetBox_"+t],o=this["ChipPos"+t],n=void 0,s=void 0;n=App.StageUtils.getWidth()/2+o.horizontalCenter,s=App.StageUtils.getHeight()-o.bottom-o.height;for(var r=this.winpos[e],a=this.GroupChip.globalToLocal(r.x,r.y),h=0;5>h;h++){var l=App.MathUtils.random(0,i.width),p=App.MathUtils.random(0,i.height),c=common.chipBtn.create();c.init(h),c.setNameNum(e);var u=Math.floor(n+l),d=Math.floor(s+p),m=Math.floor(a.x),y=Math.floor(a.y);this.GroupChip.addChild(c),c.x=i.x+i.width/2,c.y=i.y+i.height/2,c.scaleX=.5,c.scaleY=.5,c.alpha=0,c.setScore(),c.setFlyX(u),c.setFlyY(d),c.setFlyChipX(m),c.setFlyChipY(y),this.allChipList.push(c)}}},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&(this.allChipList.forEach(function(t){t.moveTo()}),(this.isBet_0||this.isBet_1||this.isBet_2)&&App.SoundManager.playEffect(t.SoundConst.WIN_BET))},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var t=this.allChipList.pop();common.chipBtn.release(t)}},i.prototype.clearCoin=function(){for(var t=0;3>t;t++){this["isBet_"+t]=!1,this["TotalBet_"+t].text="",this["MyBet_"+t].text="",this["MyPreBet_"+t].text="";for(var e=1;4>e;e++)this.removeCoins(this["CoinBox_"+t+"_"+e])}},i.prototype.coinAniClear=function(t){t.length&&(this.coinFlicker(t),R.setTimeOnce(function(){this.coinStopFlicker(t)},this,200)),R.setTimeOnce(function(){this.clearCoin(),this.flyWinChip()},this,350)},i.prototype.removeCoins=function(t){for(;t.numChildren;){var e=t.removeChildAt(0);common.CoinFactory.i.releaseCoin(e)}},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){this.StarPos_0.visible=!1,this.StarPos_1.visible=!1,this.StarPos_2.visible=!1},i.prototype.hideTableLight=function(){this.TouchBtn_0.alpha=0,this.TouchBtn_1.alpha=0,this.TouchBtn_2.alpha=0},i.prototype.showTableLight=function(t){t.forEach(function(t){var e=this["TouchBtn_"+t];egret.Tween.get(e).wait(0).to({alpha:1},0),egret.Tween.get(e).wait(100).to({alpha:.7},400),egret.Tween.get(e).wait(550).to({alpha:1},0),egret.Tween.get(e).wait(650).to({alpha:.7},400),egret.Tween.get(e).wait(1050).to({alpha:1},0)}.bind(this))},i.prototype.addEvent=function(){for(var t=0;3>t;t++)this["TouchBtn_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.bet.bind(this,t),this)},i.prototype.removeEvent=function(){for(var t=0;3>t;t++)this["TouchBtn_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.bet.bind(this,t),this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFlyWinChip(),this.cleanChip(),R.removeAllTimeOut(this),common.chipBtn.cleanchipBtnPool(),common.CoinFactory.i.clear(),this.allChipList=void 0,this.coinArr=void 0,this.winpos=void 0},i}(BaseEuiComponent);t.BetBox=e,__reflect(e.prototype,"lhd.BetBox")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){return e.call(this,"LhdCardSkin")||this}return __extends(i,e),i.prototype.open=function(){this.clearWinner()},i.prototype.clearCard=function(){R.removeAllTimeOut(this),egret.Tween.removeTweens(this.GroupWin),this.cardLong&&this.cardLong.parent&&(egret.Tween.removeTweens(this.cardLong),this.cardLong.parent.removeChild(this.cardLong),this.cardLong=void 0),this.cardHu&&this.cardHu.parent&&(egret.Tween.removeTweens(this.cardHu),this.cardHu.parent.removeChild(this.cardHu),this.cardHu=void 0)},i.prototype.clearWinner=function(){this.HuWin.visible=!1,this.LongWin.visible=!1,this.He.visible=!1},i.prototype.dealCard=function(t){this.createNewCard(),this.cardLong.x=this.longPoint.x,this.cardLong.y=this.longPoint.y,this.cardHu.x=this.huPoint.x,this.cardHu.y=this.huPoint.y,this.dealAni(this.cardLong,0,t),this.dealAni(this.cardHu,600,t)},i.prototype.putCard=function(){this.createNewCard(),this.put(this.cardLong),this.put(this.cardHu)},i.prototype.createNewCard=function(){this.clearCard(),this.initPoint(),this.cardLong=this.createCard(),this.cardHu=this.createCard(),this.GroupLong.addChild(this.cardLong),this.GroupHu.addChild(this.cardHu)},i.prototype.dealAni=function(e,i,o){egret.Tween.get(e).wait(i).to({x:45,y:60,scaleX:1,scaleY:1,rotation:180,anchorOffsetX:45,anchorOffsetY:60},400).call(function(){if(App.SoundManager.playEffect(t.SoundConst.DEAL),e.rotation=0,i){if(!o)return;this.applyFunc(t.CallBacks.onShowTimerCallBack)}}.bind(this))},i.prototype.put=function(t){t.x=45,t.y=60,t.scaleX=t.scaleY=1,t.anchorOffsetX=45,t.anchorOffsetY=60},i.prototype.createCard=function(){var t=new eui.Image;return t.source="common_ui_cardback_png",t.scaleX=.5,t.scaleY=.5,t},i.prototype.initPoint=function(){var t=this.GroupDeal.localToGlobal(0,0);this.longPoint=this.GroupLong.globalToLocal(t.x,t.y),this.huPoint=this.GroupHu.globalToLocal(t.x,t.y)},i.prototype.openCard=function(e,i){egret.Tween.get(this.cardLong).to({scaleX:0},250,egret.Ease.sineInOut).call(function(){this.cardLong.source=this.getCardWithNum(e),App.SoundManager.playEffect(t.SoundConst.SHOW),egret.Tween.get(this.cardLong).to({scaleX:1},250,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect(t.SoundConst.RESULT[this.getCardNumber(e)])}.bind(this))}.bind(this)),egret.Tween.get(this.cardHu).wait(1500).to({scaleX:0},250,egret.Ease.sineInOut).call(function(){this.cardHu.source=this.getCardWithNum(i),App.SoundManager.playEffect(t.SoundConst.SHOW),egret.Tween.get(this.cardHu).to({scaleX:1},250,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect(t.SoundConst.RESULT[this.getCardNumber(i)])}.bind(this))}.bind(this)),R.setTimeOnce(function(){this.applyFunc(t.CallBacks.onRunWinnerCallBack)}.bind(this),this,3e3)},i.prototype.showCard=function(t,e){this.cardLong.source=this.getCardWithNum(t),this.cardHu.source=this.getCardWithNum(e)},i.prototype.getCardWithNum=function(t){var e=t>>4&15,i=15&t,o=11==i?"j":12==i?"q":13==i?"k":i;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+o+"_png";return 0==e&&0==o&&(s=""),s},i.prototype.getCardNumber=function(t){var e=15&t;return e},i.prototype.runWinner=function(t){this.showWinner(t),this.GroupWin.scaleX=this.GroupWin.scaleY=4,egret.Tween.get(this.GroupWin).to({scaleX:1,scaleY:1},150,egret.Ease.sineInOut)},i.prototype.showWinner=function(e){switch(e){case t.TypeConst.LOONG:this.LongWin.visible=!0,this.HuWin.visible=!1,this.He.visible=!1;break;case t.TypeConst.TIGER:this.LongWin.visible=!1,this.HuWin.visible=!0,this.He.visible=!1;break;case t.TypeConst.TIE:this.LongWin.visible=!1,this.HuWin.visible=!1,this.He.visible=!0}},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearCard()},i}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"lhd.CardView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,"LhdChangeTableSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.initUI=function(){this.TableList.initUI(t.CallBacks.changeTable,2)},i.prototype.getTableList=function(){return this.TableList},i.prototype.showPopup=function(){this.visible=!0,this.ChangeTableBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){this.applyFunc(t.CallBacks.lobbySetOff),this.ChangeTableBg.visible=!1,App.SoundManager.playEffect("click_mp3");var e=this;App.EffectUtils.hideUI(this.Menu,300,0,function(){e.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.TableList.DeskScroller,this.TableList.ListItem,t.data)},i.prototype.createList=function(t,e){this.TableList.createList(t,e)},i.prototype.insertState=function(t){this.TableList.insertState(t)},i.prototype.insertChart=function(t){this.TableList.insertChart(t)},i.prototype.touchMove=function(t){this.ScrollBox.width=1e3,this.ScrollBox.x=35;var e=this.TableList.getViewportHeight(),i=this.TableList.getListHeight();this.TableList.stopAnimation(),t.localY<24?this.TableList.setScrollV(0):t.localY>e-24?this.TableList.setScrollV(i-e):this.TableList.setScrollV((i-e)/(e-48)*(t.localY-24))},i.prototype.touchEnd=function(){this.ScrollBox.width=31,this.ScrollBox.x=898},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.addEvent()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),this.TableList.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.TableList.destroy()},i}(BaseEuiComponent);t.ChangeTable=e,__reflect(e.prototype,"lhd.ChangeTable")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this,"LhdChartSkin")||this;return t.record=[],t.chartRecord=[],t}return __extends(i,e),i.prototype.openChart=function(e){egret.Tween.get(this.GroupChart).to({right:0},200,egret.Ease.sineInOut),this.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.DIRECT_MAPS):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.DIRECT_MAPS)},i.prototype.closeChart=function(){egret.Tween.get(this.GroupChart).to({right:-280},200,egret.Ease.sineInOut)},i.prototype.renderApproach=function(e,i){this.tableType=i,this.record=JSON.parse(JSON.stringify(e)),this.record.length>19&&this.record.splice(0,this.record.length-19),this.GroupApproach.removeChildren();var o=3,n=-1;this.record.forEach(function(e){var i=new eui.Image;i.x=o,i.y=n,i.source=e==t.TypeConst.LOONG?RES.getRes("lhd_ui_long"):e==t.TypeConst.TIGER?RES.getRes("lhd_ui_hu"):RES.getRes("lhd_ui_she"),o+=40,this.GroupApproach.addChild(i)}.bind(this))},i.prototype.renderChart=function(t,e){this.chartRecord=JSON.parse(JSON.stringify(t)),this.longCount=0,this.huCount=0,this.tieCount=0,this.allCount=0,this.chartRecord.length&&(this.chartRecord.length>60&&this.chartRecord.splice(0,60),this.chartRecord.forEach(function(t){0==t?this.longCount+=1:1==t?this.huCount+=1:this.tieCount+=1}.bind(this)),this.allCount=this.chartRecord.length,this.CountLong.text=""+this.longCount,this.CountHu.text=""+this.huCount,this.CountTie.text=""+this.tieCount,this.CountAll.text=""+this.allCount),this.ChartBead.renderBead(this.chartRecord,"lhd",e),this.ChartOther.renderOtherChart(this.chartRecord,"lhd",e);var i=this.ChartOther.getAskRoad(0),o=this.ChartOther.getAskRoad(1);this.renderRedAskRoad(i),this.renderBlackAskRoad(o)},i.prototype.renderRedAskRoad=function(t){this.LongAskRoad.removeChildren(),this.renderAskRoad(t,this.LongAskRoad)},i.prototype.renderBlackAskRoad=function(t){this.HuAskRoad.removeChildren(),this.renderAskRoad(t,this.HuAskRoad)},i.prototype.renderAskRoad=function(t,e){if(t.length){var i=new eui.Image;i.x=0,i.y=2,i.source=RES.getRes("lhd_ui_dyl_"+t[0]),e.addChild(i)}if(t.length>1){var i=new eui.Image;i.x=12,i.y=2,i.source=RES.getRes("lhd_ui_xl_"+t[1]),e.addChild(i)}if(t.length>2){var i=new eui.Image;i.x=24,i.y=2,i.source=RES.getRes("lhd_ui_xql_"+t[2]),e.addChild(i)}},i.prototype.addEvent=function(){this.BtnOpenChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openChart,this),this.BtnCloseChart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this)},i.prototype.removeEvent=function(){this.BtnOpenChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openChart,this),this.BtnCloseChart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChart,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),common.BeadFactory.i.clear(),this.record=void 0,this.chartRecord=void 0},i}(BaseEuiComponent);t.ChartView=e,__reflect(e.prototype,"lhd.ChartView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,"LhdHelpSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initUI=function(){this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},e.prototype.showPopup=function(){this.visible=!0,this.HelpBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},e.prototype.closePoput=function(){this.HelpBg.visible=!1;var t=this;App.EffectUtils.hideUI(this.Menu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},e.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},e.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<24?e.scrollV=0:t.localY>e.height-24?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-48)*(t.localY-24)},e.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.HelpClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.removeEvent=function(){this.HelpClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.HelpView=e,__reflect(e.prototype,"lhd.HelpView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,"LotteryRuleSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.Close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.Close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.LotteryRule=e,__reflect(e.prototype,"lhd.LotteryRule")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){return e.call(this,"LhdTimerSkin")||this}return __extends(i,e),i.prototype.open=function(){this.hideTimer(),this.hideAwardAni()},i.prototype.startTimer=function(e,i){this._currentSecond=e.time,this._currentState=e.status,this.tableType=i,this._currentSecond&&(i==t.TableTypeConst.CLASSIC?this.TimeLbL.text=""+this._currentSecond:this.renderLottery(),App.TimerManager.doTimer(1e3,this._currentSecond,this.timerFunc,this))},i.prototype.renderLottery=function(){if(this._currentSecond<3600){var t=this._currentSecond%60,e=Math.floor(this._currentSecond/60);this.timeSecond.text=10>t?"0"+t:""+t,this.timeMinute.text=10>e?"0"+e:""+e}},i.prototype.numShake=function(){egret.Tween.get(this.TimeLbL).to({scaleX:1.5,scaleY:1.5},100,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(this.TimeLbL).to({scaleX:1,scaleY:1},300,egret.Ease.sineInOut)},this,500)},i.prototype.showTimer=function(e){e==t.TableTypeConst.CLASSIC?(this.GroupClassic.visible=!0,this.GroupLottery.visible=!1):(this.GroupClassic.visible=!1,this.GroupLottery.visible=!0)},i.prototype.hideTimer=function(){this.GroupClassic.visible=!1,this.GroupLottery.visible=!1,this.TimeLbL.scaleX=this.TimeLbL.scaleY=1},i.prototype.timerFunc=function(){this._currentSecond?(this._currentSecond--,this._currentState==t.GameStateConst.BETTING&&(this._currentSecond<4&&(App.SoundManager.playEffect(t.SoundConst.COUNT_DOWN),this.numShake()),this.tableType==t.TableTypeConst.CLASSIC?this._currentSecond&&(this.TimeLbL.text=3==this._currentSecond?"w":2==this._currentSecond?"m":1==this._currentSecond?"n":this._currentSecond+""):this.renderLottery())):this.stopTimer()},i.prototype.stopTimer=function(){App.TimerManager.remove(this.timerFunc,this),this.GroupClassic.visible=!1,this.TimeLbL.scaleX=this.TimeLbL.scaleY=1},i.prototype.setCurIssue=function(t){this.Issue.text="第"+t+"期"},i.prototype.awarding=function(){if(this.spotanim||(this.spotanim=new common.comBones),!this.spotanim.parent){var t="spot";this.GroupAward.addChild(this.spotanim),this.spotanim.updateId(t),this.spotanim.setPosition(0,0)}this.spotanim.play(999)},i.prototype.getRemaniTime=function(){return this._currentSecond},i.prototype.showAwardAni=function(){this.GroupAward.visible=!0},i.prototype.hideAwardAni=function(){this.GroupAward.visible=!1},i.prototype.clearAward=function(){this.spotanim&&(this.spotanim.destroy(),this.spotanim=void 0)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.stopTimer(),this.clearAward()},i}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"lhd.Timer")}(lhd||(lhd={}));var lhd;!function(t){var e;!function(t){t[t.Base=1200]="Base",t[t.Popup=1201]="Popup"}(e=t.ViewConst||(t.ViewConst={}));var i;!function(t){t[t.BET_SUCC=0]="BET_SUCC",t[t.BET_ERROR_PLACE=1]="BET_ERROR_PLACE",t[t.BET_ERROR_MONEY=2]="BET_ERROR_MONEY",t[t.BET_ERROR_STATE=3]="BET_ERROR_STATE",t[t.BET_ERROR_OUTLIMIT=4]="BET_ERROR_OUTLIMIT",t[t.BET_ERROR_OUTTOTALLIMIT=5]="BET_ERROR_OUTTOTALLIMIT",t[t.BET_ERROR_NOENOUGH_MONEY=6]="BET_ERROR_NOENOUGH_MONEY"}(i=t.BetCodeConst||(t.BetCodeConst={}));var o=function(){function t(){}return t.ERRTXT_LIST=["","下注位置错误","下注金额太小或太大溢出","不在下注状态","超出单人限额","超出所有人总共限额","没有足够的余额"],t}();t.CodeErrorTxt=o,__reflect(o.prototype,"lhd.CodeErrorTxt");var n;!function(t){t[t.BETTING=1]="BETTING",t[t.EXCHANGE=2]="EXCHANGE"}(n=t.GameStateConst||(t.GameStateConst={}));var s;!function(t){t[t.PSYCHIC=0]="PSYCHIC",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.SELF=4]="SELF",t[t.ONLINE=5]="ONLINE"}(s=t.PlayerConst||(t.PlayerConst={}));var r;!function(t){t[t.LOONG=0]="LOONG",t[t.TIGER=1]="TIGER",t[t.TIE=2]="TIE"}(r=t.TypeConst||(t.TypeConst={}));var a;!function(t){t[t.CLASSIC=1]="CLASSIC",t[t.LOTTORY=2]="LOTTORY"}(a=t.TableTypeConst||(t.TableTypeConst={}));var h;!function(t){t[t.DESK_LIST_N=11601]="DESK_LIST_N",t[t.DESK_STATE_N=11602]="DESK_STATE_N",t[t.DESK_CHART_N=11603]="DESK_CHART_N",t[t.CHIPS_RECORD_Q=11604]="CHIPS_RECORD_Q",t[t.CHIPS_RECORD_N=11605]="CHIPS_RECORD_N",t[t.RANKING_Q=11606]="RANKING_Q",t[t.RANKING_R=11607]="RANKING_R",t[t.ONLINE_COUNT_N=11608]="ONLINE_COUNT_N",t[t.ISSUE_N=11609]="ISSUE_N",t[t.SPECIAL_PLAYER_N=11610]="SPECIAL_PLAYER_N",t[t.GAME_STATE_N=11611]="GAME_STATE_N",t[t.CHART_N=11612]="CHART_N",t[t.LIMIT_N=11613]="LIMIT_N",t[t.BET_Q=11614]="BET_Q",t[t.BET_R=11615]="BET_R",t[t.BET_ACTION_N=11616]="BET_ACTION_N",t[t.BET_INFO_N=11617]="BET_INFO_N",t[t.GAME_BET_INFO_N=11618]="GAME_BET_INFO_N",t[t.GAME_RESULT_N=11619]="GAME_RESULT_N",t[t.EXCHANGE_N=11620]="EXCHANGE_N",t[t.OPEN_NUMBER_N=11621]="OPEN_NUMBER_N",t[t.SWITCH_TABLE_Q=11622]="SWITCH_TABLE_Q",t[t.SWITCH_TABLE_R=11623]="SWITCH_TABLE_R",t[t.TABLE_INFO_N=11624]="TABLE_INFO_N",t[t.LOBBY_SET_Q=11631]="LOBBY_SET_Q",t[t.LOBBY_SET_R=11632]="LOBBY_SET_R",t[t.REMAIN_TIME_Q=11633]="REMAIN_TIME_Q",t[t.REMAIN_TIEM_R=11634]="REMAIN_TIEM_R",t[t.HITRATE_R=11635]="HITRATE_R"
}(h=t.ProxyConst||(t.ProxyConst={}));var l;!function(t){t[t.bet=3e4]="bet",t[t.onIssueCallBack=30001]="onIssueCallBack",t[t.onGameStateCallBack=30002]="onGameStateCallBack",t[t.onChipsRecordCallBack=30003]="onChipsRecordCallBack",t[t.onShowTimerCallBack=30004]="onShowTimerCallBack",t[t.onSpecialPlayerCallBack=30005]="onSpecialPlayerCallBack",t[t.onGameResultCallBack=30006]="onGameResultCallBack",t[t.onRunWinnerCallBack=30007]="onRunWinnerCallBack",t[t.onBetCallBack=30008]="onBetCallBack",t[t.onBetActionCallBack=30009]="onBetActionCallBack",t[t.onBetInfoCallBack=30010]="onBetInfoCallBack",t[t.onGameBetInfoCallBack=30011]="onGameBetInfoCallBack",t[t.onExchangeCallBack=30012]="onExchangeCallBack",t[t.onChartCallBack=30013]="onChartCallBack",t[t.onRankingCallBack=30014]="onRankingCallBack",t[t.onOnlineCountCallBack=30015]="onOnlineCountCallBack",t[t.onChangeTableMenu=30016]="onChangeTableMenu",t[t.onSwitchTableCallBack=30017]="onSwitchTableCallBack",t[t.onOpenNumberCallBack=30018]="onOpenNumberCallBack",t[t.onLotteryRuel=30019]="onLotteryRuel",t[t.onRemainTimeCallBack=30020]="onRemainTimeCallBack",t[t.onTableInfoCallBack=30021]="onTableInfoCallBack",t[t.lobbySetOff=30022]="lobbySetOff",t[t.changeTable=30023]="changeTable",t[t.openLotteryRecord=30024]="openLotteryRecord",t[t.onHitRateCallBack=30025]="onHitRateCallBack"}(l=t.CallBacks||(t.CallBacks={}));var p=function(){function t(){}return t.BG="lhd_bg_mp3",t.CARD_WASH="lhd_cardwash_mp3",t.DEAL="lhd_flipcard_mp3",t.START="lhd_start_mp3",t.STOP="lhd_stop_mp3",t.COUNT_DOWN="lhd_countdown_mp3",t.ALERT="lhd_alert_mp3",t.BET="lhd_bet_mp3",t.SHOW="lhd_show_mp3",t.LONG_WIN="lhd_long_win_mp3",t.HU_WIN="lhd_hu_win_mp3",t.HE="lhd_he_mp3",t.WIN_BET="lhd_win_bet_mp3",t.WIN_GAME="lhd_win_game_mp3",t.RESULT=["","lhb_p_1_mp3","lhb_p_2_mp3","lhb_p_3_mp3","lhb_p_4_mp3","lhb_p_5_mp3","lhb_p_6_mp3","lhb_p_7_mp3","lhb_p_8_mp3","lhb_p_9_mp3","lhb_p_10_mp3","lhb_p_11_mp3","lhb_p_12_mp3","lhb_p_13_mp3"],t}();t.SoundConst=p,__reflect(p.prototype,"lhd.SoundConst");var c=function(){function t(){}return t.CLASSIC_POINT={COUNTER_PICK1:"LHD1counter_pick1",COUNTER_PICK5:"LHD1counter_pick5",COUNTER_PICK10:"LHD1counter_pick10",COUNTER_PICK20:"LHD1counter_pick20",COUNTER_PICK50:"LHD1counter_pick50",COUNTER_PICK100:"LHD1counter_pick100",COUNTER_PICK200:"LHD1counter_pick200",COUNTER_PICK500:"LHD1counter_pick500",COUNTER_PICK1000:"LHD1counter_pick1000",COUNTER_PICK0:"LHD1counter_pickAllin",COUNTER_BET1:"LHD1counter_bet1",COUNTER_BET5:"LHD1counter_bet5",COUNTER_BET10:"LHD1counter_bet10",COUNTER_BET20:"LHD1counter_bet20",COUNTER_BET50:"LHD1counter_bet50",COUNTER_BET100:"LHD1counter_bet100",COUNTER_BET200:"LHD1counter_bet200",COUNTER_BET500:"LHD1counter_bet500",COUNTER_BET1000:"LHD1counter_bet1000",COUNTER_BET0:"LHD1counter_betallin",OPERATE_BUTTONCANCEL:"LHD1operate_buttoncancel",OPERATE_BUTTONREPEAT:"LHD1operate_buttonrepeat",OPERATE_BUTTONCONFIRM:"LHD1operate_buttonconfirm",OPERATE_AUTOCONFIRM:"LHD1operate_autoconfirm",OPERATE_SETCOUNTER:"LHD1operate_setcounter",OPERATE_ADDCOUNTER:"LHD1operate_addcounter",BETS_0:"LHD1bets_dragon",BETS_1:"LHD1bets_tiger",BETS_2:"LHD1bets_tie",DIRECT_MAPS:"LHD1direct_maps",LEADERBOARD_BUTTON:"LHD1leaderboard_button",MENU_BUTTON:"LHD1menu_button",MENU_HELP_BUTTON:"LHD1menu_help_button",MENU_SET_BUTTON:"LHD1menu_set_button",MENU_RECORD_BUTTON:"LHD1menu_record_button",MENU_BACK_BUTTON:"LHD1menu_back_button"},t.LOTTERY_POINT={COUNTER_PICK1:"LHD2counter_pick1",COUNTER_PICK5:"LHD2counter_pick5",COUNTER_PICK10:"LHD2counter_pick10",COUNTER_PICK20:"LHD2counter_pick20",COUNTER_PICK50:"LHD2counter_pick50",COUNTER_PICK100:"LHD2counter_pick100",COUNTER_PICK200:"LHD2counter_pick200",COUNTER_PICK500:"LHD2counter_pick500",COUNTER_PICK1000:"LHD2counter_pick1000",COUNTER_PICK0:"LHD2counter_pickAllin",COUNTER_BET1:"LHD2counter_bet1",COUNTER_BET5:"LHD2counter_bet5",COUNTER_BET10:"LHD2counter_bet10",COUNTER_BET20:"LHD2counter_bet20",COUNTER_BET50:"LHD2counter_bet50",COUNTER_BET100:"LHD2counter_bet100",COUNTER_BET200:"LHD2counter_bet200",COUNTER_BET500:"LHD2counter_bet500",COUNTER_BET1000:"LHD2counter_bet1000",COUNTER_BET0:"LHD2counter_betallin",OPERATE_BUTTONCANCEL:"LHD2operate_buttoncancel",OPERATE_BUTTONREPEAT:"LHD2operate_buttonrepeat",OPERATE_BUTTONCONFIRM:"LHD2operate_buttonconfirm",OPERATE_AUTOCONFIRM:"LHD2operate_autoconfirm",OPERATE_SETCOUNTER:"LHD2operate_setcounter",OPERATE_ADDCOUNTER:"LHD2operate_addcounter",BETS_0:"LHD2bets_dragon",BETS_1:"LHD2bets_tiger",BETS_2:"LHD2bets_tie",DIRECT_MAPS:"LHD2direct_maps",LEADERBOARD_BUTTON:"LHD2leaderboard_button",MENU_BUTTON:"LHD2menu_button",MENU_HELP_BUTTON:"LHD2menu_help_button",MENU_SET_BUTTON:"LHD2menu_set_button",MENU_RECORD_BUTTON:"LHD2menu_record_button",MENU_BACK_BUTTON:"LHD2menu_back_button"},t}();t.PointConst=c,__reflect(c.prototype,"lhd.PointConst")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._popView=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(t){e.prototype.onInit.call(this),this.registers(),this.gameInit()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._popView=new t.PopView(this)},i.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this.model.isBackstage=!1},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket(),this.registerFunc("backToLobby",this.exitGameReq,this),this.registerFunc("touch",this.touch,this),this.registerFunc("setAutoBet",this.setAutoBet,this),this.registerFunc("confirmBet",this.confirmBet,this),this.registerFunc("conserBet",this.conserBet,this),this.registerFunc("repeatBet",this.repeatBet,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("ShowsetChip",this.ShowsetChip,this),this.registerFunc("getFiveChip",this.getFiveChip,this),this.registerFunc("getChipValue",this.getChipValue,this),this.registerFunc("changeMultiple",this.changeMultiple,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showRank",this.showRank,this),this.registerFunc("confirmShowhand",this.confirmShowhand,this),this.registerFunc("confirmLimitBet",this.confirmLimitBet,this),this.registerFunc("operateAddcounter",this.addCounterPoints,this),this.registerFunc("btnShowMenu",this.menuPoints,this),this.registerFunc("rechargeMoney",this.rechargeMoney,this),this.registerFunc("confirmShowRecharge",this.confirmShowRecharge,this),this.registerFunc(t.CallBacks.onShowTimerCallBack,this.onShowTimerCallBack,this),this.registerFunc(t.CallBacks.onRunWinnerCallBack,this.onRunWinnerCallBack,this),this.registerFunc(t.CallBacks.bet,this.bet,this),this.registerFunc(t.CallBacks.onChangeTableMenu,this.onChangeTableMenu,this),this.registerFunc(t.CallBacks.lobbySetOff,this.onLobbySetOff,this),this.registerFunc(t.CallBacks.changeTable,this.changeTable,this),this.registerFunc(t.CallBacks.openLotteryRecord,this.openLotteryRecord,this),this.registerFunc(t.CallBacks.onLotteryRuel,this.onLotteryRuel,this),this.registerFunc(t.DeskCallBacks.onDeskListCallBack,this.onDeskListCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskStateCallBack,this.onDeskStateCallBack,this),this.registerFunc(t.DeskCallBacks.onDeskChartCallBack,this.onDeskChartCallBack,this),this.registerFunc(t.CallBacks.onIssueCallBack,this.onIssueCallBack,this),this.registerFunc(t.CallBacks.onGameStateCallBack,this.onGameStateCallBack,this),this.registerFunc(t.CallBacks.onChipsRecordCallBack,this.onChipsRecordCallBack,this),this.registerFunc(t.CallBacks.onSpecialPlayerCallBack,this.onSpecialPlayerCallBack,this),this.registerFunc(t.CallBacks.onGameResultCallBack,this.onGameResultCallBack,this),this.registerFunc(t.CallBacks.onBetCallBack,this.onBetCallBack,this),this.registerFunc(t.CallBacks.onBetActionCallBack,this.onBetActionCallBack,this),this.registerFunc(t.CallBacks.onBetInfoCallBack,this.onBetInfoCallBack,this),this.registerFunc(t.CallBacks.onGameBetInfoCallBack,this.onGameBetInfoCallBack,this),this.registerFunc(t.CallBacks.onExchangeCallBack,this.onExchangeCallBack,this),this.registerFunc(t.CallBacks.onChartCallBack,this.onChartCallBack,this),this.registerFunc(t.CallBacks.onRankingCallBack,this.onRankingCallBack,this),this.registerFunc(t.CallBacks.onOnlineCountCallBack,this.onOnlineCountCallBack,this),this.registerFunc(t.CallBacks.onSwitchTableCallBack,this.onSwitchTableCallBack,this),this.registerFunc(t.CallBacks.onOpenNumberCallBack,this.onOpenNumberCallBack,this),this.registerFunc(t.CallBacks.onRemainTimeCallBack,this.onRemainTimeCallBack,this),this.registerFunc(t.CallBacks.onTableInfoCallBack,this.onTableInfoCallBack,this),this.registerFunc(t.CallBacks.onHitRateCallBack,this.onHitRateCallBack,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.onLeaveDesk=function(){e.prototype.onLeaveDesk.call(this),this.goBack2Desk()},Object.defineProperty(i.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),i.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.requestRemainTime(),this.clearTable(),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this.model.isBackstage=!0},i.prototype.onUserMoneyChange=function(i){e.prototype.onUserMoneyChange.call(this,i);var o=GamePlayerMgr.i.getPlayer();this.model.playerMoneys[t.PlayerConst.SELF]=o.getMoney(),this._view.setUserMoney(App.CommonUtils.money2Str(o.getMoney()))},i.prototype.gameInit=function(){App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),this.initUserInfo(),this._view.initCoinArr(),App.SoundManager.playBg(t.SoundConst.BG)},i.prototype.initUserInfo=function(){var e=GamePlayerMgr.i.getPlayer();this.model.playerIds[t.PlayerConst.SELF]=e.getUserId(),this.model.playerMoneys[t.PlayerConst.SELF]=e.getMoney(),this._view.setUserInfo(e)},i.prototype.initJebutton=function(){this.model.chipArr=JSON.parse(t.LhdChips.i.Chips),this._view.setJeButton(this.model.chipArr),this._popView.setDefaultChip(this.model.chipArr),this.touch(this.model.selBtnIndex)},i.prototype.clearTable=function(){this._view.clearCard(),this._view.clearWinner(),this._view.hideTableLight(),this._view.clearShuffle(),this._view.clearAward(),this._view.hideTimer()},i.prototype.clearCoins=function(){this.model.hasBet=!1,this._view.hideStar(),this._view.cleanChip(),this._view.clearFlyWinChip(),this.resetBet(),this.resetPerBet(),this.resetAllBet(),this._view.clearCoin(),this._view.initCoinArr(),this._view.setUserBet(0)},i.prototype.onDeskListCallBack=function(t){App.EasyLoading.hideLoading(),this._popView.createTableList(t,this.model.tableId)},i.prototype.onDeskStateCallBack=function(t){this._popView.insertState(t)},i.prototype.onDeskChartCallBack=function(t){this._popView.insertChart(t)},i.prototype.onIssueCallBack=function(e){this.model.issue=e.issue,this.model.tableType==t.TableTypeConst.CLASSIC?this._view.setClassicIssue(e.issue):(this._view.setCurIssue(e.issue),this._view.showLotteryIssue())},i.prototype.onChipsRecordCallBack=function(e){""!=e.chips&&t.LhdChips.i.setChips(e.chips),this.initJebutton()},i.prototype.onGameStateCallBack=function(e,i){if(this.model.gameStateData=t.LhdUtil.deepClone(e),this.model.isBackstage){if(this.model.timerInfo=this.resetTime(e),this.model.tableType==t.TableTypeConst.CLASSIC)this.renderWinRecord();else{var o=this.getAllSelfBet();if(o){this.model.lastBetRecord.length=0;var n=this.model.betList;n.forEach(function(t,e){if(t){var i={place:e,bet_money:t};this.model.lastBetRecord.push(i)}}.bind(this))}}return void(e.state==t.GameStateConst.BETTING&&(this.refreshMoney(),this.clearCoins()))}this.doGameState(e,i)},i.prototype.doGameState=function(e,i){switch(this.model.timerInfo=this.resetTime(e),this._view.disabledBtn(),this._view.hideTimer(),this._view.hideAwardAni(),this._view.startTimer(this.model.timerInfo,this.model.tableType),e.state){case t.GameStateConst.BETTING:this.onBetting(e,i);break;case t.GameStateConst.EXCHANGE:this.onExchange(e)}},i.prototype.resetTime=function(t){var e=Math.round(t.remaining_time/1e3),i=Math.round(t.total_time/1e3),o={allTime:i,time:e,status:t.state};return o},i.prototype.onBetting=function(e,i){if(R.removeAllTimeOut(this),this.model.tableType==t.TableTypeConst.LOTTORY){var o=this.getAllSelfBet();if(o){this.model.lastBetRecord.length=0;var n=this.model.betList;n.forEach(function(t,e){if(t){var i={place:e,bet_money:t};this.model.lastBetRecord.push(i)}}.bind(this))}}this.model.betTimes=!0,this.model.isBet=!0;var s=this.model.timerInfo;switch(this.clearTable(),i||(this.refreshMoney(),this.clearCoins()),this.isEnabledBtn(),this.renderClassicChart(),this._view.enabledRepeatBet(),this.model.tableType){case t.TableTypeConst.CLASSIC:s.time==s.allTime?(this._view.shuffleAni(),this._view.betStartAni(),R.setTimeOnce(function(){App.SoundManager.playEffect(t.SoundConst.START)}.bind(this),this,100)):(this._view.putCard(),this._view.showTimer(this.model.tableType));break;case t.TableTypeConst.LOTTORY:this._view.showTimer(this.model.tableType),s.time==s.allTime&&(this._view.betStartAni(),App.SoundManager.playEffect(t.SoundConst.START))}},i.prototype.onExchange=function(e){this.model.isBet=!1;var i=this.model.timerInfo;this._view.hideTimer();var o=this.getAllSelfBet();if(o){this.model.lastBetRecord.length=0;var n=this.model.betList;n.forEach(function(t,e){if(t){var i={place:e,bet_money:t};this.model.lastBetRecord.push(i)}}.bind(this))}i.time==i.allTime&&(this._view.betStopAni(),App.SoundManager.playEffect(t.SoundConst.STOP)),this.model.tableType==t.TableTypeConst.LOTTORY&&(this._view.showAwardAni(),this._view.awarding())},i.prototype.onSpecialPlayerCallBack=function(t){t.special_players.length&&t.special_players.forEach(function(t){this.model.playerIds[t.play_role]=t.user_id,this.model.playerMoneys[t.play_role]=t.balance,this._view.setPluteName(t.nick_name,t.play_role);var e=t.head?t.head:1;this._view.setPluteImage("ui_headImg_"+e,t.play_role),this._view.specialPlayerMoney(""+App.CommonUtils.money2Str(t.balance),t.play_role),this._view.playerDisplay(t.play_role)}.bind(this))},i.prototype.onGameResultCallBack=function(e,i){if(e.issue==this.model.issue){if(this.model.gameResultData=t.LhdUtil.deepClone(e),this.model.isBackstage)return void this.doGameResult(e);var o=this.model.timerInfo;if(o.status==t.GameStateConst.EXCHANGE)if(i||this.doGameResult(e),this.model.tableType==t.TableTypeConst.CLASSIC){this._view.putCard();var n=o.allTime-o.time;switch(n){case 0:R.setTimeOnce(function(){this._view.openCard(e.loong_card,e.tiger_card)}.bind(this),this,500),R.setTimeOnce(function(){this.renderWinRecord()}.bind(this),this,3500);break;case 1:this._view.showCard(e.loong_card,e.tiger_card),R.setTimeOnce(function(){this.onRunWinnerCallBack(),this.renderWinRecord()}.bind(this),this,2500);break;case 2:this._view.showCard(e.loong_card,e.tiger_card),R.setTimeOnce(function(){this.onRunWinnerCallBack(),this.renderWinRecord()}.bind(this),this,1500);break;case 3:this._view.showCard(e.loong_card,e.tiger_card),R.setTimeOnce(function(){this.onRunWinnerCallBack(),this.renderWinRecord()}.bind(this),this,500);break;case 4:this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type),this.renderClassicChart(),this.renderWinRecord(),this.CoinAnimation();break;case 5:this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type),this.renderClassicChart(),this.renderWinRecord(),this.refreshPlayerMoney();break;case 6:this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type),this.renderClassicChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,2e3);break;case 7:this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type),this.renderClassicChart(),this.renderWinRecord(),this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,1e3);break;default:this.renderClassicChart(),this.renderWinRecord(),this.refreshMoney(),this.clearTable(),this.clearCoins()}}else{var s=this._view.getRemaniTime();this._view.hideAwardAni(),s>7?(R.setTimeOnce(function(){this._view.dealCard(!1)}.bind(this),this,1e3),R.setTimeOnce(function(){this._view.openCard(e.loong_card,e.tiger_card)}.bind(this),this,2e3)):(this._view.putCard(),this._view.showCard(e.loong_card,e.tiger_card),this._view.showWinner(e.open_type))}}},i.prototype.doGameResult=function(e){this.model.winner=e.open_type,this.model.winPos.length=0,this.model.winPos.push(e.open_type),this._view.createWinChip(e.open_type,t.PlayerConst.ONLINE),this.model.betTimes&&this.model.tableType==t.TableTypeConst.CLASSIC&&this.addToChart(e.open_type)},i.prototype.addToChart=function(t){this.model.betTimes&&(this.model.historyRecord.push(t),this.model.historyRecord.length>60&&this.model.historyRecord.splice(0,60))},i.prototype.onBetCallBack=function(e){return e.code?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[e.code]),void(this.model.isAutoBet||this.isEnabledBtn())):(this.resetPerBet(),void this.betPoints())},i.prototype.onBetActionCallBack=function(e){var i=this.model.playerIds;i.forEach(function(i,o){e.user_id==i&&(this.model.playerMoneys[o]=e.balance,e.bets.forEach(function(e){this._view.betToPlaceAni(o,e.place,e.bet_money),o==t.PlayerConst.PSYCHIC&&this._view.starFly(e.place)}.bind(this)),o==t.PlayerConst.SELF?this._view.setUserMoney(App.CommonUtils.money2Str(e.balance)):(this._view.avatarShake(o),this._view.specialPlayerMoney(App.CommonUtils.money2Str(e.balance),o)))}.bind(this))},i.prototype.onBetInfoCallBack=function(e){if(e.user_id==this.model.playerIds[t.PlayerConst.PSYCHIC]&&e.infos.forEach(function(t){t.bet_money&&this._view.showStar(t.place)}.bind(this)),e.user_id==this.model.playerIds[t.PlayerConst.SELF]){var i=0;e.infos.forEach(function(t){t.bet_money&&(i+=t.bet_money,this.model.betList[t.place]=t.bet_money)}.bind(this)),this._view.showSelfBet(this.model.betList),this._view.setUserBet(App.CommonUtils.money(i))}},i.prototype.onGameBetInfoCallBack=function(e){var i=this.model.timerInfo;i.status==t.GameStateConst.EXCHANGE&&i.allTime-i.time>4||e.infos.length&&(e.infos.forEach(function(e,o){if(i.status==t.GameStateConst.BETTING){var n=e.total_bet_money-this.model.allBetList[e.place];this._view.betToPlaceAni(t.PlayerConst.ONLINE,e.place,n)}this.model.allBetList[e.place]=e.total_bet_money}.bind(this)),this._view.showBetMoney(this.model.allBetList))},i.prototype.onExchangeCallBack=function(e){var i=this._view.getRemaniTime();this.model.timerInfo;this.model.winPlayer.length=0,this.resetWinMoney(),e.infos.length&&(e.infos.forEach(function(t){t.place_exchanges.length&&t.place_exchanges.forEach(function(e){e.prize_money&&this.createWinChip(e.place,t.user_id,e.prize_money)}.bind(this)),this.createMoney(t)}.bind(this)),this.createWinRecord(e.issue),this.model.tableType==t.TableTypeConst.LOTTORY&&(this.model.isBackstage?(this.renderWinRecord(),this.model.issue==e.issue?(this.refreshMoney(),this.clearCoins()):this.refreshExchange()):this.model.issue==e.issue?i>7?R.setTimeOnce(function(){this.renderWinRecord()}.bind(this),this,7e3):(this.renderWinRecord(),this._view.moneyLight(this.model.winPlayer),R.setTimeOnce(function(){this.refreshMoney()}.bind(this),this,1e3),this.clearCoins()):(this.renderWinRecord(),this._view.moneyLight(this.model.winPlayer),R.setTimeOnce(function(){this.refreshExchange()}.bind(this),this,1e3))))},i.prototype.resetWinMoney=function(){this.model.winMoneys.forEach(function(t,e){this.model.winMoneys[e]=0}.bind(this))},i.prototype.createWinChip=function(t,e,i){var o=this.model.playerIds;o.forEach(function(o,n){e==o&&(this._view.createWinChip(t,n),-1==this.model.winPlayer.indexOf(n)&&this.model.winPlayer.push(n),this.model.winMoneys[n]+=i)}.bind(this))},i.prototype.createMoney=function(t){var e=this.model.playerIds;e.forEach(function(e,i){e==t.user_id&&(this.model.playerMoneys[i]=t.balance),this.model.winMoneys[i]&&this._view.playerWinMoney(this.model.winMoneys[i],i)}.bind(this))},i.prototype.onChartCallBack=function(t){this.model.historyRecord=t.open_types,this._view.renderApproach(this.model.historyRecord,this.model.tableType),this._view.renderChart(this.model.historyRecord,this.model.tableId)},i.prototype.onRankingCallBack=function(t){t.infos.length&&this._popView.renderRanking(t.infos)},i.prototype.onOnlineCountCallBack=function(t){this._view.changeOnlineNum(t.online_count)},i.prototype.onSwitchTableCallBack=function(t){App.EasyLoading.hideLoading(),this._popView.closeChangeTable(),t.succ&&(this.model.betTimes=!1,this.model.recordIsSaved=!1,this._view.hideIssue(),this.clearTable(),this.clearCoins(),R.removeAllTimeOut(this),App.TimerManager.removeAll(this))},i.prototype.onOpenNumberCallBack=function(e){var i=this._view.getRemaniTime(),o=this.model.timerInfo;if(this.model.recordIsSaved){var n=e.open_numbers[0];return this.model.lotteryRecord.push(n),this.refreshLotteyRecord(),this.addToChart(n.open_type),void(e.open_numbers[0].issue==this.model.issue?(this.showIssueAndBall(o.status,i,n.issue,n.open_num),o.status==t.GameStateConst.EXCHANGE&&i>7?this.model.isBackstage?(this._view.renderApproach(this.model.historyRecord,this.model.tableType),this._view.renderChart(this.model.historyRecord,this.model.tableId)):R.setTimeOnce(function(){this._view.renderApproach(this.model.historyRecord),this._view.renderChart(this.model.historyRecord)}.bind(this),this,5e3):(this._view.renderApproach(this.model.historyRecord,this.model.tableType),this._view.renderChart(this.model.historyRecord,this.model.tableId))):(App.ScrollTxtTips.showTip("第"+n.issue+"期: 已开奖"),this._view.setLotteryIssue(n.issue),this._view.createBall(n.open_num),this._view.renderApproach(this.model.historyRecord,this.model.tableType),this._view.renderChart(this.model.historyRecord,this.model.tableId)))}if(e.open_numbers){var s=[];this.model.lotteryRecord=t.LhdUtil.deepClone(e.open_numbers);var r=this.model.lotteryRecord;if(r.length){r.forEach(function(t,e){s.push(t.issue)});var a=s.indexOf(this.model.issue);if(a>-1)this.showIssueAndBall(o.status,i,r[a].issue,r[a].open_num);else{var h=r[r.length-1];this._view.setLotteryIssue(h.issue),this._view.createBall(h.open_num)}}else this._view.setLotteryIssue(this.model.issue);this.refreshLotteyRecord()}this.model.recordIsSaved=!0},i.prototype.onRemainTimeCallBack=function(e){this.model.isBackstage=!1,this.model.gameStateData&&(this.model.gameStateData.remaining_time=e.remaining_time,this.onGameStateCallBack(this.model.gameStateData,!0),this.model.gameStateData.state==t.GameStateConst.EXCHANGE&&this.model.gameResultData&&this.onGameResultCallBack(this.model.gameResultData,!0))},i.prototype.onTableInfoCallBack=function(t){this._view.setTableName(t.table_name)},i.prototype.onHitRateCallBack=function(t){this._view.setHitrate(t.hitrate)},i.prototype.refreshLotteyRecord=function(){var e=this.model.lotteryRecord;if(e.length){e.length>50&&e.splice(0,e.length-50);for(var i=[],o=e.length-1;o>-1;o--){var n=e[o].open_num.split(","),s=n.join(""),r=e[o].open_type==t.TypeConst.LOONG?"龙":e[o].open_type==t.TypeConst.TIGER?"虎":"和",a=e[o].open_type==t.TypeConst.LOONG?1:e[o].open_type==t.TypeConst.TIGER?0:2,h={order:e.length-(o+1),issue:e[o].issue,number:s,result:r,textColor:a};i.push(h)}this._popView.renderLotteryRecord(i)}},i.prototype.showIssueAndBall=function(e,i,o,n){this._view.setLotteryIssue(o),e==t.GameStateConst.EXCHANGE&&i>7?this.model.isBackstage?this._view.createBall(n):this._view.ballRotate(n):this._view.createBall(n)},i.prototype.touch=function(t){this.model.selBtnIndex=t,this._view.toggleBtn(this.model.selBtnIndex),this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex],0==this.model.betNum&&this._view.ShowHandlightBtn()},i.prototype.ShowsetChip=function(){this._popView.showChipSet(),this._popView.setDefaultChip(this.model.chipArr),this.setCounterBtnPoints()},i.prototype.getFiveChip=function(t){var e={chips:JSON.stringify(t)};this._proxy.requestChip(e)},i.prototype.getChipValue=function(t){this.model._mTempChipMoney=t,this.model.betNum=this.model._mTempChipMoney[this.model.selBtnIndex],this.setCounterPoints()},i.prototype.changeMultiple=function(t){this._view.setchipValue(t),this.model._mTempMultiple=t},i.prototype.showHelp=function(){this._popView.showHelp(),this.helpPoints()},i.prototype.showRecord=function(){this._popView.showWinRecord(),this.winningRecordPoints()},i.prototype.showGameSet=function(){this._popView.initGameSet(),this._popView.showGameSet(),this.gameSetPoints()},i.prototype.showRank=function(){this._popView.showRanking();var t={begin_idx:0,req_count:100};this._proxy.requestRanking(t),this.rankingPoints()},i.prototype.confirmShowhand=function(){var t=this.model.betMoney;this.model.limits.forEach(function(e){e.place==this.model.betPlace&&(0==t?this._popView.Prompt.showPromptBrnn(6):this.bet(this.model.betPlace,t))}.bind(this))},i.prototype.confirmLimitBet=function(){this.model.betMoney&&this.bet(this.model.betPlace,this.model.betMoney)},i.prototype.onShowTimerCallBack=function(){this._view.showTimer(this.model.tableType)},i.prototype.onRunWinnerCallBack=function(){this._view.runWinner(this.model.winner),R.setTimeOnce(function(){this.CoinAnimation()}.bind(this),this,1e3);var e=this.model.winner==t.TypeConst.LOONG?t.SoundConst.LONG_WIN:this.model.winner==t.TypeConst.TIGER?t.SoundConst.HU_WIN:t.SoundConst.HE;App.SoundManager.playEffect(e)},i.prototype.CoinAnimation=function(){this.renderClassicChart(),this._view.coinAniClear(this.model.winPos,this.model.winPlayer),this._view.showTableLight(this.model.winPos),R.setTimeOnce(function(){this.refreshPlayerMoney()}.bind(this),this,1e3),this.model.winMoneys[t.PlayerConst.SELF]&&App.SoundManager.playEffect(t.SoundConst.WIN_GAME)},i.prototype.renderClassicChart=function(){this.model.tableType==t.TableTypeConst.CLASSIC&&(this._view.renderApproach(this.model.historyRecord,this.model.tableType),this._view.renderChart(this.model.historyRecord,this.model.tableId))},i.prototype.refreshPlayerMoney=function(){this.refreshMoney(),R.setTimeOnce(function(){this.clearTable(),this.clearCoins()}.bind(this),this,3e3)},i.prototype.refreshMoney=function(){this._view.setUserBet(0),this.refreshExchange()},i.prototype.refreshExchange=function(){var e=this.model.playerIds;e.forEach(function(e,i){i==t.PlayerConst.SELF?this._view.setUserMoney(App.CommonUtils.money2Str(this.model.playerMoneys[i])):this._view.specialPlayerMoney(App.CommonUtils.money2Str(this.model.playerMoneys[i]),i)}.bind(this))},i.prototype.createWinRecord=function(e){var i=this.model.winMoneys[t.PlayerConst.SELF];if(i){var o=this.model.winningRecord;if(o.length){var n=[];if(o.forEach(function(t){n.push(t.issue)}),n.indexOf(e)>-1)return;this.addWinRecord(e,i)}else this.addWinRecord(e,i)}},i.prototype.addWinRecord=function(t,e){var i={issue:t,hit_money:App.CommonUtils.money(e)};this.model.winningRecord.unshift(i),this.model.winningRecord.length>50&&this.model.winningRecord.splice(50,this.model.winningRecord.length-50)},i.prototype.renderWinRecord=function(){this._popView.renderWinRecord(this.model.winningRecord)},i.prototype.bet=function(e,i){if(this.model.isBet){this.model.betPlace=e;var o=i?i:1e4*this.model.betNum;if(this.isLimit(e,o))return void(this.model.betPoints.length=0);if(o){var n={place:e,bet_money:o};this.model.isAutoBet?this.autoBet([n]):this.manualBet(e,o),this.betPlacePoints(e)}else{var s=this.getAllPreBet();this.model.betMoney=this.model.playerMoneys[t.PlayerConst.SELF]-s,this._popView.showPrompt(2,App.CommonUtils.money(this.model.betMoney))}this.model.betPoints.push(this.model.betNum)}},i.prototype.isLimit=function(e,i){var o=!1;return console.log(i),this.model.limits.forEach(function(n){if(n.place==e){var s=this.getAllPreBet(),r=i,a=this.model.betList[e],h=this.model.preBetList[e],l=App.CommonUtils.money(n.limit_min_money),p=App.CommonUtils.money(n.limit_max_money);0==this.model.playerMoneys[t.PlayerConst.SELF]?(this._popView.showPromptBrnn(6),o=!0):r+s>this.model.playerMoneys[t.PlayerConst.SELF]?(this._popView.showPromptBrnn(6),o=!0):r&&r<n.limit_min_money?(App.ScrollTxtTips.showTip("当前投注项限红为"+l+"~"+p),o=!0):a+h>=n.limit_max_money?(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[t.BetCodeConst.BET_ERROR_OUTLIMIT]),o=!0):r+a+h>n.limit_max_money&&(this.model.betMoney=n.limit_max_money-(a+h),this._popView.showPrompt(1,App.CommonUtils.money(this.model.betMoney),l,p),o=!0)}}.bind(this)),o},i.prototype.getAllSelfBet=function(){for(var t=0,e=0;e<this.model.betList.length;e++)t+=this.model.betList[e];return t},i.prototype.getAllPreBet=function(){for(var t=0,e=0;e<this.model.preBetList.length;e++)t+=this.model.preBetList[e];return t},i.prototype.autoBet=function(t){var e=t,i={bets:e};this._proxy.requestBet(i)},i.prototype.manualBet=function(t,e){this.model.preBetList[t]+=e,this._view.showMyPreBet(this.model.preBetList),this.isEnabledBtn()},i.prototype.isEnabledBtn=function(){for(var t=this.model.preBetList,e=0,i=0;i<t.length;i++)e+=t[i];e&&(this._view.enabledConfirmBet(),this._view.enabledConserBet())},i.prototype.setAutoBet=function(t){this.model.isAutoBet=t,this.autoBetPoints()},i.prototype.confirmBet=function(){if(this.model.isBet){var t=[];if(this.model.preBetList.forEach(function(e,i){if(e){var o={place:i,bet_money:e};t.push(o)}}.bind(this)),t.length){var e={bets:t};this._proxy.requestBet(e)}this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.confirmBetPoints()}},i.prototype.conserBet=function(){this.resetPerBet(),this._view.disabledConfirmBet(),this._view.disabledConserBet(),this.concerBetPoints()},i.prototype.resetPerBet=function(){for(var t=0;t<this.model.preBetList.length;t++)this.model.preBetList[t]=0;this._view.showMyPreBet(this.model.preBetList)},i.prototype.resetBet=function(){for(var t=0;t<this.model.betList.length;t++)this.model.betList[t]=0},i.prototype.resetAllBet=function(){for(var t=0;t<this.model.allBetList.length;t++)this.model.allBetList[t]=0},i.prototype.repeatBet=function(){if(this.model.isBet){if(this.model.lastBetRecord.length){if(this.isLimitRepeat())return;this.model.isAutoBet?this.autoBet(this.model.lastBetRecord):(this.model.lastBetRecord.forEach(function(t,e){this.model.preBetList[t.place]+=t.bet_money}.bind(this)),this._view.BetBox.showMyPreBet(this.model.preBetList),this.isEnabledBtn())}this.repeatBetPoints()}},i.prototype.isLimitRepeat=function(){var e=!1,i=this.getAllPreBet(),o=0,n=this.model.preBetList,s=this.model.betList,r=this.model.limits;return this.model.lastBetRecord.forEach(function(a){o+=a.bet_money;var h=a.bet_money+s[a.place]+n[a.place];r.forEach(function(n){a.place==n.place&&(o+i>this.model.playerMoneys[t.PlayerConst.SELF]?(this._popView.showPromptBrnn(6),e=!0):h>n.limit_max_money&&(App.ScrollTxtTips.showTip(t.CodeErrorTxt.ERRTXT_LIST[4]),e=!0))}.bind(this))}.bind(this)),e},i.prototype.onChangeTableMenu=function(){this._popView.showChangeTable(),this._proxy.requestLobbySet(!0),App.EasyLoading.showOnTimeOut()},i.prototype.onLobbySetOff=function(){this._proxy.requestLobbySet(!1)},i.prototype.changeTable=function(t){this._proxy.requestSwitchTable(t),App.EasyLoading.showOnTimeOut()},i.prototype.openLotteryRecord=function(){this._popView.showLotteryRecord()},i.prototype.onLotteryRuel=function(){this._popView.showLotteryRule()},i.prototype.exitGameReq=function(){this._proxy.requestExitDesk(),this.backPoints()},i.prototype.betPoints=function(){this.model.betPoints.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]&&(this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_BET"+e]):R.sendPlayerAction(t.PointConst.LOTTERY_POINT["COUNTER_BET"+e]))
}.bind(this)),this.model.betPoints.length=0},i.prototype.setCounterPoints=function(){this.model._mTempChipMoney.forEach(function(e){t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]&&(this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT["COUNTER_PICK"+e]):R.sendPlayerAction(t.PointConst.LOTTERY_POINT["COUNTER_PICK"+e]))}.bind(this))},i.prototype.concerBetPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCANCEL):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_BUTTONCANCEL)},i.prototype.repeatBetPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONREPEAT):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_BUTTONREPEAT)},i.prototype.confirmBetPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_BUTTONCONFIRM):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_BUTTONCONFIRM)},i.prototype.autoBetPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_AUTOCONFIRM):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_AUTOCONFIRM)},i.prototype.setCounterBtnPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_SETCOUNTER):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_SETCOUNTER)},i.prototype.addCounterPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.OPERATE_ADDCOUNTER):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.OPERATE_ADDCOUNTER)},i.prototype.betPlacePoints=function(e){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT["BETS_"+e]):R.sendPlayerAction(t.PointConst.LOTTERY_POINT["BETS_"+e])},i.prototype.menuPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.MENU_BUTTON)},i.prototype.rechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.confirmShowRecharge=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.helpPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_HELP_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.MENU_HELP_BUTTON)},i.prototype.gameSetPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_SET_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.MENU_SET_BUTTON)},i.prototype.rankingPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.LEADERBOARD_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.LEADERBOARD_BUTTON)},i.prototype.winningRecordPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_RECORD_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.MENU_RECORD_BUTTON)},i.prototype.backPoints=function(){this.model.tableType==t.TableTypeConst.CLASSIC?R.sendPlayerAction(t.PointConst.CLASSIC_POINT.MENU_BACK_BUTTON):R.sendPlayerAction(t.PointConst.LOTTERY_POINT.MENU_BACK_BUTTON)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),common.StarExpand.cleanFormPool(),common.comBones.cleanFormPool(),this.model.destroy(),this._proxy.destroy(),this._view.destroy(),this._popView.destroy(),this._model=void 0,this._proxy=void 0,this._view=void 0,this._popView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"lhd.GameController")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.initData(),i}return __extends(i,e),i.prototype.initData=function(){this.betNum=1,this.selBtnIndex=0,this.isBet=!1,this.hasBet=!1,this.isAutoBet=!0,this.winPos=[],this.playerIds=[-1,-1,-1,-1,-1],this.playerMoneys=[0,0,0,0,0],this.winMoneys=[0,0,0,0,0],this.winPlayer=[],this.lastBetRecord=[],this.historyRecord=[],this.winningRecord=[],this.betPoints=[],this.preBetList=[0,0,0],this.betList=[0,0,0],this.allBetList=[0,0,0],this.tableType=t.TableTypeConst.CLASSIC,this.lotteryRecord=[],this.recordIsSaved=!1,this.isBackstage=!1},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"lhd.GameModel")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onDeskList=function(e){this.applyFunc(t.DeskCallBacks.onDeskListCallBack,e)},i.prototype.onDeskState=function(e){this.applyFunc(t.DeskCallBacks.onDeskStateCallBack,e)},i.prototype.onDeskChart=function(e){this.applyFunc(t.DeskCallBacks.onDeskChartCallBack,e)},i.prototype.onIssue=function(e){this.applyFunc(t.CallBacks.onIssueCallBack,e)},i.prototype.onGameState=function(e){this.applyFunc(t.CallBacks.onGameStateCallBack,e)},i.prototype.onChipsRecord=function(e){this.applyFunc(t.CallBacks.onChipsRecordCallBack,e)},i.prototype.onSpecialPlayer=function(e){this.applyFunc(t.CallBacks.onSpecialPlayerCallBack,e)},i.prototype.onGameResult=function(e){this.applyFunc(t.CallBacks.onGameResultCallBack,e)},i.prototype.onBet=function(e){this.applyFunc(t.CallBacks.onBetCallBack,e)},i.prototype.onBetAction=function(e){this.applyFunc(t.CallBacks.onBetActionCallBack,e)},i.prototype.onBetInfo=function(e){this.applyFunc(t.CallBacks.onBetInfoCallBack,e)},i.prototype.onGameBetInfo=function(e){this.applyFunc(t.CallBacks.onGameBetInfoCallBack,e)},i.prototype.onExchange=function(e){this.applyFunc(t.CallBacks.onExchangeCallBack,e)},i.prototype.onChart=function(e){this.applyFunc(t.CallBacks.onChartCallBack,e)},i.prototype.onRanking=function(e){this.applyFunc(t.CallBacks.onRankingCallBack,e)},i.prototype.onOnlineCount=function(e){this.applyFunc(t.CallBacks.onOnlineCountCallBack,e)},i.prototype.onLimit=function(t){this.model.limits=t.limits},i.prototype.onSwitchTable=function(e){this.applyFunc(t.CallBacks.onSwitchTableCallBack,e)},i.prototype.onTableInfo=function(e){this.model.tableId=e.table_id,this.model.tableType=e.table_type,this.applyFunc(t.CallBacks.onTableInfoCallBack,e)},i.prototype.onOpenNumber=function(e){this.applyFunc(t.CallBacks.onOpenNumberCallBack,e)},i.prototype.onRemainTime=function(e){this.applyFunc(t.CallBacks.onRemainTimeCallBack,e)},i.prototype.onHitRate=function(e){this.applyFunc(t.CallBacks.onHitRateCallBack,e)},i.prototype.requestExitDesk=function(){this.sendLeaveDesk(GameModuleMgr.i.getCurrDeskId())},i.prototype.requestChip=function(e){this.send(t.ProxyConst.CHIPS_RECORD_Q,e)},i.prototype.requestBet=function(e){this.send(t.ProxyConst.BET_Q,e)},i.prototype.requestRanking=function(e){this.send(t.ProxyConst.RANKING_Q,e)},i.prototype.requestLobbySet=function(e){this.send(t.ProxyConst.LOBBY_SET_Q,{on:e})},i.prototype.requestSwitchTable=function(e){this.send(t.ProxyConst.SWITCH_TABLE_Q,{to_table_id:e})},i.prototype.requestRemainTime=function(){this.send(t.ProxyConst.REMAIN_TIME_Q)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.DeskProxyConst.DESK_LIST_N,this.onDeskList,this),this.addListener(t.DeskProxyConst.DESK_STATE_N,this.onDeskState,this),this.addListener(t.DeskProxyConst.DESK_CHART_N,this.onDeskChart,this),this.addListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.addListener(t.ProxyConst.GAME_STATE_N,this.onGameState,this),this.addListener(t.ProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.addListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.addListener(t.ProxyConst.GAME_RESULT_N,this.onGameResult,this),this.addListener(t.ProxyConst.BET_R,this.onBet,this),this.addListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.addListener(t.ProxyConst.BET_INFO_N,this.onBetInfo,this),this.addListener(t.ProxyConst.GAME_BET_INFO_N,this.onGameBetInfo,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchange,this),this.addListener(t.ProxyConst.CHART_N,this.onChart,this),this.addListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.addListener(t.ProxyConst.ONLINE_COUNT_N,this.onOnlineCount,this),this.addListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.addListener(t.ProxyConst.SWITCH_TABLE_R,this.onSwitchTable,this),this.addListener(t.ProxyConst.TABLE_INFO_N,this.onTableInfo,this),this.addListener(t.ProxyConst.OPEN_NUMBER_N,this.onOpenNumber,this),this.addListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.addListener(t.ProxyConst.HITRATE_R,this.onHitRate,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.DeskProxyConst.DESK_LIST_N,this.onDeskList,this),this.removeListener(t.DeskProxyConst.DESK_STATE_N,this.onDeskState,this),this.removeListener(t.DeskProxyConst.DESK_CHART_N,this.onDeskChart,this),this.removeListener(t.ProxyConst.ISSUE_N,this.onIssue,this),this.removeListener(t.ProxyConst.GAME_STATE_N,this.onGameState,this),this.removeListener(t.ProxyConst.CHIPS_RECORD_N,this.onChipsRecord,this),this.removeListener(t.ProxyConst.SPECIAL_PLAYER_N,this.onSpecialPlayer,this),this.removeListener(t.ProxyConst.GAME_RESULT_N,this.onGameResult,this),this.removeListener(t.ProxyConst.BET_R,this.onBet,this),this.removeListener(t.ProxyConst.BET_ACTION_N,this.onBetAction,this),this.removeListener(t.ProxyConst.BET_INFO_N,this.onBetInfo,this),this.removeListener(t.ProxyConst.GAME_BET_INFO_N,this.onGameBetInfo,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchange,this),this.removeListener(t.ProxyConst.CHART_N,this.onChart,this),this.removeListener(t.ProxyConst.RANKING_R,this.onRanking,this),this.removeListener(t.ProxyConst.ONLINE_COUNT_N,this.onOnlineCount,this),this.removeListener(t.ProxyConst.LIMIT_N,this.onLimit,this),this.removeListener(t.ProxyConst.SWITCH_TABLE_R,this.onSwitchTable,this),this.removeListener(t.ProxyConst.TABLE_INFO_N,this.onTableInfo,this),this.removeListener(t.ProxyConst.OPEN_NUMBER_N,this.onOpenNumber,this),this.removeListener(t.ProxyConst.REMAIN_TIEM_R,this.onRemainTime,this),this.removeListener(t.ProxyConst.HITRATE_R,this.onHitRate,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"lhd.GameProxy")}(lhd||(lhd={}));var lhd;!function(t){var e=function(){function t(){}return t.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},t}();t.LhdUtil=e,__reflect(e.prototype,"lhd.LhdUtil")}(lhd||(lhd={}));var lhd;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"lhd","GameSkin")||this;return i.starArr=[],i.ballList=[],i.BetBox.initComponent(t),i.JeButton.initComponent(t),i.LoginBtn.initComponent(t),i.ToolBar.initComponent(t),i.CardView.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){this.MsgInfo.allPlayerDisplay(),this.MsgInfo.initInfo(),this.MsgInfo.setPluteLelf(),this.BetBox.createHeadPosition(),this.LoginBtn.open(),this.CardView.open(),this.Timer.open(),this.ToolBar.moveCharge(),this.ToolBar.reChargeEffect(),this.ToolBar.setOnlineLelf(),this.initChangeTableBone(),this.initBroadcast(this),this.btnRedPacket=lobby.RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(lobby.RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BetBox.addEvent(),this.ChartView.addEvent(),App.CommonUtils.effectButton(this.LotteryRuel,this.showLotteryRuel,this,{}),this.ChangeTableBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.GroupLottery.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryRecord,this),this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BetBox.removeEvent(),this.ChartView.removeEvent(),App.CommonUtils.removeButton(this.LotteryRuel),this.ChangeTableBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeTableHandler,this),this.GroupLottery.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openLotteryRecord,this),this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(lobby.RedPackBone.Animation1)},i.prototype.setHitrate=function(t){this.BetBox.setHitrate(t)},i.prototype.initChangeTableBone=function(){if(this._approach||(this._approach=new common.comBones),!this._approach.parent){var t="table";this.ChangeTableBox.addChild(this._approach),this._approach.updateId(t)}this._approach.play(0)},i.prototype.showLotteryRuel=function(){this.applyFunc(t.CallBacks.onLotteryRuel)},i.prototype.onChangeTableHandler=function(){egret.Tween.get(this._approach).to({y:this._approach.y+20},80).to({y:0},80).call(function(){this.applyFunc(t.CallBacks.onChangeTableMenu)},this)},i.prototype.openLotteryRecord=function(){this.applyFunc(t.CallBacks.openLotteryRecord)},i.prototype.setTableName=function(t){this.TableName.text=t},i.prototype.setUserInfo=function(t){this.MsgInfo.setUserName(t.getNickName()),this.MsgInfo.setUserImage("ui_headImg_"+t.getAvatar()),this.MsgInfo.setUserFrame("ui_headBox_"+t.getAvatarBox()),this.setUserMoney(App.CommonUtils.money2Str(t.getMoney()))},i.prototype.changeOnlineNum=function(t){this.ToolBar.changeOnlineNum(""+t)},i.prototype.setUserBet=function(t){this.MsgInfo.setUserBet(""+t)},i.prototype.playerDisplay=function(t){this.MsgInfo.playerDisplay(t)},i.prototype.setPluteImage=function(t,e){this.MsgInfo.setPluteImage(t,e)},i.prototype.setPluteName=function(t,e){this.MsgInfo.setPluteName(t,e)},i.prototype.specialPlayerMoney=function(t,e){this.MsgInfo.specialPlayerMoney(t,e)},i.prototype.avatarShake=function(t){this.MsgInfo.avatarShake(t)},i.prototype.starFly=function(t){var e=this.MsgInfo.getPoint(),i=this.BetBox.getParabolicPoint(t),o=this.BetBox.getStarEndPoint(t),n=common.StarExpand.create();if(n){n.init(this);var s=500;n.run(e,i,o,s,function(){this.BetBox.showStar(t)}.bind(this),this)}},i.prototype.showStar=function(t){this.BetBox.showStar(t)},i.prototype.hideStar=function(){this.BetBox.hideStar()},i.prototype.setUserMoney=function(t){this.MsgInfo.setUserMoney(t)},i.prototype.setClassicIssue=function(t){this.ClassicIssue.text="期号 : "+t,this.showClassicIssue()},i.prototype.showClassicIssue=function(){this.GroupClassic.visible=!0,this.GroupLottery.visible=!1,this.LotteryRuel.visible=!1},i.prototype.showLotteryIssue=function(){this.GroupClassic.visible=!1,this.LotteryRuel.visible=!0,this.GroupLottery.visible=!0},i.prototype.setLotteryIssue=function(t){this.LotteryIssue.text="期号 : "+t+" : "},i.prototype.setCurIssue=function(t){this.Timer.setCurIssue(t)},i.prototype.ballRotate=function(t){this.clearBall();var e=t.split(",");if(e.length)for(var i=0;i<e.length;i++){var o=new eui.Image;o.source="common_ui_cp"+e[i]+"_png",o.x=14,o.y=14,o.anchorOffsetX=14,o.anchorOffsetY=14,this.ballList.push(o),this.GroupBall.addChild(o),egret.Tween.removeTweens(o),egret.Tween.get(o).wait(200*i).to({x:32*i+14,y:18,rotation:360},300,egret.Ease.sineInOut)}},i.prototype.createBall=function(t){this.clearBall();var e=t.split(",");if(e.length)for(var i=0;i<e.length;i++){var o=new eui.Image;o.source="common_ui_cp"+e[i]+"_png",o.x=32*i,o.y=4,this.ballList.push(o),this.GroupBall.addChild(o)}},i.prototype.clearBall=function(){if(this.ballList.length)for(var t=0;t<this.ballList.length;t++){var e=this.ballList[t];e.parent&&e.parent.removeChild(e)}},i.prototype.hideIssue=function(){this.GroupClassic.visible=!1,this.GroupLottery.visible=!1},i.prototype.setJeButton=function(t){this.JeButton.createChip(t),this.setchipValue(1)},i.prototype.setchipValue=function(t){this.JeButton.setchipValue(t)},i.prototype.betStartAni=function(){this.BetAnimation.playAni(0)},i.prototype.betStopAni=function(){this.BetAnimation.playAni(1)},i.prototype.startTimer=function(t,e){this.Timer.startTimer(t,e)},i.prototype.showTimer=function(t){this.Timer.showTimer(t)},i.prototype.hideTimer=function(){this.Timer.hideTimer()},i.prototype.stopTimer=function(){this.Timer.stopTimer()},i.prototype.getRemaniTime=function(){return this.Timer.getRemaniTime()},i.prototype.awarding=function(){this.Timer.awarding()},i.prototype.showAwardAni=function(){this.Timer.showAwardAni()},i.prototype.hideAwardAni=function(){this.Timer.hideAwardAni()},i.prototype.clearAward=function(){this.Timer.clearAward()},i.prototype.toggleBtn=function(t){this.JeButton.toggleBtn(t)},i.prototype.ShowHandlightBtn=function(){this.JeButton.ShowHandlightBtn()},i.prototype.shuffleAni=function(){this.shuffle||(this.shuffle=new t.Shuffle(this._controller),this.GroupShuffle.addChild(this.shuffle)),this.shuffle.init(),this.shuffle.x=0,this.shuffle.y=0,this.shuffle.scaleX=this.shuffle.scaleY=1,this.shuffle.alpha=1,this.shuffle.goToWash(),this.shuffle.addPlayEndCallBack(function(){this.dealCard(!0)}.bind(this),this._controller)},i.prototype.clearShuffle=function(){this.shuffle&&(this.shuffle.destroy(),this.shuffle=void 0)},i.prototype.dealCard=function(t){this.CardView.dealCard(t)},i.prototype.putCard=function(){this.CardView.putCard()},i.prototype.openCard=function(t,e){this.CardView.openCard(t,e)},i.prototype.showCard=function(t,e){this.CardView.showCard(t,e)},i.prototype.runWinner=function(t){this.CardView.runWinner(t)},i.prototype.showWinner=function(t){this.CardView.showWinner(t)},i.prototype.clearCard=function(){this.CardView.clearCard()},i.prototype.clearWinner=function(){this.CardView.clearWinner()},i.prototype.showBetMoney=function(t){this.BetBox.showBetMoney(t)},i.prototype.showSelfBet=function(t){this.BetBox.showSelfBet(t)},i.prototype.showMyPreBet=function(t){this.BetBox.showMyPreBet(t)},i.prototype.initCoinArr=function(){this.BetBox.initCoinArr()},i.prototype.playerWinMoney=function(t,e){this.MsgInfo.playerWinMoney(App.CommonUtils.money(t),e)},i.prototype.betToPlaceAni=function(t,e,i){this.BetBox.betToPlaceAni(t,e,i)},i.prototype.createWinChip=function(t,e){this.BetBox.createWinChip(t,e)},i.prototype.coinAniClear=function(t,e){this.BetBox.coinAniClear(t),R.setTimeOnce(function(){e.forEach(function(t){this.MsgInfo.getMoneyLight(t)}.bind(this))},this,600)},i.prototype.moneyLight=function(t){t.forEach(function(t){this.MsgInfo.getMoneyLight(t)}.bind(this))},i.prototype.clearCoin=function(){this.BetBox.clearCoin()},i.prototype.showTableLight=function(t){this.BetBox.showTableLight(t)},i.prototype.hideTableLight=function(){this.BetBox.hideTableLight()},i.prototype.renderChart=function(t,e){this.ChartView.renderChart(t,e)},i.prototype.renderApproach=function(t,e){this.ChartView.renderApproach(t,e)},i.prototype.enabledConfirmBet=function(){this.LoginBtn.enabledConfirmBet()},i.prototype.enabledConserBet=function(){this.LoginBtn.enabledConserBet()},i.prototype.enabledRepeatBet=function(){this.LoginBtn.enabledRepeatBet()},i.prototype.disabledConfirmBet=function(){this.LoginBtn.disabledConfirmBet()},i.prototype.disabledConserBet=function(){this.LoginBtn.disabledConserBet()},i.prototype.disabledBtn=function(){this.LoginBtn.disabledRepeatBet(),this.LoginBtn.disabledConfirmBet(),this.LoginBtn.disabledConserBet()},i.prototype.enabledBtn=function(){this.LoginBtn.enabledRepeatBet(),this.LoginBtn.enabledConfirmBet(),this.LoginBtn.enabledConserBet()},i.prototype.cleanChip=function(){this.BetBox.cleanChip()},i.prototype.clearFlyWinChip=function(){this.BetBox.clearFlyWinChip()},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.shuffle&&(this.shuffle.destroy(),this.shuffle=void 0),egret.Tween.removeTweens(this),this.BetBox.destroy(),this.JeButton.destroy(),this.LoginBtn.destroy(),this.ToolBar.destroy(),this.CardView.destroy(),this.Timer.destroy(),this.MsgInfo.destroy())},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"lhd.GameView")}(lhd||(lhd={}));var lhd;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Popup,"lhd","PopSkin")||this;return i.SetChip.initComponent(e),i.Prompt.initComponent(e),i.ChangeTable.initComponent(e),i.ChangeTable.getTableList().initComponent(e),i}return __extends(e,t),e.prototype.initUI=function(){this.SetChip.getcoordinate(),this.SetChip.createChip(),this.Help.initUI(),this.ChangeTable.initUI(),this.LotteryRecord.initUI()},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.SetChip.addEvent(),this.ChangeTable.addEvent(),this.LotteryRecord.addEvent(),this.LotteryRule.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.SetChip.removeEvent(),this.ChangeTable.removeEvent(),this.LotteryRecord.removeEvent(),this.LotteryRule.removeEvent()},e.prototype.showChipSet=function(){this.SetChip.showMenu()},e.prototype.setDefaultChip=function(t){this.SetChip.setDefaultChip(t)},e.prototype.initGameSet=function(){this.GameSet.initSet()},e.prototype.showHelp=function(){this.Help.showPopup()},e.prototype.showGameSet=function(){this.GameSet.showPopup()},e.prototype.showWinRecord=function(){this.WinningRecord.showPopup()},e.prototype.renderWinRecord=function(t){this.WinningRecord.rankData(t)},e.prototype.showRanking=function(){this.Ranking.showPopup()},e.prototype.renderRanking=function(t){this.Ranking.rankData(t)},e.prototype.showLotteryRecord=function(){this.LotteryRecord.showPopup()},e.prototype.renderLotteryRecord=function(t){this.LotteryRecord.refreshData(t)},e.prototype.showPrompt=function(t,e,i,o){this.Prompt.showPrompt(t,e,i,o)},e.prototype.showPromptBrnn=function(t,e){this.Prompt.showPromptBrnn(t,e)},e.prototype.showChangeTable=function(){this.ChangeTable.showPopup()},e.prototype.closeChangeTable=function(){this.ChangeTable.closePoput()},e.prototype.createTableList=function(t,e){this.ChangeTable.createList(t,e)},e.prototype.insertState=function(t){this.ChangeTable.insertState(t)},e.prototype.insertChart=function(t){this.ChangeTable.insertChart(t)},e.prototype.showLotteryRule=function(){this.LotteryRule.showPopup()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.SetChip.destroy(),this.Prompt.destroy(),this.ChangeTable.destroy()},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"lhd.PopView")}(lhd||(lhd={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("common.comBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("common.comBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.comBones=e,__reflect(e.prototype,"common.comBones")}(common||(common={}));var common;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mIndex=0,i._mIsInPool=!1,i.touchEnabled=!1,i.touchChildren=!1,i._mRender=t.comBones.create(),i._mRender.updateId("star_1"),i._mStarList=[],i}return __extends(i,e),i.create=function(){if(!(i.StarList.length>9)){var t=ObjectPool.pop("common.StarExpand");return t._mIsInPool=!1,i.StarList.push(t),t}},i.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clear(),i.c(),ObjectPool.push(t))},i.c=function(t){void 0===t&&(t=!1);for(var e=i.StarList,o=e.length,n=o-1;n>=0;n--){var s=e[n];t?(e.splice(n,1),s.destroy()):s._mIsInPool&&e.splice(n,1)}},i.cleanFormPool=function(){t.comBones.cleanFormPool(),i.c(!0),ObjectPool.clearClass("common.StarExpand","destroy")},i.prototype.init=function(t){this._mParent=t,this._mParent&&!this.parent&&(this._mParent.addChild(this),this.addChild(this._mRender))},i.prototype.run=function(t,e,o,n,s,r,a){this.play(),this.runParabola(t,e,o,n,function(){i.realese(this),s&&s.call(r,a)}.bind(this),this)},i.prototype.play=function(){this._mRender.play(999),this._mIndex=0,App.TimerManager.doTimer(80,999,this.callBackFind,this)},i.prototype.callBackFind=function(){var e=this._mStarList,i=e[this._mIndex++];i||(i=t.comBones.create(),i.blendMode=egret.BlendMode.ADD,i.updateId("star_0"),this._mStarList.push(i)),i.parent||this._mParent.addChild(i),i.setPosition(this.x,this.y),i.play(1,2),i.addPlayEndCallBack(function(t){R.removeFromParent(i)}.bind(this,i),this)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren(),this._mIndex=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mRender&&this._mRender.destroy();for(var t=this._mStarList;t.length;){var i=t.pop();i&&i.destroy()}this._mRender=void 0,this._mParent=void 0,this._mStarList=void 0},i.StarList=[],i}(ActionExpand);t.StarExpand=e,__reflect(e.prototype,"common.StarExpand")}(common||(common={}));var common;!function(t){var e=function(){function e(){}return e.prototype.init=function(){this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this._mchipColor=0,this._mchipValue=0,this.mIsX=0,this.mIsY=0},e.prototype.setChipId=function(t){this._mChipId=t},e.prototype.getChipId=function(){return this._mChipId},e.prototype.setplaceId=function(t){this._placeId=t},e.prototype.getplaceId=function(){return this._placeId},e.prototype.getTexture=function(){return t.ChipTextures.getPokerTexture(this._mchipValue)},e.prototype.getText=function(){return this.chiplist[this._mchipValue]},e.prototype.setColor=function(t){this._mchipColor=t},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.chipAura=function(t){this._mchipAura=t},e.prototype.setValue=function(t){this._mchipValue=t},e.prototype.getColor=function(){return this._mchipColor},e.prototype.getchipAura=function(){return this._mchipAura},e.prototype.getValue=function(){return this._mchipValue},e.prototype.destroy=function(){},e}();t.ChipData=e,__reflect(e.prototype,"common.ChipData")}(common||(common={}));var common;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e.onCreate(),e}return __extends(e,t),e.prototype.onCreate=function(){this._mInit=!0,this._mchipAura=new eui.Image,this.addChild(this._mchipAura),this._mIcon=new eui.Image,this.addChild(this._mIcon),this.BtnText=new eui.Label,this.addChild(this.BtnText),this._mMask=new eui.Image,this.addChild(this._mMask)},e.prototype.refreshIcon=function(t){this._mIcon.texture=t.getTexture(),this.BtnText.text=t.getText()?t.getText():""},e.prototype.addEvent=function(){},e.prototype.addMask=function(){this._mMask.texture=RES.getRes("bjl_common_json.common_ui_zhezhao"),this._mMask.alpha=0,this._mMask.touchEnabled=!1},e.prototype.addAura=function(){this._mchipAura.texture=RES.getRes("bjl_common_json.common_ui_g1"),this._mchipAura.alpha=0,this._mchipAura.touchEnabled=!1},e.prototype.setopennes=function(t){this._mIcon.alpha=t},e.prototype.setTextField=function(){this.BtnText.horizontalCenter=-3,this.BtnText.verticalCenter=-5,this.BtnText.width=80,this.BtnText.fontFamily="Microsoft YaHei",this.BtnText.size=22,this.BtnText.textColor=16777215,this.BtnText.textAlign=egret.HorizontalAlign.CENTER,this.BtnText.touchEnabled=!1},e.prototype.showMask=function(){this._mMask.visible=!0},e.prototype.hideMask=function(){this._mMask.visible=!1},e.prototype.touchIcon=function(){this._mIcon.touchEnabled=!0},e.prototype.Iconclose=function(){this._mIcon.touchEnabled=!1},e.prototype.clean=function(){this._mIcon.texture=void 0},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.destroy=function(){this._mInit&&(this._mInit=!1,this.clean(),this.removeChild(this._mIcon))},e}(eui.Component);t.ChipIcon=e,__reflect(e.prototype,"common.ChipIcon")}(common||(common={}));var common;!function(t){var e=function(){function t(){}return t.getPokerTexture=function(e){var i;i="common_ui_"+e+"_png";var o=t._mPokerTextures;return o[i]||(o[i]=RES.getRes(i)),o[i]},t.cleanAll=function(){var e=t._mPokerTextures;for(var i in e)e[i]=void 0},t._mPokerTextures={},t}();t.ChipTextures=e,__reflect(e.prototype,"common.ChipTextures")}(common||(common={}));var common;!function(t){var e=function(){function e(t,e){this._mInit=!1,this.chiplist=[1,2,5,10,20,50,100,500,1e3,0],this.onCreate(),this.init(t,e)}return e.prototype.onCreate=function(){this._mData=new t.ChipData,this._mIcon=new t.ChipIcon},e.prototype.init=function(t,e){this._mInit||(this._mInit=!0,this._mData.init(),this._mData.setValue(t),this.setChipId(e))},e.prototype.add2Stage=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||(this._mParent.addChild(this._mIcon),this.refresh(),this.addMask(),this.addAura(),this.setTextField(),this.hideMask()))},e.prototype.removeFromParent=function(){this._mInit&&this._mIcon.parent&&this._mParent.removeChild(this._mIcon)},e.prototype.addToContainer=function(t){this._mInit&&(this._mParent=t,this._mIcon.parent||this._mParent.addChild(this._mIcon))},e.prototype.setChipId=function(t){this._mData.setChipId(t)},e.prototype.refresh=function(){this._mInit&&this._mIcon.refreshIcon(this._mData)},e.prototype.addMask=function(){this._mInit&&this._mIcon.addMask()},e.prototype.addAura=function(){this._mInit&&this._mIcon.addAura()},e.prototype.moveTo=function(){var t=this._mData.getFlyX(),e=this._mData.getFlyY(),i=this._mData.getFlyChipX(),o=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:t,y:e,alpha:1},200,egret.Ease.sineInOut).call(function(){egret.Tween.get(this._mIcon).to({x:i,y:o},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))}.bind(this))},e.prototype.moveFlyBet=function(){var t=this._mData.getFlyX(),e=this._mData.getFlyY();
egret.Tween.get(this._mIcon).to({x:t,y:e},300,egret.Ease.sineInOut)},e.prototype.moveFlyhead=function(){var t=this._mData.getFlyChipX(),e=this._mData.getFlyChipY();egret.Tween.get(this._mIcon).to({x:t,y:e},300,egret.Ease.sineInOut).call(function(){this.clean()}.bind(this))},e.prototype.setTextField=function(){this._mInit&&this._mIcon.setTextField()},e.prototype.showMask=function(){this._mInit&&this._mIcon.showMask()},e.prototype.touchIcon=function(){this._mIcon&&(this._mIcon.touchEnabled=!0,this._mIcon.touchChildren=!0)},e.prototype.Iconclose=function(){this._mIcon&&(this._mIcon.touchEnabled=!1,this._mIcon.touchChildren=!1)},e.prototype.setopennes=function(t){this._mIcon.setopennes(t)},e.prototype.hideMask=function(){this._mInit&&this._mIcon.hideMask()},e.prototype.setScore=function(){this._mIcon.setScore()},e.prototype.setFlyX=function(t){this._mData.setFlyX(t)},e.prototype.setFlyY=function(t){this._mData.setFlyY(t)},e.prototype.getFlyX=function(){return this._mData.getFlyX()},e.prototype.getFlyY=function(){return this._mData.getFlyY()},e.prototype.setFlyChipX=function(t){this._mData.setFlyChipX(t)},e.prototype.setFlyChipY=function(t){this._mData.setFlyChipY(t)},e.prototype.getFlyChipX=function(){return this._mData.getFlyChipX()},e.prototype.getFlyChipY=function(){return this._mData.getFlyChipY()},e.prototype.clean=function(){this._mInit&&(this._mInit=!1,this._mData.init(),this._mIcon.clean(),this._mParent.removeChild(this._mIcon))},Object.defineProperty(e.prototype,"color",{get:function(){return this._mData.getColor()},enumerable:!0,configurable:!0}),e.prototype.getChipId=function(){return this._mData.getChipId()},e.prototype.setplaceId=function(t){this._mData.setplaceId(t)},e.prototype.getplaceId=function(){return this._mData.getplaceId()},Object.defineProperty(e.prototype,"val",{get:function(){return this._mData.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._mIcon.x},set:function(t){this._mIcon.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._mIcon.y},set:function(t){this._mIcon.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._mIcon.scaleX},set:function(t){this._mIcon.scaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._mIcon.scaleY},set:function(t){this._mIcon.scaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._mIcon.alpha},set:function(t){this._mIcon.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return this._mIsBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetX",{get:function(){return this._mIcon.anchorOffsetX},set:function(t){this._mIcon.anchorOffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorOffsetY",{get:function(){return this._mIcon.anchorOffsetY},set:function(t){this._mIcon.anchorOffsetY=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){this._mData.setColor(t)},e.prototype.setValue=function(t){this._mData.setValue(t)},e.prototype.setIsBottom=function(t){this._mIsBottom=t},e.prototype.getData=function(){return this._mData},e.prototype.getIcon=function(){return this._mIcon},e.prototype.destroy=function(){this._mIcon&&egret.Tween.removeTweens(this._mIcon),this.clean(),this._mData.destroy(),this._mIcon.destroy(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this._mData=void 0,this._mIcon=void 0,this._mParent=void 0},e}();t.chipUIBtn=e,__reflect(e.prototype,"common.chipUIBtn")}(common||(common={}));var common;!function(t){var e=function(){function t(){t.BeadPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createBead=function(){var e=t.BeadPool.pop();return e||(e=new i),e},t.prototype.releaseBead=function(e){e.clear(),t.BeadPool.unshift(e)},t.prototype.clear=function(){for(;t.BeadPool.length;)t.BeadPool.pop().destroy()},t._i=null,t.BeadPool=null,t}();t.BeadFactory=e,__reflect(e.prototype,"common.BeadFactory");var i=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.BeadSrc=new eui.Image,this.addChild(this.BeadSrc)},e.prototype.setSource=function(t){this.BeadSrc.texture=RES.getRes(t)},e.prototype.clear=function(){R.removeFromParent(this)},e.prototype.destroy=function(){this.BeadSrc.source=void 0,this.BeadSrc.texture=void 0,this.clear()},e}(eui.Component);t.Bead=i,__reflect(i.prototype,"common.Bead")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"BetAnimationSkin")||this;return i._approach=null,i}return __extends(i,e),i.prototype.playAni=function(t){this.diceAnimation(t)},i.prototype.diceAnimation=function(e){this._approach||(this._approach=new t.comBones,this._betPos.addChild(this._approach)),this._betPos.visible=!0;var i="bet_"+e;this._approach.updateId(i);var o=this._betPos.width/2,n=this._betPos.height/2;this._approach.setPosition(o,n),this._approach.play(1);var s=this;this._approach.addPlayEndCallBack(function(){s._betPos.visible=!1},this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._approach&&this._approach.destroy(),this._approach=void 0},i}(BaseEuiComponent);t.BetAnimation=e,__reflect(e.prototype,"common.BetAnimation")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"ChartBead")||this;return i.beadList=[],i.tableId=-1,i.record=[],i}return __extends(i,e),i.prototype.renderBead=function(t,e,i){this.gameName=e,t&&t.length?(t.length<this.record.length&&(this.removeFrame(),this.isRender=!1),this.record=JSON.parse(JSON.stringify(t)),this.tableId!=i?(this.isRender=!0,this.removeFrame(),this.tableId=i):this.isRender&&this.removeFrame(),App.TimerManager.doFrame(1,99,this.frameRender,this)):this.removeFrame()},i.prototype.removeBead=function(){if(this.beadList.length)for(;this.beadList.length;){var e=this.beadList.pop();t.BeadFactory.i.releaseBead(e)}},i.prototype.frameRender=function(){for(var t=0;3>t;t++)this.index<this.record.length?this.renderOne():(this.isRender=!1,App.TimerManager.remove(this.frameRender,this))},i.prototype.removeFrame=function(){this.removeBead(),this.index=0,App.TimerManager.remove(this.frameRender,this)},i.prototype.renderOne=function(){this.renderPublic(this.index),this.index++},i.prototype.renderPublic=function(e){var i=t.BeadFactory.i.createBead(),o=e/6,n=24*parseInt(String(o)),s=e%6;i.x=n,i.y=24*s,i.scaleX=i.scaleY=.6,"bjl"==this.gameName?i.setSource(this.gameName+"_ui_bead_"+this.record[e]+"_png"):i.setSource(this.gameName+"_ui_bead_"+this.record[e]),this.beadList.push(i),this.GroupBead.addChild(i)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiComponent);t.ChartBead=e,__reflect(e.prototype,"common.ChartBead")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"ChartOther")||this;return i.record=[],i.curWinner=-1,i.largeArr=[],i.copyLargeArr=[],i.bigEyeResultArr=[],i.bigEyeEndArr=[],i.smallResultArr=[],i.smallEndArr=[],i.xiaoQiangResultArr=[],i.xiaoQiangEndArr=[],i.largeRenderArr=[],i.largeList=[],i.bigEyeRenderArr=[],i.bigEyeList=[],i.smallRenderArr=[],i.smallList=[],i.xiaoQiangRenderArr=[],i.xiaoQiangList=[],i.tableId=-1,i}return __extends(i,e),i.prototype.renderOtherChart=function(t,e,i){JSON.stringify(this.record)!=JSON.stringify(t)&&(t.length<this.record.length&&(this.isRepeat=!0),this.tableId!=i?(this.isSameTable=!1,this.tableId=i):this.isSameTable=!0,this.gameName=e,this.renderLargeRoad(e,t,i),this.renderBigEyeRoad(e),this.renderSmallRoad(e),this.renderXiaoQiangRoad(e),this.isRepeat=!1)},i.prototype.renderLargeRoad=function(t,e,i){this.record=JSON.parse(JSON.stringify(e));var o=JSON.parse(JSON.stringify(this.copyLargeArr)),n=[];o.forEach(function(t){n=n.concat(t)});var s=n.slice(0,10);this.copyLargeArr.length=0,this.createLargeRoadPos(e),this.largeRenderArr.length=0,this.copyLargeArr.forEach(function(t){this.largeRenderArr=this.largeRenderArr.concat(t)}.bind(this));var r=this.largeRenderArr.slice(0,10);this.largeRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeLargeFrame(),this.largeIsRender=!1):JSON.stringify(s)!=JSON.stringify(r)?(this.removeLargeFrame(),this.largeIsRender=!0):this.largeIsRender&&this.removeLargeFrame():(this.largeIsRender=!0,this.removeLargeFrame()),App.TimerManager.doFrame(1,99,this.frameRenderLarge,this)):this.removeLargeFrame()},i.prototype.removeLargeFrame=function(){this.removeBead(this.largeList),this.largeIndex=0,App.TimerManager.remove(this.frameRenderLarge,this)},i.prototype.frameRenderLarge=function(){for(var t=0;3>t;t++)this.largeIndex<this.largeRenderArr.length?this.renderLargeOne():(this.largeIsRender=!1,App.TimerManager.remove(this.frameRenderLarge,this))},i.prototype.renderLargeOne=function(){if(!(this.largeIndex>this.largeRenderArr.length-1)){var e=t.BeadFactory.i.createBead();e.x=12*(this.largeRenderArr[this.largeIndex].x-1),e.y=12*(this.largeRenderArr[this.largeIndex].y-1),e.scaleX=e.scaleY=1,"bjl"==this.gameName?e.setSource(this.gameName+"_ui_dl_"+this.largeRenderArr[this.largeIndex].winner):e.setSource(this.gameName+"_ui_dl_"+this.largeRenderArr[this.largeIndex].winner),this.largeList.push(e),this.GroupLargeRoad.addChild(e),this.largeIndex++}},i.prototype.removeBead=function(e){if(e.length)for(;e.length;){var i=e.pop();t.BeadFactory.i.releaseBead(i)}},i.prototype.renderBigEyeRoad=function(t){var e=JSON.parse(JSON.stringify(this.bigEyeEndArr)),i=[];e.forEach(function(t){i=i.concat(t)});var o=i.slice(0,10);this.bigEyeResultArr.length=0,this.bigEyeEndArr.length=0,this.createBigEyeRoadResult(),this.bigEyeRenderArr.length=0,this.bigEyeEndArr.forEach(function(t){this.bigEyeRenderArr=this.bigEyeRenderArr.concat(t)}.bind(this));var n=this.bigEyeRenderArr.slice(0,10);this.bigEyeRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeBigEyeFrame(),this.bigEyeIsRender=!1):JSON.stringify(o)!=JSON.stringify(n)?(this.removeBigEyeFrame(),this.bigEyeIsRender=!0):this.bigEyeIsRender&&this.removeBigEyeFrame():(this.bigEyeIsRender=!0,this.removeBigEyeFrame()),App.TimerManager.doFrame(1,99,this.frameRenderBigEye,this)):this.removeBigEyeFrame()},i.prototype.removeBigEyeFrame=function(){this.removeBead(this.bigEyeList),this.bigEyeIndex=0,App.TimerManager.remove(this.frameRenderBigEye,this)},i.prototype.frameRenderBigEye=function(){for(var t=0;3>t;t++)this.bigEyeIndex<this.bigEyeRenderArr.length?this.renderBigEyeOne():(this.bigEyeIsRender=!1,App.TimerManager.remove(this.frameRenderBigEye,this))},i.prototype.renderBigEyeOne=function(){if(!(this.bigEyeIndex>this.bigEyeRenderArr.length-1)){var e=t.BeadFactory.i.createBead();e.x=6*(this.bigEyeRenderArr[this.bigEyeIndex].x-1),e.y=6*(this.bigEyeRenderArr[this.bigEyeIndex].y-1),e.scaleX=e.scaleY=1,"bjl"==this.gameName?e.setSource(this.gameName+"_ui_dyl_"+this.bigEyeRenderArr[this.bigEyeIndex].winner):e.setSource(this.gameName+"_ui_dyl_"+this.bigEyeRenderArr[this.bigEyeIndex].winner),this.bigEyeList.push(e),this.GroupBigEyeRoad.addChild(e),this.bigEyeIndex++}},i.prototype.renderSmallRoad=function(t){var e=JSON.parse(JSON.stringify(this.smallEndArr)),i=[];e.forEach(function(t){i=i.concat(t)});var o=i.slice(0,10);this.smallResultArr.length=0,this.smallEndArr.length=0,this.createSmallRoadResult(),this.smallRenderArr.length=0,this.smallEndArr.forEach(function(t){this.smallRenderArr=this.smallRenderArr.concat(t)}.bind(this));var n=this.smallRenderArr.slice(0,10);this.smallRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeSmallFrame(),this.smallIsRender=!1):JSON.stringify(o)!=JSON.stringify(n)?(this.removeSmallFrame(),this.smallIsRender=!0):this.smallIsRender&&this.removeSmallFrame():(this.smallIsRender=!0,this.removeSmallFrame()),App.TimerManager.doFrame(1,99,this.frameRenderSmall,this)):this.removeSmallFrame()},i.prototype.removeSmallFrame=function(){this.removeBead(this.smallList),this.smallIndex=0,App.TimerManager.remove(this.frameRenderSmall,this)},i.prototype.frameRenderSmall=function(){for(var t=0;3>t;t++)this.smallIndex<this.smallRenderArr.length?this.renderSmallOne():(this.smallIsRender=!1,App.TimerManager.remove(this.frameRenderSmall,this))},i.prototype.renderSmallOne=function(){if(!(this.smallIndex>this.smallRenderArr.length-1)){var e=t.BeadFactory.i.createBead();e.x=6*(this.smallRenderArr[this.smallIndex].x-1),e.y=6*(this.smallRenderArr[this.smallIndex].y-1),e.scaleX=e.scaleY=1,"bjl"==this.gameName?e.setSource(this.gameName+"_ui_xl_"+this.smallRenderArr[this.smallIndex].winner):e.setSource(this.gameName+"_ui_xl_"+this.smallRenderArr[this.smallIndex].winner),this.smallList.push(e),this.GroupSmallRoad.addChild(e),this.smallIndex++}},i.prototype.renderXiaoQiangRoad=function(t){var e=JSON.parse(JSON.stringify(this.xiaoQiangEndArr)),i=[];e.forEach(function(t){i=i.concat(t)});var o=i.slice(0,10);this.xiaoQiangResultArr.length=0,this.xiaoQiangEndArr.length=0,this.createXiaoQiangRoadResult(),this.xiaoQiangRenderArr.length=0,this.xiaoQiangEndArr.forEach(function(t){this.xiaoQiangRenderArr=this.xiaoQiangRenderArr.concat(t)}.bind(this));var n=this.xiaoQiangRenderArr.slice(0,10);this.xiaoQiangRenderArr.length?(this.isSameTable?this.isRepeat?(this.removeXiaoQiangFrame(),this.xiaoQiangIsRender=!1):JSON.stringify(o)!=JSON.stringify(n)?(this.removeXiaoQiangFrame(),this.xiaoQiangIsRender=!0):this.xiaoQiangIsRender&&this.removeXiaoQiangFrame():(this.xiaoQiangIsRender=!0,this.removeXiaoQiangFrame()),App.TimerManager.doFrame(1,99,this.frameRenderXiaoQiang,this)):this.removeXiaoQiangFrame()},i.prototype.removeXiaoQiangFrame=function(){this.removeBead(this.xiaoQiangList),this.xiaoQiangIndex=0,App.TimerManager.remove(this.frameRenderXiaoQiang,this)},i.prototype.frameRenderXiaoQiang=function(){for(var t=0;3>t;t++)this.xiaoQiangIndex<this.xiaoQiangRenderArr.length?this.renderXiaoQiangOne():(this.xiaoQiangIsRender=!1,App.TimerManager.remove(this.frameRenderXiaoQiang,this))},i.prototype.renderXiaoQiangOne=function(){if(!(this.xiaoQiangIndex>this.xiaoQiangRenderArr.length-1)){var e=t.BeadFactory.i.createBead();e.x=6*(this.xiaoQiangRenderArr[this.xiaoQiangIndex].x-1),e.y=6*(this.xiaoQiangRenderArr[this.xiaoQiangIndex].y-1),e.scaleX=e.scaleY=1,"bjl"==this.gameName?e.setSource(this.gameName+"_ui_xql_"+this.xiaoQiangRenderArr[this.xiaoQiangIndex].winner):e.setSource(this.gameName+"_ui_xql_"+this.xiaoQiangRenderArr[this.xiaoQiangIndex].winner),this.xiaoQiangList.push(e),this.GroupXiaoQiangRoad.addChild(e),this.xiaoQiangIndex++}},i.prototype.createLargeRoadPos=function(t){this.createArr(t,this.largeArr),this.copyLargeArr=JSON.parse(JSON.stringify(this.largeArr)),this.removeLargeData(this.copyLargeArr,20,1)},i.prototype.createArr=function(t,e){e.length=0,this.curWinner=-1;var i=[];e.push(i),t.length&&t.forEach(function(t,o){if(-1==this.curWinner){var n={x:1,y:1,winner:t};i.push(n),2!=t&&(this.curWinner=t)}else if(t==this.curWinner)this.rederLargeCurrentList(t,e),this.curWinner=t;else if(2==t){var s=e[e.length-1],r=s[s.length-1].x,a=s[s.length-1].y,n={x:r,y:a,winner:t};s.push(n)}else{var h=[],l=e.indexOf(e[e.length-1]),n={x:l+2,y:1,winner:t};h.push(n),e.push(h),this.curWinner=t}}.bind(this))},i.prototype.createBigEyeEndArr=function(t){this.createArr(t,this.bigEyeEndArr),this.removeLargeData(this.bigEyeEndArr,40,2)},i.prototype.createSmallEndArr=function(t){this.createArr(t,this.smallEndArr),this.removeLargeData(this.smallEndArr,20)},i.prototype.createXiaoQiangEndArr=function(t){this.createArr(t,this.xiaoQiangEndArr),this.removeLargeData(this.xiaoQiangEndArr,20)},i.prototype.reformLargeArr=function(t){var e=JSON.parse(JSON.stringify(t));return e.forEach(function(t){t.forEach(function(e,i){2==e.winner&&t.splice(i,1)}.bind(this))}.bind(this)),e},i.prototype.createBigEyeRoadResult=function(){var t=this.reformLargeArr(this.largeArr);this.createResultArr(t,this.bigEyeResultArr,1),this.createBigEyeEndArr(this.bigEyeResultArr)},i.prototype.createSmallRoadResult=function(){var t=this.reformLargeArr(this.largeArr);this.createResultArr(t,this.smallResultArr,2),this.createSmallEndArr(this.smallResultArr)},i.prototype.createXiaoQiangRoadResult=function(){var t=this.reformLargeArr(this.largeArr);this.createResultArr(t,this.xiaoQiangResultArr,3),this.createXiaoQiangEndArr(this.xiaoQiangResultArr)},i.prototype.createResultArr=function(t,e,i){var o=i;if(t.length>o)for(var n=o;n<t.length;n++)for(var s=0;s<t[n].length;s++)if(n==o){if(s>0){var r=void 0;r=t[n-o].length==s?1:0,e.push(r)}}else{var r=void 0;r=0==s?t[n-o-1].length==t[n-1].length?0:1:t[n-o].length==s?1:0,e.push(r)}},i.prototype.rederLargeCurrentList=function(t,e){var i,o=e[e.length-1],n=o[o.length-1].x,s=o[o.length-1].y;i=6>s&&2==this.isRenderListLine(n,s+1,t,e)?{x:n,y:s+1,winner:t}:{x:n+1,y:s,winner:t},o.push(i)},i.prototype.isRenderListLine=function(t,e,i,o){var n,s,r;if(o.length>1){var a=o[0];if(o.length>2)for(var h=1;h<o.length-1;h++)a=a.concat(o[h]);var l=[];a.forEach(function(o){l.push(o.x),s=l.indexOf(t),r=l.indexOf(t-1),n=s>-1?a[s].y==e?1:a[s].y==e+1&&a[s].winner==i?1:2:r>-1&&a[r].y==e&&a[r].winner==i?1:2})}else n=2;return n},i.prototype.removeLargeData=function(t,e,i){t.length&&t.forEach(function(i){i.length&&i[i.length-1].x>e&&(t.splice(0,1),this.moveLeftLarge(t),this.removeLargeData(t,e))}.bind(this))},i.prototype.moveLeftLarge=function(t){t.forEach(function(t){t.forEach(function(t){t.x--})})},i.prototype.getAskRoad=function(t){this.record.push(t);var e=[];this.createArr(this.record,e);var i=this.reformLargeArr(e),o=[],n=[],s=[];this.createResultArr(i,o,1),this.createResultArr(i,n,2),this.createResultArr(i,s,3);var r=[];return o.length&&r.push(o[o.length-1]),n.length&&r.push(n[n.length-1]),s.length&&r.push(s[s.length-1]),this.record.splice(this.record.length-1,1),r},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.largeArr=void 0,this.copyLargeArr=void 0,this.bigEyeResultArr=void 0,this.bigEyeEndArr=void 0,this.smallResultArr=void 0,this.smallEndArr=void 0,this.xiaoQiangResultArr=void 0,this.xiaoQiangEndArr=void 0},i}(BaseEuiComponent);t.ChartOther=e,__reflect(e.prototype,"common.ChartOther")}(common||(common={}));var hot;!function(t){var e=function(){function t(){this._isPreloaded=!1,this._isUpdateComplete=!1,this._currFrame=0,this._isBegin=!1,App.setOpenLog(!0),App.setScaleModeNormal(),App.StageUtils.setFrameRate(30),App.StageUtils.setMaxTouches(1),App.StageUtils.getStage().setContentSize(GameBase.GameWidth,GameBase.GameHeight),App.setLandscape(),this._mSocketEvent=new i,this._mHotUpdateEvent=new o,this.addEvent(),this._mSocketEvent.addEvent(),this._mHotUpdateEvent.addEvent(),t._mInstance=this}return Object.defineProperty(t,"i",{get:function(){return t._mInstance},enumerable:!0,configurable:!0}),t.prototype.initBuildData=function(){app.BuildData.isBuildTime()&&(this._mAppBuildData=new app.BuildData)},t.prototype.initScene=function(){App.SceneManager.register(SceneConsts.Loading,new LoadingScene),App.SceneManager.register(SceneConsts.Login,new lobby.LoginScene),App.SceneManager.register(SceneConsts.Lobby,new lobby.LobbyScene),App.SceneManager.register(SceneConsts.Room,new RoomScene),App.SceneManager.register(SceneConsts.Desk,new DeskScene),App.SceneManager.register(SceneConsts.Game,new GameScene),App.StageUtils.getStage().addChild(LayerManager.Game_Bg),App.StageUtils.getStage().addChild(LayerManager.Game_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Main),App.StageUtils.getStage().addChild(LayerManager.UI_Popup),App.StageUtils.getStage().addChild(LayerManager.UI_Message),App.StageUtils.getStage().addChild(LayerManager.UI_Tips)},t.prototype.showLoading=function(){GameNative.openInstallEffect("enter_loading"),App.SceneManager.runScene(SceneConsts.Loading)},t.prototype.start=function(){Log.log("当前资源版本：",GameBase.getMainVersion()),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"开始玩命加载资源");var t=["preload","sounds"];App.ResourceUtils.loadGroups("Game_Preload",t,this.onResourceLoadComplete,this.onResourceLoadProgress,this),App.TimerManager.doFrame(1,0,this.updateFrame,this),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version)},t.prototype.onResourceLoadComplete=function(){this._isPreloaded=!0,this._isUpdateComplete=!0,this.checkGamePublic()},t.prototype.checkGamePublic=function(){App.DeviceUtils.IsNative&&HotUpdateMgr.getInstance().checkGameUpdate("public")?HotUpdateMgr.getInstance().loadGameUpdate("public"):this._mHotUpdateEvent.onUpPublicComplete()},t.prototype.addEvent=function(){App.MessageCenter.addListener(GameNative.GameConstInit,this.onGameConstInit,this),App.MessageCenter.addListener(GameNative.GameAndroidBackKey,this.onGameAndroidBackKey,this),App.MessageCenter.addListener(GameNative.GameWebViewHide,this.onGameWebViewHide,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10101),this.onPMDBack,this),App.MessageCenter.addListener(ErrorManager.Error_Msg_Tips_Show,this.onErrorMsgTipsShow,this),App.MessageCenter.addListener("hotUpdateComplete",this.hotUpdateComplete,this)},t.prototype.onGameAndroidBackKey=function(t){Log.log("Click BackKey CallBack ")},t.prototype.onGameConstInit=function(t){Log.log("onGameConstInit:",t);var e=t.split("&&");GameBase.initCurrAppVersion(e[0]),GameBase.initCurrAppMerchant(e[1]),App.IsAppTest="0"==e[2],App.IsDecrypt=!App.IsAppTest,App.setOpenLog(App.IsAppTest),App.checkIphoneX(),GameBase.getDeviceId()||(App.MessageCenter.addListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this),GameNative.sendToNative(GameNative.GameDeviceIdInit,"")),this.updateUrlFirst(),App.MessageCenter.dispatch(GameUpdateEvent.Update_Main_Version),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"开始验证资源版本，请稍等..."),this._mHotUpdateEvent.checkNetWorkOpen()},t.prototype.updateUrlFirst=function(){GameBase.AssetsServerIp||GameBase.saveResoureServerIp(App.GlobalData.ResoureServerUrl),GameBase.GameServerIp||GameBase.saveGameServerIp(App.GlobalData.SocketServer),App.Socket.updateUrl(GameBase.GameServerIp)},t.prototype.onGameDeviceIdInit=function(t){App.MessageCenter.removeListener(GameNative.GameDeviceIdInit,this.onGameDeviceIdInit,this);var e=(new md5).hex_md5(t);GameBase.saveDeviceId(e)},t.prototype.hotUpdateComplete=function(){Log.log("热更新完成2"),GameNative.openInstallEffect("enter_hot_finish"),this._isUpdateComplete=!0,this.start()},t.prototype.onHeart=function(){this._mSocketEvent.onHeart()},t.prototype.onPMDBack=function(t){App.isWebDecorate?(web_broadcast(lobby.BroadcastMgr.analysis(t)),(App.isInDesk||App.isInRoom||App.isInGame)&&App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,t)):App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,t)},t.prototype.updateFrame=function(){if(this._currFrame++,(!(this._currFrame<10)||this._isBegin)&&(this._isBegin||(this._isBegin=!0,this._currFrame=0),this._currFrame>t.Time_Delay)){if(!this._isPreloaded||!this._isUpdateComplete)return;if(App.IsDecrypt&&!UrlPoolMgr.i.isInitUrlsed)return;return App.TimerManager.remove(this.updateFrame,this),void this.enterLobby()}},t.prototype.checkFirstTime=function(t){App.DeviceUtils.IsNative&&app.BuildData.isBuildTime()?this._mAppBuildData.requsetBuildData(function(){function e(t){return!t||!t.agent_id}var i=this._mAppBuildData.getAppBuildData(),o=this._mAppBuildData.getAppOpenData(),n=this._mAppBuildData.getAppClipboardData();if(Log.info("First time param ","bData:",i,"oData:",o,"clipData:",n),!i&&!o&&!n)return void t();var s=App.CommonUtils.isJSON(n)?JSON.parse(n):null;if(e(s)){var r=i.split("#OA&");i=r.length>1?r[1]:i,s=App.CommonUtils.isJSON(i)?JSON.parse(i):null}if(e(s)){var r=o.split("#OA&");o=r.length>1?r[1]:o,s=App.CommonUtils.isJSON(o)?JSON.parse(o):null}if(e(s))return void t();var a=GamePlayerMgr.i;a.saveAgentId(s.agent_id),GamePlayerMgr.i.loginByHistory(),Log.log("First time login:");for(var h in s)Log.log(h,":",s[h])}.bind(this),this):GamePlayerMgr.i.loginByHistory()},t.prototype.enterLobby=function(){GameBase.IsTest?App.SceneManager.runScene(SceneConsts.Login,{isWebClear:!0}):App.IsNative?(App.EasyLoading.showLoading(),this.checkFirstTime(function(){R.setTimeOutOnly(this.checkFirstTime2,this,5e3)}.bind(this))):App.isWebDecorate?web_gameInited():GamePlayerMgr.i.loginByHistory()},t.prototype.checkFirstTime2=function(){this.checkFirstTime(function(){Log.info("代理参数获取失败！"),GamePlayerMgr.i.loginByHistory()}.bind(this))},t.prototype.onResourceLoadProgress=function(t,e){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,t,e),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在玩命加载资源...")},t.prototype.onGameWebViewHide=function(t){Log.log("WebView回到游戏!"),App.setLandscape()},t.prototype.onErrorMsgTipsShow=function(t){App.isInGame||this.showErrorMsg(t)},t.showErrorMsg=function(e){t.i.showErrorMsg(e)},t.prototype.showErrorMsg=function(t){var e=ErrorManager.i.getErrorByData(t);App.isWebDecorate&&(t.description=e,web_errorCallBack(t)),this.showSpecial(t.code,e)||App.PromTipsView.show(e,function(){App.isInLoading&&App.SceneManager.runScene(SceneConsts.Login)},null,this),App.EasyLoading.hideLoading(),(App.isInLogin||App.isInLoading)&&this.closeSocket()},t.prototype.showSpecial=function(t,e){return 999==t||t==ErrorManager.ec.LoggedOnAnotherDevice?(this.closeSocket(),App.PromTipsView.show(e,function(){App.SceneManager.runScene(SceneConsts.Login),(App.isInRoom||App.isInDesk||App.isInGame)&&GameModuleMgr.i.exitRoom()}),!0):998==t||1106==t?(App.PromTipsView.show(e,function(){App.SceneManager.runScene(SceneConsts.Lobby),(App.isInRoom||App.isInDesk||App.isInGame)&&GameModuleMgr.i.exitRoom()}),!0):t==ErrorManager.ec.UnavailableService||t==ErrorManager.ec.ServerMaintain?(App.PromTipsView.show(e,function(){App.MessageCenter.dispatch(GameConsEvent.Game_Maintain_Const,t),App.isInLoading&&App.SceneManager.runScene(SceneConsts.Login)}),!0):(1025==t&&App.PromTipsView.show(e),!1)},t.prototype.closeSocket=function(){App.Socket.isConnecting()&&(this._mSocketEvent.removeHeart(),App.Socket.close())},t.prototype.asyncLoadFz=function(){this._mHotUpdateEvent.asyncLoadFz()},t.gameClear=function(t){void 0===t&&(t=!1),App.isInLogin||(App.PromSuperposeView.hideAll(),App.SceneManager.runScene(SceneConsts.Login,{isWebClear:t}),GameModuleMgr.i.exitRoom())},t._mInstance=null,t.Time_Delay=1e3/33,t}();t.HotGame=e,__reflect(e.prototype,"hot.HotGame");var i=function(){function t(){this._mHeartTimer=null,this._mTimeOutTimes=0,this._mHeartInterval=0}return t.prototype.addEvent=function(){App.MessageCenter.addListener(SocketConst.SOCKET_CLOSE,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_NOCONNECT,this.onSocketClose,this),App.MessageCenter.addListener(SocketConst.SOCKET_CONNECT,this.onSocketConnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_RECONNECT,this.onSocketReconnect,this),App.MessageCenter.addListener(SocketConst.SOCKET_SEND_TIME_OUT,this.onSocketSendTimeOut,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(10002),this.onHeartBack,this)},t.prototype.onSocketConnect=function(){Log.log("socket success"),this.socketConnected()},t.prototype.onSocketReconnect=function(){Log.log("socket reconnect success"),this.socketConnected()},t.prototype.socketConnected=function(){this.startHeart(),GamePlayerMgr.i.relogin(),UrlPoolMgr.i.loginSuccess()},t.prototype.onSocketClose=function(){var t=this;App.DeviceUtils.IsNative?App.IsAppTest?R.checkNetWorkOpen(function(e){"1"==e?t.gameReconnet():t.showReconnetErrorTips()},this):R.ping("www.baidu.com",function(e){"1"==e?t.gameReconnet():t.showReconnetErrorTips()},t):App.isWebPools&&App.IsDecrypt?this.gameReconnet():R.setTimeOutOnly(this.showReconnetTips,this,2e3)},t.prototype.gameReconnet=function(){this.checkGameUrl()||(App.PromTipsView.show("游戏服务器登录失败，请重试或联系客服人员",function(){App.EasyLoading.hideLoading(),e.gameClear()},null,this),App.isWebDecorate&&web_socketClose())},t.prototype.showReconnetErrorTips=function(){var t="检查到网络不可用，是否前往设置？";App.PromTipsView.show(t,function(){GameNative.openNetSetView(),R.setTimeOutOnly(this.showReconnetTips,this,2e3)},function(){R.setTimeOutOnly(this.showReconnetTips,this,500)},this,!0)},t.prototype.checkGameUrl=function(){return UrlPoolMgr.i.ug?(this.removeHeart(),App.EasyLoading.showLoading("正在为您切换最优路线..."),App.Socket.reconnect(),!0):!1},t.prototype.showReconnetTips=function(){App.Socket.close(),App.EasyLoading.hideLoading(),this.removeHeart();var t="服务器连接已断开，是否重连？";App.PromTipsView.show(t,function(){App.EasyLoading.showReconnetTip(),App.Socket.connect()},function(){e.gameClear()},this,!0),App.isWebDecorate&&web_socketClose()},t.prototype.onSocketSendTimeOut=function(){var t=++this._mTimeOutTimes;1==t?this.onHeart():2==t&&(App.EasyLoading.showReconnetTip(),App.Socket.reconnect(),App.PromTipsView.hide())},t.prototype.startHeart=function(){this._mHeartTimer||(this._mHeartTimer=new egret.Timer(25e3,0),this._mHeartTimer.addEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.start()),this.onHeart()},t.prototype.removeHeart=function(){this._mHeartTimer&&(this._mHeartTimer.removeEventListener(egret.TimerEvent.TIMER,this.onHeart,this),this._mHeartTimer.stop(),this._mHeartTimer=null)},t.prototype.onHeart=function(){App.Socket.send({key:10001,body:{}}),this._mHeartInterval=egret.getTimer()},t.prototype.onHeartBack=function(t){var e=t.heartbeat_at,i=egret.getTimer()-this._mHeartInterval;300>i?GameBase.saveCurrServerTime(e):GameBase.getCurrServerTime()<=0&&GameBase.saveCurrServerTime(e+i/2),this._mTimeOutTimes=0},t}();__reflect(i.prototype,"SocketEvent");var o=function(){function t(){this._mArrLoadError={}}return t.prototype.addEvent=function(){App.MessageCenter.addListener(GameNative.GameUpdateProgress,this.onGameUpdateProgress,this),App.MessageCenter.addListener(GameNative.GameUpdateComplete,this.onGameUpdateComplete,this),App.MessageCenter.addListener(GameNative.GameDownloadFail,this.onGameDownloadFail,this),App.MessageCenter.addListener(GameNative.GameDownloadZipFail,this.onGameDownloadZipFail,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.onUpdateGameComplete,this)},t.prototype.checkNetWorkOpen=function(){var t=this;R.checkNetWorkOpen(function(e){"1"==e?t.asyncLoadFz():t.asyncLoadNoNetTips()},this)},t.prototype.asyncLoadNoNetTips=function(){var t=this,e="检查到网络不可用，是否前往设置？";App.PromTipsView.show(e,function(){GameNative.openNetSetView(),t.asyncLoadTips()},function(){GameNative.appGameExit()},this,!0)},t.prototype.asyncLoadTips=function(){R.setTimeOut(function(){var t="服务器获取失败，请检查网络设置后重试";App.PromTipsView.show(t,function(){this.asyncLoadFz()},function(){App.EasyLoading.hideLoading(),GameNative.appGameExit()},this,!0)}.bind(this),this,1e3)},t.prototype.asyncLoadFz=function(){UrlPoolMgr.i.initUrls(),App.TimerManager.doFrame(1,99999,this.asyncLoadFzCC,this)},t.prototype.asyncLoadFzCC=function(){UrlPoolMgr.i.isInitUrlsed&&(App.TimerManager.remove(this.asyncLoadFzCC,this),App.DeviceUtils.IsNative&&this.startCheckHotUpdate())},t.prototype.startCheckHotUpdate=function(){UrlPoolMgr.i.u(this.hotUpdate,this.asyncLoadFzCCError,this)},t.prototype.asyncLoadFzCCError=function(){var t="更新包获取失败，请联系客服人员";App.PromTipsView.show(t,function(){GameNative.appGameExit()},null,this)},t.prototype.hotUpdate=function(){App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,"正在获取版本信息..."),HotUpdateMgr.getInstance().checkUpdate(this.hotUpdateComplete,this.hotUpdateError,this)},t.prototype.hotUpdateComplete=function(){Log.log("热更新完成1"),App.MessageCenter.dispatch("hotUpdateComplete")},t.prototype.onUpdateGameComplete=function(t){var e=GameModuleMgr.i.getGameByName(t);e&&App.ScrollTxtTips.showTip(e.gameName+"游戏下载更新完成")},t.prototype.hotUpdateError=function(){R.setTimeOut(function(){var t="服务器获取失败，请检查网络设置后重试";
App.PromTipsView.show(t,function(){this.hotUpdate()},function(){App.EasyLoading.hideLoading(),GameNative.appGameExit()},this,!0)}.bind(this),this,2e3)},t.prototype.onUpPublicComplete=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Public_Complete,this.onUpPublicComplete,this),GameBase.mIsPublicDownloaded=!0},t.prototype.onGameUpdateProgress=function(t){var e=t.split("&"),i=e[3],o=i.indexOf("games")>-1?"games":"main",n=i.indexOf("newApk")>-1,s=parseInt(e[1]),r=parseInt(e[2]);if("main"==o){App.ControllerManager.applyFunc(ControllerConst.Loading,LoadingConst.SetProgress,s,r);var a=(s/1024/1024).toFixed(2)+"M/"+(r/1024/1024).toFixed(2)+"M",h="正在玩命下载更新..."+a;n&&(h="正在玩命下载新版本安装包..."+a),App.MessageCenter.dispatch(GameUpdateEvent.Update_Loading_Event,h)}else{var l=i.split("/"),p=l[l.indexOf("games")+1];Log.log("游戏",p,"下载：",Math.floor(s/r*100)),App.MessageCenter.dispatch(GameUpdateEvent.Update_Game_Module_Progress,{gameName:p,progress:s,total:r})}},t.prototype.onGameUpdateComplete=function(t){Log.log("热更新完成："),HotUpdateMgr.getInstance().saveVersion(t)},t.prototype.onGameDownloadFail=function(t){Log.log("文件下载失败！",t),this.checkNet(t,"下载")},t.prototype.onGameDownloadZipFail=function(t){Log.log("文件解压失败！",t),this.checkNet(t,"解压")},t.prototype.checkNet=function(t,e){var i=this;App.IsAppTest?R.checkNetWorkOpen(function(o){"1"==o?i.pDownloadZipFail(t,e):i.noNetworkTips(t,e)},i):R.ping("www.baidu.com",function(o){"1"==o?i.pDownloadZipFail(t,e):i.noNetworkTips(t,e)},i)},t.prototype.noNetworkTips=function(t,e){var i=this,o="检查到网络不可用，是否前往设置？";App.PromTipsView.show(o,function(){GameNative.openNetSetView(),i.pDownloadZipFail(t,e)},function(){GameNative.appGameExit()},this,!0)},t.prototype.pDownloadZipFail=function(t,e){var i=App.CommonUtils.getFileName(t),o=this._mArrLoadError[i]?this._mArrLoadError[i]:0;if(o>5)return App.PromTipsView.show("安装包可能已损坏，请卸载后重新安装!"),void GameNative.appGameExit();var n=t.split("/"),s=n[n.indexOf("games")+1],r=s?GameModuleMgr.i.getGameByName(s):null,a=r?r.gameName:"主";App.PromSuperposeView.show("["+a+"]更新文件"+e+"失败，请重试",function(t){GameNative.sendToNative(GameNative.GameStartUpdate,t.url)},null,this,!1,{url:t}),this._mArrLoadError[i]=++o},t}();__reflect(o.prototype,"HotUpdateEvent")}(hot||(hot={}));var common;!function(t){var e=function(){function t(){t.CoinPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createCoin=function(){var e=t.CoinPool.pop();return e||(e=new i),e.init(),e},t.prototype.releaseCoin=function(e){egret.is(e,"Coin")&&(e.isRelease||(e.clear(),t.CoinPool.unshift(e)))},t.prototype.clear=function(){for(;t.CoinPool.length;)t.CoinPool.pop().destroy()},t._i=null,t.CoinPool=null,t}();t.CoinFactory=e,__reflect(e.prototype,"common.CoinFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._isRelease=!1,e.skinName="CoinSkin",e}return __extends(e,t),e.prototype.init=function(){this._isRelease=!1},e.prototype.refresh=function(t,e,i,o){this.coinSrc.source=t,this.coinText.text=""+e,i&&(this.x=i),o&&(this.y=o)},Object.defineProperty(e.prototype,"isRelease",{get:function(){return this._isRelease},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._isRelease=!0,this.coinSrc.source=void 0,this.coinSrc.texture=void 0,R.removeFromParent(this),egret.Tween.removeTweens(this)},e.prototype.destroy=function(){this.clear()},e}(eui.Component);__reflect(i.prototype,"Coin")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"GameSetSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initSet=function(){this.openMusic(),this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.effectBox.selected=GamePlayerMgr.i.isOpenEffect},e.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},e.prototype.showPopup=function(){this.visible=!0,this.SetBg.visible=!0,this.SetMenu.scaleX=this.SetMenu.scaleY=0,App.EffectUtils.showUI(this.SetMenu)},e.prototype.closePoput=function(){this.SetBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.SetMenu,200,0,function(){t.visible=!1})},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.onOpen=function(t){App.SoundManager.playEffect("click_mp3")},e.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0)},e.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0)},e.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1)},e.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.removeEvent=function(){this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.SetClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this.ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this.ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"common.GameSet")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"JeButtonSkin")||this;return i.initBet=!1,i._chipList=[],i}return __extends(i,e),i.prototype.createChip=function(e){this.reMoveChip();for(var i=0;5>i;i++){var o=e[i],n=this["_btn_"+i],s=t.chipBtn.create();s.init(o),s.x=0,s.y=0,n.addChild(s),this._chipList.push(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,i,o),this)}this.initBet=!0},i.prototype.reMoveChip=function(){for(;this._chipList.length;){var e=this._chipList.pop();e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.chipBtn.release(e)}},i.prototype.touchBtn=function(t,e){App.SoundManager.playEffect("click_mp3"),this.initBet&&this.applyFunc("touch",t,e)},i.prototype.setBtnChip=function(t){if(this._chipList.length)for(var e=0;e<this._chipList.length;e++){var i=this._chipList[e];i.setBtnChip(t[e]),i.setBtnValue(t[e])}},i.prototype.getBtnNum=function(t){return Math.pow(10,t)},i.prototype.toggleBtn=function(t){this.initBet&&(this.resetBtn(),this.GroupBtn.getChildAt(t).y=-12,this._chipList[t].BtnLight.alpha=1)},i.prototype.resetBtn=function(){var t=this._chipList;if(this.initBet)for(var e=0;e<t.length;e++)this.GroupBtn.getChildAt(e).y=3,t[e].BtnLight.alpha=0},i.prototype.disabledBtn=function(){this._chipList;if(this.initBet){this.resetBtn();for(var t=0;5>t;t++)this._chipList[t].BtnShade.alpha=1,this.GroupBtn.getChildAt(t).touchChildren=!1,this._chipList[t].BtnLight.alpha=0}},i.prototype.enableBtn=function(){var t=this._chipList;if(this.initBet)for(var e=0;e<t.length;e++)t[e].BtnShade.alpha=0,this.GroupBtn.getChildAt(e).touchChildren=!0},i.prototype.chiplight=function(t){this.initBet&&(this._chipList[t].BtnShade.alpha=0,this.GroupBtn.getChildAt(t).touchChildren=!0)},i.prototype.ShowHandBtn=function(t){this.applyFunc("ShowHandBtn",t)},i.prototype.ShowHandlightBtn=function(){},i.prototype.setchipValue=function(t){var e=this._chipList;if(this.initBet){for(var i=0;i<e.length;i++)e[i].setBtnText(t);this.getChipValue(t)}},i.prototype.getChipValue=function(t){var e=[],i=0,o=this._chipList;if(this.initBet){for(var n=0;n<o.length;n++)i=o[n].getChipNum(t),e.push(i);this.applyFunc("getChipValue",e)}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.reMoveChip(),this.removeEvent(),this.reMoveChip()},i}(BaseEuiComponent);t.JeButton=e,__reflect(e.prototype,"common.JeButton")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"LogicBtnSkin")||this;return i.BtnType=0,i._maskRct=new egret.Rectangle(0,233,30,233),i._rectYYlist=[],i}return __extends(e,t),e.prototype.open=function(){this._closeUI.visible=!1,this._mandi.mask=this._maskRct,this.setAutoConfirm(!0)},e.prototype.confirmBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("confirmBet")},e.prototype.disabledConfirmBet=function(){this.ComfirmBet.enabled=!1},e.prototype.enabledConfirmBet=function(){this.ComfirmBet.enabled=!0},e.prototype.autoConfirm=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("setAutoBet",this.AutoConfirm.selected),this.confirmFrame()},e.prototype.conserBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("conserBet")},e.prototype.disabledConserBet=function(){this.ConserBet.enabled=!1},e.prototype.enabledConserBet=function(){this.ConserBet.enabled=!0},e.prototype.setAutoConfirm=function(t){this.AutoConfirm.selected=t},e.prototype.trueBet=function(t){this.ComfirmBet.enabled=!t},e.prototype.betAsh=function(){this.ConserBet.enabled=!1,this.ComfirmBet.enabled=!1},e.prototype.confirmFrame=function(){App.SoundManager.playEffect("click_mp3");var t=this.AutoConfirm.selected;0==t?egret.Tween.get(this._confirmList).to({x:0},100):this.closeConfirmFrame()},e.prototype.closeConfirmFrame=function(){egret.Tween.get(this._confirmList).to({x:221},100)},e.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},e.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):(this._closeUI.visible=!1,egret.Tween.get(this.MenuBox0).to({y:297},100)),this.applyFunc("operateAddcounter")},e.prototype.moveMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.setVSlide=function(t){this._thumb.y=t},e.prototype.setCoordinate=function(t,e,i){var o=i?t-18.62:t-28.5,n=i?t-6.62:t-17.5,s=i?t+12.5:t;this.setVSlide(o),this.setMask(s),this.setCardCoordinate(n,e)},e.prototype.setENDCoordinate=function(t,e){for(var i=0;i<this._rectYYlist.length;i++)t>=236?(t=e?this._rectYYlist[0]:235,this.setCoordinate(t,0,e)):t>=this._rectYYlist[9]&&t<this._rectYYlist[8]||t<this._rectYYlist[9]?(t=e?this._rectYYlist[9]:10,this.setCoordinate(t,9,e)):t>=this._rectYYlist[i]&&t<this._rectYYlist[i-1]&&(t=e?this._rectYYlist[i]:t,this.setCoordinate(t,i,e))},e.prototype.setCardCoordinate=function(t,e){var i=e+1;this._LabelMutiple0.text=i+"倍",this._GroupTip.y=t,this.applyFunc("changeMultiple",i)},e.prototype.countHeight=function(t){return this._rect_0.y-Number(this._rect_0.height/2)-t},e.prototype.smailBoxnate=function(){for(var t=0;10>t;t++)this._rectYYlist.push(this["_rect_"+t].y)},e.prototype.beginMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.endMeun=function(t){var e=t.localY,i=!0;this.setENDCoordinate(e,i),this.retractMenu()},e.prototype.outMeun=function(t){var e=t.localY;if(e>0){var i=235,o=!0;this.setENDCoordinate(i,o)}else{var n=this._rectYYlist[9]+10,o=!0;this.setENDCoordinate(n,o)}},e.prototype.setMask=function(t){var e=233-(251-t);0>=e?e=0:e>=233&&(e=233),this._maskRct.y=e,this._mandi.mask=this._maskRct},e.prototype.ShowsetChip=function(t){this.applyFunc("ShowsetChip")},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0},e.prototype.testtest=function(){},e.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},e.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.btnAutoConfirm=function(){this.AutoConfirm.selected=this.AutoConfirm.selected?!1:!0,this.autoConfirm()},e.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ComfirmBet,this.confirmBet,this),App.CommonUtils.effectButton(this.ConserBet,this.conserBet,this),App.CommonUtils.effectButton(this.RepeatBet,this.repeatBet,this),App.CommonUtils.effectButton(this._plusbtn,this.showMenu,this),App.CommonUtils.effectButton(this._setChip,this.ShowsetChip,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this.btnAuto.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this),this.smailBoxnate()},e.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ComfirmBet),App.CommonUtils.removeButton(this.ConserBet),App.CommonUtils.removeButton(this.RepeatBet),App.CommonUtils.removeButton(this._plusbtn),App.CommonUtils.removeButton(this._setChip),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this.btnAuto.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnAutoConfirm,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.LoginBtn=e,__reflect(e.prototype,"common.LoginBtn")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"LotteryRecord")||this;return i.isCreateEnd=!1,i.visible=!1,i}return __extends(i,e),i.prototype.initUI=function(){var e=new eui.VerticalLayout;this.gameList.layout=e,this.scrollerItem.viewport=this.gameList,this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.OFF,this.gameList.itemRenderer=t.LotteryRecordItem,this.tempCollection=new eui.ArrayCollection},i.prototype.showPopup=function(){this.visible=!0,this.Bg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},i.prototype.closePoput=function(){this.Bg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.Menu,300,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.onMouseWheel=function(e){t.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,e.data)},i.prototype.refreshData=function(t){t.length&&(this.isCreateEnd=!1,this.tempCollection.refresh(),this.tempCollection.replaceAll(t),this.gameList.dataProvider=this.tempCollection,this.tempCollection.refresh())},i.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<24?e.scrollV=0:t.localY>e.height-24?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-48)*(t.localY-24)},i.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},i.prototype.LotteryRecordCreated=function(){this.isCreateEnd||(this.isCreateEnd=!0,this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBg.visible=!0,this.ScrollBox.touchEnabled=!0))},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.Close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(t.PublicConsts.LotteryRecordCreated,this.LotteryRecordCreated,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.Close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(t.PublicConsts.LotteryRecordCreated,this.LotteryRecordCreated,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.tempCollection=void 0},i}(BaseEuiComponent);t.LotteryRecord=e,__reflect(e.prototype,"common.LotteryRecord")}(common||(common={}));var common;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return App.MessageCenter.dispatch(t.PublicConsts.LotteryRecordCreated),i}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(0==this.data.order?(this.FirstIssue.text=this.data.issue,this.FirstNumber.text=this.data.number,this.FirstResult.text=this.data.result,this.FirstResult.textColor=0==this.data.textColor?11931166:1==this.data.textColor?466603:363304,this.GroupFirst.visible=!0,this.GroupOther.visible=!1):(this.OtherIssue.text=this.data.issue,this.OtherNumber.text=this.data.number,this.OtherResult.text=this.data.result,this.OtherResult.textColor=0==this.data.textColor?11931166:1==this.data.textColor?466603:363304,this.GroupFirst.visible=!1,this.GroupOther.visible=!0))},i}(eui.ItemRenderer);t.LotteryRecordItem=e,__reflect(e.prototype,"common.LotteryRecordItem")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"MessageInfoSkin")||this;return i.GroupMoneyLight=[],i._mResultPoint=new egret.Point,i}return __extends(i,e),i.prototype.setPluteLelf=function(){App.OffsetLeft(this.leftFive)},i.prototype.setUserName=function(t){this.UserName.text=t},i.prototype.setUserImage=function(t){this.UserImage.source=t},i.prototype.setUserFrame=function(t){this.UserFrame.source=t},i.prototype.setUserMoney=function(t){this.UserMoney.text=t+""},i.prototype.setUserBet=function(t){this.hibebetUser(),this.UserBet.visible=!0,this.UserBet.text=t},i.prototype.setMulUserBet=function(t,e){this.hibebetUser(),this.MulUserBet.visible=!0,this.MulUserBet.text=t+"（押"+e+"）"},i.prototype.resetBetMoney=function(){this.UserBet.text="",this.MulUserBet.text=""},i.prototype.hibebetUser=function(){this.UserBet.visible=!1,this.MulUserBet.visible=!1},i.prototype.avatarShake=function(t){var e=this["_Plute"+t],i=(e.x,0);i=1>=t||4==t?10:-10,egret.Tween.get(e).to({rotation:i},50).call(function(){egret.Tween.get(e).to({rotation:0},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.setPluteImage=function(t,e){this["PluteImage"+e].source=t},i.prototype.setPluteName=function(t,e){this["PluteName"+e].text=t},i.prototype.specialPlayerMoney=function(t,e){this["PluteMoney"+e].text=t+""},i.prototype.getSpecialPlayerMoney=function(t){return Number(this["PluteMoney"+t].text)},i.prototype.playerWinMoney=function(t,e){this["PluteWinMoney"+e].text="+"+t},i.prototype.playerDisplay=function(t){this.allPlayerDisplay();for(var e=0;t+1>e;e++)this["Plute"+e].visible=!0},i.prototype.allPlayerDisplay=function(){for(var t=0;4>t;t++)this["Plute"+t].visible=!1},i.prototype.getPoint=function(){return this.localToGlobal(this.starPos.x,this.starPos.y,this._mResultPoint),this._mResultPoint},i.prototype.initInfo=function(){for(var t=0;5>t;t++)this["PluteWinMoney"+t].alpha=0,this["PluteWinMoney"+t].scaleX=.5,this["PluteWinMoney"+t].scaleY=.5,egret.Tween.removeTweens(this["PluteWinMoney"+t]),R.removeAllTimeOut(this)},i.prototype.fontEnlarge=function(t){var e=this["PluteWinMoney"+t];egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({y:e.y-50,alpha:0},300,egret.Ease.sineInOut).call(function(){e.y=e.y+50}.bind(this))},this,1200)},i.prototype.directFontEnlarge=function(t){var e=this["PluteWinMoney"+t];e.alpha=1,e.scaleX=1,e.scaleY=1,R.setTimeOnce(function(){this.initInfo()},this,3e3)},i.prototype.getMoneyLight=function(e){var i=t.comBones.create();if(this.GroupMoneyLight.push(i),!i.parent){var o=void 0,n=void 0;4==e?(o=this.GroupInfo,n=this.UserImage):(o=this["_Plute"+e],n=this["PluteImage"+e]),o.addChild(i),i.updateId("money_linght"),i.blendMode=egret.BlendMode.ADD;var s=n.x+44,r=n.y+44.5;i.setPosition(s,r),i.play(1),i.addPlayEndCallBack(function(){i&&i.parent&&t.comBones.realese(i)}.bind(this),this),this.fontEnlarge(e)}},i.prototype.clearAllMoneyLight=function(){for(;this.GroupMoneyLight.length;){var e=this.GroupMoneyLight.pop();t.comBones.realese(e)}},i.prototype.flyCoordinate=function(){for(var t=[],e=0;5>e;e++){var i=this["starPos"+e];i=4>e?this["PluteImage"+e]:this.UserImage;var o=this.localToGlobal(i.x,i.y);t.push(o)}return t},i.prototype.setInformation=function(t,e,i){if(t){0==t.avatar&&(t.avatar=1),this["PluteImage"+e].source="ui_headImg_"+t.avatar,this["PluteName"+e].text=t.nickname,this["Plute"+e].visible=!0,this.specialPlayerMoney(App.CommonUtils.money2Str(t.userbalance),e);for(var o=3;o>=i;o--)this["Plute"+o].visible=!1}},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),this.initInfo(),this._mResultPoint=void 0},i}(BaseEuiComponent);t.MessageInfo=e,__reflect(e.prototype,"common.MessageInfo")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"MutipleScrollerSkin")||this;return i.BtnType=0,i}return __extends(e,t),e.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this.applyFunc("openVSlider"),egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:315},100)},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:315},100),this.BtnType=0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},e.prototype.removeEvent=function(){this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.MutipleScrller=e,__reflect(e.prototype,"common.MutipleScrller")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"PromptSkin")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.closePoput=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,App.SoundManager.playEffect("click_mp3"),egret.Tween.get(this.PromptMenu).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.prompIsShow||(this.visible=!1)}.bind(this))},e.prototype.closeTip=function(){this.PromptBg.visible=!1,this.prompIsShow=!1,egret.Tween.get(this.PromptTip).to({scaleX:0,scaleY:0},200,egret.Ease.sineInOut).call(function(){this.visible=!1}.bind(this))},e.prototype.confirmPoput=function(){App.SoundManager.playEffect("click_mp3"),this.closePoput(),1==this.promptType?this.applyFunc("confirmLimitBet"):2==this.promptType?this.applyFunc("confirmShowhand"):4==this.promptType?this.applyFunc("confirmShowLimitBet"):6==this.promptType&&this.applyFunc("confirmShowRecharge")},e.prototype.showPrompt=function(t,e,i,o){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 1:this.renderType1(e,i,o);break;case 2:this.renderType2(e);break;case 3:this.renderType3(),R.setTimeOnce(function(){this.closePoput()}.bind(this),this,1500)}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this.PromptMenu),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},e.prototype.renderText=function(){this.visible=!0},e.prototype.renderType1=function(t,e,i){this.BtnBox.visible=!0;var o=this.getTextField(39);o.textFlow=[{text:"当前牌桌投注限红为"},{text:e+""},{text:"~"},{text:i+""}],o.x=this.TextBox.width/2-o.textWidth/2,this.TextBox.addChild(o);var n=this.getTextField(80);n.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(n),n.x=this.TextBox.width/2-n.textWidth/2},e.prototype.renderType2=function(t){this.BtnBox.visible=!0;var e=this.getTextField(39);e.textFlow=[{text:"投注金额 "},{text:t,style:{textColor:16045931}}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e);var i=this.getTextField(80);i.textFlow=[{text:"是否梭哈?"}],this.TextBox.addChild(i),i.x=this.TextBox.width/2-i.textWidth/2},e.prototype.renderType3=function(){this.BtnBox.visible=!1;var t=this.getTextField(87);t.textFlow=[{text:"当前牌桌投注限红为"},{text:1e3},{text:"~"},{text:1e4}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},e.prototype.getTextField=function(t){var e=new egret.TextField;return e.y=t,e.fontFamily="Microsoft YaHei",e.size=22,e.textColor=16777215,e.textAlign=egret.HorizontalAlign.CENTER,e},e.prototype.showPromptBrnn=function(t,e){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 4:this.renderBrnnType4(e);break;case 6:this.renderBrnnType6()}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,egret.Tween.removeTweens(this.PromptMenu),egret.Tween.get(this.PromptMenu).to({scaleX:1,scaleY:1},200,egret.Ease.sineInOut)},e.prototype.renderBrnnType4=function(t){this.BtnBox.visible=!0;var e=this.getTextField(39);e.textFlow=[{text:"当前牌桌投注限红为"},{text:1},{text:"~"},{text:1e5}],e.x=this.TextBox.width/2-e.textWidth/2,this.TextBox.addChild(e);var i=this.getTextField(80);i.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(i),i.x=this.TextBox.width/2-i.textWidth/2},e.prototype.renderBrnnType6=function(){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"余额不足，是否前往充值？"}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},e.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.Prompt=e,__reflect(e.prototype,"common.Prompt")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){var i=t.call(this,"PulsBtn")||this;return i.BtnType=0,i._maskRct=new egret.Rectangle(0,233,30,233),i._rectYYlist=[],i._closeUI.visible=!1,i._mandi.mask=i._maskRct,i}return __extends(e,t),e.prototype.repeatBet=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc("repeatBet")},e.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(this._closeUI.visible=!0,egret.Tween.get(this.MenuBox0).to({y:0},100)):egret.Tween.get(this.MenuBox0).to({y:297},100)},e.prototype.moveMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.setVSlide=function(t){this._thumb.y=t},e.prototype.setCoordinate=function(t,e,i){var o=i?t-18.62:t-28.5,n=i?t-6.62:t-17.5,s=i?t+12.5:t;this.setVSlide(o),this.setMask(s),this.setCardCoordinate(n,e)},e.prototype.setENDCoordinate=function(t,e){for(var i=0;i<this._rectYYlist.length;i++)t>=236?(t=e?this._rectYYlist[0]:235,this.setCoordinate(t,0,e)):t>=this._rectYYlist[9]&&t<this._rectYYlist[8]||t<this._rectYYlist[9]?(t=e?this._rectYYlist[9]:10,this.setCoordinate(t,9,e)):t>=this._rectYYlist[i]&&t<this._rectYYlist[i-1]&&(t=e?this._rectYYlist[i]:t,this.setCoordinate(t,i,e))},e.prototype.setCardCoordinate=function(t,e){var i=e+1;this._LabelMutiple0.text=i+"倍",this._GroupTip.y=t,this.applyFunc("changeMultiple",i)},e.prototype.countHeight=function(t){return this._rect_0.y-Number(this._rect_0.height/2)-t},e.prototype.smailBoxnate=function(){for(var t=0;10>t;t++)this._rectYYlist.push(this["_rect_"+t].y)},e.prototype.beginMeun=function(t){var e=t.localY,i=!1;this.setENDCoordinate(e,i)},e.prototype.endMeun=function(t){var e=t.localY,i=!0;this.setENDCoordinate(e,i),this.retractMenu()},e.prototype.outMeun=function(t){var e=t.localY;if(e>0){var i=235,o=!0;this.setENDCoordinate(i,o)}else{var n=this._rectYYlist[9]+10,o=!0;this.setENDCoordinate(n,o)}},e.prototype.setMask=function(t){var e=233-(251-t);0>=e?e=0:e>=233&&(e=233),this._maskRct.y=e,this._mandi.mask=this._maskRct},e.prototype.ShowsetChip=function(t){this.applyFunc("ShowsetChip")},e.prototype.retractMenu=function(){egret.Tween.get(this.MenuBox0).to({y:297},100),this._closeUI.visible=!1,this.BtnType=0},e.prototype.testtest=function(){},e.prototype.disabledRepeatBet=function(){this.RepeatBet.enabled=!1},e.prototype.enabledRepeatBet=function(){this.RepeatBet.enabled=!0},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.RepeatBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.addEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._trackHighlight.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.outMeun,this),this._setChip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this),this.smailBoxnate()},e.prototype.removeEvent=function(){this.RepeatBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.repeatBet,this),this._closeUI.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.retractMenu,this),this._plusbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.moveMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginMeun,this),this._trackHighlight.removeEventListener(egret.TouchEvent.TOUCH_END,this.endMeun,this),this._setChip.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ShowsetChip,this)
},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.PulsBtn=e,__reflect(e.prototype,"common.PulsBtn")}(common||(common={}));var common;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=""+App.CommonUtils.money2Str(this.data.win_money),this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="ui_common_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="ui_common_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.RankIcon=e,__reflect(e.prototype,"common.RankIcon")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"RankingSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1,this.visible=!0,this.RankBg.visible=!0,this.RankMenu.scaleX=this.RankMenu.scaleY=0,App.EffectUtils.showUI(this.RankMenu,300,0,1,function(){this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBg.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBg.visible=!0,this.ScrollBox.touchEnabled=!0),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},i.prototype.closePoput=function(){this.RankBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.RankMenu,300,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/public/skins/RankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(t){this.scrollerItem.stopAnimation(),this.ScrollBox.width=850,this.ScrollBox.x=0;var e=this.scrollerItem.viewport;t.localY<24?e.scrollV=0:t.localY>e.height-24?e.scrollV=this.gameList.contentHeight-e.height:e.scrollV=(this.gameList.contentHeight-e.height)/(e.height-48)*(t.localY-24)},i.prototype.onMouseWheel=function(e){t.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,e.data)},i.prototype.touchEnd=function(){this.ScrollBox.width=34,this.ScrollBox.x=608},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){this.RankClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){this.RankClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.Ranking=e,__reflect(e.prototype,"common.Ranking")}(common||(common={}));var common;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.Issue.text=this.data.issue,this.Winning.text=""+this.data.hit_money)},e}(eui.ItemRenderer);t.RecordIcon=e,__reflect(e.prototype,"common.RecordIcon")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"SetChip")||this;return i.BtnType=0,i.selectPos={},i.pickPos={},i._chipList=[],i._fiyChip=[],i.visible=!1,i._fiyChip=[],i}return __extends(i,e),i.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.pickChip.scaleX=this.pickChip.scaleY=0,this.visible=!0,App.EffectUtils.showUI(this.pickChip)},i.prototype.closePopup=function(){this.retractMenu()},i.prototype.confirmPoput=function(){this._fiyChip.length>=5?(this.applyFunc("getFiveChip",this._fiyChip),this.retractMenu()):App.ScrollTxtTips.showTip("请选择5个筹码，再点击确定，谢谢。")},i.prototype.retractMenu=function(){var t=this;App.EffectUtils.hideUI(this.pickChip,200,0,function(){t.visible=!1})},i.prototype.createChip=function(){for(var e=0;10>e;e++){var i=t.chipBtn.create();i.init(e),i.x=this.pickPos[e].x,i.y=this.pickPos[e].y,this.GroupBtn.addChild(i),this._chipList.push(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn.bind(this,e),this)}},i.prototype.touchBtn=function(t){if(App.SoundManager.playEffect("click_mp3"),this._fiyChip.length<6){for(var e=0;e<this._fiyChip.length;e++)if(this._fiyChip[e]==t)return this._fiyChip.splice(e,1),this.setFlyPos(),void this.flyChip(t);this._fiyChip.length<5&&(this._fiyChip.push(t),this.setFlyPos(),this.flyChip(t))}},i.prototype.getFiveChip=function(){return this._fiyChip},i.prototype.initChip=function(){for(var t=0;t<this._fiyChip.length;t++){var e=this._fiyChip[t],i=this._chipList[e],o=this.pickPos[e].x,n=this.pickPos[e].y;i.x=o,i.y=n}this._fiyChip=[]},i.prototype.getcoordinate=function(){for(var t=this._pickChip,e=this._pickChip0,i=this._selectChip,o=0;5>o;o++)this.pickPos[o+0]={x:t.x+99.67*o,y:t.y},this.pickPos[o+5]={x:e.x+99.67*o,y:e.y},this.selectPos[o+0]={x:i.x+105.35*o,y:i.y}},i.prototype.flyChip=function(t){var e=0,i=0;if(-1==this._fiyChip.indexOf(t)){this.initialPos(t);for(var o=0;o<this._fiyChip.length;o++)this.horizontalMove(o)}else for(var n=0;n<this._fiyChip.length;n++){var s=this._chipList[t];this._fiyChip[n]==t?(e=this.selectPos[n].x,i=this.selectPos[n].y,egret.Tween.get(s).to({x:e,y:i},300,egret.Ease.sineInOut)):this.horizontalMove(n)}},i.prototype.initialPos=function(t){var e=this._chipList[t],i=this.pickPos[t].x,o=this.pickPos[t].y;egret.Tween.get(e).to({x:i,y:o},300,egret.Ease.sineInOut)},i.prototype.horizontalMove=function(t){var e=this._chipList[this._fiyChip[t]],i=this.selectPos[t].x,o=this.selectPos[t].y;egret.Tween.get(e).to({x:i,y:o},300,egret.Ease.sineInOut)},i.prototype.setFlyPos=function(){this._fiyChip.length>=2&&this._fiyChip.sort()},i.prototype.setDefaultChip=function(t){this.initChip();for(var e=0;e<t.length;e++){var i=t[e],o=this._chipList[i];o.x=this.selectPos[e].x,o.y=this.selectPos[e].y}this._fiyChip=[].concat(t)},i.prototype.clearChip=function(){for(var e=this._chipList;e.length;){var i=e.pop();i&&t.chipBtn.release(i)}},i.prototype.clearflyChip=function(){this._fiyChip.length=0},i.prototype.addEvent=function(){this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},i.prototype.removeEvent=function(){this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this),this._mask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearChip(),this.clearflyChip(),this.selectPos={},this.pickPos={},t.chipBtn.cleanchipBtnPool()},i}(BaseEuiComponent);t.SetChip=e,__reflect(e.prototype,"common.SetChip")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"ToolBarSkin")||this;return i.BtnType=0,i._approach=null,i.boneList=[],i.boneName=["light","sweep"],i}return __extends(i,e),i.prototype.initComponent=function(t,i){e.prototype.initComponent.call(this,t,i),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate},i.prototype.setOnlineLelf=function(){App.OffsetLeft(this.leftFive)},i.prototype.showMenu=function(t){var e=t.currentTarget;this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(e.source="ui_set_json.common_ui_xlh",egret.Tween.get(this.MenuBox).to({y:0},100)):(e.source="ui_set_json.common_ui_xl",egret.Tween.get(this.MenuBox).to({y:-245},100)),this.applyFunc("btnShowMenu")},i.prototype.moveCharge=function(){this.GroupRechage.right=112},i.prototype.changeOnlineNum=function(t){this.OnlineNum.text=t},i.prototype.hideBtnOnlineNum=function(){this.BtnOnline.visible=!1},i.prototype.backToLobby=function(){this.applyFunc("backToLobby")},i.prototype.showHelp=function(){this.applyFunc("showHelp")},i.prototype.showRank=function(){this.applyFunc("showRank")},i.prototype.showRecord=function(){this.applyFunc("showRecord")},i.prototype.showGameSet=function(){this.applyFunc("showGameSet")},i.prototype.rechargeMoney=function(){this.applyFunc("rechargeMoney")},i.prototype.onlineShake=function(){var t=this.BtnOnline,e=t.x,i=10,o=15;egret.Tween.get(t).to({rotation:i,x:o},50).call(function(){egret.Tween.get(t).to({rotation:0,x:e},50,egret.Ease.sineInOut)}.bind(this))},i.prototype.getAllMoneyLight=function(){var e=t.comBones.create();if(!e.parent){this.BtnOnline.addChild(e),e.updateId("money_linght"),e.blendMode=egret.BlendMode.ADD;var i=this.BtnOnline.getChildAt(0).x+44,o=this.BtnOnline.getChildAt(0).y+44.5;e.setPosition(i,o),e.play(1),e.addPlayEndCallBack(function(){e&&e.parent&&t.comBones.realese(e)},this)}},i.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},i.prototype.diceInit=function(){if(!this.boneList.length)for(var e=0;2>e;e++){var i=t.comBones.create();this.boneList.push(i)}},i.prototype.diceInitRenders=function(){for(var t=0;2>t;t++)if(!this.boneList[t].parent){var e=this.boneName[t];this.moneyGroup.addChild(this.boneList[t]),this.boneList[t].updateId(e);var i=43.5,o=43.5;this.boneList[t].setPosition(i,o),this.boneList[t].play(0)}},i.prototype.individualAward=function(){for(var e=function(){var e=new t.comBones,n="sweep"+o;e.updateId(n),i.moneyGroup.addChild(e);var s=i._recharge.x,r=i._recharge.y;e.setPosition(s,r),e.play(1),e.addPlayEndCallBack(function(){e.parent&&this.moneyGroup.removeChild(e)},i)},i=this,o=0;2>o;o++)e()},i.prototype.clearbone=function(){for(var e=this.boneList;e.length;){var i=e.pop();t.comBones.realese(i)}},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this,{}),App.CommonUtils.effectButton(this.BtnOnline,this.showRank,this,{}),App.CommonUtils.effectButton(this.BtnRecord,this.showRecord,this,{}),App.CommonUtils.effectButton(this.BtnSet,this.showGameSet,this,{}),App.CommonUtils.effectButton(this.BtnBack,this.backToLobby,this,{}),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this,{}),App.CommonUtils.effectButton(this.moneyGroup,this.rechargeMoney,this,{})},i.prototype.removeEvent=function(){App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.BtnOnline),App.CommonUtils.removeButton(this.BtnRecord),App.CommonUtils.removeButton(this.BtnSet),App.CommonUtils.removeButton(this.BtnBack),App.CommonUtils.removeButton(this.BtnHelp),App.CommonUtils.removeButton(this.moneyGroup)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this._approach&&(this._approach.clean(),this._approach.destroy(),this._approach=void 0),App.TimerManager.removeAll(this),this.clearbone()},i}(BaseEuiComponent);t.ToolBar=e,__reflect(e.prototype,"common.ToolBar")}(common||(common={}));var common;!function(t){var e=function(t){function e(e){return t.call(this,"VSliderSkin")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(BaseEuiComponent);t.VSliderSkin=e,__reflect(e.prototype,"common.VSliderSkin")}(common||(common={}));var common;!function(t){var e=function(e){function i(t){var i=e.call(this,"WinningRecordSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.visible=!0,this.RecordBg.visible=!0,this.RecordMenu.scaleX=this.RecordMenu.scaleY=0,App.EffectUtils.showUI(this.RecordMenu,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)}.bind(this))},i.prototype.closePoput=function(){this.RecordBg.visible=!1,App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideUI(this.RecordMenu,200,0,function(){t.visible=!1}),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/public/skins/RecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.onMouseWheel=function(e){t.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,e.data)},i.prototype.addEvent=function(){this.RecordClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.removeEvent=function(){this.RecordClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.WinningRecord=e,__reflect(e.prototype,"common.WinningRecord")}(common||(common={}));var common;!function(t){var e=function(){function t(){}return t.LotteryRecordCreated="50001",t}();t.PublicConsts=e,__reflect(e.prototype,"common.PublicConsts")}(common||(common={}));var common;!function(t){var e=function(){function t(){}return t.touchScrollMove=function(t,e,i){var o=t.viewport,n=t.viewport.contentHeight,s=i/2;t.stopAnimation(),e.localY<s?o.scrollV=0:e.localY>o.height-s?o.scrollV=n-o.height:o.scrollV=(n-o.height)/(o.height-i)*(e.localY-s)},t.touchMouseWheel=function(t,e,i){var o=t.viewport;if(!(e.contentHeight-o.height<0)){var n=o.scrollV-i;0>n?o.scrollV=0:n>e.contentHeight-o.height?o.scrollV=e.contentHeight-o.height:o.scrollV-=i}},t.deepClone=function(t){return App.CommonUtils.copyDataHandler(t)},t}();t.GUtils=e,__reflect(e.prototype,"common.GUtils")}(common||(common={}));var qznn;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t,e){var i=base.getController(t);i&&i.onInit(e)},e.prototype.destroy=function(t){},e}();e.qznn=i,__reflect(i.prototype,"qznn.Entrance.qznn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t}();t.ProxyKeyConst=e,__reflect(e.prototype,"qznn.ProxyKeyConst")}(qznn||(qznn={}));var qznn;!function(t){var e;!function(t){t[t.Base=1200]="Base"}(e=t.ViewConst||(t.ViewConst={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(i){e.prototype.onInit.call(this),this.registers(),Log.log("房间带入：",i.sceneType),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this)},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onClickBackRoom,this),this.registerFunc("onClickBackLobby",this.onClickBackLobby,this)},i.prototype.onClickBackRoom=function(){this.goBack2Room()},i.prototype.onClickBackLobby=function(){this.goBack2Lobby()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.getModel=function(){return e.prototype.getModel.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"qznn.GameController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"qznn.GameModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"qznn.GameProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e){return t.call(this,e,LayerManager.Game_Bg,"qznn","GameSkin")||this}return __extends(e,t),e.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},e.prototype.onClickBackLobby=function(){this.applyFunc("onClickBackLobby")},e.prototype.addEvent=function(){this.btnBackRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBackLobby,this)},e.prototype.removeEvent=function(){this.btnBackRoom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBackLobby,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameView);t.GameView=e,__reflect(e.prototype,"qznn.GameView")}(qznn||(qznn={}));var sgj;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&App.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){App.setScaleModeNormal()},e}();e.sgj=i,__reflect(i.prototype,"sgj.Entrance.sgj",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("sgj.sgjBones");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("sgj.sgjBones","destroy")},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t,i){this.initDBRes(t);var o=i?i:e._mActionList;this.armature=this.createArmature("Armature",t,o),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,i,o){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.sgjBones=e,__reflect(e.prototype,"sgj.sgjBones")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._mIndex=0,i._mIsInPool=!1,i.touchEnabled=!1,i.touchChildren=!1,i._mRender=t.sgjBones.create(),i._mRender.updateId("star_1"),i._mStarList=[],i}return __extends(i,e),i.create=function(){if(!(i.StarList.length>8)){var t=ObjectPool.pop("sgj.StarExpand");return t._mIsInPool=!1,i.StarList.push(t),t}},i.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clear(),i.c(),ObjectPool.push(t))},i.c=function(t){void 0===t&&(t=!1);for(var e=i.StarList,o=e.length,n=o-1;n>=0;n--){var s=e[n];t?(e.splice(n,1),s.destroy()):s._mIsInPool&&e.splice(n,1)}},i.cleanFormPool=function(){t.sgjBones.cleanFormPool(),i.c(!0),ObjectPool.clearClass("sgj.StarExpand","destroy")},i.prototype.init=function(t){this._mParent=t,this._mParent&&!this.parent&&(this._mParent.addChild(this),this.addChild(this._mRender))},i.prototype.run=function(t,e,o,n,s,r,a){this.play(),this.runParabola(t,e,o,n,function(){i.realese(this),s&&s.call(r,a)}.bind(this),this)},i.prototype.play=function(){this._mRender.play(999),this._mIndex=0,App.TimerManager.doTimer(80,999,this.callBackFind,this)},i.prototype.callBackFind=function(){var e=this._mStarList,i=e[this._mIndex++];i||(i=t.sgjBones.create(),i.blendMode=egret.BlendMode.ADD,i.updateId("star_0"),this._mStarList.push(i)),i.parent||this._mParent.addChild(i),i.setPosition(this.x,this.y),i.play(1,2),i.addPlayEndCallBack(function(t){R.removeFromParent(i)}.bind(this,i),this)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mRender.stopGame(),R.removeFromParent(this),this.removeChildren(),this._mIndex=0},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mRender&&this._mRender.destroy();for(var t=this._mStarList;t.length;){var i=t.pop();i&&i.destroy()}this._mRender=void 0,this._mParent=void 0,this._mStarList=void 0},i.StarList=[],i}(ActionExpand);t.StarExpand=e,__reflect(e.prototype,"sgj.StarExpand")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzAwardAnimation")||this;return t._sgjBones=null,t._mxx=0,t._myy=0,t.visible=!1,t}return __extends(i,e),i.prototype.init=function(){this._sgjBones||(this._sgjBones=t.sgjBones.create())},i.prototype.initRenders=function(){if(!this._sgjBones.parent){this.settlement.addChild(this._sgjBones),this._sgjBones.updateId("fruit");var t=this.sunImage.x+258.5,e=this.sunImage.y+257.5;this._sgjBones.setPosition(t,e),this._sgjBones.play(99999)}},i.prototype.bonesMotion=function(t,e){egret.Tween.get(this._sgjBones).to({x:this._mxx},700,egret.Ease.sineInOut).call(function(){this.openWinpopup(t),this.winName.visible=!0,this.winName.source="reward"+e+"_png",this.winBack.visible=!0},this)},i.prototype.settlementAnimation=function(){this.init(),this.initRenders()},i.prototype.closeSettlementAnimation=function(){egret.Tween.removeTweens(this),this.visible=!1,this.vanishFruits()},i.prototype.vanishFruits=function(){for(var t=0;8>t;t++)this["_double"+t].visible=!1,7>t&&(this["_single"+t].visible=!1)},i.prototype.setFruitIcon=function(t){this.visible=!0,this.vanishFruits();for(var e=t.length%2,i=function(){var i=null;i=e?o["_single"+n]:o["_double"+n],i.source="sgj_popup_json.fruit_"+t[n],R.setTimeOnce(function(){this.winlossRun(i)},o,200*n)},o=this,n=0;n<t.length;n++)i()},i.prototype.winlossRun=function(t){t.visible=!0,egret.Tween.get(t).to({y:t.y-35},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+35},100,egret.Ease.sineInOut)},this)},i.prototype.clear=function(){this._sgjBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this._sgjBones=void 0},i}(BaseEuiComponent);t.SgjAwardAnimation=e,__reflect(e.prototype,"sgj.SgjAwardAnimation")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"sgjBetAnimation")||this;return i._approach=null,i.visible=!1,i}return __extends(i,e),i.prototype.playAni=function(t){var e=App.StageUtils.getWidth();App.StageUtils.getHeight();this.BetStartAni.source=2==t?"sgj_table_json.xysgj_ui_tingzhitouzhu":"sgj_table_json.xysgj_ui_kaishixiazhu";var i=this._betPos,o=i.width;i.x=-o,i.alpha=1,this.visible=!0,egret.Tween.get(i).to({x:e/2-o/2},350,egret.Ease.sineInOut).wait(1e3).to({x:e},350,egret.Ease.sineOut).call(function(){i.x=-o,i.alpha=0,this.visible=!1},this)},i.prototype.diceAnimation=function(t){this.visible=!0,this.BetStartAni.source=2==t?"xysgj_ui_tingzhitouzhu_png":"xysgj_ui_kaishixiazhu_png",R.setTimeOnce(function(){this.visible=!1},this,800)},i.prototype.diceInit=function(e){this._approach||(this._approach=new t.sgjBones)},i.prototype.diceInitRenders=function(t){if(!this._approach.parent){var e="bet_"+t;this._betPos.addChild(this._approach),this._approach.updateId(e);var i=this._betPos.getChildAt(0).x+211,o=this._betPos.getChildAt(0).y+42.5;this._approach.setPosition(i,o)}},i.prototype.closeDiceAnimation=function(){this._approach.parent&&(this._approach.stopGame(),this._betPos.removeChild(this._approach))},i.prototype.overDiceAnimation=function(){this._approach.addPlayEndCallBack(function(){this._approach.parent&&this.closeDiceAnimation()},this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._approach&&this._approach.destroy(),this._approach=void 0,R.removeAllTimeOut(this),egret.Tween.removeTweens(this.BetStartAni)},i}(BaseEuiComponent);t.sgjBetAnimation=e,__reflect(e.prototype,"sgj.sgjBetAnimation")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"sgjButton")||this;return t.BtnType=0,t.winpos=[],t.allChipList=[],t.coinArr={},t}return __extends(i,e),i.prototype.buttonIniUI=function(){this.coinArr={};for(var t=0;8>t;t++)this.coinArr["0-"+t]=[],this.coinArr["1-"+t]=[],this.coinArr["2-"+t]=[],this.coinArr["3-"+t]=[],this.coinArr["4-"+t]=[],this.coinArr["5-"+t]=[]},i.prototype.showMenu=function(t){App.SoundManager.playEffect("SGJanniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?egret.Tween.get(this.zidongUp0).to({y:0},100):this.retractMenu()},i.prototype.getWinpos=function(){return this.winpos},i.prototype.retractMenu=function(){egret.Tween.get(this.zidongUp0).to({y:198},100),this.BtnType=0},i.prototype.clearAllBetMoney=function(){for(var t=0;8>t;t++)this["placeAllBet"+t].text="0.0",this["placeBet"+t].text="0.0";this.closeWinLight()},i.prototype.closeWinLight=function(){for(var t=0;8>t;t++)this["_winLight"+t].visible=!1},i.prototype.scaleAllBetMoney=function(){for(var t=0;8>t;t++)this["placeAllBet"+t].scaleX=1,this["placeAllBet"+t].scaleY=1,this["placeBet"+t].scaleX=1,this["placeBet"+t].scaleY=1},i.prototype.clearBetMoney=function(){for(var t=0;8>t;t++)this["placeBet"+t].text="0.0"},i.prototype.allButtonAshed=function(){for(var t=0;8>t;t++)this["btnBet"+t].enabled=!1;this.continueBetAshed(),this.revokeBetAshed()},i.prototype.allButtonLight=function(){for(var t=0;8>t;t++)this["btnBet"+t].enabled=!0},i.prototype.continueBetLight=function(){this.continueBet.enabled=!0},i.prototype.continueBetAshed=function(){this.continueBet.enabled=!1},i.prototype.revokeBetAshed=function(){this.revokeBet.enabled=!1},i.prototype.revokeBetLight=function(){this.revokeBet.enabled=!0},i.prototype.setPersonalBetMoney=function(t,e){this["placeBet"+t].text=e+""},i.prototype.setentireBetMoney=function(t,e){this["placeAllBet"+t].text=e+""},i.prototype.setMultipleNum=function(t){this._multiple.text=t+""},i.prototype.setWinLight=function(t){this["_winLight"+t].visible=!0},i.prototype.setTimeNum=function(t,e){this["timeNum_"+t].text=e+""},i.prototype.setAllTimeNum=function(){for(var t=0;4>t;t++)this["timeNum_"+t].text=""},i.prototype.btnNumShake=function(e,i){var o=1==i?this["placeBet"+e]:this["placeAllBet"+e];t.conFun.numShake(o)},i.prototype.getStarEndPoint=function(t){var e;return e=this["StarPos_"+t].parent.localToGlobal(this["StarPos_"+t].x,this["StarPos_"+t].y)},i.prototype.getParabolicPoint=function(t){var e;return e=this["Parabolic_"+t].parent.localToGlobal(this["Parabolic_"+t].x,this["Parabolic_"+t].y)},i.prototype.createHeadPosition=function(){for(var t=0;6>t;t++){var e=void 0,i=void 0;switch(t){case 0:e=this.HeadPos0.left,i=App.StageUtils.getHeight()/2+this.HeadPos0.verticalCenter;break;case 1:e=this.HeadPos1.left,i=App.StageUtils.getHeight()/2+this.HeadPos1.verticalCenter;break;case 2:e=App.StageUtils.getWidth()-this.HeadPos2.right,i=App.StageUtils.getHeight()/2+this.HeadPos2.verticalCenter;break;case 3:e=App.StageUtils.getWidth()-this.HeadPos3.right,i=App.StageUtils.getHeight()/2+this.HeadPos3.verticalCenter;break;case 4:e=App.StageUtils.getWidth()-this.HeadPos4.right,i=App.StageUtils.getHeight()/2+this.HeadPos4.verticalCenter;break;case 5:e=this.HeadPos5.left,i=App.StageUtils.getHeight()-(this.HeadPos5.bottom+this.HeadPos5.height)}var o=this.GroupHeadPos.localToGlobal(e,i);this.winpos.push(o)}},i.prototype.createWinChip=function(e,i){var o,n,s=this["ChipPos"+e];o=App.StageUtils.getWidth()/2+s.horizontalCenter,n=App.StageUtils.getHeight()-s.bottom-s.height;for(var r=this.winpos[i],a=this.GroupChipPos.globalToLocal(r.x,r.y),h=0;10>h;h++){var l=t.sgjchipBtn.create();l.init(h),l.setNameNum(i);var p=Math.floor(a.x),c=Math.floor(a.y);this.GroupChipPos.addChild(l),l.x=s.x,l.y=s.y,l.alpha=0,l.setFlyChipX(p),l.setFlyChipY(c),this.allChipList.push(l)}},i.prototype.flyWinChip=function(){this.allChipList&&this.allChipList.length&&this.allChipList.forEach(function(t){t.moveTo()},this)},i.prototype.showStar=function(t){this["StarPos_"+t].visible=!0},i.prototype.hideStar=function(){for(var t=0;8>t;t++)this["StarPos_"+t].visible=!1},i.prototype.clearFlyWinChip=function(){for(;this.allChipList&&this.allChipList.length;){var e=this.allChipList.pop();t.sgjchipBtn.release(e)}},i.prototype.createFlyCoin=function(e,i){var o=this.coinArr[i+"-"+e];if(o&&!(o.length>7)){var n=this.winpos[i],s=this.GroupChipPos.globalToLocal(n.x,n.y),r=this["ChipPos"+e].x,a=this["ChipPos"+e].y,h=t.sgjchipBtn.create();h.x=s.x,h.y=s.y,h.alpha=0,h.setFlyChipX(r),h.setFlyChipY(a),this.GroupChipPos.addChild(h),this.coinArr[i+"-"+e].push(h),this.moveToPlace(this.coinArr[i+"-"+e])}},i.prototype.moveToPlace=function(t){if(t&&t.length){var e=t.pop();
e&&(e.alpha=1,e.moveToPlace());var i=this;R.setTimeOnce(function(){i.moveToPlace(t)},this,50)}},i.prototype.removeChip=function(){if(this.coinArr&&this.coinArr.length){if(!(this.coinArr.length>10))return;var e=this.coinArr.shift();t.sgjchipBtn.release(e),this.removeChip()}},i.prototype.removebetFiyChips=function(){for(var t=0;6>t;t++)for(var e=0;8>e;e++)if(this.coinArr[t+"-"+e]&&this.coinArr[t+"-"+e].length)for(;this.coinArr[t+"-"+e].length;){var i=this.coinArr[t+"-"+e].pop();i&&(i.cleanTween(),i.destroy())}},i.prototype.onClickBtnBetTAP=function(t){var e=Number(t.currentTarget.name);this.applyFunc("onClickBtnBetTAP",e)},i.prototype.onClickBtnBetBEGIN=function(t){var e=Number(t.currentTarget.name);this.applyFunc("onClickBtnBetBEGIN",e)},i.prototype.onClickBtnEndBetENDOUT=function(t){var e=Number(t.currentTarget.name);this.applyFunc("onClickBtnEndBetENDOUT",e)},i.prototype.changeInitBet=function(t){var e=Number(t.currentTarget.name);App.SoundManager.playEffect("SGJanniu_mp3"),this.retractMenu(),this.applyFunc("changeInitBet",e),R.sendPlayerAction("SGJantes_switch")},i.prototype.revokeBetMoney=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("revokeBetMoney"),R.sendPlayerAction("SGJbet_cancel")},i.prototype.btnContinueBet=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("btnContinueBet"),R.sendPlayerAction("SGJbet_renew")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t=0;8>t;t++){this["btnBet"+t];this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBetTAP,this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBtnBetBEGIN,this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_END,this.onClickBtnEndBetENDOUT,this),this["btnBet"+t].addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickBtnEndBetENDOUT,this)}for(var i=0;4>i;i++)this["time_"+i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeInitBet,this);this.continueBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnContinueBet,this),this.revokeBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.revokeBetMoney,this),this.initBet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t=0;8>t;t++)this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBtnBetTAP,this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickBtnBetBEGIN,this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_END,this.onClickBtnEndBetENDOUT,this),this["btnBet"+t].removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickBtnEndBetENDOUT,this);for(var i=0;4>i;i++)this["time_"+i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeInitBet,this);this.continueBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnContinueBet,this),this.revokeBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.revokeBetMoney,this),this.initBet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearFlyWinChip(),this.removebetFiyChips(),t.sgjchipBtn.cleanSgjchipBtnPool()},i}(BaseEuiComponent);t.sgjButtonView=e,__reflect(e.prototype,"sgj.sgjButtonView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._mIndex=0,e.chiplist=[1,2,5,10,20,50,100,500,1e3,0],e.skinName="sgjchipBtn",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("sgj.sgjchipBtn");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanSgjchipBtnPool=function(){ObjectPool.clearClass("sgj.sgjchipBtn","destroy")},e.prototype.init=function(t){this._mIndex=t},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.setBtnText=function(t){this.BtnText.text=this._mchipValue?this._mchipValue*t+"":""},e.prototype.setBtnValue=function(t){this._mchipValue=this.chiplist[t]},e.prototype.setBtntextValue=function(){this.BtnText.text=this._mchipValue?this._mchipValue+"":""},e.prototype.setScore=function(){this.BtnText.text=""},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.moveTo=function(){var t=this._flyX,i=this._flyY,o=this;egret.Tween.get(this).wait(100*this._mIndex).to({x:t,y:i,alpha:1},500,egret.Ease.sineInOut).call(function(){e.release(o)},this)},e.prototype.moveToPlace=function(){var t=this._flyX,i=this._flyY,o=this;egret.Tween.get(this).to({x:t,y:i},350).call(function(){e.release(o)},this)},e.prototype.cleanTween=function(){egret.Tween.removeTweens(this)},e.prototype.setBtnChip=function(t){this._chip.source="common_ui_"+t+"_png",this.BtnLight.source="common_ui_g"+t+"_png"},e.prototype.setNameNum=function(t){this._mChipId=t},e.prototype.getNameNum=function(){return this._mChipId},e.prototype.getChipNum=function(t){return this._mchipValue*t},e.prototype.stopChip=function(){this._btnchip.touchEnabled=!1},e.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.sgjchipBtn=e,__reflect(e.prototype,"sgj.sgjchipBtn")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(){t.FuitPool=[]}return Object.defineProperty(t,"i",{get:function(){return null==t._i&&(t._i=new t),t._i},enumerable:!0,configurable:!0}),t.prototype.createSgjFuits=function(){var e=t.FuitPool.pop();return e||(e=new i),e.init(),e},t.prototype.releaseSgjFuits=function(e){return egret.is(e,"SgjFuits")?e.isRelease?void egret.error("SgjFuits 重复回收"):(e.clear(),void t.FuitPool.unshift(e)):void Log.log(e,"is not SgjFuits")},t.prototype.clear=function(){for(;t.FuitPool.length;)t.FuitPool.pop().destroy()},t._i=null,t.FuitPool=null,t}();t.FuitFactory=e,__reflect(e.prototype,"sgj.FuitFactory");var i=function(t){function e(){var e=t.call(this)||this;return e._isRelease=!1,e.skinName="SgjFruit",e}return __extends(e,t),e.prototype.init=function(){this._isRelease=!1},Object.defineProperty(e.prototype,"isRelease",{get:function(){return this._isRelease},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._isRelease=!0,R.removeFromParent(this),egret.Tween.removeTweens(this)},e.prototype.destroy=function(){this.clear()},e}(eui.Component);__reflect(i.prototype,"SgjFuits")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,"SgjGameSet")||this;return i.visible=!1,i}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},e.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},e.prototype.showPopup=function(){App.EffectUtils.showView(this)},e.prototype.closePoput=function(){App.SoundManager.playEffect("SGJanniu_mp3");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this)},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.onOpen=function(t){switch(t.currentTarget){case this.ToggleVoice:App.SoundManager.setBgOn(this.ToggleVoice.selected);break;case this.ToggleMusic:App.SoundManager.setEffectOn(this.ToggleMusic.selected)}},e.prototype.effectSwitch=function(t){var e=t.currentTarget.selected;this.applyFunc("effectSwitch",e),e&&R.sendPlayerAction("SGJeffect_without"),R.sendPlayerAction("SGJeffect_with")},e.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0),R.sendPlayerAction("SGJmusic_without")},e.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0),R.sendPlayerAction("SGJsound_without")},e.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1),R.sendPlayerAction("SGJmusic_with")},e.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1),R.sendPlayerAction("SGJsound_with")},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.SetClose,this.closePoput,this,{}),this._effectSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.removeButton(this.SetClose),this._effectSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.SgjGameSet=e,__reflect(e.prototype,"sgj.SgjGameSet")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjHelpSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){App.EffectUtils.showView(this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("SGJanniu_mp3");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(){var t=[{img0:"sgj_popup_json.xysgj_ui_bangzhu4",img1:"sgj_popup_json.xysgj_ui_bangzhu5"}],e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e),this.showPopup()},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.sgjHelpIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjHelpIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(e){this.ScrollBox.width=t.sgjControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.sgjControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.sgjControllerCon.Scroll_Width,this.ScrollBox.x=t.sgjControllerCon.Help_bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.helpClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.helpClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.sgjHelp=e,__reflect(e.prototype,"sgj.sgjHelp")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data)for(var e=0;2>e;e++)this["ruleimg"+e].texture=RES.getRes(this.data["img"+e])},e}(eui.ItemRenderer);t.sgjHelpIcon=e,__reflect(e.prototype,"sgj.sgjHelpIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"sgjMessageInfoSkin")||this;return i._mResultPoint=new egret.Point,i.lightList=[],i}return __extends(i,e),i.prototype.setUserName=function(t){this.UserName.text=t},i.prototype.setUserImage=function(t){this.UserImage.source=t},i.prototype.setUserFrame=function(t){this.UserFrame.source=t},i.prototype.gameSetMoney=function(t){this.UserMoney.text=t+""},i.prototype.gameGetMoney=function(){return this.UserMoney.text},i.prototype.setUserBet=function(t){this._betMoney.text=t+""},i.prototype.avatarShake=function(t){var e=this["_Plute"+t],i=(e.x,0);i=1>=t||4==t?10:-10,egret.Tween.get(e).to({rotation:i},50).call(function(){egret.Tween.get(e).to({rotation:0},50,egret.Ease.sineInOut)},this)},i.prototype.setPluteImage=function(t,e){this["PluteImage"+e].source=t},i.prototype.setPluteName=function(t,e){this["PluteName"+e].text=t},i.prototype.specialPlayerMoney=function(t,e){this["PluteMoney"+e].text=t+""},i.prototype.playerWinMoney=function(t,e){this["PluteWinMoney"+e].text="+"+t},i.prototype.playerDisplay=function(t){this.allPlayerDisplay();for(var e=0;t+1>e;e++)this["Plute"+e].visible=!0},i.prototype.allPlayerDisplay=function(){for(var t=0;4>t;t++)this["Plute"+t].visible=!1},i.prototype.getPoint=function(){return this.localToGlobal(this.starPos.x,this.starPos.y,this._mResultPoint),this._mResultPoint},i.prototype.initInfo=function(){for(var t=0;5>t;t++)this["PluteWinMoney"+t].alpha=0,this["PluteWinMoney"+t].scaleX=.5,this["PluteWinMoney"+t].scaleY=.5},i.prototype.cleanAssemblyTween=function(){for(var t=0;5>t;t++){var e=this["PluteWinMoney"+t],i=this["_Plute"+t];egret.Tween.removeTweens(e),egret.Tween.removeTweens(i)}},i.prototype.fontEnlarge=function(t){var e=this["PluteWinMoney"+t],i=this;egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.sineInOut),R.setTimeOnce(function(){egret.Tween.get(e).to({y:e.y-50,alpha:0},300,egret.Ease.sineInOut).call(function(){e.y=e.y+50},i)},this,1200)},i.prototype.getMoneyLight=function(e){var i=t.sgjBones.create();if(!i.parent){var o=void 0,n=void 0;4==e?(o=this.GroupInfo,n=this.UserImage):(o=this["_Plute"+e],n=this["PluteImage"+e]),o.addChild(i),i.updateId("money_linght"),i.blendMode=egret.BlendMode.ADD;var s=n.x+44,r=n.y+44.5;i.setPosition(s,r),i.play(1),this.lightList.push(i),i.addPlayEndCallBack(function(){i.parent&&t.sgjBones.realese(i)},this),this.fontEnlarge(e)}},i.prototype.cleanMoneyLight=function(){for(var e=this.lightList;e.length;){var i=e.pop();i&&t.sgjBones.realese(i)}},i.prototype.flyCoordinate=function(){for(var t=[],e=0;5>e;e++){var i=this["starPos"+e];i=4>e?this["PluteImage"+e]:this.UserImage;var o=this.localToGlobal(i.x,i.y);t.push(o)}return t},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),R.removeAllTimeOut(this),this.cleanAssemblyTween();for(var t=this.lightList;t.length;){var i=t.pop();i&&i.destroy()}},i}(BaseEuiComponent);t.sgjMessageView=e,__reflect(e.prototype,"sgj.sgjMessageView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this,"SgjOuterLight")||this}return __extends(e,t),e.prototype.outerShowLight=function(){for(var t=0;4>t;t++){var e=t%2,i=this.outerLight1.getChildAt(t);0==e?this.outerLight1.getChildAt(t).source="sgj_table_json.xysgj_ui_waiweicaideng1"==i.source?"sgj_table_json.xysgj_ui_waiweicaideng2":"sgj_table_json.xysgj_ui_waiweicaideng1":this.outerLight1.getChildAt(t).source="sgj_table_json.xysgj_ui_waiweicaideng3"==i.source?"sgj_table_json.xysgj_ui_waiweicaideng4":"sgj_table_json.xysgj_ui_waiweicaideng3"}},e.prototype.runouterShowLight=function(){App.TimerManager.doTimer(500,0,function(){this.outerShowLight()},this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.TimerManager.removeAll(this)},e}(BaseEuiComponent);t.SgjOuterLight=e,__reflect(e.prototype,"sgj.SgjOuterLight")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="sgjPopupskin",o._sgjAward.initComponent(e),o._sgjBetAnimation.initComponent(e),o._sgjWait.initComponent(e),o._sgjRanking.initComponent(e),o._sgjPrompt.initComponent(e),o._sgjWinningRecord.initComponent(e),o._sgjGameSet.initComponent(e),o._sgjHelp.initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){this._sgjAward.vanishFruits()},e.prototype.waitGameOver=function(){this._sgjWait.waitGameOver()},e.prototype.closeWaitGameOver=function(){this._sgjWait.closeWaitGameOver()},e.prototype.diceAnimation=function(t){this._sgjBetAnimation.playAni(t)},e.prototype.closeSettlementAnimation=function(){this._sgjAward.closeSettlementAnimation()},e.prototype.setFruitIcon=function(t){this._sgjAward.setFruitIcon(t)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._sgjPrompt.addEvent(),this._sgjAward.addEvent(),this._sgjBetAnimation.addEvent(),this._sgjWait.addEvent(),this._sgjRanking.addEvent(),this._sgjWinningRecord.addEvent(),this._sgjGameSet.addEvent(),this._sgjHelp.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._sgjPrompt.removeEvent(),this._sgjAward.removeEvent(),this._sgjBetAnimation.removeEvent(),this._sgjWait.removeEvent(),this._sgjRanking.removeEvent(),this._sgjWinningRecord.removeEvent(),this._sgjGameSet.removeEvent(),this._sgjHelp.removeEvent()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this._sgjAward.destroy(),this._sgjBetAnimation.destroy(),this._sgjWait.destroy(),this._sgjRanking.destroy(),this._sgjPrompt.destroy(),this._sgjWinningRecord.destroy(),this._sgjGameSet.destroy(),this._sgjHelp.destroy()},e}(BaseEuiView);t.SgjPopupView=e,__reflect(e.prototype,"sgj.SgjPopupView")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"SgjPrompt")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.showMenu=function(){this.visible=!0,this.PromptBg.visible=!0,this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu)},i.prototype.closePoput=function(){this.PromptBg.visible=!1,this.prompIsShow=!1;var t=this;App.EffectUtils.hideUI(this.PromptMenu,200,0,function(){t.prompIsShow||(t.visible=!1)})},i.prototype.showPromptSgj=function(t,e,i,o){switch(this.visible=!0,this.PromptBg.visible=!0,this.prompIsShow=!0,this.TextBox.removeChildren(),this.promptType=t,t){case 5:this.renderBrnnType5(e,i,o);break;case 7:this.renderBrnnType6()}this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu)},i.prototype.renderBrnnType5=function(t,e,i){this.BtnBox.visible=!0;var o=this.getTextField(39);o.textFlow=[{text:"当前投注项限红为"},{text:e?e+"":"0"},{text:"~"},{text:i}],o.x=this.TextBox.width/2-o.textWidth/2,this.TextBox.addChild(o);var n=this.getTextField(80);n.textFlow=[{text:"是否投注 "},{text:t,style:{textColor:16045931}},{text:" 达到上限?"}],this.TextBox.addChild(n),n.x=this.TextBox.width/2-n.textWidth/2},i.prototype.renderBrnnType6=function(){this.BtnBox.visible=!0;var t=this.getTextField(39);t.textFlow=[{text:"余额不足，是否前往充值？"}],t.x=this.TextBox.width/2-t.textWidth/2,this.TextBox.addChild(t)},i.prototype.getTextField=function(t){var e=new egret.TextField;return e.y=t,e.fontFamily="Microsoft YaHei",e.size=22,e.textColor=16777215,e.textAlign=egret.HorizontalAlign.CENTER,e},i.prototype.ConfirmMoney=function(){this.closePoput(),this.promptType==t.SgjBetResultCode.BetErrorOutLimitMax?this.applyFunc("confirmShowLimitBet"):this.promptType==t.SgjBetResultCode.BetErrorNoEnoughMoney&&this.applyFunc("ConfirmMoney")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.SgjPrompt=e,__reflect(e.prototype,"sgj.SgjPrompt")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=App.CommonUtils.money(this.data.win_money)+"",this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="sgj_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="sgj_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="sgj_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e}(eui.ItemRenderer);t.SgjRankIcon=e,__reflect(e.prototype,"sgj.SgjRankIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjRanking")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){App.EffectUtils.showView(this,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("SGJanniu_mp3");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length;for(var i=0;i<t.length;i++){var o=t[i];e.addItem(o)}this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.SgjRankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjRankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(e){this.ScrollBox.width=t.sgjControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.sgjControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.sgjControllerCon.Scroll_Width,this.ScrollBox.x=t.sgjControllerCon.Rank_Bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RankClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RankClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.SgjRanking=e,__reflect(e.prototype,"sgj.SgjRanking")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._maskRct=new egret.Rectangle(0,0,88,17),e.skinName="SgjRecordIcon",e}return __extends(e,t),e.create=function(){var t=e._lementBtnPool.pop();return t||(t=new e),t},e.release=function(t){t instanceof e?(t.clean(),e._lementBtnPool.push(t)):egret.error("_lement is not the instance of _lementBtn!")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){t.charts&&(this.Issue.text=App.DateUtils.getFormatBySecond(t.time,2),this.Winning.text=t.money)},e.prototype.clean=function(){R.removeFromParent(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e._lementBtnPool=[],e}(eui.Component);t.SgjRecord=e,__reflect(e.prototype,"sgj.SgjRecord")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return App.MessageCenter.dispatch(t.sgjControllerCon.sgjRecordCreateEnd),i}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.times.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Winning.text=App.CommonUtils.money2Str(this.data.hit_money)+"")},i}(eui.ItemRenderer);t.SgjRecordIcon=e,__reflect(e.prototype,"sgj.SgjRecordIcon")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this,"SgjToolBar")||this;return t._copeImageList={},t.detailRecord=[],t._ImagePos={},t.moveNum=0,t.indexNum=50,t.listNew=[5,7.9,11],t._cardflaylist=[],t.newIamge=[],t.BtnType=0,t.BtnFruitType=0,t}return __extends(i,e),i.prototype.toolInitUI=function(){for(var t=0;11>t;t++)this._ImagePos[t]={x:0+59*t,y:3}},i.prototype.recordFuitflay=function(e){var i=(this._cardflaylist.length?this._cardflaylist.length:1)-1;this.moveNum=e.length-(11-this._cardflaylist.length);var o=0;this.cleanNewImge();for(var n,s=function(){n=t.FuitFactory.i.createSgjFuits(),n.x=650+59*a,n.y=3;var s=e[a].open_num%2,h=e[a].open_type;e[e.length-1].open_num==e[a].open_num?(n.sgjNew.source="sgj_menu_json.xysgj_ui_new",r.indexNum=s):n.sgjNew.source="",n.fruitBg.source=1==s?"sgj_menu_json.xysgj_ui_kaijiangjilu4":"sgj_menu_json.xysgj_ui_kaijiangjilu3",n._fruits.source="sgj_popup_json.xysgj_ui_icon"+r._copeImageList[e[a].open_place],n.fruitType.source=0==h?"sgj_menu_json.xysgj_ui_luck":2==h?"sgj_menu_json.xysgj_ui_train":"";var l=r,p=r._ImagePos[i].x+59+59*a;r.RegularDisplay.addChild(n),r._cardflaylist.push(n),egret.Tween.get(n).to({x:p},800,egret.Ease.sineInOut).call(function(){o++,o>=e.length&&l.moveNum>0&&l.AllCardMove()},r)},r=this,a=0;a<e.length;a++)s()},i.prototype.cleanNewImge=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e.sgjNew.source=""}},i.prototype.AllCardMove=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t],i=e.x-59*this.moveNum;egret.Tween.get(e).to({x:i},800,egret.Ease.sineInOut)}R.setTimeOnce(function(){this.dropCard()},this,900)},i.prototype.dropCard=function(){for(var e=0;e<this._cardflaylist.length;e++){var i=this._cardflaylist[e];e<this.moveNum&&(egret.Tween.removeTweens(i),t.FuitFactory.i.releaseSgjFuits(i))}this._cardflaylist.length>11&&this._cardflaylist.splice(0,this.moveNum)},i.prototype.recordCardDisplay=function(e){this.clearCard(),this._cardflaylist=[];for(var i=0;i<e.length;i++){var o=t.FuitFactory.i.createSgjFuits(),n=e[i].open_num%2,s=e[i].open_type;e[e.length-1].open_num==e[i].open_num?(o.sgjNew.source="sgj_menu_json.xysgj_ui_new",this.indexNum=n):o.sgjNew.source="",o.fruitBg.source=1==n?"sgj_menu_json.xysgj_ui_kaijiangjilu4":"sgj_menu_json.xysgj_ui_kaijiangjilu3",o._fruits.source="sgj_popup_json.xysgj_ui_icon"+this._copeImageList[e[i].open_place],o.fruitType.source=0==s?"sgj_menu_json.xysgj_ui_luck":2==s?"sgj_menu_json.xysgj_ui_train":"",o.x=this._ImagePos[i].x,o.y=this._ImagePos[i].y,this.RegularDisplay.addChild(o),this._cardflaylist.push(o)}},i.prototype.getIndexNum=function(){return this.indexNum},i.prototype.clearCard=function(){if(this._cardflaylist.length){for(var e=0;e<this._cardflaylist.length;e++){var i=this._cardflaylist[e];i&&i.parent&&(egret.Tween.removeTweens(i),t.FuitFactory.i.releaseSgjFuits(i))}this._cardflaylist=[]}App.TimerManager.remove(this.frameRender,this),App.TimerManager.remove(this.frameNewRender,this)},i.prototype.dealRenderBead=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.detailRecord.unshift(i)}this.renderBead(this.detailRecord)},i.prototype.renderBead=function(t){t.length&&(t.length>50?this.detailRecord=[].concat(t.splice(0,50)):this.detailRecord=[].concat(t)),this.indexNum+=1,this.clearCard(),this.renderNewBead(),this.detailRecord.length>10&&(this.sgjIndex=10,App.TimerManager.doFrame(1,99,this.frameRender,this))},i.prototype.frameRender=function(){this.sgjIndex<this.detailRecord.length?this.renderOne():App.TimerManager.remove(this.frameRender,this)},i.prototype.renderOne=function(){if(!(this.sgjIndex>this.detailRecord.length-1)){var e=this.detailRecord[this.sgjIndex],i=t.FuitFactory.i.createSgjFuits(),o=this.sgjIndex/10,n=-45+46*parseInt(String(o)),s=this.sgjIndex%10,r=535-59*s;i.x=r,i.y=n;var a=e.open_num%2,h=e.open_type;i.sgjNew.source="",i.fruitBg.source=1==a?"sgj_menu_json.xysgj_ui_kaijiangjilu4":"sgj_menu_json.xysgj_ui_kaijiangjilu3",i._fruits.source="sgj_popup_json.xysgj_ui_icon"+this._copeImageList[e.open_place],i.fruitType.source=0==h?"sgj_menu_json.xysgj_ui_luck":2==h?"sgj_menu_json.xysgj_ui_train":"",this.GroupBead.addChild(i),this._cardflaylist.push(i),this.sgjIndex++}},i.prototype.renderNewBead=function(){this.detailRecord.length>0&&(this.sgjNewIndex=0,this.sgjLength=0,this.detailRecord.length<=10?this.sgjLength=this.detailRecord.length:this.sgjLength=10,App.TimerManager.doFrame(1,99,this.frameNewRender,this))},i.prototype.frameNewRender=function(){this.sgjNewIndex<this.sgjLength?this.renderNewOne():App.TimerManager.remove(this.frameNewRender,this)},i.prototype.renderNewOne=function(){if(!(this.sgjNewIndex>this.sgjLength-1)){var e=this.detailRecord[this.sgjNewIndex],i=t.FuitFactory.i.createSgjFuits(),o=this.sgjNewIndex%10,n=533-59*o,s=4;i.x=n,i.y=s;var r=e.open_num%2,a=e.open_type;this.detailRecord[0].open_num==e.open_num?(i.sgjNew.source="sgj_menu_json.xysgj_ui_new",i.alpha=0,this.winlossRun(i)):i.sgjNew.source="",i.fruitBg.source=1==r?"sgj_menu_json.xysgj_ui_kaijiangjilu4":"sgj_menu_json.xysgj_ui_kaijiangjilu3",i._fruits.source="sgj_popup_json.xysgj_ui_icon"+this._copeImageList[e.open_place],i.fruitType.source=0==a?"sgj_menu_json.xysgj_ui_luck":2==a?"sgj_menu_json.xysgj_ui_train":"",this.RegularDisplay.addChild(i),this._cardflaylist.push(i),this.sgjNewIndex++}},i.prototype.winlossRun=function(t){t.alpha=1,egret.Tween.get(t).to({y:t.y-46},50,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+92},800,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y-46},100,egret.Ease.sineInOut)},this)},this)},i.prototype.removeCoins=function(e){for(;e.numChildren;){var i=e.removeChildAt(0);t.FuitFactory.i.releaseSgjFuits(i)}},i.prototype.showMenu=function(t){var e=this.menuBtn.$children[0];
App.SoundManager.playEffect("SGJanniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(e.source="sgj_menu_json.xysgj_ui_caidan2",egret.Tween.get(this.MenuBox).to({y:0},100)):(e.source="sgj_menu_json.xysgj_ui_caidan",egret.Tween.get(this.MenuBox).to({y:-193},100))},i.prototype.showFruitMenu=function(t){App.SoundManager.playEffect("SGJanniu_mp3"),this.BtnFruitType=0==this.BtnFruitType?1:0,1==this.BtnFruitType?egret.Tween.get(this.fruitUp).to({y:0},100):egret.Tween.get(this.fruitUp).to({y:-195},100),R.sendPlayerAction("SGJhistory_open")},i.prototype.setonlineNum=function(t){this.OnlineNum.text=""+t},i.prototype.showHelp=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("showHelp"),R.sendPlayerAction("SGJhelp_open")},i.prototype.showGameSet=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("showGameSet"),R.sendPlayerAction("SGJset_open")},i.prototype.showranking=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("showranking"),R.sendPlayerAction("SGJrank_open")},i.prototype.showRecord=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("showRecord"),R.sendPlayerAction("SGJrecord_open")},i.prototype.payMoney=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("sgjGoRechargeMoney")},i.prototype.onlineShake=function(){var t=this.BtnOnline,e=(t.x,-10);egret.Tween.get(t).to({rotation:e},50).call(function(){egret.Tween.get(t).to({rotation:0},50,egret.Ease.sineInOut)},this)},i.prototype.backBody=function(){this.applyFunc("onClickBackLobby")},i.prototype.onHotIconBegin=function(t){var e,i=t.currentTarget.name;switch(i){case"btnBackLobby":e=this.backBtn;break;case"ButtonHelp":e=this.ButtonHelpBtn;break;case"ButtonSetup":e=this.ButtonSetupBtn;break;case"ranking":e=this.rankBtn;break;case"menu":e=this.menuBtn;break;case"Record":e=this.Recordbtn}egret.Tween.get(e).to({scaleX:.8,scaleY:.8},80).to({scaleX:1,scaleY:1},80)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.menu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showHelp,this),this.ButtonSetup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),App.CommonUtils.effectButton(this.moneyGroup,this.payMoney,this,{}),App.CommonUtils.effectButton(this.btnDrop,this.showFruitMenu,this,{}),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonHelp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonSetup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ranking.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.menu.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.Record.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.menu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backBody,this),this.ButtonSetup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showranking,this),this.Record.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this),App.CommonUtils.removeButton(this.moneyGroup),App.CommonUtils.removeButton(this.btnDrop),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonHelp.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ButtonSetup.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.ranking.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.menu.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this),this.Record.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHotIconBegin,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearCard(),egret.Tween.removeTweens(this.BtnOnline),t.FuitFactory.i.clear()},i}(BaseEuiComponent);t.sgjToolBar=e,__reflect(e.prototype,"sgj.sgjToolBar")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,"SgjWaitGame")||this;return i.visible=!1,i.touchEnabled=!0,i.touchChildren=!0,i}return __extends(e,t),e.prototype.waitGameOver=function(){this.visible=!0,this.waitGameGilf(),App.TimerManager.doTimer(2e3,99,function(){this.waitGameGilf()},this)},e.prototype.waitGameGilf=function(){for(var t=function(){var t=e._wiatGame.getChildAt(i);R.setTimeOnce(function(){this.waitGameRun(t)},e,200*i)},e=this,i=0;10>i;i++)t()},e.prototype.cleanAssemblyTween=function(){for(var t=0;10>t;t++){var e=this._wiatGame.getChildAt(t);egret.Tween.removeTweens(e)}},e.prototype.waitGameRun=function(t){egret.Tween.get(t).to({y:t.y-8},80,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({y:t.y+8},80,egret.Ease.sineInOut)},this)},e.prototype.closeWaitGameOver=function(){App.TimerManager.removeAll(this),egret.Tween.removeTweens(this),this.visible=!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.cleanAssemblyTween()},e}(BaseEuiComponent);t.SgjWaitGame=e,__reflect(e.prototype,"sgj.SgjWaitGame")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,"SgjWinningRecord")||this;return i.isCreateEnd=!1,i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1,App.EffectUtils.showView(this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("SGJanniu_mp3");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1,t.isCreateEnd=!1},this),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length,t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e),this.createLement(t)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.SgjRecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/sgj/euiSkin/SgjRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(e){this.ScrollBox.width=t.sgjControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.sgjControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.sgjControllerCon.Scroll_Width,this.ScrollBox.x=t.sgjControllerCon.Rank_Bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.sgjRecordCreateEnd=function(){this.isCreateEnd||(this.isCreateEnd=!0,App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBox.touchEnabled=!0))},i.prototype.createLement=function(e){this.reMoveLement();for(var i=0;i<e.length;i++){var o=e[i],n=t.SgjRecord.create();n.init(o),n.x=0,n.y=0+38.67*i,this._addList.addChild(n),this._lementList.push(n)}},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();t.SgjRecord.release(e)}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RecordClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(t.sgjControllerCon.sgjRecordCreateEnd,this.sgjRecordCreateEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RecordClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(t.sgjControllerCon.sgjRecordCreateEnd,this.sgjRecordCreateEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement()},i}(BaseEuiComponent);t.SgjWinningRecord=e,__reflect(e.prototype,"sgj.SgjWinningRecord")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(){}return t.Scroll_Bar_Height=100,t.Scroll_Width=50,t.Renew_Scroll_Width=1e3,t.Help_bar_X=897,t.Rank_Bar_X=675,t.Record_Bar_X=675,t.onOnlineCountNotifyBack="onOnlineCountNotifyBack",t.onCancelBetResBack="onCancelBetResBack",t.onPlayerInfoNotifyBack="onPlayerInfoNotifyBack",t.onIssueNotifyBack="onIssueNotifyBack",t.onStateNotifyBack="onStateNotifyBack",t.onSpecialPlayerNotifyBack="onSpecialPlayerNotifyBack",t.onLastBetNotifyBack="onLastBetNotifyBack",t.onBetResBack="onBetResBack",t.onPlayerBetInfoNotifyBack="onPlayerBetInfoNotifyBack",t.onGameResultNotifyBack="onGameResultNotifyBack",t.onGameBetInfoNotifyBack="onGameBetInfoNotifyBack",t.settlementStage="settlementStage",t.onChartResBack="onChartResBack",t.onSpecialPlayerActionNotifyBack="onSpecialPlayerActionNotifyBack",t.onRankingListResBack="onRankingListResBack",t.onBaseBetNotifyBack="onBaseBetNotifyBack",t.sgjRecordCreateEnd="sgjRecordCreateEnd",t.onGame_MSG={Online:"Online",Info:"Info",basebet:"basebet",special:"special",state:"state",chart:"chart"},t.NET_MSG={PLAYER_INFO_NOTIFY:"11401",Online_Count_Notify:"11402",Issue_Notify:"11403",State_Notify:"11404",Limit_Notify:"11405",Bet_Req:"11406",Bet_Res:"11407",Player_Bet_Info_Notify:"11408",Game_Bet_Info_Notify:"11409",Game_Result_Notify:"11410",Chart_Req:"11411",Chart_Res:"11412",Ranking_List_Req:"11413",Ranking_List_Res:"11414",Special_Player_Notify:"11415",Special_Player_Action_Notify:"11416",Cancel_Bet_Req:"11417",Cancel_Bet_Res:"11418",Last_Bet_Notify:"11419",BASE_BET_NOTIFY:"11420"},t}();t.sgjControllerCon=e,__reflect(e.prototype,"sgj.sgjControllerCon");var i;!function(t){t[t.PLUTE0=0]="PLUTE0",t[t.PLUTE1=1]="PLUTE1",t[t.PLUTE2=2]="PLUTE2",t[t.PLUTE3=3]="PLUTE3",t[t.ONLINE=4]="ONLINE",t[t.SELF=5]="SELF"}(i=t.PlayerConst||(t.PlayerConst={}));var o;!function(t){t[t["do"]=0]="do",t[t.re=1]="re",t[t.mi=2]="mi",t[t.fa=3]="fa",t[t.sol=4]="sol",t[t.la=5]="la",t[t.si=6]="si",t[t.dodo=7]="dodo"}(o=t.SgjPlaceConst||(t.SgjPlaceConst={}));var n;!function(t){t[t.BetSucc=0]="BetSucc",t[t.BetErrorPlace=1]="BetErrorPlace",t[t.BetErrorMoney=2]="BetErrorMoney",t[t.BetErrorState=3]="BetErrorState",t[t.BetErrorOutLimitMin=4]="BetErrorOutLimitMin",t[t.BetErrorOutLimitMax=5]="BetErrorOutLimitMax",t[t.BetErrorOutLimitTotal=6]="BetErrorOutLimitTotal",t[t.BetErrorNoEnoughMoney=7]="BetErrorNoEnoughMoney",t[t.BetErrorNULL=8]="BetErrorNULL"}(n=t.SgjBetResultCode||(t.SgjBetResultCode={}));var s;!function(t){t[t.OutLimitMax=1]="OutLimitMax",t[t.StudBet=2]="StudBet",t[t.NoEnoughMoney=6]="NoEnoughMoney"}(s=t.SgjBetResultPopupConst||(t.SgjBetResultPopupConst={}))}(sgj||(sgj={}));var sgj;!function(t){var e;!function(t){t[t.Base=6100]="Base",t[t.Popup=6101]="Popup",t[t.Recharge=6102]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,t._PopupView=null,t._proxy=null,t._sgjModel=null,t.betpingguo=["SGJbet_pingguo","SGJbet_juzi","SGJbet_mangguo","SGJbet_lingdang","SGJbet_xigua","SGJbet_shuangxing","SGJbet_shuangqi","SGJbet_bar"],t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners(),this.addEventListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),App.ViewManager.open(t.ViewConst.Base,this.getModel()),App.ViewManager.open(t.ViewConst.Popup,this.getModel()),this.enterGameInfo()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._PopupView=new t.SgjPopupView(this,LayerManager.UI_Popup),this.getSgjModel().userMoney=this.player.getMoney()},i.prototype.getSgjModel=function(){return this._model},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._PopupView),this.registerRecharge(),this.registerRedpacket()},i.prototype.onExitGame=function(){e.prototype.onExitGame.call(this),this.goBack2Lobby()},i.prototype.addEventListeners=function(){this.registerFunc("onClickBackLobby",this.onClickBackLobby,this),this.registerFunc("onClickBtnBetTAP",this.onClickBtnBetTAP,this),this.registerFunc("onClickBtnBetBEGIN",this.onClickBtnBetBEGIN,this),this.registerFunc("onClickBtnEndBetENDOUT",this.onClickBtnEndBetENDOUT,this),this.registerFunc("revokeBetMoney",this.revokeBetMoney,this),this.registerFunc("btnContinueBet",this.btnContinueBet,this),this.registerFunc("changeInitBet",this.changeInitBet,this),this.registerFunc(t.sgjControllerCon.onOnlineCountNotifyBack,this.onOnlineCountNotifyBack,this),this.registerFunc(t.sgjControllerCon.onCancelBetResBack,this.onCancelBetResBack,this),this.registerFunc(t.sgjControllerCon.onPlayerInfoNotifyBack,this.onPlayerInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.onIssueNotifyBack,this.onIssueNotifyBack,this),this.registerFunc(t.sgjControllerCon.onStateNotifyBack,this.onStateNotifyBack,this),this.registerFunc(t.sgjControllerCon.onSpecialPlayerNotifyBack,this.onSpecialPlayerNotifyBack,this),this.registerFunc(t.sgjControllerCon.onLastBetNotifyBack,this.onLastBetNotifyBack,this),this.registerFunc(t.sgjControllerCon.onBetResBack,this.onBetResBack,this),this.registerFunc(t.sgjControllerCon.onPlayerBetInfoNotifyBack,this.onPlayerBetInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.onGameResultNotifyBack,this.onGameResultNotifyBack,this),this.registerFunc(t.sgjControllerCon.onGameBetInfoNotifyBack,this.onGameBetInfoNotifyBack,this),this.registerFunc(t.sgjControllerCon.settlementStage,this.settlementStage,this),this.registerFunc("showranking",this.showranking,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc(t.sgjControllerCon.onChartResBack,this.onChartResBack,this),this.registerFunc(t.sgjControllerCon.onSpecialPlayerActionNotifyBack,this.onSpecialPlayerActionNotifyBack,this),this.registerFunc(t.sgjControllerCon.onRankingListResBack,this.onRankingListResBack,this),this.registerFunc("requestWinRecord",this.requestWinRecord,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("confirmShowLimitBet",this.confirmShowLimitBet,this),this.registerFunc("ConfirmMoney",this.ConfirmMoney,this),this.registerFunc("effectSwitch",this.effectSwitch,this),this.registerFunc("sgjGoRechargeMoney",this.sgjGoRechargeMoney,this),this.registerFunc(t.sgjControllerCon.onBaseBetNotifyBack,this.onBaseBetNotifyBack,this)},i.prototype.onUserMoneyChange=function(t){this.getSgjModel().userMoney=t.balance;var e=App.CommonUtils.money2Str(t.balance);this._view.gameSetMoney(e)},i.prototype.enterGameInfo=function(){this.getSgjModel().isOpenGame=!0;for(var e in this.getSgjModel().initGameMss)if(null!=this.getSgjModel().initGameMss[e]){var i=this.getSgjModel().initGameMss[e];switch(e){case t.sgjControllerCon.onGame_MSG.Info:this.onPlayerInfoNotifyBack(i);break;case t.sgjControllerCon.onGame_MSG.Online:this.onOnlineCountNotifyBack(i);break;case t.sgjControllerCon.onGame_MSG.basebet:this.onBaseBetNotifyBack(i);break;case t.sgjControllerCon.onGame_MSG.special:this.onSpecialPlayerActionNotifyBack(i);break;case t.sgjControllerCon.onGame_MSG.state:this.onStateNotifyBack(i);break;case t.sgjControllerCon.onGame_MSG.chart:this.onChartResBack(i)}}},i.prototype.onClickBackLobby=function(){this._proxy.sendLeaveGame()},i.prototype.onClickBtnBetTAP=function(t){R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this.getSgjModel().betPlace=t,this.betContinue()},i.prototype.onClickBtnBetBEGIN=function(t){var e=this;R.removeAllTimeOut(this),App.TimerManager.removeAll(this),this.getSgjModel().betPlace=t,R.setTimeOnce(function(){App.TimerManager.doTimer(200,99999,e.betContinue,e)},this,1e3)},i.prototype.betContinue=function(){this.betshow(this.getSgjModel().betPlace)},i.prototype.onClickBtnEndBetENDOUT=function(t){R.removeAllTimeOut(this),App.TimerManager.removeAll(this)},i.prototype.betshow=function(e,i){var o=[],n=this.getSgjModel();n.isRepeat=!1;var s=i?i:1e4*n.multipleBet;return t.conFun.setBetMusic(e),this.isLimit(e,s)?(R.removeAllTimeOut(this),void App.TimerManager.removeAll(this)):(R.sendPlayerAction(this.betpingguo[e]),o.push({place:e,bet_money:s}),void this.autoBet(o))},i.prototype.autoBet=function(t){var e=t,i={bets:e,table_id:0};this._proxy.requestBet(i)},i.prototype.isLimit=function(e,i,o){void 0===o&&(o=!1);var n=!1;this.getSgjModel().isRepeat=o;for(var s=this.getSgjModel().limitBet,r=0;r<s.length;r++){var a=s[r];if(a.place==e){var h=i,l=this.getSgjModel().betList[e],p=this.getSgjModel().userMoney;0>=p?(this._PopupView._sgjPrompt.showPromptSgj(t.SgjBetResultCode.BetErrorNoEnoughMoney),n=!0):i>p?(this._PopupView._sgjPrompt.showPromptSgj(t.SgjBetResultCode.BetErrorNoEnoughMoney),n=!0):l>=a.limit_max_money?(o?t.conFun.textReminder(t.SgjBetResultCode.BetErrorOutLimitMax):t.conFun.textReminder(t.SgjBetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(a.limit_min_money),App.CommonUtils.money(a.limit_max_money)),n=!0):h+l>a.limit_max_money&&(o?t.conFun.textReminder(t.SgjBetResultCode.BetErrorOutLimitMax):(this.getSgjModel().limitBetMoney=a.limit_max_money-l,this._PopupView._sgjPrompt.showPromptSgj(t.SgjBetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(this.getSgjModel().limitBetMoney),App.CommonUtils.money(a.limit_min_money),App.CommonUtils.money(a.limit_max_money))),n=!0)}}return n},i.prototype.getAllSelfBet=function(){var t=0;for(var e in this.getSgjModel().betList)t+=this.getSgjModel().betList[e];return t},i.prototype.revokeBetMoney=function(){this._proxy.requestRevokeBet()},i.prototype.btnContinueBet=function(){this.repeatBet()},i.prototype.changeInitBet=function(t){this.getSgjModel().multipleBet=Number(this.getSgjModel().initBetList[t]),this._view.setMultipleNum(this.getSgjModel().multipleBet)},i.prototype.onOnlineCountNotifyBack=function(t){this.getSgjModel().isOpenGame&&this._view.setonlineNum(t.online_count)},i.prototype.onCancelBetResBack=function(t){this.getSgjModel().userMoney=t.balance;var e=App.CommonUtils.money2Str(t.balance);this._view.gameSetMoney(e),this.getSgjModel().truebet.length=0,this.getSgjModel().truebet=[],this._view.setUserBet(0),this._view.clearBetMoney(),this.resetPersonalBet(),this._view.revokeBetAshed(),this._view.cleanBetList()},i.prototype.onPlayerInfoNotifyBack=function(t){if(this.getSgjModel().isOpenGame){var e=App.CommonUtils.money2Str(t.balance);this._view.gameSetMoney(e)}},i.prototype.onIssueNotifyBack=function(t){},i.prototype.onStateNotifyBack=function(t){if(this.getSgjModel().isOpenGame){var e=t.total_time-t.remaining_time;if(1==t.state){this.resetAllBet(),this.resetPersonalBet(),this._view.setUserBet(0),this._view.cleanBetList(),App.TimerManager.removeAll(this._view),this.getSgjModel().isFirtGame=!1,this._PopupView.closeWaitGameOver(),this._view.closeMaskAppears(),this._PopupView.closeSettlementAnimation(),this._view.closetAnimation(),this._view.cleanState1(),200>=e&&this._PopupView.diceAnimation(1);var i=t.remaining_time;this._view.sgjCountdownTimer(i);var o=this;R.setTimeOnce(function(){o._view._winpos=o.getSgjModel()._mAwardList.length?o.getSgjModel()._mAwardList[0].open_place:5,o._view.startGameLight()},this,300)}else if(2==t.state){if(this._view.scaleAllBetMoney(),this._PopupView._sgjPrompt.closePoput(),this._view.timeGroup.visible=!1,App.TimerManager.removeAll(this._view),this.getSgjModel().isFirtGame)return this._PopupView.waitGameOver(),void this._view.maskAppears();this._PopupView.closeSettlementAnimation(),this._view.closetAnimation(),this.onClickBtnEndBetENDOUT({}),this._view.overBet(),this._PopupView.diceAnimation(2)}}},i.prototype.onSpecialPlayerNotifyBack=function(t){if(this.getSgjModel().isOpenGame){var e=t.special_player;if(e.length){this.getSgjModel().playerIds={},this.getSgjModel().specialMoney={};for(var i=0;i<e.length;i++){var o=e[i];this._view.setInformation(o),this.getSgjModel().playerIds[o.play_role]=o.user_id,this.getSgjModel().specialMoney[o.play_role]=o.balance}}}},i.prototype.onLastBetNotifyBack=function(t){var e=t.open_places;this._view.InitUpdateImage(e)},i.prototype.onBetResBack=function(t){var e=t.code,i=t.bets,o=i.length>1?!0:!1;if(e)return void this.betCodeTips(e,o);for(var n=0;n<i.length;n++){i[n].place,i[n].bet_money}1==i.length&&R.sendPlayerAction("SGJantes_bet"+this.getSgjModel().multipleBet);var s=App.CommonUtils.money2Str(t.balance);this._view.gameSetMoney(s),this._view.revokeBetLight(),this._view.avatarShake(4)},i.prototype.onPlayerBetInfoNotifyBack=function(e){this.getSgjModel().allMoney=0,this.getSgjModel().truebet.length=0,this.getSgjModel().truebet=[];for(var i=0;i<e.infos.length;i++){var o=e.infos[i],n=o.bet_money,s=n-this.getSgjModel()._betInfoNotify[o.place];this._view.setPersonalBetMoney(i,App.CommonUtils.money(n).toFixed(1)),s>0&&(this._view.btnNumShake(o.place,1),this._view.createFlyCoin(o.place,t.PlayerConst.SELF)),this.totalbet(n,o.place),this.getSgjModel().betList[o.place]=o.bet_money,this.getSgjModel()._betInfoNotify[o.place]=o.bet_money}this._view.setUserBet(App.CommonUtils.money2Str(this.getSgjModel().allMoney))},i.prototype.onGameResultNotifyBack=function(t){this._view.marryStartUp();for(var e=this.getSgjModel()._mAwardList,i=0;i<e.length;i++){var o=e[i].win_money;o>0&&(-1==this.getSgjModel()._specialPlayer.indexOf(4)&&this.getSgjModel()._specialPlayer.push(4),this._view.createWinChip(e[i].place,5))}},i.prototype.onGameBetInfoNotifyBack=function(e){for(var i=0,o=0;o<e.infos.length;o++){var n=e.infos[o],s=n.total_bet_money,r=s-this.getSgjModel().allBetList[n.place];i+=s,this._view.setentireBetMoney(o,App.CommonUtils.money(s).toFixed(1)),r>0&&(this._view.btnNumShake(n.place,2),this._view.createFlyCoin(n.place,t.PlayerConst.ONLINE),this._view.onlineShake()),s>0&&-1==this.getSgjModel()._allBetPos.indexOf(n.place)&&this.getSgjModel()._allBetPos.push(n.place),e.spe_balance&&(this._view.revokeSpecialPlayerMoney(e.spe_balance,e.user_id),e.user_id==this.getSgjModel().playerIds[t.PlayerConst.PLUTE0]&&0>r&&(this._view.hideStar(),this.getSgjModel()._isFlylist.length=0,this.getSgjModel()._isFlylist=[])),this.getSgjModel().allBetList[n.place]=n.total_bet_money}this._view.betTotalScore.text=App.CommonUtils.money(i).toFixed(1)+"",this._view.btnAllNumShake()},i.prototype.resetAllBet=function(){for(var t=0;t<this.getSgjModel().allBetList.length;t++)this.getSgjModel().allBetList[t]=0},i.prototype.resetPersonalBet=function(){for(var t=0;t<this.getSgjModel()._betInfoNotify.length;t++)this.getSgjModel()._betInfoNotify[t]=0},i.prototype.settlementStage=function(t){var e=t.length,i=e%2,o=Math.floor(e/2),n=-1,s=-1,r=[];if(t.length>2)if(i){n=o,s=o,r.push(t[o]);for(var a=0;o>a;a++){n-=1,s+=1;for(var h=0;2>h;h++)r.push(t[0==h?n:s])}}else{n=o-1,s=o;for(var l=0;o>l;l++){for(var h=0;2>h;h++)r.push(t[0==h?n:s]);n-=1,s+=1}}else r=t;this._PopupView.setFruitIcon(r),this.getSgjModel().isEffect||this._view.settlementAnimation();var p=this,c=App.CommonUtils.money2Str(this.getSgjModel()._mTotalScore),u=this.getSgjModel().specialMoney;this._view.playerWinMoney(c,4),R.setTimeOnce(function(){p._PopupView.closeSettlementAnimation(),p._view.closetAnimation(),p._view.flyWinChip(),p.playGetScore();for(var t in u){var e=u[t];p._view.specialPlayerMoney(App.CommonUtils.money2Str(e),t)}},this,3e3)},i.prototype.showranking=function(){this._proxy.ranking({begin_idx:0,req_count:50}),App.EasyLoading.showOnTimeOut(),this._PopupView._sgjRanking.showPopup()},i.prototype.showRecord=function(){this._PopupView._sgjWinningRecord.showPopup();var t=this.getSgjModel().recordList;t.length&&this._PopupView._sgjWinningRecord.rankData(t)},i.prototype.showGameSet=function(){this._PopupView._sgjGameSet.initSet(),this._PopupView._sgjGameSet.showPopup()},i.prototype.onChartResBack=function(t){this.getSgjModel().isOpenGame&&this._view.recordCardDisplay(this.getSgjModel()._recordHistory)},i.prototype.onSpecialPlayerActionNotifyBack=function(t){if(t)if(t.play_action){for(var e=0,i=0;i<t.bets.length;i++)t.bets[i].money>0&&(this._view.createWinChip(t.bets[i].place,t.play_role),e+=t.bets[i].money,-1==this.getSgjModel()._specialPlayer.indexOf(t.play_role)&&this.getSgjModel()._specialPlayer.push(t.play_role));this._view.playerWinMoney(App.CommonUtils.money2Str(e),t.play_role),this.getSgjModel().specialMoney[t.play_role]=t.balance}else{var o=App.CommonUtils.money2Str(t.balance);this._view.avatarShake(t.play_role),this._view.specialPlayerMoney(o,t.play_role);for(var i=0;i<t.bets.length;i++){var n=t.bets[i].place;t.play_role||-1!=this.getSgjModel()._isFlylist.indexOf(n)||(this.getSgjModel()._isFlylist.push(n),this._view.starFly(n))}for(var s=0;s<t.bets.length;s++)this._view.createFlyCoin(t.bets[s].place,t.play_role)}},i.prototype.onRankingListResBack=function(t){this._PopupView._sgjRanking.rankData(t.infos)},i.prototype.requestWinRecord=function(){this._proxy.winRecord()},i.prototype.showHelp=function(){this._PopupView._sgjHelp.rankData()},i.prototype.confirmShowLimitBet=function(){this.getSgjModel().limitBetMoney&&this.betshow(this.getSgjModel().betPlace,this.getSgjModel().limitBetMoney)},i.prototype.ConfirmMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.effectSwitch=function(t){this.getSgjModel().isEffect=t},i.prototype.sgjGoRechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.onBaseBetNotifyBack=function(e){if(this.getSgjModel().isOpenGame){this.getSgjModel().initBetList.length=0,this.getSgjModel().initBetList=[];for(var i=t.conFun.deepClone(e.base_bet),o=[],n=0;n<i.length;n++){var s=Number(App.CommonUtils.money2StrTwo(i[n]));o.push(s)}this.getSgjModel().initBetList=o.sort(function(t,e){return t-e}),this._view.setTimeNum(this.getSgjModel().initBetList)}},i.prototype.repeatBet=function(){if(this.getSgjModel().upperBureauchip.length){var t=!0;t=this.getSgjModel().upperBureauchip.length>1?!0:!1;for(var e=0;e<this.getSgjModel().upperBureauchip.length;e++){var i=this.getSgjModel().upperBureauchip[e];if(this.isLimit(i.place,i.bet_money,t))return}this.autoBet(this.getSgjModel().upperBureauchip)}},i.prototype.repeatReadyBet=function(){for(var t=this.getSgjModel().upperBureauchip,e=0;e<t.length;e++){t[e]}},i.prototype.betCodeTips=function(e,i){var o=e,n=this.getSgjModel().limitBet[this.getSgjModel().betPlace];switch(o){case t.SgjBetResultCode.BetErrorOutLimitMin:t.conFun.textReminder(e,App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money));break;case t.SgjBetResultCode.BetErrorOutLimitMax:if(i)t.conFun.textReminder(e);else{var s=this.getSgjModel().betList[this.getSgjModel().betPlace];s>=n.limit_max_money?t.conFun.textReminder(e,App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)):(this.getSgjModel().limitBetMoney=n.limit_max_money-s,this._PopupView._sgjPrompt.showPromptSgj(t.SgjBetResultCode.BetErrorOutLimitMax,App.CommonUtils.money(this.getSgjModel().limitBetMoney),App.CommonUtils.money(n.limit_min_money),App.CommonUtils.money(n.limit_max_money)))}break;case t.SgjBetResultCode.BetErrorNoEnoughMoney:this._PopupView._sgjPrompt.showPromptSgj(o);break;default:t.conFun.textReminder(o)}},i.prototype.playGetScore=function(){var t=Number(this._view.gameGetMoney()),e=Number(App.CommonUtils.money2Str(this.getSgjModel()._mTotalScore));if(e){var i=e/30;this.setRecordInit(this.getSgjModel()._mTotalScore),App.TimerManager.doTimer(32,999,function(){App.SoundManager.playEffect("SGJdefen_mp3"),t+=i,e-=i,this._view.gameSetMoney(App.CommonUtils.moneyself(t)),this._view.setWinTotalScore(1e4*e),i>=e&&(App.SoundManager.stopEff("SGJdefen_mp3"),this._view.setWinTotalScore(0),this._view.gameSetMoney(App.CommonUtils.money2Str(this.getSgjModel().userMoney)),App.TimerManager.removeAll(this))},this)}},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=t;if(i>0){var o={time:e,hit_money:i};this.getSgjModel().recordList.unshift(o)}this.getSgjModel().changerecordList()},i.prototype.totalbet=function(t,e){var i={place:e,bet_money:t};i.bet_money>0&&this.getSgjModel().truebet.push(i),this.getSgjModel().allMoney+=t},i.prototype.resetLimitBet=function(){for(var t=0;8>t;t++)this.getSgjModel().limitBet[t]=this.getSgjModel().limitOldBet[t]},i.prototype.setPlaceLimitBet=function(t,e){this.getSgjModel().limitBet[t]=this.getSgjModel().limitBet[t]-e},i.prototype.resetUserIdMoney=function(){for(var e=0;6>e;e++)this.getSgjModel().specialMoney[e]=0,t.PlayerConst.SELF!=e&&(this.getSgjModel().playerIds[e]=0)},i.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this),Log.trace("sgj销毁Controller"),t.StarExpand.cleanFormPool(),this._view.destroy(),this._model.destroy(),this._proxy.destroy(),this._PopupView.destroy(),t.sgjchipBtn.cleanSgjchipBtnPool(),t.FuitFactory.i.clear(),this._view=void 0,this._model=void 0,this._proxy=void 0,this._PopupView=void 0},i}(base.GameController);t.GameController=e,__reflect(e.prototype,"sgj.GameController")}(sgj||(sgj={}));var sgj;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.initData(),i}return __extends(e,t),e.prototype.initData=function(){this.multipleBet=.1,this.drawsNum=[],this.lotteryType=0,this.recordList=[],this.betPlace=0,this.truebet=[],this.userMoney=0,this._betInfoNotify=[0,0,0,0,0,0,0,0],this._winpos=5,this.upperBureauchip=[],this._mAwardList=[],this.openPlace=[],this._winBtnPos=[],this._mScoreAward=0,this._mTotalScore=0,this.isFirtGame=!0,this._recordHistory=[],this.historyNum=0,this._specialPlayer=[],this._allBetPos=[],this.limitBet=[],this.limitOldBet={},this.isRepeat=!1,this.playerIds={},this.isEffect=!1,this.specialMoney={},this.initBetList=[.1,1,10,100],this.betList={},this.limitBetMoney=0,this._isFlylist=[],this.userId=0,this.allBetList=[0,0,0,0,0,0,0,0],this.initGameMss={Online:null,Info:null,basebet:null,special:null,state:null,chart:null},this.isOpenGame=!1},e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.countTotalScore=function(t){if(!(t>=this._mAwardList.length)){var e=this._mAwardList[t].win_money;this._mScoreAward+=e,Log.log("当前奖励分数：",this._mScoreAward)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.initData()},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"sgj.GameModel")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getSgjModel=function(){return this._model},i.prototype.onPlayerInfoNotifyBack=function(e){Log.log("onPlayerInfoNotifyBack",e),this.getSgjModel().userMoney=e.balance,this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.Info]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onPlayerInfoNotifyBack,e)
},i.prototype.onOnlineCountNotifyBack=function(e){Log.log("onOnlineCountNotifyBack",e),this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.Online]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onOnlineCountNotifyBack,e)},i.prototype.onIssueNotifyBack=function(e){Log.log("onIssueNotifyBack",e),this.applyFunc(t.sgjControllerCon.onIssueNotifyBack,e)},i.prototype.onStateNotifyBack=function(e){Log.log("onStateNotifyBack",e),this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.state]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onStateNotifyBack,e)},i.prototype.onLimitNotifyBack=function(t){Log.log("onLimitNotifyBack",t),this.getSgjModel().limitBet=t.limits;for(var e=0;e<t.limits.length;e++)this.getSgjModel().betList[t.limits[e].place]=0;Log.log(this.getSgjModel().limitBet),Log.log(this.getSgjModel().betList)},i.prototype.onBetResBack=function(e){Log.log("onBetResBack",e),App.EasyLoading.hideLoading(),this.getSgjModel().userMoney=e.balance,this.applyFunc(t.sgjControllerCon.onBetResBack,e)},i.prototype.onGameBetInfoNotifyBack=function(e){Log.log("onGameBetInfoNotifyBack",e),this.applyFunc(t.sgjControllerCon.onGameBetInfoNotifyBack,e)},i.prototype.onPlayerBetInfoNotifyBack=function(e){Log.log("onPlayerBetInfoNotifyBack",e),this.applyFunc(t.sgjControllerCon.onPlayerBetInfoNotifyBack,e)},i.prototype.onGameResultNotifyBack=function(e){Log.log("onGameResultNotifyBack",e),this.getSgjModel().lotteryType=e.open_type,this.getSgjModel()._mTotalScore=e.total_win_money,this.getSgjModel()._mAwardList=[],this.getSgjModel()._mScoreAward=0,this.getSgjModel().userMoney=e.balance;for(var i=0;i<e.open_place_results.length;i++){var o=e.open_place_results[i],n={place:o.place,open_place:o.open_place,win_money:o.win_money};this.getSgjModel()._mAwardList.push(n)}Log.log(this.getSgjModel()._mAwardList),this.applyFunc(t.sgjControllerCon.onGameResultNotifyBack,e)},i.prototype.onChartResBack=function(e){if(Log.log("onChartResBack",e),e.chart_infos.length){this.getSgjModel()._mAwardList=[];var i=e.chart_infos[0].open_places;this.getSgjModel().drawsNum=i,this.getSgjModel()._winpos=i[0];for(var o=0;o<i.length;o++){var n=i[o],s={place:0,open_place:n,win_money:0};this.getSgjModel()._mAwardList.push(s)}Log.log(this.getSgjModel()._mAwardList),e.chart_infos.length>50&&e.chart_infos.splice(0,50);for(var r=[],a=e.chart_infos,h=0;h<a.length;h++){for(var l=a[h],p=0;p<l.open_places.length;p++)if(12!=l.open_places[p]&&24!=l.open_places[p]){var s={open_place:l.open_places[p],open_type:l.open_type,open_num:this.getSgjModel().historyNum};r.push(s),this.getSgjModel()._recordHistory.push(s)}this.getSgjModel().historyNum+=1}r.length>50?this.getSgjModel()._recordHistory=[].concat(r.splice(0,50)):this.getSgjModel()._recordHistory=[].concat(r)}Log.log(this.getSgjModel()._recordHistory),this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.chart]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onChartResBack,e)},i.prototype.onRankingListResBack=function(e){Log.log("onRankingListResBack",e),this.applyFunc(t.sgjControllerCon.onRankingListResBack,e),App.EasyLoading.hideLoading()},i.prototype.onSpecialPlayerNotifyBack=function(e){Log.log("onSpecialPlayerNotifyBack",e),this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.special]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onSpecialPlayerNotifyBack,e)},i.prototype.onSpecialPlayerActionNotifyBack=function(e){Log.log("onSpecialPlayerActionNotifyBack",e),this.applyFunc(t.sgjControllerCon.onSpecialPlayerActionNotifyBack,e)},i.prototype.onCancelBetResBack=function(e){Log.log("onCancelBetResBack",e),App.EasyLoading.hideLoading(),this.getSgjModel().userMoney=e.balance,this.applyFunc(t.sgjControllerCon.onCancelBetResBack,e)},i.prototype.onLastBetNotifyBack=function(e){Log.log("onLastBetNotifyBack",e),this.applyFunc(t.sgjControllerCon.onLastBetNotifyBack,e)},i.prototype.onBaseBetNotify=function(e){Log.log("onBaseBetNotify",e),this.getSgjModel().initGameMss[t.sgjControllerCon.onGame_MSG.basebet]=t.conFun.deepClone(e),this.applyFunc(t.sgjControllerCon.onBaseBetNotifyBack,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.sgjControllerCon.NET_MSG.PLAYER_INFO_NOTIFY,this.onPlayerInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Online_Count_Notify,this.onOnlineCountNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Issue_Notify,this.onIssueNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.State_Notify,this.onStateNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Limit_Notify,this.onLimitNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Bet_Res,this.onBetResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Player_Bet_Info_Notify,this.onPlayerBetInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Game_Bet_Info_Notify,this.onGameBetInfoNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Game_Result_Notify,this.onGameResultNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Chart_Res,this.onChartResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Ranking_List_Res,this.onRankingListResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Special_Player_Notify,this.onSpecialPlayerNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Special_Player_Action_Notify,this.onSpecialPlayerActionNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Cancel_Bet_Res,this.onCancelBetResBack,this),this.addListener(t.sgjControllerCon.NET_MSG.Last_Bet_Notify,this.onLastBetNotifyBack,this),this.addListener(t.sgjControllerCon.NET_MSG.BASE_BET_NOTIFY,this.onBaseBetNotify,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.sgjControllerCon.NET_MSG.Bet_Req,e)},i.prototype.requestRevokeBet=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.sgjControllerCon.NET_MSG.Cancel_Bet_Req)},i.prototype.winRecord=function(){this.send(t.sgjControllerCon.NET_MSG.Chart_Req,{table_id:0})},i.prototype.ranking=function(e){this.send(t.sgjControllerCon.NET_MSG.Ranking_List_Req,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"sgj.GameProxy")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function e(){}return e.numShake=function(t){egret.Tween.get(t).to({scaleX:1.1,scaleY:1.1},100,egret.Ease.sineInOut).call(function(){egret.Tween.get(t).to({scaleX:1,scaleY:1},100,egret.Ease.sineInOut)},this)},e.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},e.setBetMusic=function(t){switch(t){case 0:App.SoundManager.playEffect("SGJxiazhu1_mp3");break;case 1:App.SoundManager.playEffect("SGJxiazhu2_mp3");break;case 2:App.SoundManager.playEffect("SGJxiazhu3_mp3");break;case 3:App.SoundManager.playEffect("SGJxiazhu4_mp3");break;case 4:App.SoundManager.playEffect("SGJxiazhu5_mp3");break;case 5:App.SoundManager.playEffect("SGJxiazhu6_mp3");break;case 6:App.SoundManager.playEffect("SGJxiazhu7_mp3");break;case 7:App.SoundManager.playEffect("SGJxiazhu8_mp3")}},e.textReminder=function(e,i,o){var n=null;switch(e){case t.SgjBetResultCode.BetErrorPlace:n="下注位置错误";break;case t.SgjBetResultCode.BetErrorMoney:n="下注金额异常";break;case t.SgjBetResultCode.BetErrorState:n="非投注阶段，请稍后";break;case t.SgjBetResultCode.BetErrorOutLimitMin:n="当前投注限红为"+i+"~"+o;break;case t.SgjBetResultCode.BetErrorOutLimitMax:n=o?"当前投注限红为"+i+"~"+o:"超出限红,投注失败";break;case t.SgjBetResultCode.BetErrorOutLimitTotal:n="当前投注项已达到总限红,投注失败!";break;case t.SgjBetResultCode.BetErrorNoEnoughMoney:n="没有足够的余额"}App.ScrollTxtTips.showTip(n)},e.sgjcounterBet=function(t){switch(t){case.1:R.sendPlayerAction("Brnn2counter_bet1");break;case 1:R.sendPlayerAction("Brnn2counter_bet10");break;case 10:R.sendPlayerAction("Brnn2counter_bet50");break;case 100:R.sendPlayerAction("Brnn2counter_bet100")}},e.btnList={},e.lotterylist={overlist:["shz_card_0_png","shz_card_0_png","shz_card_0__png","shz_card_1_png","shz_card_1__png","shz_card_2__png","shz_card_3__png","shz_card_4__png","shz_card_5__png","shz_card_6__png","shz_card_7__png","shz_card_8__png"]},e}();t.conFun=e,__reflect(e.prototype,"sgj.conFun")}(sgj||(sgj={}));var sgj;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"sgj.DataNotify")}(sgj||(sgj={}));var sgj;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"sgj","GameSkin")||this;return i.winImgList=[],i.fuitIconList=[],i._mPlace={},i.index=0,i._ringlist=[],i.SingleList=[],i._winpos=5,i._index=1,i.imgPos=0,i.imgHighPos=0,i.onlineLight=[],i.maxOne=App.MathUtils.randomInt(1,24),i.nonAward=[],i.randomNum=[2,3,4],i.randomResult=[],i.randomNon=[5,15,21],i.randomWin=[],i.thirdLight=[],i.ThirdIndex=0,i.ThirdNum=0,i.ThirdLength=0,i.trainPos=[],i.randomLuckResult=[],i.luckType=1,i.lightList=[{n:1,m:5},{n:2,m:6},{n:3,m:7},{n:4,m:8},{n:3,m:7},{n:2,m:6},{n:1,m:5}],i.lightList2=[[4,5],[3,4,5,6],[2,3,4,5,6,7],[1,2,3,4,5,6,7,8]],i.lightList3=[[1],[1,2],[1,2,3],[1,2,3,4],[1,2,3,4,5],[1,2,3,4,5,6],[1,2,3,4,5,6,7],[1,2,3,4,5,6,7,8]],i.lightList5=[1,2,3,4,5,6,7,8],i.lightList6={1:8,2:7,3:6,4:5,5:4,6:3,7:2,8:1},i.lightIndex=0,i.lightIndex2=0,i.lightIndex3=0,i.lightIndex6=0,i.lightIndex7=0,i.indextype=0,i.indextypePos=[],i._sgjBones=null,i.boneList=[],i.boneName=["light","sweep"],i._sgjMessage.initComponent(t),i._sgjButtonBtn.initComponent(t),i._sgjToorBar.initComponent(t),i._sgjOuterLight.initComponent(t),i._posList={},i._imageList={},i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.createHeadPosition();for(var t=1;3>=t;t++)this._posList[t+0]={x:229.33,y:176.06-50*(t-1)},this._posList[t+3]={x:322.33+93*(t-1),y:77.06},this._posList[t+6]={x:600.33+93*(t-1),y:77.06},this._posList[t+9]={x:789.33,y:127.06+50*(t-1)},this._posList[t+12]={x:789.33,y:276.06+50*(t-1)},this._posList[t+15]={x:695.33-93*(t-1),y:375.06},this._posList[t+18]={x:416.33-93*(t-1),y:375.06},this._posList[t+21]={x:229.33,y:326.06-50*(t-1)};var i=this._imageList;i[1]=i[7]=i[13]=i[19]=0,i[8]=1,i[3]=i[15]=2,i[14]=3,i[9]=i[21]=4,i[20]=5,i[4]=i[16]=6,i[2]=7,i[10]=8,i[11]=9,i[22]=10,i[23]=11,i[18]=12,i[17]=13,i[6]=14,i[5]=15,this._sgjToorBar._copeImageList=this._imageList;var o=this.fuitIconList;o[1]=o[7]=o[8]=o[13]=o[19]=0,o[3]=o[14]=o[15]=1,o[9]=o[20]=o[21]=2,o[2]=o[4]=o[16]=3,o[10]=o[11]=4,o[22]=o[23]=5,o[17]=o[18]=6,o[5]=o[6]=7,this.initBroadcast(this),this.btnRedPacket2=lobby.RedPackBone.create(),this.btnRedPacket2.init(),this.GroupMain.addChild(this.btnRedPacket2),this.btnRedPacket2.x=39,this.btnRedPacket2.y=128,this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0},i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t;var i=this;i.createAperture(),i.runouterShowLight(),i.betInitData(),i.upUserInfo(),i._sgjToorBar.toolInitUI(),this._sgjMessage.initInfo(),this.setUserBet(0),this.applyFunc("requestWinRecord"),App.SoundManager.playBg("SGJbgm_mp3"),this._sgjButtonBtn.buttonIniUI(),this.reChargeEffect(),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate},i.prototype.upUserInfo=function(){this._mMoudel.userId=this._mMoudel.player.getUserId(),this._sgjMessage.setUserImage("ui_headImg_"+this._mMoudel.player.getAvatar()),this._sgjMessage.setUserFrame("ui_headBox_"+this._mMoudel.player.getAvatarBox()),this._sgjMessage.setUserName(this._mMoudel.player.getNickName()),this.gameSetMoney(App.CommonUtils.money2Str(this._mMoudel.player.getMoney()))},i.prototype.createHeadPosition=function(){this._sgjButtonBtn.createHeadPosition()},i.prototype.maskAppears=function(){this.maskBar.visible=!0},i.prototype.closeMaskAppears=function(){this.maskBar.visible=!1},i.prototype.startGameLight=function(){this.stopAllTwinkleAperture(),this.hideAllAperture();for(var t=this._mMoudel._mAwardList,e=0;e<t.length;e++){var i=t[e].open_place-1,o=this.imageLight.getChildAt(i);o.visible=!0,o.alpha=1}},i.prototype.InitUpdateImage=function(t){this.hideAllAperture();for(var e=0;t>e;e++){var i=t[e]-1,o=this.imageLight.getChildAt(i);o.alpha=1}},i.prototype.avatarShake=function(t){this._sgjMessage.avatarShake(t)},i.prototype.setInformation=function(t){var e=t.nick_name,i="ui_headImg_json.ui_headImg_"+(t.user_head?t.user_head:t.user_head+1),o=App.CommonUtils.money2Str(t.balance),n=t.play_role;this._sgjMessage.setPluteImage(i,n),this._sgjMessage.setPluteName(e,n),this.specialPlayerMoney(o,n),this._sgjMessage.playerDisplay(n)},i.prototype.specialPlayerMoney=function(t,e){this._sgjMessage.specialPlayerMoney(t,e)},i.prototype.revokeSpecialPlayerMoney=function(t,e){for(var i in this._mMoudel.playerIds)if(this._mMoudel.playerIds[i]==e){this._mMoudel.specialMoney[i]=t;var o=App.CommonUtils.money2Str(t);this.specialPlayerMoney(o,i)}},i.prototype.playerWinMoney=function(t,e){this._sgjMessage.playerWinMoney(t,e)},i.prototype.getMoneyLight=function(t){this._sgjMessage.getMoneyLight(t)},i.prototype.starFly=function(e){var i=this._sgjMessage.getPoint(),o=this._sgjButtonBtn.getParabolicPoint(e),n=this._sgjButtonBtn.getStarEndPoint(e),s=t.StarExpand.create();if(s){s.init(this);var r=500+50*e;s.run(i,o,n,r,function(){this._sgjButtonBtn.showStar(e),this._mPlace[e]=null}.bind(this),this)}},i.prototype.hideStar=function(){this._sgjButtonBtn.hideStar()},i.prototype.gameGetMoney=function(){return this._sgjMessage.gameGetMoney()},i.prototype.gameSetMoney=function(t){this._sgjMessage.gameSetMoney(t)},i.prototype.setUserBet=function(t){this._sgjMessage.setUserBet(t)},i.prototype.setWinTotalScore=function(t){this.winTotalScore.text=App.CommonUtils.money(t).toFixed(1)+""},i.prototype.setPersonalBetMoney=function(t,e){this._sgjButtonBtn.setPersonalBetMoney(t,e)},i.prototype.setentireBetMoney=function(t,e){this._sgjButtonBtn.setentireBetMoney(t,e)},i.prototype.setMultipleNum=function(t){this._sgjButtonBtn.setMultipleNum(t)},i.prototype.setTimeNum=function(t){this.setMultipleNum(t[0]),this._sgjButtonBtn.setAllTimeNum();for(var e=0;e<t.length;e++)if(4>e){var i=t[e];this._sgjButtonBtn.setTimeNum(e,i)}},i.prototype.setonlineNum=function(t){this._sgjToorBar.setonlineNum(t)},i.prototype.onlineShake=function(){this._sgjToorBar.onlineShake()},i.prototype.allButtonAshed=function(){this._sgjButtonBtn.allButtonAshed()},i.prototype.allButtonLight=function(){this._sgjButtonBtn.allButtonLight()},i.prototype.continueBetLight=function(){this._sgjButtonBtn.continueBetLight()},i.prototype.continueBetAshed=function(){this._sgjButtonBtn.continueBetAshed()},i.prototype.revokeBetAshed=function(){this._sgjButtonBtn.revokeBetAshed()},i.prototype.revokeBetLight=function(){this._sgjButtonBtn.revokeBetLight()},i.prototype.overBet=function(){this._mMoudel.truebet.length&&(this._mMoudel.upperBureauchip.length=0,this._mMoudel.upperBureauchip=[],this._mMoudel.upperBureauchip=[].concat(this._mMoudel.truebet)),egret.Tween.removeTweens(this),this.allButtonAshed(),this.stopTimes(),this.cleanBetList()},i.prototype.cleanBetList=function(){for(var t=0;8>t;t++)this._mMoudel.betList[t]=0},i.prototype.recordCardDisplay=function(t){this._sgjToorBar.renderBead(t)},i.prototype.cleanState1=function(){egret.Tween.removeTweens(this),this.betInitData(),this.allButtonLight(),this.revokeBetAshed(),this.cleanMoneyLight(),this._mMoudel.upperBureauchip.length?this.continueBetLight():this.continueBetAshed(),this._mMoudel._specialPlayer=[],this._mMoudel._allBetPos=[],this._mMoudel._isFlylist=[],this.hideStar(),this._sgjButtonBtn.clearFlyWinChip(),this._sgjButtonBtn.removebetFiyChips()},i.prototype.betInitData=function(){this._sgjButtonBtn.clearAllBetMoney(),this.betTotalScore.text="0.0",this.winTotalScore.text="0.0"},i.prototype.clearBetMoney=function(){this._sgjButtonBtn.clearBetMoney()},i.prototype.btnNumShake=function(t,e){this._sgjButtonBtn.btnNumShake(t,e)},i.prototype.btnAllNumShake=function(){var e=this.betTotalScore;t.conFun.numShake(e)},i.prototype.btnRewardNumShake=function(){var e=this.winTotalScore;t.conFun.numShake(e)},i.prototype.marryRunNumShake=function(t){if(!(t>=this._mMoudel._mAwardList.length)){var e=this._mMoudel._mAwardList[t].win_money;e>0&&this.btnRewardNumShake()}},i.prototype.scaleAllBetMoney=function(){this._sgjButtonBtn.scaleAllBetMoney(),this.winTotalScore.scaleX=1,this.winTotalScore.scaleY=1,this.betTotalScore.scaleX=1,this.betTotalScore.scaleY=1},i.prototype.flyWinChip=function(){this._sgjButtonBtn.flyWinChip()},i.prototype.createFlyCoin=function(t,e){this._sgjButtonBtn.createFlyCoin(t,e)},i.prototype.createWinChip=function(t,e){this._sgjButtonBtn.createWinChip(t,e)},i.prototype.runouterShowLight=function(){this._sgjOuterLight.runouterShowLight()},i.prototype.sgjCountdownTimer=function(t){this.index=0;var e=Math.round(t/1e3);this.sgjTime.text=e+"",this.timeGroup.visible=!0,this.index=e,App.TimerManager.removeAll(this),App.TimerManager.doTimer(1e3,e,this.start,this,this.over,this)},i.prototype.start=function(){return this.index--,this.index<=5&&this.index>0?(this.sgjTime.textColor=16711680,t.conFun.numShake(this.sgjTime),App.SoundManager.playEffect("SGJdaojishi_mp3")):this.sgjTime.textColor=16777215,this.index<0?(this.index=0,this.sgjTime.text=""+this.index,void App.TimerManager.removeAll(this)):void(this.sgjTime.text=""+this.index)},i.prototype.over=function(){this.index=0,this.sgjTime.text="",this.timeGroup.visible=!1,this.sgjTime.textColor=16777215,this.overBet()},i.prototype.stopTimes=function(){App.TimerManager.removeAll(this),this.index=0,this.sgjTime.text="",this.timeGroup.visible=!1,this.sgjTime.textColor=16777215},i.prototype.createAperture=function(){this.clearAperture();for(var t=0;6>t;t++){var e=new eui.Image;e.source="sgj_table_json.xysgj_ui_paodengkuang",e.width=101,e.height=57,e.alpha=0,e.name=t+"",e.x=0,e.y=0,this.GroupMain.addChild(e),this._ringlist.push(e)}},i.prototype.createSingleAperture=function(t){var e=new eui.Image;e.source="sgj_table_json.xysgj_ui_paodengkuang",e.width=101,e.height=57,e.alpha=1,e.x=this._posList[t].x,e.y=this._posList[t].y,this.GroupMain.addChild(e),this.SingleList.push(e)},i.prototype.SingletwinkleAperture=function(){for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];App.EffectUtils.startFlicker(e,100)}},i.prototype.SingleStoptwinkleAperture=function(){for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];App.EffectUtils.stopFlicker(e)}},i.prototype.SingclearAperture=function(){if(this.SingleList.length)for(var t=0;t<this.SingleList.length;t++){var e=this.SingleList[t];e.parent&&e.parent.removeChild(e)}this.SingleList=[]},i.prototype.clearAperture=function(){if(this._ringlist.length)for(var t=0;t<this._ringlist.length;t++){var e=this._ringlist[t];e.parent&&e.parent.removeChild(e)}this._ringlist=[]},i.prototype.hideAperture=function(){for(var t=1;t<this._ringlist.length;t++){var e=this._ringlist[t];e.alpha=0}},i.prototype.twinkleAperture=function(){for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t],i=e.open_place-1,o=this.imageLight.getChildAt(i);e.win_money>0&&App.EffectUtils.startFlicker(o,100)}},i.prototype.stopTwinkleAperture=function(){for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);App.EffectUtils.stopFlicker(i),i.alpha=1}},i.prototype.stopAllTwinkleAperture=function(){for(var t=0;24>t;t++){var e=this.imageLight.getChildAt(t);App.EffectUtils.stopFlicker(e),e.alpha=0}},i.prototype.getnum=function(t){for(var e in this._imageList)if(this._imageList[e]==t)return e},i.prototype.marryStartUp=function(){var t=0,e=this;t=this._winpos-1,this.winImgList=[],this.nonAward=[],this.thirdLight=[],this.winImgList.length=0,this.nonAward.length=0,App.TimerManager.removeAll(this),App.SoundManager.playEffect("SGJqidong_mp3"),App.TimerManager.doTimer(320,5,function(){var i=++t%24+1;e._index+=1,e.imgPos=i,e._index<3?e.updateImage(i,e._index):e.updateImage(i,3)},this,function(){App.TimerManager.removeAll(this),this.marryHighSpeed(this.imgPos),e._index=1},this)},i.prototype.marryHighSpeed=function(t){var e=t-1,i=this,o=0,n=this._mMoudel._mAwardList[0].open_place;this.winImgList.push(n),this.createLuckRandomNum(n);var s=n-e,r=0;s>0&&8>=s?r=72+(24-(8-s)):s>0&&s>8?r=72+(s-8):0>s?r=72+(24-(8-s)):0==s&&(r=88),App.SoundManager.playEffect("SGJgaosu_mp3"),App.TimerManager.doFrame(1.5,r,function(){var t=++e%24+1;o+=1,i.imgHighPos=t,2>=o?i.updateImage(t,3+o):i.updateImage(t,5)},this,function(){App.TimerManager.removeAll(this),i.updateMarry(this.imgHighPos,n)},this)},i.prototype.updateMarry=function(t,e){var i=t-1,o=this;this._mMoudel.countTotalScore(0),App.SoundManager.stopEff("SGJgaosu_mp3"),App.SoundManager.playEffect("SGJjiansu_mp3"),App.TimerManager.doTimer(190,99,function(){var t=++i%24+1;o.updateImage(t,1),t==e&&(this._winpos=t,App.TimerManager.removeAll(this),this.createRandomNum(t),R.setTimeOnce(function(){this.resultScore()},this,200))},this)},i.prototype.resultScore=function(){this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(0);var t=this._mMoudel._mAwardList.length;1==t&&3==this._mMoudel.lotteryType?this.singleOpen(this._mMoudel._mScoreAward):2==t&&1==this._mMoudel.lotteryType?(App.SoundManager.playEffect("SGJduokaichufa_mp3"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.moreOpenOne()},this,1500)):t>2&&4>=t&&1==this._mMoudel.lotteryType?(App.SoundManager.playEffect("SGJduokaichufa_mp3"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.moreOpenTwo()},this,1500)):t>4&&1==this._mMoudel.lotteryType?(App.SoundManager.playEffect("SGJduokaichufa_mp3"),App.TimerManager.doTimer(100,14,function(){this.changeInLight2()},this),R.setTimeOnce(function(){this.thirdLight.push(this._winpos),this.moreOpenThird(this._winpos,this._mMoudel._mAwardList[1].open_place)},this,1500)):t>=4&&2==this._mMoudel.lotteryType?(App.SoundManager.playEffect("SGJhuochechufa_mp3"),App.TimerManager.doTimer(100,29,function(){this.changeInLight2()},this),R.setTimeOnce(function(){var t=this._mMoudel._mAwardList.length-1;this.runningTrain(t)},this,3e3)):0==this._mMoudel.lotteryType&&(App.SoundManager.playEffect("SGJluckchufa_mp3"),App.TimerManager.doTimer(100,20,function(){this.changeInLight2()},this),this.luckSendLight())},i.prototype.singleOpen=function(t){R.removeAllTimeOut(this),t>0&&(this.twinkleAperture(),App.TimerManager.doTimer(100,19,function(){this.changeInLight()},this)),R.setTimeOnce(function(){this.stopTwinkleAperture(),this.settlementStage()},this,2e3)},i.prototype.settlementStage=function(){R.removeAllTimeOut(this);for(var e=this.getLotteryResults(),i=[],o=this,n=this._mMoudel._specialPlayer,s=0;s<e.length;s++){var r=this._imageList[e[s]];i.push(r)}this.applyFunc(t.sgjControllerCon.settlementStage,i);for(var a=this.getIndexNum(),h=[],l=0;l<e.length;l++){var p={open_place:e[l],open_type:this._mMoudel.lotteryType,open_num:a};h.push(p)}this.recordFuitflay(h);for(var c=[],u=[],d=0;d<e.length;d++){var r=this.fuitIconList[e[d]],m=this.findNum(c,r);m||c.push(r)}c=c.concat(this._mMoudel._allBetPos).sort();for(var y=0;y<c.length;y++)c[y]==c[y+1]&&u.push(c[y]);this._mMoudel._mAwardList;if(u.length){for(var _=[],g=0;g<u.length;g++){var f=this._mMoudel.allBetList,v=this._mMoudel._betInfoNotify;(f[u[g]]>0||v[u[g]]>0)&&(this.createWinChip(u[g],4),_.push(u[g]))}R.setTimeOnce(function(){for(var t=0;t<n.length;t++)o.getMoneyLight(n[t]);_.length&&o.getAllMoneyTestLight()},this,4500)}R.setTimeOnce(function(){for(var t=this.getBetLotteryResults(),e=0;e<t.length;e++){var i=t[e];o._sgjButtonBtn.setWinLight(i)}},this,3e3)},i.prototype.getBetLotteryResults=function(){for(var t=[],e=this._mMoudel._mAwardList,i=0;i<e.length;i++){var o=e[i].open_place,n=e[i].place,s=this.findNum(t,n);s||12==o||24==o||t.push(n)}return t},i.prototype.getAllMoneyTestLight=function(){var e=t.sgjBones.create();if(!e.parent){this.addChild(e),e.updateId("money_linght"),e.blendMode=egret.BlendMode.ADD;var i=this._sgjButtonBtn.getWinpos()[4],o=i.x,n=i.y;e.setPosition(o,n),e.play(1),e.addPlayEndCallBack(function(){e.parent&&t.sgjBones.realese(e)},this)}},i.prototype.cleanMoneyLight=function(){this._sgjMessage.cleanMoneyLight();for(var e=this.onlineLight;e.length;){var i=e.pop();i&&t.sgjBones.realese(i)}},i.prototype.recordFuitflay=function(t){this._sgjToorBar.dealRenderBead(t)},i.prototype.getIndexNum=function(){return this._sgjToorBar.getIndexNum()},i.prototype.getLotteryResults=function(){for(var t=[],e=this._mMoudel._mAwardList,i=0;i<e.length;i++){var o=e[i].open_place,n=this.findNum(t,o);n||12==o||24==o||t.push(o)}return t},i.prototype.moreOpenOne=function(){var t=this,e=this._mMoudel._mAwardList[1].open_place;this.winImgList.push(e);var i=this._winpos,o=e-i,n=0;o>0&&(n=o),this._mMoudel.countTotalScore(1),App.TimerManager.removeAll(this),App.SoundManager.playEffect("SGJduokai1_mp3"),App.TimerManager.doFrame(4,99,function(){var o=--i;0==o&&(o=i=24),t.updatemoreOpenOneImage(o,e),o==e&&(App.SoundManager.stopEff("SGJduokai1_mp3"),App.SoundManager.playEffect("SGJduokaikaitu_mp3"),App.TimerManager.removeAll(this),this.closemoreOpenOneImage(),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(1),R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200))},this)},i.prototype.updatemoreOpenOneImage=function(t,e){var i=t-1,o=this.imageLight.getChildAt(i);o.alpha=1,t!=e&&this.nonAward.push(i),this.changeInLight3()},i.prototype.closemoreOpenOneImage=function(){for(var t=0;t<this.nonAward.length;t++){var e=this.nonAward[t],i=this.imageLight.getChildAt(e);i.alpha=0}},i.prototype.moreOpenTwo=function(){var t=0;App.TimerManager.removeAll(this),App.TimerManager.doTimer(500,8,function(){t++,8==t?App.SoundManager.playEffect("SGJduokaikaitu_mp3"):App.SoundManager.playEffect("SGJduokai2_mp3");var e=this.getRandomNum();this.hideAllAperture();var i=this._winpos-1,o=this.imageLight.getChildAt(i);o.alpha=1;for(var n=0;n<e.length;n++){var s=e[n]-1,r=this.imageLight.getChildAt(s);r.alpha=1}},this,function(){this.changeWinImg()},this)},i.prototype.changeWinImg=function(){this.hideAllAperture();for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);i.alpha=1,this._mMoudel.countTotalScore(t+1),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(t+1)}R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200)},i.prototype.getRandomNum=function(){var t=[],e=App.MathUtils.randomArray(this.randomNum);this.changeInLight5(e);for(var i=0;e>i;i++){var o=App.MathUtils.randomArray(this.randomResult),n=this.findNum(t,o);n?i-=1:t.push(o)}return t},i.prototype.findNum=function(t,e){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1},i.prototype.createRandomNum=function(t){this.randomResult=[];for(var e=1;25>e;e++)12!=e&&24!=e&&e!=t&&this.randomResult.push(e)},i.prototype.moreOpenThird=function(t,e){var i=t-1;this.ThirdLength=0;var o=e-t,n=0;this.ThirdIndex?o>0&&12>o?n=24+o:o>0&&o>=12?n=o:0>o&&-12>o?n=24+(24+o):0>o&&o>=-12?n=24+o:0==o&&(n=24):o>0?n=24+o:0>o?n=24+(24+o):0==o&&(n=24),this._mMoudel.countTotalScore(this.ThirdIndex+1),this.SingletwinkleAperture();var s=this._mMoudel._mAwardList.length-1;App.TimerManager.removeAll(this),App.SoundManager.playEffect("SGJduokai3_mp3"),App.TimerManager.doFrame(4,n,function(){var t=++i%24+1;if(this.ThirdNum=t,this.ThirdLength++,this.changeInLight6(),0==this.ThirdIndex)if(this.ThirdLength<=2*s){var e=(this.ThirdLength%2,Math.floor(this.ThirdLength/2));this.upThirddateImage(t,e)}else this.upThirddateImage(t,s);else this.upThirddateImage(t,s-this.ThirdIndex)},this,function(){if(App.TimerManager.removeAll(this),this.ThirdIndex++,App.SoundManager.stopEff("SGJduokai3_mp3"),App.SoundManager.playEffect("SGJduokaikaitu_mp3"),this.thirdLight.push(this.ThirdNum),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(this.ThirdIndex),this.ThirdIndex==s)return this.ThirdIndex=0,this.lightIndex6=0,this.stopTwinkleAperture(),void this.changeLotteryResults();var t=this._mMoudel._mAwardList[this.ThirdIndex+1].open_place;this.moreOpenThird(this.ThirdNum,t)},this)},i.prototype.countAllCycleNum=function(t){for(var e=1;e<this._mMoudel._mAwardList.length;e++){var i=this._mMoudel._mAwardList[e];if(1==e){var o=i-t,n=0;o>0?n=24+o:0>o?n=24+(24-o):0==o&&(n=24)}}},i.prototype.changeLotteryResults=function(){this.hideAllAperture();for(var t=0;t<this._mMoudel._mAwardList.length;t++){var e=this._mMoudel._mAwardList[t].open_place-1,i=this.imageLight.getChildAt(e);i.alpha=1}R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200)},i.prototype.upThirddateImage=function(t,e){this.stopAllTwinkleAperture(),this.hideAllAperture(),this.lotteryAfterLight();var i=t-1,o=this.imageLight.getChildAt(i);if(o.alpha=1,App.EffectUtils.startFlicker(o,100),e>1)for(var n=0;e>n;n++){var s=t-2*n,r=s>=1?s-1:24+s-1,a=this.imageLight.getChildAt(r);a.alpha=1,App.EffectUtils.startFlicker(a,100)}},i.prototype.lotteryAfterLight=function(){for(var t=0;t<this.thirdLight.length;t++){var e=this.thirdLight[t]-1,i=this.imageLight.getChildAt(e);i.alpha=1}},i.prototype.runningTrain=function(t){var e=0;e=this._winpos-1,this.allInLightNormal(),this.lightIndex7=0,App.TimerManager.removeAll(this),App.TimerManager.doTimer(500,t,function(){App.SoundManager.playEffect("SGJhuochezengjia_mp3");var t=++e%24+1;this.imgPos=t;var i=t-1,o=this.imageLight.getChildAt(i);o.alpha=1,App.EffectUtils.startFlicker(o,100),this.lightIndex7++,this["inLight"+this.lightList6[this.lightIndex7]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"},this,function(){this.stopAllTwinkleAperture(),this.updateTrainImage(this.imgPos,t),this.trainStart(this.imgPos,t)},this)},i.prototype.trainStart=function(t,e){App.TimerManager.removeAll(this);var i=t-1,o=0;App.TimerManager.doFrame(9,4,function(){0==o&&App.SoundManager.playEffect("SGJhuochezhuandong_mp3"),o++;var t=++i%24+1;this.imgPos=t,this.updateTrainImage(t,e),this.changeInLight7(e)},this,function(){App.TimerManager.removeAll(this),this.trainMediumSpeed(this.imgPos,e)},this)},i.prototype.trainMediumSpeed=function(t,e){var i=t-1,o=this,n=this._mMoudel._mAwardList[1].open_place,s=n-i,r=0;s>0&&8>=s?r=168+(24-(8-s)):s>0&&s>8?r=168+(s-8):0>s?r=168+(24-(8-s)):0==s&&(r=184),App.SoundManager.stopBg(),App.TimerManager.doFrame(3,r,function(){var t=++i%24+1;this.imgPos=t,o.updateTrainImage(t,e),o.changeInLight7(e)},this,function(){App.TimerManager.removeAll(this),o.updateTrainMarry(this.imgPos,n,e)},this)},i.prototype.updateTrainMarry=function(t,e,i){var o=t-1,n=this;App.TimerManager.doFrame(9,99,function(){var t=++o%24+1;n.imgPos=t,n.updateTrainImage(t,i),n.changeInLight7(i),t==e&&(App.SoundManager.playBg("SGJbgm_mp3"),App.SoundManager.stopEff("SGJhuochezhuandong_mp3"),App.TimerManager.removeAll(this),this.lightIndex7=0,R.setTimeOnce(function(){this.resultTwinkle(this.imgPos,i)},this,200))},this)},i.prototype.resultTwinkle=function(t,e){this.changeInLightTwoker();
for(var i=function(){var t=o.trainPos[n],e=o.imageLight.getChildAt(t);o._mMoudel.countTotalScore(n+1),R.setTimeOnce(function(){App.SoundManager.playEffect("SGJduokaikaitu_mp3"),e.alpha=0,this.winlossTrain(e),this.setWinTotalScore(this._mMoudel._mScoreAward),this.marryRunNumShake(n+1)},o,500*n)},o=this,n=0;n<this.trainPos.length;n++)i();R.setTimeOnce(function(){var t=this._mMoudel._mTotalScore;this.singleOpen(t)},this,200+500*e)},i.prototype.winlossTrain=function(t){R.setTimeOnce(function(){t.alpha=1},this,500)},i.prototype.updateTrainImage=function(t,e){this.trainPos=[],this.hideAllAperture();var i=this._winpos-1,o=this.imageLight.getChildAt(i);o.alpha=1;var n=t-1,s=this.imageLight.getChildAt(n);if(s.alpha=1,e>1)for(var r=0;e>r;r++){var a=t-r,h=a>=1?a-1:24+a-1;this.trainPos.unshift(h);var l=this.imageLight.getChildAt(h);l.alpha=1}},i.prototype.luckSendLight=function(){App.TimerManager.removeAll(this),App.TimerManager.doTimer(290,7,function(){this.hideAllAperture();var t=this.imageLight.getChildAt(this._winpos-1);t.alpha=1,this.luckType=0==this.luckType?1:0,this.changeInLight8(this.luckType);for(var e=0;e<this.randomLuckResult.length;e++){var i=this.randomLuckResult[e],o=i%2,n=i-1;if(0==this.luckType&&0==o){var s=this.imageLight.getChildAt(n);s.alpha=1}else if(1==this.luckType&&1==o){var s=this.imageLight.getChildAt(n);s.alpha=1}}},this,function(){App.TimerManager.removeAll(this),this.luckType=1,this.hideAllAperture();var t=this._winpos-1,e=this.imageLight.getChildAt(t);e.alpha=1,this.luckRunLight()},this)},i.prototype.luckRunLight=function(){var t=this._mMoudel._mAwardList.length;2==t?this.moreOpenOne():t>2&&4>=t?this.moreOpenTwo():t>4&&(this.thirdLight.push(this._winpos),this.moreOpenThird(this._winpos,this._mMoudel._mAwardList[1].open_place))},i.prototype.createLuckRandomNum=function(t){this.randomLuckResult=[];for(var e=1;25>e;e++)e!=t&&this.randomLuckResult.push(e)},i.prototype.updateImage=function(t,e){this.hideAllAperture();var i=t-1,o=this.imageLight.getChildAt(i);if(o.alpha=1,e>1)for(var n=0;e>n;n++){var s=t-n,r=s>=1?s-1:24+s-1,a=this.imageLight.getChildAt(r);a.alpha=1}this.changeInLight()},i.prototype.hideAllAperture=function(){for(var t=0;24>t;t++){var e=this.imageLight.getChildAt(t);e.alpha=0}},i.prototype.changeImage=function(t,e){var i=this._ringlist[0];if(i.x=this._posList[t].x,i.y=this._posList[t].y,i.alpha=1,1==e)this.hideAperture();else for(var o=0;e>o;o++){var n=this._ringlist[o+1],s=t-o,r=s>=1?s:24+s;n.x=this._posList[r].x,n.y=this._posList[r].y,n.alpha=1}},i.prototype.changeInLight=function(){this.allInLightNormal();var t=this.lightList[this.lightIndex];for(var e in t){var i=t[e];this["inLight"+i].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}this.lightIndex++,this.lightIndex>=7&&(this.lightIndex=0)},i.prototype.changeInLight2=function(){this.allInLightNormal();for(var t=this.lightList2[this.lightIndex2],e=0;e<t.length;e++){var i=t[e];this["inLight"+i].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}this.lightIndex2++,this.lightIndex2>=4&&(this.lightIndex2=0)},i.prototype.changeInLight3=function(){this.allInLightNormal();for(var t=this.lightList3[this.lightIndex3],e=0;e<t.length;e++){var i=t[e];this["inLight"+i].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}this.lightIndex3++,this.lightIndex3>=8&&(this.lightIndex3=0)},i.prototype.changeInLight5=function(t){this.allInLightNormal();for(var e=0;t>e;e++){var i=App.MathUtils.randomArray(this.lightList5);this["inLight"+i].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}},i.prototype.changeInLight6=function(){var t=++this.lightIndex6%8+1;if(this.lightIndex6<=8){var e=(this.lightIndex6%2,Math.floor(this.lightIndex6/2));this.changeInLight6Img(t,e)}else this.changeInLight6Img(t,4)},i.prototype.changeInLight6Img=function(t,e){if(this.allInLightNormal(),this["inLight"+this.lightList6[t]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2",e>1)for(var i=0;e>i;i++){var o=t-2*i,n=o>=1?o:8+o;this["inLight"+this.lightList6[n]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}},i.prototype.changeInLight7=function(t){this.allInLightNormal(),this.indextypePos=[];var e=++this.lightIndex7%8+1;if(this["inLight"+this.lightList6[e]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2",t>1)for(var i=0;t>i;i++){var o=e-i,n=o>=1?o:8+o;this.indextypePos.unshift(n),this["inLight"+this.lightList6[n]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2"}},i.prototype.changeInLight8=function(t){this.allInLightNormal();for(var e=1;9>e;e++){var i=e%2;0==t&&0==i?this["inLight"+this.lightList6[e]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2":1==t&&1==i&&(this["inLight"+this.lightList6[e]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2")}},i.prototype.changeInLightTwoker=function(){for(var t=function(){var t=e.indextypePos[i],o=e["inLight"+e.lightList6[t]];e["inLight"+e.lightList6[t]].source="sgj_table_json.xysgj_ui_zhongyangcaideng2",R.setTimeOnce(function(){o.alpha=0,this.winlosschangeInLight(o)},e,500*i)},e=this,i=0;i<this.indextypePos.length;i++)t()},i.prototype.winlosschangeInLight=function(t){R.setTimeOnce(function(){t.alpha=1},this,500)},i.prototype.allInLightNormal=function(){for(var t=1;9>t;t++)this["inLight"+t].source="sgj_table_json.xysgj_ui_zhongyangcaideng1"},i.prototype.initBones=function(){this._sgjBones||(this._sgjBones=t.sgjBones.create())},i.prototype.initRenders=function(){if(!this._sgjBones.parent){this.settlement.addChild(this._sgjBones),this._sgjBones.updateId("fruit");var t=this.sunImage.x+258.5,e=this.sunImage.y+257.5;this._sgjBones.setPosition(t,e),this._sgjBones.play(99999)}},i.prototype.settlementAnimation=function(){this.initBones(),this.initRenders()},i.prototype.closetAnimation=function(){this._sgjBones&&this._sgjBones.parent&&(this._sgjBones.stopGame(),this._sgjBones.parent.removeChild(this._sgjBones))},i.prototype.clear=function(){this._sgjBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation)},i.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},i.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},i.prototype.diceInit=function(){if(!this.boneList.length)for(var e=0;2>e;e++){var i=t.sgjBones.create();this.boneList.push(i)}},i.prototype.diceInitRenders=function(){for(var t=0;2>t;t++)if(!this.boneList[t].parent){var e=this.boneName[t];this.moneyGroup.addChild(this.boneList[t]),this.boneList[t].updateId(e);var i=43.5,o=30;this.boneList[t].setPosition(i,o),this.boneList[t].play(0)}},i.prototype.clearbone=function(){var t=this.boneList;if(t)for(;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.payMoney=function(){App.SoundManager.playEffect("SGJanniu_mp3"),this.applyFunc("sgjGoRechargeMoney")},i.prototype.onClickBackLobby=function(){this.applyFunc("onClickBackLobby")},i.prototype.onClickBtnBet=function(){this.marryStartUp()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._sgjButtonBtn.addEvent(),this._sgjToorBar.addEvent(),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this),App.CommonUtils.effectButton(this.moneyGroup,this.payMoney,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._sgjButtonBtn.removeEvent(),this._sgjToorBar.removeEvent(),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this),App.CommonUtils.removeButton(this.moneyGroup)},i.prototype.destroy=function(){if(!this._isDestroy){e.prototype.destroy.call(this),Log.log("水果机 GameView destroy"),App.TimerManager.removeAll(this),R.removeAllTimeOut(this),egret.Tween.removeTweens(this),this._sgjButtonBtn.destroy(),this._sgjToorBar.destroy(),this._sgjOuterLight.destroy(),this._sgjMessage.destroy(),this.winImgList=[],this.nonAward=[],this._sgjBones&&this._sgjBones.parent&&(this.settlement.removeChild(this._sgjBones),this.clear(),this._sgjBones.destroy()),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0);for(var t=this.onlineLight;t.length;){var i=t.pop();i&&i.destroy()}this._sgjBones=void 0,this.clearbone()}},i}(base.GameView);t.GameView=e,__reflect(e.prototype,"sgj.GameView")}(sgj||(sgj={}));var shz;!function(t){var e;!function(e){var i=function(){function e(){}return e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room||(e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk);var i=base.getController(e);i&&i.onCreate()},e.prototype.initialize=function(t){t==ControllerConst.Game&&App.setScaleModeSpecial();var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){App.setScaleModeNormal()},e}();e.shz=i,__reflect(i.prototype,"shz.Entrance.shz",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("shz.BoneAniFlag");return t._mIsInPool=!1,t},e.realese=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanFormPool=function(){ObjectPool.clearClass("shz.BoneAniFlag","destroy")},e.prototype.initDBRes=function(i){t.prototype.initDBRes.call(this,i),this.armature=this.createArmature("ani",i,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this),this.visible=!1},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj),this.visible=!1},e.prototype.play=function(){this.visible=!0,this.armature.play(e.Animation)},e.Animation="action1",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.BoneAniFlag=e,__reflect(e.prototype,"shz.BoneAniFlag")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e._currState="",e._index=0,e}return __extends(e,t),e.create=function(){var t,i=e.shzBonePool;return i&&(t=i.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var i=e.shzBonePool;i||(i=[]),t._mIsInPool=!0,t.clean(),i.push(t),e.shzBonePool=i}},e.cleanFormPool=function(){var t=e.shzBonePool;if(t)for(;t.length;){var i=t.pop();i.destroy()}},e.prototype.getState=function(){return this._currState},e.prototype.setState=function(t){this._currState=t},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.play(e.Animation,t)},e.prototype.play2=function(t){this.armature.play(e.Animation2,t)},e.shzBonePool=null,e.Animation="play",e.Animation2="play2",e._mActionList=[e.Animation,e.Animation2],e}(base.BaseGameObject);t.ShzGoldBones=e,__reflect(e.prototype,"shz.ShzGoldBones")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){for(var t=[],e=0;40>=e;e++){var i=10>e?"0"+e:""+e;t.push("jiesuanguang_000"+i+"_jpg")}this.initMc(t,30),this.blendMode=egret.BlendMode.ADD},e}(SpriteMovieClip);t.ShzResultMC=e,__reflect(e.prototype,"shz.ShzResultMC")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzAwardAnimation")||this;return t._ShzGoldBones=null,t._mxx=0,t._myy=0,t.touchEnabled=!1,t.touchChildren=!1,t.visible=!1,t}return __extends(i,e),i.prototype.bonesMotion=function(t,e){egret.Tween.get(this._ShzGoldBones).to({x:this._mxx},700,egret.Ease.sineInOut).call(function(){this.openWinpopup(t),this.winName.visible=!0,this.winName.source="reward"+e+"_png",this.winBack.visible=!0},this)},i.prototype.openWinpopup=function(t){this.winScore0.text=t+"",this.visible=!0,this.winpopup.visible=!0},i.prototype.closeWinPopup=function(){this.winScore0.text="0",this.winpopup.visible=!1},i.prototype.openBonus=function(t){this.winpopup.visible=!1,this.bonusScore.text=t+"",this.visible=!0,this.winBonus.visible=!0},i.prototype.closewinandBonus=function(){this.closeSettlementAnimation(),this.visible=!1,this.winBonus.visible=!1,this.winpopup.visible=!1,this.winScore0.text="0",this.bonusScore.text="0",this.winName.visible=!1,this.winBack.visible=!1},i.prototype.settlementAnimation=function(e,i){this.visible=!0,this._ShzGoldBones||(this._ShzGoldBones=new t.ShzGoldBones,this.settlement.addChild(this._ShzGoldBones)),this.settlement.visible=!0,this._ShzGoldBones.updateId("setWin");var o=App.StageUtils.getWidth()+458,n=App.StageUtils.getHeight()/2-55;this._mxx=App.StageUtils.getWidth()/2,this._myy=App.StageUtils.getHeight()/2-55,this._ShzGoldBones.setPosition(o,n),this._ShzGoldBones.play(99999),this.bonesMotion(e,i)},i.prototype.closeSettlementAnimation=function(){this._ShzGoldBones&&(this._ShzGoldBones.stopGame(),egret.Tween.removeTweens(this._ShzGoldBones)),this.settlement.visible=!1},i.prototype.clear=function(){this._ShzGoldBones.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.setAwardScore=function(t){this.winScore0.text=App.CommonUtils.moneyself(t)+""},i.prototype.getAwardScore=function(){return Number(this.winScore0.text)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._ShzGoldBones&&(egret.Tween.removeTweens(this._ShzGoldBones),this._ShzGoldBones.destroy())},i}(BaseEuiComponent);t.AwardAnimationView=e,__reflect(e.prototype,"shz.AwardAnimationView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzBottonButton")||this;return t.scorelist=[],t.index=0,t.thanBone=null,t.startBone=null,t.clickBone=null,t.betAllMoney=0,t.BtnType=0,t}return __extends(i,e),i.prototype.setScorelist=function(t){var e=t;JSON.stringify(this.scorelist.sort())!==JSON.stringify(e)&&(this.scorelist.length=0,this.scorelist=[],this.scorelist=[].concat(e),this.resetSetScore())},i.prototype.resetSetScore=function(){var e=this.scorelist[0];this.setScore(e),this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue),this.index=0,this.betAllMoney=t.conFun.countAllbet(e),this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney)},i.prototype.gameHight=function(){this.goGame.visible=!0,this.clickGame.visible=!1,this.ButtonGame_1.enabled=!0,this.ButtonGame_2.enabled=!0},i.prototype.gameAsh=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1},i.prototype.setStartGameBtn=function(t){this.ButtonGame_0.visible=t},i.prototype.setStartGameBone=function(t){this.goGame.touchEnabled=t},i.prototype.winandNotype=function(t){0==t?this.gameoverButtontype(!1):this.ButtonGame_1.enabled=!1},i.prototype.winningtype=function(t){1==t?(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1):(this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanGame.visible=!0)},i.prototype.generalAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!0,this.thanTimes0.enabled=!0,this.thanGame.visible=!0},i.prototype.numberAward=function(){this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!0,this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1},i.prototype.rotarybuttontype=function(){this.goGame.visible=!1,this.goGame.touchEnabled=!0,this.ButtonGame_1.visible=!0,this.ButtonGame_1.enabled=!0,this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse),R.setTimeOnce(function(){this.clickGame.visible=!1},this,300)},i.prototype.gameoverButtontype=function(e){this.goGame.visible=!0,this.goGame.touchEnabled=!0,this.clickGame.visible=!1,this.ButtonGame_1.visible=!1,this.ButtonGame_2.visible=!1,e?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse):this.normalGameOverBtn(),this.thanTimes0.enabled=!1,this.thanGame.visible=!1},i.prototype.normalGameOverBtn=function(){Number(this.LabelScore0.text)==this.scorelist[0]?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue):Number(this.LabelScore0.text)==this.scorelist[this.scorelist.length-1]?this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.LessTrue):this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllTrue)},i.prototype.revisionBetMoneyBtn=function(t){switch(t){case 1:this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!1,this.ButtonScoreAdd0.enabled=!1,this.ButtonScoreReduce0.enabled=!1;break;case 2:this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!0,this.ButtonScoreAdd0.enabled=!0,this.ButtonScoreReduce0.enabled=!0;break;case 3:this._ScoreReduce.enabled=!1,this._ScoreAdd.enabled=!0,this.ButtonScoreAdd0.enabled=!0,this.ButtonScoreReduce0.enabled=!1;break;case 4:this._ScoreReduce.enabled=!0,this._ScoreAdd.enabled=!1,this.ButtonScoreAdd0.enabled=!1,this.ButtonScoreReduce0.enabled=!0}},i.prototype.scoreButtonType=function(){this.ButtonGame_2.enabled=!1,this.thanTimes0.enabled=!1,this.thanGame.visible=!1},i.prototype.autoAnteType=function(){this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AllFalse)},i.prototype.startGameAppear=function(){this.goGame.visible=!0,this.goGame.touchEnabled=!0,this.clickGame.visible=!1},i.prototype.setUserName=function(t){this._shzUserInfo.setNickName(t)},i.prototype.setUserImage=function(t){this._Iconskin.setUserImage(t)},i.prototype.setUserFrame=function(t){this._Iconskin.setUserFrame(t)},i.prototype.setUserMoney=function(t){this._shzUserInfo.setMoney(t)},i.prototype.getTotalMoney=function(){return this.betAllMoney},i.prototype.getUserMoney=function(){return this._shzUserInfo.getMoney()},i.prototype.setAllBetMoney=function(t){this.LabelTotal.text=t+""},i.prototype.setScore=function(t){this.LabelScore0.text=t+""},i.prototype.setIndex=function(t){this.index=t},i.prototype.getDIScore=function(){return this.LabelScore0.text},i.prototype.showMenu=function(t){R.intervalTime()&&(App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?egret.Tween.get(this.zidongUp0).to({y:0},100):this.retractMenu(),R.sendPlayerAction("SHZauto_startgame"))},i.prototype.retractMenu=function(){egret.Tween.get(this.zidongUp0).to({y:315},100),this.BtnType=0},i.prototype.setcurrentTime=function(t){"无限"==t?(this.times.text="",this._inginite.visible=!0,this._imgAnto.visible=!1):(this.times.text=t+"",this._inginite.visible=!1,this._imgAnto.visible=!0)},i.prototype.getRabioMoney=function(){return this._shzUserInfo.getMoney()},i.prototype.setRabioMoney=function(t){this._shzUserInfo.setMoney(t)},i.prototype.scoreReduce=function(){if(R.intervalTime()&&this.scorelist.length){App.SoundManager.playEffect("anniu_mp3"),this.index--;var e=this.scorelist[this.index];if(this.betAllMoney=t.conFun.countAllbet(e),this.LabelScore0.text=e,this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney),R.sendPlayerAction("SHZantes_playafterswitch"),0==this.index)return this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.AddTrue),void(this.index=0);this._ScoreAdd.enabled||(this._ScoreAdd.enabled=!0),this.ButtonScoreAdd0.enabled||(this.ButtonScoreAdd0.enabled=!0),this.onHotIconBegin(this._ScoreReduce)}},i.prototype.scoreAdd=function(){if(R.intervalTime()&&this.scorelist.length){App.SoundManager.playEffect("anniu_mp3"),this.index++;var e=this.scorelist.length-1,i=this.scorelist[this.index];if(this.betAllMoney=t.conFun.countAllbet(i),this.LabelScore0.text=i,this.LabelTotal.text=this.betAllMoney+"",this.applyFunc("setbetMoney",this.betAllMoney),R.sendPlayerAction("SHZantes_playafterswitch"),this.index==e)return this.revisionBetMoneyBtn(t.ShzBetMoneyBtnType.LessTrue),void(this.index=e);this._ScoreReduce.enabled||(this._ScoreReduce.enabled=!0),this.ButtonScoreReduce0.enabled||(this.ButtonScoreReduce0.enabled=!0),this.onHotIconBegin(this._ScoreAdd)}},i.prototype.onHotIconBegin=function(t){egret.Tween.get(t).to({scaleX:.8,scaleY:.8},80).to({scaleX:1,scaleY:1},80)},i.prototype.timesButton=function(){this.automaticGroup.visible=!0,this.automatic0.visible=!1,this._autoIcon.visible=!1,this.retractMenu()},i.prototype.automaticValue=function(){var t=this.automatic0.visible;return t},i.prototype.stopAutomatic=function(){this.thanGame.visible=!1,this.automaticGroup.visible=!1,this.automatic0.visible=!0,this._autoIcon.visible=!0,this.times.text="",this.applyFunc("stopAllGame")},i.prototype.stopGameBtn=function(){App.SoundManager.playEffect("anniu_mp3"),this.stopAutomatic()},i.prototype.thanSweep=function(){this.thanBone||(this.thanBone=new t.ShzGoldBones,this.thanGame.addChild(this.thanBone)),this.thanGame.visible=!1,this.thanBone.updateId("specific");var e=this.timesGroup.getChildAt(0).x+65,i=this.timesGroup.getChildAt(0).y+33.5;this.thanBone.setPosition(e,i),this.thanBone.play(99999)},i.prototype.closethanSweep=function(){this.thanBone&&this.thanBone.destroy()},i.prototype.startSweep=function(){this.thanSweep(),this.startBone||(this.startBone=new t.ShzGoldBones,this.goGame.addChild(this.startBone)),this.startBone.updateId("goStart");var e=this.timesGroup.getChildAt(0).x+77,i=this.timesGroup.getChildAt(0).y+33.5;this.startBone.setPosition(e,i),this.startBone.play(99999)},i.prototype.closestartSweep=function(){this.startBone&&this.startBone.destroy()},i.prototype.startclickSweep=function(){this.clickBone||(this.clickBone=new t.ShzGoldBones,this.clickGame.addChild(this.clickBone)),this.clickGame.visible=!0,this.clickBone.updateId("startClick");var e=this.timesGroup.getChildAt(0).x+77,i=this.timesGroup.getChildAt(0).y+33.5;this.clickBone.setPosition(e,i),this.clickBone.blendMode=egret.BlendMode.NORMAL,this.clickBone.play(1);var o=this;this.clickBone.addPlayEndCallBack(function(){o.clickGame.visible=!1},this)},i.prototype.closestartclickSweep=function(){this.clickBone&&this.clickBone.destroy(),this.clickBone=null},i.prototype.onBack=function(){R.intervalTime()&&(this.stopAutomatic(),this.thanGame.visible=!1,Log.log("进入比倍游戏"),App.SoundManager.playEffect("lingdang_mp3"),this.applyFunc("RatioGame"),R.sendPlayerAction("SHZratio_enter"))},i.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},i.prototype.startGame=function(){R.intervalTime()&&this.scorelist.length&&(this.goGame.visible=!1,this.startclickSweep(),Log.log("开始游戏"),this.applyFunc("startGame"),R.sendPlayerAction("SHZmanual_startgame"))},i.prototype.stopGame=function(){if(R.intervalTime()){this.stopAutomatic(),App.SoundManager.stopEff("gundong_mp3"),App.SoundManager.playEffect("tingzhi_mp3");for(var t=1;6>t;t++)this.applyFunc("overone",t);this.applyFunc("stopShufflecard"),R.sendPlayerAction("SHZmanual_allstop")}},i.prototype.opensurround=function(t){this.applyFunc("opensurround",t)},i.prototype.scoreGame=function(){R.intervalTime()&&(this.stopAutomatic(),App.SoundManager.playEffect("anniu_mp3"),this.scoreButtonType(),this.applyFunc("setscoreGame"))},i.prototype.automaticNumber=function(t){if(R.intervalTime()&&this.scorelist.length){var e=Number(t.currentTarget.name);App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("setAutomaticNumber",e)}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.goGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber,this);this.automatic1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGameBtn,this),this.thanTimes0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.goGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this),this.ButtonGame_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGame,this),this.ButtonGame_2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreGame,this),this.automatic0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.ButtonScoreReduce0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreReduce,this),this.ButtonScoreAdd0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.scoreAdd,this);for(var t=0;4>t;t++)this["time_"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.automaticNumber,this);this.automatic1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.stopGameBtn,this),this.thanTimes0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.closethanSweep(),this.closestartSweep(),this.closestartclickSweep(),R.removeAllTimeOut(this)},i}(BaseEuiComponent);t.BottonButtonView=e,__reflect(e.prototype,"shz.BottonButtonView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzToolBar")||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(BaseEuiComponent);t.cardView=e,__reflect(e.prototype,"shz.cardView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzIconSkin")||this}return __extends(e,t),e.prototype.setUserImage=function(t){this.ImageIcon.source=t},e.prototype.setUserFrame=function(t){this.photoFrame.source=t},e.prototype.changeHead=function(t,e){this.ImageIcon.source=t,this.photoFrame.source=e},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.IconSkin=e,__reflect(e.prototype,"shz.IconSkin")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this,"ShzMessageGameSkin")||this;return e._maskRct=new egret.Rectangle(0,0,518,30),e._mIsMove=!1,e.uTxtBg.visible=!1,e.uTxtBg.mask=e._maskRct,e._mListMsg=[],e}return __extends(e,t),e.prototype.addMsg=function(t){for(Log.log("addMsg");t.length;)this._mListMsg.push(t.shift()),Log.log(this._mListMsg);this.nextMsg(),App.TimerManager.doFrame(1,999999,this.refreshPos,this)},e.prototype.restartMsg=function(){this.txt.x=this._maskRct.width+10,Log.log("重新播放")},e.prototype.nextMsg=function(){if(!this._mIsMove){if(Log.log("nextMsg"),this._mListMsg.length<=0)return void this.stop();this.uTxtBg.visible=!0,this._mIsMove=!0,this._mCurrMsg=this._mListMsg.shift(),this.txt.text=this._mCurrMsg.mTxtMsg,Log.log(this._mCurrMsg.mCurrTime),this._mCurrMsg.mEndX=-(this.txt.width+20),this.restartMsg()}},e.prototype.refreshPos=function(t){if(this._mIsMove){var i=this._mCurrMsg;this.txt.x-=i.mMoveSpeed*t/16,this.txt.x<i.mEndX&&(Log.log(i.mCurrTime),Log.log(i.mPlayTimes),this._mIsMove=!1,Log.log("msg.mCurrTime >= msg.mPlayTimes"),App.TimerManager.doTimer(e.DealyTimeMove,1,this.nextMsg,this))}},e.prototype.stop=function(){this.txt.text="新优惠活动已上线~欢迎新老会员踊跃参与~",this.txt.x=3,this.txt.y=5,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){for(t.prototype.destroy.call(this),this.removeEvent(),App.TimerManager.removeAll(this);this._mListMsg.length;)this._mListMsg.pop();this._mCurrMsg=void 0},e.DealyTimeMove=100,e}(BaseEuiComponent);t.MessageView=e,__reflect(e.prototype,"shz.MessageView");var i=function(){function t(){this.mTxtMsg="",this.mPriority=0,this.mPlayTimes=1,this.mCurrTime=0,this.mMoveSpeed=1,this.mEndX=0}return t}();t.BroadcastMsg=i,__reflect(i.prototype,"shz.BroadcastMsg")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return App.MessageCenter.dispatch(t.shzControllerCon.shzRecordCreateEnd),i}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.data.money>0&&(this.Issue.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Winning.text=this.data.money+"")},i}(eui.ItemRenderer);t.RecordIcon=e,__reflect(e.prototype,"shz.RecordIcon")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._mStopType=0,this._mCurrType=1,this._mStartTime=0,this._mDealyTime=0,this._flshsecet=!1,this._mIcon=t,this.init()}return t.prototype.init=function(){this._mTexRunList={},this._mTexStopList={};for(var t=2;10>t;t++)this._mTexRunList["tr"+t]=RES.getRes("shz_table_json.shuihu_ui_result_"+t+"_1_1"),this._mTexStopList["ts"+t]=RES.getRes("shz_table_json.shuihu_ui_result_"+t)},t.prototype.run=function(t,e,i){this._mStopType=t,this._flshsecet=i,this._mStartTime=egret.getTimer(),this._mDealyTime=e,App.TimerManager.doFrame(2,9999,this.update,this)},t.prototype.update=function(){this.updateType()},t.prototype.updateType=function(){this._mCurrType++,this._mCurrType>=10&&(this._mCurrType=2),this._mIcon.texture=this._mTexRunList["tr"+this._mCurrType],egret.getTimer()-this._mStartTime>800+this._mDealyTime&&this.stop()},t.prototype.stop=function(){this._mStopType==this._mCurrType&&(App.TimerManager.removeAll(this),this._mIcon.texture=this._mTexStopList["ts"+this._mCurrType])},t.prototype.destroy=function(){App.TimerManager.removeAll(this);for(var t=this._mTexRunList,e=this._mTexStopList,i=1;8>=i;i++)t["tr"+i]=void 0,e["ts"+i]=void 0,delete t["tr"+i],delete e["tr"+i];t=void 0,e=void 0,this._mIcon.texture=void 0,this._mIcon=void 0},t}();t.ShzCaiJinMC=e,__reflect(e.prototype,"shz.ShzCaiJinMC");var i=function(){function t(){}return t.SHZ=0,t.ZYT=1,t.DXTT=2,t.Song=3,t.Lin=4,t.Lu=5,t.DD=6,t.CQ=7,t.FT=8,t}();t.ShzType=i,__reflect(i.prototype,"shz.ShzType")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzDiceSkin")||this}return __extends(e,t),e.prototype.setdicenum=function(t,e){this.num1.source="shz_shake_json.shz_shake_dice_"+t,this.num2.source="shz_shake_json.shz_shake_dice_"+e
},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.ShzDiceSkin=e,__reflect(e.prototype,"shz.ShzDiceSkin")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzGameSetSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume()},i.prototype.openMusic=function(){App.SoundManager.setEffectOn(!0),App.SoundManager.setBgOn(!0)},i.prototype.showPopup=function(){App.EffectUtils.showView(this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick)},i.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},i.prototype.onOpen=function(t){switch(t.currentTarget){case this.ToggleVoice:App.SoundManager.setBgOn(this.ToggleVoice.selected);break;case this.ToggleMusic:App.SoundManager.setEffectOn(this.ToggleMusic.selected)}},i.prototype.effectSwitch=function(t){Log.log("effectSwitch"),Log.log(t.currentTarget.selected);var e=t.currentTarget.selected;this.applyFunc("effectSwitch",e)},i.prototype.btncloseVoice=function(){this.VoiceSlider.value=0,App.SoundManager.setBgVolume(0),R.sendPlayerAction("SHZmusic_without")},i.prototype.btncloseMusic=function(){this.MusicSlider.value=0,App.SoundManager.setEffectVolume(0),R.sendPlayerAction("SHZsound_without")},i.prototype.btnToggleVoice=function(){this.VoiceSlider.value=100,App.SoundManager.setBgVolume(1),R.sendPlayerAction("SHZmusic_with")},i.prototype.btnToggleMusic=function(){this.MusicSlider.value=100,App.SoundManager.setEffectVolume(1),R.sendPlayerAction("SHZsound_with")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.SetClose,this.closePoput,this,{}),this._effectSwitch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.VoiceSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.removeButton(this.SetClose),this._effectSwitch.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.effectSwitch,this),this.closeVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseVoice,this),this.closeMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btncloseMusic,this),this._ToggleVoice.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleVoice,this),this._ToggleMusic.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnToggleMusic,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzGameSet=e,__reflect(e.prototype,"shz.ShzGameSet")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzHelpSkin")||this;return i.index=1,i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){App.EffectUtils.showView(this),this.applyFunc(t.ShzCallBacks.setPopupClickOpen)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick)},i.prototype.goRight=function(){return this.index++,4==this.index?(this.shzRight.enabled=!1,this.index=4,void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index))):(this.shzLeft.enabled||(this.shzLeft.enabled=!0),void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index)))},i.prototype.goLeft=function(){return this.index--,1==this.index?(this.shzLeft.enabled=!1,this.index=1,void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index))):(this.shzRight.enabled||(this.shzRight.enabled=!0),void(this.rule.texture=RES.getRes("shz_popup_json.shuihu_ui_rule0"+this.index)))},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.helpClose,this.closePoput,this,{}),App.CommonUtils.effectButton(this.shzRight,this.goRight,this,{}),App.CommonUtils.effectButton(this.shzLeft,this.goLeft,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.helpClose),App.CommonUtils.removeButton(this.shzRight),App.CommonUtils.removeButton(this.shzLeft)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzHelp=e,__reflect(e.prototype,"shz.ShzHelp")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="ShzPopupskin",o._awardAnimation.initComponent(e),o._shzGameSet.initComponent(e),o._shzPrompt.initComponent(e),o._shzHelp.initComponent(e),o._shzRanking.initComponent(e),o._shzWinningRecord.initComponent(e),o}return __extends(e,t),e.prototype.initUI=function(){},e.prototype.openMusic=function(){this._shzGameSet.openMusic()},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this._shzHelp.addEvent(),this._shzGameSet.addEvent(),this._shzRanking.addEvent(),this._shzWinningRecord.addEvent(),this._shzPrompt.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this._shzHelp.removeEvent(),this._shzGameSet.removeEvent(),this._shzRanking.removeEvent(),this._shzWinningRecord.removeEvent(),this._shzPrompt.removeEvent()},e.prototype.openPopupPenetrate=function(){this.touchEnabled=!1,this.touchChildren=!1},e.prototype.closePopupPenetrate=function(){this.touchEnabled=!0,this.touchChildren=!0},e.prototype.closeAwardView=function(){this._awardAnimation.closewinandBonus()},e.prototype.closeSettlementAnimation=function(){this.closePopupPenetrate(),this._awardAnimation.closeSettlementAnimation()},e.prototype.openBonus=function(t){this._awardAnimation.openBonus(t)},e.prototype.closeWinPopup=function(){this._awardAnimation.closeWinPopup()},e.prototype.settlementAnimation=function(t,e){this.openPopupPenetrate(),this._awardAnimation.settlementAnimation(t,e)},e.prototype.setBillingScore=function(t){this._awardAnimation.setAwardScore(t)},e.prototype.getAwardScore=function(){return this._awardAnimation.getAwardScore()},e.prototype.openWinpopup=function(t){this._awardAnimation.openWinpopup(t)},e.prototype.showMenu=function(){this._shzPrompt.showMenu()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._awardAnimation.destroy(),this._shzHelp.destroy(),this._shzGameSet.destroy(),this._shzRanking.destroy(),this._shzWinningRecord.destroy(),this._shzPrompt.destroy()},e}(BaseEuiView);t.ShzPopupView=e,__reflect(e.prototype,"shz.ShzPopupView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzPromptSkin")||this;return t.visible=!1,t}return __extends(i,e),i.prototype.showMenu=function(){this.visible=!0,this.PromptBg.visible=!0,this.PromptMenu.scaleX=this.PromptMenu.scaleY=0,App.EffectUtils.showUI(this.PromptMenu),this.applyFunc(t.ShzCallBacks.setPopupClickOpen)},i.prototype.closePoput=function(){this.PromptBg.visible=!1;var e=this;App.EffectUtils.hideUI(this.PromptMenu,200,0,function(){e.visible=!1}),this.applyFunc(t.ShzCallBacks.setPopupClick)},i.prototype.ConfirmMoney=function(){this.applyFunc("ConfirmMoney"),this.closePoput()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.BtnConcer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.BtnConcer.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConfirmMoney,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzPrompt=e,__reflect(e.prototype,"shz.ShzPrompt")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.NickName.text=this.data.nick_name,this.Money.text=App.CommonUtils.money(this.data.win_money)+"",this.data.ordinal<4?(1==this.data.ordinal?(this.RankSrc.source="shz_popup_json.bjl_ui_jin",this.RankSrc.y=-3):2==this.data.ordinal?(this.RankSrc.source="shz_popup_json.bjl_ui_yin",this.RankSrc.y=2,this.RankSrc.scaleX=.8,this.RankSrc.scaleY=.8):(this.RankSrc.source="shz_popup_json.bjl_ui_tong",this.RankSrc.y=8,this.RankSrc.scaleX=.7,this.RankSrc.scaleY=.7),this.RankSrc.visible=!0,this.RankName.visible=!1):(this.RankName.text=this.data.ordinal,this.RankName.visible=!0,this.RankSrc.visible=!1))},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.ItemRenderer);t.ShzRankIcon=e,__reflect(e.prototype,"shz.ShzRankIcon")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzRankingSkin")||this;return i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){App.EffectUtils.showView(this,300,0,1,function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length;for(var i=0;i<t.length;i++){var o=t[i];e.addItem(o)}this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.ShzRankIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRankIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.touchMove=function(e){this.ScrollBox.width=t.shzControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.shzControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.shzControllerCon.Scroll_Width,this.ScrollBox.x=t.shzControllerCon.Rank_Bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RankClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RankClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzRanking=e,__reflect(e.prototype,"shz.ShzRanking")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._maskRct=new egret.Rectangle(0,0,88,17),e.skinName="BrnnRoomIcon",e}return __extends(e,t),e.create=function(){var t=e._lementBtnPool.pop();return t||(t=new e),t},e.release=function(t){t instanceof e?(t.clean(),e._lementBtnPool.push(t)):egret.error("_lement is not the instance of _lementBtn!")},e.prototype.init=function(t){this.dataChanged(t)},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.dataChanged=function(t){t.charts&&(this.Issue.text=App.DateUtils.getFormatBySecond(t.time,2),this.Winning.text=t.money)},e.prototype.clean=function(){R.removeFromParent(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e._lementBtnPool=[],e}(eui.Component);t.ShzRecord=e,__reflect(e.prototype,"shz.ShzRecord")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){return e.call(this,"ShzThirdButton")||this}return __extends(i,e),i.prototype.onBack=function(){this.applyFunc(t.shzControllerCon.postGetScore)},i.prototype.disabledBtn=function(){this.doubleRatio.enabled=!1,this._ratio.enabled=!1,this._halfRatio.enabled=!1,this._BtnGetScore.enabled=!1},i.prototype.lightbtn=function(){this.doubleRatio.enabled=!0,this._ratio.enabled=!0,this._halfRatio.enabled=!0,this._BtnGetScore.enabled=!0},i.prototype.huiBtnGetScore=function(){this._BtnGetScore.enabled=!1},i.prototype.setBetScore=function(t){this.uTxtTotalScore.text=t+""},i.prototype.getBetScore=function(){return Number(this.uTxtTotalScore.text)},i.prototype.getRabioMoney=function(){return this._userinfo.getMoney()},i.prototype.setRabioMoney=function(t){this._userinfo.setMoney(t)},i.prototype.betMoneyType=function(e){if(R.intervalTime()){var i=Number(e.currentTarget.name);this.applyFunc(t.ShzCallBacks.betMoneyType,i);var o=1==i?"SHZratio_half":2==i?"SHZratio_flat":"SHZratio_double";R.sendPlayerAction(o)}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._BtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._ratio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._halfRatio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._BtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this),this.doubleRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._ratio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this),this._halfRatio.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.betMoneyType,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(BaseEuiComponent);t.ShzThirdButton=e,__reflect(e.prototype,"shz.ShzThirdButton")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(){return t.call(this,"ShzUserInfo")||this}return __extends(e,t),e.prototype.setNickName=function(t){t&&(this.nickName.text=t)},e.prototype.setMoney=function(t){this.curryMoney.text=t+""},e.prototype.getMoney=function(){return this.curryMoney.text},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiComponent);t.ShzUserInfo=e,__reflect(e.prototype,"shz.ShzUserInfo")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,"ShzWinningRecordSkin")||this;return i.isCreateEnd=!1,i._lementList=[],i.visible=!1,i}return __extends(i,e),i.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1,App.EffectUtils.showView(this)},i.prototype.closePoput=function(){App.SoundManager.playEffect("anniu_mp3");var e=this;App.EffectUtils.hideView(this,function(){e.visible=!1,e.isCreateEnd=!1},this),this.applyFunc(t.ShzCallBacks.setPopupClick),App.MouseUtils.removeMouseWheel()},i.prototype.rankData=function(t){var e=new eui.ArrayCollection;this.listNum=t.length,t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},i.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordIcon,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/shz/euiSkin/ShzRecordIcon.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},i.prototype.shzRecordCreateEnd=function(){this.isCreateEnd||(this.isCreateEnd=!0,App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBox.touchEnabled=!0))},i.prototype.createLement=function(e){this.reMoveLement();for(var i=0;i<e.length;i++){var o=e[i],n=t.ShzRecord.create();n.init(o),n.x=0,n.y=0+63*i,this._addList.addChild(n),this._lementList.push(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this)}},i.prototype.touchBtn=function(t){this.applyFunc("onEnterBrnnGame",t)},i.prototype.reMoveLement=function(){for(;this._lementList.length;){var e=this._lementList.pop();e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchBtn,this),t.ShzRecord.release(e)}},i.prototype.touchMove=function(e){this.ScrollBox.width=t.shzControllerCon.Renew_Scroll_Width,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,e,t.shzControllerCon.Scroll_Bar_Height)},i.prototype.touchEnd=function(){this.ScrollBox.width=t.shzControllerCon.Scroll_Width,this.ScrollBox.x=t.shzControllerCon.Record_Bar_X},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.RecordClose,this.closePoput,this,{}),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(t.shzControllerCon.shzRecordCreateEnd,this.shzRecordCreateEnd,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.RecordClose),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(t.shzControllerCon.shzRecordCreateEnd,this.shzRecordCreateEnd,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.reMoveLement()},i}(BaseEuiComponent);t.ShzWinningRecord=e,__reflect(e.prototype,"shz.ShzWinningRecord")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(){var t=e.call(this,"ShzToolBar")||this;return t.BtnType=0,t.boneList=[],t.boneName=["light","sweep"],t}return __extends(i,e),i.prototype.initComponent=function(t,i){e.prototype.initComponent.call(this,t,i),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate},i.prototype.reChargeEffect=function(){this.diceInit(),this.diceInitRenders()},i.prototype.diceInit=function(){if(!this.boneList.length)for(var e=0;2>e;e++){var i=t.ShzGoldBones.create();this.moneyGroup.addChild(i),this.boneList.push(i)}},i.prototype.diceInitRenders=function(){for(var t=0;t<this.boneList.length;t++){var e=this.boneName[t];this.boneList[t].updateId(e);var i=43.5,o=50;this.boneList[t].setPosition(i,o),this.boneList[t].blendMode=egret.BlendMode.NORMAL,this.boneList[t].play(0)}},i.prototype.clearbone=function(){var t=this.boneList;if(t)for(;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.showMenu=function(t){var e=t.currentTarget.$children[0];App.SoundManager.playEffect("anniu_mp3"),this.BtnType=0==this.BtnType?1:0,1==this.BtnType?(egret.Tween.get(this.MenuBox0).to({y:0},100),e.source="shz_menu_json.shuihu_ui_newset"):(e.source="shz_menu_json.shuihu_ui_setting",egret.Tween.get(this.MenuBox0).to({y:-239},100))},i.prototype.setonlineNum=function(t){this.OnlineNum.text=""+t},i.prototype.showHelp=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showHelp"),R.sendPlayerAction("SHZhelp_open")},i.prototype.showGameSet=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showGameSet"),R.sendPlayerAction("SHZset_open")},i.prototype.showranking=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showranking"),R.sendPlayerAction("SHZrank_open")},i.prototype.showRecord=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("showRecord"),R.sendPlayerAction("SHZrecord_open")},i.prototype.payMoney=function(){this.applyFunc("geRechargeMoney")},i.prototype.backBody=function(){App.SoundManager.playEffect("anniu_mp3"),this.applyFunc("backBody")},i.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.menu0,this.showMenu,this,{}),App.CommonUtils.effectButton(this.ButtonExit0,this.backBody,this,{}),App.CommonUtils.effectButton(this.ButtonHelp0,this.showHelp,this,{}),App.CommonUtils.effectButton(this.ButtonSetup0,this.showGameSet,this,{}),App.CommonUtils.effectButton(this.ranking0,this.showranking,this,{}),App.CommonUtils.effectButton(this.Record0,this.showRecord,this,{}),App.CommonUtils.effectButton(this.moneyGroup,this.payMoney,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.menu0),App.CommonUtils.removeButton(this.ButtonExit0),App.CommonUtils.removeButton(this.ButtonSetup0),App.CommonUtils.removeButton(this.ranking0),App.CommonUtils.removeButton(this.Record0),App.CommonUtils.removeButton(this.moneyGroup),App.CommonUtils.removeButton(this.ButtonHelp0)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.clearbone()},i}(BaseEuiComponent);t.ToolBarview=e,__reflect(e.prototype,"shz.ToolBarview")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.test=function(){for(var t in this.linelist){if(this.linelist[t].length>1)for(var e=0;e<this.linelist[t].length;e++)this.shzarr.push(t),this.shzbrr.push(this.linelist[t][e]);else this.shzarr.push(t),this.shzbrr.push(this.linelist[t][0])}},t.Go_To_First_Game="Go_to_First_Game",t.Go_To_Second_Game="Go_to_Second_Game",t.Go_To_Third_Game="Go_to_Third_Game",t.Play_Ani_Flag="Play_Ani_Flag",t.CARD_HALF_WIDTH=74.5,t.CARD_HALF_HEIGHT=67.5,t.cardlist=[{openRole:2,openCardPlace:1},{openRole:1,openCardPlace:2},{openRole:2,openCardPlace:3},{openRole:4,openCardPlace:4},{openRole:1,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:2,openCardPlace:7},{openRole:1,openCardPlace:8},{openRole:2,openCardPlace:9},{openRole:6,openCardPlace:10},{openRole:4,openCardPlace:11},{openRole:8,openCardPlace:12},{openRole:2,openCardPlace:13},{openRole:7,openCardPlace:14},{openRole:1,openCardPlace:15}],t.GenExchange={winScore:1e4,islottery:!1,lotteryNum:0,psGenOpenline:[{openLine:1,shuihuRole:[{shuihuRole:1,openLinePlace:2},{shuihuRole:1,openLinePlace:5},{shuihuRole:1,openLinePlace:8}]},{openLine:4,shuihuRole:[{shuihuRole:2,openLinePlace:1},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:9}]},{openLine:5,shuihuRole:[{shuihuRole:2,openLinePlace:3},{shuihuRole:1,openLinePlace:5},{shuihuRole:2,openLinePlace:7}]}]},t.linelist={1:[[1,4,7],[7,10,13]],3:[[3,6,9]]},t.shzarr=[],t.shzbrr=[],t}();t.NoticeConst=e,__reflect(e.prototype,"shz.NoticeConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.CsGenPlayerBetReq=10801,t.ScGenPlayerBetRes=10802,t.CsGenPlayerAllStopReq=10803,t.ScGenRoleCardRes=10804,t.ScGenExchangeRes=10805,t.CsGenGetScoreReq=10806,t.ScGenGetScoreRes=10807,t.ScGenToLotterygameRes=10808,t.CsLotteryCardReq=10809,t.ScLotteryCardAndExchangeRes=10810,t.CsCompReq=10811,t.ScCompRes=10812,t.CsCompGameBetReq=10813,t.ScCompBetRes=10814,t.ScDiceRes=10815,t.ScOnLineNumberRes=10816,t.CsLeaderBoardReq=10817,t.ScLeaderBoardRes=10818,t.CsRecordReq=10819,t.ScRecordRes=10820,t.CsEnterSceneFinishReq=10821,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"shz.ProxyKeyConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.Game_Start_Req="Game_Start_Req",t.Game_Start_Back="Game_Start_Back",t.Get_Score_Req="Get_Score_Req",t.Get_Score_Back="Get_Score_Back",t.getRecordNum="getRecordNum",t}();t.SecondGameConst=e,__reflect(e.prototype,"shz.SecondGameConst")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.Scroll_Bar_Height=96,t.Scroll_Width=50,t.Renew_Scroll_Width=900,t.Rank_Bar_X=659,t.Record_Bar_X=657,t.CARD_PREFIX="result_",t.CARD_NORMAL_SUFFIX="_png",t.CARD_ASH_SUFFIX="_1_png",t.CARD_MOVE_SUFFIX="_1_1_png",t.CARD_FLASH_SUFFIX="_2_1_png",t.CARD_WIN_SUFFIX="_3_1_png",t.Game_Enter_Res="Game_Enter_Res",t.ondoubleBet="ondoubleBet",t.onNormalBet="onNormalBet",t.onhalfBet="onhalfBet",t.ondiceBet="ondiceBet",t.betMoneyblack="betMoneyblack",t.dicelotteryresult="dicelotteryresult",t.setRatioScore="setRatioScore",t.postGetScore="postGetScore",t.playGetScore="playGetScore",t.rankingScore="rankingScore",t.winningScore="winningScore",t.overall="full",t.shzRecordCreateEnd="shzRecordCreateEnd",t.openThirdWinpopup="openThirdWinpopup",t.Online="Online",t.basebet="basebet",t.NET_MSG={PLAYER_BET_REQ:"10801",PLAYER_BET_RES:"10802",PLAYER_ALL_STOP_REQ:"10803",GENROLE_CARD_RES:"10804",GENEXCHANGE_REQ:"10805",GEN_GET_SCORE_REQ:"10806",GEN_GET_SCORE_RES:"10807",COMP_REQ:"10811",COMP_RES:"10812",COMP_GAME_BET_REQ:"10813",COMP_BET_RES:"10814",DICE_RES:"10815",ONLINE_NUM:"10816",LEADER_BOARD_REQ:"10817",LEADER_BOARD_RES:"10818",RECORD_REQ:"10819",RECORD_RES:"10820",FINISH_REQ:"10821",RESULT_REQ:"10822",RESULT_RES:"10823",BASE_BET_RES:"10824",LOTT_MARQUEE_REQ:"10826"},t.onPlayerBetResCallBack="1001",t.onGenRoleCardResCallBack="1002",t.onGenExchangeResCallBack="1003",t.onLeaderBoardResCallBack="1004",t.onOnlineNumCallBack="1005",t.onLeaveSceneResCallBack="1006",t.onGenGetScoreResResCallBack="1007",t.setJettonCallBack="1008",t.onResultCallBack="1009",t}();t.shzControllerCon=e,__reflect(e.prototype,"shz.shzControllerCon");var i;!function(t){t[t.onPlayerBetResCallBack=1001]="onPlayerBetResCallBack",t[t.onGenRoleCardResCallBack=1002]="onGenRoleCardResCallBack",t[t.onGenExchangeResCallBack=1003]="onGenExchangeResCallBack",t[t.onLeaderBoardResCallBack=1004]="onLeaderBoardResCallBack",t[t.onOnlineNumCallBack=1005]="onOnlineNumCallBack",t[t.onLeaveSceneResCallBack=1006]="onLeaveSceneResCallBack",t[t.onGenGetScoreResResCallBack=1007]="onGenGetScoreResResCallBack",t[t.setJettonCallBack=1008]="setJettonCallBack",t[t.onResultCallBack=1009]="onResultCallBack",t[t.onSetBaseBetRes=1010]="onSetBaseBetRes",t[t.onEnterThirdGameBack=1011]="onEnterThirdGameBack",t[t.goEnterThirdGame=1012]="goEnterThirdGame",t[t.betMoneyType=1013]="betMoneyType",t[t.buttonAppears=1014]="buttonAppears",t[t.setPopupClick=1015]="setPopupClick",t[t.setPopupClickOpen=1016]="setPopupClickOpen",t[t.sendLottMarquee=1017]="sendLottMarquee"}(i=t.ShzCallBacks||(t.ShzCallBacks={}));var o;!function(t){t[t.ordinary=1]="ordinary",t[t.goldColor=2]="goldColor",t[t.overall=3]="overall"}(o=t.ShzwinnTypesConst||(t.ShzwinnTypesConst={}));var n;!function(t){t[t.halfBet=1]="halfBet",t[t.NormalBet=2]="NormalBet",t[t.doubleBet=3]="doubleBet"}(n=t.ShzbetTypeConst||(t.ShzbetTypeConst={}));var s;!function(t){t[t.BetSucc=1]="BetSucc",t[t.BetErrorNoEnoughMoney=2]="BetErrorNoEnoughMoney",t[t.BetNotMoney=3]="BetNotMoney",t[t.BetErrorState=4]="BetErrorState"}(s=t.ShzBetResultCode||(t.ShzBetResultCode={}));var r;!function(t){t[t.AllFalse=1]="AllFalse",t[t.AllTrue=2]="AllTrue",t[t.AddTrue=3]="AddTrue",t[t.LessTrue=4]="LessTrue"}(r=t.ShzBetMoneyBtnType||(t.ShzBetMoneyBtnType={}))}(shz||(shz={}));var shz;!function(t){var e;!function(t){t[t.Base=6100]="Base",t[t.FistGame=6101]="FistGame",t[t.SecondGame=6102]="SecondGame",t[t.ThirdGame=6103]="ThirdGame",t[t.Tip=6104]="Tip",t[t.brnnPopup=6105]="brnnPopup",t[t.ThirdPopup=6106]="ThirdPopup",t[t.FirstPopup=6107]="FirstPopup",t[t.Marry_Message=6108]="Marry_Message",t[t.Recharge=6109]="Recharge"}(e=t.ViewConst||(t.ViewConst={}))}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.First=1,t.Second=2,t.Third=3,t}();t.GameType=e,__reflect(e.prototype,"shz.GameType");var i=function(i){function o(){var t=i.call(this)||this;return t._proxy=null,t._viewTip=null,t._view=null,t._mCtrlFirst=null,t._mCtrlSecond=null,t._mCtrlThird=null,t._mMarryView=null,t._mCurrGameType=0,t}return __extends(o,i),o.prototype.onCreate=function(){i.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(){i.prototype.onInit.call(this),this.registers(),this.gotoFirstGame({score:0,isBet:!1,isAuto:!1}),App.ViewManager.open(t.ViewConst.Tip),App.ViewManager.open(t.ViewConst.Marry_Message),App.ViewManager.open(t.ViewConst.Base)},o.prototype.onExitGame=function(){i.prototype.onExitGame.call(this),this.goBack2Lobby()},o.prototype.inits=function(){i.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._viewTip=new t.GameTipView(this),this._mMarryView=new t.GameMarryView(this),this._mCtrlFirst=new t.GameCtrlFirst(this),this._mCtrlSecond=new t.GameCtrlSecond(this),this._mCtrlThird=new t.GameCtrlThird(this),this._mCtrlFirst.onCreate(),this._mCtrlSecond.inits(),this._mCtrlThird.inits()},o.prototype.gotoFirstGame=function(t){this._mCurrGameType>0&&this.onPlayAniFlag(),this._mCurrGameType=e.First,this._mCtrlThird.closeGame(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.openGame(t)},o.prototype.gotoSecondGame=function(t){this._mCurrGameType=e.Second,this.onPlayAniFlag(),this._mCtrlThird.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlSecond.openGame(t)},o.prototype.gotoThirdGame=function(t){this._mCurrGameType=e.Third,this.onPlayAniFlag(),this._mCtrlSecond.closeGame(),this._mCtrlFirst.closeGame(),this._mCtrlThird.openGame(t)},o.prototype.onPlayAniFlag=function(){this._viewTip.playFlag()},o.prototype.registers=function(){i.prototype.registers.call(this),this._mCtrlFirst.registers(),this._mCtrlSecond.registers(),this._mCtrlThird.registers(),App.ViewManager.register(t.ViewConst.Base,this._view),this.registerRecharge(),this.registerRedpacket(),App.ViewManager.register(t.ViewConst.Tip,this._viewTip),App.ViewManager.register(t.ViewConst.Marry_Message,this._mMarryView),this.registerFunc(t.NoticeConst.Go_To_First_Game,this.gotoFirstGame,this),this.registerFunc(t.NoticeConst.Go_To_Second_Game,this.gotoSecondGame,this),this.registerFunc(t.NoticeConst.Go_To_Third_Game,this.gotoThirdGame,this),this.registerFunc(t.NoticeConst.Play_Ani_Flag,this.onPlayAniFlag,this)},o.prototype.addListeners=function(){i.prototype.addListeners.call(this),this._mCtrlFirst.addListeners(),this._mCtrlSecond.addListeners(),this._mCtrlThird.addListeners(),this._proxy.addEvent()},o.prototype.removeListeners=function(){i.prototype.removeListeners.call(this),this._mCtrlFirst.removeListeners(),this._mCtrlSecond.removeListeners(),this._mCtrlThird.removeListeners(),this._proxy.removeEvent()
},o.prototype.onUserMoneyChange=function(t){var e=this._mCurrGameType;switch(e){case 1:this._mCtrlFirst.onFirstUserMoneyChange(t);break;case 2:this._mCtrlSecond.onSecondUserMoneyChange(t);break;case 3:this._mCtrlThird.onThirdUserMoneyChange(t)}},o.prototype.getModel=function(){return this._model},o.prototype.getGameType=function(){return this._mCurrGameType},o.prototype.destroy=function(){i.prototype.destroy.call(this),this._mCtrlFirst.destroy(),this._mCtrlSecond.destroy(),this._mCtrlThird.destroy(),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._mCtrlFirst=void 0,this._mCtrlSecond=void 0,this._mCtrlThird=void 0,this._view=void 0,this._model=void 0,this._proxy=void 0},o}(base.GameController);t.GameController=i,__reflect(i.prototype,"shz.GameController")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewFirst=null,i._PopupView=null,i._ShzGoldBones=null,i._model=null,i._proxy=null,i.betSucc=0,i.setAutomaticList=[25,50,100],i.soundlist=["shuihuzhuan","zhongyitang","titianxingdao","songjiang","linchong","luzhisheng","dao","qiang","fu"],i.drawlist=[0,1e4],i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()")},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModelFirst(this.getController()),this._proxy=new t.GameProxyFirst(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController(),LayerManager.UI_Popup)},i.prototype.openGame=function(e){null==this._mViewFirst&&(this._mViewFirst=new t.FirstGameView(this.getController()),App.ViewManager.register(t.ViewConst.FistGame,this._mViewFirst),this._mViewFirst.approachAnimation(),this.enterGameInfo()),Log.log("进入游戏1data",e),this._model.init(e.score),App.ViewManager.register(t.ViewConst.FirstPopup,this._PopupView),App.ViewManager.open(t.ViewConst.FistGame,this._model),App.ViewManager.open(t.ViewConst.FirstPopup),App.SoundManager.playBg("bgm1_mp3"),this._model.isEffect=this.getGameController().getModel().isEffect,this._model.isAuto=e.isAuto,e.isBet&&this.restGame();var i=this;R.setTimeOnce(function(){if(i._model.isbet&&i._model.isAuto&&i._model.automaticTime>=0||i._model.isbet&&i._model.isAuto&&-2==i._model.automaticTime){if(0==i._model.automaticTime)return i._mViewFirst.stopAutomatic(),i._model.isAuto=!1,void i.restGame();i.post()}else i._mViewFirst.stopAutomatic(),i._mViewFirst.lightVisible()},this,500),this.gameJoin()},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.FistGame)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc("startGame",this.startGame,this),this.registerFunc("stopGame",this.stopGame,this),this.registerFunc("overone",this.overone,this),this.registerFunc("backBody",this.backBody,this),this.registerFunc("winningsettype",this.winningsettype,this),this.registerFunc("setscoreGame",this.setscoreGame,this),this.registerFunc("gameStart",this.gameStart,this),this.registerFunc("setAutomaticNumber",this.setAutomaticNumber,this),this.registerFunc("setbetMoney",this.setbetMoney,this),this.registerFunc("stopAllGame",this.stopAllGame,this),this.registerFunc("stopShufflecard",this.stopShufflecard,this),this.registerFunc("showHelp",this.showHelp,this),this.registerFunc("showGameSet",this.showGameSet,this),this.registerFunc("showranking",this.showranking,this),this.registerFunc("showRecord",this.showRecord,this),this.registerFunc("RatioGame",this.RatioGame,this),this.registerFunc(t.shzControllerCon.Game_Enter_Res,this.gameEnter,this),this.registerFunc(t.shzControllerCon.rankingScore,this.rankingScore,this),this.registerFunc(t.shzControllerCon.winningScore,this.winningScore,this),this.registerFunc("effectSwitch",this.effectSwitch,this),this.registerFunc("geRechargeMoney",this.geRechargeMoney,this),this.registerFunc("ConfirmMoney",this.ConfirmMoney,this),this.registerFunc(t.ShzCallBacks.setPopupClick,this.setPopupClick,this),this.registerFunc(t.ShzCallBacks.setPopupClickOpen,this.setPopupClickOpen,this),this._PopupView.openMusic()},i.prototype.enter2edGame=function(){var e=this._mViewFirst.getTotalMoney(),i=this._model._winScore,o=this._model._blance;this._PopupView.closeAwardView();var n=this._model.isAuto;this.applyFunc(t.NoticeConst.Go_To_Second_Game,{score:i,award:0,bet:e,money:o,isAuto:n})},i.prototype.enter3edGame=function(e){var i=this._model._blance,o=this._model._winScore,n=e;this._PopupView.closeAwardView(),this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:o,award:0,bet:i,limit:n})},i.prototype.onFirstUserMoneyChange=function(t){this._model._mFirstScore=t.balance;var e=App.CommonUtils.money2Str(this._model._mFirstScore);this._mViewFirst.gameSetMoney(e)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.addDataListeners(),this.addEventListeners(),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent()},i.prototype.addDataListeners=function(){this._model.isBetDataNotify.addDataListener(this.isBetCallBack,this),this._model.isAutoBetDataNotify.addDataListener(this.isAutoBetCallBack,this),this._model.automaticTimeNotify.addDataListener(this.automaticTimeCallBack,this)},i.prototype.enterGameInfo=function(){this._model.isOpenGame=!0;for(var e in this._model.initGameMss)if(null!=this._model.initGameMss[e]){var i=this._model.initGameMss[e];switch(e){case t.shzControllerCon.Online:this.onOnlineNumCallBack(i);break;case t.shzControllerCon.basebet:this.onSetBaseBetRes(i)}}},i.prototype.startGame=function(){this.post(),this._mViewFirst.GroupLine.alpha=1,this._model.isAuto&&this._mViewFirst.stopAutomatic()},i.prototype.post=function(){if(this._model.initBetList.length){var t=(this._model.initBetList[0],App.CommonUtils.moneyself(this._model._blance),1e4*this._model.betMoney);if(!this.isLimit(t,this._model.isAuto)){t=1e4*this._model.betMoney;var e=[],i={isAuto:this._model.isAuto,betMoney:t};e.push(i);var o={betinfo:e};this._proxy.requestBet(o),this._mViewFirst.setStartGameBone(!1)}}},i.prototype.isLimit=function(t,e){void 0===e&&(e=!1);var i=!1,o=this._model._blance,n=1e4*this._model.initBetList[0]*9;return 0>=o?(this._PopupView.showMenu(),this._mViewFirst.startGameAppear(),i=!0):t>o&&(o>=n?e?(this._model.betMoney=this.autoSwitchbet(o),App.ScrollTxtTips.showTip("余额不足，已自动切换底注"),i=!1):(this._PopupView.showMenu(),this._mViewFirst.startGameAppear(),i=!0):(this._mViewFirst.startGameAppear(),this._model.isAuto&&this._mViewFirst.stopAutomatic(),this._mViewFirst.gameoverButtontype(this._model.isAuto),this._PopupView.showMenu(),i=!0)),i},i.prototype.autoSwitchbet=function(t){for(var e=this._model.initBetList,i=0;i<e.length;i++){var o=e[i],n=9*o,s=i;if(t>=n)return this._mViewFirst.setAllBetMoney(n),this._mViewFirst.setScore(o),this._mViewFirst.setIndex(s),n}},i.prototype.scorePost=function(){var t={gametype:1};this._proxy.requestScore(t),this._mViewFirst.scoreButtonType()},i.prototype.stopGame=function(){},i.prototype.overone=function(t){this.openCard(t)},i.prototype.backBody=function(){this._proxy.sendLeaveGame()},i.prototype.setScore=function(t){this._PopupView.openWinpopup(t)},i.prototype.seTNumScore=function(t){this._PopupView.openWinpopup(t)},i.prototype.winningsettype=function(t){this._mViewFirst.winningtype(t)},i.prototype.setscoreGame=function(){this._model.readyScore=!1,this.scorePost()},i.prototype.gameStart=function(){this._model.isbet=!0,this._model.isBetDataNotify.setData(this._model.isbet)},i.prototype.setAutomaticNumber=function(t){this._model.isAuto=!0,this._model.selectionTimes=t,3>t&&this._model.isbet?(this._model.automaticTime=this.setAutomaticList[t],R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times"),this.post()):3>t&&!this._model.isbet?(this._mViewFirst.timesButton(),this._model.automaticTime=this.setAutomaticList[t],this._mViewFirst.setcurrentTime(this._model.automaticTime),R.sendPlayerAction("SHZauto_"+this.setAutomaticList[t]+"times")):3==t&&this._model.isbet?(this._mViewFirst.setcurrentTime("无限"),this.post(),R.sendPlayerAction("SHZauto_unlimitedtimes"),this._model.automaticTime=-2):3!=t||this._model.isbet||(this._mViewFirst.timesButton(),this._mViewFirst.setcurrentTime("无限"),this._model.automaticTime=-2,R.sendPlayerAction("SHZauto_unlimitedtimes")),this._model.readyScore&&this.setscoreGame()},i.prototype.AutomaticReduce=function(){this._model.selectionTimes<3&&this._model.automaticTime>=1&&this._model.automaticTime--},i.prototype.setbetMoney=function(t){this._model.betMoney=t},i.prototype.stopAllGame=function(){this._model.isAuto&&(this._model.isAuto=!1,R.sendPlayerAction("SHZauto_cancel")),this._model.selectionTimes=0,this._model.automaticTime=0},i.prototype.stopShufflecard=function(){this._mViewFirst.stopShuffle()},i.prototype.showHelp=function(){this.closePopupPenetrate(),this._PopupView._shzHelp.showPopup()},i.prototype.showGameSet=function(){this.closePopupPenetrate(),this._PopupView._shzGameSet.initSet(),this._PopupView._shzGameSet.showPopup()},i.prototype.showranking=function(){this.closePopupPenetrate(),this._proxy.ranking({index:0,size:100}),App.EasyLoading.showOnTimeOut(),this._PopupView._shzRanking.showPopup()},i.prototype.showRecord=function(){this.closePopupPenetrate(),this._PopupView._shzWinningRecord.showPopup();var t=this.getGameController().getModel().recordList;t.length&&this._PopupView._shzWinningRecord.rankData(t)},i.prototype.rankingScore=function(t){this._PopupView._shzRanking.rankData(t)},i.prototype.winningScore=function(t){},i.prototype.effectSwitch=function(t){this.getGameController().getModel().isEffect=t,this._model.isEffect=t,t?(this._mViewFirst.closeEffect(),R.sendPlayerAction("SHZeffect_without")):R.sendPlayerAction("SHZeffect_with")},i.prototype.geRechargeMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.ConfirmMoney=function(){App.ViewManager.open(lobby.LobbyViewConst.Recharge)},i.prototype.setPopupClick=function(){this.openPopupPenetrate()},i.prototype.setPopupClickOpen=function(){this.closePopupPenetrate()},i.prototype.isBetCallBack=function(){},i.prototype.isAutoBetCallBack=function(){},i.prototype.automaticTimeCallBack=function(){},i.prototype.addEventListeners=function(){this.registerFunc(t.ShzCallBacks.onPlayerBetResCallBack,this.onPlayerBetResCallBack,this),this.registerFunc(t.ShzCallBacks.onGenRoleCardResCallBack,this.onGenRoleCardResCallBack,this),this.registerFunc(t.ShzCallBacks.onGenExchangeResCallBack,this.onGenExchangeResCallBack,this),this.registerFunc(t.ShzCallBacks.onOnlineNumCallBack,this.onOnlineNumCallBack,this),this.registerFunc(t.ShzCallBacks.onGenGetScoreResResCallBack,this.onGenGetScoreResResCallBack,this),this.registerFunc(t.ShzCallBacks.onResultCallBack,this.onResultCallBack,this),this.registerFunc(t.ShzCallBacks.onSetBaseBetRes,this.onSetBaseBetRes,this)},i.prototype.refreshBoard=function(){for(var e=[],i=["恭喜玩家 test001， 中1000倍大奖，获得奖金10000000。","恭喜玩家 test001 ，中全盘1000倍大奖，获得奖金8888888888888。","恭喜玩家 test001 在彩金游戏中，赢得奖金9999999999。","恭喜玩家 test001 在比倍游戏中100连胜，赢得奖金66666666666。","仅仅是测试数据，不要当真。"],o=0;o<i.length;o++){var n=new t.BroadcastMsg;n.mPriority=o,n.mTxtMsg=i[o],n.mPlayTimes=o,e.push(n)}this._mViewFirst.RoleMessage.addMsg(e)},i.prototype.onPlayerBetResCallBack=function(e){if(Log.log("onPlayerBetResCallBack",e),e.result==t.ShzBetResultCode.BetSucc){var i=App.CommonUtils.money2Str(e.balance),o=this._mViewFirst.automaticValue();this._model._blance=e.balance,this._mViewFirst.setUserMoney(i),this._model.isAuto&&o&&this._mViewFirst.timesButton()}else this._mViewFirst.startGameAppear(),e.result==t.ShzBetResultCode.BetErrorNoEnoughMoney?this._PopupView.showMenu():App.ScrollTxtTips.showTip("不存在该投注金额")},i.prototype.onGenRoleCardResCallBack=function(t){if(Log.log("onGenRoleCardResCallBack",t),t){this.resetOpenCard();for(var e=t.rolecard,i=e.toString(),o=[],n=0;n<i.length;n++)o.push(i[n]),this._model.roleList.push(Number(i[n]));for(var s=this._model.cardlist,r=0;r<s.length;r++){var a=s[r];a.openRole=o[r]}}},i.prototype.onGenExchangeResCallBack=function(e){if(Log.log("onGenExchangeResCallBack",e),e){if(this.resetSettlementData(),this._model._winScore=e.winScore,this._model._islottery=e.islottery,this._model._lotteryNum=e.lotteryNum,this.betShow(),!e.openline)return;if("full"==e.openline)this._model.winnTypes=e.openline,this._model.winLine=[].concat(t.conFun.winLine),this._model.winPos=[].concat(t.conFun.winPos);else{var i=JSON.parse(e.openline);this._model.winnTypes=void 0;for(var o in i){if(i[o].length>1)for(var n=0;n<i[o].length;n++)this._model.winLine.push(o),this._model.winPos.push(i[o][n]);else this._model.winLine.push(o),this._model.winPos.push(i[o][0])}}}},i.prototype.onOnlineNumCallBack=function(t){Log.log("onOnlineNumCallBack",t),this._model.isOpenGame&&this._mViewFirst._toolBarView.setonlineNum(t.OnlineNumber)},i.prototype.onGenGetScoreResResCallBack=function(t){Log.log("onGenGetScoreResResCallBack",t),t.balance&&(App.SoundManager.playEffect("defen1_mp3"),this._model._blance=t.balance,this.playGetScore())},i.prototype.onResultCallBack=function(t){Log.log("onResultCallBack",t)},i.prototype.onSetBaseBetRes=function(e){if(Log.log("onSetBaseBetRes",e),this._model.isOpenGame){this._model.initBetList.length=0,this._model.initBetList=[];for(var i=t.conFun.deepClone(e.basebet),o=[],n=0;n<i.length;n++){var s=Number(App.CommonUtils.money2StrTwo(i[n]));o.push(s)}this._model.initBetList=o.sort(function(t,e){return t-e}),this._mViewFirst.setScorelist(this._model.initBetList)}},i.prototype.winSpecialEffects=function(){for(var t=0;t<this._model.winPos.length;t++)App.TimerManager.doTimer(0+960*t,1,this.effect.bind(this,t),this,this.winSpecialEffectsover.bind(this,t),this)},i.prototype.effect=function(t){var e=this._model.winPos[t],i=this._model.winLine[t],o=this._model.isEffect;o||(this._mViewFirst.surround(e),this.linefish(e)),this._mViewFirst.lotteryLine(i),this._mViewFirst.lightShow(i),this.oneWinHight(e)},i.prototype.winSpecialEffectsover=function(t){var e=this;t==this._model.winPos.length-1&&App.TimerManager.doTimer(960,1,function(){e.allwinAnimation(this._model.winPos),e.alllightTwinkle(this._model.winLine)},this)},i.prototype.settlementResult=function(){var t=this;App.SoundManager.playEffect("zhanshi_mp3"),this._mViewFirst.closeEffect(),this._model.isEffect?(this.setScore(App.CommonUtils.money2Str(this._model._winScore)),this.winningsettype(this._model._islottery)):this.EffectAccount(),this._model._islottery?(this.winningsettype(this._model._islottery),App.TimerManager.doTimer(2e3,1,this.resultLottery,this)):this._model.isAuto?App.TimerManager.doTimer(1500,1,function(){t._model.isAuto?t.scorePost():t._model.readyScore=!0},this):this._model.readyScore=!0},i.prototype.EffectAccount=function(){var e=this,i=this._mViewFirst.getDIScore,o=App.CommonUtils.money2Str(this._model._winScore),n=App.CommonUtils.moneyself(Number(o)/i),s=0;this._model.winnTypes==t.shzControllerCon.overall?s=3:49>=n?s=0:n>=50&&119>=n?s=1:n>=120&&(s=2),this._PopupView.settlementAnimation(o,s),R.setTimeOnce(function(){e.winningsettype(this._model._islottery)},this,700)},i.prototype.resultLottery=function(){var t=this;this._PopupView.closeWinPopup(),this._PopupView.openBonus(this._model._lotteryNum),App.TimerManager.doTimer(1500,1,function(){Log.log("进入第二个游戏"),t._model._islottery=!1,t.enter2edGame()},this)},i.prototype.RatioGame=function(){this._proxy.reqEnterGame()},i.prototype.gameEnter=function(t){if(Log.log("进入第三个游戏"),t.isEnter){var e=t.limit[0].limitmoney;this.enter3edGame(e),this._model.readyScore=!1}},i.prototype.overallAwardTest=function(){var t=this._model.isEffect,e=this;if(!t)for(var i=this._model.cardlist,o=0;o<i.length;o++){var n=i[o];this._mViewFirst.setSurround(n.openCardPlace),this._mViewFirst.flashAnimation(n.openRole,n.openCardPlace)}for(var o=1;10>o;o++)this._mViewFirst.lotteryLine(o),this._mViewFirst.twinklelight(o);this.winHight(this._model.winPos),App.TimerManager.doTimer(1100,1,function(){e.allwinAnimation(this._model.winPos),e.alllightTwinkle(this._model.winLine)},this)},i.prototype.linefish=function(t){for(var e=0;e<t.length;e++){var i=Number(t[e]),o=this._model.cardlist[i-1].openRole;this._mViewFirst.flashAnimation(o,i)}},i.prototype.allwinAnimation=function(t){App.TimerManager.removeAll(this),this._mViewFirst.closetime();var e=this.findOpenRole();App.SoundManager.playEffect(this.soundlist[e-1]+"_mp3");for(var i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++){var n=Number(t[i][o]),s=this._model.cardlist[n-1].openRole;this._mViewFirst.individualAward(s,n)}var r=this;R.setTimeOnce(function(){r.settlementResult(),r.stopAllLighttTwinkle()},this,1900),this.winHight(this._model.winPos)},i.prototype.findOpenRole=function(){for(var t=this._model.winPos,e=[],i=[],o=0,n=0;n<t.length;n++)for(var s=0;s<t[n].length;s++){var r=Number(t[n][s]),a=this._model.cardlist[r-1].openRole;e.push(a)}i=this.findSameValue(e);var h=i.sort(function(t,e){return t.length==e.length?t[0]-e[0]:e.length-t.length});return o=h[0][0]},i.prototype.findSameValue=function(t){var e=t.sort(function(t,e){return t-e});if(!(e.length<=0)){for(var i=[],o=-1,n=0;n<e.length;n++){var s=e[n];o==s?i[i.length-1].push(s):(o=s,i.push([s]))}return i.length>1&&1==i[0][0]&&i.splice(0,1),i}},i.prototype.shzLight=function(){for(var t=0;t<this._model.winLine.lenght;t++)this._mViewFirst.oneShzlight(t)},i.prototype.alllightTwinkle=function(t){for(var e=0;e<t.length;e++){var i=Number(t[e]);this._mViewFirst.twinklelight(i)}},i.prototype.stopAllLighttTwinkle=function(){for(var t=this._model.winLine,e=0;e<t.length;e++){var i=t[e];this._mViewFirst.stoptTwinklelight(i)}},i.prototype.betShow=function(){this._model.isbet=!1,this._mViewFirst.rotarybuttontype(),this._mViewFirst.changeCard(),this._mViewFirst.onebyonelight(),this._model.isAuto&&!this._model.isbet&&this._model.automaticTime>=1&&(this.AutomaticReduce(),this._mViewFirst.setcurrentTime(this._model.automaticTime))},i.prototype.gameJoin=function(){var t=this.player;if(this._mViewFirst.setUserName(t.getNickName()),this._model._mFirstScore>0){this._model._blance=this._model._mFirstScore;var e=App.CommonUtils.money2Str(this._model._mFirstScore);this._mViewFirst.gameSetMoney(e)}else{this._model._blance=t.getMoney();var i=App.CommonUtils.money2Str(t.getMoney());this._mViewFirst.gameSetMoney(i)}this._mViewFirst.setUserImage("ui_headImg_"+t.getAvatar()),this._mViewFirst.setUserFrame("ui_headBox_"+t.getAvatarBox()),this._model._mFirstScore=0},i.prototype.openCard=function(t){var e=this._mViewFirst["GroupList"+t];App.SoundManager.playEffect("tingzhi_mp3");for(var i,o,n=this._model.cardlist,s=function(){var s=n[a];i=Math.floor((s.openCardPlace-1)/3)+1,o=Math.floor((s.openCardPlace-1)%3);var h=r;t==i&&(e.getChildAt(o).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+s.openRole),e==r._mViewFirst.GroupList5&&e.getChildAt(o)==r._mViewFirst.GroupList5.getChildAt(2)&&App.TimerManager.doTimer(167,1,function(){h._mViewFirst.stopShuffle(),h.openLottery()},r))},r=this,a=0;a<n.length;a++)s()},i.prototype.openLottery=function(){App.TimerManager.removeAll(this),this.setSHZantesPlayat();var e=this,i=Number(App.CommonUtils.money2Str(this._model._winScore));if(0!=i)this._mViewFirst.winandNotype(i),this._model.winnTypes==t.shzControllerCon.overall?this.overallAwardTest():this.generalAward();else if(Log.log("结果未中奖"),this._mViewFirst.lightVisible(),this.cardAahes(),this.restGame(),this.getGameController().getModel().isGameOver=!0,this._model.isbet&&this._model.isAuto&&this._model.automaticTime>=0||this._model.isbet&&this._model.isAuto&&-2==this._model.automaticTime){if(0==this._model.automaticTime)return this._mViewFirst.stopAutomatic(),void this.restGame();App.TimerManager.doTimer(1e3,1,function(){this._model.isAuto&&e.post()},this)}},i.prototype.setSHZantesPlayat=function(){var t=this._mViewFirst.getDIScore();R.sendPlayerAction("SHZantes_playat"+t)},i.prototype.generalAward=function(){this.winSpecialEffects(),this.cardAahes()},i.prototype.Next=function(){},i.prototype.getsurround=function(t){},i.prototype.cardAahes=function(){for(var t=this._model.cardlist,e=0;e<t.length;e++){var i=t[e],o=Math.floor((i.openCardPlace-1)/3)+1,n=Math.floor((i.openCardPlace-1)%3);this._mViewFirst["GroupList"+o].getChildAt(n).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+i.openRole+"_1")}},i.prototype.winHight=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++){var o=Number(t[e][i]),n=this._model.cardlist[o-1].openRole,s=Math.floor((o-1)/3)+1,r=Math.floor((o-1)%3);this._mViewFirst["GroupList"+s].getChildAt(r).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+n)}},i.prototype.oneWinHight=function(t){this.cardAahes();for(var e=0;e<t.length;e++){var i=Number(t[e]),o=this._model.cardlist[i-1].openRole,n=Math.floor((i-1)/3)+1,s=Math.floor((i-1)%3);this._mViewFirst["GroupList"+n].getChildAt(s).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+o)}},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t);if(Number(i)>0){var o={time:e,money:i};this.getGameController().getModel().recordList.unshift(o)}this.getGameController().getModel().changerecordList()},i.prototype.playGetScore=function(){Log.log("开始播放得分动画!"),this._model.isbet=!0;var t=this,e=Number(this._mViewFirst.gameGetMoney()),i=Number(App.CommonUtils.money2Str(this._model._winScore)),o=i/30;this.setRecordInit(this._model._winScore),App.TimerManager.doTimer(32,999,function(){if(e+=o,i-=o,t._mViewFirst.gameSetMoney(App.CommonUtils.moneyself(e)),t._PopupView.setBillingScore(App.CommonUtils.moneyself(i)),o>=i){if(t._PopupView.setBillingScore(0),t._mViewFirst.gameSetMoney(App.CommonUtils.money2Str(this._model._blance)),t._mViewFirst.lightVisible(),t.restGame(),t._model.isbet&&t._model.isAuto&&t._model.automaticTime>=0||t._model.isbet&&t._model.isAuto&&-2==t._model.automaticTime){if(0==t._model.automaticTime)return t._mViewFirst.stopAutomatic(),t.restGame(),void App.TimerManager.removeAll(t);t.automaticNext()}t._model.isAuto||App.TimerManager.removeAll(t)}},this)},i.prototype.restGame=function(){this._PopupView.closeAwardView(),this._PopupView.closeSettlementAnimation(),this._mViewFirst.gameHight(),this._mViewFirst.gameoverButtontype(this._model.isAuto),this._model.isbet=!0},i.prototype.automaticNext=function(){var t=this;App.TimerManager.doTimer(1e3,1,function(){App.TimerManager.removeAll(t),this._model.isAuto&&t.post()},this)},i.prototype.resetSettlementData=function(){this._model._winScore=0,this._model._islottery=!1,this._model._lotteryNum=0,this._model.winPos=[],this._model.winLine=[]},i.prototype.resetOpenCard=function(){this._model.roleList=[];for(var t=this._model.cardlist,e=0;e<t.length;e++)t[e].openRole=0},i.prototype.openPopupPenetrate=function(){this._PopupView.openPopupPenetrate()},i.prototype.closePopupPenetrate=function(){this._PopupView.closePopupPenetrate()},i.prototype.getMoudel=function(){return this._model},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._mViewFirst&&this._mViewFirst.destroy(),this._PopupView.destroy(),App.TimerManager.removeAll(this),t.ShzGoldBones.cleanFormPool(),R.removeAllTimeOut(this),this._PopupView=void 0,this._model=void 0,this._proxy=void 0,this._mViewFirst=void 0,Log.trace("销毁 shz.GameVtrlFirst")},i}(base.GameSeparateCtrl);t.GameCtrlFirst=e,__reflect(e.prototype,"shz.GameCtrlFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewSecond=null,i._model=null,i._proxy=null,i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.inits=function(){this._model=new t.GameModelSecond(this.getController()),this._proxy=new t.GameProxySecond(this.getController(),this._model)},i.prototype.openGame=function(e){null==this._mViewSecond&&(this._mViewSecond=new t.SecondGameView(this.getController()),App.ViewManager.register(t.ViewConst.SecondGame,this._mViewSecond)),Log.log("进入游戏2data",e),this._model.init(e.score,e.award,e.bet,e.money,e.isAuto),App.ViewManager.open(t.ViewConst.SecondGame,this._model),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm2_mp3")},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.SecondGame)},i.prototype.onGameStartReq=function(){this._proxy.reqGame()},i.prototype.onGameStartBack=function(){this._mViewSecond&&this._mViewSecond.startGame()},i.prototype.onGetScoreReq=function(){this._proxy.reqGetScore()},i.prototype.onGetScoreBack=function(){this._mViewSecond.playGetScore()},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t);if(Number(i)>0){var o={time:e,money:i};this.getGameController().getModel().recordList.unshift(o)}this.getGameController().getModel().changerecordList()},i.prototype.onSecondUserMoneyChange=function(t){this._model.mPlayerMoney=t.balance;var e=App.CommonUtils.money2Str(this._model.mPlayerMoney);this._mViewSecond.setMoney(e)},i.prototype.onEnterThirdGameBack=function(t){if(t.isEnter){var e=t.limit[0].limitmoney;this.onNextGame(e)}},i.prototype.goEnterThirdGame=function(){this._proxy.reqEnterGame()},i.prototype.sendLottMarquee=function(){this._proxy.requestLottMarquee()},i.prototype.onNextGame=function(e){this._model.isAuto=!1,App.SoundManager.playEffect("lingdang_mp3");var i=this._model.mPlayerMoney,o=this._model.getTotalScore(),n=e;this.applyFunc(t.NoticeConst.Go_To_Third_Game,{score:o,award:0,bet:i,limit:n})},i.prototype.registers=function(){this.registerFunc(t.SecondGameConst.Game_Start_Req,this.onGameStartReq,this),this.registerFunc(t.SecondGameConst.Game_Start_Back,this.onGameStartBack,this),this.registerFunc(t.SecondGameConst.Get_Score_Req,this.onGetScoreReq,this),this.registerFunc(t.SecondGameConst.Get_Score_Back,this.onGetScoreBack,this),this.registerFunc(t.SecondGameConst.getRecordNum,this.setRecordInit,this),this.registerFunc(t.ShzCallBacks.onEnterThirdGameBack,this.onEnterThirdGameBack,this),this.registerFunc(t.ShzCallBacks.goEnterThirdGame,this.goEnterThirdGame,this),this.registerFunc(t.ShzCallBacks.sendLottMarquee,this.sendLottMarquee,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._mViewSecond&&this._mViewSecond.destroy(),this._model=void 0,this._proxy=void 0,this._mViewSecond=void 0},i}(base.GameSeparateCtrl);t.GameCtrlSecond=e,__reflect(e.prototype,"shz.GameCtrlSecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._mViewThird=null,i._PopupView=null,i._model=null,i._proxy=null,i}return __extends(i,e),i.prototype.getGameController=function(){return this.getController()},i.prototype.inits=function(){this._model=new t.GameModelThird(this.getController()),this._proxy=new t.GameProxyThird(this.getController(),this._model),this._PopupView=new t.ShzPopupView(this.getController(),LayerManager.UI_Tips)},i.prototype.openGame=function(e){null==this._mViewThird&&(this._mViewThird=new t.ThirdGameView(this.getController()),App.ViewManager.register(t.ViewConst.ThirdGame,this._mViewThird)),Log.log("进入游戏3data",e),this._model.init(e.score,e.award,e.bet,e.limit),App.ViewManager.register(t.ViewConst.ThirdPopup,this._PopupView),App.ViewManager.open(t.ViewConst.ThirdGame,this._model),App.ViewManager.open(t.ViewConst.ThirdPopup),this._PopupView.initUI(),this._model.isEffect=this.getGameController().getModel().isEffect,App.SoundManager.playBg("bgm3_mp3")},i.prototype.closeGame=function(){App.ViewManager.close(t.ViewConst.ThirdGame)},i.prototype.registers=function(){this.registerFunc(t.ShzCallBacks.betMoneyType,this.betMoneyType,this),this.registerFunc(t.shzControllerCon.ondiceBet,this.ondiceBet,this),this.registerFunc(t.shzControllerCon.betMoneyblack,this.betMoneyblack,this),this.registerFunc(t.shzControllerCon.openThirdWinpopup,this.openThirdWinpopup,this),this.registerFunc(t.shzControllerCon.postGetScore,this.postGetScore,this),this.registerFunc(t.shzControllerCon.playGetScore,this.playGetScore,this),this.registerFunc(t.shzControllerCon.setRatioScore,this.setRatioScore,this),this.registerFunc(t.ShzCallBacks.buttonAppears,this.buttonAppears,this)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},i.prototype.onThirdUserMoneyChange=function(t){this._model.setThirdUserMoney(t.balance);var e=App.CommonUtils.money2Str(t.balance);this._mViewThird.gameSetMoney(e)},i.prototype.betMoneyType=function(t){this._model.betType=t;var e=this._model.getThirdTotalScore(),i=e*(1==t?.5:2==t?1:2),o=this._model.getThirdUserMoney(),n=1==t?o+i:2==t?o:o-e;this.isLimit(i,n)||(App.SoundManager.playEffect("lingdang_mp3"),this._PopupView.closeAwardView(),this._mViewThird.ratioBetStart(),this._mViewThird.setBetScore(App.CommonUtils.money2Str(i)),this._mViewThird.gameSetMoney(App.CommonUtils.money2Str(n)),this._mViewThird.disabledBtn())},i.prototype.ondiceBet=function(t){var e={betType:this._model.betType,compPlace:this._model.compPlace};this._proxy.requestBet(e)},i.prototype.isLimit=function(t,e){var i=!1,o=this._model.limitThirdBet;return t>o?(App.ScrollTxtTips.showTip("当前比倍游戏限红"+App.CommonUtils.money2Str(o)),i=!0):0>e&&(App.ScrollTxtTips.showTip("余额不足，无法双比倍"),i=!0),i},i.prototype.betMoneyblack=function(){var t=App.CommonUtils.money2Str(this._model.getThirdUserMoney());this._mViewThird.gameSetMoney(t),this._mViewThird["_betScore"+this._model.tablePlace].visible=!0},i.prototype.openThirdWinpopup=function(){var t=App.CommonUtils.money2Str(this._model.getThirdTotalScore());if(this._model.isEffect&&(this._PopupView.openWinpopup(t),this._mViewThird.Scorevisible()),!this._model.isEffect){var e=this._mViewThird._thirdButton.getBetScore(),i=App.CommonUtils.moneyself(Number(t)/e),o=0;49>=i?o=0:i>=50&&119>=i?o=1:i>=120&&(o=2),this._PopupView.settlementAnimation(t,o);var n=this;R.setTimeOnce(function(){n._mViewThird.Scorevisible()},n,700)}},i.prototype.setRatioScore=function(t){var e=App.CommonUtils.money2Str(t);this._mViewThird.gameSetMoney(e)},i.prototype.buttonAppears=function(){this._mViewThird.Scorevisible()},i.prototype.postGetScore=function(){var t={gametype:3};this._proxy.requestThirdScore(t)},i.prototype.setRecordInit=function(t){var e=GameBase.getCurrServerTime(),i=App.CommonUtils.money2Str(t);if(Number(i)>0){var o={time:e,money:i};this.getGameController().getModel().recordList.unshift(o)}this.getGameController().getModel().changerecordList()},i.prototype.playGetScore=function(){Log.log("开始播放得分动画!"),this._mViewThird.huiBtnGetScore();var t=this,e=Number(this._mViewThird.gameGetMoney()),i=Number(App.CommonUtils.money2Str(this._model.getThirdTotalScore())),o=this._PopupView.getAwardScore(),n=i/30;t.setRecordInit(this._model.getThirdTotalScore()),App.TimerManager.doFrame(2,100,function(){e+=n,i-=n,t._mViewThird.gameSetMoney(App.CommonUtils.moneyself(e)),o?t._PopupView.setBillingScore(App.CommonUtils.moneyself(i)):t._mViewThird.setBetScore(App.CommonUtils.moneyself(i)),n>=i&&(o?t._PopupView.setBillingScore(0):t._mViewThird.setBetScore(0),t._mViewThird.gameSetMoney(App.CommonUtils.money2Str(t._model.getThirdUserMoney())),App.TimerManager.removeAll(this),this.getScoreEnd())},this)},i.prototype.getScoreEnd=function(){var e=this;e._PopupView.setBillingScore(0),e._PopupView.closeAwardView(),R.setTimeOnce(function(){Log.log("进入普通游戏");var i=e._model.getThirdUserMoney(),o=!0;e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:i,isBet:o,isAuto:!1}),e._mViewThird.clearCard(),e._mViewThird.stopDiceAnimation()},this,1e3)},i.prototype.destroy=function(){e.prototype.destroy.call(this),t.ShzGoldBones.cleanFormPool(),this._model.destroy(),this._proxy.destroy(),this._mViewThird&&this._mViewThird.destroy(),this._model=void 0,this._proxy=void 0,this._mViewThird=void 0
},i}(base.GameSeparateCtrl);t.GameCtrlThird=e,__reflect(e.prototype,"shz.GameCtrlThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.isEffect=!1,i.isGameOver=!1,i.startMoney=0,i.overMoney=0,i.recordList=[],i}return __extends(e,t),e.prototype.changerecordList=function(){this.recordList.length>50&&this.recordList.splice(-1,1)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"shz.GameModel")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.isbet=!0,i._mFirstScore=0,i.initData(),i.initDataNotify(),i}return __extends(i,e),i.prototype.init=function(t){this._mFirstScore=t},i.prototype.initData=function(){this.isbet=!0,this.automaticTime=0,this.betMoney=0,this.isAutoBet=!1,this.isAuto=!1,this.selectionTimes=0,this.cardlist=[{openRole:0,openCardPlace:1},{openRole:0,openCardPlace:2},{openRole:0,openCardPlace:3},{openRole:0,openCardPlace:4},{openRole:0,openCardPlace:5},{openRole:0,openCardPlace:6},{openRole:0,openCardPlace:7},{openRole:0,openCardPlace:8},{openRole:0,openCardPlace:9},{openRole:0,openCardPlace:10},{openRole:0,openCardPlace:11},{openRole:0,openCardPlace:12},{openRole:0,openCardPlace:13},{openRole:0,openCardPlace:14},{openRole:0,openCardPlace:15}],this._winScore=0,this._islottery=!1,this.isEffect=!1,this._lotteryNum=0,this.winPos=[],this.balance=0,this.roleList=[],this.winLine=[],this._blance=0,this.winnTypes=void 0,this.initBetList=[],this.readyScore=!1,this.isOpenGame=!1,this.initGameMss={Online:null,basebet:null}},i.prototype.initDataNotify=function(){this.isBetDataNotify=t.DataNotify.create(this.isbet),this.isAutoBetDataNotify=t.DataNotify.create(this.isAutoBet),this.automaticTimeNotify=t.DataNotify.create(this.automaticTime)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.GameModel);t.GameModelFirst=e,__reflect(e.prototype,"shz.GameModelFirst")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._mScore=20,i._mScoreAward=0,i._mScoreBet=0,i._mTotalScore=0,i.userMoney=0,i.mGameMaxTimes=0,i.mGameLeftTimes=0,i.mPlayerMoney=0,i._rewardScore=0,i._AwardList=[],i._lotteryNum=0,i._centerCardslist=[],i._sidecardslist=[],i.isAuto=!1,i.isEffect=!1,i._mAwardList=[2,0,0,500,20,0],i._mResultList1=[1,2,3,4,5,5,0],i._mResultList2=[],i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i._mResultList2.push([1,1,2,3]),i}return __extends(e,t),e.prototype.init=function(t,e,i,o,n){this._mScore=t,this._mScoreBet=i,this._mScoreAward=e,this.mPlayerMoney=o,this.isAuto=n,this._mTotalScore=this._mScore},e.prototype.initRabio=function(){this._AwardList=[],this._lotteryNum=0,this._centerCardslist=[],this._sidecardslist=[],this._mAwardList=[],this._mResultList1=[],this._mResultList2=[]},e.prototype.refresh=function(t,e,i){Log.log("刷新彩金游戏结果 award:",t,"result1:",e,"result2:",i),this._mAwardList=t,this._mResultList1=e,this._mResultList2=i},e.prototype.countTotalScore=function(t){var e=this._mAwardList[t-1];this._rewardScore=e,Log.log("当前奖励分数：",e),this._mTotalScore+=e,this._mScoreAward+=e},e.prototype.getTotalScore=function(){return this._mTotalScore},e.prototype.getScore=function(){return this._mScore},e.prototype.getScoreAward=function(){return this._mScoreAward},e.prototype.getScoreBet=function(){return this._mScoreBet},e.prototype.getAwardList=function(){return this._mAwardList},e.prototype.getResultList1=function(){return this._mResultList1},e.prototype.getResultList2=function(){return this._mResultList2},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mAwardList=void 0,this._mResultList1=void 0,this._mResultList2=void 0},e}(base.GameModel);t.GameModelSecond=e,__reflect(e.prototype,"shz.GameModelSecond")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._tScore=0,i._tScoreAward=0,i._tScoreBet=0,i._tTotalScore=0,i.betType=0,i.compPlace=0,i.dicelist=[],i.otalPoints=0,i.compwinscore=0,i._rabiolist=[],i.tablePlace=0,i.isEffect=!1,i.isFirstRound=!0,i}return __extends(e,t),e.prototype.init=function(t,e,i,o){Log.log(t,e,i),this._tScore=t,this._tScoreBet=i,this._tScoreAward=e,this.limitThirdBet=o,this._tTotalScore=this._tScore},e.prototype.initRabio=function(){},e.prototype.changeRalioList=function(){this._rabiolist.length>10&&this._rabiolist.splice(0,1)},e.prototype.getThirdUserMoney=function(){return Log.log(this._tScoreBet),this._tScoreBet},e.prototype.setThirdUserMoney=function(t){Log.log(this._tScoreBet),this._tScoreBet=t},e.prototype.getThirdTotalScore=function(){return Log.log(this._tScore),this._tScore},e.prototype.setThirdTotalScore=function(t){Log.log(this._tScore),this._tScore=t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.GameModel);t.GameModelThird=e,__reflect(e.prototype,"shz.GameModelThird")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},e}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"shz.GameProxy")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getModel=function(){return this._model},i.prototype.onPlayerBetRes=function(e){App.EasyLoading.hideLoading(),this.applyFunc(t.ShzCallBacks.onPlayerBetResCallBack,e)},i.prototype.onGenRoleCardRes=function(e){this.applyFunc(t.ShzCallBacks.onGenRoleCardResCallBack,e)},i.prototype.onGenExchangeRes=function(e){this.applyFunc(t.ShzCallBacks.onGenExchangeResCallBack,e)},i.prototype.onOnLineNum=function(e){this.getModel().initGameMss[t.shzControllerCon.Online]=t.conFun.deepClone(e),this.applyFunc(t.ShzCallBacks.onOnlineNumCallBack,e)},i.prototype.onGenGetScoreResRes=function(e){App.EasyLoading.hideLoading();var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.First&&this.applyFunc(t.ShzCallBacks.onGenGetScoreResResCallBack,e)},i.prototype.onGameBack=function(t){var e=this.getModel();e._lotteryNum=t.lotteryNum,e._islottery=e._lotteryNum>0},i.prototype.onEnterGameBack=function(e){Log.log("onEnterGameBack",e),App.EasyLoading.hideLoading();var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.First&&this.applyFunc(t.shzControllerCon.Game_Enter_Res,e)},i.prototype.onLeaderBoardRes=function(e){Log.log("onLeaderBoardRes",e),e.LeaderInfo.length&&this.applyFunc(t.shzControllerCon.rankingScore,e.LeaderInfo),App.EasyLoading.hideLoading()},i.prototype.onResultResBack=function(e){Log.log("onResultResBack",e),e.winresult.length&&this.applyFunc(t.shzControllerCon.winningScore,e.winresult)},i.prototype.onSetBaseBetResBack=function(e){this.getModel().initGameMss[t.shzControllerCon.basebet]=t.conFun.deepClone(e),this.applyFunc(t.ShzCallBacks.onSetBaseBetRes,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.shzControllerCon.NET_MSG.PLAYER_BET_RES,this.onPlayerBetRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENROLE_CARD_RES,this.onGenRoleCardRes,this),this.addListener(t.shzControllerCon.NET_MSG.GENEXCHANGE_REQ,this.onGenExchangeRes,this),this.addListener(t.shzControllerCon.NET_MSG.ONLINE_NUM,this.onOnLineNum,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.COMP_RES,this.onEnterGameBack,this),this.addListener(t.shzControllerCon.NET_MSG.LEADER_BOARD_RES,this.onLeaderBoardRes,this),this.addListener(t.shzControllerCon.NET_MSG.RESULT_RES,this.onResultResBack,this),this.addListener(t.shzControllerCon.NET_MSG.BASE_BET_RES,this.onSetBaseBetResBack,this)},i.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.PLAYER_BET_REQ,e)},i.prototype.requestonlineNum=function(){this.send(t.shzControllerCon.NET_MSG.FINISH_REQ)},i.prototype.requestScore=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},i.prototype.reqEnterGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_REQ,{gametype:1})},i.prototype.winRecord=function(e){this.send(t.shzControllerCon.NET_MSG.RESULT_REQ,e)},i.prototype.ranking=function(e){this.send(t.shzControllerCon.NET_MSG.LEADER_BOARD_REQ,e)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxyFirst=e,__reflect(e.prototype,"shz.GameProxyFirst")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getController=function(){return this._controller},i.prototype.getModel=function(){return this._model},i.prototype.onGameBack=function(t){Log.log("onGameBack",t),this.getModel().mGameMaxTimes=t.lotteryNum},i.prototype.onGetScoreBack=function(e){App.EasyLoading.hideLoading(),Log.log("onGetScoreBack",e);var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.Second&&e.balance&&(App.SoundManager.playEffect("defen1_mp3"),this.getModel().mPlayerMoney=e.balance,this.applyFunc(t.SecondGameConst.Get_Score_Back))},i.prototype.onResultBack=function(e){App.EasyLoading.hideLoading(),Log.log("onResultBack",e);var i=this.getModel();i.initRabio();for(var o=e.winScore,n=[],s=[],r=e.rolecoad,a=0,h=r.length;h>a;a++){var l=r[a],p=10==l.sidecards?0:l.sidecards-1,c=10==l.sidecards?1:l.sidecards;n.push(p),i._sidecardslist.push(c);var u=[],d=l.centerCards;i._centerCardslist.push(d);for(var m=0,y=d.length;y>m;m++)u.push(d[m]-1);s.push(u)}i.refresh(o,n,s),i.mGameLeftTimes=e.lotteryNum?e.lotteryNum:0,i._lotteryNum=e.lotteryNum,this.applyFunc(t.SecondGameConst.Game_Start_Back)},i.prototype.onEnterThirdGame=function(e){App.EasyLoading.hideLoading(),Log.log("onEnterThirdGame",e);var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.Second&&this.applyFunc(t.ShzCallBacks.onEnterThirdGameBack,e)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyKeyConst.ScGenToLotterygameRes,this.onGameBack,this),this.addListener(t.ProxyKeyConst.ScGenGetScoreRes,this.onGetScoreBack,this),this.addListener(t.ProxyKeyConst.ScLotteryCardAndExchangeRes,this.onResultBack,this),this.addListener(t.shzControllerCon.NET_MSG.COMP_RES,this.onEnterThirdGame,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.reqGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ProxyKeyConst.CsLotteryCardReq)},i.prototype.reqGetScore=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.ProxyKeyConst.CsGenGetScoreReq,{gametype:2})},i.prototype.reqEnterGame=function(){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_REQ,{gametype:2})},i.prototype.requestLottMarquee=function(){this.send(t.shzControllerCon.NET_MSG.LOTT_MARQUEE_REQ)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxySecond=e,__reflect(e.prototype,"shz.GameProxySecond")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.getController=function(){return this._controller},i.prototype.getModel=function(){return this._model},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.shzControllerCon.NET_MSG.COMP_BET_RES,this.onCompBetResBack,this),this.addListener(t.shzControllerCon.NET_MSG.DICE_RES,this.onDiceResBack,this),this.addListener(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_RES,this.onGenGetScoreResRes,this)},i.prototype.onCompBetResBack=function(e){Log.log("onCompBetResBack",e),App.EasyLoading.hideLoading(),e.betState==t.ShzBetResultCode.BetSucc?(this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.betMoneyblack),this.getModel().setThirdTotalScore(e.compwinscore),this.applyFunc(t.shzControllerCon.setRatioScore,e.balance)):(e.betState==t.ShzBetResultCode.BetErrorNoEnoughMoney?App.ScrollTxtTips.showTip("余额不足，无法比倍游戏"):App.ScrollTxtTips.showTip("比倍金额超出限红"),this.applyFunc(t.ShzCallBacks.buttonAppears))},i.prototype.onDiceResBack=function(e){if(Log.log("onDiceResBack",e),e.dicenumber){this.getModel().dicelist=[],this.getModel().otalPoints=0;var i=function(t,e){return t-e};this.getModel().dicelist=e.dicenumber.sort(i),this.getModel().otalPoints=e.dicenumber[0]+e.dicenumber[1],App.MessageCenter.dispatch(t.shzControllerCon.dicelotteryresult)}},i.prototype.onGenGetScoreResRes=function(e){App.EasyLoading.hideLoading();var i=this._controller;void 0!=i&&i.getGameType()==t.GameType.Third&&(Log.log("onGenGetScoreResRes",e),e.balance&&(App.SoundManager.playEffect("defen1_mp3"),this.getModel().setThirdUserMoney(e.balance),this.applyFunc(t.shzControllerCon.playGetScore)))},i.prototype.requestBet=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.COMP_GAME_BET_REQ,e)},i.prototype.requestThirdScore=function(e){App.EasyLoading.showOnTimeOutDealy(),this.send(t.shzControllerCon.NET_MSG.GEN_GET_SCORE_REQ,e)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),e.prototype.removeMsgEventAll.call(this,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent()},i}(base.GameProxy);t.GameProxyThird=e,__reflect(e.prototype,"shz.GameProxyThird")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(){}return t.countAllbet=function(t){return 9*t},t.deepClone=function(t){var e,i=Object.prototype.toString.call(t);if("[object Array]"===i){if(e=[],t.length>0)for(var o=0;o<t.length;o++)e.push(this.deepClone(t[o]))}else if("[object Object]"===i){e={};for(var o in t)e[o]=this.deepClone(t[o])}else e=t;return e},t.lotterylist={overlist:["shz_card_0_png","shz_card_0_png","shz_card_0__png","shz_card_1_png","shz_card_1__png","shz_card_2__png","shz_card_3__png","shz_card_4__png","shz_card_5__png","shz_card_6__png","shz_card_7__png","shz_card_8__png"]},t.cardlistTest=[{openRole:2,openCardPlace:1},{openRole:3,openCardPlace:2},{openRole:1,openCardPlace:3},{openRole:5,openCardPlace:4},{openRole:4,openCardPlace:5},{openRole:3,openCardPlace:6},{openRole:1,openCardPlace:7},{openRole:8,openCardPlace:8},{openRole:9,openCardPlace:9},{openRole:7,openCardPlace:10},{openRole:6,openCardPlace:11},{openRole:9,openCardPlace:12},{openRole:5,openCardPlace:13},{openRole:8,openCardPlace:14},{openRole:7,openCardPlace:15}],t.GenRoleCardRes={rolecard:339931154182612},t.GenExchangeRes={islottery:!0,lotteryNum:1,openline:{2:[[13,10,7]],9:[[4,7,10,14],[7,10,14]]},winScore:108e3},t.winLine=["1","2","3","4","5","6","7","8","9"],t.winPos=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],t}();t.conFun=e,__reflect(e.prototype,"shz.conFun")}(shz||(shz={}));var shz;!function(t){var e=function(){function t(t){this._preData=null,this._data=t,this._listeners=[]}return t.create=function(e){var i=new t(e);return i},t.prototype.addDataListener=function(t,e){var i;i={callback:t,target:e};for(var o=0,n=this._listeners;o<n.length;o++){var s=n[o];if(e===s.target)return}this._listeners.push(i)},t.prototype.removeDataListener=function(t,e){for(var i=0;i<this._listeners.length;i++)if(e===this._listeners[i].target){this._listeners.splice(i,1);break}},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){t&&(this._preData=this._data,this._data=t,this.applyCallBack())},t.prototype.applyCallBack=function(){var t=this;this._listeners.forEach(function(e){e.callback.call(e.target,t._data,t._preData)})},t}();t.DataNotify=e,__reflect(e.prototype,"shz.DataNotify")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameFirst")||this;return i._cont=i._controller,i.maskRct1=new egret.Rectangle(0,0,0,630),i.firstOnGame=!0,i.approachList=[],i.shzIndex=1,i._mShzCreateWinList=[],i.masklist=[],i.masklist2=[],i.arrlist=[1,2,3,4,5,6,7,8,9],i.stoptwink=[],i.linelight=[],i.lightIndex=0,i.surroundindex=0,i._bottonButton.initComponent(t),i._toolBarView.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._mMoudel=t,this._toolBarView.reChargeEffect(),this.firstOnGame?this.firstOnGame=!1:this._bottonButton.startSweep()},i.prototype.setScorelist=function(t){this._bottonButton.setScorelist(t)},i.prototype.preloadingWinLine=function(){this.shzIndex=1,App.TimerManager.doFrame(1,99,this.frameShzRender,this)},i.prototype.frameShzRender=function(){this.shzIndex<10?this.rendershzOne():(App.TimerManager.remove(this.frameShzRender,this),this.onShzCreatedRelease())},i.prototype.rendershzOne=function(){if(!(this.shzIndex>9)){var e=t.ShzGoldBones.create();e.updateId("xianlight"+this.shzIndex),this.GroupLine.addChild(e),e.setPosition(0,-500),e.play(1),this._mShzCreateWinList.push(e),this.shzIndex++}},i.prototype.onShzCreatedRelease=function(){for(var e=this._mShzCreateWinList;e.length>0;)t.ShzGoldBones.realese(e.pop())},i.prototype.stopAutomatic=function(){this._bottonButton.stopAutomatic()},i.prototype.gameoverButtontype=function(t){this._bottonButton.gameoverButtontype(t)},i.prototype.winandNotype=function(t){this._bottonButton.winandNotype(t)},i.prototype.getTotalMoney=function(){return this._bottonButton.getTotalMoney()},i.prototype.setUserMoney=function(t){this._bottonButton.setUserMoney(t)},i.prototype.scoreButtonType=function(){this._bottonButton.scoreButtonType()},i.prototype.getDIScore=function(){return this._bottonButton.getDIScore()},i.prototype.createMask=function(){for(var t=0;9>t;t++){var e=new egret.Rectangle(0,0,0,630);this.masklist.push(e),this.masklist2.push(e)}},i.prototype.maskReset=function(){if(this.masklist.length)for(var t=0;t<this.masklist.length;t++){var e=this.masklist[t];e.width=0}},i.prototype.concealLine=function(){for(var t=0;9>t;t++)this["ImageLine"+t].visible=!1},i.prototype.autoAnteType=function(){this._bottonButton.autoAnteType()},i.prototype.changeCard=function(){App.SoundManager.playEffect("gundong_mp3"),App.TimerManager.doTimer(50,30,this.refrsh.bind(this,1),this,this.overone.bind(this,1),this),App.TimerManager.doTimer(50,37,this.refrsh.bind(this,2),this,this.overone.bind(this,2),this),App.TimerManager.doTimer(50,44,this.refrsh.bind(this,3),this,this.overone.bind(this,3),this),App.TimerManager.doTimer(50,51,this.refrsh.bind(this,4),this,this.overone.bind(this,4),this),App.TimerManager.doTimer(50,58,this.refrsh.bind(this,5),this,this.overone.bind(this,5),this)},i.prototype.refrsh=function(t){for(var e=this["GroupList"+t],i=0;i<e.numChildren;i++)e.getChildAt(i).texture=RES.getRes("shz_table_json.shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1")},i.prototype.overone=function(t){this.applyFunc("overone",t)},i.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},i.prototype.twinkle=function(){for(var t=0;t<this.cardlist_0.numChildren;t++)for(var e=0;3>e;e++){var i=this["GroupList"+t].getChildAt(e);"shz_card_0_png"==i.source&&(App.EffectUtils.startFlicker(i,100),this.stoptwink.push(i))}},i.prototype.linetein=function(e){var i=t.NoticeConst.GenExchange.psGenOpenline[e].openLine;this.lotteryLine(i)},i.prototype.lotteryLine=function(e){App.SoundManager.playEffect("xian_mp3");var i=t.ShzGoldBones.create(),o="xianlight"+e;i.updateId(o),this.GroupLine.addChild(i);var n=this["ImageLine"+e].x+this["ImageLine"+e].width/2,s=this["ImageLine"+e].y+this["ImageLine"+e].height/2;i._index=e,i.setPosition(n,s),this.approachList.push(i),i.blendMode=egret.BlendMode.NORMAL,i.play(1);i.addPlayEndCallBack(function(){i.parent&&t.ShzGoldBones.realese(i)},this)},i.prototype.onebyonelight=function(){App.TimerManager.doTimer(60,66,this.lightone,this,function(){this.lightVisible(),this.lightIndex=0},this)},i.prototype.oneShzlight=function(t){this.light_0.getChildAt(t).visible=!0,this.light_1.getChildAt(t).visible=!0},i.prototype.lightone=function(){this.lightVisible(),this.light_0.getChildAt(this.lightIndex).visible=!0,this.light_1.getChildAt(this.lightIndex).visible=!0,this.lightIndex++,this.lightIndex>=9&&(this.lightIndex=0)},i.prototype.lightVisible=function(){for(var t=0;9>t;t++)this.light_0.getChildAt(t).visible=!1,this.light_1.getChildAt(t).visible=!1},i.prototype.lightTwinkle=function(e){this.lightVisible();for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++){var o=t.NoticeConst.GenExchange.psGenOpenline[i].openLine;this.twinklelight(o)}},i.prototype.twinklelight=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0,App.EffectUtils.startFlicker(this["left_0_"+t],200),App.EffectUtils.startFlicker(this["light_0_"+t],200)},i.prototype.stoplighttTwinkle=function(e){for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++){var o=t.NoticeConst.GenExchange.psGenOpenline[i].openLine;this.stoptTwinklelight(o)}},i.prototype.stoptTwinklelight=function(t){App.EffectUtils.stopFlicker(this["light_0_"+t]),App.EffectUtils.stopFlicker(this["left_0_"+t]),this["light_0_"+t].alpha=1,this["left_0_"+t].alpha=1},i.prototype.lightShow=function(t){this.lightVisible(),this.lightopen(t)},i.prototype.lightopen=function(t){this["light_0_"+t].visible=!0,this["left_0_"+t].visible=!0},i.prototype.linevisible=function(){for(var t=0;t<this.GroupLine.numChildren;t++)this["ImageLine"+t].visible=!1},i.prototype.stoptwinkle=function(){for(var t=0;t<this.stoptwink.length;t++)App.EffectUtils.stopFlicker(this.stoptwink[t])},i.prototype.surround=function(t){for(var e=0;e<t.length;e++)this.setSurround(t[e])},i.prototype.setSurround=function(e){var i=Math.floor((e-1)/3)+1,o=Math.floor((e-1)%3),n=t.ShzGoldBones.create();n.updateId("boxlight"),this["surround"+i].addChild(n);var s=this["surround"+i].getChildAt(o).x+116.5,r=this["surround"+i].getChildAt(o).y+103.5;n._index=i,n.setPosition(s,r),n.blendMode=egret.BlendMode.ADD,n.play(1),this.approachList.push(n);n.addPlayEndCallBack(function(){n.parent&&t.ShzGoldBones.realese(n)},this)},i.prototype.closeEffect=function(){for(var e=this.approachList;e.length;){var i=e.pop();i&&t.ShzGoldBones.realese(i)}},i.prototype.surroundvisible=function(){for(var t=1;6>t;t++)for(var e=0;3>e;e++)this["surround"+t].getChildAt(e).visible=!1},i.prototype.flashAnimation=function(e,i){var o=Math.floor((i-1)/3)+1,n=Math.floor((i-1)%3),s=t.ShzGoldBones.create(),r="skeleton_"+e;s.updateId(r),this["GroupAMList"+o].addChild(s);var a=this["GroupList"+o].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,h=this["GroupList"+o].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;s._index=o,s.setPosition(a,h),s.blendMode=egret.BlendMode.NORMAL,this.approachList.push(s),s.play(3);var l=this;s.addPlayEndCallBack(function(){s.parent&&(t.ShzGoldBones.realese(s),l.approachList.splice(l.approachList.indexOf(s),1))},this)},i.prototype.flashvisible=function(){for(var t=0;t<this.cardlist_2.numChildren;t++)for(var e=0;3>e;e++)this["GroupAMList"+t].getChildAt(e).visible=!1},i.prototype.winAnimation=function(e){for(var i=0;i<t.NoticeConst.GenExchange.psGenOpenline.length;i++)for(var o=0,n=0;n<t.NoticeConst.GenExchange.psGenOpenline[i].shuihuRole.length;n++){var s=t.NoticeConst.GenExchange.psGenOpenline[i].shuihuRole[n].openLinePlace;this.individualAward(o,s)}},i.prototype.individualAward=function(e,i){var o=Math.floor((i-1)/3)+1,n=Math.floor((i-1)%3);this.setSurround2(o,n);var s=t.ShzGoldBones.create(),r="skeleton_"+e+"_1";s.updateId(r),this["GroupAMList"+o].addChild(s);var a=this["GroupList"+o].getChildAt(n).x+t.NoticeConst.CARD_HALF_WIDTH,h=this["GroupList"+o].getChildAt(n).y+t.NoticeConst.CARD_HALF_HEIGHT;s._index=o,s.setPosition(a,h),s.blendMode=egret.BlendMode.NORMAL,s.play(1),this.approachList.push(s);s.addPlayEndCallBack(function(){s.parent&&t.ShzGoldBones.realese(s)},this)},i.prototype.setSurround2=function(e,i){var o=this._mMoudel.isEffect;if(!o){var n=t.ShzGoldBones.create();n.updateId("boxlight2");var s=this["surround"+e].getChildAt(i).x+116.5,r=this["surround"+e].getChildAt(i).y+103.5;this["surround"+e].addChild(n),n.setPosition(s,r),n.blendMode=egret.BlendMode.ADD,n.play(5),this.approachList.push(n);n.addPlayEndCallBack(function(){n.parent&&t.ShzGoldBones.realese(n)},this)}},i.prototype.removeWinningAnimation=function(){App.TimerManager.removeAll(this)},i.prototype.approachAnimation=function(){var e=this;this._bottonButton.setStartGameBtn(!0);for(var i=1;6>i;i++)for(var o=function(){var o=t.ShzGoldBones.create();o.updateId("skeleton_1_1"),n["GroupList"+i].addChild(o);var r=n["GroupList"+i].getChildAt(s).x+t.NoticeConst.CARD_HALF_WIDTH,a=n["GroupList"+i].getChildAt(s).y+t.NoticeConst.CARD_HALF_HEIGHT;o._index=i,o.setPosition(r,a),o.play(1),n.approachList.push(o),o.addPlayEndCallBack(function(){o.parent&&(t.ShzGoldBones.realese(o),e.applyFunc("gameStart"))},n)},n=this,s=0;3>s;s++)o();R.setTimeOnce(function(){e._bottonButton.setStartGameBtn(!1),e._bottonButton.startSweep(),e.preloadingWinLine()},this,1900)},i.prototype.closetime=function(){App.TimerManager.removeAll(this)},i.prototype.gameGetMoney=function(){return this._bottonButton.getRabioMoney()},i.prototype.gameSetMoney=function(t){this._bottonButton.setRabioMoney(t)},i.prototype.setUserImage=function(t){this._bottonButton.setUserImage(t)},i.prototype.setUserFrame=function(t){this._bottonButton.setUserFrame(t)},i.prototype.setUserName=function(t){this._bottonButton.setUserName(t)},i.prototype.startGameAppear=function(){this._bottonButton.startGameAppear()},i.prototype.rotarybuttontype=function(){this._bottonButton.rotarybuttontype()},i.prototype.setcurrentTime=function(t){this._bottonButton.setcurrentTime(t)},i.prototype.gameHight=function(){this._bottonButton.gameHight()},i.prototype.setAllBetMoney=function(t){this._bottonButton.setAllBetMoney(t)},i.prototype.setScore=function(t){this._bottonButton.setScore(t)},i.prototype.setIndex=function(t){this._bottonButton.setIndex(t)},i.prototype.winningtype=function(t){this._bottonButton.winningtype(t)},i.prototype.timesButton=function(){this._bottonButton.timesButton()},i.prototype.automaticValue=function(){return this._bottonButton.automaticValue()},i.prototype.setStartGameBone=function(t){this._bottonButton.setStartGameBone(t)},i.prototype.timeGame=function(){this.applyFunc(t.NoticeConst.Go_To_Third_Game)},i.prototype.startGame=function(){this.applyFunc("startGame")},i.prototype.stopGame=function(){App.TimerManager.removeAll(this);for(var t=0;5>t;t++)this.applyFunc("overone",t)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this._bottonButton.addEvent(),this._toolBarView.addEvent(),this.createMask()},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this._bottonButton.removeEvent(),this._toolBarView.removeEvent()},i.prototype.destroy=function(){if(!this._isDestroy){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._bottonButton.destroy(),this._toolBarView.destroy();for(var i=this.approachList;i.length;){var o=i.pop();o&&o.destroy()}t.ShzGoldBones.cleanFormPool(),Log.trace("销毁 shz.FirstGameView")}},i}(base.GameView);t.FirstGameView=e,__reflect(e.prototype,"shz.FirstGameView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Message,"shz","ShzGameSkin")||this;return i.touchEnabled=!1,i.touchChildren=!1,i}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),Log.log("初始化跑马灯信息"),this.initBroadcast(this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameMarryView=e,__reflect(e.prototype,"shz.GameMarryView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.UI_Tips)||this;return i._mAniFlag=null,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.createFlag()},i.prototype.playFlag=function(){this.createFlag(),this._mAniFlag&&this._mAniFlag.play()},i.prototype.createFlag=function(){this._mAniFlag||(this._mAniFlag=t.BoneAniFlag.create()),this._mAniFlag.parent||(this.addChild(this._mAniFlag),this._mAniFlag.initDBRes("shzAniFlag"),this._mAniFlag.x=App.StageUtils.getWidth()/2,this._mAniFlag.y=App.StageUtils.getHeight()/2)},i.prototype.clear=function(){App.TimerManager.removeAll(this),this._mAniFlag.stopGame(),R.removeFromParent(this),this.removeChildren()},i.prototype.addEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.clear(),this._mAniFlag&&this._mAniFlag.destroy(),this._mAniFlag=void 0,Log.trace("销毁 shz.FirstGameView")},i}(BaseEuiView);t.GameTipView=e,__reflect(e.prototype,"shz.GameTipView")}(shz||(shz={}));var shz;!function(t){var e=function(t){function e(e){var i=t.call(this,e,LayerManager.UI_Main,"shz","ShzGameSkin")||this;return i.btnRedPacket2=null,i}return __extends(e,t),e.prototype.open=function(){t.prototype.open.call(this),Log.log("添加红包"),this.btnRedPacket2||(this.btnRedPacket2=lobby.RedPackBone.create(),this.btnRedPacket2.init(),this.addChild(this.btnRedPacket2),this.btnRedPacket2.x=39,this.btnRedPacket2.y=128,this.btnRedPacket2.play(lobby.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0)},e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.onBack=function(){this.applyFunc("onClickBack")},e.prototype.testone=function(){},e.prototype.onOpenRedPac=function(){App.ViewManager.open(lobby.LobbyViewConst.RedPacket),this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},e.prototype.RedPackNotify=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation)},e.prototype.RedEnvelopeBack=function(){this.btnRedPacket2.play(lobby.RedPackBone.Animation1)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(lobby.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(lobby.RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(lobby.RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0),Log.trace("销毁 shz.GameView")},e}(base.GameView);t.GameView=e,__reflect(e.prototype,"shz.GameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameSecond")||this;return i._mCurrTimes=0,i._mMaxTimes=3,i._mCurrRoundTimes=0,i._index=0,i._winpos=0,i.winpos=[],i._mMaryList=[],i.arrlist=[2,3,4,5,6,7,8,9],i._posList={},i._imageList={},i._slotList=[],i._shzUserInfo.initComponent(t),i._IconSkin.initComponent(t),i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);
for(var i=1;6>=i;i++)this._posList[i+0]={x:5+157*(i-1),y:2},this._posList[i+6]={x:950,y:2+87*(i-1)},this._posList[i+12]={x:950-157*(i-1),y:527},this._posList[i+18]={x:5,y:527-87*(i-1)};var o=this._imageList;o[1]=o[7]=o[13]=o[19]=0,o[4]=t.ShzType.ZYT,o[12]=o[24]=t.ShzType.DXTT,o[8]=o[18]=t.ShzType.Song,o[14]=o[20]=t.ShzType.Lin,o[2]=o[9]=o[17]=t.ShzType.Lu,o[6]=o[15]=o[23]=t.ShzType.DD,o[3]=o[10]=o[21]=t.ShzType.CQ,o[5]=o[11]=o[16]=o[22]=t.ShzType.FT;for(var n=this,i=1;4>=i;i++)this._slotList.push(new t.ShzCaiJinMC(n["slot"+i]))},i.prototype.open=function(i){e.prototype.open.call(this),this._mMoudel=i;var o=this;o.init(),o.updateTxt(),o.upUserInfo(),o.updateImage(1),R.setTimeOnce(function(){Log.log("/** 初始化界面信息 */"),o.applyFunc(t.SecondGameConst.Game_Start_Req)},this,1200),this._mMoudel.initRabio()},i.prototype.init=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shz_table_json.shuihu_ui_result_2");this.Option.y=639,this._mCurrTimes=0,this._mMaxTimes=this._mMoudel.mGameMaxTimes,this.uBtnGetScore.enabled=!0,this.uBtnNextGame.enabled=!0,this._winpos=1,this.uTxtLeftTImes.text=""},i.prototype.shzButtonUp=function(){egret.Tween.get(this.Option).to({y:498},300),this.applyFunc(t.ShzCallBacks.sendLottMarquee)},i.prototype.startGame=function(){this._mCurrTimes++,this._mMoudel._lotteryNum<=0||(this._mMoudel.mGameLeftTimes<0&&Log.log("服务器返回剩余次数小于0"),this._mCurrRoundTimes=0,this.updateTimes(),this.roundStart())},i.prototype.updateTimes=function(){this.uTxtLeftTImes.text=""+this._mMoudel._lotteryNum},i.prototype.updateTxt=function(){var t=this._mMoudel;this.uTxtScore.text=App.CommonUtils.money2Str(t.getScore()),this.uTxtAward.text=""+App.CommonUtils.money2Str(t.getScoreAward()),this.uTxtBet.text=""+t.getScoreBet(),this.uTxtTotalScore.text=""+App.CommonUtils.money2Str(t.getTotalScore())},i.prototype.upUserInfo=function(){this._IconSkin.setUserImage("ui_headImg_"+this._mMoudel.player.getAvatar()),this._IconSkin.setUserFrame("ui_headBox_"+this._mMoudel.player.getAvatarBox()),this._shzUserInfo.setNickName(this._mMoudel.player.getNickName()),this._shzUserInfo.setMoney(App.CommonUtils.money2Str(this._mMoudel.mPlayerMoney))},i.prototype.setMoney=function(t){this._shzUserInfo.setMoney(t)},i.prototype.changeuTxtAward=function(){var t=this,e=Number(this.uTxtAward.text),i=Number(App.CommonUtils.money2Str(this._mMoudel._rewardScore)),o=i/30;App.TimerManager.doFrame(2,50,function(){e+=o,t.uTxtAward.text=""+Math.floor(100*e)/100,Math.floor(100*e)/100>=Math.floor(t._mMoudel.getScoreAward()/100)/100&&(t.uTxtAward.text=""+App.CommonUtils.money2Str(t._mMoudel.getScoreAward()))},this,this.chengeScoreEnd,this)},i.prototype.chengeScoreEnd=function(){this.updateTxt()},i.prototype.roundStart=function(){this._mCurrRoundTimes++;var e=this._mMoudel.getAwardList();if(this.closeAllDiceAnimation(),this.closedicetwinkle(),this._mCurrRoundTimes>e.length)if(this._mMoudel._lotteryNum>=2)this.applyFunc(t.SecondGameConst.Game_Start_Req);else{this.uTxtLeftTImes.text="0",this.shzButtonUp();var i=this;this._mMoudel.isAuto&&R.setTimeOnce(function(){this._mMoudel.isAuto&&i.applyFunc(t.SecondGameConst.Get_Score_Req)},this,2e3)}else this.marryRun(),this.slotRun()},i.prototype.getnum=function(t){var e=[];for(var i in this._imageList)this._imageList[i]==t&&e.push(i);var o=App.MathUtils.randomArray(e);return o},i.prototype.marryRun=function(){this._index=0;var t=0,e=this;t=this._winpos-1;var i=this._mMoudel.getResultList1(),o=i[this._mCurrRoundTimes-1],n=Number(this.getnum(o)),s=n-this._winpos,r=0;s>0&&8>=s?r=48+(24-(8-s)):s>0&&s>8?r=48+(s-8):0>s?r=48+(24-(8-s)):0==s&&(r=64),this._winpos-1?(this["result"+this._winpos].alpha=1,this.trailingEffect(this._winpos,500)):(this.result1.alpha=1,this.trailingEffect(1,500)),App.SoundManager.playEffect("ding2_mp3"),App.TimerManager.doFrame(1.5,r,function(){var i=++t%24+1;e.updateImage(i),this._index=i},this,function(){e.updateMarry(this._index,n)},this)},i.prototype.updateMarry=function(t,e){var i=t,o=this;App.SoundManager.stopEff("ding2_mp3");var n=this._mMoudel.getResultList1();n[this._mCurrRoundTimes-1],this._imageList;App.TimerManager.doFrame(9,99,function(){var t=++i%24+1;App.SoundManager.playEffect("ding_mp3"),o.updateImage(t),t==e&&(this._winpos=t,App.TimerManager.removeAll(this),this.resultScore())},this)},i.prototype.resultScore=function(){var t=this._mMoudel.getAwardList(),e=this._mMoudel._centerCardslist[this._mCurrRoundTimes-1],i=t[this._mCurrRoundTimes-1],o=this;if(i>0){if(App.SoundManager.playEffect("zhongjiang_mp3"),e[0]==e[1]&&e[0]==e[2]&&e[0]==e[3]||e[0]==e[1]&&e[0]==e[2]||e[1]==e[2]&&e[1]==e[3])for(var n=0;4>n;n++)if(e[2]==e[n]){var s=this["_slotRunPos"+n];this.diceAnimation(this._imageGroup,s),this.soltWinAnimation(e[n],n)}if(this.winpos.length){this.dicetwinkle(),this.diceAnimation(this._groupGold,this.imageItem);for(var r=0;r<this.winpos.length;r++){var s=this.winpos[r];this.soltWinAnimation(s[1],s[0])}}R.setTimeOnce(this.roundStart,this,2500),this._mMoudel.countTotalScore(this._mCurrRoundTimes),R.setTimeOnce(function(){o.changeuTxtAward()},this,300)}else App.SoundManager.playEffect("meijiang_mp3"),R.setTimeOnce(this.roundStart,this,1e3)},i.prototype.updateImage=function(t){this.imageItem.x=this._posList[t].x,this.imageItem.y=this._posList[t].y,this.imageIcon.x=this._posList[t].x,this.imageIcon.y=this._posList[t].y;var e=this["result"+t];e.alpha=1,this.trailingEffect(t,500)},i.prototype.trailingEffect=function(t,e){var i=this["result"+t];egret.Tween.get(i).to({alpha:0},e)},i.prototype.diceAnimation=function(e,i){for(var o=i.x+i.width/2,n=i.y+i.height/2,s=[],r=0;10>r;r++){var a=t.ShzGoldBones.create();a._index=r;var h="Goldicon";e.addChild(a),a.updateId(h),a.setPosition(o,n),a.blendMode=egret.BlendMode.NORMAL,a.play(99999),s.push(a),this._mMaryList.push(a)}var l=this;R.setTimeOnce(function(){l.flyGoldCoin(s)},this,300)},i.prototype.closeAllDiceAnimation=function(){for(var e=this._mMaryList;e.length;){var i=e.pop();i&&(egret.Tween.removeTweens(i),t.ShzGoldBones.realese(i))}},i.prototype.closeDiceAnimation=function(e){e.parent&&(egret.Tween.removeTweens(e),t.ShzGoldBones.realese(e))},i.prototype.flyGoldCoin=function(t){App.SoundManager.playEffect("jinbi_mp3");for(var e=this,i=function(){var i=t[n];egret.Tween.removeTweens(i),egret.Tween.get(i).wait(100*n).to({x:o._goldPos.x,y:o._goldPos.y},300,egret.Ease.sineInOut).call(function(){e.closeDiceAnimation(i)},o)},o=this,n=0;n<t.length;n++)i();this._mMoudel.isEffect||App.TimerManager.doTimer(100,10,function(){e.opendiceEffet()},this)},i.prototype.opendiceEffet=function(){var e=t.ShzGoldBones.create();this._groupGold.addChild(e),e.updateId("coin2"),e.blendMode=egret.BlendMode.ADD;var i=this._goldPos.x,o=this._goldPos.y;e.setPosition(i,o),egret.Tween.removeTweens(e),this._mMaryList.push(e),e.play(1);e.addPlayEndCallBack(function(){e.parent&&t.ShzGoldBones.realese(e)},this)},i.prototype.slotRun=function(){this.winpos=[];for(var t=this._mMoudel._centerCardslist,e=t[this._mCurrRoundTimes-1],i=0;4>i;i++)if(this._mMoudel._centerCardslist[this._mCurrRoundTimes-1][i]==this._mMoudel._sidecardslist[this._mCurrRoundTimes-1]){this._slotList[i].run(e[i],200*(i+1),!0);var o=e[i],n=[i,o];this.winpos.push(n)}else this._slotList[i].run(e[i],200*(i+1),!1)},i.prototype.playGetScore=function(){this.uBtnGetScore.enabled=!1,this.uBtnNextGame.enabled=!1;var e=this,i=Number(this._shzUserInfo.getMoney()),o=Number(App.CommonUtils.money2Str(this._mMoudel.getTotalScore())),n=o/30;this.applyFunc(t.SecondGameConst.getRecordNum,this._mMoudel.getTotalScore()),App.TimerManager.doTimer(32,100,function(){i+=n,o-=n,e._shzUserInfo.setMoney(Number(i.toFixed(2))),e.uTxtTotalScore.text=""+o.toFixed(0),n>=o&&(e.uTxtTotalScore.text="0",e._shzUserInfo.setMoney(App.CommonUtils.money2Str(e._mMoudel.mPlayerMoney)),e.getScoreEnd())},this)},i.prototype.getScoreEnd=function(){var e=this,i=this._mMoudel.mPlayerMoney,o=!0,n=this._mMoudel.isAuto;R.setTimeOnce(function(){App.TimerManager.removeAll(e),e.applyFunc(t.NoticeConst.Go_To_First_Game,{score:i,isBet:o,isAuto:n});for(var s=1;5>s;s++)e["slot"+s].texture=RES.getRes("shz_table_json.shuihu_ui_result_2")},this,300)},i.prototype.goEnterThirdGame=function(){R.intervalTime()&&this.applyFunc(t.ShzCallBacks.goEnterThirdGame)},i.prototype.onGetScore=function(){R.intervalTime()&&(this._mMoudel.isAuto=!1,this.applyFunc(t.SecondGameConst.Get_Score_Req))},i.prototype.soltWinAnimation=function(e,i){var o=t.ShzGoldBones.create(),n="skeleton_"+e+"_1";this.GroupCard.addChild(o),o.updateId(n);var s=this.GroupCard.getChildAt(i).x+t.NoticeConst.CARD_HALF_WIDTH,r=this.GroupCard.getChildAt(i).y+t.NoticeConst.CARD_HALF_HEIGHT;o.setPosition(s,r),o.blendMode=egret.BlendMode.NORMAL,egret.Tween.removeTweens(o),o.play(1),this._mMaryList.push(o);o.addPlayEndCallBack(function(){o.parent&&t.ShzGoldBones.realese(o)},this)},i.prototype.deleteAllWin=function(){for(var t=this._mMaryList;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.changeCard=function(t){App.TimerManager.doTimer(50,45,this.refrsh,this,this.overone.bind(this,t),this)},i.prototype.refrsh=function(){for(var t=1;5>t;t++)this["slot"+t].texture=RES.getRes("shz_table_json.shuihu_ui_result_"+App.MathUtils.randomArray(this.arrlist)+"_1_1")},i.prototype.overone=function(t){for(var e=this._mMoudel._centerCardslist[t],i=0;i<e.length;i++)this["slot"+(i+1)].texture=RES.getRes("shz_table_json.shuihu_ui_result_"+e[i])},i.prototype.stopShuffle=function(){App.TimerManager.removeAll(this)},i.prototype._runMarquee=function(){for(var t=0;24>t;t++);},i.prototype.dicetwinkle=function(){App.EffectUtils.startFlicker(this.result,100)},i.prototype.closedicetwinkle=function(){App.EffectUtils.stopFlicker(this.result),this.result.alpha=1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.uBtnNextGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goEnterThirdGame,this),this.uBtnGetScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.uBtnNextGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goEnterThirdGame,this),this.uBtnGetScore.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetScore,this)},i.prototype.destroy=function(){if(!this._isDestroy){for(e.prototype.destroy.call(this),App.TimerManager.removeAll(this);this._slotList.length;)this._slotList.pop().destroy();this.deleteAllWin(),this.result.texture=void 0,this._mMoudel=void 0,this._slotList=void 0,R.removeAllTimeOut(this),Log.trace("销毁 shz.FirstGameView")}},i}(base.GameView);t.SecondGameView=e,__reflect(e.prototype,"shz.SecondGameView")}(shz||(shz={}));var shz;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Main,"shz","ShzGameThird")||this;return i._posList={},i.placecomp=[1,3,2],i.placecompBet=["SHZratio_betbig","SHZratio_betdraw","SHZratio_betsmall"],i._cardflaylist=[],i.peoList=[],i._dice1.initComponent(t),i._dice2.initComponent(t),i._dice3.initComponent(t),i._thirdButton.initComponent(t),i}return __extends(i,e),i.prototype.open=function(t){e.prototype.open.call(this),this._thMoudel=t;var i=this;i.init(),i.updateInfo(),i.Scorevisible(),R.setTimeOnce(function(){i.diceOnAnimation(1,999),i.recordCardDisplay()},this,500),this.stopDiceAnimation()},i.prototype.init=function(){this.setInitialization();for(var t=this._cardlist.getChildAt(0),e=0;11>e;e++)this._posList[e]={x:t.x+79*e,y:t.y}},i.prototype.setInitialization=function(){this._diceBet.visible=!1,this._diceRrsult.visible=!1,this.startBet();for(var t=1;4>t;t++)this["_dice"+t].visible=!1,this["_betScore"+t].visible=!1},i.prototype.updateInfo=function(){var t=this._thMoudel;this._thirdButton._userinfo.setNickName(t.player.getNickName()),this.gameSetMoney(App.CommonUtils.money2Str(t.getThirdUserMoney())),this._thirdButton._iconskin.setUserImage("ui_headImg_"+t.player.getAvatar()),this._thirdButton._iconskin.setUserFrame("ui_headBox_"+t.player.getAvatarBox()),this.setBetScore(App.CommonUtils.money2Str(t.getThirdTotalScore()))},i.prototype.setRatioBetScore=function(){this.setBetScore(App.CommonUtils.money2Str(this._thMoudel.compwinscore))},i.prototype.setBetScore=function(t){this._thirdButton.setBetScore(t)},i.prototype.disabledBtn=function(){this._thirdButton.disabledBtn()},i.prototype.huiBtnGetScore=function(){this._thirdButton.huiBtnGetScore()},i.prototype.onBack=function(){this.applyFunc(t.NoticeConst.Go_To_First_Game)},i.prototype.ondiceBet=function(e){if(R.intervalTime()){var i=Number(e.currentTarget.name);this.prohibitBet(),this._thMoudel.tablePlace=i,this._thMoudel.compPlace=this.placecomp[i-1],this.applyFunc(t.shzControllerCon.ondiceBet,i),R.sendPlayerAction(this.placecompBet[i-1])}},i.prototype.prohibitBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!1},i.prototype.startBet=function(){for(var t=1;4>t;t++)this["_diceBet"+t].touchEnabled=!0},i.prototype.recordCardDisplay=function(){this._thMoudel.changeRalioList(),this.clearCard(),this._cardflaylist=[];for(var t=0;t<this._thMoudel._rabiolist.length;t++){var e=new eui.Image;e.source="shz_shake_json.shz_shake_his_"+this._thMoudel._rabiolist[t],e.width=54,e.height=74,e.x=this._posList[t].x,e.y=this._posList[t].y,this._cardlist.addChild(e),this._cardflaylist.push(e)}},i.prototype.recordCardflay=function(){var t=new eui.Image,e=this._thMoudel._rabiolist.length-1;t.source="shz_shake_json.shz_shake_his_"+this._thMoudel._rabiolist[e],t.width=54,t.height=74,t.x=955,t.y=2,this._cardlist.addChild(t),this._cardflaylist.push(t),egret.Tween.removeTweens(t);var i=this,o=this._posList[e].x,n=this._posList[e].y;egret.Tween.get(t).to({x:o,y:n},800,egret.Ease.sineInOut).call(function(){i._cardflaylist.length>10&&i.AllCardMove()},this)},i.prototype.dropCard=function(){var t=this._cardflaylist[0],e=this;egret.Tween.get(t).to({y:180,alpha:0},800,egret.Ease.sineInOut).call(function(){t.parent.removeChild(t),e._thMoudel.changeRalioList(),e._cardflaylist.length>10&&e._cardflaylist.splice(0,1)},this)},i.prototype.AllCardMove=function(){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t],i=e.x-79;egret.Tween.get(e).to({x:i},800,egret.Ease.sineInOut)}R.setTimeOnce(function(){this.dropCard()},this,800)},i.prototype.clearCard=function(){if(this._cardflaylist.length){for(var t=0;t<this._cardflaylist.length;t++){var e=this._cardflaylist[t];e&&e.parent&&e.parent.removeChild(e)}this._cardflaylist=[]}},i.prototype.concealCard=function(){},i.prototype.Scorevisible=function(){this._thirdButton.lightbtn()},i.prototype.oneGameOver=function(){this._thMoudel.initRabio(),this.setInitialization()},i.prototype.lotteryResult=function(){App.SoundManager.stopEff("shzXiazhu2_mp3"),this._thMoudel.otalPoints>=8?(this._dice1.visible=!0,this._thMoudel._rabiolist.push(0),this._dice1.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]):7==this._thMoudel.otalPoints?(this._dice2.visible=!0,this._thMoudel._rabiolist.push(2),this._dice2.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1]):this._thMoudel.otalPoints<=6&&(this._dice3.visible=!0,this._thMoudel._rabiolist.push(1),this._dice3.setdicenum(this._thMoudel.dicelist[0],this._thMoudel.dicelist[1]),this._diceRrsult.visible=!0,this._diceRrsult.source="shz_shake_json.shz_shake_plate_"+this._thMoudel.dicelist[0]+"_"+this._thMoudel.dicelist[1])},i.prototype.gameGetMoney=function(){return this._thirdButton.getRabioMoney()},i.prototype.gameSetMoney=function(t){this._thirdButton.setRabioMoney(t)},i.prototype.diceBetAnimation=function(e,i){var o=t.ShzGoldBones.create(),n="dice_"+e;o.updateId(n),this._diceflash.addChild(o);var s=this._diceflash.getChildAt(0).x+165,r=this._diceflash.getChildAt(0).y+5;o.blendMode=egret.BlendMode.NORMAL,o.setPosition(s,r),this.peoList.push(o),o.play(i);var a=this;o.addPlayEndCallBack(function(){a.diceBetEvent(e)},this)},i.prototype.stopDiceAnimation=function(){for(var e=this.peoList;e.length;){var i=e.pop();i&&t.ShzGoldBones.realese(i)}},i.prototype.cleanAllDiceBetAnimation=function(){for(var t=this.peoList;t.length;){var e=t.pop();e&&e.destroy()}},i.prototype.diceOnAnimation=function(t,e){this.stopDiceAnimation(),this.diceBetAnimation(t,e)},i.prototype.ratioBetStart=function(){this.startBet(),this.oneGameOver(),this.diceOnAnimation(2,1),R.setTimeOnce(function(){App.SoundManager.playEffect("yaoshaizi_mp3")},this,100),this._thMoudel.isFirstRound||R.sendPlayerAction("SHZratio_continueafterwin")},i.prototype.diceBetEvent=function(e){switch(e){case 2:R.removeTimeOut(this.ratioBetStart,this),App.SoundManager.playEffect("shzXiazhu2_mp3"),this._diceBet.visible=!0,this.diceOnAnimation(1,999);break;case 4:this.scoreWinAndLose();break;case 5:this.stopDiceAnimation(),this.concealCard();var i=this._thMoudel.getThirdUserMoney();Log.log("进入普通游戏");var o=!0;this.applyFunc(t.NoticeConst.Go_To_First_Game,{score:i,isBet:o,isAuto:!1}),this.clearCard();break;case 6:this.diceOnAnimation(1,99999),this.applyFunc(t.shzControllerCon.openThirdWinpopup)}},i.prototype.scoreWinAndLose=function(){var t=App.CommonUtils.money2Str(this._thMoudel.getThirdTotalScore());Number(t)>0?(App.SoundManager.playEffect("wanjiaying_mp3"),this.diceOnAnimation(6,1)):0==Number(t)&&(this.diceOnAnimation(5,2),App.SoundManager.playEffect("wanjiashu_mp3"))},i.prototype.diceBetLotteryresult=function(){this._thMoudel.isFirstRound=!1,this.diceOnAnimation(4,1);var t=this;this.lotteryResult(),App.SoundManager.playEffect(this._thMoudel.otalPoints+"dian_mp3"),R.setTimeOnce(function(){t.recordCardflay()},this,500)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var i=1;4>i;i++)this["_diceBet"+i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet,this);this._thirdButton.addEvent(),App.MessageCenter.addListener(t.shzControllerCon.dicelotteryresult,this.diceBetLotteryresult,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var i=1;4>i;i++)this["_diceBet"+i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ondiceBet,this);this._thirdButton.removeEvent(),App.MessageCenter.removeListener(t.shzControllerCon.dicelotteryresult,this.diceBetLotteryresult,this)},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this._thirdButton.destroy(),this.clearCard(),this.cleanAllDiceBetAnimation(),Log.log("销毁 shz.ThirdGameView"))},i}(base.GameView);t.ThirdGameView=e,__reflect(e.prototype,"shz.ThirdGameView")}(shz||(shz={}));var lobby;!function(t){var e;!function(t){t[t.UserInfo=3e3]="UserInfo",t[t.Recharge=3001]="Recharge",t[t.Bank=3002]="Bank",t[t.Message=3003]="Message",t[t.Activity=3004]="Activity",t[t.Share=3005]="Share",t[t.Setting=3006]="Setting",t[t.Exchange=3007]="Exchange",t[t.redPacket=3008]="redPacket",t[t.Customer=3009]="Customer",t[t.HeadImgSetting=3010]="HeadImgSetting"}(e=t.LobbyControllerConst||(t.LobbyControllerConst={}))}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t}();t.LobbyEvent=e,__reflect(e.prototype,"lobby.LobbyEvent")}(lobby||(lobby={}));var lobby;!function(t){var e;!function(t){t[t.UserInfo=2e3]="UserInfo",t[t.Recharge=2001]="Recharge",t[t.Bank=2002]="Bank",t[t.Message=2003]="Message",t[t.Activity=2004]="Activity",t[t.Share=2005]="Share",t[t.Setting=2006]="Setting",t[t.Exchange=2007]="Exchange",t[t.RedPacket=2008]="RedPacket",t[t.Customer=2009]="Customer",t[t.HeadImgSetting=2010]="HeadImgSetting",t[t.MessagePrompt=2011]="MessagePrompt",t[t.ActivityPrompt=2012]="ActivityPrompt",t[t.ResetMoneyPassword=2013]="ResetMoneyPassword",t[t.ResetLoginPassword=2014]="ResetLoginPassword",t[t.Register=2015]="Register"}(e=t.LobbyViewConst||(t.LobbyViewConst={}))}(lobby||(lobby={}));var LoginViewConst;!function(t){t[t.LoginSecondar=3e4]="LoginSecondar",t[t.Register=30001]="Register",t[t.ResetLoginPwd=30002]="ResetLoginPwd"}(LoginViewConst||(LoginViewConst={}));var MainViewConst;!function(t){t[t.Login=1e3]="Login",t[t.Loading=1001]="Loading",t[t.Lobby=1002]="Lobby"}(MainViewConst||(MainViewConst={}));var lobby;!function(t){var e=function(){function t(){}return t.Lobby_LoginLobby="10003",t.Lobby_LoginLobby_Back="10004",t.Lobby_RegisterAccount="10112",t.Lobby_Lobby_RegisterAccount_Back="10113",t.Lobby_GetCaptcha="10114",t.Lobby_GetCaptcha_Back="10115",t.Lobby_ResetLoginPassword="10116",t.Lobby_ResetLoginPassword_Back="10117",t.Lobby_RechargeType="10118",t.Lobby_RechargeType_Back="10119",t.Lobby_RechargeMoney="10120",t.Lobby_RechargeMoney_Back="10121",t.Lobby_Exchange="10122",t.Lobby_Exchange_Back="10123",t.Lobby_SaveMoney="10124",t.Lobby_SaveMoney_Back="10125",t.Lobby_TakeMoney="10126",t.Lobby_TakeMoney_Back="10127",t.Lobby_NoticeList="10128",t.Lobby_NoticeList_Back="10129",t.Lobby_SingleNotice="10130",t.Lobby_SingleNotice_Back="10131",t.Lobby_DeleteSingleNotice="10132",t.Lobby_DeleteSingleNotice_Back="10133",t.Lobby_MailList="10134",t.Lobby_MailList_Back="10135",t.Lobby_SingleMail="10136",t.Lobby_SingleMail_Back="10137",t.Lobby_DeleteSingleMail="10138",t.Lobby_DeleteSingleMail_Back="10139",t.Lobby_ActivityList="10140",t.Lobby_ActivityList_Back="10141",t.Lobby_SingleActivity="10142",t.Lobby_SingleActivity_Back="10143",t.Lobby_webLogOut="10144",t.Lobby_webLogOut_Back="10145",t.Lobby_roleSetting="10146",t.Lobby_roleSetting_Back="10147",t.Lobby_RechargeRecord="10151",t.Lobby_RechargeRecord_Back="10152",t.Lobby_ResetMoneyPwd="10153",t.Lobby_ResetMoneyPwd_Back="10154",t.Lobby_BindBankCard="10155",t.Lobby_BindBankCard_Back="10156",t.Lobby_BindBankList="10157",t.Lobby_BindBankList_Back="10158",t.Lobby_UnBindBankCard="10178",t.Lobby_UnBindBankCard_Back="10179",t.Lobby_CustomerSendMsg="10180",t.Lobby_CustomerSendMsg_Back="10181",t.Lobby_FastGrabRedEnvelope="10160",t.Lobby_FastGrabRedEnvelope_Back="10161",t.Lobby_ShowRedEnvelope="10162",t.Lobby_ShowRedEnvelope_Back="10163",t.Lobby_LayMine="10164",t.Lobby_LayMine_Back="10165",t.Lobby_NewRedEnvelopeNotify="10166",t.Lobby_GrabRedEnvelope="10167",t.Lobby_GrabRedEnvelope_Back="10168",t.Lobby_RedEnvelopeIncome="10169",t.Lobby_RedEnvelopeIncome_Back="10170",t.Lobby_RecvIncome="10171",t.Lobby_RecvIncome_Back="10172",t.Lobby_SeeDetails="10173",t.Lobby_SeeDetails_Back="10174",t.Lobby_ExpiredRedEnvelopeNotify="10175",t.CsWorldAgentBackgroundReqType="10176",t.ScWorldAgentBackgroundResType="10177",t}();t.ProxyKeyConst=e,__reflect(e.prototype,"lobby.ProxyKeyConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t.inits(),t.registers(),t.addListeners(),t.refreshView(GamePlayerMgr.i.getPlayer()),t}return __extends(i,e),i.prototype.refreshView=function(t){this.LobbyView.refresh()},i.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.LobbyModel(this),this._proxy=new t.LobbyProxy(this,this.getModel()),this.LobbyView=new t.LobbyView(this,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Lobby,this.LobbyView)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.LobbyConst.ChangeHeadImg,this.changeHeadImg,this),this.registerFunc(t.LobbyConst.ChangeNickName,this.changeNickName,this),this.registerFunc("refreshView",this.refreshView,this),this.registerFunc("openProxyWeb",this.openProxyWeb,this)},i.prototype.openProxyWeb=function(t){this._proxy.sendGetAgentUrl()},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),App.MessageCenter.addListener(GameConsEvent.Game_UserChangeAccount,this.refreshView,this),this._proxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),App.MessageCenter.removeListener(GameConsEvent.Game_UserChangeAccount,this.refreshView,this),this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.changeHeadImg=function(t,e,i){this.LobbyView.changeLobbyHeadImg(t,e,i)},i.prototype.changeNickName=function(t){this.LobbyView.changeNickName(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseController);t.LobbyController=e,__reflect(e.prototype,"lobby.LobbyController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.activityData=[],i}return __extends(e,t),e.prototype.setListData=function(t){this.activityListData=t},e.prototype.getListData=function(){return this.activityListData},e.prototype.setData=function(t,e){this.activityData[t]=e},e.prototype.getData=function(t){return this.activityData[t]},e.prototype.destroy=function(){for(var t in this.activityData)this.activityData[t]=void 0;this.activityListData=void 0,this.activityData=void 0},e}(BaseModel);t.ActivityModel=e,__reflect(e.prototype,"lobby.ActivityModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.BankModel=e,__reflect(e.prototype,"lobby.BankModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.payTypeListData={},i}return __extends(e,t),e}(BaseModel);t.CustomerModel=e,__reflect(e.prototype,"lobby.CustomerModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.bankCardList=[],i.exchangeType=0,i}return __extends(e,t),e.prototype.saveBankCardList=function(t){this.bankCardList=t},e.prototype.getBankCardList=function(){return this.bankCardList},e.prototype.setExchangeType=function(t){this.exchangeType=t},e.prototype.getExchangeType=function(){return this.exchangeType},e.prototype.saveCurrIndex=function(t){this.currIndex=t},e.prototype.getCurrIndex=function(){return this.currIndex},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bankCardList=void 0,this.exchangeType=void 0,this.currIndex=void 0},e}(BaseModel);t.ExchangeModel=e,__reflect(e.prototype,"lobby.ExchangeModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.LobbyModel=e,__reflect(e.prototype,"lobby.LobbyModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nickname="",e.money=0,e.safe_money=0,e.sex=0,e.vip=0,e.avatar=0,e.avatar_box=0,e}return __extends(e,t),e}(BaseModel);t.LoginModel=e,__reflect(e.prototype,"lobby.LoginModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.annouceData=[],i.mailData=[],i}return __extends(e,t),e.prototype.setListData=function(t,e){1==e&&(this.mailListData=t),2==e&&(this.annouceListData=t)},e.prototype.cleanListData=function(t){1==t?this.mailListData=null:2==t&&(this.annouceListData=null)},e.prototype.getListData=function(t){return 1==t?this.mailListData:2==t?this.annouceListData:void 0},e.prototype.deleteListData=function(t,e){1==e&&this.mailListData.list.splice(t,1),2==e&&this.annouceListData.list.splice(t,1)},e.prototype.setData=function(t,e,i){1==i&&(this.mailData[t]=e),2==i&&(this.annouceData[t]=e)},e.prototype.getData=function(t,e){return 1==e?this.mailData[t]:2==e?this.annouceData[t]:void 0},e.prototype.deleteSingleData=function(t,e){1==e&&(this.mailData[t]=void 0),2==e&&(this.annouceData[t]=void 0)},e.prototype.destroy=function(){for(var t in this.annouceData)this.annouceData[t]=void 0;for(var t in this.mailData)this.mailData[t]=void 0;this.annouceData=void 0,this.annouceListData=void 0,this.mailData=void 0,this.mailListData=void 0},e}(BaseModel);t.MessageModel=e,__reflect(e.prototype,"lobby.MessageModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.payTypeListData={},i.payChannelListData={},i.curryPayInfo={},i.payTypeListData={},i.payChannelListData={},i.curryPayInfo={},i}return __extends(e,t),e.prototype.savePayTypeList=function(t){for(var e=0;e<t.length;e++){var i=t[e].pay_code;this.payTypeListData[i]=t[e].id,this.payChannelListData[i]=t[e].channel}Log.trace("保存充值渠道信息",this.payChannelListData)},e.prototype.getCurrPayType=function(t){var e=t;return this.payTypeListData[e]},e.prototype.getCurrPayChannel=function(t){return this.payChannelListData[t]},e.prototype.setCurrPayInfo=function(t,e){this.curryPayInfo={channel_id:t[e].channel_id,max_limit:t[e].max_limit,min_limit:t[e].min_limit,pay_code:t[e].pay_code}},e.prototype.getCurrPayInfo=function(){return this.curryPayInfo},e.prototype.destroy=function(){this.payTypeListData=void 0,this.payChannelListData=void 0,this.curryPayInfo=void 0},e}(BaseModel);t.RechargeModel=e,__reflect(e.prototype,"lobby.RechargeModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.redPackListData={},i}return __extends(e,t),e.prototype.saveRedPackList=function(t){for(var e=0;e<t.length;e++){var i=t[e].id;this.redPackListData[i]=t[e]}},e.prototype.getCurrRedPackInfo=function(t){return this.redPackListData[t]},e.prototype.destroy=function(){this.redPackListData=void 0},e}(BaseModel);t.RedPacketModel=e,__reflect(e.prototype,"lobby.RedPacketModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.SettingModel=e,__reflect(e.prototype,"lobby.SettingModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(BaseModel);t.UserInfoModel=e,__reflect(e.prototype,"lobby.UserInfoModel")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.DeleteItem=30031,t.ShowContent=30032,t.ActivityListReq=30033,t.SingleActivityReq=30034,t}();t.ActivityConst=e,__reflect(e.prototype,"lobby.ActivityConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return Log.trace("注册活动"),i.inits(),i.initFunc(),i.addListeners(),i.activityView=new t.ActivityView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Activity,i.activityView),i.activityPromptView=new t.ActivityPromptView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ActivityPrompt,i.activityPromptView),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.activityModel=new t.ActivityModel(this),this.activityProxy=new t.ActivityProxy(this,this.activityModel),this.setModel(this.activityModel)},i.prototype.initFunc=function(){this.registerFunc(t.ActivityConst.ActivityListReq,this.onActivityListReq,this),this.registerFunc(t.ActivityConst.SingleActivityReq,this.onActivityReq,this),this.registerFunc(t.ActivityConst.ShowContent,this.showContent,this)},i.prototype.onActivityListReq=function(t){this.activityProxy.activityListReq(t)},i.prototype.onActivityReq=function(t){this.activityProxy.singleActivityReq(t)},i.prototype.showContent=function(t){this.activityPromptView.showContent(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.activityProxy.addEvent()},i.prototype.removeListeners=function(){this.activityProxy.removeEvent()},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.activityView.destroy(),this.activityProxy.destroy(),this.activityModel.destroy(),this.activityView=void 0,this.activityProxy=void 0,this.activityModel=void 0},i}(BaseController);t.ActivityController=e,__reflect(e.prototype,"lobby.ActivityController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/component/PromptSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.deleteBtn.visible=!1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn2,this.closeView,this)
},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn2)},i.prototype.deleteMessage=function(){var e=this.getBaseController();this.applyFunc(t.MessageConst.DeleteItem,{token:GamePlayerMgr.i.getPlayer().getToken(),id:this.currItemId},e.getMsgType()),App.ViewManager.closeView(this)},i.prototype.showContent=function(t){this.muScroller.viewport.scrollV=0,this.title.text=t.title,this.content.text=t.content,this.currItemId=t.id,this.muScroller.viewport.height=this.content.textHeight+10},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showView(this)},i.prototype.closeView=function(){Log.trace("关闭弹出消息");var t=this;App.EffectUtils.hideView(this,function(){App.ViewManager.closeView(t)})},i.prototype.clearContent=function(){this.title.text="",this.content.text=""},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ActivityPromptView=e,__reflect(e.prototype,"lobby.ActivityPromptView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ActivitySkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.activityList.itemRenderer=t.ActivityItemRender,this.alCollection=new eui.ArrayCollection;var i=new eui.VerticalLayout;this.activityList.layout=i,this.scrollerActivity.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerActivity.scrollPolicyH=eui.ScrollPolicy.OFF;var o={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};this.applyFunc(t.ActivityConst.ActivityListReq,o)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.MessageCenter.addListener("onActivityListAck",this.createList,this),App.MessageCenter.addListener("onSingleActivityAck",this.showSingleAnnou,this),this.activityList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemClick,this),this.scrollerActivity.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.MessageCenter.removeListener("onActivityListAck",this.createList,this),App.MessageCenter.removeListener("onSingleActivityAck",this.showSingleAnnou,this),this.activityList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemClick,this),this.scrollerActivity.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this)},i.prototype.initListData=function(t){for(var e=[],i=0;i<t.list.length;i++)e[i]={title:t.list[i].title,date:App.DateUtils.getFormatBySecond(1e3*Number(t.list[i].created_at),2),id:t.list[i].id,icon:"activity_favorble"};return e},i.prototype.createList=function(t){Log.trace("创建列表");var t=this.initListData(t);this.alCollection.replaceAll(t),this.activityList.dataProvider=this.alCollection,this.scrollerActivity.viewport=this.activityList,this.alCollection.refresh()},i.prototype.onListItemClick=function(e){var i=this.activityList.selectedIndex,o=this.activityList.getElementAt(i),n=this.getBaseController().getModel();n.getData(o.itemId)?this.showSingleAnnou(n.getData(o.itemId)):this.applyFunc(t.ActivityConst.SingleActivityReq,{token:GamePlayerMgr.i.getPlayer().getToken(),id:o.itemId})},i.prototype.showSingleAnnou=function(e){this.applyFunc(t.ActivityConst.ShowContent,e),R.sendPlayerAction("Lobbyactivity_clicklist"),App.ViewManager.open(t.LobbyViewConst.ActivityPrompt,LayerManager.UI_Tips)},i.prototype.nextPage=function(){if(!(this.scrollerActivity.viewport.scrollV+this.scrollerActivity.height<this.scrollerActivity.viewport.contentHeight&&this.scrollerActivity.viewport.scrollV>0)&&this.nowPage<this.totalPage){this.nowPage=this.nowPage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:this.nowPage};this.applyFunc(t.ActivityConst.ActivityListReq,e)}},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭活动"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ActivityView=e,__reflect(e.prototype,"lobby.ActivityView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.addListeners(),i.initFunc(),i.bankView=new t.BankView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Bank,i.bankView),Log.trace("注册银行"),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.bankModel=new t.BankModel(this),this.bankProxy=new t.BankProxy(this,this.bankModel)},i.prototype.initFunc=function(){this.registerFunc("saveMoney",this.onSaveMonye,this),this.registerFunc("takeMoney",this.onTakeMonye,this),this.registerFunc("setMoneyPwd",this.onSetMoneyPwd,this)},i.prototype.onSaveMonye=function(t){this.bankProxy.saveMoney(t)},i.prototype.onTakeMonye=function(t){this.bankProxy.takeMoney(t)},i.prototype.onSetMoneyPwd=function(t){this.bankProxy.setMoneyPwd(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.bankProxy.addEvent()},i.prototype.removeListeners=function(){this.bankProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.bankModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.bankView.destroy(),this.bankModel.destroy(),this.bankProxy.destroy(),this.bankView=void 0,this.bankModel=void 0,this.bankProxy=void 0},i}(BaseController);t.BankController=e,__reflect(e.prototype,"lobby.BankController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/BankSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.pwdInput.visible=!1;var e=GamePlayerMgr.i.getPlayer();this.currMoneyTxt.text=""+App.CommonUtils.money2Str(e.getMoney()),this.savedMoneyTxt.text=""+App.CommonUtils.money2Str(e.getSafeMoney()),this.tabSaveBtn.setImage("bankTab_save_sel","bankTab_save_nor"),this.tabTakeBtn.setImage("bankTab_take_sel","bankTab_take_nor"),this.tabSaveBtn.selected=!0,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.optType=2,GamePlayerMgr.i.getPlayer().getIsPwdSeted()||(this.tipTxt.text="请设置资金密码",this.pwdInput.visible=!0),this.moneySlider.track.mask=this.moneySlider.trackHighlight},e.prototype.addEvent=function(){t.prototype.addEvent.call(this);var e;for(var i in this.numBtnGroup1.$children)e=this.numBtnGroup1.$children[i],App.CommonUtils.effectButton(e,this.numBtnOnClick,this,{name:e.name});for(var i in this.numBtnGroup2.$children)e=this.numBtnGroup2.$children[i],App.CommonUtils.effectButton(e,this.pwdBtnOnClick,this,{name:e.name});App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.clear,this.backOne,this),App.CommonUtils.effectButton(this.clearAll,this.clearInput,this),App.CommonUtils.effectButton(this.saveIn,this.onOptClick,this),App.CommonUtils.effectButton(this.takeOut,this.onOptClick,this),App.CommonUtils.effectButton(this.pwdCloseBtn,this.closePwdView,this),App.CommonUtils.effectButton(this.passwordClear,this.pwdBackOne,this),App.CommonUtils.effectButton(this.passwordClearAll,this.clearPwdInput,this),App.CommonUtils.effectButton(this.passwordConfirm,this.confirmOpt,this),App.CommonUtils.effectButton(this.maxBtn,this.onClickMax,this),this.tabTakeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabSaveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.moneySlider.addEventListener(eui.UIEvent.CHANGE,this.onChangeMoney,this),App.MessageCenter.addListener("UserMoneyChange",this.refreshMoney,this),App.MessageCenter.addListener("onSetMoneyPwdBack",this.closePwdView,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this);for(var e in this.numBtnGroup1.$children)App.CommonUtils.removeButton(this.numBtnGroup1.$children[e]);for(var e in this.numBtnGroup2.$children)App.CommonUtils.removeButton(this.numBtnGroup2.$children[e]);App.CommonUtils.removeButton(this.clear),App.CommonUtils.removeButton(this.clearAll),App.CommonUtils.removeButton(this.saveIn),App.CommonUtils.removeButton(this.takeOut),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.pwdCloseBtn),App.CommonUtils.removeButton(this.passwordClear),App.CommonUtils.removeButton(this.passwordClearAll),App.CommonUtils.removeButton(this.passwordConfirm),App.CommonUtils.removeButton(this.maxBtn),this.tabTakeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabSaveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.moneySlider.removeEventListener(eui.UIEvent.CHANGE,this.onChangeMoney,this)},e.prototype.backOne=function(){Log.trace("退格"),this.saveMoneyInput.text=this.saveMoneyInput.text.slice(0,this.saveMoneyInput.text.length-1);var t=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));this.moneySlider.value=Math.floor(Number(this.saveMoneyInput.text)/t*100),this.moneySlider.value<1&&(this.moneySlider.value=1),""==this.saveMoneyInput.text&&(this.moneySlider.value=0),this.percentage.text="("+this.moneySlider.value+"%)",R.sendPlayerAction("Lobbysafe_smallclear")},e.prototype.pwdBackOne=function(){Log.trace("密码退格"),this.passwordInput.text=this.passwordInput.text.slice(0,this.passwordInput.text.length-1)},e.prototype.clearInput=function(){this.resetData(),R.sendPlayerAction("Lobbysafe_bigclear")},e.prototype.clearPwdInput=function(){this.passwordInput.text=""},e.prototype.onOptClick=function(){return this.saveMoneyInput.text&&"0"!=this.saveMoneyInput.text?(this.pwdInput.visible=!0,this.tipTxt.text="请输入资金密码",void(1==this.optType?R.sendPlayerAction("Lobbysafe_buttontakeout"):R.sendPlayerAction("Lobbysafe_buttonstore"))):void App.ScrollTxtTips.showTip("请输入金额")},e.prototype.takeOnClick=function(t){Log.trace("点击取出"+Number(this.saveMoneyInput.text)),this.pwdInput.visible=!0,this.tipTxt.text="请输入资金密码"},e.prototype.switchTab=function(t){t.currentTarget==this.tabTakeBtn&&!this.takeOut.visible&&this.tabTakeBtn.touchEnabled?(this.tabSaveBtn.selected=!1,this.takeOut.visible=!0,this.saveIn.visible=!1,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.curryMoneyTypeTxt.text="输入取款",this.clearInput(),this.optType=1,R.sendPlayerAction("Lobbysafe_clicktakeout")):t.currentTarget==this.tabSaveBtn&&!this.saveIn.visible&&this.tabSaveBtn.touchEnabled&&(this.tabTakeBtn.selected=!1,this.takeOut.visible=!1,this.saveIn.visible=!0,this.tabTakeBtn.touchEnabled=!this.tabTakeBtn.selected,this.tabSaveBtn.touchEnabled=!this.tabSaveBtn.selected,this.curryMoneyTypeTxt.text="输入存款",this.clearInput(),this.optType=2,R.sendPlayerAction("Lobbysafe_clickstore"))},e.prototype.numBtnOnClick=function(t){this.saveMoneyInput.text.length>0&&"0"==this.saveMoneyInput.text.substr(0,1)&&(this.saveMoneyInput.text=this.saveMoneyInput.text.slice(1));var e=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));return Number(this.saveMoneyInput.text+t.name)>=e?(App.ScrollTxtTips.showTip("已到达最大值"),this.saveMoneyInput.text=e+"",this.percentage.text="(100%)",void(this.moneySlider.value=100)):void(t&&this.saveMoneyInput.text.length<9&&(this.saveMoneyInput.text=this.saveMoneyInput.text+t.name,this.moneySlider.value=Math.floor(Number(this.saveMoneyInput.text)/e*100),this.moneySlider.value<1&&"0"!=this.saveMoneyInput.text&&(this.moneySlider.value=1),this.percentage.text="("+this.moneySlider.value+"%)"))},e.prototype.pwdBtnOnClick=function(t){t&&this.passwordInput.text.length<6&&(this.passwordInput.text=this.passwordInput.text+t.name)},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),App.EffectUtils.showUI(this);var o=GamePlayerMgr.i.getPlayer();this.savedMoneyTxt.text=""+App.CommonUtils.money2Str(o.getSafeMoney()),this.currMoneyTxt.text=""+App.CommonUtils.money2Str(o.getMoney())},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},e.prototype.confirmOpt=function(){if(6!=this.passwordInput.text.length)return Log.trace("this.passwordInput.text.length",this.passwordInput.text.length),void App.ScrollTxtTips.showTip("请输入6位数字的资金密码");if(!GamePlayerMgr.i.getPlayer().getIsPwdSeted()){var t={token:GamePlayerMgr.i.getPlayer().getToken(),password:this.passwordInput.text};return void this.applyFunc("setMoneyPwd",t)}if(1==this.optType){var t={token:GamePlayerMgr.i.getPlayer().getToken(),money:App.CommonUtils.moneyC2S(Number(this.saveMoneyInput.text)),password:this.passwordInput.text};this.applyFunc("takeMoney",t)}else if(2==this.optType){var t={token:GamePlayerMgr.i.getPlayer().getToken(),money:App.CommonUtils.moneyC2S(Number(this.saveMoneyInput.text)),password:this.passwordInput.text};this.applyFunc("saveMoney",t)}this.passwordInput.text=""},e.prototype.refreshMoney=function(t){Log.trace("BankView 刷新金币",t),this.resetData(),this.currMoneyTxt.text=App.CommonUtils.money2Str(t.balance),(t.deposit||0==t.deposit)&&(this.savedMoneyTxt.text=App.CommonUtils.money2Str(t.deposit)),this.pwdInput.visible=!1},e.prototype.onClickMax=function(){var t=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));this.saveMoneyInput.text=t+"",this.moneySlider.value=100,this.percentage.text="(100%)"},e.prototype.onChangeMoney=function(t){var e=2==this.optType?Math.floor(Number(this.currMoneyTxt.text)):Math.floor(Number(this.savedMoneyTxt.text));t.currentTarget==this.saveMoneyInput&&(Log.trace("数值改变",Number(this.saveMoneyInput.text)),Number(this.saveMoneyInput.text)>=e&&(this.saveMoneyInput.text=e+"")),this.percentage.text="("+this.moneySlider.value+"%)",this.saveMoneyInput.text=e*this.moneySlider.value/100+""},e.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭银行"),this.clearInput(),this.passwordInput.text="",App.ViewManager.closeView(this)},e.prototype.closePwdView=function(){return this.resetData(),GamePlayerMgr.i.getPlayer().getIsPwdSeted()?void(this.pwdInput.visible=!1):void this.close()},e.prototype.resetData=function(){this.saveMoneyInput.text="",this.passwordInput.text="",this.moneySlider.value=0,this.percentage.text="(0%)"},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this),App.MessageCenter.removeListener("onSetMoneyPwdBack",this.closePwdView,this)},e}(BaseEuiView);t.BankView=e,__reflect(e.prototype,"lobby.BankView")}(lobby||(lobby={}));var BasePanelView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/PanelSkin.exml",o}return __extends(e,t),e.prototype.setGroup=function(t,e){this.testGroup.width=t,this.testGroup.height=e},Object.defineProperty(e.prototype,"title",{get:function(){return this._text},set:function(t){this._text=t,this.titleText.text=this._text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=this._icon)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"btn",{get:function(){return this._btn},set:function(t){this._btn=t,this.button&&(this.button.visible=!0,this.button.source=this._btn)},enumerable:!0,configurable:!0}),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.closeBtnOnClick,this)},e.prototype.initData=function(){t.prototype.initData.call(this)},e.prototype.closeBtnOnClick=function(t){App.ViewManager.closeView(this)},e}(BaseEuiView);__reflect(BasePanelView.prototype,"BasePanelView");var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.onLoadedData,e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.icon.source=this.data.icon,this.title.text=this.data.title,this.dateLabel.text=this.data.date)},e.prototype.onLoadedData=function(){Log.trace("初始化完成"+this.data),this.content.visible=!1,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onLoadedData,this)},Object.defineProperty(e.prototype,"itemId",{get:function(){return this.data.id},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){},e}(eui.ItemRenderer);t.ActivityItemRender=e,__reflect(e.prototype,"lobby.ActivityItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsOver=!1,e}return __extends(e,t),e.create=function(){return ObjectPool.pop("lobby.GoldBone")},e.release=function(t){t.clean(),ObjectPool.push(t)},Object.defineProperty(e.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._mIsOver=!1,this.initRes()},e.prototype.initRes=function(){var t="gold";this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.stop(),this.armature.play(e.Animation,3)},e.prototype.stop=function(){this._mIsOver=!1,this.armature.stop()},e.prototype.armaturePlayEnd=function(t){this._mCallBack&&this._mCallBack.call(this._mThisobj),Log.log("红包动画播放完毕，，"),this._mIsOver=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mIsOver=!1,this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.GoldBone=e,__reflect(e.prototype,"lobby.GoldBone")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),egret.log("dataChanged",this.data),this.data.icon&&(this.headImg.touchEnabled=!0,1==this.data.type&&(this.headImg.source=this.data.icon,this.headImg.visible=!0,this.headImgBox.touchEnabled=!1),2==this.data.type&&(this.headImgBox.source=this.data.icon,this.headImg.visible=!1,this.headImgBox.touchEnabled=!0),this.refreshSign())},e.prototype.refreshSign=function(){this.sign.visible=this.data.isSelected},e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),this.data&&i==this.headImg&&(this.headImg.source=this.data.icon)},e}(eui.ItemRenderer);t.HeadImgItemRenderer=e,__reflect(e.prototype,"lobby.HeadImgItemRenderer")}(lobby||(lobby={}));var IconView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(eui.Button);__reflect(IconView.prototype,"IconView");var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.onLoadedData,t),t}return __extends(i,e),i.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.dateLabel.text=this.data.date,this.title.text=this.data.title,this.label.selected=this.data.is_readed,this.icon.selected=this.data.is_readed)},i.prototype.refeshSign=function(t){console.log("更新标识"),this.label.selected=t,this.icon.selected=t},i.prototype.onLoadedData=function(){this.item_bg&&(this.item_bg.touchEnabled=!0),this.label&&(this.label.touchEnabled=!1,this.label.setUnSelected("message_check",113,41),this.label.setInSelected("message_checked",79,80)),this.icon&&(this.icon.touchEnabled=!1,this.icon.setImage("message_mail_iconClose","message_mail_iconOpen"),this.icon.setInSelected("",72,68),this.icon.setUnSelected("",72,68)),this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.onLoadedData,this)},i.prototype.showMessage=function(e){App.ViewManager.open(t.LobbyViewConst.MessagePrompt,LayerManager.UI_Tips)},Object.defineProperty(i.prototype,"itemId",{get:function(){return this.data.id},enumerable:!0,configurable:!0}),i}(eui.ItemRenderer);t.MessageItemRender=e,__reflect(e.prototype,"lobby.MessageItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/lobby/skins/component/OtherButtonSkin.exml",e.name="share",e}return __extends(e,t),e.prototype.setBtnBg=function(t,e,i){this.btnBg.source=t,e&&(this.btnBg.width=e),i&&(this.btnBg.height=i)},e.prototype.setIcon=function(t,e,i){this.iconDisplay.source=t,e&&(this.btnBg.width=e),i&&(this.btnBg.height=i)},e.prototype.setClick=function(t){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onClickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onClickCancelEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClickConfirmEvent,this),this.onClick=t},e.prototype.onClickEvent=function(t){console.log("点击开始"),console.log(t.currentTarget);var e=(t.currentTarget.width-.8*t.currentTarget.width)/2,i=(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:.8,scaleY:.8,x:e,y:i},40)},e.prototype.onClickCancelEvent=function(t){console.log("点击取消");(t.currentTarget.width-.8*t.currentTarget.width)/2,(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1,x:1,y:1},40)},e.prototype.onClickConfirmEvent=function(t){console.log("点击确认"),console.log(t.currentTarget.width);(t.currentTarget.width-.8*t.currentTarget.width)/2,(t.currentTarget.height-.8*t.currentTarget.height)/2;t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1,x:1,y:1},40).call(this.onClickHandler,this,[t.currentTarget])},e.prototype.onClickHandler=function(t){this.onClick(t)},e.prototype.setArg=function(t){this.tempArg=t},e}(eui.Component);t.OtherButton=e,__reflect(e.prototype,"lobby.OtherButton")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="BankButtonSkin",e.unSelectedCText.visible=!1,e.SelectedCText.visible=!1,e}return __extends(e,t),e.prototype.setImageBg=function(t,e){this.inSelected.width=t,this.unSelected.width=t-14,this.inSelected.height=null!=e?e:70,this.unSelected.height=null!=e?e:70},e.prototype.setImage=function(t,e,i,o,n,s){t&&(this.txt_inSelected.source=t),e&&(this.txt_unSelected.source=e),i&&(this.txt_inSelected.width=i,this.txt_unSelected.width=i),o&&(this.txt_inSelected.height=o,this.txt_unSelected.height=o),n&&(this.txt_inSelected.x=n,this.txt_unSelected.x=n),s&&(this.txt_inSelected.y=s,this.txt_unSelected.y=s)},e.prototype.setUnSelected=function(t,e,i){this.unSelected.source=t,this.unSelected.width=e,this.unSelected.height=i},e.prototype.setInSelected=function(t,e,i){this.inSelected.source=t,this.inSelected.width=e,this.inSelected.height=i},e.prototype.setContentText=function(t){this.unSelectedCText.visible=!0,this.SelectedCText.visible=!0,this.unSelectedCText.text=t,this.SelectedCText.text=t},e.prototype.setName=function(t){this.name=t},e}(eui.ToggleButton);t.OtherToggle=e,__reflect(e.prototype,"lobby.OtherToggle")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/lobby/skins/component/PackTypeItem.exml",e}return __extends(e,t),e.prototype.updateData=function(t,e){this.index=t,this.data=e,this.dataChanged()},e.prototype.dataChanged=function(){this.data&&Log.log("redPacketItem.data=",this.data.packNum),this.txtType.text=this.data.packNum+"包"+this.data.multiple+"倍"},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this.index},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Log.trace("测试富文本")},e}(eui.Component);t.PacketTypeItem=e,__reflect(e.prototype,"lobby.PacketTypeItem",["eui.UIComponent","egret.DisplayObject"])}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.itemNum=0,e.stopMove=!1,e.curIndex=0,e.nextIndex=1,e.isMove=!1,e.mainGroup=new eui.Group,e.group0=new eui.Group,e.group1=new eui.Group,e.btn_pre=new eui.Image,e.btn_next=new eui.Image,e.btn_pre.source="hongbaosaolei_qumailei_jiantou1",e.btn_next.source="hongbaosaolei_qumailei_jiantou2",e}return __extends(e,t),e.prototype.initUi=function(){this.mainGroup.width=this.pageWid,this.mainGroup.height=this.pageHei,this.mainGroup.x=50,this.addChild(this.mainGroup),this.group0.width=this.group1.width=this.pageWid,this.group0.height=this.group1.height=this.pageHei,this.mainGroup.addChild(this.group0),this.mainGroup.addChild(this.group1),this.group1.x=this.pageWid,this.btn_pre.y=26,this.btn_next.x=50+this.pageWid,this.btn_next.y=26,this.addChild(this.btn_pre),this.addChild(this.btn_next)},e.prototype.init=function(t,e,i){this.pageWid=t,this.pageHei=e,this.initUi();var o=new egret.Shape;o.graphics.beginFill(16711935,1),o.graphics.drawRect(0,0,this.pageWid,this.pageHei),o.graphics.endFill(),o.x=this.mainGroup.x,o.y=this.mainGroup.y,this.addChildAt(o,0),this.mainGroup.mask=o,this.touchsp=new egret.Shape,this.touchsp.graphics.beginFill(16711935,0),this.touchsp.graphics.drawRect(0,0,this.pageWid-8,this.pageHei),this.touchsp.graphics.endFill(),this.touchsp.x=this.mainGroup.x+4,this.touchsp.y=this.mainGroup.y,this.addChild(this.touchsp),this.touchsp.touchEnabled=!0,this.touchsp.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginTouch,this),this.btn_pre.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.preHandler,this),this.btn_next.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.nextHandler,this)},e.prototype.initItems=function(t,e){if(e){this.dataList=e;e.length;this.itemNum=3,this.item=new t,this.item.x=this.group0.x,this.item.y=this.group0.y,this.mainGroup.addChildAt(this.item,0),this.item.updateData(0,this.dataList.data_0),this.item1=new t,this.item1.x=this.group1.x,this.item1.y=this.group1.y,this.mainGroup.addChildAt(this.item1,0),this.item1.updateData(1,this.dataList.data_1)}},Object.defineProperty(e.prototype,"currentData",{get:function(){return this.dataList["data_"+this.curIndex]},enumerable:!0,configurable:!0}),e.prototype.beginTouch=function(t){this.touchBeginX=t.stageX,this.touchsp.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.toucheMove,this),this.touchsp.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},e.prototype.toucheMove=function(t){},e.prototype.touchEnd=function(t){var e=t.stageX-this.touchBeginX;0>e?this.moveDirection=-1:e>0&&(this.moveDirection=1),0!=e&&(this.isMove||this.moveGroup(this.pageWid),this.touchsp.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.toucheMove,this),this.touchsp.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this))},e.prototype.preHandler=function(){this.moveDirection=-1,this.isMove||this.moveGroup(this.pageWid)},e.prototype.nextHandler=function(){this.moveDirection=1,this.isMove||this.moveGroup(this.pageWid)},e.prototype.moveGroup=function(t){this.isMove=!0,-1==this.moveDirection?(this.preData(),this.item.x<=-this.pageWid&&(this.item.x=this.pageWid),this.item1.x<=-this.pageWid&&(this.item1.x=this.pageWid),this.item.x==this.pageWid?this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]):this.item1.updateData(this.curIndex,this.dataList["data_"+this.curIndex])):1==this.moveDirection&&(this.nextData(),this.item.x>=this.pageWid&&(this.item.x=-this.pageWid),this.item1.x>=this.pageWid&&(this.item1.x=-this.pageWid),this.item.x==-this.pageWid?this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]):this.item1.updateData(this.curIndex,this.dataList["data_"+this.curIndex]));var e=this.item.x+t*this.moveDirection,i=this.item1.x+t*this.moveDirection;Log.log("newx:",e,"newx1111=",i),egret.Tween.get(this.item).to({x:e},400,egret.Ease.quintOut).call(this.endMove,this,[this.item]),egret.Tween.get(this.item1).to({x:i},400,egret.Ease.quintOut).call(this.endMove,this,[this.item1])},e.prototype.endMove=function(t){egret.Tween.removeTweens(t),Log.log("动画完成，刷新数据：this.moveDirection=",this.moveDirection),-1==this.moveDirection?t.x<=-this.pageWid&&(t.x=this.pageWid):1==this.moveDirection&&t.x>=this.pageWid&&(t.x=-this.pageWid),this.isMove=!1},e.prototype.preData=function(){this.curIndex-=1,this.curIndex<0&&(this.curIndex=this.itemNum-1),Log.log("preData data():this.curIndex="+this.curIndex),-1==this.moveDirection},e.prototype.nextData=function(){this.curIndex+=1,this.curIndex>this.itemNum-1&&(this.curIndex=0),Log.log("next data():this.curIndex="+this.curIndex)},e.prototype.resetIndex=function(){this.curIndex=0,this.nextIndex=1,this.item.x=0,this.item.updateData(this.curIndex,this.dataList["data_"+this.curIndex]),this.item1.x=this.pageWid,this.item1.updateData(this.nextIndex,this.dataList["data_"+this.nextIndex])},e}(eui.Component);t.pageScroller=e,__reflect(e.prototype,"lobby.pageScroller")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.destroy,e),e}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&this.tx&&(this.tx.textFlow=[{text:this.data.pay_type,style:{size:20,textColor:0}},{text:"   "+this.data.money+"\n",style:{size:23,textColor:16750848}},{text:this.data.order_no+"\n",style:{size:20,textColor:0}},{text:this.data.created_at+"\n",style:{size:23,textColor:0}},{text:this.data.status+"\n",style:{size:23,textColor:0}}])},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Log.trace("测试富文本"),this.tx=new egret.TextField,this.tx.width=400,this.tx.x=166,this.tx.y=20,this.tx.lineSpacing=10,this.tx.textColor=16777215,this.tx.fontFamily="微软雅黑",this.tx.textAlign=egret.HorizontalAlign.LEFT,this.addChild(this.tx),App.CommonUtils.effectButton(this.copyBtn,this.copyContent,this)},e.prototype.copyContent=function(){if(App.IsNative)R.setClipboardInfo(this.data.order_no);else try{var t=document.createElement("input");t.readOnly=!0,t.value=this.data.order_no,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t)}catch(e){Log.trace(e)}App.ScrollTxtTips.showTip("已成功复制到粘贴板")},e.prototype.destroy=function(){App.CommonUtils.removeButton(this.copyBtn),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.destroy,this),this.tx=void 0},e}(eui.ItemRenderer);t.RechargeRecordItemRender=e,__reflect(e.prototype,"lobby.RechargeRecordItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/lobby/skins/component/RedPacDetailItem.exml",e}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){this.txtUName.text=this.data.nickname;var e=App.CommonUtils.money2Str(this.data.income);0==this.data.indexss&&0==this.data.payout_amount&&(this.txtMoney.textFlow=[{text:""+e,style:{textColor:15038709,size:23,bold:!0}}]),this.data.payout_amount>0&&(this.txtMoney.textFlow=[{text:""+e,style:{textColor:13419901,size:23,bold:!0}},{text:" (-"+App.CommonUtils.money2Str(this.data.payout_amount)+")",style:{textColor:16777215,size:23,bold:!0}}]),this.data.indexss>0&&0==this.data.payout_amount&&(this.txtMoney.textFlow=[{text:""+e,style:{textColor:16777215,size:24,bold:!0}}])
}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Log.trace("测试富文本")},e}(eui.ItemRenderer);t.RedPacDetailItemRender=e,__reflect(e.prototype,"lobby.RedPacDetailItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsOver=!1,e}return __extends(e,t),e.create=function(){return ObjectPool.pop("lobby.RedPackBone")},e.release=function(t){t.clean(),ObjectPool.push(t)},Object.defineProperty(e.prototype,"isOver",{get:function(){return this._mIsOver},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._mIsOver=!1,this.initRes()},e.prototype.initRes=function(){var t="hongbao-donghua_2";this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){this.armature.stop(),this.armature.play(t,0)},e.prototype.armaturePlayEnd=function(t){this._mIsOver=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="newAnimation",e.Animation1="newAnimation_1",e._mActionList=[e.Animation,e.Animation1],e}(base.BaseGameObject);t.RedPackBone=e,__reflect(e.prototype,"lobby.RedPackBone")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.skinName="redPacketItem",App.MessageCenter.addListener(t.RedPacketConst.infoStatusChange,i.statusChange,i),i}return __extends(i,e),i.prototype.dataChanged=function(){switch(e.prototype.dataChanged.call(this),this.data&&Log.log("redPacketItem.data=",this.data.packNum),10==this.data.state?(this.pack_bg.source="hongbaosaolei_hongbao_hongbao",this.img_caiyuan.visible=!0,this.img_status.visible=!1,this.txtDetail.visible=!1):(this.pack_bg.source="hongbaosaolei_hongbao_hongbao2",this.img_caiyuan.visible=!1,this.img_status.visible=!0,this.txtDetail.visible=!0),this.data.state){case 10:break;case 11:this.img_status.source="hongbaosaolei_hongbao_zhuangtai5";break;case 12:this.img_status.source="hongbaosaolei_hongbao_zhuangtai2";break;case 13:this.img_status.source="hongbaosaolei_hongbao_zhuangtai3";break;case 14:this.img_status.source="hongbaosaolei_hongbao_zhuangtai4"}this.addEventListener(egret.TouchEvent.TOUCH_END,this.grabPack,this),this.paketType.text=t.RedPacketConst.getTypeStr(this.data.type),this.uName.text=this.data.lay_mine_nickname},i.prototype.statusChange=function(t){this.data.id==t.id&&(this.data=t,this.dataChanged())},i.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.txtDetail.visible=!1,Log.trace("测试富文本"),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.reqDetail,this)},i.prototype.reqDetail=function(){1==this.txtDetail.visible&&App.MessageCenter.dispatch(t.RedPacketConst.seeDetailsReq,this.data.id)},i.prototype.grabPack=function(){10==this.data.state&&App.MessageCenter.dispatch(t.RedPacketConst.grabRedEnvelopeReq,this.data.id)},i}(eui.ItemRenderer);t.RedPacketItemRender=e,__reflect(e.prototype,"lobby.RedPacketItemRender")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.init(),e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.updateRes("jiantou")},e.prototype.updateRes=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,999999999)},e.prototype.stop=function(){this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.EntryArrowBone=e,__reflect(e.prototype,"lobby.EntryArrowBone")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.updateRes("RechargeAnim")},e.prototype.updateRes=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,999999999)},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="RechargeAnim",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.RechargeBtnBone=e,__reflect(e.prototype,"lobby.RechargeBtnBone")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.init(),e.touchEnabled=e.touchChildren=!1,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.updateRes("rabbitgirl")},e.prototype.updateRes=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.scaleX=this.armature.scaleY=.58},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,999999999)},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.RoleRabbitgirl=e,__reflect(e.prototype,"lobby.RoleRabbitgirl")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.CustomerSendMsg=2009e3,t}();t.CustomerConst=e,__reflect(e.prototype,"lobby.CustomerConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.customerModel=new t.CustomerModel(this),this.customerProxy=new t.CustomerProxy(this,this.customerModel),this.customerView=new t.CustomerView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Customer,this.customerView),this.setModel(this.customerModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.CustomerConst.CustomerSendMsg,this.onSendMsg,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.customerProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.customerProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.customerModel},enumerable:!0,configurable:!0}),i.prototype.onSendMsg=function(t){this.customerProxy.customerSendMsgReq(t)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.customerView.destroy(),this.customerProxy.destroy(),this.customerModel.destroy(),this.customerView=void 0,this.customerProxy=void 0,this.customerModel=void 0},i}(BaseController);t.CustomerController=e,__reflect(e.prototype,"lobby.CustomerController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/CustomerSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.onlineCustomer.selected=!0,this.onlineCustomer.touchEnabled=!1,this.strBase64=""},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.sendMsg,this.onSendMsgToCustomer,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.addImg,this.checkImgToCustomer,this),this.onlineCustomer.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleChangeHandler,this),this.question.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleChangeHandler,this),this.msgInput.addEventListener(eui.UIEvent.CHANGE,this.checkMsgInput,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.sendMsg),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.addImg),this.onlineCustomer.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.toggleChangeHandler,this),this.question.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.toggleChangeHandler,this),this.msgInput.removeEventListener(eui.UIEvent.CHANGE,this.checkMsgInput,this)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭客服"),App.ViewManager.closeView(this)},i.prototype.toggleChangeHandler=function(t){switch(t.currentTarget){case this.onlineCustomer:this.onlineCustomer.touchEnabled=!1,this.onlineCustomer.selected=!0,this.question.selected=!1,this.question.touchEnabled=!0;break;case this.question:this.onlineCustomer.touchEnabled=!0,this.onlineCustomer.selected=!1,this.question.selected=!0,this.question.touchEnabled=!1}},i.prototype.checkImgToCustomer=function(){App.ScrollTxtTips.showTip("敬请期待！")},i.prototype.checkMsgInput=function(){this.msgInput.text.length>52&&App.ScrollTxtTips.showTip("输入的问题描述内容最大长度为50")},i.prototype.onSendMsgToCustomer=function(){if(this.msgInput.text.length<5)return void App.ScrollTxtTips.showTip("您输入的问题描述内容过短，请重新输入");var e={text:this.msgInput.text,attachment:this.strBase64,attach_fmt:1};this.applyFunc(t.CustomerConst.CustomerSendMsg,e)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.CustomerView=e,__reflect(e.prototype,"lobby.CustomerView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ExchangeReq=2007e3,t.BindBankCardListReq=2007001,t.BindBankCardReq=2007002,t.UnBindBankCardReq=2007003,t}();t.ExchangeConst=e,__reflect(e.prototype,"lobby.ExchangeConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.exchangeModel=new t.ExchangeModel(this),this.exchangeProxy=new t.ExchangeProxy(this,this.exchangeModel),this.exchangeView=new t.ExchangeView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Exchange,this.exchangeView),this.setModel(this.exchangeModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.ExchangeConst.ExchangeReq,this.onExchangeReq,this),this.registerFunc(t.ExchangeConst.BindBankCardListReq,this.onBindBankCardListReq,this),this.registerFunc(t.ExchangeConst.BindBankCardReq,this.onBindBankCardReq,this),this.registerFunc(t.ExchangeConst.UnBindBankCardReq,this.onUnBindBankCardReq,this)},i.prototype.onExchangeReq=function(t){this.exchangeProxy.exchangeReq(t)},i.prototype.onBindBankCardListReq=function(t){this.exchangeProxy.bindBankCardListReq(t)},i.prototype.onBindBankCardReq=function(t){this.exchangeProxy.bindBankCardReq(t)},i.prototype.onUnBindBankCardReq=function(t){this.exchangeProxy.unBindBankCardReq(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.exchangeProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.exchangeProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.exchangeModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.exchangeView.destroy(),this.exchangeProxy.destroy(),this.exchangeModel.destroy(),this.exchangeView=void 0,this.exchangeProxy=void 0,this.exchangeModel=void 0},i}(BaseController);t.ExchangeController=e,__reflect(e.prototype,"lobby.ExchangeController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ExchangeSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.exchangeMoneyInput.restrict="0-9",this.exchangeMoneyInput.maxChars=8,this.tabBankCard.selected=!0,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.tabAlipay.setImage("exchange_alipay_sel","exchange_alipay_nor",155,30),this.tabBankCard.setImage("exchange_bankcard_sel","exchange_bankcard_nor",155,30);var t=GamePlayerMgr.i.getPlayer();this.currMoney_txt.text=""+App.CommonUtils.money2Str(t.getMoney()),this._timer=new egret.Timer(1e3,1),this.BankCardGroup.visible=!1,this.AddBankCardGroup.visible=!1,this.bankCardListGroup.visible=!1,this._exchangeType=1;for(var i=0;5>i;i++)this["itemGroup"+i].visible=!1},i.prototype.addEvent=function(){Log.trace("添加事件"),e.prototype.addEvent.call(this),this.tabAlipay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabBankCard.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.add.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.add.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.add.addEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.reduce.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.exchangeMoneyInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.contentInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.contentInput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openBankCardList,this),this.dropListBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openBankCardList,this),App.MessageCenter.addListener("bindBankCardListAck",this.onBindBankCardListBack,this),App.MessageCenter.addListener("bindBankCardAck",this.onBindBankCardBack,this),App.MessageCenter.addListener("unbindBankCardAck",this.onUnBindBankCardBack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserMoneyChange,this.refreshMoney,this),App.CommonUtils.effectButton(this.addAlipay,this.openAlipayManager,this),App.CommonUtils.effectButton(this.addBankCard,this.openBankCardManager,this),App.CommonUtils.effectButton(this.bankCardCloseBtn,this.hideBankCardManager,this),App.CommonUtils.effectButton(this.addBankCardBtn,this.openAddBankCard,this),App.CommonUtils.effectButton(this.addBankCardCloseBtn,this.hideAddBankCard,this),App.CommonUtils.effectButton(this.addAlipayCloseBtn,this.hideAddAlipay,this),App.CommonUtils.effectButton(this.exchangeBtn,this.exchangeReq,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.bankCardCloseBtn,this.close,this),App.CommonUtils.effectButton(this.addBankCardConfirm,this.onBlindBankCard,this),App.CommonUtils.effectButton(this.addAlipayConfirm,this.onBlindAlipay,this),App.CommonUtils.effectButton(this.exchangeClearAll,this.clearInput,this),this._timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerEnd,this);for(var t=0;5>t;t++){var i=this["itemGroup"+t].getChildAt(2);App.CommonUtils.effectButton(i,this.onDeleteBankCard,this,t)}for(var o in this.numBtnGroup2.$children){var n=this.numBtnGroup2.$children[o];App.CommonUtils.effectButton(n,this.numBtnOnClick,this,{name:n.name})}},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.tabAlipay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabBankCard.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.add.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.specialChange,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.specialChangeEnd,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_END,this.specialChangeEnd,this),this.reduce.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeExchangeMoney,this),this.exchangeMoneyInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.contentInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.contentInput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openBankCardList,this),this.dropListBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openBankCardList,this),App.MessageCenter.removeListener("bindBankCardListAck",this.onBindBankCardListBack,this),App.MessageCenter.removeListener("bindBankCardAck",this.onBindBankCardBack,this),App.MessageCenter.removeListener("unbindBankCardAck",this.onUnBindBankCardBack,this),App.MessageCenter.removeListener(GameConsEvent.Game_UserMoneyChange,this.refreshMoney,this),App.CommonUtils.removeButton(this.addAlipay),App.CommonUtils.removeButton(this.addBankCard),App.CommonUtils.removeButton(this.addBankCardBtn),App.CommonUtils.removeButton(this.bankCardCloseBtn),App.CommonUtils.removeButton(this.addBankCardCloseBtn),App.CommonUtils.removeButton(this.addAlipayCloseBtn),App.CommonUtils.removeButton(this.exchangeBtn),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.addBankCardConfirm),App.CommonUtils.removeButton(this.addAlipayConfirm),App.CommonUtils.removeButton(this.exchangeClearAll),this._timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerEnd,this);for(var t=0;5>t;t++){var i=this["itemGroup"+t].getChildAt(2);App.CommonUtils.removeButton(i)}for(var o in this.numBtnGroup2.$children)App.CommonUtils.removeButton(this.numBtnGroup2.$children[o])},i.prototype.switchTab=function(e){e.currentTarget==this.tabAlipay&&this.tabAlipay.touchEnabled?(this.tabBankCard.selected=!1,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.contentInput.prompt="输入您的支付宝账号",this.exchangeType_text.text="支付宝账号",this.addAlipay.visible=!0,this.addBankCard.visible=!1,this.clearInput(),this._exchangeType=2,R.sendPlayerAction("Lobbyexchange_toAlipay")):e.currentTarget==this.tabBankCard&&this.tabBankCard.touchEnabled&&(this.tabAlipay.selected=!1,this.tabAlipay.touchEnabled=!this.tabAlipay.selected,this.tabBankCard.touchEnabled=!this.tabBankCard.selected,this.contentInput.prompt="输入您的银行卡号",this.exchangeType_text.text="收款银行卡",this.addBankCard.visible=!0,this.addAlipay.visible=!1,this.clearInput(),this._exchangeType=1,R.sendPlayerAction("Lobbyexchange_tobankcard"));var i={type:this._exchangeType};this.applyFunc(t.ExchangeConst.BindBankCardListReq,i)},i.prototype.checkInput=function(t){switch(t.currentTarget){case this.exchangeMoneyInput:Number(this.exchangeMoneyInput.text)>=Math.floor(Number(this.currMoney_txt.text))&&(this.exchangeMoneyInput.text=Math.floor(Number(this.currMoney_txt.text))+"",App.ScrollTxtTips.showTip("已达到最大值"));break;case this.contentInput:this.contentInput.text.length>19&&(App.ScrollTxtTips.showTip("最大输入长度为19位"),this.contentInput.text=this.contentInput.text.slice(0,19))}},i.prototype.clearInput=function(){this.exchangeMoneyInput.text="",this.contentInput.text=""},i.prototype.openAlipayManager=function(){Log.trace("支付宝管理",this.addBankCardBtn.$children),this.managerTitle.source="exchange_bindAlipay_title",App.EffectUtils.showUI(this.BankCardGroup);var e={type:this._exchangeType};this.applyFunc(t.ExchangeConst.BindBankCardListReq,e),this.BankCardGroup.visible=!0;var i=this.addBankCardBtn.getChildAt(2);i.source="exchange_bindAlipay",R.sendPlayerAction("Lobbyexchange_changeAlipay")},i.prototype.openBankCardManager=function(){App.EffectUtils.showUI(this.BankCardGroup),this.managerTitle.source="exchange_managerBankcard_title";var e={type:this._exchangeType};this.applyFunc(t.ExchangeConst.BindBankCardListReq,e),this.BankCardGroup.visible=!0;var i=this.addBankCardBtn.getChildAt(2);i.source="exchange_addBankcard",R.sendPlayerAction("Lobbyexchange_bankcardcontrol")},i.prototype.hideBankCardManager=function(){this.BankCardGroup.visible=!1},i.prototype.openAddBankCard=function(){1==this._exchangeType?(App.EffectUtils.showUI(this.AddBankCardGroup),this.AddBankCardGroup.visible=!0,this.AddAlipayGroup.visible=!1,this.BankCardGroup.visible=!1,R.sendPlayerAction("Lobbyexchange_addbankcard")):(App.EffectUtils.showUI(this.AddBankCardGroup),this.AddAlipayGroup.visible=!0,this.AddBankCardGroup.visible=!1,this.BankCardGroup.visible=!1,R.sendPlayerAction("Lobbyexchange_bindingAlipay"))},i.prototype.hideAddBankCard=function(){this.AddBankCardGroup.visible=!1},i.prototype.hideAddAlipay=function(){this.AddAlipayGroup.visible=!1},i.prototype.changeExchangeMoney=function(t){var e;if(t.currentTarget==this.add){e=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100);var i=1==this._exchangeType?"Lobbyexchange_bankplusbutton":"Lobbyexchange_alipayplusbutton";R.sendPlayerAction(i)}else if(t.currentTarget==this.reduce){var i=1==this._exchangeType?"Lobbyexchange_bankminusbutton":"Lobbyexchange_alipayminusbutton";R.sendPlayerAction(i),e=-Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)}if(Number(this.exchangeMoneyInput.text)>=0){if(Number(this.exchangeMoneyInput.text)<0)return;Number(this.exchangeMoneyInput.text)+e>=App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())?this.exchangeMoneyInput.text=""+Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())):Number(this.exchangeMoneyInput.text)+e<=0?this.exchangeMoneyInput.text="":this.exchangeMoneyInput.text=""+(Number(this.exchangeMoneyInput.text)+e)}this.removeIncrementChange()},i.prototype.specialChange=function(t){t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:.9,scaleY:.9},40),this._timer.start(),t.currentTarget==this.add?(Log.trace("长按+"),this._optType=1):t.currentTarget==this.reduce&&(Log.trace("长按-"),this._optType=2)},i.prototype.specialChangeEnd=function(t){t.currentTarget.tw=egret.Tween.get(t.currentTarget),t.currentTarget.tw.to({scaleX:1,scaleY:1},40),this.removeIncrementChange(),this._timer.stop(),this._timer.reset()},i.prototype.onTimerEnd=function(){App.TimerManager.doTimer(100,99,this.incrementChange.bind(this),this)},i.prototype.incrementChange=function(){if(!(Number(this.exchangeMoneyInput.text)>=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney()))||Number(this.exchangeMoneyInput.text)<=0)){var t;return 1==this._optType&&(t=Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)),2==this._optType&&(t=-Math.floor(App.CommonUtils.money(GamePlayerMgr.i.getPlayer().getMoney())/100)),Number(this.exchangeMoneyInput.text)+t<=0?void(this.exchangeMoneyInput.text=""):void(this.exchangeMoneyInput.text=""+(Number(this.exchangeMoneyInput.text)+t))}},i.prototype.exchangeReq=function(){if(!this.exchangeMoneyInput.text)return void App.ScrollTxtTips.showTip("请输入兑换金额");if(!this.contentInput.text){if(1==this._exchangeType)return void App.ScrollTxtTips.showTip("请输入收款银行卡卡号");if(2==this._exchangeType)return void App.ScrollTxtTips.showTip("请输入支付宝账号")}Log.trace("发送兑换请求");var e={money:App.CommonUtils.moneyC2S(Number(this.exchangeMoneyInput.text)),bankid:this._curryBankId};this.applyFunc(t.ExchangeConst.ExchangeReq,e),1==this._exchangeType?R.sendPlayerAction("Lobbyexchange_bankexchangebutton"):R.sendPlayerAction("Lobbyexchange_Alipayexchangebutton")},i.prototype.removeIncrementChange=function(){Log.trace("停止增量"),App.TimerManager.removeAll(this)},i.prototype.numBtnOnClick=function(t){this.exchangeMoneyInput.text.length>0&&"0"==this.exchangeMoneyInput.text.substr(0,1)&&(this.exchangeMoneyInput.text=this.exchangeMoneyInput.text.slice(1)),Number(this.exchangeMoneyInput.text+t.name)<=Number(this.currMoney_txt.text)&&this.exchangeMoneyInput.text.length<this.currMoney_txt.text.length?this.exchangeMoneyInput.text=this.exchangeMoneyInput.text+t.name:Number(this.exchangeMoneyInput.text+t.name)>Number(this.currMoney_txt.text)&&(App.ScrollTxtTips.showTip("已达到最大值"),this.exchangeMoneyInput.text=this.currMoney_txt.text)},i.prototype.onBindBankCardListBack=function(t){if(Log.trace("onBindBankCardListBack",t),this.bankCardListGroup.removeChildren(),0==t.list.length||t.list.length>5)for(var e=0;5>e;e++){var i=this["itemGroup"+e];i.visible=!1}else{for(var e=0;5>e;e++){var i=this["itemGroup"+e];i.visible=!1}for(var e=0;e<t.list.length;e++){var i=this["itemGroup"+e];i.visible=!0;var o=i.getChildAt(1);o.text=t.list[e].bank_name+"  "+t.list[e].cardno;var n=i.getChildAt(0);1==this._exchangeType?n.text="卡"+(e+1):n.text="支付宝"+(e+1);var s=new eui.TextInput;s.touchChildren=!1,s.text=t.list[e].cardno,s.name=t.list[e].bank_id,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickBankCardList,this),this.bankCardListGroup.addChild(s)}}},i.prototype.onBindBankCardBack=function(){this.AddBankCardGroup.visible=!1,this.userName.text="",this.cardNumber.text="",this.cardNumBankName.text="";var e={type:this._exchangeType};this.applyFunc(t.ExchangeConst.BindBankCardListReq,e)},i.prototype.onDeleteBankCard=function(e){Log.trace("删除银行卡",e);var i=this.getBaseController().getModel(),o={type:this._exchangeType,bankid:this.bankCardListGroup.getChildAt(e).name};App.PromTipsView.show("是否解除该银行卡/支付宝",function(){this.applyFunc(t.ExchangeConst.UnBindBankCardReq,o),i.saveCurrIndex(e)},function(){},this,!0),R.sendPlayerAction("Lobbyexchange_deletebankcard")},i.prototype.onUnBindBankCardBack=function(t){this["itemGroup"+t].visible=!1},i.prototype.onClickBankCardList=function(t){Log.trace(t.currentTarget);var e=t.currentTarget;this.contentInput.text=e.text,this._curryBankId=e.name,this.bankCardListGroup.visible=!1},i.prototype.openBankCardList=function(){this.bankCardListGroup.visible=!this.bankCardListGroup.visible},i.prototype.onBlindBankCard=function(){if(!this.userName.text)return void App.ScrollTxtTips.showTip("开户人姓名不能为空");if(!this.cardNumber.text)return void App.ScrollTxtTips.showTip("银行卡号不能为空");if(!this.cardNumBankName.text)return void App.ScrollTxtTips.showTip("开户行不能为空");if(!App.StringUtils.isChinese(this.cardNumBankName.text))return void App.ScrollTxtTips.showTip("请输入格式正确的开户行");var e={type:this._exchangeType,cardholder:this.userName.text,bankname:this.cardNumBankName.text,cardno:this.cardNumber.text};this.applyFunc(t.ExchangeConst.BindBankCardReq,e)},i.prototype.onBlindAlipay=function(){if(!this.alipayUserName.text)return void App.ScrollTxtTips.showTip("姓名不能为空");if(!this.alipayNumber.text)return void App.ScrollTxtTips.showTip("支付宝账号不能为空");var e={type:this._exchangeType,cardholder:this.alipayUserName.text,cardno:this.alipayNumber.text};this.applyFunc(t.ExchangeConst.BindBankCardReq,e)},i.prototype.checkBankNameInput=function(){},i.prototype.open=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i),App.EffectUtils.showUI(this),this.currMoney_txt.text=App.CommonUtils.money2Str(GamePlayerMgr.i.getPlayer().getMoney());var n={type:this._exchangeType};this.applyFunc(t.ExchangeConst.BindBankCardListReq,n)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)}),this.exchangeMoneyInput.text="",this.contentInput.text=""},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭兑换"),App.ViewManager.closeView(this)},i.prototype.refreshMoney=function(t){Log.trace("兑换界面刷新余额",t),this.currMoney_txt.text=App.CommonUtils.money2StrTwo(t.balance)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._timer&&(this._timer.stop(),this._timer=null),this._exchangeType=void 0,this._curryBankId=void 0},i}(BaseEuiView);t.ExchangeView=e,__reflect(e.prototype,"lobby.ExchangeView")}(lobby||(lobby={}));var LoadingConst=function(){function t(){}return t.SetProgress=10001,t}();__reflect(LoadingConst.prototype,"LoadingConst");var LoadingController=function(t){function e(){var e=t.call(this)||this;return e.loadingView=new LoadingView(e,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Loading,e.loadingView),App.ViewManager.open(MainViewConst.Loading,LayerManager.UI_Main),e.registerFunc(LoadingConst.SetProgress,e.setProgress,e),e}return __extends(e,t),e.prototype.setProgress=function(t,e){this.loadingView.setProgress(t,e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),App.ViewManager.destroy(MainViewConst.Loading),this.loadingView=void 0},e}(BaseController);__reflect(LoadingController.prototype,"LoadingController");var LoadingView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/LoadingUISkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.initDBRes("loading2"),this.armature=new DragonBonesArmatureContainer,this.loadingAnim.addChild(this.armature),this.armature.register(App.DragonBonesFactory.makeArmature("Armature","loading2",1),[e.Animation]),this.loadingProgress.maximum=100,this.loadingProgress.minimum=0,this.txtVer.text=""},e.prototype.initDBRes=function(t){var e=RES.getRes(t+"_ske_json"),i=RES.getRes(t+"_tex_png"),o=RES.getRes(t+"_tex_json");e&&i&&o?App.DragonBonesFactory.initArmatureFile(e,i,o):(Log.trace(e+i+o),egret.error("无法获取龙骨资源:",t,"!"))},e.prototype.setProgress=function(t,e){this.loadingProgress.value=Math.floor(t/e*100),this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum,this.loadingAnim.x=this.progressBar.x,this.armature.play("loading2",0),this.loadingProgress.value>=100&&(this.armature.visible=!1)},e.prototype.testLoading=function(){this.loadingProgress.value+=1,this.progressBar.x=this.loadingProgress.value*(this.loadingProgress.width-15)/this.loadingProgress.maximum},e.prototype.updateVersion=function(){this.txtVer.text=GameBase.getMainVersion()},e.prototype.updateLoadingEvent=function(t){this.txtMsg.text=t},e.prototype.addEvent=function(){App.MessageCenter.addListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this)},e.prototype.removeEvent=function(){App.MessageCenter.removeListener(GameUpdateEvent.Update_Main_Version,this.updateVersion,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Loading_Event,this.updateLoadingEvent,this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature.destroy(),this.parent&&this.parent.removeChild(this),this.armature=void 0},e.Animation="loading2",e}(BaseEuiView);__reflect(LoadingView.prototype,"LoadingView");var lobby;!function(t){var e=function(t){function e(){var i=t.call(this,"EntryOGameSkin")||this;return i._mCurrIconX=e.IconSpaceX/2+20,i._mCurrIconY=0,i.mIconListObj={},i._mAmuInited=!1,i}return __extends(e,t),e.prototype.initComponent=function(e,i){t.prototype.initComponent.call(this,e,i),this.initEntrys()},e.prototype.initEntrys=function(){var t=GameModuleMgr.i.gameCfgList;this._mCurrIconY=t[0].isResBig?.5*this.height:.25*this.height;for(var e=0;e<t.length;e++)this.createIcon(t[e],t[e+1]);R.setTimeOutOnly(function(){this._mAmuInited=!0}.bind(this),this,2e3)},e.prototype.createIcon=function(t,o){var n=new i(t);n.init(),n.setPosition(this._mCurrIconX+t.fixX,this._mCurrIconY+t.fixY),this.addChild(n),n.play(),this.mIconListObj[t.key]=n,o&&(t.isResBig||this._mCurrIconY>=.75*this.height||o.isResBig?(this._mCurrIconX+=e.IconSpaceX,this._mCurrIconX+e.IconSpaceX/2+20,this._mCurrIconY=o.isResBig?.5*this.height:.25*this.height):t.isResBig||(this._mCurrIconY=.75*this.height));
var s=n.x+e.IconSpaceX/2+20;this.width<s&&(this.width=s)},e.prototype.refresh=function(){if(this._mAmuInited){var t=this.mIconListObj,i=this.parent,o=i.parent.$x,n=i.parent.viewport.width,s=egret.Point.create(0,0),r=!1,a=!1;for(var h in t){var l=t[h];i.localToGlobal(l.x,l.y,s),r=s.x-o+e.IconSpaceX/2<0,a=s.x-o-e.IconSpaceX/2>n,r||a?l.parent&&(this.removeChild(l),l.stop()):l.parent||(this.addChild(l),l.play())}egret.Point.release(s)}},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.addListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Progress,this.updateProgress,this),App.MessageCenter.removeListener(GameUpdateEvent.Update_Game_Module_Complete,this.updateOver,this)},e.prototype.updateOver=function(t){Log.log(t,"更新完成! updateOver");var e=this.mIconListObj[t];e.updateOver()},e.prototype.updateProgress=function(t){var e=this.mIconListObj[t.gameName];e&&e.updateProgress(t.progress,t.total)},e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this.mIconListObj;for(var i in e)e[i].destroy(),e[i]=void 0,delete e[i];this.mIconListObj=void 0},e._smCurrscrollH=0,e.IconSpaceX=280,e}(BaseEuiComponent);t.EntryOGamesView=e,__reflect(e.prototype,"lobby.EntryOGamesView");var i=function(e){function i(t){var i=e.call(this,null)||this;return i._mIsPlayed=!1,i._mIconCfg=t,i}return __extends(i,e),i.prototype.init=function(){e.prototype.init.call(this),this.touchEnabled=!0,this.touchChildren=!1,this.updateRes(this._mIconCfg.gameIconAnim),this.addEvent(),HotUpdateMgr.getInstance().checkGameUpdate(this._mIconCfg.key)&&this.showTips()},i.prototype.updateRes=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,i._mActionList);var e=(this._mIconCfg.isResBig,.6);this.armature.scaleX=e+this._mIconCfg.fixSX,this.armature.scaleY=e+this._mIconCfg.fixSY},i.prototype.showTips=function(){this._mUpdateTips||(this._mUpdateTips=new eui.Image,this.addChild(this._mUpdateTips)),this._mUpdateTips.visible=!0,this._mUpdateTips.x=(this._mIconCfg.isResBig?35:18)+3,this._mUpdateTips.y=(this._mIconCfg.isResBig?-232:-116)-2,this._mUpdateTips.source="1"==GameBase.getLocalData("GameLoaded_"+this._mIconCfg.key)?"hall_dianjigengx_png":"hall_dianjixiaz_png"},i.prototype.showBar=function(){this._mProgressBar||(this._mProgressBar=new eui.Component,this._mProgressBar.skinName="EntryOProgressSkin",this.addChild(this._mProgressBar)),this._mUpdateTips.visible=!1,this._mProgressBar.x=-this._mProgressBar.width/2,this._mProgressBar.y=(this._mIconCfg.isResBig?228:116)-55,this._mProgressBar.progressGg.visible=!1},i.prototype.updateProgress=function(t,e){this._mProgressBar||this.showBar();var o=this._mProgressBar.progressBar,n=this._mProgressBar.progressGg;this._mProgressBar.visible=!0,i.mMaxPro<0&&(i.mMaxPro=o.width);var s=t/e,r=t/e*i.mMaxPro;i.mRectMask.width=r,o.mask=i.mRectMask,n.visible=s>.06&&.939>s,n.visible&&(n.x=3+r)},i.prototype.updateOver=function(){this._mUpdateTips&&(this._mUpdateTips.visible=!1),this._mProgressBar&&(this._mProgressBar.visible=!1),GameBase.saveLocalData("GameLoaded_"+this._mIconCfg.key,"1")},i.prototype.setPosition=function(t,e){this.x=t,this.y=e},i.prototype.play=function(){this._mIsPlayed||(this._mIsPlayed=!0,this.armature.play(i.Animation,999999999))},i.prototype.stop=function(){this._mIsPlayed&&(this._mIsPlayed=!1,this.armature.stop())},i.prototype.onIconBegin=function(){var t=this._mIconCfg.isResBig?.98:.95;egret.Tween.get(this).to({scaleX:t,scaleY:t},80).to({scaleX:1,scaleY:1},80)},i.prototype.enterGame=function(){return Log.log("clickIcon:",this._mIconCfg.gameType,this._mIconCfg.key),this._mIconCfg.isOpen?void("hongbao"==this._mIconCfg.key?App.MessageCenter.dispatch(t.RedPacketConst.Open_View):this.gameIn()):void R.setTimeOutOnly(function(){App.ScrollTxtTips.showTip("敬请期待！")},this,150)},i.prototype.gameIn=function(){var t=this._mIconCfg.key;HotUpdateMgr.getInstance().checkGameUpdate(t)?(this.showBar(),HotUpdateMgr.getInstance().loadGameUpdate(t),R.sendPlayerAction(i._tempEventName2[this._mIconCfg.gameType])):GameModuleMgr.i.startGame(t),Log.log("maidian",i._tempEventName[this._mIconCfg.gameType]),R.sendPlayerAction(i._tempEventName[this._mIconCfg.gameType])},i.prototype.clean=function(){e.prototype.clean.call(this)},i.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onIconBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this)},i.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onIconBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.enterGame,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.removeEvent(),this.removeChildren(),this._mUpdateTips&&(this._mUpdateTips.source=void 0,this._mUpdateTips.$bitmapData=void 0,this._mUpdateTips=void 0),this._mProgressBar&&(this._mProgressBar.progressBar=void 0,this._mProgressBar.progressGg=void 0),this.armature=void 0,this._mIconCfg=void 0,this._mProgressBar=void 0},i.mRectMask=new egret.Rectangle(0,0,0,30),i.mMaxPro=-1,i.Animation="newAnimation",i._mActionList=[i.Animation],i._tempEventName={101:"Lobbyclick_Brnn",201:"Lobbyclick_Baccarat",301:"Lobbyclick_Hhdz",401:"Lobbyclick_DDZ",402:"Lobbyclick_DDZ",403:"Lobbyclick_DDZ",501:"Lobbyclick_Fish",502:"Lobbyclick_Fish",503:"Lobbyclick_Fish",601:"Lobbyclick_SHZ",701:"Lobbyclick_Fruit",801:"Lobbyclick_LHD"},i._tempEventName2={101:"Lobbyloading_Brnn",201:"Lobbyloading_Baccarat",301:"Lobbyloading_Hhdz",401:"Lobbyloading_DDZ",402:"Lobbyloading_DDZ",403:"Lobbyloading_DDZ",501:"Lobbyloading_Fish",502:"Lobbyloading_Fish",503:"Lobbyloading_Fish",601:"Lobbyloading_SHZ",701:"Lobbyloading_Fruit",801:"Lobbyloading_LHD"},i}(base.BaseGameObject);__reflect(i.prototype,"GameEntryIcon")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=40001,t.ChangeNickName=40002,t}();t.LobbyConst=e,__reflect(e.prototype,"lobby.LobbyConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o._mIsOnThrow=!1,o._mThrowV=0,o.skinName="resource/lobby/skins/LobbySkin.exml",App.MessageCenter.addListener("UserMoneyChange",o.refreshMoney,o),o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.refreshSign(),this._mParticleLobbyBG=new BaseParticleObj,this._mParticleLobbyBG.init("lobby_bg"),this._mParticleLobbyBG.play(),this.addChild(this._mParticleLobbyBG),this._mRoleAnim=new t.RoleRabbitgirl,this._mRoleAnim.play(),this.hotGameAnim.addChild(this._mRoleAnim),this._mRechargeAnim=new t.RechargeBtnBone,this._mRechargeAnim.play(),this.rechargeAnim.addChild(this._mRechargeAnim),this.uProclaim.init(this.getBaseController(),null,SceneConsts.Lobby),this.btnUp2Member.visible=GamePlayerMgr.i.isVisiter,this.btnProxyEntrace.visible=GamePlayerMgr.i.getPlayer().mIsAgent,this.btnRedPacket2=t.RedPackBone.create(),this.btnRedPacket2.init(),this.addChild(this.btnRedPacket2),this.btnRedPacket2.x=45,this.btnUp2Member.visible&&(this.btnRedPacket2.x=225),this.btnRedPacket2.y=140,this.btnRedPacket2.play(t.RedPackBone.Animation1),this.btnRedPacket2.touchEnabled=!0,this.gamesEntry.initComponent(this.getBaseController()),this.scrollerItem.viewport.scrollH=t.EntryOGamesView._smCurrscrollH,this.showArrowLeft(!1),this.showArrowRight(!1);var i=this;App.TimerManager.doTimer(200,5,function(){i.onScrollerChange()},this),App.OffsetLeft(this.leftBtnGroup),App.OffsetLeft(this.btnRedPacket2)},i.prototype.showArrowLeft=function(e){void 0===e&&(e=!0),this._mArrowLeftAnim||(this._mArrowLeftAnim=new t.EntryArrowBone,this._mArrowLeftAnim.scaleX=-1,this.arrowLeft.addChild(this._mArrowLeftAnim)),e?this._mArrowLeftAnim.play():this._mArrowLeftAnim.stop(),this._mArrowLeftAnim.visible=e},i.prototype.showArrowRight=function(e){void 0===e&&(e=!0),this._mArrowRightAnim||(this._mArrowRightAnim=new t.EntryArrowBone,this.arrowRight.addChild(this._mArrowRightAnim)),e?this._mArrowRightAnim.play():this._mArrowRightAnim.stop(),this._mArrowRightAnim.visible=e},i.prototype.onScrollerChange=function(){var e=this.scrollerItem.viewport.scrollH;this.showArrowLeft(e>20),this.showArrowRight(e+this.scrollerItem.viewport.width<=this.gamesEntry.width-20),t.EntryOGamesView._smCurrscrollH=this.scrollerItem.viewport.scrollH,this.gamesEntry.refresh()},i.prototype.onArrowTap=function(t){t.currentTarget==this._mArrowLeftAnim?this.throwScroller(0):this.throwScroller(this.gamesEntry.width-this.scrollerItem.width)},i.prototype.throwScroller=function(t){this._mIsOnThrow=!0,this._mThrowV=t,App.TimerManager.doFrame(1,999999,this.updateThrowScroller,this)},i.prototype.updateThrowScroller=function(t){if(this._mIsOnThrow){var e=this.scrollerItem.viewport.scrollH,i=this._mThrowV-e,o=i>0?Math.min(500,i):Math.max(-500,i),n=.1*o*t/16;Math.abs(this._mThrowV-e)<5&&(this.stopThrowScroller(),this.onScrollerChange()),this.scrollerItem.viewport.scrollH+=n,this.gamesEntry.refresh()}},i.prototype.stopThrowScroller=function(){this._mIsOnThrow&&(App.TimerManager.remove(this.updateThrowScroller,this),this._mIsOnThrow=!1)},i.prototype.onScrollerBegin=function(){this.stopThrowScroller()},i.prototype.onMouseWheel=function(t){var e=this.scrollerItem.viewport,i=e.scrollH-t.data;0>i?e.scrollH=0:i>this.gamesEntry.width-e.width?e.scrollH=this.gamesEntry.width-e.width:e.scrollH-=t.data},i.prototype.onCloseViewAtMessage=function(){App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.uProclaim.addEvent(),this.gamesEntry.addEvent(),this.lobby_headImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserInfo,this);for(var i in this.btnGroup.$children){var o=this.btnGroup.$children[i];App.CommonUtils.effectButton(o,this.btnOnClick,this,{name:o.name})}App.CommonUtils.effectButton(this.customerService,this.btnOnClick,this,{name:this.customerService.name}),App.CommonUtils.effectButton(this.btnUp2Member,this.onUp2Member,this),App.CommonUtils.effectButton(this.btnProxyEntrace,this.onProxyEntrace,this),this.btnRedPacket2.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(t.RedPacketConst.Open_View,this.onOpenRedPac,this),App.MessageCenter.addListener(t.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(t.RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.addListener(t.RedPacketConst.expiredRedEnvelopeNotify,this.expirePack,this),App.MessageCenter.addListener(GameConsEvent.Game_UserUnReadMsg,this.refreshSign,this),App.MessageCenter.addListener(GameConsEvent.Game_UserUnReadEmail,this.refreshSign,this),this.scrollerItem.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.scrollerItem.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrollerBegin,this),this._mArrowLeftAnim.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this._mArrowRightAnim.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.uProclaim.removeEvent(),this.gamesEntry.removeEvent(),this.lobby_headImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openUserInfo,this),this.btnRedPacket2.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this);for(var t in this.btnGroup.$children)App.CommonUtils.removeButton(this.btnGroup.$children[t]);App.CommonUtils.removeButton(this.customerService),App.CommonUtils.removeButton(this.btnUp2Member),App.CommonUtils.removeButton(this.btnProxyEntrace),this.scrollerItem.removeEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.scrollerItem.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrollerBegin,this),this._mArrowLeftAnim.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this._mArrowRightAnim.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),App.MessageCenter.removeAll(this)},i.prototype.btnOnClick=function(e){if(e)switch(e.name){case"recharge":Log.trace("打开充值"),App.ViewManager.open(t.LobbyViewConst.Recharge,LayerManager.UI_Popup),R.sendPlayerAction("Lobbycharge_clickcharge");break;case"bank":App.ViewManager.open(t.LobbyViewConst.Bank,LayerManager.UI_Popup),R.sendPlayerAction("Lobbysafe_clicksafe");break;case"message":Log.trace("打开公告"),App.ViewManager.open(t.LobbyViewConst.Message,LayerManager.UI_Popup),App.MouseUtils.removeMouseWheel(),R.sendPlayerAction("Lobbysafe_clickmessage");break;case"activity":Log.trace("打开活动"),App.ScrollTxtTips.showTip("敬请期待！");break;case"share":Log.trace("打开分享"),App.ViewManager.open(t.LobbyViewConst.Share,LayerManager.UI_Popup),R.sendPlayerAction("Lobbyshare_clickshare");break;case"setting":Log.trace("打开设置"),App.ViewManager.open(t.LobbyViewConst.Setting,LayerManager.UI_Popup),R.sendPlayerAction("Lobbyset_clickset");break;case"exchange":Log.trace("打开兑换"),App.ViewManager.open(t.LobbyViewConst.Exchange,LayerManager.UI_Popup);break;case"customerService":Log.trace("打开客服"),R.sendPlayerAction("Lobbyservice_onlineservice");var i=CSModel.getUrlFromLive800();R.openUrlOutside(i),Log.log(i);break;case"mail":App.ViewManager.open(t.LobbyViewConst.Message,1);break;case"notice":App.ViewManager.open(t.LobbyViewConst.Message,2)}},i.prototype.onUp2Member=function(){App.ViewManager.open(t.LobbyViewConst.Register,LayerManager.UI_Popup)},i.prototype.onProxyEntrace=function(){this.applyFunc("openProxyWeb")},i.prototype.onOpenRedPac=function(){Log.log("打开红包界面"),App.ViewManager.open(t.LobbyViewConst.RedPacket,LayerManager.UI_Popup),this.btnRedPacket2.play(t.RedPackBone.Animation1)},i.prototype.RedPackNotify=function(){Log.log("有新红包大厅播放红包摇晃动画"),this.btnRedPacket2.play(t.RedPackBone.Animation)},i.prototype.grabRedPackBack=function(){this.btnRedPacket2.play(t.RedPackBone.Animation1)},i.prototype.expirePack=function(){Log.log("有红包过期，停止动画"),this.btnRedPacket2.play(t.RedPackBone.Animation1)},i.prototype.openUserInfo=function(){Log.trace("打开个人中心"),R.sendPlayerAction("Lobbyself_clickphoto"),App.SoundManager.playEffect("click_mp3"),App.ViewManager.open(t.LobbyViewConst.UserInfo)},i.prototype.changeLobbyHeadImg=function(t,e,i){this.refresh()},i.prototype.changeNickName=function(t){this.lobby_userName.text=t,GamePlayerMgr.i.getPlayer().setNickName(t)},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();Log.trace("大厅刷新后昵称",t.getNickName()),this.lobby_headBox.source="ui_headBox_"+t.getAvatarBox(),this.lobby_headImg.source="ui_headImg_"+t.getAvatar(),this.lobby_userName.text=t.getNickName(),this.lobby_userMoney.text=""+App.CommonUtils.money2Str(t.getMoney()),this.refreshSign()},i.prototype.refreshMoney=function(t){this.lobby_userMoney.text=App.CommonUtils.money2Str(t.balance)},i.prototype.refreshSign=function(){this.mailNotfiySign.visible=GamePlayerMgr.i.mUnreadMailCount>0,this.noticeNotfiySign.visible=GamePlayerMgr.i.mUnreadNoticeCount>0},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this.gamesEntry.destroy(),this._mParticleLobbyBG.destroy(),this._mParticleLobbyBG=void 0,this._mRoleAnim.destroy(),this._mRoleAnim=void 0,this._mRechargeAnim.destroy(),this._mRechargeAnim=void 0,this.uProclaim.destroy(),this.uImgBg.filters=null,App.TimerManager.removeAll(this),this.lobby_headBox.source="ui_headBox_1",this.lobby_headImg.source="ui_headImg_1",this.lobby_userName.text="",this.lobby_userMoney.text="",this.hotGameInfo=void 0,App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this),App.MessageCenter.removeListener(t.RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(t.RedPacketConst.expiredRedEnvelopeNotify,this.expirePack,this),this.btnRedPacket2&&(this.btnRedPacket2.parent&&this.btnRedPacket2.parent.removeChild(this.btnRedPacket2),this.btnRedPacket2=void 0),this._mArrowLeftAnim&&(this._mArrowLeftAnim.destroy(),this._mArrowLeftAnim=void 0),this._mArrowRightAnim&&(this._mArrowRightAnim.destroy(),this._mArrowRightAnim=void 0)},i.prototype.waterEffect=function(t){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",i=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform vec2 center;","uniform vec3 params;","uniform float time;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float dist = distance(uv, center);","if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )","{","float diff = (dist - time);","float powDiff = 1.0 - pow(abs(diff*params.x), params.y);","float diffTime = diff  * powDiff;","vec2 diffUV = normalize(uv - center);","texCoord = uv + (diffUV * diffTime);","}","gl_FragColor = texture2D(uSampler, texCoord);","}"].join("\n"),o=new egret.CustomFilter(e,i,{center:{x:.5,y:.5},params:{x:10,y:.8,z:.1},time:0});t.filters=[o],App.TimerManager.doFrame(1,0,function(){o.uniforms.time+=.005,o.uniforms.time>1&&(o.uniforms.time=0)},this)},i}(BaseEuiView);t.LobbyView=e,__reflect(e.prototype,"lobby.LobbyView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.inits(),i.registers(),i.addListeners(),i.initFunc(),App.ViewManager.open(MainViewConst.Login),t&&t.isVipLogin&&App.ViewManager.open(LoginViewConst.LoginSecondar),i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.loginModel=new t.LoginModel(this),this.loginProxy=new t.LoginProxy(this,this.loginModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.loginView=new t.LoginView(this,LayerManager.UI_Main),App.ViewManager.register(MainViewConst.Login,this.loginView),this.loginSecondaryView=new LoginSecondaryView(this,LayerManager.UI_Main),App.ViewManager.register(LoginViewConst.LoginSecondar,this.loginSecondaryView),this.registerView=new t.RegisterView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.Register,this.registerView),this.resetPwdView=new t.ResetLoginPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(LoginViewConst.ResetLoginPwd,this.resetPwdView)},i.prototype.initFunc=function(){this.registerFunc("LoginWeb",this.onLoginWeb,this),this.registerFunc("ReSetLP",this.onReSetLP,this)},i.prototype.onLoginWeb=function(t){this.loginProxy.loginWeb(t)},i.prototype.onReSetLP=function(t){this.loginProxy.onResetLoginPassword(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.loginProxy.addEvent()},i.prototype.removeListeners=function(){Log.trace("移除监听"),e.prototype.removeListeners.call(this),this.loginProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.loginModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.loginModel.destroy(),this.loginProxy.destroy(),this.loginView.destroy(),this.loginSecondaryView.destroy(),this.resetPwdView.destroy(),this.loginModel=void 0,this.loginProxy=void 0,this.loginView=void 0,this.loginSecondaryView=void 0,this.resetPwdView=void 0},i}(BaseController);t.LoginController=e,__reflect(e.prototype,"lobby.LoginController")}(lobby||(lobby={}));var LoginSecondaryView=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/LoginSecondarySkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this);var e=GamePlayerMgr.i.getAccount1(),i=GamePlayerMgr.i.getAccount2(),o=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.accountInput.text=e||"",this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.passwordInput.text=o||"",this.account1.label=e||"",this.account2.label=i||"",this.account1.name=o||"",this.account2.name=n||""},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.addEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.loginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.listBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.account2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectAccount,this),this.clearBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clearPassword,this),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showRegisterView,this),this.forgetPasswordBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.showResetLoginPwdView,this),this.accountInput.removeEventListener(egret.TextEvent.CHANGE,this.onChangeInput,this)},e.prototype.onChangeInput=function(t){var e=t.currentTarget;e.text=App.StringUtils.rejectValue(e.text)},e.prototype.closeView=function(t){App.ViewManager.closeView(this)},e.prototype.showRegisterView=function(){App.ViewManager.open(LoginViewConst.Register)},e.prototype.showResetLoginPwdView=function(){App.ViewManager.open(LoginViewConst.ResetLoginPwd)},e.prototype.loginLobby=function(){var t=this.accountInput.text,e=this.passwordInput.text;return this.listBg.visible=!1,null==t||0==t.length?void ErrorManager.i.showError("用户名不能为空"):null==e||0==e.length?void ErrorManager.i.showError("密码不能为空"):e.length<6?void ErrorManager.i.showError("密码长度不能小于6个字符"):e.length>16?void ErrorManager.i.showError("密码长度不能大于16个字符"):(GamePlayerMgr.i.setAP(t,e),GamePlayerMgr.i.login(!1),void App.EasyLoading.showLoading())},e.prototype.selectAccount=function(t){Log.trace("点击了listBtn"),this.listBg.visible&&t.currentTarget!=this.listBtn&&(this.accountInput.text=t.currentTarget.label,this.passwordInput.text=t.currentTarget.name);var e=GamePlayerMgr.i.getAccount1(),i=GamePlayerMgr.i.getAccount2(),o=GamePlayerMgr.i.getPw1(),n=GamePlayerMgr.i.getPw2();this.account1.label=e,this.account2.label=i,this.account1.name=o,this.account2.name=n,this.listBg.visible=!this.listBg.visible},e.prototype.clearPassword=function(){this.passwordInput.text=""},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(BaseEuiView);__reflect(LoginSecondaryView.prototype,"LoginSecondaryView");var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._mIpUIList=[],o.skinName="resource/lobby/skins/LoginSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.txtVer.text=GameBase.getMainVersion(),this.testInit()},e.prototype.testInit=function(){if(this.btn_list.visible=!1,this.server_list.visible=GameBase.IsTest&&e.IsNotChoose,GameBase.IsTest){e.IpList=App.GlobalData.TestIpList?App.GlobalData.TestIpList:[];var t=GameBase.getGlobalData("test_last_ip_name");this.t0.text=t?t:"10.1.101.59",t&&App.Socket.updateUrl(GameBase.GameServerIp),e.IsNotChoose=!1;for(var i=0;i<e.IpList.length;i++){var o=this.creatBtn(i);this._mIpUIList.push(o),this.btn_list.addChild(o)}}},e.prototype.creatBtn=function(t){var i=new eui.Group;i.horizontalCenter=0,i.y=45*t,i.touchChildren=!1;var o=new eui.Rect;o.width=160,o.height=39,o.ellipseWidth=o.ellipseHeight=10,o.horizontalCenter=o.verticalCenter=0,o.fillColor=3902981,i.addChild(o);var n=new eui.Label;n.horizontalCenter=n.verticalCenter=0,n.size=20;var s=e.IpList[t];return n.text=s.split("&&")[1],i.addChild(n),i.name=s.split("&&")[0],i},e.prototype.onTestBtnTap=function(t){var e=t.currentTarget;if(this.btn_list.visible=e==this.btn0,!this.btn_list.visible){var i=e.getChildAt(1).text;this.t0.text=i,Log.log("选择服务器:",e.name),GameBase.saveGameServerIp(e.name),App.Socket.updateUrl(GameBase.GameServerIp),GameBase.saveGlobalData("test_last_ip_name",i)}},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.memberLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var e=0;e<this._mIpUIList.length;e++)this._mIpUIList[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);App.CommonUtils.effectButton(this.customerService,this.customerServiceOnClick,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.memberLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSecondary,this),this.visitLogin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.loginLobby,this),this.btn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);for(var e=0;e<this._mIpUIList.length;e++)this._mIpUIList[e].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTestBtnTap,this);App.CommonUtils.removeButton(this.customerService)},e.prototype.customerServiceOnClick=function(){var t=CSModel.getUrlFromLive800();R.openUrlOutside(t)},e.prototype.openSecondary=function(){App.ViewManager.open(LoginViewConst.LoginSecondar)},e.prototype.loginLobby=function(){GamePlayerMgr.i.login(!0),App.EasyLoading.showOnTimeOut()},e.prototype.destroy=function(){for(t.prototype.destroy.call(this);this._mIpUIList.length;){var e=this._mIpUIList.pop();R.removeFromParent(e)}},e.IsNotChoose=!0,e.IpList=[],e}(BaseEuiView);t.LoginView=e,__reflect(e.prototype,"lobby.LoginView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.DeleteItem=30021,t.ShowContent=30022,t.MessageListReq=30023,t.SingleMessageReq=30024,t}();t.MessageConst=e,__reflect(e.prototype,"lobby.MessageConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.initFunc(),i.addListeners(),t.MessageMgr.i,i}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.messageModel=new t.MessageModel(this),this.messageProxy=new t.MessageProxy(this,this.messageModel),this.setModel(this.messageModel),this.messageView=new t.MessageView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Message,this.messageView),this.messagePromtView=new t.MessagePromptView(this,LayerManager.UI_Message),App.ViewManager.register(t.LobbyViewConst.MessagePrompt,this.messagePromtView),Log.trace("注册公告")},i.prototype.initFunc=function(){this.registerFunc(t.MessageConst.DeleteItem,this.deletMessageItemReq,this),this.registerFunc(t.MessageConst.ShowContent,this.showContent,this),this.registerFunc(t.MessageConst.MessageListReq,this.onMessageListReq,this),this.registerFunc(t.MessageConst.SingleMessageReq,this.onSingleMessageReq,this)},i.prototype.onMessageListReq=function(t,e){this.messageProxy.messageListReq(t,e)},i.prototype.onSingleMessageReq=function(t,e){this.messageProxy.singleMessageReq(t,e)},i.prototype.deletMessageItemReq=function(t,e){this.messageProxy.onDeleteMessageReq(t,e)},i.prototype.showContent=function(t){this.messagePromtView.showContent(t)},i.prototype.getMsgType=function(){return this.messageView.msgType},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.messageProxy.addEvent()},i.prototype.removeListeners=function(){this.messageProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.messageModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.messageView.destroy(),this.messagePromtView.destroy(),this.messageProxy.destroy(),this.messageModel.destroy(),this.messageView=void 0,this.messagePromtView=void 0,this.messageProxy=void 0,this.messageModel=void 0},i}(BaseController);t.MessageController=e,__reflect(e.prototype,"lobby.MessageController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function e(){this.addEvent()}return Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ProxyKeyConst.Lobby_SingleNotice_Back),this.onSingleNoticeAck,this),App.MessageCenter.addListener(BaseProxy.Socket_Type(t.ProxyKeyConst.Lobby_SingleMail_Back),this.onLobbySingleMailBack,this)},e.prototype.onSingleNoticeAck=function(t){GamePlayerMgr.i.mUnreadNoticeCount=t.unread_msg_count,App.MessageCenter.dispatch(GameConsEvent.Game_UserUnReadMsg)},e.prototype.onLobbySingleMailBack=function(t){GamePlayerMgr.i.mUnreadMailCount=t.unread_msg_count,App.MessageCenter.dispatch(GameConsEvent.Game_UserUnReadEmail)},e.prototype.initPoolNotice=function(t){},e.prototype.initPoolMail=function(t){},e.prototype.pushSingleNotice=function(t){},e.prototype.delSingleNotice=function(t){},e.prototype.delSingleMail=function(t){},e.prototype.pushSingleMail=function(t){},e.prototype.getSingleNoticeById=function(t){},e.prototype.getSingleMailById=function(t){},e._i=null,e}();t.MessageMgr=e,__reflect(e.prototype,"lobby.MessageMgr")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/component/PromptSkin.exml",o.richTx=new egret.TextField,o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.richTx.width=544,this.richTx.x=20,this.richTx.y=10,this.richTx.lineSpacing=5,this.richTx.textColor=16777215,this.richTx.fontFamily="微软雅黑",this.richTx.textAlign=egret.HorizontalAlign.LEFT,this.richTxGroup.addChild(this.richTx)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.deleteBtn,this.deleteMessage,this),App.CommonUtils.effectButton(this.closeBtn2,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.deleteBtn),App.CommonUtils.removeButton(this.closeBtn2)},i.prototype.deleteMessage=function(){var e=this.getBaseController();this.applyFunc(t.MessageConst.DeleteItem,{token:GamePlayerMgr.i.getPlayer().getToken(),id:this.currItemId},e.getMsgType()),1==e.getMsgType()?R.sendPlayerAction("Lobbysafe_deletemail"):R.sendPlayerAction("Lobbysafe_deletenotice"),App.ViewManager.closeView(this)},i.prototype.showContent=function(t){this.title.text=t.title,this.currItemId=t.id;var e=t.content.indexOf("<")+1,i=t.content.indexOf(">");if(-1==e||-1==i)return void(this.richTx.textFlow=[{text:t.content,style:{size:20,textColor:16777215}}]);var o=t.content.slice(e,i),n=t.content.slice(0,e-1),s=t.content.slice(i+1);this.richTx.textFlow=[{text:n,style:{size:20,textColor:16777215}},{text:o,style:{size:20,textColor:16774954}},{text:s,style:{size:20,textColor:16777215}}]},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];
Log.trace("关闭弹出消息"),App.ViewManager.closeView(this)},i.prototype.clearContent=function(){this.title.text="",this.content.text=""},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.richTx=void 0},i}(BaseEuiView);t.MessagePromptView=e,__reflect(e.prototype,"lobby.MessagePromptView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/MessageViewSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.tabMailBtn.visible=!1,this.tabAnnouBtn.selected=!0,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.tempCollection=new eui.ArrayCollection,this.tempList.itemRenderer=t.MessageItemRender;var i=new eui.VerticalLayout;this.tempList.layout=i,this.scrollerMessage.viewport=this.tempList,this.scrollerMessage.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerMessage.scrollPolicyH=eui.ScrollPolicy.OFF},i.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerMessage,this.tempList,t.data)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.tabMailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabAnnouBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.effectButton(this.closeBtn,this.closeView,this),App.MessageCenter.addListener("OnNoticeListReqBack",this.createList,this),App.MessageCenter.addListener("onMailListAck",this.createList,this),App.MessageCenter.addListener("onSingleNoticeReqBack",this.showSingleAnnou,this),App.MessageCenter.addListener("onSingleMailAck",this.showSingleAnnou,this),App.MessageCenter.addListener("onDeleteNoticeAck",this.deleteMessageItem,this),App.MessageCenter.addListener("onDeleteMailAck",this.deleteMessageItem,this),this.tempList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this),this.scrollerMessage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this),App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.tabMailBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.tabAnnouBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.CommonUtils.removeButton(this.closeBtn),this.tempList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onAnnouList,this),this.scrollerMessage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.nextPage,this),App.MessageCenter.removeAll(this),App.MouseUtils.removeMouseWheel()},i.prototype.switchTab=function(t){t.currentTarget==this.tabMailBtn&&this.tabMailBtn.touchEnabled?(this.tabAnnouBtn.selected=!1,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.tabMailBtn.touchEnabled=!this.tabMailBtn.selected,this.optType=1,R.sendPlayerAction("Lobbysafe_clickmail")):t.currentTarget==this.tabAnnouBtn&&this.tabAnnouBtn.touchEnabled&&(this.tabMailBtn.selected=!1,this.tabMailBtn.touchEnabled=!this.tabMailBtn.selected,this.tabAnnouBtn.touchEnabled=!this.tabAnnouBtn.selected,this.optType=2,R.sendPlayerAction("Lobbysafe_clicknotice")),this.confirmOpt()},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),Log.trace("param",t),this.optType=t[0],Log.trace("操作类型",this.optType),1==this.optType?(this.tabAnnouBtn.setImage("messageTab_mail_sel","messageTab_mail_nor"),this.message_title.source="mail_title"):(this.tabAnnouBtn.setImage("messageTab_annouce_sel","messageTab_annouce_nor"),this.message_title.source="notice_title"),App.EffectUtils.showUI(this),this.confirmOpt()},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.log("关闭消息"),App.EasyLoading.hideLoading();var i=this;App.EffectUtils.hideView(this,function(){App.ViewManager.closeView(i)})},i.prototype.createList=function(t){this.tempCollection.refresh();var e=t;Log.log("创建列表",e),1==this.optType&&(this.nowMailPage=e.nowpage,this.totalMailPage=e.totalpages),2==this.optType&&(this.nowAnnoucePage=e.nowpage,this.totalAnnoucePage=e.totalpages);var i=this.getBaseController().getModel(),o=this.initListData(e);i.setListData(e,this.optType),this.tempCollection.replaceAll(o),this.tempList.dataProvider=this.tempCollection,this.tempCollection.refresh()},i.prototype.deleteMessageItem=function(t){var e=this.getBaseController().getModel();this.tempCollection.getItemAt(this.tempList.selectedIndex)&&(e.deleteSingleData(t.deleted_id,this.optType),e.deleteListData(this.tempList.selectedIndex,this.optType),this.tempCollection.removeItemAt(this.tempList.selectedIndex))},i.prototype.initListData=function(t){for(var e=[],i=0;i<t.list.length;i++)e[i]={title:t.list[i].title,date:App.DateUtils.getFormatBySecond(1e3*Number(t.list[i].created_at),2),id:t.list[i].id,is_readed:t.list[i].is_readed};return e},i.prototype.confirmOpt=function(){this.tempCollection.removeAll();var e=this.getBaseController().getModel(),i={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};e.cleanListData(this.optType),this.applyFunc(t.MessageConst.MessageListReq,i,this.optType)},i.prototype.onAnnouList=function(e){var i=this.tempList.selectedIndex,o=this.tempList.getElementAt(i);o.data.is_readed=!0,o.refeshSign(!0);var n=this.getBaseController().getModel();n.getListData(this.optType).list[i].is_readed=!0,this.applyFunc(t.MessageConst.SingleMessageReq,{token:GamePlayerMgr.i.getPlayer().getToken(),id:o.itemId},this.optType)},i.prototype.showSingleAnnou=function(e){this.applyFunc(t.MessageConst.ShowContent,e),App.ViewManager.open(t.LobbyViewConst.MessagePrompt,LayerManager.UI_Tips),1==this.optType?R.sendPlayerAction("Lobbysafe_maillist"):R.sendPlayerAction("Lobbysafe_noticelist")},i.prototype.nextPage=function(){if(!(this.scrollerMessage.viewport.scrollV+this.scrollerMessage.height<this.scrollerMessage.viewport.contentHeight&&this.scrollerMessage.viewport.scrollV>0)){if(1==this.optType&&this.nowMailPage<5){this.nowMailPage=this.nowMailPage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};this.applyFunc(t.MessageConst.MessageListReq,e,this.optType)}if(2==this.optType&&this.nowAnnoucePage<5){this.nowAnnoucePage=this.nowAnnoucePage+1;var e={token:GamePlayerMgr.i.getPlayer().getToken(),nowpage:1};this.applyFunc(t.MessageConst.MessageListReq,e,this.optType)}}},Object.defineProperty(i.prototype,"msgType",{get:function(){return this.optType},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.MessageView=e,__reflect(e.prototype,"lobby.MessageView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.RechargeTypeReq=2001e3,t.RechargeReq=2001001,t.RechargeRecordReq=2001002,t}();t.RechargeConst=e,__reflect(e.prototype,"lobby.RechargeConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.rechargeModel=new t.RechargeModel(this),this.rechargeProxy=new t.RechargeProxy(this,this.rechargeModel),this.rechargeView=new t.RechargeView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Recharge,this.rechargeView),this.setModel(this.rechargeModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.RechargeConst.RechargeTypeReq,this.onRechargeTypeReq,this),this.registerFunc(t.RechargeConst.RechargeReq,this.onRechargeMoneyReq,this),this.registerFunc(t.RechargeConst.RechargeRecordReq,this.onRechargeRecordReq,this)},i.prototype.onRechargeTypeReq=function(){this.rechargeProxy.rechargeTypeReq()},i.prototype.onRechargeMoneyReq=function(t){this.rechargeProxy.rechargeMoneyReq(t)},i.prototype.onRechargeRecordReq=function(t){this.rechargeProxy.rechargeRecodReq(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.rechargeProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.rechargeProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.rechargeModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.rechargeView.destroy(),this.rechargeProxy.destroy(),this.rechargeModel.destroy(),this.rechargeView=void 0,this.rechargeProxy=void 0,this.rechargeModel=void 0},i}(BaseController);t.RechargeController=e,__reflect(e.prototype,"lobby.RechargeController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.toggleBtns=[],o.tabBtns={},o.inputValue=[100,300,500,1e3,1500,3e3,5e3,9999],o.skinName="RechargeSkin",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("初始化UI"),this.recordGroup.visible=!1,this.rechargeContent.visible=!1;var i=new eui.VerticalLayout;this.recordList.layout=i,this.recordScroller.viewport=this.recordList,this.recordScroller.scrollPolicyV=eui.ScrollPolicy.ON,this.recordScroller.scrollPolicyH=eui.ScrollPolicy.OFF,this.recordCollection=new eui.ArrayCollection,this.recordList.itemRenderer=t.RechargeRecordItemRender,this.recharge_limTips.text="",this.errTips.visible=!1},i.prototype.createTabBtn=function(e){if(Log.trace("createTabBtn",e),0==e.length)return this.rechargeContent.visible=!1,void(this.errTips.visible=!0);this.rechargeContent.visible=!0,this.selectSign.visible=!1;for(var i=0;i<e.length;i++){var o=new t.OtherToggle,n=e[i].pay_code;o.setName(n),o.setContentText(e[i].name),o.addEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this),this.tabBtns[e[i].pay_code]=o,this.tabBtnGroup.addChild(o)}for(var s in this.tabBtnGroup.$children)this.toggleBtns.push(this.tabBtnGroup.$children[s]);switch(this.toggleBtns[0].selected=!0,this.currPayChanelName=this.toggleBtns[0].name,this.currPayChanelName){case"alipay":Log.trace("打开支付宝充值"),this.channelProperty("支付宝",!0);break;case"online":Log.trace("打开银联充值"),this.channelProperty("银联",!0);break;case"alipay_fix":Log.trace("打开支付宝固额"),this.channelProperty("支付宝",!0);break;case"banktrans":Log.trace("打开银行卡转账"),this.channelProperty("转账",!0);break;case"WXPAY":Log.trace("打开微信充值"),this.channelProperty("微信",!0);break;case"QQWALLET":Log.trace("打开QQ钱包"),this.channelProperty("QQ",!0);break;case"gudu":Log.trace("打开古都");for(var i=0;10>i;i++){var r=this.channelList.getChildAt(i);r.visible=!1,r.name=""+i}}e[0].pay_code&&this.createChannelList(this.currPayChanelName)},i.prototype.createChannelList=function(t){Log.trace("创建充值渠道列表",t);var e,i=this.getBaseController(),o=i.getModel();if(!o.getCurrPayChannel(t))return void App.ScrollTxtTips.showTip("该充值方式暂时无渠道可用");e=o.getCurrPayChannel(t),this.selectDefaultChannel(this.channelList.getChildAt(0));for(var n=e.length,s=0;n>s;s++)this.channelList.getChildAt(s).visible=!0;for(var s=9;s>=n;s--)this.channelList.getChildAt(s).visible=!1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.recordCloseBtn,this.closeRecord,this),App.CommonUtils.effectButton(this.confirmBtn,this.onConfirm,this),App.CommonUtils.effectButton(this.clear,this.onClearInput,this),App.MessageCenter.addListener("rechargeTypeAck",this.createTabBtn,this),this.rechargeMoneyInput.addEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.addEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var i=this.numInput.$children[t];App.CommonUtils.effectButton(i,this.onNumBtnClick,this,this.inputValue[t])}this.recordAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordFailed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordSucceed.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),App.MessageCenter.addListener("rechargeRecodAck",this.createRecordList,this);for(var o=0;10>o;o++){var n=this.channelList.getChildAt(o);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.selectChannel,this)}},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.recordCloseBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.clear),App.MessageCenter.removeListener("rechargeTypeAck",this.createTabBtn,this),this.rechargeMoneyInput.removeEventListener(eui.UIEvent.CHANGE,this.onEditableInput,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onEditableOut,this),this.rechargeMoneyInput.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onEditableInput,this),this.rechargeRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openRecord,this);for(var t in this.numInput.$children){var i=this.numInput.$children[t];App.CommonUtils.removeButton(i)}for(var t in this.tabBtnGroup.$children){var i=this.tabBtnGroup.$children[t];i.removeEventListener(eui.UIEvent.CHANGE,this.toggleChangeHandler,this)}this.recordAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordFailed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),this.recordSucceed.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRecord,this),App.MessageCenter.removeListener("rechargeRecodAck",this.createRecordList,this);for(var o=0;10>o;o++){var n=this.channelList.getChildAt(o);n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.selectChannel,this)}},i.prototype.open=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i),Log.trace("打开界面"),this.applyFunc(t.RechargeConst.RechargeTypeReq),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.selectChannel=function(t){var e=this.getBaseController(),i=e.getModel();this.selectSign.x=t.currentTarget.x,this.selectSign.y=t.currentTarget.y;var o=i.getCurrPayChannel(this.currPayChanelName),n=Number(t.currentTarget.name);if(0!=o.length){this.selectSign.visible=!0,i.setCurrPayInfo(o,n);var s=i.getCurrPayInfo();this.recharge_limTips.text="充值范围"+s.min_limit+"-"+s.max_limit+"元,比例为1:1"}},i.prototype.selectDefaultChannel=function(t){var e=this.getBaseController(),i=e.getModel();this.selectSign.x=t.x,this.selectSign.y=t.y;var o=i.getCurrPayChannel(this.currPayChanelName);if(0!=o.length){this.selectSign.visible=!0;var n=Number(t.name);i.setCurrPayInfo(o,n);var s=i.getCurrPayInfo();this.recharge_limTips.text="充值范围"+s.min_limit+"-"+s.max_limit+"元,比例为1:1"}},i.prototype.onConfirm=function(){var e=this.getBaseController(),i=e.getModel(),o=i.getCurrPayInfo(),n={pay_channel:o.channel_id,money:Number(this.rechargeMoneyInput.text),bank_code:o.pay_code,pay_type:i.getCurrPayType(this.currPayChanelName)};return o.channel_id?Number(this.rechargeMoneyInput.text)<o.min_limit?void App.ScrollTxtTips.showTip("该充值方式最低限额为"+o.min_limit):Number(this.rechargeMoneyInput.text)>o.max_limit?void App.ScrollTxtTips.showTip("该充值方式最大限额为"+o.max_limit):void(this.rechargeMoneyInput.text&&this.applyFunc(t.RechargeConst.RechargeReq,n)):void App.ScrollTxtTips.showTip("请点击界面上方选择框,选择一个充值渠道")},i.prototype.onNumBtnClick=function(t){Log.trace("value",t),this.promptDisplay.visible=!1,Number(this.rechargeMoneyInput.text)+t<1e4?this.rechargeMoneyInput.text=Number(this.rechargeMoneyInput.text)+t+"":(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},i.prototype.toggleChangeHandler=function(t){Log.trace("tabBtn绑定事件");for(var e=0;e<this.toggleBtns.length;e++){var i=this.toggleBtns[e];i.selected=i==t.target}var o=t.currentTarget;this.currPayChanelName=o.name,this.selectSign.visible=!1;var n=this.getBaseController(),s=n.getModel(),r=s.getCurrPayInfo();switch(r.channel_id="",this.recharge_limTips.text="",o.name){case"alipay":Log.trace("打开支付宝充值"),this.channelProperty("支付宝",!0);break;case"online":Log.trace("打开银联充值"),this.channelProperty("银联",!0);break;case"alipay_fix":Log.trace("打开支付宝固额"),this.channelProperty("支付宝",!0);break;case"banktrans":Log.trace("打开银行卡转账"),this.channelProperty("转账",!0);break;case"WXPAY":Log.trace("打开微信充值"),this.channelProperty("微信",!0);break;case"QQWALLET":Log.trace("打开QQ钱包"),this.channelProperty("QQ",!0);break;case"record":Log.trace("打开充值记录")}this.createChannelList(this.currPayChanelName)},i.prototype.channelProperty=function(t,e){for(var i=0;10>i;i++){var o=this.channelList.getChildAt(i);o.visible=e;var n=o.getChildAt(1);n.text=t+(i+1)}},i.prototype.onEditableInput=function(){this.promptDisplay.visible=!1,Log.trace("数值改变",this.rechargeMoneyInput.text),Number(this.rechargeMoneyInput.text)>1e4&&(App.ScrollTxtTips.showTip("最大充值金额为10000"),this.rechargeMoneyInput.text="10000")},i.prototype.onEditableOut=function(){this.rechargeMoneyInput.text||(this.promptDisplay.visible=!0,Number(this.rechargeMoneyInput.text)>=1e4&&(this.rechargeMoneyInput.text="10000"))},i.prototype.onCreateRecordList=function(t){Log.trace("onCreateRecordList",t)},i.prototype.initRecordListData=function(t){var e=[];return e},i.prototype.onClearInput=function(){this.rechargeMoneyInput.text="",this.promptDisplay.visible=!0},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.toggleBtns.length=0,this.tabBtnGroup.removeChildren(),this.onClearInput(),App.ViewManager.closeView(this)},i.prototype.openRecord=function(){this.recordGroup.visible=!0;var e={type:3};this.applyFunc(t.RechargeConst.RechargeRecordReq,e),this.rechargeMainGroup.cacheAsBitmap=!0},i.prototype.onRecord=function(e){var i={type:0};switch(e.currentTarget){case this.recordAll:i.type=3,this.recordAllTxt.textColor=14864300,this.recordSucceedTxt.textColor=13222851,this.recordFailedTxt.textColor=13222851;break;case this.recordFailed:i.type=2,this.recordAllTxt.textColor=13222851,this.recordSucceedTxt.textColor=13222851,this.recordFailedTxt.textColor=14864300;break;case this.recordSucceed:i.type=1,this.recordAllTxt.textColor=13222851,this.recordSucceedTxt.textColor=14864300,this.recordFailedTxt.textColor=13222851}this.applyFunc(t.RechargeConst.RechargeRecordReq,i)},i.prototype.createRecordList=function(t){this.recordCollection.refresh();var e=t,i=this.initListData(e);this.recordCollection.replaceAll(i),this.recordList.dataProvider=this.recordCollection,this.recordCollection.refresh()},i.prototype.initListData=function(t){Log.trace("充值记录列表",t);for(var e=[],i=0;i<t.list.length;i++)e[i]={created_at:App.DateUtils.getFormatBySecond(1e3*Number(t.list[i].created_at),2),order_no:t.list[i].order_no,pay_type:t.list[i].pay_type,status:t.list[i].status,money:t.list[i].money/1e4};return e},i.prototype.closeRecord=function(){this.recordGroup.visible=!1,this.rechargeMainGroup.cacheAsBitmap=!1},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.RechargeView=e,__reflect(e.prototype,"lobby.RechargeView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.getTypeStr=function(t){var e;switch(t){case 1001:e="10包1倍";break;case 715:e="7包1.5倍";break;case 52:e="5包2倍"}return e},t.showRedEnvelopeReq=3001e3,t.fastGrabRedEnvelopeReq=3001001,t.layMineReq=3001002,t.grabRedEnvelopeReq="3001003",t.redEnvelopeIncomeReq=3001004,t.recvIncomeReq=3001005,t.seeDetailsReq="3001006",t.showRedEnvelopeBack="showRedEnvelopeBack",t.grabRedEnvelopeBack="grabRedEnvelopeBack",t.redEnvelopeIncomeBack="redEnvelopeIncomeBack",t.recvIncomeBack="recvIncomeBack",t.seeDetailsBack="seeDetailsBack",t.Open_View="HongBao_Open_View",t.newRedEnvelopeNotity="newRedEnvelopeNotity",t.layMineBack="layMineBack",t.expiredRedEnvelopeNotify="expiredRedEnvelopeNotify",t.infoStatusChange="infoStatusChange",t}();t.RedPacketConst=e,__reflect(e.prototype,"lobby.RedPacketConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inits(),t.registers(),t.addListeners(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.redPacketModel=new t.RedPacketModel(this),this.redPacketProxy=new t.RedPacketProxy(this,this.redPacketModel),this.redPacketView=new t.RedPacketView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.RedPacket,this.redPacketView),this.setModel(this.redPacketModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.registerFunc(t.RedPacketConst.showRedEnvelopeReq,this.showRedEnvelopeReq,this),this.registerFunc(t.RedPacketConst.fastGrabRedEnvelopeReq,this.fastGrabRedEnvelopeReq,this),this.registerFunc(t.RedPacketConst.layMineReq,this.layMineReq,this),this.registerFunc(t.RedPacketConst.redEnvelopeIncomeReq,this.redEnvelopeIncomeReq,this),this.registerFunc(t.RedPacketConst.recvIncomeReq,this.recvIncomeReq,this),App.MessageCenter.addListener(t.RedPacketConst.grabRedEnvelopeReq,this.grabRedEnvelopeReq,this),App.MessageCenter.addListener(t.RedPacketConst.seeDetailsReq,this.seeDetailsReq,this)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.redPacketProxy.addEvent()},i.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this.redPacketProxy.removeEvent(),App.MessageCenter.removeListener(t.RedPacketConst.grabRedEnvelopeReq,this.grabRedEnvelopeReq,this),App.MessageCenter.removeListener(t.RedPacketConst.seeDetailsReq,this.seeDetailsReq,this)},i.prototype.showRedEnvelopeReq=function(t){this.redPacketProxy.sendShowEnvelopeReq(t)},i.prototype.fastGrabRedEnvelopeReq=function(t){this.redPacketProxy.sendFastGrapReq(t)},i.prototype.layMineReq=function(t,e,i){this.redPacketProxy.sendLayMineReq(t,e,i)},i.prototype.grabRedEnvelopeReq=function(t){this.redPacketProxy.sendGrabRedEnvelopeReq(t)},i.prototype.redEnvelopeIncomeReq=function(){this.redPacketProxy.sendIncomeReq()},i.prototype.recvIncomeReq=function(){this.redPacketProxy.sendRecvIncomeReq()},i.prototype.seeDetailsReq=function(t){this.redPacketProxy.sendSeeDetailsReq(t)},Object.defineProperty(i.prototype,"model",{get:function(){return this.redPacketModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.redPacketView.destroy(),this.redPacketProxy.destroy(),this.redPacketModel.destroy(),this.redPacketView=void 0,this.redPacketProxy=void 0,this.redPacketModel=void 0},i}(BaseController);t.RedPacketController=e,__reflect(e.prototype,"lobby.RedPacketController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.min=10,o.skinName="resource/lobby/skins/RedPacketSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.visible=!1,this.qipao.visible=!1,this.touchShape=new egret.Shape,this.touchShape.graphics.beginFill(16711935,0),this.touchShape.graphics.drawRect(0,0,App.StageUtils.getWidth(),App.StageUtils.getHeight()),this.touchShape.graphics.endFill(),this.addChildAt(this.touchShape,0),this.touchShape.touchEnabled=!0,Log.trace("初始化UI"),this.normalGroup.visible=!1,this.detailGroup.visible=!1,this.makeGroup.visible=!1,this.rullGroup.visible=!1,this.reciveGroup.visible=!1,this.removeChild(this.grabMask),this.pgscroller=new t.pageScroller,this.makeGroup.addChild(this.pgscroller),this.pgscroller.x=12,this.pgscroller.y=77,this.pgscroller.width=310,this.pgscroller.height=260,this.pgscroller.init(191,260,!1),this.refreshTypeList(),this.packMoney.text=""+this.min,this.grabBackGroup.visible=!1,this.payMoney.visible=!1,this.img_status.visible=!1,this.goldBone=t.GoldBone.create(),this.goldBone.initPlayedEndCallBack(this.removeGoldBone,this),this.goldBone.init(),this.showQipao()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnClose,this.closeHandler,this),App.EffectUtils.addEffectBtn(this.btnPacket,this.btnPacketHandler,this),App.EffectUtils.addEffectBtn(this.btncloseMake,this.claseMakeHandler,this),App.EffectUtils.addEffectBtn(this.btnTakeMoney,this.takeMoneyHandler,this),App.EffectUtils.addEffectBtn(this.btnRule,this.showRule,this),App.EffectUtils.addEffectBtn(this.btnReceive,this.btnReciveHandler,this),App.EffectUtils.addEffectBtn(this.BtnMake,this.btnMakeHandler,this),App.EffectUtils.addEffectBtn(this.btncloseRecive,this.btncloseReciveHandler,this),App.EffectUtils.addEffectBtn(this.btnRule2,this.showRule,this),this.touchShape.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHide,this),this.grabMask.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.hideThings,this),this.packSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btnQuickTake.addEventListener(egret.Event.CHANGE,this.setFastGrab,this),this.txt_rull.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.txt_rull2.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this);for(var i in this.numGroup.$children){var o=this.numGroup.$children[i];App.CommonUtils.effectButton(o,this.onNumBtnClick,this,o.name)}App.MessageCenter.addListener(t.RedPacketConst.showRedEnvelopeBack,this.showRedPackList,this),App.MessageCenter.addListener(t.RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.addListener(t.RedPacketConst.redEnvelopeIncomeBack,this.showIncome,this),App.MessageCenter.addListener(t.RedPacketConst.recvIncomeBack,this.reciveIncomeBack,this),App.MessageCenter.addListener(t.RedPacketConst.seeDetailsBack,this.seeDetails,this),App.MessageCenter.addListener(t.RedPacketConst.newRedEnvelopeNotity,this.refreshList,this),App.MessageCenter.addListener(t.RedPacketConst.layMineBack,this.layMineBackInfo,this),App.MessageCenter.addListener(t.RedPacketConst.expiredRedEnvelopeNotify,this.expiredRedEnvelope,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnClose,this.closeHandler,this),App.EffectUtils.removeEffectBtn(this.btnPacket,this.btnPacketHandler,this),App.EffectUtils.removeEffectBtn(this.btncloseMake,this.claseMakeHandler,this),App.EffectUtils.removeEffectBtn(this.btnTakeMoney,this.takeMoneyHandler,this),App.EffectUtils.removeEffectBtn(this.btnRule,this.showRule,this),App.EffectUtils.removeEffectBtn(this.btnReceive,this.btnReciveHandler,this),App.EffectUtils.removeEffectBtn(this.BtnMake,this.btnMakeHandler,this),App.EffectUtils.removeEffectBtn(this.btncloseRecive,this.btncloseReciveHandler,this),App.EffectUtils.removeEffectBtn(this.btnRule2,this.showRule,this),this.txt_rull2.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.txt_rull.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.showRule,this),this.touchShape.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHide,this),this.grabMask.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.hideThings,this),this.packSlider.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.btnQuickTake.removeEventListener(egret.Event.CHANGE,this.setFastGrab,this);for(var i in this.numGroup.$children){var o=this.numGroup.$children[i];App.CommonUtils.removeButton(o)}App.MessageCenter.removeListener(t.RedPacketConst.showRedEnvelopeBack,this.showRedPackList,this),App.MessageCenter.removeListener(t.RedPacketConst.grabRedEnvelopeBack,this.grabRedPackBack,this),App.MessageCenter.removeListener(t.RedPacketConst.redEnvelopeIncomeBack,this.showIncome,this),App.MessageCenter.removeListener(t.RedPacketConst.recvIncomeBack,this.reciveIncomeBack,this),App.MessageCenter.removeListener(t.RedPacketConst.seeDetailsBack,this.seeDetails,this),App.MessageCenter.removeListener(t.RedPacketConst.newRedEnvelopeNotity,this.refreshList,this),App.MessageCenter.removeListener(t.RedPacketConst.layMineBack,this.layMineBackInfo,this),App.MessageCenter.removeListener(t.RedPacketConst.expiredRedEnvelopeNotify,this.expiredRedEnvelope,this)},i.prototype.open=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.prototype.open.call(this,i),this.visible=!1,Log.trace("打开界面"),this.applyFunc(t.RedPacketConst.showRedEnvelopeReq,!0)},i.prototype.closeHandler=function(){this.applyFunc(t.RedPacketConst.showRedEnvelopeReq,!1),this.hideThings(),this.resetMakeUIData(),App.EffectUtils.hideView(this.normalGroup,function(){this.visible=!1,App.ViewManager.closeView(this)}.bind(this)),Log.log("关闭按钮")},i.prototype.showRedPackList=function(e){e.multiple&&(this.visible=!0,this.scaleX=App.isScaleModeSpecial?App.fixUISX():1,App.EffectUtils.showView2(this.normalGroup,300,0,0,this.scaleX,1)),Log.log("请求红包列表返回，view内showRedPackList：data"+e);for(var i in e)for(var o in e[i])Log.log("data[i]:",e[i],",j=",o,",data[i][j]=",e[i][o]);this.btnQuickTake.selected=e.is_fast_red_envelope,this.packSlider.maximum=e.multiple,this.txtMax.text=""+e.multiple+"倍";var n=e.show;n=n.reverse(),this.listDatass=n;var s=new eui.ArrayCollection;for(var r in n)Log.log("prop:",r,"listData[prop]=",n[r]),s.addItem(n[r]);this.packList.itemRenderer=t.RedPacketItemRender,this.packList.dataProvider=s},i.prototype.grabRedPackBack=function(e){if(3==e.errcode)return void App.ScrollTxtTips.showTip("没有足够的余额抢红包");this.payMoney.visible=!1,this.img_status.visible=!1,this.grabBackGroup.addChildAt(this.grabMask,0),this.grabBackGroup.visible=!0,this.goldBone.x=this.grabBackGroup.width/2+30,this.goldBone.y=this.grabBackGroup.height/2,this.grabBackGroup.addChild(this.goldBone),this.goldBone.play(),this.grabpackType.text=t.RedPacketConst.getTypeStr(e.type),this.layNum.text="雷号"+e.mine_number,this.grabUname.text=e.nickname,1==e.errcode?this.grabMoney.text="已扫完":2==e.errcode?(this.grabMoney.text="",this.img_status.visible=!0,this.img_status.source="hongbaosaolei_hongbao_zhuangtai4"):0==e.errcode&&(this.grabMoney.text=App.CommonUtils.money2Str(e.income),e.hit&&(this.payMoney.visible=!0,this.img_status.visible=!0,this.img_status.source="hongbaosaolei_hongbao_zhuangtai5",this.payMoney.text="(-"+App.CommonUtils.money2Str(e.pay_amount)+")"),GamePlayerMgr.i.getPlayer().setMoney(e.balance));var i=12;1==e.errcode?i=13:2==e.errcode?i=14:0==e.errcode&&e.hit&&(i=11);for(var o=0;o<this.listDatass.length;o++)if(this.listDatass[o].id==e.id){this.listDatass[o].state=i,App.MessageCenter.dispatch(t.RedPacketConst.infoStatusChange,this.listDatass[o]),Log.log("抢红包返回，更新对应id=",e.id,"item.status:",i,",data.errcode=",e.errcode,",isHit=",e.hit);break}},i.prototype.expiredRedEnvelope=function(e){for(var i=0;i<this.listDatass.length;i++)if(Log.log("红包过期广播：",e.state,",id=",e.id+"=itenId=",this.listDatass[i].id+",state="+this.listDatass[i].state),this.listDatass[i].id==e.id){var o=this.listDatass[i].state;11!=o&&12!=o&&(this.listDatass[i].state=e.state,App.MessageCenter.dispatch(t.RedPacketConst.infoStatusChange,this.listDatass[i]));break}},i.prototype.refreshList=function(e){Log.log("view.refreshlist,新红包广播通知",e);var i={id:e.id,lay_mine_nickname:e.nickname,type:e.type,state:10,mine_number:-1};this.listDatass.length>=5&&this.listDatass.pop(),this.listDatass.unshift(i);var o=this.listDatass,n=new eui.ArrayCollection;for(var s in o)Log.log("prop:",s,"listData[prop]=",o[s]),n.addItem(o[s]);this.packList.itemRenderer=t.RedPacketItemRender,this.packList.dataProvider=n},i.prototype.showQipao=function(){i.isShowQipao||(i.isShowQipao=!0,this.qipao.visible=!0,this.normalGroup.addChildAt(this.grabMask,this.normalGroup.getChildIndex(this.qipao)-1),egret.Tween.get(this.qipao,{loop:!0}).to({y:274},100).wait(80).to({y:276},100))},i.prototype.clearQipao=function(){this.qipao.visible&&(this.qipao.visible=!1,egret.Tween.removeTweens(this.qipao),this.qipao.y=276,this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask))},i.prototype.showIncome=function(t){Log.log("展示未领取收益界面:"),this.addChildAt(this.grabMask,this.getChildIndex(this.reciveGroup)-1),this.reciveGroup.visible=!0,this.txtRecive.text=""+App.CommonUtils.money2Str(t.income)},i.prototype.reciveIncomeBack=function(t){this.goldBone.x=this.reciveGroup.width/2,this.goldBone.y=this.reciveGroup.height/2,this.reciveGroup.addChild(this.goldBone),this.goldBone.play(),this.txtRecive.text="0.00",GamePlayerMgr.i.getPlayer().setMoney(t.balance)
},i.prototype.seeDetails=function(e){this.addChildAt(this.grabMask,this.getChildIndex(this.detailGroup)-1),this.detailGroup.visible=!0,this.txtDate.text=e.id,this.uName.text=e.lay_mine_nickname,this.packetType.text=t.RedPacketConst.getTypeStr(e.type)+"-雷号"+e.hit_number,this.txtMoney.text="￥"+App.CommonUtils.money2Str(e.amount);var i=this.rankDetailData(e),o=new eui.ArrayCollection;for(var n in i)Log.log("prop:",n,"listData[prop]=",i[n]),o.addItem(i[n]);this.detailList.itemRenderer=t.RedPacDetailItemRender,this.detailList.dataProvider=o},i.prototype.btnPacketHandler=function(){this.normalGroup.visible=!1,this.makeGroup.visible=!0},i.prototype.refreshTypeList=function(){Log.log("设置红包类型列表");var e={data_0:{type:1001,packNum:10,multiple:1},data_1:{type:715,packNum:7,multiple:1.5},data_2:{type:52,packNum:5,multiple:2}};this.pgscroller.initItems(t.PacketTypeItem,e)},i.prototype.claseMakeHandler=function(){this.makeGroup.visible=!1,this.resetMakeUIData(),this.normalGroup.visible=!0},i.prototype.resetMakeUIData=function(){this.pgscroller.resetIndex(),this.packMoney.text="10",this.thunderNum.text="0",this.packSlider.value=1},i.prototype.takeMoneyHandler=function(){this.applyFunc(t.RedPacketConst.redEnvelopeIncomeReq)},i.prototype.btnReciveHandler=function(){"0.00"!=this.txtRecive.text&&this.applyFunc(t.RedPacketConst.recvIncomeReq)},i.prototype.btnMakeHandler=function(){var e=App.CommonUtils.moneyC2S(parseInt(this.packMoney.text));Log.log("当前选择的红包类型：",this.pgscroller.currentData);var i=this.pgscroller.currentData.type,o=parseInt(this.thunderNum.text);this.applyFunc(t.RedPacketConst.layMineReq,[i,e,o])},i.prototype.layMineBackInfo=function(t){3==t.errcode?App.ScrollTxtTips.showTip("没有足够的余额埋雷"):(App.ScrollTxtTips.showTip("埋雷成功"),GamePlayerMgr.i.getPlayer().setMoney(t.balance))},i.prototype.btncloseReciveHandler=function(){this.hideThings()},i.prototype.showRule=function(){this.addChildAt(this.grabMask,this.getChildIndex(this.rullGroup)-1),this.rullGroup.visible=!0,R.sendPlayerAction("HBhelp")},i.prototype.onChangeValue=function(t){Log.log("拖动条数值变化：",this.packSlider.value),this.packMoney.text=""+this.packSlider.value*this.min},i.prototype.setFastGrab=function(){Log.log("勾选框：",this.btnQuickTake.selected),this.applyFunc(t.RedPacketConst.fastGrabRedEnvelopeReq,this.btnQuickTake.selected)},i.prototype.hideThings=function(){this.rullGroup.visible&&(this.rullGroup.visible=!1),this.reciveGroup.visible&&(this.reciveGroup.visible=!1,this.removeGoldBone()),this.grabBackGroup.visible&&(this.grabBackGroup.visible=!1,this.removeGoldBone()),this.detailGroup.visible&&(this.detailGroup.visible=!1),this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask),this.clearQipao()},i.prototype.removeGoldBone=function(){this.goldBone&&this.goldBone.parent&&(this.goldBone.stop(),this.goldBone.parent.removeChild(this.goldBone))},i.prototype.touchHide=function(){this.makeGroup.visible?(this.makeGroup.visible=!1,this.normalGroup.visible=!0):this.closeHandler()},i.prototype.onNumBtnClick=function(t){Log.trace("数字点击，value",t),this.thunderNum.text=t},i.prototype.rankDetailData=function(t){var e=t.hit_mine_players;e.sort(App.MathUtils.sortMoreFun(["ranking"],[0]));var i=t.grab_players;i.sort(App.MathUtils.sortMoreFun(["ranking"],[0]));for(var o in i)i[o].payout_amount=0;var n=[];if(i.length>0&&e.length>0){var s=(i[0].ranking,e[0].ranking,i[0].income),r=e[0].income;s>r&&n.push(i.shift())}var a=e.concat(i);n=n.concat(a);for(var o=0;o<n.length;o++)n[o].indexss=o;return n},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.touchShape&&(this.touchShape.parent&&this.touchShape.parent.removeChild(this.touchShape),this.touchShape=void 0),this.pgscroller&&(this.pgscroller.parent&&this.pgscroller.parent.removeChild(this.pgscroller),this.pgscroller=void 0),this.grabMask&&(this.grabMask.parent&&this.grabMask.parent.removeChild(this.grabMask),this.grabMask=void 0),this.goldBone&&(this.goldBone.parent&&this.goldBone.parent.removeChild(this.goldBone),this.goldBone=void 0)},i}(BaseEuiView);t.RedPacketView=e,__reflect(e.prototype,"lobby.RedPacketView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/RegisterSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.passwordInput.inputType=egret.TextFieldInputType.PASSWORD,this.getVerifyBtn.visible=!0,this.verifyCountdown.visible=!1},i.prototype.initData=function(){e.prototype.initData.call(this),this.codeData={0:"1wqe",1:"g2qe",2:"as2d",3:"kl24",4:"1rtu",5:"q14k",6:"7y6t",7:"hj4e",8:"88sb",9:"ghjk",10:"1lk7"}},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getVerifyBtn,this.getVerify,this),App.CommonUtils.effectButton(this.changeBtn,this.changeVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.btnMemberLogin,this.memberLogin,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getVerifyBtn),App.CommonUtils.removeButton(this.changeBtn),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.btnMemberLogin)},i.prototype.switchTab=function(t){},i.prototype.getVerify=function(){if(!App.StringUtils.checkMobile(this.accountInput.text))return void App.ScrollTxtTips.showTip("输入的电话号码不正确，请重新输入");if(!this.passwordInput.text||this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的密码");if(!this.accountInput.text||this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("请输入长度6位以上的账号");App.ScrollTxtTips.showTip("验证码已发送到手机中，请查看"),this.verifyCountdown.visible=!0,this.getVerifyBtn.enabled=!1;var e=1;App.TimerManager.doTimer(1e3,60,function(){this.verifyCountdown.text="("+(60-e)+")",e++,e>=60&&(e=1,this.verifyCountdown.visible=!1,this.getVerifyBtn.enabled=!0)},this);var i;GamePlayerMgr.i.isVisiter&&(i={phone_no:this.accountInput.text}),Log.trace("获取验证码",i),this.applyControllerFunc(t.LobbyControllerConst.Setting,t.SettingConst.GetCaptcha,i)},i.prototype.changeVerify=function(){Log.trace(Math.ceil(10*Math.random())),Log.trace(this.codeData[0]),this.checkCode.text=this.codeData[Math.ceil(10*Math.random())]},i.prototype.confirm=function(){Log.trace("提交信息");var e=2;if(!this.accountInput.text||!this.passwordInput.text)return void App.ScrollTxtTips.showTip("账号或密码不能为空");if(this.accountInput.text.length<6)return void App.ScrollTxtTips.showTip("账号长度不能少于6位");if(this.passwordInput.text.length<6)return void App.ScrollTxtTips.showTip("密码长度不能少于6位");if(this.verifyInput.text!=this.checkCode.text&&2!=e)return void App.ScrollTxtTips.showTip("验证码错误请重新输入");var i={loginame:this.accountInput.text,password:this.passwordInput.text,registerType:e,captcha:this.verifyInput.text,deviceid:GameBase.getDeviceId};this.applyControllerFunc(t.LobbyControllerConst.Setting,"RegisterAccount",i)},i.prototype.memberLogin=function(){App.SceneManager.runScene(SceneConsts.Login,{isVipLogin:!0})},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭注册账号"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.RegisterView=e,__reflect(e.prototype,"lobby.RegisterView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ResetLPSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),Log.trace("重置登录密码",GamePlayerMgr.i.getPlayer().getIsRegistBytel()),GamePlayerMgr.i.getPlayer().getIsRegistBytel()||App.isInLogin||(this.tips.visible=!1,this.getverify_phone.visible=!1,this.phoneVerify_input.visible=!1,this.oldPassword_input.visible=!0,this.tempName.text="旧密码",this.phoneNum_input.prompt="请输入正确的会员账号")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getverify_phone,this.getVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.phoneNum_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.newPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.MessageCenter.addListener("onResetLoginPasswordAck",this.onResetLPAck,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getverify_phone),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),this.phoneNum_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.newPassword_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.MessageCenter.removeListener("onResetLoginPasswordAck",this.onResetLPAck,this)},i.prototype.checkInput=function(t){App.StringUtils.isChinese(this.phoneNum_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.phoneNum_input.text=""),App.StringUtils.isChinese(this.newPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.newPassword_input.text="")},i.prototype.getVerify=function(){Log.trace("获取验证码");var e;this.phoneNum_input.text&&(e={phone_no:this.phoneNum_input.text}),this.applyFunc(t.SettingConst.GetCaptcha,e)},i.prototype.onResetLPAck=function(){this.newPassword_input.text="",this.oldPassword_input.text="",this.phoneNum_input.text=""},i.prototype.confirm=function(){if(Log.trace("提交信息"),!this.phoneNum_input.text)return void App.ScrollTxtTips.showTip("请输入账号");if(!this.phoneVerify_input.text&&GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入验证码");if(!this.oldPassword_input.text&&!GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入旧密码");if(!this.newPassword_input.text)return void App.ScrollTxtTips.showTip("请输入新密码");var e={token:GamePlayerMgr.i.getPlayer().getToken(),loginame:this.phoneNum_input.text,newpassword:this.newPassword_input.text,oldpassword:this.oldPassword_input.text,captha:"1234"};this.applyFunc(t.SettingConst.ResetPassword,e)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭重置登录密码"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ResetLoginPasswordView=e,__reflect(e.prototype,"lobby.ResetLoginPasswordView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/ResetMPSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.oldPassword_input.inputType=egret.TextFieldInputType.PASSWORD,this.newPassword_input.inputType=egret.TextFieldInputType.PASSWORD},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.getverify_phone,this.getVerify,this),App.CommonUtils.effectButton(this.confirmBtn,this.confirm,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.newPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.oldPassword_input.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.MessageCenter.addListener("onResetMoneyPwdAck",this.onGetVerifyAck,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.getverify_phone),App.CommonUtils.removeButton(this.confirmBtn),App.CommonUtils.removeButton(this.closeBtn),this.newPassword_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),this.oldPassword_input.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.MessageCenter.removeListener("onResetMoneyPwdAck",this.onGetVerifyAck,this)},i.prototype.checkInput=function(){App.StringUtils.isChinese(this.newPassword_input.text)&&(App.ScrollTxtTips.showTip("该项不能输入汉字,请重新输入"),this.newPassword_input.text="")},i.prototype.getVerify=function(){this.applyFunc(t.SettingConst.GetCaptcha)},i.prototype.onGetVerifyAck=function(){this.oldPassword_input.text="",this.newPassword_input.text=""},i.prototype.confirm=function(){if(!this.phoneVerify_input.text&&GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入验证码");if(!this.newPassword_input.text)return void App.ScrollTxtTips.showTip("请输入新密码");if(this.newPassword_input.text.length<6)return void App.ScrollTxtTips.showTip("请输入六位数字的新密码");if(!this.oldPassword_input.text&&!GamePlayerMgr.i.getPlayer().getIsRegistBytel())return void App.ScrollTxtTips.showTip("请输入旧密码");var e={token:GamePlayerMgr.i.getPlayer().getToken(),new_pwd:this.newPassword_input.text,old_pwd:this.oldPassword_input.text,captcha:this.phoneVerify_input.text};this.applyFunc(t.SettingConst.ResetMoneyPassword,e)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t);var o=GamePlayerMgr.i.getPlayer().getIsRegistBytel();this.tempName.text=1==o?"验证码":"旧资金密码",this.oldPassword_input.visible=!o,this.getverify_phone.visible=o,this.phoneVerify_input.visible=o,this.tempTips.visible=o,App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭重置资金密码"),App.ViewManager.closeView(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseEuiView);t.ResetMoneyPasswordView=e,__reflect(e.prototype,"lobby.ResetMoneyPasswordView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.CloseRegister=80001,t.ResetPassword=80002,t.ResetMoneyPassword=80003,t.GetCaptcha=80004,t}();t.SettingConst=e,__reflect(e.prototype,"lobby.SettingConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return Log.trace("注册设置"),t.inits(),t.registers(),t.addListeners(),t.initFunc(),t}return __extends(i,e),i.prototype.inits=function(){e.prototype.inits.call(this),this.settingModel=new t.SettingModel(this),this.settingProxy=new t.SettingProxy(this,this.settingModel)},i.prototype.registers=function(){e.prototype.registers.call(this),this.settingView=new t.SettingView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Setting,this.settingView),this.resetMPView=new t.ResetMoneyPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ResetMoneyPassword,this.resetMPView),this.resetLPView=new t.ResetLoginPasswordView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.ResetLoginPassword,this.resetLPView),this.registerView=new t.RegisterView(this,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Register,this.registerView)},i.prototype.initFunc=function(){this.registerFunc(t.SettingConst.CloseRegister,this.onCloseRegister,this),this.registerFunc("RegisterAccount",this.onRegister,this),this.registerFunc(t.SettingConst.ResetPassword,this.onResetLoginPassword,this),this.registerFunc(t.SettingConst.ResetMoneyPassword,this.onResetMoneyPassword,this),this.registerFunc(t.SettingConst.GetCaptcha,this.onGetCaptcha,this),this.registerFunc("WebLogOut",this.onLogOut,this)},i.prototype.onCloseRegister=function(){this.settingView.closeRegister()},i.prototype.onRegister=function(t){this.settingProxy.onRegister(t)},i.prototype.onResetLoginPassword=function(t){this.settingProxy.onResetLoginPassword(t)},i.prototype.onResetMoneyPassword=function(t){this.settingProxy.onResetMoneyPwd(t)},i.prototype.onLogOut=function(t){this.settingProxy.onWebLogOut(t)},i.prototype.onGetCaptcha=function(t){this.settingProxy.onGetCaptcha(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.settingProxy.addEvent()},i.prototype.removeListeners=function(){this.settingProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.settingModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.settingView.destroy(),this.resetMPView.destroy(),this.resetLPView.destroy(),this.registerView.destroy(),this.settingProxy.destroy(),this.settingModel.destroy(),this.settingView=void 0,this.resetMPView=void 0,this.resetLPView=void 0,this.registerView=void 0,this.settingProxy=void 0,this.settingModel=void 0},i}(BaseController);t.SettingController=e,__reflect(e.prototype,"lobby.SettingController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.currview=[],o.skinName="resource/lobby/skins/SettingSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.musicSetting.setImage("settingTab_music_sel","settingTab_music_nor",140,37),this.registerAccount.setImage("settingTab_register_sel","settingTab_register_nor",140,37),this.switchAccount.setImage("settingTab_switchAccoun_sel","settingTab_switchAccoun_nor",140,37),this.passwordManager.setImage("settingTab_password_sel","settingTab_password_nor",140,37),this.exit.setImage("settingTab_exit_sel","settingTab_exit_nor",140,37),this.specialEffect.selected=GamePlayerMgr.i.isOpenEffect,this.musicSetting.selected=!0,this.musicSetting.touchEnabled=!1,this.lastTarget=this.musicSetting,this.hSliderMusic.minimum=0,this.hSliderMusic.maximum=100,this.hSliderMusic.track.mask=this.hSliderMusic.trackHighlight,this.hSliderMusic.value=100*App.SoundManager.getBgVolume(),this.hSliderEffect.minimum=0,this.hSliderEffect.maximum=100,this.hSliderEffect.track.mask=this.hSliderEffect.trackHighlight,this.hSliderEffect.value=100*App.SoundManager.getEffectVolume(),this.lastView=this.content_sound,this.txtVer.text="版本号: "+GameBase.getMainVersion(),GamePlayerMgr.i.isVisiter&&(this.btn_main.removeChildAt(2),this.btn_main.removeChildAt(2)),GamePlayerMgr.i.isVisiter||this.btn_main.removeChildAt(1)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this);for(var t in this.btn_main.$children)this.btn_main.$children[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.mainBtnOnClick,this);App.CommonUtils.effectButton(this.resetLoginPassword,this.resetLP,this),App.CommonUtils.effectButton(this.resetMoneyPassword,this.resetMP,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.account1,this.switchLogin,this,1),App.CommonUtils.effectButton(this.account2,this.switchLogin,this,2),this.registerBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.openRegister,this),this.hSliderMusic.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.hSliderEffect.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.voice_off.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.voice_on.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_off.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_on.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.specialEffect.addEventListener(egret.Event.CHANGE,this.onEffectChange,this),App.MessageCenter.addListener("onWebLogOutAck",this.loginOut,this),App.MessageCenter.addListener(GameConsEvent.Game_UserChangeAccount,this.refreshAC,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this);for(var t in this.btn_main.$children)this.btn_main.$children[t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mainBtnOnClick,this);App.CommonUtils.removeButton(this.resetLoginPassword),App.CommonUtils.removeButton(this.resetMoneyPassword),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.account1),App.CommonUtils.removeButton(this.account2),this.registerBtn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.openRegister,this),this.hSliderMusic.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.hSliderEffect.removeEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.voice_off.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.voice_on.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_off.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.music_on.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundBtnHandler,this),this.specialEffect.removeEventListener(egret.Event.CHANGE,this.onEffectChange,this),App.MessageCenter.removeListener("onWebLogOutAck",this.loginOut,this),App.MessageCenter.removeListener(GameConsEvent.Game_UserChangeAccount,this.refreshAC,this)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this)},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭设置"),App.ViewManager.closeView(this)},i.prototype.mainBtnOnClick=function(e){if(Log.trace(e.$currentTarget.name),e.currentTarget){switch(e.currentTarget){case this.musicSetting:Log.trace("打开音乐设置"),this.switchMainBtn(this.content_sound);break;case this.registerAccount:Log.trace("打开注册设置"),this.switchMainBtn(this.content_register),App.ViewManager.open(t.LobbyViewConst.Register,LayerManager.UI_Popup);break;case this.switchAccount:Log.trace("切换账号"),R.sendPlayerAction("Lobbyset_changeaccount"),this.refreshAC(),this.switchMainBtn(this.content_account);break;case this.passwordManager:Log.trace("密码管理"),R.sendPlayerAction("Lobbyset_passwordcontrol"),this.switchMainBtn(this.content_password);break;case this.exit:Log.trace("退出登录"),R.sendPlayerAction("Lobbyset_logoff"),this.switchMainBtn(this.content_exit),this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1,PromTipsView.getInstance().show("是否退出登录",function(){var t=GamePlayerMgr.i.getPlayer(),e=GamePlayerMgr.i.isVisiter,i={usertype:e?2:1,loginame_or_deviceid:e?GameBase.getDeviceId():t.getLoginame(),uid:t.getUserId(),token:t.getToken()};this.applyFunc("WebLogOut",i)},function(){this.closeRegister()},this,!0)}e.currentTarget.touchEnabled=!1,this.lastTarget=e.currentTarget}},i.prototype.soundBtnHandler=function(t){switch(t.currentTarget){case this.voice_off:this.hSliderMusic.value=0,App.SoundManager.setBgOn(!1);break;case this.voice_on:this.hSliderMusic.value=100,App.SoundManager.setBgOn(!0);break;case this.music_off:this.hSliderEffect.value=0,App.SoundManager.setEffectOn(!1);break;case this.music_on:this.hSliderEffect.value=100,App.SoundManager.setEffectOn(!0)}},i.prototype.switchMainBtn=function(t){t.visible=!0,this.lastView.visible=!1,this.lastView=t,this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1},i.prototype.onChangeValue=function(t){var e;if(t.currentTarget)switch(t.currentTarget){case this.hSliderMusic:Log.trace("改变音量"),e=this.hSliderMusic.value/100,App.SoundManager.setBgVolume(e);break;case this.hSliderEffect:e=this.hSliderEffect.value/100,App.SoundManager.setEffectVolume(e)}},i.prototype.onEffectChange=function(){GamePlayerMgr.i.setIsOpenEffect(this.specialEffect.selected)},i.prototype.resetLP=function(){R.sendPlayerAction("Lobbyset_resetsigninpsw"),App.ViewManager.open(t.LobbyViewConst.ResetLoginPassword,LayerManager.UI_Popup)},i.prototype.resetMP=function(){return R.sendPlayerAction("Lobbyset_resetsafepsw"),GamePlayerMgr.i.getPlayer().getIsPwdSeted()?void App.ViewManager.open(t.LobbyViewConst.ResetMoneyPassword,LayerManager.UI_Popup):void App.ScrollTxtTips.showTip("请前往保险箱设置密码")},i.prototype.openRegister=function(){App.ViewManager.open(t.LobbyViewConst.Register,LayerManager.UI_Popup)},i.prototype.refreshAC=function(){function t(t,e,i){e&&e.length>0&&(t.getChildAt(i).texture=RES.getRes(e))}var e=GamePlayerMgr.i,i=e.getAccount1(),o=e.getAccount2(),n=o&&o.length>0;this.ugAccount1.horizontalCenter=n?-131:0,this.ugAccount2.horizontalCenter=131,this.ugAccount2.visible=n,this.txtAc1.text=""+(i?i:e.getPlayer().getNickName()),this.txtAc2.text=""+o,this.accountStatus2.visible=!1,Log.trace("刷新账号切换",e.getAcIcon1(),e.getAcIconRound1()),t(this.account1,e.getAcIcon1(),0),t(this.account1,e.getAcIconRound1(),1),t(this.account2,e.getAcIcon2(),0),t(this.account2,e.getAcIconRound2(),1),this.account2._mAccount=2,""==e.mCurrAccount&&i&&(t(this.account2,e.getAcIcon1(),0),t(this.account2,e.getAcIconRound1(),1),this.ugAccount1.visible=!1,this.ugAccount2.visible=!0,this.ugAccount2.horizontalCenter=0,this.txtAc2.text=""+i,this.account2._mAccount=1)},i.prototype.switchLogin=function(t,e){Log.trace("switchLogin",t),2==t?GamePlayerMgr.i.changeLogin(this.account2._mAccount):ErrorManager.i.showError("账号当前正在使用！")},i.prototype.closeRegister=function(){Log.trace("关闭注册",this.lastView),this.musicSetting.selected=!0,this.musicSetting.touchEnabled=!1,this.content_sound.visible=!0,this.lastTarget!=this.musicSetting&&(this.lastView.visible=!1,this.lastTarget.touchEnabled=!0,this.lastTarget.selected=!1,this.lastTarget=this.musicSetting,this.lastView=this.content_sound)},i.prototype.loginOut=function(){GamePlayerMgr.i.isSwitchAccount||(this.closeView(),App.SceneManager.runScene(SceneConsts.Login))},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.account1.getChildAt(0).texture=void 0,this.account1.getChildAt(1).texture=void 0,this.account2.getChildAt(0).texture=void 0,this.account2.getChildAt(1).texture=void 0},i}(BaseEuiView);t.SettingView=e,__reflect(e.prototype,"lobby.SettingView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return Log.trace("注册分享"),i.shareview=new t.ShareView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.Share,i.shareview),i}return __extends(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shareview.destroy(),this.shareview=void 0},i}(BaseController);t.ShareController=e,__reflect(e.prototype,"lobby.ShareController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.skinName="resource/lobby/skins/ShareSkin.exml",o}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),App.CommonUtils.effectButton(this.share_copy,this.copyID,this)},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.closeBtn),App.CommonUtils.removeButton(this.share_copy)},e.prototype.copyID=function(){R.sendPlayerAction("Lobbyshare_clickcopybutton");try{var t=document.createElement("input");t.readOnly=!0,t.value=this.wwwLocation.text,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t)}catch(e){Log.trace(e)}},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),App.EffectUtils.showUI(this)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},e.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log("关闭分享"),App.ViewManager.closeView(this)},e}(BaseEuiView);t.ShareView=e,__reflect(e.prototype,"lobby.ShareView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.getBroadcastData=function(e){return t.CfgBroadcast||(t.CfgBroadcast=RES.getRes("broadcast_json")),t.CfgBroadcast["data_"+e]},t.analysis=function(e){var i=e.marquee_format_id,s=e.priority,r=e.play_times,a=e.marquee_effect,h=e.parameter,l=e.play_speed/100,p="",c=t.getBroadcastData(i);if(c?(p=c.content,a=c.effect_lv,r=c.play_times,s=c.priority,l=c.speed/100):s==n.SystemMsg?(p=h[0],Log.info("游戏公告：",p,"playSpeed:",l,"playTimes:",r)):(Log.warn("未配置跑马灯ID：",i,t.CfgBroadcast),p=h.join("")),!(l>0&&r>0))return void Log.warn("playSpeed：",l,"playTimes:",r);var u=new o;u.mId=i,u.mPriority=s,u.mPlayTimes=r,u.mLvEffect=a,u.mMoveSpeed=l;for(var d=0,m=h.length;m>d;d++)p=p.replace("*",h[d]);return u.mTxtMsg=p,u},t.CfgBroadcast=null,t}();t.BroadcastMgr=e,__reflect(e.prototype,"lobby.BroadcastMgr");var i=function(t){function i(){var e=t.call(this)||this;return e._mIsMove=!1,e._mIsLoaded=!1,e._mEffBone=null,e._mTextParser=new egret.HtmlTextParser,e.visible=!1,e.skinName="BroadcastSkin",e.touchEnabled=e.touchChildren=!1,e}return __extends(i,t),i.prototype.load=function(){var t=RES.getGroupByName("p_Broadcast");this._mIsLoaded=t.length&&RES.isGroupLoaded("p_Broadcast"),this._mIsLoaded||(App.ResourceUtils.createGroup("p_Broadcast",["eff_pmd_2_ske_json","eff_pmd_2_tex_json","eff_pmd_2_tex_png","eff_pmd_3_ske_json","eff_pmd_3_tex_json","eff_pmd_3_tex_png"]),App.ResourceUtils.loadGroup("p_Broadcast",this.loaded,this.loadPress,this))},i.prototype.loaded=function(){this._mIsLoaded=!0,Log.log("p_Broadcast loaded ")},i.prototype.loadPress=function(t,e){Log.log("p_Broadcast loadPress: ",t,e)},i.prototype.init=function(e,o,n){t.prototype.initComponent.call(this,e,o),this._mCurrScene=n,this.load(),i.Mask.width=this.uTxtBg.width,this.uTxtBg.mask=i.Mask,this.continuePlay()},i.prototype.continuePlay=function(){this.delMsg(),i._mCurrMsg?this.playMsg():i._mListMsg.length>0&&this.nextMsg()},i.prototype.delMsg=function(){var t=i._mListMsg,e=[];this._mCurrScene==SceneConsts.Lobby&&e.push(3,4),(this._mCurrScene==SceneConsts.Desk||this._mCurrScene==SceneConsts.Room)&&e.push(2,3,4),this._mCurrScene==SceneConsts.Game&&e.push(1,2,3,4);for(var o=t.length-1;o>=0;o--)for(var n=e.length-1;n>=0&&t[o].mPriority!=e[n];n--)0==n&&t.splice(o,1);var s=i._mCurrMsg;if(s)for(var n=e.length-1;n>=0&&s.mPriority!=e[n];n--)0==n&&(i._mCurrMsg=null)},i.prototype.addMsg=function(t){var i=e.analysis(t);i&&(this.listMsgPush(i),R.setTimeOutOnly(function(){this.nextMsg()}.bind(this),this,1e3),Log.log("add Broadcast Msg:",i.mId,i.mPriority,i.mPlayTimes,i.mLvEffect))},i.prototype.listMsgPush=function(t){i._mListMsg.push(t),i._mListMsg.sort(function(t,e){return t.mPriority==e.mPriority?t.mCreateTime-e.mCreateTime:e.mPriority-t.mPriority})},i.prototype.restartMsg=function(){var t=i._mCurrMsg;t.mCurrX=i.Mask.width+10,t.mCurrTimes++,this.txt.x=t.mCurrX},i.prototype.nextMsg=function(){if(!this._mIsMove&&this._mIsLoaded){if(i._mListMsg.length<=0)return this.stop(),void(i._mCurrMsg=null);i._mCurrMsg=i._mListMsg.shift();var t=i._mCurrMsg;t.mCurrTimes=0,this.restartMsg(),this.playMsg()}},i.prototype.playMsg=function(){this.txt.textFlow=this.getHtmlTxt();var t=i._mCurrMsg;t.mEndX=-(this.txt.width+20),t.mScrollStartTime=GameBase.getCurrServerTime(),this.playEff(),this.visible=!0,this._mIsMove=!0,App.TimerManager.doFrame(1,999999,this.refreshPos,this)},i.prototype.playEff=function(){var t=i._mCurrMsg.mLvEffect;return this.imageHorn.visible=3!=t,2!=t&&3!=t?void this.removeEff():(this._mEffBone||(this._mEffBone=new s,this._mEffBone.x=this.width/2,this._mEffBone.y=this.height/2,this.addChild(this._mEffBone)),this._mEffBone.updateBone("eff_pmd_"+t),void this._mEffBone.play())},i.prototype.removeEff=function(){this._mEffBone&&this._mEffBone.stop()},i.prototype.getHtmlTxt=function(){return this._mTextParser.parser(i._mCurrMsg.mTxtMsg)
},i.prototype.refreshPos=function(t){if(this._mIsMove){var e=i._mCurrMsg,o=GameBase.getCurrServerTime(),n=o-e.mScrollStartTime;e.mScrollStartTime=o,e.mCurrX-=e.mMoveSpeed*n/16,this.txt.x=e.mCurrX,e.mCurrX<e.mEndX&&(e.mCurrTimes>=e.mPlayTimes?(this._mIsMove=!1,i._mCurrMsg=null,App.TimerManager.doTimer(i.DealyTimeMove,1,this.nextMsg,this)):this.restartMsg())}},i.prototype.stop=function(){this.removeEff(),this.visible=!1,this._mIsMove=!1,App.TimerManager.remove(this.refreshPos,this)},i.prototype.addEvent=function(){App.MessageCenter.addListener(GameConsEvent.Game_Broadcast_Notification,this.addMsg,this)},i.prototype.removeEvent=function(){App.MessageCenter.removeAll(this)},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEff(),R.removeFromParent(this._mEffBone),App.TimerManager.removeAll(this),this._mEffBone&&this._mEffBone.destroy(),this._mEffBone=void 0},i.testPlay=function(){var t={priority:App.MathUtils.randomInt(1,4),play_times:App.MathUtils.randomInt(2,2),marquee_effect:App.MathUtils.randomInt(1,3),marquee_format_id:App.MathUtils.randomInt(2,2),play_speed:150,parameter:["胡汉三","100000","100倍","哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈说阿尔五大"]};App.MessageCenter.dispatch(GameConsEvent.Game_Broadcast_Notification,t)},i.Mask=new egret.Rectangle(0,0,577,36),i.DealyTimeMove=1e3,i._mListMsg=[],i}(BaseEuiComponent);t.BroadcastView=i,__reflect(i.prototype,"lobby.BroadcastView");var o=function(){function t(){this.mId=0,this.mTxtMsg="",this.mPriority=0,this.mLvEffect=0,this.mPlayTimes=3,this.mCurrTimes=0,this.mMoveSpeed=1,this.mEndX=0,this.mCurrX=0,this._mCreateTime=0,this.mScrollStartTime=0,this._mCreateTime=egret.getTimer()}return Object.defineProperty(t.prototype,"mCreateTime",{get:function(){return this._mCreateTime},enumerable:!0,configurable:!0}),t}();__reflect(o.prototype,"BroadcastMsg");var n=function(){function t(){}return t.GameDeskCurr=1,t.GameDeskAll=2,t.GameAndLobby=3,t.SystemMsg=4,t}();__reflect(n.prototype,"BroadcastLv");var s=function(t){function e(){var e=t.call(this,null)||this;return e.blendMode=egret.BlendMode.ADD,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateBone=function(t){this.initDBRes(t),this.armature=this.createArmature("yuanjian",t,e._mActionList)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t){void 0===t&&(t=1),this.visible=!0,this.armature.play(e.Animation,999999,t)},e.prototype.stop=function(){this.visible=!1,this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="play",e._mActionList=[e.Animation],e}(base.BaseGameObject);__reflect(s.prototype,"BroadcastEff")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=30001,t}();t.UserInfoConst=e,__reflect(e.prototype,"lobby.UserInfoConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.inits(),i.initFunc(),i.addListeners(),i.userInfoView=new t.UserInfoView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.UserInfo,i.userInfoView),i.headImgSettingView=new t.HeadImgSettingView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.HeadImgSetting,i.headImgSettingView),i}return __extends(i,e),i.prototype.changeHeadImg=function(t,e,i){this.userInfoView.changeUserHeadImg(t,e,i)},i.prototype.inits=function(){e.prototype.inits.call(this),this.userInfoModel=new t.UserInfoModel(this),this.userInfoProxy=new t.UserInfoProxy(this,this.userInfoModel)},i.prototype.initFunc=function(){this.registerFunc("RoleSetting",this.onRoleSetting,this),this.registerFunc(t.UserInfoConst.ChangeHeadImg,this.changeHeadImg,this)},i.prototype.onRoleSetting=function(t){this.userInfoProxy.roleSetting(t)},i.prototype.addListeners=function(){e.prototype.addListeners.call(this),this.userInfoProxy.addEvent()},i.prototype.removeListeners=function(){this.userInfoProxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this.userInfoModel},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.userInfoView.destroy(),this.headImgSettingView.destroy(),this.userInfoModel.destroy(),this.userInfoProxy.destroy(),this.userInfoView=void 0,this.headImgSettingView=void 0,this.userInfoModel=void 0,this.userInfoProxy=void 0},i}(BaseController);t.UserInfoController=e,__reflect(e.prototype,"lobby.UserInfoController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/UserInfoSkin.exml",App.MessageCenter.addListener("UserMoneyChange",o.refreshMoney,o),o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.sexList.visible=!1,this.vipLevel_s.visible=!1,this.vipLevel_b.visible=!1},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.sex_switchBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchSex,this),this.switchSexBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSex,this),this.nameInput.addEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.effectButton(this.changeHeadBtn,this.openHeadImgSettingView,this),App.CommonUtils.effectButton(this.saveNickNameBtn,this.saveNickName,this),App.CommonUtils.effectButton(this.copyIDBtn,this.copyID,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.sex_switchBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchSex,this),this.switchSexBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openSex,this),this.nameInput.removeEventListener(eui.UIEvent.CHANGE,this.checkInput,this),App.CommonUtils.removeButton(this.changeHeadBtn),App.CommonUtils.removeButton(this.saveNickNameBtn),App.CommonUtils.removeButton(this.copyIDBtn),App.CommonUtils.removeButton(this.closeBtn)},i.prototype.openSex=function(){this.sexList.visible=!this.sexList.visible,"man"==this.currSex.label&&(this.sex_switchBtn.skinName="SexItemSkinW",this.sex_switchBtn.label="woman"),"woman"==this.currSex.label&&(this.sex_switchBtn.skinName="SexItemSkinM",this.sex_switchBtn.label="man")},i.prototype.switchSex=function(){Log.trace("changeSex"),this.currSex.label=this.sex_switchBtn.label,this.currSex.skinName=this.sex_switchBtn.skinName,this.sexList.visible=!1;var t={sex:"man"==this.currSex.label?1:2};"man"==this.currSex.label?R.sendPlayerAction("Lobbyself_sexmale"):R.sendPlayerAction("Lobbyself_sexfemale"),this.applyFunc("RoleSetting",t)},i.prototype.openHeadImgSettingView=function(){R.sendPlayerAction("Lobbyself_setphoto"),App.ViewManager.open(t.LobbyViewConst.HeadImgSetting)},i.prototype.checkInput=function(){var t=this.nameInput.text;this.nameInput.text=App.StringUtils.rejectValue(t)},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this),this.refresh(),this.refreshTxt()},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭个人中心"),App.ViewManager.closeView(this)},i.prototype.changeUserHeadImg=function(t,e,i){this.refresh()},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();this.userInfo_headBox.source="ui_headBox_"+t.getAvatarBox(),this.userInfo_headImg.source="ui_headImg_"+t.getAvatar()},i.prototype.refreshTxt=function(){var t=GamePlayerMgr.i.getPlayer();this.userMoney_label.text=""+App.CommonUtils.money2Str(t.getMoney()),this.IDInput.text=""+GamePlayerMgr.i.getPlayer().mShowUid},i.prototype.saveNickName=function(){Log.trace("保存昵称");var e=this.nameInput.text.trim();if(e.length<=0)return void App.ScrollTxtTips.showTip("输入不能为空！");var i=e.split("");if(i.length>6)return void App.ScrollTxtTips.showTip("最大输入长度为6位");R.sendPlayerAction("Lobbyself_changename");var o={nickname:e};this.applyFunc("RoleSetting",o),App.ControllerManager.applyFunc(ControllerConst.Lobby,t.LobbyConst.ChangeNickName,this.nameInput.text)},i.prototype.refreshMoney=function(t){this.refreshTxt()},i.prototype.copyID=function(){if(App.IsNative)R.setClipboardInfo(this.IDInput.text);else try{var t=document.createElement("input");t.readOnly=!0,t.value=this.IDInput.text,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t)}catch(e){Log.trace(e)}R.sendPlayerAction("Lobbyself_copyid"),App.ScrollTxtTips.showTip("已成功复制到粘贴板")},i.prototype.destroy=function(){e.prototype.destroy.call(this),App.MessageCenter.removeListener("UserMoneyChange",this.refreshMoney,this)},i}(BaseEuiView);t.UserInfoView=e,__reflect(e.prototype,"lobby.UserInfoView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(){function t(){}return t.ChangeHeadImg=20001,t.ChangeHeadImgBox=20002,t.ShowSign=20003,t}();t.HeadImgConst=e,__reflect(e.prototype,"lobby.HeadImgConst")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.headImgSettingView=new t.HeadImgSettingView(i,LayerManager.UI_Popup),App.ViewManager.register(t.LobbyViewConst.HeadImgSetting,i.headImgSettingView),i}return __extends(i,e),i.prototype.destroy=function(){e.prototype.destroy.call(this),this.headImgSettingView.destroy(),this.headImgSettingView=void 0},i}(BaseController);t.HeadImgSettingController=e,__reflect(e.prototype,"lobby.HeadImgSettingController")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){var o=e.call(this,t,i)||this;return o.skinName="resource/lobby/skins/HeadImgSettingSkin.exml",o}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.changeHeadImgBtn.selected=!0,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.changeHeadImgBtn.setImage("userInfo_changeHeadImgTab_sel","userInfo_changeHeadImgTab_nor",102,29),this.changeHeadImgBtn.setImageBg(150,44),this.changeHeadImgBoxBtn.setImage("userInfo_changeHeadBoxTab_sel","userInfo_changeHeadBoxTab_nor",125,29),this.changeHeadImgBoxBtn.setImageBg(150,44)},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.saveBtn,this.saveHeadImg,this),App.CommonUtils.effectButton(this.closeBtn,this.close,this),this.changeHeadImgBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.changeHeadImgBoxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.MessageCenter.addListener("roleSettingAck",this.saveHeadImgAck,this),this.headImgList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.changeIcon,this)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.saveBtn),App.CommonUtils.removeButton(this.closeBtn),this.changeHeadImgBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),this.changeHeadImgBoxBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.switchTab,this),App.MessageCenter.removeListener("roleSettingAck",this.saveHeadImgAck,this),this.headImgList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.changeIcon,this)},i.prototype.initData=function(){e.prototype.initData.call(this),this.imgData=new eui.ArrayCollection;for(var i=GamePlayerMgr.i.getPlayer().getAvatar(),o=1;13>o;o++)this.imgData.addItem({icon:"ui_headImg_"+o,type:1,isSelected:i==o});this.imgBoxData=new eui.ArrayCollection;for(var n=GamePlayerMgr.i.getPlayer().getAvatarBox(),o=1;13>o;o++)this.imgBoxData.addItem({icon:"ui_headBox_"+o,type:2,isSelected:n==o});this.headImgList.itemRenderer=t.HeadImgItemRenderer,this.headImgList.dataProvider=this.imgData},i.prototype.open=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.open.call(this,t),App.EffectUtils.showUI(this),this.refresh()},i.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;this.type=void 0,this.currIcon=void 0,this.currBoxIcon=void 0,App.EffectUtils.hideUI(this,200,0,function(){i.closeView(t)})},i.prototype.refresh=function(){var t=GamePlayerMgr.i.getPlayer();this.myHeadImgBox.source="ui_headBox_"+t.getAvatarBox(),this.myHeadImg.source="ui_headImg_"+t.getAvatar()},i.prototype.closeView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Log.trace("关闭头像设置"),App.ViewManager.closeView(this)},i.prototype.changeHeadImg=function(t,e){t||(t="ui_headImg_1"),1==e?(this.myHeadImg.source=t,this.currIcon=t,this.type=e):2==e&&(this.myHeadImgBox.source=t,this.currBoxIcon=t,this.type=e)},i.prototype.closeSign=function(t){for(var e=t.dataProvider,i=0;i<e.length;i++){e.getItemAt(i).isSelected=!1;var o=t.getElementAt(i);o.refreshSign()}},i.prototype.changeIcon=function(t){this.changeData(this.headImgList)},i.prototype.changeData=function(t){var e=t.selectedItem,i=t.selectedIndex,o=t.getElementAt(i);this.closeSign(t),e.isSelected=!0,o.refreshSign(),this.changeHeadImg(e.icon,e.type)},i.prototype.saveHeadImg=function(){var t={};this.currIcon&&this.currBoxIcon&&(t={avatar:Number(this.currIcon.split("_")[2]),avatar_frame:Number(this.currBoxIcon.split("_")[2])}),this.currIcon&&!this.currBoxIcon&&(t={avatar:Number(this.currIcon.split("_")[2])}),this.currBoxIcon&&!this.currIcon&&(t={avatar_frame:Number(this.currBoxIcon.split("_")[2])}),this.currIcon||this.currBoxIcon||(t={avatar:GamePlayerMgr.i.getPlayer().getAvatar(),avatar_frame:GamePlayerMgr.i.getPlayer().getAvatarBox()}),this.applyFunc("RoleSetting",t)},i.prototype.saveHeadImgAck=function(){if(this.currIcon){var e=this.currIcon.split("_")[2];GamePlayerMgr.i.getPlayer().setAvatar(parseInt(e)),GamePlayerMgr.i.saveIcon(this.currIcon)}if(this.currBoxIcon){var i=this.currBoxIcon.split("_")[2];GamePlayerMgr.i.getPlayer().setAvatarBox(parseInt(i)),GamePlayerMgr.i.saveIconRound(this.currBoxIcon)}App.ControllerManager.applyFunc(ControllerConst.Lobby,t.LobbyConst.ChangeHeadImg,this.currIcon,this.currBoxIcon,this.type),App.ControllerManager.applyFunc(t.LobbyControllerConst.UserInfo,t.UserInfoConst.ChangeHeadImg,this.currIcon,this.currBoxIcon,this.type)},i.prototype.switchTab=function(t){t.currentTarget==this.changeHeadImgBtn&&this.changeHeadImgBtn.touchEnabled?(this.changeHeadImgBoxBtn.selected=!1,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.headImgList.dataProvider=this.imgData,R.sendPlayerAction("Lobbyself_changephoto")):t.currentTarget==this.changeHeadImgBoxBtn&&this.changeHeadImgBoxBtn.touchEnabled&&(this.changeHeadImgBtn.selected=!1,this.changeHeadImgBtn.touchEnabled=!this.changeHeadImgBtn.selected,this.changeHeadImgBoxBtn.touchEnabled=!this.changeHeadImgBoxBtn.selected,this.headImgList.dataProvider=this.imgBoxData,R.sendPlayerAction("Lobbyself_changeframe"))},i.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.imgData&&this.imgData.removeAll(),this.imgBoxData&&this.imgBoxData.removeAll(),this.headImgList.removeChildren(),this.imgData=void 0,this.imgBoxData=void 0)},i}(BaseEuiView);t.HeadImgSettingView=e,__reflect(e.prototype,"lobby.HeadImgSettingView")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.activityListReq=function(e){Log.trace("活动列表请求",e);var i={token:e.token,nowpage:e.nowpage};this.send(t.ProxyKeyConst.Lobby_ActivityList,i),App.EasyLoading.showOnTimeOut()},i.prototype.onActivityListAck=function(t){var e=t;this.model.getListData()&&(e.list=t.list.concat(this.model.getListData().list)),App.MessageCenter.dispatch("onActivityListAck",e),App.EasyLoading.hideLoading()},i.prototype.singleActivityReq=function(e){Log.trace("单条活动请求",e);var i={token:e.token,id:e.id};this.send(t.ProxyKeyConst.Lobby_SingleActivity,i),App.EasyLoading.showOnTimeOut()},i.prototype.onSingleActivityAck=function(t){this.model.setData(t.id,t),App.MessageCenter.dispatch("onSingleActivityAck",t),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_ActivityList_Back,this.onActivityListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleActivity_Back,this.onSingleActivityAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_ActivityList_Back,this.onActivityListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleActivity_Back,this.onSingleActivityAck,this)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.ActivityProxy=e,__reflect(e.prototype,"lobby.ActivityProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.saveMoney=function(e){Log.trace("请求存入");var i={token:e.token,money:e.money,password:e.password};this.send(t.ProxyKeyConst.Lobby_SaveMoney,i),App.EasyLoading.showOnTimeOut()},i.prototype.onSaveMoneyBack=function(t){Log.trace("onSaveMoneyBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("存入成功");var e=GamePlayerMgr.i.getPlayer();e.setMoney(t.balance),e.setSafeMoney(t.deposit),App.MessageCenter.dispatch("UserMoneyChange",t)},i.prototype.takeMoney=function(e){Log.trace("请求取出");var i={token:e.token,money:e.money,password:e.password};this.send(t.ProxyKeyConst.Lobby_TakeMoney,i),App.EasyLoading.showOnTimeOut()},i.prototype.onTakeMoneyBack=function(t){Log.trace("onTakeMoneyBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("取出成功");var e=GamePlayerMgr.i.getPlayer();e.setMoney(t.balance),e.setSafeMoney(t.deposit),App.MessageCenter.dispatch("UserMoneyChange",t)},i.prototype.setMoneyPwd=function(e){Log.trace("请求设置资金密码");var i={token:e.token,type:1,new_pwd:e.password};this.send(t.ProxyKeyConst.Lobby_ResetMoneyPwd,i),App.EasyLoading.showOnTimeOut()},i.prototype.onSetMoneyPwdBack=function(){Log.trace("设置密码返回"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置资金密码成功"),GamePlayerMgr.i.getPlayer().setIsPwdSeted(!0),App.MessageCenter.dispatch("onSetMoneyPwdBack")},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){Log.trace("注册回包监听"),this.addListener(t.ProxyKeyConst.Lobby_SaveMoney_Back,this.onSaveMoneyBack,this),this.addListener(t.ProxyKeyConst.Lobby_TakeMoney_Back,this.onTakeMoneyBack,this),this.addListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onSetMoneyPwdBack,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_SaveMoney_Back,this.onSaveMoneyBack,this),this.removeListener(t.ProxyKeyConst.Lobby_TakeMoney_Back,this.onTakeMoneyBack,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onSetMoneyPwdBack,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.BankProxy=e,__reflect(e.prototype,"lobby.BankProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.customerSendMsgReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),text:e.text,attachment:e.attachment,attach_fmt:e.attach_fmt};this.send(t.ProxyKeyConst.Lobby_CustomerSendMsg,i),App.EasyLoading.showOnTimeOut(),Log.trace("客服发送消息",e.text)},i.prototype.customerSendMsgAck=function(t){App.ScrollTxtTips.showTip("已成功发送该消息"),App.MessageCenter.dispatch("customerSendMsgAck"),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_CustomerSendMsg_Back,this.customerSendMsgAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_CustomerSendMsg_Back,this.customerSendMsgAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.CustomerProxy=e,__reflect(e.prototype,"lobby.CustomerProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.bindBankCardListReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type};this.send(t.ProxyKeyConst.Lobby_BindBankList,i),App.EasyLoading.showOnTimeOut(),Log.trace("获取已绑定的银行卡列表")},i.prototype.bindBankCardListAck=function(t){Log.trace("获取已绑定的银行卡列表返回",t),JSON.stringify(this.model.getBankCardList())!=JSON.stringify(t.list)&&(this.model.saveBankCardList(t.list),App.MessageCenter.dispatch("bindBankCardListAck",t)),App.EasyLoading.hideLoading()},i.prototype.bindBankCardReq=function(e){var i={};i=1==e.type?{token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type,cardholder:e.cardholder,bankname:e.bankname,cardno:e.cardno}:{token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type,cardholder:e.cardholder,cardno:e.cardno},this.model.setExchangeType(e.type),this.send(t.ProxyKeyConst.Lobby_BindBankCard,i),App.EasyLoading.showOnTimeOut(),Log.trace("绑定银行卡请求",i)},i.prototype.bindBankCardAck=function(t){App.MessageCenter.dispatch("bindBankCardAck",t);var e=this.model.getExchangeType();1==e?App.PromTipsView.show("你已成功绑定该银行卡"):App.PromTipsView.show("你已成功绑定该支付宝账号"),App.EasyLoading.hideLoading()},i.prototype.unBindBankCardReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type,bankid:e.bankid};this.model.setExchangeType(e.type),this.send(t.ProxyKeyConst.Lobby_UnBindBankCard,i),App.EasyLoading.showOnTimeOut(),Log.trace("解除绑定银行卡请求",i)},i.prototype.unbindBankCardAck=function(t){var e=this.model.getCurrIndex();App.MessageCenter.dispatch("unbindBankCardAck",e);var i=this.model.getExchangeType();1==i?App.PromTipsView.show("你已成功解除绑定该银行卡"):App.PromTipsView.show("你已成功解除绑定该支付宝账号"),App.EasyLoading.hideLoading()},i.prototype.exchangeReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),money:e.money,bankid:e.bankid};this.send(t.ProxyKeyConst.Lobby_Exchange,i),App.EasyLoading.showOnTimeOut(),Log.trace("兑换请求",i)},i.prototype.exchangeAck=function(t){Log.trace("兑换返回",t),GamePlayerMgr.i.getPlayer().setMoney(t.balance),App.PromTipsView.show("兑换请求已发起成功，请耐心等待到账"),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_Exchange_Back,this.exchangeAck,this),this.addListener(t.ProxyKeyConst.Lobby_BindBankList_Back,this.bindBankCardListAck,this),this.addListener(t.ProxyKeyConst.Lobby_BindBankCard_Back,this.bindBankCardAck,this),this.addListener(t.ProxyKeyConst.Lobby_UnBindBankCard_Back,this.unbindBankCardAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_Exchange_Back,this.exchangeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_BindBankList_Back,this.bindBankCardListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_BindBankCard_Back,this.bindBankCardAck,this),this.removeListener(t.ProxyKeyConst.Lobby_UnBindBankCard_Back,this.unbindBankCardAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.ExchangeProxy=e,__reflect(e.prototype,"lobby.ExchangeProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onLoginBack=function(t){Log.trace("LobbyProxy onLoginBack:1111",t),this.applyFunc("refreshView")},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(GameConsEvent.Game_Player_LoginWeb_Success,this.onLoginBack,this),this.addListener(t.ProxyKeyConst.ScWorldAgentBackgroundResType,this.onGetAgentUrlBack,this)},i.prototype.removeEvent=function(){this.removeMsgEventAll(this)},i.prototype.onGetAgentUrlBack=function(t){Log.info(t.agent_url),App.EasyLoading.hideLoading(),R.openUrlInside(t.agent_url)},i.prototype.sendGetAgentUrl=function(){var e=GamePlayerMgr.i.getPlayer(),i={token:e.getToken()};this.send(t.ProxyKeyConst.CsWorldAgentBackgroundReqType,i),App.EasyLoading.showOnTimeOut()},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.LobbyProxy=e,__reflect(e.prototype,"lobby.LobbyProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.loginWeb=function(t){},i.prototype.onLoginWebBack=function(e){var i=GamePlayerMgr.i.getPlayer();Log.trace("登录Web返回");var o={login_type:1,token:i.getToken(),uid:i.getUserId(),channel:1};this.send(t.ProxyKeyConst.Lobby_LoginLobby,o)},i.prototype.onLoginLobbyBack=function(t){Log.trace("LobbyProxy onLoginWebBack:",t),App.EasyLoading.hideLoading(),App.SceneManager.runScene(SceneConsts.Lobby)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.onResetLoginPassword=function(e){var i={loginame:e.loginame,password:e.password,captcha:e.captcha};this.send(t.ProxyKeyConst.Lobby_ResetLoginPassword,i),App.EasyLoading.showOnTimeOut()},i.prototype.onResetLoginPasswordAck=function(t){PromTipsView.getInstance().show("修改密码成功"),App.EasyLoading.hideLoading()},i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.LoginProxy=e,__reflect(e.prototype,"lobby.LoginProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.messageListReq=function(e,i){Log.trace("列表请求");var o={token:e.token,nowpage:e.nowpage};1==i?this.send(t.ProxyKeyConst.Lobby_MailList,o):2==i&&this.send(t.ProxyKeyConst.Lobby_NoticeList,o),App.EasyLoading.showOnTimeOutDealy()},i.prototype.onNoticeListAck=function(t){if(!App.isWebDecorate){var e=t;App.MessageCenter.dispatch("OnNoticeListReqBack",e),App.EasyLoading.hideLoading()}},i.prototype.onMailListAck=function(t){if(!App.isWebDecorate){var e=t;App.MessageCenter.dispatch("onMailListAck",e),App.EasyLoading.hideLoading()}},i.prototype.singleMessageReq=function(e,i){var o={token:e.token,id:e.id};1==i?this.send(t.ProxyKeyConst.Lobby_SingleMail,o):2==i&&this.send(t.ProxyKeyConst.Lobby_SingleNotice,o),App.EasyLoading.showOnTimeOut()},i.prototype.onSingleNoticeAck=function(t){App.isWebDecorate||(this.model.setData(t.id,t,2),App.MessageCenter.dispatch("onSingleNoticeReqBack",t),App.EasyLoading.hideLoading())},i.prototype.onSingleMailAck=function(t){App.isWebDecorate||(this.model.setData(t.id,t,1),App.MessageCenter.dispatch("onSingleMailAck",t),App.EasyLoading.hideLoading())},i.prototype.onDeleteMessageReq=function(e,i){Log.trace("删除单条公告请求");var o={token:e.token,id:e.id};1==i?this.send(t.ProxyKeyConst.Lobby_DeleteSingleMail,o):2==i&&this.send(t.ProxyKeyConst.Lobby_DeleteSingleNotice,o),App.EasyLoading.showOnTimeOut()},i.prototype.onDeleteNoticeAck=function(t){App.isWebDecorate||(Log.trace("onDeleteNoticeAck:",t),App.MessageCenter.dispatch("onDeleteNoticeAck",t),App.EasyLoading.hideLoading())},i.prototype.onDeleteMailAck=function(t){App.isWebDecorate||(Log.trace("onDeleteMailAck:",t),App.MessageCenter.dispatch("onDeleteMailAck",t),App.EasyLoading.hideLoading())},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_NoticeList_Back,this.onNoticeListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleNotice_Back,this.onSingleNoticeAck,this),this.addListener(t.ProxyKeyConst.Lobby_DeleteSingleNotice_Back,this.onDeleteNoticeAck,this),this.addListener(t.ProxyKeyConst.Lobby_MailList_Back,this.onMailListAck,this),this.addListener(t.ProxyKeyConst.Lobby_SingleMail_Back,this.onSingleMailAck,this),this.addListener(t.ProxyKeyConst.Lobby_DeleteSingleMail_Back,this.onDeleteMailAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_NoticeList_Back,this.onNoticeListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleNotice_Back,this.onSingleNoticeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_DeleteSingleNotice_Back,this.onDeleteNoticeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_MailList_Back,this.onMailListAck,this),this.removeListener(t.ProxyKeyConst.Lobby_SingleMail_Back,this.onSingleMailAck,this),this.removeListener(t.ProxyKeyConst.Lobby_DeleteSingleMail_Back,this.onDeleteMailAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.MessageProxy=e,__reflect(e.prototype,"lobby.MessageProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.rechargeTypeReq=function(){var e={token:GamePlayerMgr.i.getPlayer().getToken()};this.send(t.ProxyKeyConst.Lobby_RechargeType,e),App.EasyLoading.showOnTimeOut(),Log.trace("充值类型请求")},i.prototype.rechargeTypeAck=function(t){App.isWebDecorate||(Log.trace("rechargeTypeAck",t),this.model.savePayTypeList(t.pay_types),App.MessageCenter.dispatch("rechargeTypeAck",t.pay_types),App.EasyLoading.hideLoading())},i.prototype.rechargeMoneyReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),pay_channel:e.pay_channel,money:e.money,bank_code:e.bank_code,pay_type:e.pay_type};Log.trace("rechargeMoneyReq",i),this.send(t.ProxyKeyConst.Lobby_RechargeMoney,i),App.EasyLoading.showOnTimeOut()},i.prototype.rechargeMoneyAck=function(t){App.isWebDecorate||(App.EasyLoading.hideLoading(),Log.trace("rechargeMoneyAck",t.payurl),R.openRechargeUrlInside(t.payurl))},i.prototype.rechargeRecodReq=function(e){var i={token:GamePlayerMgr.i.getPlayer().getToken(),type:e.type};this.send(t.ProxyKeyConst.Lobby_RechargeRecord,i),App.EasyLoading.showOnTimeOut(),Log.trace("充值记录请求")},i.prototype.rechargeRecodAck=function(t){App.isWebDecorate||(Log.trace("充值记录返回",t),App.MessageCenter.dispatch("rechargeRecodAck",t),App.EasyLoading.hideLoading())},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.addListener(t.ProxyKeyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.addListener(t.ProxyKeyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_RechargeType_Back,this.rechargeTypeAck,this),this.removeListener(t.ProxyKeyConst.Lobby_RechargeMoney_Back,this.rechargeMoneyAck,this),this.removeListener(t.ProxyKeyConst.Lobby_RechargeRecord_Back,this.rechargeRecodAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.RechargeProxy=e,__reflect(e.prototype,"lobby.RechargeProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_ShowRedEnvelope_Back,this.showRedEnvelopeBack,this),this.addListener(t.ProxyKeyConst.Lobby_FastGrabRedEnvelope_Back,this.fastGrabBack,this),this.addListener(t.ProxyKeyConst.Lobby_LayMine_Back,this.layMineBack,this),this.addListener(t.ProxyKeyConst.Lobby_GrabRedEnvelope_Back,this.grabRedEnvelopeBack,this),this.addListener(t.ProxyKeyConst.Lobby_RedEnvelopeIncome_Back,this.incomeBack,this),this.addListener(t.ProxyKeyConst.Lobby_RecvIncome_Back,this.recvIncomeBack,this),this.addListener(t.ProxyKeyConst.Lobby_SeeDetails_Back,this.seeDetailsBack,this),this.addListener(t.ProxyKeyConst.Lobby_NewRedEnvelopeNotify,this.newRedEnvelopeNotify,this),this.addListener(t.ProxyKeyConst.Lobby_ExpiredRedEnvelopeNotify,this.expiredRedEnvelopeNotify,this)
},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_ShowRedEnvelope_Back,this.showRedEnvelopeBack,this),this.removeListener(t.ProxyKeyConst.Lobby_FastGrabRedEnvelope_Back,this.fastGrabBack,this),this.removeListener(t.ProxyKeyConst.Lobby_LayMine_Back,this.layMineBack,this),this.removeListener(t.ProxyKeyConst.Lobby_GrabRedEnvelope_Back,this.grabRedEnvelopeBack,this),this.removeListener(t.ProxyKeyConst.Lobby_RedEnvelopeIncome_Back,this.incomeBack,this),this.removeListener(t.ProxyKeyConst.Lobby_RecvIncome_Back,this.recvIncomeBack,this),this.removeListener(t.ProxyKeyConst.Lobby_SeeDetails_Back,this.seeDetailsBack,this),this.removeListener(t.ProxyKeyConst.Lobby_NewRedEnvelopeNotify,this.newRedEnvelopeNotify,this),this.removeListener(t.ProxyKeyConst.Lobby_ExpiredRedEnvelopeNotify,this.expiredRedEnvelopeNotify,this)},i.prototype.showRedEnvelopeBack=function(e){Log.trace("红包列表返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(t.RedPacketConst.showRedEnvelopeBack,e)},i.prototype.fastGrabBack=function(){App.EasyLoading.hideLoading()},i.prototype.layMineBack=function(e){Log.trace("埋雷返回",e.errcode),App.MessageCenter.dispatch(t.RedPacketConst.layMineBack,e),R.sendPlayerAction("HBsent_seccess"),App.EasyLoading.hideLoading()},i.prototype.grabRedEnvelopeBack=function(e){Log.trace("抢红包返回",e),App.isInGame?R.sendPlayerAction("HBgrab_ingame"):R.sendPlayerAction("HBgrab_HB"),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(t.RedPacketConst.grabRedEnvelopeBack,e),e.hit&&R.sendPlayerAction("HBgrab_boom")},i.prototype.incomeBack=function(e){Log.trace("收益返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(t.RedPacketConst.redEnvelopeIncomeBack,e)},i.prototype.recvIncomeBack=function(e){Log.trace("领取收益返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(t.RedPacketConst.recvIncomeBack,e)},i.prototype.seeDetailsBack=function(e){Log.trace("查看详情返回",e),App.EasyLoading.hideLoading(),App.MessageCenter.dispatch(t.RedPacketConst.seeDetailsBack,e)},i.prototype.newRedEnvelopeNotify=function(e){App.MessageCenter.dispatch(t.RedPacketConst.newRedEnvelopeNotity,e)},i.prototype.expiredRedEnvelopeNotify=function(e){App.MessageCenter.dispatch(t.RedPacketConst.expiredRedEnvelopeNotify,e)},i.prototype.sendFastGrapReq=function(e){App.EasyLoading.showOnTimeOutDealy();var i=GamePlayerMgr.i.getPlayer().getUserId();Log.trace("请求设置快捷抢红包",i,",yes:",e);var o={uid:i,yes:e};this.send(t.ProxyKeyConst.Lobby_FastGrabRedEnvelope,o),e&&R.sendPlayerAction("HBgrab_fast")},i.prototype.sendShowEnvelopeReq=function(e){App.EasyLoading.showOnTimeOutDealy();var i=GamePlayerMgr.i.getPlayer().getUserId();Log.trace("请求红包列表"+i,",yes:",e);var o={uid:i,yes:e};this.send(t.ProxyKeyConst.Lobby_ShowRedEnvelope,o)},i.prototype.sendLayMineReq=function(e,i,o){App.EasyLoading.showOnTimeOutDealy(),Log.trace("埋雷请求typeNum:",e[0]+",amount=",e[1],",layNum=",e[2]);var n={type:e[0],amount:e[1],mine_number:e[2]};this.send(t.ProxyKeyConst.Lobby_LayMine,n),1001==n.type?R.sendPlayerAction("HBsent_10"):715==n.type?R.sendPlayerAction("HBsent_7"):52==n.type&&R.sendPlayerAction("HBsent_5")},i.prototype.sendGrabRedEnvelopeReq=function(e){App.EasyLoading.showOnTimeOutDealy();var i=GamePlayerMgr.i.getPlayer().getUserId(),o={uid:i,id:e};this.send(t.ProxyKeyConst.Lobby_GrabRedEnvelope,o),Log.trace("抢红包请求")},i.prototype.sendIncomeReq=function(){App.EasyLoading.showOnTimeOutDealy();var e=GamePlayerMgr.i.getPlayer().getUserId(),i={uid:e};this.send(t.ProxyKeyConst.Lobby_RedEnvelopeIncome,i),Log.trace("显示收益请求")},i.prototype.sendRecvIncomeReq=function(){App.EasyLoading.showOnTimeOutDealy();var e=GamePlayerMgr.i.getPlayer().getUserId(),i={uid:e};this.send(t.ProxyKeyConst.Lobby_RecvIncome,i),Log.trace("领取收益请求")},i.prototype.sendSeeDetailsReq=function(e){App.EasyLoading.showOnTimeOutDealy();var i=GamePlayerMgr.i.getPlayer().getUserId(),o={uid:i,id:e};this.send(t.ProxyKeyConst.Lobby_SeeDetails,o),Log.trace("查看红包详情请求")},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.RedPacketProxy=e,__reflect(e.prototype,"lobby.RedPacketProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.onRegister=function(e){Log.trace("请求注册");var i={token:GamePlayerMgr.i.getPlayer().getToken(),loginame:e.loginame,password:e.password,regtype:e.registerType,captcha:e.captcha};this.send(t.ProxyKeyConst.Lobby_RegisterAccount,i),App.EasyLoading.showOnTimeOut()},i.prototype.onRegisterBack=function(t){Log.trace("SettingProxy onRegisterBack:",t),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("注册成功")},i.prototype.onResetLoginPassword=function(e){var i;i=GamePlayerMgr.i.getPlayer().getIsRegistBytel()?{token:e.token,loginame:e.loginame,new_pwd:e.password,captcha:e.captcha}:{token:e.token,loginame:e.loginame,new_pwd:e.newpassword,old_pwd:e.oldpassword},this.send(t.ProxyKeyConst.Lobby_ResetLoginPassword,i),App.EasyLoading.showOnTimeOut()},i.prototype.onResetLoginPasswordAck=function(t){PromTipsView.getInstance().show("修改密码成功"),App.MessageCenter.dispatch("onResetLoginPasswordAck"),App.EasyLoading.hideLoading()},i.prototype.onWebLogOut=function(e){var i={usertype:e.usertype,loginame_or_deviceid:e.loginame_or_deviceid,uid:e.uid,token:e.token};this.send(t.ProxyKeyConst.Lobby_webLogOut,i),App.EasyLoading.showOnTimeOut()},i.prototype.onWebLogOutAck=function(t){Log.trace("退出登录"),App.MessageCenter.dispatch("onWebLogOutAck"),App.EasyLoading.hideLoading()},i.prototype.onResetMoneyPwd=function(e){Log.trace("请求设置资金密码");var i;i=GamePlayerMgr.i.getPlayer().getIsRegistBytel()?{token:e.token,type:2,new_pwd:e.new_pwd,captcha:e.captcha}:{token:e.token,type:2,new_pwd:e.new_pwd,old_pwd:e.old_pwd},this.send(t.ProxyKeyConst.Lobby_ResetMoneyPwd,i),App.EasyLoading.showOnTimeOut()},i.prototype.onResetMoneyPwdAck=function(){Log.trace("设置资金密码返回"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置资金密码成功"),App.MessageCenter.dispatch("onResetMoneyPwdAck"),GamePlayerMgr.i.getPlayer().setIsPwdSeted(!0)},i.prototype.onGetCaptcha=function(e){Log.trace("获取验证码");var i;i=e?{token:GamePlayerMgr.i.getPlayer().getToken(),phone_no:e.phone_no}:{token:GamePlayerMgr.i.getPlayer().getToken()},this.send(t.ProxyKeyConst.Lobby_GetCaptcha,i),App.EasyLoading.showOnTimeOut(3e4)},i.prototype.onGetCaptchaAck=function(){Log.trace("获取验证码返回"),PromTipsView.getInstance().show("验证码已发送到账号绑定的手机号上,请注意查收"),App.EasyLoading.hideLoading()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_Lobby_RegisterAccount_Back,this.onRegisterBack,this),this.addListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this),this.addListener(t.ProxyKeyConst.Lobby_webLogOut_Back,this.onWebLogOutAck,this),this.addListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onResetMoneyPwdAck,this),this.addListener(t.ProxyKeyConst.Lobby_GetCaptcha_Back,this.onGetCaptchaAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_Lobby_RegisterAccount_Back,this.onRegisterBack,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetLoginPassword_Back,this.onResetLoginPasswordAck,this),this.removeListener(t.ProxyKeyConst.Lobby_webLogOut_Back,this.onWebLogOutAck,this),this.removeListener(t.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,this.onResetMoneyPwdAck,this),this.removeListener(t.ProxyKeyConst.Lobby_GetCaptcha_Back,this.onGetCaptchaAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.SettingProxy=e,__reflect(e.prototype,"lobby.SettingProxy")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(t,i){return e.call(this,t,i)||this}return __extends(i,e),i.prototype.roleSetting=function(e){this.send(t.ProxyKeyConst.Lobby_roleSetting,e),App.EasyLoading.showOnTimeOut()},i.prototype.roleSettingAck=function(t){App.MessageCenter.dispatch("roleSettingAck"),App.EasyLoading.hideLoading(),PromTipsView.getInstance().show("设置成功")},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.addEvent=function(){this.addListener(t.ProxyKeyConst.Lobby_roleSetting_Back,this.roleSettingAck,this)},i.prototype.removeEvent=function(){this.removeListener(t.ProxyKeyConst.Lobby_roleSetting_Back,this.roleSettingAck,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(BaseProxy);t.UserInfoProxy=e,__reflect(e.prototype,"lobby.UserInfoProxy")}(lobby||(lobby={}));var BaseParticleObj=function(t){function e(){var e=t.call(this)||this;return e._mIsLoaded=!1,e._mDestroy=!1,e._mChashList={},e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.prototype.init=function(t){this.changeParticle(t)},e.prototype.changeParticle=function(t){this._mIsLoaded=!1,this.rest(),this.checkLoad(t)},e.prototype.rest=function(){var t=this._mCurrParticle;t&&(t.stop(!0),R.removeFromParent(t),t.removeEventListener(egret.Event.COMPLETE,this.onComplete,this)),this._mSetPlayDuration=void 0,this._mSetPlayTexture=void 0,this._mCurrParticle=void 0},e.prototype.checkLoad=function(t){var e=RES.getRes(t+"_png"),i=RES.getRes(t+"_json");if(e&&i)this.initParticle(t);else{var o="particle$$"+t;App.ResourceUtils.createGroup(o,[t+"_json",t+"_png"]),App.ResourceUtils.loadGroup(o,this.loaded,this.loadPress,this)}},e.prototype.loaded=function(t){var e=t.split("$$")[1];Log.log("particle_ loaded ",e),this.initParticle(e),this.onLoadComplete(e)},e.prototype.loadPress=function(t,e){Log.log("particle_ loadPress: ",t,e)},e.prototype.initParticle=function(t){this._mIsLoaded=!0;var e=this.getParticleByName(t);e.start(this._mSetPlayDuration?this._mSetPlayDuration:e.m_duration),this._mSetPlayTexture&&e.changeTexture(this._mSetPlayTexture),this.addChild(e),this._mCurrParticle=e,e.hasEventListener(egret.Event.COMPLETE)||e.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},e.prototype.getParticleByName=function(t){var e=this._mChashList[t];if(!e){var i=RES.getRes(t+"_png"),o=RES.getRes(t+"_json");e=new particle.GravityParticleSystem(i,o),e.m_duration=o.duration,this._mChashList[t]=e}return e},e.prototype.onLoadComplete=function(t){Log.log("---------------- 粒子 "+t+" 资源加载完成 可用于子类继承 ----------------")},e.prototype.onComplete=function(){Log.log("---------------- 粒子播放完成 可用于子类继承 ----------------")},e.prototype.play=function(t){this._mCurrParticle?this._mCurrParticle.start(t?t:this._mCurrParticle.m_duration):this._mSetPlayDuration=t},e.prototype.setCurrentParticles=function(t){this._mCurrParticle&&this._mCurrParticle.setCurrentParticles(t)},e.prototype.changeTexture=function(t){this._mCurrParticle?this._mCurrParticle.changeTexture(t):this._mSetPlayTexture=t},e.prototype.stop=function(t){this._mCurrParticle&&this._mCurrParticle.stop(!0)},e.prototype.destroy=function(){if(!this._mDestroy){this._mDestroy=!0,R.removeFromParent(this),this.removeChildren();var t=this._mChashList;for(var e in t){var i=t[e];i.stop(!0),i.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),i.texture=void 0,delete t[e]}this._mChashList=void 0,this._mCurrParticle=void 0}},e}(egret.DisplayObjectContainer);__reflect(BaseParticleObj.prototype,"BaseParticleObj");var ddz;!function(t){var e=function(){function t(){}return t.METHOD={ENTER_GAME:"1001",BACK_GAME:"1002"},t}();t.RoomConst=e,__reflect(e.prototype,"ddz.RoomConst")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._view=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._view=new t.RoomView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.RoomConst.METHOD.BACK_GAME,this.onBack2Lobby,this),this.registerFunc(t.RoomConst.METHOD.ENTER_GAME,this.onEnterGame,this)},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("ddz"),i={sceneType:e.mArrGameType[t]};this.goEnterGame(i)},i.prototype.addListeners=function(){},i.prototype.removeListeners=function(){},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"ddz.RoomController")}(ddz||(ddz={}));var ddz;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"ddz.RoomModel")}(ddz||(ddz={}));var ddz;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Bg,"ddz","Room")||this}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this),this.Heip.initUI();for(var t=0;2>=t;t++)this["GroupType"+t].name="GroupType_"+t;this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_ddz_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this.initBroadcast(this)},i.prototype.onBackRoom=function(){this.applyFunc(t.RoomConst.METHOD.BACK_GAME)},i.prototype.onEnterGame=function(e){var i=e.currentTarget,o=i.name.split("_")[1];this.applyFunc(t.RoomConst.METHOD.ENTER_GAME,parseInt(o))},i.prototype.showHelp=function(){this.Heip.showPopup()},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.CommonUtils.effectButton(this.BtnReturn,this.onBackRoom,this),App.CommonUtils.effectButton(this.BtnHelp,this.showHelp,this);for(var t=0;2>=t;t++)App.CommonUtils.effectButton(this["GroupType"+t],this.onEnterGame,this,{})},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.BtnHelp);for(var t=0;2>=t;t++)App.CommonUtils.removeButton(this["GroupType"+t])},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mPartEffect&&(this._mPartEffect.destroy(),this._mPartEffect=void 0)},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"ddz.RoomView")}(ddz||(ddz={}));var fishjoy;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"fishjoy.EffectBones")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.ProxyKeyConst=e,__reflect(e.prototype,"fishjoy.ProxyKeyConst")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e;!function(t){t[t.Base=1100]="Base"}(e=t.RViewsConst||(t.RViewsConst={}))}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,t._helpView=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewsConst.Base),this.updateTxt()},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._proxy=new t.RoomProxy(this,this.getModel()),this._view=new t.RoomView(this),this._helpView=new t.HelpView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewsConst.Base,this._view),App.ViewManager.register(t.ViewsConst.help,this._helpView),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this),this.registerFunc("onHelpClick",this.showHelp,this)},i.prototype.showHelp=function(){App.ViewManager.open(t.ViewsConst.help)},i.prototype.updateTxt=function(){var t=this.player;this._view.updateMoney(t.getMoney())},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("fishjoy"),i={sceneType:e.mArrGameType[t]};this.goEnterGame(i)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"fishjoy.RoomController")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"fishjoy.RoomModel")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.RoomProxy);t.RoomProxy=e,__reflect(e.prototype,"fishjoy.RoomProxy")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){return e.call(this,t,LayerManager.Game_Main,"fishjoy","helpSkin")||this}return __extends(i,e),i.prototype.initUI=function(){},i.prototype.addEvent=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_END,this.closeHandle,this)},i.prototype.removeEvent=function(){this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_END,this.closeHandle,this)},i.prototype.closeHandle=function(e){App.ViewManager.close(t.ViewsConst.help)},i.prototype.close=function(){this.visible=!1},i}(base.GameView);t.HelpView=e,__reflect(e.prototype,"fishjoy.HelpView")}(fishjoy||(fishjoy={}));var fishjoy;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"fishjoy","RoomChooseSkin")||this;return i._mCount=0,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);for(var i=0;2>=i;i++)this["btnEnter"+i].name="btnEnter_"+i;this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_fish_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this._mPartEffect.x=-100,this._mPartEffect.y=-40,this.initBroadcast(this),t.SoundUtils.playHallBGM()},i.prototype.onPay=function(){},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},i.prototype.onEnterGame=function(e){t.SoundUtils.playEnterSound();var i=e.split("_")[1];this.applyFunc("onEnterGame",parseInt(i))},i.prototype.updateMoney=function(t){this.uMoneyTxt.text=App.CommonUtils.money2Str(t)},i.prototype.onHelp=function(){this.applyFunc("onHelpClick"),Log.log("fish room help")},i.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtn(this.btnBackLobby,this.onBackRoom,this),App.EffectUtils.addEffectBtn(this.btnHelp,this.onHelp,this);for(var t=0;2>=t;t++)App.EffectUtils.addEffectBtn(this["btnEnter"+t],this.onEnterGame,this,this["btnEnter"+t].name,!0,.95,.95)},i.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.btnBackLobby),App.EffectUtils.removeEffectBtn(this.btnHelp);for(var t=0;2>=t;t++)App.EffectUtils.removeEffectBtn(this["btnEnter"+t])},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._mPartEffect&&this._mPartEffect.destroy(),this._mPartEffect=void 0},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"fishjoy.RoomView")}(fishjoy||(fishjoy={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mSpeed=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.initPlayedEndCallBack=function(t,e){this._mCallBack=t,this._mThisobj=e},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.setPosition=function(t,i){this.x=t,this.y=i,this.armature.play(e.Animation,1)},e.prototype.play=function(t){void 0===t&&(t=1),this._mSpeed=t,this.armature.play(e.Animation,999999,t),App.TimerManager.doFrame(1,99999,this.update,this)},e.prototype.update=function(t){this.x+=t/16*3*this._mSpeed,this.x>=App.StageUtils.getWidth()&&(this.x=0,this.armature.stop(),App.TimerManager.removeAll(this))},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.armaturePlayEnd=function(t){t.animationName==e.AnimationDead&&this._mCallBack&&this._mCallBack.call(this._mThisobj)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mCallBack=void 0,this._mThisobj=void 0,this.armature=void 0},e.Animation="move",e.AnimationDead="dead",e._mActionList=[e.Animation,e.AnimationDead],e}(base.BaseGameObject);t.EffectBones=e,__reflect(e.prototype,"qznn.EffectBones")}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t.List=1311,t}();t.RProxyKeyConst=e,__reflect(e.prototype,"qznn.RProxyKeyConst")}(qznn||(qznn={}));var qznn;!function(t){var e;!function(t){t[t.Base=500]="Base"}(e=t.RViewConst||(t.RViewConst={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._proxy=null,t._view=null,Log.trace("RoomController init()"),t}return __extends(i,e),i.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base)},i.prototype.inits=function(){this._model=new t.RoomModel(this),this._proxy=new t.RoomProxy(this,this.getModel()),this._view=new t.RoomView(this)},i.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc("onClickBackRoom",this.onBack2Lobby,this),this.registerFunc("onEnterGame",this.onEnterGame,this)},i.prototype.onBack2Lobby=function(){this.goBack2Lobby()},i.prototype.onEnterGame=function(t){var e={sceneType:t};this.goEnterGame(e)},i.prototype.addListeners=function(){this._proxy.addEvent()},i.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){e.prototype.destroy.call(this),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},i}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"qznn.RoomController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"qznn.RoomModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(base.RoomProxy);t.RoomProxy=e,__reflect(e.prototype,"qznn.RoomProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function i(t){var i=e.call(this,t,LayerManager.Game_Bg,"qznn","QznnRoomSkin")||this;return i._mCount=0,i}return __extends(i,e),i.prototype.initUI=function(){e.prototype.initUI.call(this);for(var i=0;2>=i;i++)this["btnEnter"+i].name="btnEnter_"+i;this._mEffectBones=new t.EffectBones,this.addChild(this._mEffectBones),this._mEffectBones.updateId("fish_4008"),this._mEffectBones.setPosition(0,200),this._mEffectBones2=new t.EffectBones,this.addChild(this._mEffectBones2),this._mEffectBones2.updateId("fish_4008"),this._mEffectBones2.setPosition(0,500)},i.prototype.onPay=function(){this._mEffectBones.play(++this._mCount%3+1),this._mEffectBones2.play()},i.prototype.onBackRoom=function(){this.applyFunc("onClickBackRoom")},i.prototype.onEnterGame=function(t){var e=t.currentTarget.name.split("_")[1];this.applyFunc("onEnterGame",parseInt(e))},i.prototype.addEvent=function(){this.btnPay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPay,this),this.btnBackLobby.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this);for(var t=0;2>=t;t++)this["btnEnter"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},i.prototype.removeEvent=function(){this.btnPay.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onPay,this),this.btnBackLobby.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackRoom,this);for(var t=0;2>=t;t++)this["btnEnter"+t].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterGame,this)},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"qznn.RoomView")}(qznn||(qznn={}));var DeskScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Desk)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),App.ControllerManager.unregister(ControllerConst.Desk),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},e}(BaseScene);__reflect(DeskScene.prototype,"DeskScene");var GameScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Game)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.SoundManager.stopAll(),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),GameModuleMgr.i.exitGame()},e}(BaseScene);__reflect(GameScene.prototype,"GameScene");var LayerManager=function(){function t(){}return t.Game_Bg=new BaseEuiLayer,t.Game_Main=new BaseEuiLayer,t.UI_Main=new BaseEuiLayer,t.UI_Popup=new BaseEuiLayer,t.UI_Message=new BaseEuiLayer,t.UI_Tips=new BaseEuiLayer,t}();__reflect(LayerManager.prototype,"LayerManager");var LoadingScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.initModule()},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Loading)},e.prototype.initModule=function(){App.ControllerManager.register(ControllerConst.Loading,new LoadingController)},e}(BaseScene);__reflect(LoadingScene.prototype,"LoadingScene");var lobby;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(){e.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Lobby),this.initMoudle(),App.SoundManager.playBg("lobby_bg_mp3"),App.ViewManager.open(MainViewConst.Lobby,LayerManager.UI_Main)},i.prototype.initMoudle=function(){App.ControllerManager.register(ControllerConst.Lobby,new t.LobbyController),App.ControllerManager.register(t.LobbyControllerConst.UserInfo,new t.UserInfoController),App.ControllerManager.register(t.LobbyControllerConst.HeadImgSetting,new t.HeadImgSettingController),App.ControllerManager.register(t.LobbyControllerConst.Bank,new t.BankController),App.ControllerManager.register(t.LobbyControllerConst.Message,new t.MessageController),App.ControllerManager.register(t.LobbyControllerConst.Activity,new t.ActivityController),App.ControllerManager.register(t.LobbyControllerConst.Share,new t.ShareController),App.ControllerManager.register(t.LobbyControllerConst.Setting,new t.SettingController),App.ControllerManager.register(t.LobbyControllerConst.Exchange,new t.ExchangeController),App.ControllerManager.register(t.LobbyControllerConst.Recharge,new t.RechargeController),App.ControllerManager.register(t.LobbyControllerConst.redPacket,new t.RedPacketController),App.ControllerManager.register(t.LobbyControllerConst.Customer,new t.CustomerController)},i.prototype.onExit=function(){e.prototype.onExit.call(this),App.PromTipsView.hide(),App.ViewManager.destroyAll(),App.MouseUtils.removeMouseWheel(),App.ControllerManager.unregister(ControllerConst.Lobby),App.ControllerManager.unregister(t.LobbyControllerConst.UserInfo),App.ControllerManager.unregister(t.LobbyControllerConst.HeadImgSetting),App.ControllerManager.unregister(t.LobbyControllerConst.Bank),App.ControllerManager.unregister(t.LobbyControllerConst.Message),App.ControllerManager.unregister(t.LobbyControllerConst.Activity),App.ControllerManager.unregister(t.LobbyControllerConst.Share),App.ControllerManager.unregister(t.LobbyControllerConst.Setting),App.ControllerManager.unregister(t.LobbyControllerConst.Exchange),App.ControllerManager.unregister(t.LobbyControllerConst.Recharge),App.ControllerManager.unregister(t.LobbyControllerConst.redPacket),App.ControllerManager.unregister(t.LobbyControllerConst.Customer)},i}(BaseScene);t.LobbyScene=e,__reflect(e.prototype,"lobby.LobbyScene")}(lobby||(lobby={}));var lobby;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onEnter=function(i){e.prototype.onEnter.call(this),t.EntryOGamesView._smCurrscrollH=0,App.Socket.close(),App.isWebDecorate&&i&&!i.isWebClear&&web_socketClose(),App.ControllerManager.register(ControllerConst.Login,new t.LoginController(i))},i.prototype.onExit=function(){e.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Login)},i}(BaseScene);t.LoginScene=e,__reflect(e.prototype,"lobby.LoginScene")}(lobby||(lobby={}));var RoomScene=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),App.isWebDecorate&&web_enterScene(SceneConsts.Room)},e.prototype.onExit=function(){t.prototype.onExit.call(this),App.ViewManager.destroyAll(),App.ControllerManager.unregister(ControllerConst.Room),egret.Tween.removeAllTweens(),App.DragonBonesFactory.clear(),ScrollTxtTips.i.cleanAll()},e}(BaseScene);__reflect(RoomScene.prototype,"RoomScene");var PromSuperposeView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e._mPromList=[],e._mIsShow=!1,e.skinName="PromTipsSkin",e}return __extends(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.show=function(t,e,i,o,n,s){this._mPromList.push({str:t,funOnSure:e,funOnCancel:i,thisObj:o,isCancel:n,data:s}),this.parent||this.showTips()
},e.prototype.showTips=function(){var t=this._mPromList;if(!(t.length<=0||this._mIsShow)){this._mIsShow=!0;var e=t.shift();this._mData=e.data,this._thisObj=e.thisObj,this._funOnSure=e.funOnSure,this._funOnCancel=e.funOnCancel,this.txtTips.text=e.str,this.fixBtn(e.isCancel),this.addEvent(),this.addToParent()}},e.prototype.onSure=function(t){this._mIsShow&&(this._funOnSure&&this._funOnSure.call(this._thisObj,this._mData),this.hide())},e.prototype.onCancel=function(t){this._mIsShow&&(this._funOnCancel&&this._funOnCancel.call(this._thisObj,this._mData),this.hide())},e.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnSure,this.onSure,this),App.EffectUtils.addEffectBtn(this.btnCancel,this.onCancel,this)},e.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnSure),App.EffectUtils.removeEffectBtn(this.btnCancel)},e.prototype.hide=function(){if(this._mIsShow){if(this._mIsShow=!1,this._mPromList.length>0)return void R.setTimeOut(function(){this.showTips()}.bind(this),this,100);this.removeFromParent(),this.removeEvent(),this._funOnCancel=void 0,this._funOnSure=void 0,this._thisObj=void 0,this._mData=void 0}},e.prototype.hideAll=function(){for(;this._mPromList.length;){var t=this._mPromList.pop();for(var e in t)t[e]=void 0}this.hide()},e.prototype.fixBtn=function(t){var e=t?!0:!1;this.btnCancel.visible=e,e?(this.btnSure.horizontalCenter=void 0,this.btnSure.x=416):this.btnSure.horizontalCenter=0},e._instance=null,e}(BaseEuiView);__reflect(PromSuperposeView.prototype,"PromSuperposeView");var PromTipsView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="PromTipsSkin",e}return __extends(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.show=function(t,e,i,o,n){this._funOnSure=e,this._funOnCancel=i,this._thisObj=o,this.txtTips.text=t,this.fixBtn(n),this.addEvent(),this.addToParent(),this.scaleX=App.isScaleModeSpecial?App.fixUISX():1,App.EffectUtils.showView2(this.uView,300,0,0,this.scaleX,1)},e.prototype.onSure=function(t){this._funOnSure&&this._funOnSure.apply(this._thisObj),this.hide()},e.prototype.onCancel=function(t){this._funOnCancel&&this._funOnCancel.apply(this._thisObj),this.hide()},e.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnSure,this.onSure,this),App.EffectUtils.addEffectBtn(this.btnCancel,this.onCancel,this)},e.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnSure),App.EffectUtils.removeEffectBtn(this.btnCancel)},e.prototype.hide=function(){this.removeFromParent(),this.removeEvent(),this._funOnSure=void 0,this._funOnCancel=void 0,this._thisObj=void 0},e.prototype.fixBtn=function(t){var e=t?!0:!1;this.btnCancel.visible=e,e?(this.btnSure.horizontalCenter=void 0,this.btnSure.x=416):this.btnSure.horizontalCenter=0},e._instance=null,e}(BaseEuiView);__reflect(PromTipsView.prototype,"PromTipsView");var ToolView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="ToolViewSkin",e.init(),e}return __extends(e,t),e.i=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.init=function(){this.addEvent(),this.addToParent()},e.prototype.addEvent=function(){this.btnProfile.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},e.prototype.onTouchTap=function(t){t.currentTarget==this.btnProfile&&ProfileUtils.profile()},e._instance=null,e}(BaseEuiView);__reflect(ToolView.prototype,"ToolView");var ErrorTipsView=function(t){function e(){var e=t.call(this,null,LayerManager.UI_Tips)||this;return e.skinName="ErrorTipsSkin",e}return __extends(e,t),Object.defineProperty(e,"i",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this.txt.text=t,this.addEvent(),this.addToParent()},e.prototype.onCancel=function(t){this.hide()},e.prototype.addEvent=function(){App.EffectUtils.addEffectBtn(this.btnClose,this.onCancel,this)},e.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.btnClose)},e.prototype.hide=function(){this.removeFromParent(),this.removeEvent()},e._instance=null,e}(BaseEuiView);__reflect(ErrorTipsView.prototype,"ErrorTipsView");var EasyLoading=function(t){function e(){var e=t.call(this,null,null)||this;return e.skinName="EasyLoadingSkin",e.init(),e}return __extends(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.init=function(){this.initBone()},e.prototype.initBone=function(){var t=RES.getRes("easy_loading_ske_json"),e=RES.getRes("easy_loading_tex_json"),i=RES.getRes("easy_loading_tex_png"),o=dragonBones.EgretFactory.factory;o.parseDragonBonesData(t),o.parseTextureAtlasData(e,i),this._mAni=o.buildArmatureDisplay("Armature"),this.uPoint.addChild(this._mAni)},e.prototype.updateTxt=function(t){this.parent&&(this.txt.text=t)},e.prototype.txtVisible=function(t){void 0===t&&(t=!1),this.txt.visible=t},e.prototype.showReconnetTip=function(){var t=App.isInLoading||App.isInLogin?"":"正在重连中, 请稍等...";this.showLoading(t)},e.prototype.showOnTimeOutDealy=function(t,e,i,o,n){void 0===t&&(t=1200),void 0===e&&(e=1e4);var s=this;R.removeAllTimeOut(this),R.setTimeOutOnly(function(){s.showOnTimeOut(e,i,o,n)},this,t)},e.prototype.showOnTimeOut=function(t,e,i,o){void 0===t&&(t=1e4),this.showLoading(""),this._mCallBack=i,this._mThisObj=o,R.removeAllTimeOut(this),R.setTimeOut(this.onTimeOut.bind(this,e),this,t)},e.prototype.onTimeOut=function(t){App.PromTipsView.show(t?t:"请求超时！"),this.hideLoading(),this._mCallBack&&this._mCallBack.call(this._mThisObj)},e.prototype.showLoading=function(t){void 0===t&&(t=""),this.parent||(LayerManager.UI_Tips.addChild(this),this._mAni.animation.play("1",99999),this.updateTxt(t),this.txt.visible=!0)},e.prototype.hideLoading=function(){R.removeAllTimeOut(this),this.parent&&(LayerManager.UI_Tips.removeChild(this),this._mAni.animation.stop()),this._mCallBack=void 0,this._mThisObj=void 0},e._instance=null,e}(BaseEuiView);__reflect(EasyLoading.prototype,"EasyLoading");var ScrollTxtTips=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),Object.defineProperty(e,"i",{get:function(){return null==e._i&&(e._i=new e),e._i},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._mPool=[],this.touchEnabled=!1,this.touchChildren=!1},e.prototype.showTip=function(t){if(!(this.numChildren>=5)){var e=this._mPool.pop();e||(e=new ScrollTxt),e.setTxt(t),this.addChild(e),this.tween(e),this.parent||LayerManager.UI_Tips.addChild(this)}},e.prototype.cleanAll=function(){for(;this.numChildren;){var t=this.getChildAt(0);this.realese(t)}},e.prototype.tween=function(t){var e=t.y-60;egret.Tween.get(t).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut).wait(800).to({y:e,alpha:0},800,egret.Ease.backOut).call(this.realese,this,[t])},e.prototype.realese=function(t){egret.Tween.removeTweens(t),R.removeFromParent(t),this._mPool.push(t),this.numChildren<=0&&R.removeFromParent(this)},e._i=null,e}(eui.Component);__reflect(ScrollTxtTips.prototype,"ScrollTxtTips");var ScrollTxt=function(t){function e(){var e=t.call(this)||this;return e.skinName="ScrollTxtSkin",e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.setTxt=function(t){this.txt.text=t,this.scaleX=this.scaleY=this.alpha=0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=App.StageUtils.getWidth()/2,this.y=App.StageUtils.getHeight()/2,this.bg.width=Math.max(this.txt.textWidth+20,415)},e}(eui.Component);__reflect(ScrollTxt.prototype,"ScrollTxt");var ArrayUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.copy=function(t,e){var i=e;return e||(i=[]),i=i.concat(t)},e.prototype.equals=function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i=0,o=t.length;o>i;i++){var n=t[i],s=e[i];if(n instanceof Array&&s instanceof Array){if(!this.equals(n,s))return!1}else if(n!=s)return!1}return!0},e.prototype.removeOfArray=function(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)},e.prototype.sumOfArray=function(t){return t.reduce(function(t,e){return t+e})},e.prototype.stringOfArray=function(t){return t.join()},e}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var BitmapUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.bitmap2Base64=function(t){var e=t.texture.toDataURL("image/*"),i=e.indexOf(";base64,");return 20>i&&(e=e.slice(i+8)),Log.info("base64 len:",e.length),e},e.prototype.base642Bitmap=function(t,e){egret.BitmapData.create("base64",e,function(e){Log.info("base64 back data ");var i=new egret.Texture;i.bitmapData=e,t.texture=i})},e}(BaseClass);__reflect(BitmapUtils.prototype,"BitmapUtils");var ColorFilters=function(){function t(){}return Object.defineProperty(t,"FilterGray",{get:function(){return t._mFilterGray||(t._mFilterGray=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])),t._mFilterGray},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FilterGold",{get:function(){return t._mFilterGold||(t._mFilterGold=new egret.ColorMatrixFilter([1,0,0,0,200,0,1,0,0,200,0,0,1,0,22,0,0,0,1,0])),t._mFilterGold},enumerable:!0,configurable:!0}),t}();__reflect(ColorFilters.prototype,"ColorFilters");var CommonUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.money=function(t){return Math.floor(t/100)/100},e.prototype.moneyself=function(t){return Math.floor(100*t)/100},e.prototype.money2Str=function(t){var e=""+Math.floor(t/100)/100,i=e.lastIndexOf(".");return-1==i?e+=".00":i==e.length-2&&(e+="0"),e},e.prototype.money2StrTwo=function(t){return""+Math.floor(t/100)/100},e.prototype.moneyC2S=function(t){return 1e4*t},e.prototype.isOut=function(t,e){return 0>t||t>GameBase.GameWidth?!0:0>e||e>GameBase.GameHeight?!0:!1},e.prototype.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var i=Object.keys(t),o=0,n=i.length;n>o;o++){var s=i[o];e[s]=this.copyDataHandler(t[s])}return e},e.prototype.lock=function(){var t=StageUtils.getInstance().getStage();t.$children.forEach(function(t){t instanceof egret.DisplayObjectContainer&&(t.touchEnabled=t.touchChildren=!1)})},e.prototype.unlock=function(){var t=StageUtils.getInstance().getStage();t.$children.forEach(function(t){t instanceof egret.DisplayObjectContainer&&(t.touchEnabled=t.touchChildren=!0)})},e.prototype.labelIsOverLenght=function(t){var e="";return e=1e4>t?""+t:Math.floor(t/1e4)+"万"},e.prototype.int64ToNumber=function(t){return parseInt(t.toString())},e.prototype.getFileName=function(t){return t.substring(t.lastIndexOf("/")+1)},e.prototype.isNullOrUndefined=function(t){return!(t&&"null"!=t&&"undefined"!=t)},e.prototype.isJSON=function(t){try{if("object"==typeof JSON.parse(t))return!0}catch(e){}return!1},e.prototype.effectButton=function(t,e,i,o){EffectUtils.getInstance().addEffectBtn(t,e,i,o)},e.prototype.removeButton=function(t){EffectUtils.getInstance().removeEffectBtn(t)},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getFormatBySecond=function(t,e){return void 0===e&&(e=1),DateUt.getInstance().getFormatBySecond(t,e)},e}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var EffectUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.macIconShake=function(t,e){for(var i=[[20,300],[15,300],[10,300],[5,300]],o="egret.Tween.get("+t+")",n=0,s=i.length;s>n;n++)o+=".to({'y':"+e+"-"+i[n][0]+"}, "+i[n][1]+")",o+=".to({'y':"+e+"}, "+i[n][1]+")";return o+=";"},e.prototype.startFlicker=function(t,e){t.alpha=1,egret.Tween.get(t).to({alpha:0},e).to({alpha:1},e).call(this.startFlicker,this,[t,e])},e.prototype.stopFlicker=function(t){egret.Tween.removeTweens(t)},e.prototype.startHeartEffect=function(t,e){var i=t.s_scaleX=t.scaleX,o=t.s_scaleY=t.scaleY;egret.Tween.get(t,{loop:!0}).to({scaleX:.8*i,scaleY:.8*o},e).to({scaleX:i,scaleY:o},e)},e.prototype.stopHeartEffect=function(t){egret.Tween.removeTweens(t),t.scaleX=t.s_scaleX,t.scaleY=t.s_scaleY},e.prototype.showView=function(t,e,i,o,n,s){void 0===e&&(e=300),void 0===i&&(i=0),void 0===o&&(o=1),this.showView2(t,e,i,i,o,o,n,s)},e.prototype.hideView=function(t,e,i,o,n){void 0===o&&(o=200),void 0===n&&(n=0),egret.Tween.get(t).to({scaleX:n,scaleY:n},o,egret.Ease.backIn).call(function(){t.visible=!1,e&&e.call(i)})},e.prototype.showView2=function(t,e,i,o,n,s,r,a){void 0===e&&(e=300),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=1),void 0===s&&(s=1),t.visible=!0,t.scaleX=i,t.scaleY=o,egret.Tween.get(t).to({scaleX:n,scaleY:s},e,egret.Ease.backOut).call(function(){r&&r.call(a)})},e.prototype.showUI=function(t,e,i,o,n,s){void 0===e&&(e=300),void 0===i&&(i=0),void 0===o&&(o=1),this.showView(t,e,i,o,n,s)},e.prototype.hideUI=function(t,e,i,o,n){void 0===e&&(e=200),void 0===i&&(i=0),this.hideView(t,o,n,e,i)},e.prototype.addEffectBtn=function(t,e,i,o,n,s,r){function a(t){var e=t.currentTarget;e._touch_num_++,egret.Tween.get(e).to({scaleX:p*s,scaleY:c*r},50),n&&SoundManager.getInstance().playEffect("click_mp3")}function h(t){var n=t.currentTarget;n._touch_num_&&(n._touch_num_--,egret.Tween.get(n).to({scaleX:p,scaleY:c},50),o&&(o.localX=t.localX,o.localY=t.localY,o.stageX=t.stageX,o.stageY=t.stageY,o.currentTarget=n),e.call(i,o))}function l(t){var e=t.currentTarget;e._touch_num_&&(e._touch_num_--,egret.Tween.get(e).to({scaleX:p,scaleY:c},50))}if(void 0===n&&(n=!0),void 0===s&&(s=.9),void 0===r&&(r=.9),!t._callbcak_begin){t._sx_||(t._sx_=t.scaleX),t._sy_||(t._sy_=t.scaleY);var p=t._sx_,c=t._sy_;t._touch_num_=0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a,this),t.addEventListener(egret.TouchEvent.TOUCH_END,h,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,l,this),t._callbcak_begin=a,t._callbcak_end=h,t._callbcak_out=l}},e.prototype.addEffectBtnOut=function(t,e,i,o,n,s,r){void 0===n&&(n=!0),void 0===s&&(s=1.1),void 0===r&&(r=1.1),this.addEffectBtn(t,e,i,o,n,s,r)},e.prototype.hasBtnEffect=function(t){return!!t._callbcak_begin},e.prototype.removeEffectBtn=function(t,e,i){if(t._callbcak_begin){egret.Tween.removeTweens(t),t.scaleX=t._sx_,t.scaleY=t._sy_;var o=t._callbcak_begin,n=t._callbcak_end,s=t._callbcak_out;t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,o,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,n,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,s,this),t._callbcak_begin=void 0,t._callbcak_end=void 0,t._callbcak_out=void 0,t._sx_=void 0,t._sy_=void 0,delete t._callbcak_begin,delete t._callbcak_end,delete t._callbcak_out,delete t._sx_,delete t._sy_,delete t._touch_num_}},e}(BaseClass);__reflect(EffectUtils.prototype,"EffectUtils");var HitUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.circleHitRect=function(t,e,i,o){var n=Math.abs(t-o.x),s=Math.abs(e-o.y),r=o.width/2,a=o.height/2;return r>=n?!0:a>=s?!0:n>r+i?!1:s>a+i?!1:MathUtils.getInstance().getDistance(r,a,n,s)<=i},e.prototype.pointHitCircle=function(t,e,i,o,n){return MathUtils.getInstance().getDistance(t,e,i,o)<=n},e}(BaseClass);__reflect(HitUtils.prototype,"HitUtils");var MathUtils=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortMoreFun=function(t,e){return void 0===e&&(e=null),function(i,o){var n=0;e&&(n=e.length);var s;for(var r in t){var a=parseInt(r);if(s=parseInt(i[t[r]])-parseInt(o[t[r]]),0!=s)return n>a&&0==e[r]?s:-s}return 0}},e}return __extends(e,t),e.prototype.getAngle=function(t){return 180*t/Math.PI},e.prototype.getAngle2=function(t,e,i,o){return this.getAngle(this.getRadian2(t,e,i,o))},e.prototype.getAngle360=function(t){var e=this.getAngle(t);return 0>e&&(e+=360),e},e.prototype.getRadian=function(t){return t/180*Math.PI},e.prototype.getRadian2=function(t,e,i,o){var n=i-t,s=o-e;return Math.atan2(s,n)},e.prototype.getDistance=function(t,e,i,o){var n=i-t,s=o-e,r=n*n+s*s;return Math.sqrt(r)},e.prototype.getDistance2=function(t,e){var i=e.x-t.x,o=e.y-t.y,n=i*i+o*o;return Math.sqrt(n)},e.prototype.random=function(t,e){var i=Math.min(t,e),o=Math.max(t,e);return i+Math.random()*Math.abs(o-i)},e.prototype.randomInt=function(t,e){return Math.floor(this.random(t,e+1))},e.prototype.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},e}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var NetUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.URLEncode=function(t,e,i){if(void 0===i&&(i=!0),null==t)return"";var o=this.urlEncode(t,e,i);return o.slice(1)},e.prototype.urlEncode=function(t,e,i){var o="",n=typeof t;if("string"==n||"number"==n||"boolean"==n)o+="&"+e+"="+(i?encodeURIComponent(t):t);else for(var s in t){var r=null==e?s:e+(t instanceof Array?"["+s+"]":"."+s);o+=this.urlEncode(t[s],r,i)}return o},e.prototype.urlRootBack=function(t,e){var i=e,o=i.split("/");o.length<=1?o.unshift("."):o[0].length<=0?o[0]=".":o;var n=t,s=n.split("/");s=s.slice(0,s.length-o[0].length);var r=s.join("/")+"/"+o[1];return r},e}(BaseClass);__reflect(NetUtils.prototype,"NetUtils");var StringUtils=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.prototype.getStrLen=function(t){for(var e=t.split(""),i=0,o=0;o<e.length;o++){var n=e[o];i+=this.isChinese(n)?2:1}return i},e.prototype.isChinese=function(t){var e=/^.*[\u4E00-\u9FA5]+.*$/;return e.test(t)},e.prototype.rejectValue=function(t,i){var o=i?i:e.IllegalString,n=t.length-1,s=t.charAt(n);return o.lastIndexOf(s)>=0?t.substring(0,n):t},e.prototype.checkMobile=function(t){return/^1\d{10}$/.test(t)},e.prototype.checkEmail=function(t){return/^[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$/.test(t)},e.prototype.isNumber=function(t){return!isNaN(Number(t))},e.IllegalString="[%+-`~!#$^&*()=|{}':;',\\[\\].<>/?~！#￥……&*（）——|{}【】‘；：”“'。，、？]‘’",e}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var web;!function(t){function e(e,i,o){var n={token:t.game_getPlayer().getToken(),nowpage:e};t.send(lobby.ProxyKeyConst.Lobby_NoticeList,n,lobby.ProxyKeyConst.Lobby_NoticeList_Back,i,o)}function i(e,i,o){var n={token:t.game_getPlayer().getToken(),id:e};t.send(lobby.ProxyKeyConst.Lobby_SingleNotice,n,lobby.ProxyKeyConst.Lobby_SingleNotice_Back,i,o)}function o(e,i,o){var n={token:t.game_getPlayer().getToken(),id:e};t.send(lobby.ProxyKeyConst.Lobby_DeleteSingleNotice,n,lobby.ProxyKeyConst.Lobby_DeleteSingleNotice_Back,i,o)}function n(e,i,o){var n={token:t.game_getPlayer().getToken(),nowpage:e};t.send(lobby.ProxyKeyConst.Lobby_MailList,n,lobby.ProxyKeyConst.Lobby_MailList_Back,i,o)}function s(e,i,o){var n={token:t.game_getPlayer().getToken(),id:e};t.send(lobby.ProxyKeyConst.Lobby_SingleMail,n,lobby.ProxyKeyConst.Lobby_SingleMail_Back,i,o)}function r(e,i,o){var n={token:t.game_getPlayer().getToken(),id:e};t.send(lobby.ProxyKeyConst.Lobby_DeleteSingleMail,n,lobby.ProxyKeyConst.Lobby_DeleteSingleMail_Back,i,o)}t.game_get_message=e,t.game_get_message_single=i,t.game_get_message_dele=o,t.game_get_email=n,t.game_get_email_single=s,t.game_get_email_dele=r}(web||(web={}));var web;!function(t){function e(e,i,o){var n={nickname:e};t.send(lobby.ProxyKeyConst.Lobby_roleSetting,n,lobby.ProxyKeyConst.Lobby_roleSetting_Back,i,o)}function i(e,i,o){var n={avatar:e};t.send(lobby.ProxyKeyConst.Lobby_roleSetting,n,lobby.ProxyKeyConst.Lobby_roleSetting_Back,i,o)}function o(e,i,o){var n={avatar_frame:e};t.send(lobby.ProxyKeyConst.Lobby_roleSetting,n,lobby.ProxyKeyConst.Lobby_roleSetting_Back,i,o)}function n(e,i,o){var n={sex:e};t.send(lobby.ProxyKeyConst.Lobby_roleSetting,n,lobby.ProxyKeyConst.Lobby_roleSetting_Back,i,o)}t.game_updateName=e,t.game_updateAvatar=i,t.game_updateFrame=o,t.game_updateSex=n}(web||(web={}));var web;!function(t){function e(e,i){var o={token:t.game_getPlayer().getToken()};t.send(lobby.ProxyKeyConst.Lobby_RechargeType,o,lobby.ProxyKeyConst.Lobby_RechargeType_Back,e,i)}function i(e,i,o,n,s,r){var a={token:t.game_getPlayer().getToken(),pay_channel:i,money:e,bank_code:o,pay_type:n};t.send(lobby.ProxyKeyConst.Lobby_RechargeMoney,a,lobby.ProxyKeyConst.Lobby_RechargeMoney_Back,s,r)}function o(e,i,o){var n={token:t.game_getPlayer().getToken(),type:e};t.send(lobby.ProxyKeyConst.Lobby_RechargeRecord,n,lobby.ProxyKeyConst.Lobby_RechargeRecord_Back,i,o)}t.game_recharge_types=e,t.game_recharge_url=i,t.game_recharge_recods=o}(web||(web={}));var web;!function(t){function e(t,e,i){GamePlayerMgr.i.web_login_guest(t,e,i)}function i(e,i,o,n,s){var r={token:t.game_getPlayer().getToken(),loginame:e,password:i,regtype:2,captcha:o};t.send(lobby.ProxyKeyConst.Lobby_RegisterAccount,r,lobby.ProxyKeyConst.Lobby_Lobby_RegisterAccount_Back,n,s)}function o(){App.Socket.close()}t.game_register_enter=e,t.game_register=i,t.game_register_exit=o}(web||(web={}));var web;!function(t){function e(e,i,o,n,s){var r={token:t.game_getPlayer().getToken(),loginame:e,new_pwd:i,captcha:o};t.send(lobby.ProxyKeyConst.Lobby_ResetLoginPassword,r,lobby.ProxyKeyConst.Lobby_ResetLoginPassword_Back,n,s)}function i(e,i,o,n,s){var r={token:t.game_getPlayer().getToken(),loginame:e,new_pwd:i,old_pwd:o};t.send(lobby.ProxyKeyConst.Lobby_ResetLoginPassword,r,lobby.ProxyKeyConst.Lobby_ResetLoginPassword_Back,n,s)}function o(e,i,o){var n={token:t.game_getPlayer().getToken(),type:1,new_pwd:e};t.send(lobby.ProxyKeyConst.Lobby_ResetMoneyPwd,n,lobby.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,i,o)}function n(e,i,o,n){var s={token:t.game_getPlayer().getToken(),type:2,new_pwd:e,captcha:i};t.send(lobby.ProxyKeyConst.Lobby_ResetMoneyPwd,s,lobby.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,o,n)}function s(e,i,o,n){var s={token:t.game_getPlayer().getToken(),type:2,new_pwd:e,old_pwd:i};t.send(lobby.ProxyKeyConst.Lobby_ResetMoneyPwd,s,lobby.ProxyKeyConst.Lobby_ResetMoneyPwd_Back,o,n)}function r(e,i,o){var n={token:t.game_getPlayer().getToken(),phone_no:e};t.send(lobby.ProxyKeyConst.Lobby_GetCaptcha,n,lobby.ProxyKeyConst.Lobby_GetCaptcha_Back,i,o)}function a(e,i){var o={token:t.game_getPlayer().getToken()};t.send(lobby.ProxyKeyConst.Lobby_GetCaptcha,o,lobby.ProxyKeyConst.Lobby_GetCaptcha_Back,e,i)}t.game_resetLoginPass_tel=e,t.game_resetLoginPass_noTel=i,t.game_initMoneyPass=o,t.game_resetMoneyPass_tel=n,t.game_resetMoneyPass_noTel=s,t.game_getCaptcha_noBindTel=r,t.game_getCaptcha_bindTel=a}(web||(web={}));var web;!function(t){function e(e,i,o,n){var s={token:t.game_getPlayer().getToken(),money:e,password:i};t.send(lobby.ProxyKeyConst.Lobby_SaveMoney,s,lobby.ProxyKeyConst.Lobby_SaveMoney_Back,o,n)}function i(e,i,o,n){var s={token:t.game_getPlayer().getToken(),money:e,password:i};t.send(lobby.ProxyKeyConst.Lobby_TakeMoney,s,lobby.ProxyKeyConst.Lobby_TakeMoney_Back,o,n)}t.game_safeMoney=e,t.game_takeMoney=i}(web||(web={}));var web;!function(t){function e(){return GamePlayerMgr.i.getPlayer()}function i(t){GameModuleMgr.i.startGame(t)}function o(t){t?GameModuleMgr.i.back2GameFromLobby():GameModuleMgr.i.back2GameCancel()}function n(t,e,i,o,n){GamePlayerMgr.i.web_login(t,e,i,o,n)}function s(t,e){GamePlayerMgr.i.exitCurrAccount(t,e)}function r(){App.EasyLoading.showReconnetTip(),App.Socket.reconnect()}function a(t,i){var o={token:e().getToken()};p(lobby.ProxyKeyConst.CsWorldAgentBackgroundReqType,o,lobby.ProxyKeyConst.ScWorldAgentBackgroundResType,t,i)}function h(){hot.HotGame.gameClear(!0)}function l(t,e){p(base.ProxyKeyConst.CsWorldLeaveSceneReqType,{},base.ProxyKeyConst.ScWorldLeaveSceneResType,t,e)}function p(t,e,i,o,n){function s(t){App.MessageCenter.removeListener(BaseProxy.Socket_Type(i),s,this),o.call(n,t)}App.MessageCenter.addListener(BaseProxy.Socket_Type(i),s,this),App.Socket.send({key:t,body:e})}t.game_getPlayer=e,t.game_startGame=i,t.game_back2GameFromLobby=o,t.game_login=n,t.game_exit=s,t.game_relogin=r,t.game_agent_url=a,t.game_clear=h,t.game_exit_scene=l,t.send=p}(web||(web={}));var web;!function(t){function e(e,i,o){var n={token:t.game_getPlayer().getToken(),type:e};t.send(lobby.ProxyKeyConst.Lobby_BindBankList,n,lobby.ProxyKeyConst.Lobby_BindBankList_Back,i,o)}function i(e,i,o,n,s,r){var a={token:t.game_getPlayer().getToken(),type:e,cardholder:i,bankname:o,cardno:n};t.send(lobby.ProxyKeyConst.Lobby_BindBankCard,a,lobby.ProxyKeyConst.Lobby_BindBankCard_Back,s,r)}function o(e,i,o,n){var s={token:t.game_getPlayer().getToken(),type:e,bankid:i};t.send(lobby.ProxyKeyConst.Lobby_UnBindBankCard,s,lobby.ProxyKeyConst.Lobby_UnBindBankCard_Back,o,n)}function n(e,i,o,n){var s={token:t.game_getPlayer().getToken(),money:e,bankid:i};t.send(lobby.ProxyKeyConst.Lobby_Exchange,s,lobby.ProxyKeyConst.Lobby_Exchange_Back,o,n)}t.game_bank_lists=e,t.game_bindBank=i,t.game_unBindBank=o,t.game_drawout=n}(web||(web={}));