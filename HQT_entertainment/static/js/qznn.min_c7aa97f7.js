var __reflect=this&&this.__reflect||function(t,e,o){t.__class__=e,o?o.push(e):o=[e],t.__types__=t.__types__?o.concat(t.__types__):o},__extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,"QznnTimerSkin")||this;return o.visible=!1,o}return __extends(o,e),o.prototype.showTime=function(t,e,o){this.visible=!0,this.position=e,this.timeType=o,this.timerNumber=t,this.TimerLable.text=String(this.timerNumber),App.TimerManager.doTimer(1e3,0,this.refreshTimer,this)},o.prototype.refreshTimer=function(){this.timerNumber>0?(this.timerNumber--,this.TimerLable.text=String(this.timerNumber),this.timeType==t.TypeConst.TYPE_PLAY&&(this.position==t.QznnPosition.POSITION_SELF&&App.SoundManager.playEffect(t.QznnSoundConst.COUNT_DOWN),3==this.timerNumber)):(App.TimerManager.remove(this.refreshTimer,this),this.overTime(),this.visible=!1)},o.prototype.hideTime=function(){this.TimerGroup.visible=!1},o.prototype.showTypeTime=function(){this.TimerGroup.visible=!0},o.prototype.stopTime=function(){App.TimerManager.remove(this.refreshTimer,this),this.visible=!1},o.prototype.overTime=function(){},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),App.TimerManager.remove(this.refreshTimer,this))},o}(BaseEuiComponent);t.Timer=e,__reflect(e.prototype,"qznn.Timer")}(qznn||(qznn={}));var qznn;!function(t){var e;!function(e){var o=function(){function e(){}return e.prototype.getVersion=function(){return"v1.2.6"},e.prototype.reconstruction=function(t){var e=base.getController(t);e&&e.onReconstruction()},e.prototype.create=function(e){e==ControllerConst.Room?App.ControllerManager.register(ControllerConst.Room,new t.RoomController):e==ControllerConst.Game?App.ControllerManager.register(ControllerConst.Game,new t.GameController):e==ControllerConst.Desk;var o=base.getController(e);o&&o.onCreate()},e.prototype.initialize=function(t){var e=base.getController(t);e&&e.onInit()},e.prototype.destroy=function(t){},e}();e.qznn=o,__reflect(o.prototype,"qznn.Entrance.qznn",["base.IEntranceface"])}(e=t.Entrance||(t.Entrance={}))}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e._mIsInPool=!1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(e,t),e.create=function(){var t,o=e.qznnBonePool;return o&&(t=o.shift()),t||(t=new e),t._mIsInPool=!1,t},e.realese=function(t){if(!t._mIsInPool){var o=e.qznnBonePool;o||(o=[]),t._mIsInPool=!0,t.clean(),o.push(t),e.qznnBonePool=o}},e.cleanFormPool=function(){var t=e.qznnBonePool;if(t)for(;t.length;){var o=t.pop();o.destroy()}},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.updateId=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList),this.armature.addCompleteCallFunc(this.armaturePlayEnd,this)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.stopGame=function(){this.armature.stop()},e.prototype.armaturePlayEnd=function(){this._mPlayEndCallBacK&&this._mPlayEndCallBacK.call(this._mPlayEndThisObj)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(t,o,i){var n=o?o:e.Animation;this.armature.play(n,t,i)},e.prototype.clean=function(){t.prototype.clean.call(this),this.stopGame(),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0,this.armature=void 0},e.qznnBonePool=null,e.Animation="play",e._mActionList=[e.Animation,"bull0","bull1","bull2","bull3","bull4","bull5","bull6","bull7","bull8","bull9","bull10","bull11","bull12","bull13","bull14"],e}(base.BaseGameObject);t.QznnTypeBones=e,__reflect(e.prototype,"qznn.QznnTypeBones")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var t=e.call(this,"QznnCardViewSkin")||this;return t.cardList=[],t.centerCard=0,t.posList=[],t.testList=[5,4,9,3,2],t.newList=[],t.cardPos=[],t.selfCardPos=[],t.cardAni=[],t}return __extends(o,e),o.prototype.init=function(){App.OffsetLeft(this.card3),this.createHeadPosition(),this.createNewCard()},o.prototype.countCardType=function(){for(var t=this.testList,e=0;e<t.length;e++)for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++){var n=t[e],s=t[o],r=t[i];if((n+s+r)%10==0){var a=[];return a.push(n),a.push(s),a.push(r),a.sort(),this.newList=this.findTwoCards(a,t),this.newList}}},o.prototype.findTwoCards=function(t,e){for(var o,i=t,n=0;n<e.length;n++){var s=e[n];o=!1;for(var r=0;r<t.length;r++)s==t[r]&&(o=!0);o||i.push(s)}return i},o.prototype.countSmallFiveNiu=function(){for(var t=[5,3,5,5,5].sort(),e=[],o=-1,i=0;i<t.length;i++){var n=t[i];o-n?(o=n,e.push([n])):e[e.length-1].push(n)}for(var s in e){var r=e[s].length;4==r&&(e=e[s])}e=this.findTwoCards(e,t)},o.prototype.countfourHuaNiu=function(){for(var t=[10,13,11,12,11].sort(),e=[],o=0;o<t.length;o++){var i=t[o];i>10&&e.push(i)}e=this.findTwoCards(e,t)},o.prototype.createNewCard=function(){for(var t=GameBase.GameWidth/2,e=GameBase.GameHeight/2,o=0,i=0;20>i;i++){var n=new eui.Image;n.source="common_ui_cardback_png",n.width=78.3,n.height=105.27,n.scaleX=0,n.scaleY=0,n.x=t,n.y=e,n.name=i+"",n.alpha=0;var s=Math.floor(i/5),r=Math.floor(i%5),a=this.cardPos[s],h=33;h=0==s?120:33;var p=0;0!=r&&(p=r>2?-12:0),this.GroupDeal0.addChild(n);var l={x:a.x+o,y:a.y,_y:a.y+p};this.posList.push(l),this.cardList.push(n),o+=h,r>=4&&(o=0)}this.centerCard=(this.posList[9].x-this.posList[5].x)/2},o.prototype.setCardPos=function(){for(var e=[],o=0;4>o;o++){var i=this["GroupCard"+o];e=e.concat(t.qznnUtil.getPoints(i))}this.posList=e},o.prototype.createHeadPosition=function(){for(var t=0;4>t;t++){var e=void 0,o=void 0;switch(t){case 0:e=GameBase.GameWidth/2+this.card0.horizontalCenter,o=GameBase.GameHeight-this.card0.bottom-this.card0.height;break;case 1:e=GameBase.GameWidth-this.card1.right-this.card1.width,o=GameBase.GameHeight/2+this.card1.verticalCenter-this.card1.height/2;break;case 2:e=GameBase.GameWidth/2+this.card2.horizontalCenter-this.card2.width/2,o=this.card2.top;break;case 3:e=this.card3.left,o=GameBase.GameHeight/2+this.card3.verticalCenter-this.card1.height/2}var i={x:e,y:o};this.cardPos.push(i)}for(var n=0,s=0;5>s;s++){var r=GameBase.GameWidth/2+this.card_0.horizontalCenter,a=GameBase.GameHeight-this.card_0.bottom-this.card_0.height,h=0,p=Math.floor(s%5);0!=p&&(h=p>2?-12:0);var l={x:r+n,y:a,_y:a+h};this.selfCardPos.push(l),n+=33}},o.prototype.dealCard=function(e){for(var o,i,n,s=e,r=function(){var r=a.cardList[h],p=a;if(egret.Tween.removeTweens(r),o=Math.floor(h/5),i=Math.floor(h%5),n=1,n=0==o?1.5:1,i<e.length){if(5==e.length&&2>=i)return"continue";egret.Tween.get(r).wait(50*i+250*o).to({x:a.posList[h].x,y:a.posList[h].y,alpha:1,rotation:360,scaleX:n,scaleY:n},800,egret.Ease.sineInOut).call(function(){App.SoundManager.playEffect(t.QznnSoundConst.DEAL);var o=Math.floor(r.name/5),i=Math.floor(r.name%5);0==o&&(r.source=s[i]),e.length<5&&17==r.name&&p.applyFunc("showBankerBox")},a)}},a=this,h=0;h<this.cardList.length;h++)r()},o.prototype.directCard=function(t){this.recoverCard();for(var e=t,o=0;o<this.cardList.length;o++){var i=this.cardList[o],n=Math.floor(o/5),s=Math.floor(o%5),r=1;r=0==n?1.5:1,s<t.length&&(0==n&&(i.source=e[s]),i.x=this.posList[o].x,i.y=this.posList[o].y,i.scaleX=r,i.scaleY=r,i.alpha=1,i.rotation=0)}},o.prototype.createCard=function(e){if(e.length>0){for(var o=e,i=[],n=0;n<o.length;n++){var s=o[n],r=t.qznnUtil.getCardWithNum(s);i.push(r)}return i}},o.prototype.showCard=function(t,e){for(var o=0,i=function(){var i=n.cardList[s];1==t&&3>s?egret.Tween.get(i).wait(100*o).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){i.source=e[i.name],egret.Tween.get(i).to({scaleX:1.2},300,egret.Ease.sineInOut)},n):2==t&&s>=3&&5>s&&egret.Tween.get(i).wait(100*o).to({scaleX:0},300,egret.Ease.sineInOut).call(function(){i.source=e[i.name],egret.Tween.get(i).to({scaleX:1.2},300,egret.Ease.sineInOut)},n),o++},n=this,s=0;s<this.cardList.length;s++)i()},o.prototype.accountShowCard=function(t,e,o){var i=e,n=this.findSeatCards(t),s=this.findSeatCardsPos(t);s[0].x+this.centerCard;this.setSpareCard(n,s),this.spliceCardType(t,i,o)},o.prototype.setSpareCard=function(t,e){for(var o=0;o<t.length;o++){var i=this.cardList[o];i.source="common_ui_cardback_png",i.width=78.3,i.height=105.27,i.scaleX=1,i.scaleY=1,i.x=e[o].x,i.y=e[o].y,i.alpha=1,i.rotation=0}},o.prototype.spliceCardType=function(t,e,o){for(var i,n=this.findSeatCards(t),s=this.findSeatCardsPos(t),r=s[0].x+this.centerCard,a=function(){var a=n[p],l=h;egret.Tween.removeTweens(a),i=Math.floor(p%5),egret.Tween.get(a).wait(0*i).to({x:r,y:s[p].y},300,egret.Ease.sineInOut).call(function(){var i=Math.floor(a.name%5);4==i&&l.spreadCards(t,e,o)},h)},h=this,p=0;p<n.length;p++)a()},o.prototype.spreadCards=function(t,e,o){for(var i=this.findSeatCards(t),n=this.findSeatCardsPos(t),s=(n[0].x+this.centerCard,0);s<i.length;s++){var r=i[s];r.source=e[s],egret.Tween.removeTweens(r);var a=Math.floor(s%5),h=0;h=o?n[s]._y:n[s].y,egret.Tween.get(r).wait(0*a).to({x:n[s].x,y:h},300,egret.Ease.sineInOut)}},o.prototype.findSeatCards=function(t){for(var e=[],o=this.cardList,i=0;i<o.length;i++){var n=Math.floor(i/5),s=o[i];n==t&&e.push(s)}return e},o.prototype.findSeatCardsPos=function(t){for(var e=[],o=this.posList,i=0;i<o.length;i++){var n=Math.floor(i/5),s=o[i];n==t&&(s=0==n?this.selfCardPos[i]:o[i],e.push(s))}return e},o.prototype.directShowCard=function(t,e,o){for(var i=e,n=this.findSeatCards(t),s=this.findSeatCardsPos(t),r=0;r<n.length;r++){var a=n[r];a.width=78.3,a.height=105.27,a.scaleX=1,a.scaleY=1,a.alpha=1,a.rotation=0,a.source=i[r],egret.Tween.removeTweens(a);var h=0;h=o?s[r]._y:s[r].y,a.x=s[r].x,a.y=h}},o.prototype.recoverCard=function(){if(this.cardList&&this.cardList.length)for(var t=GameBase.GameWidth/2,e=GameBase.GameHeight/2,o=0;o<this.cardList.length;o++){var i=this.cardList[o];i.source="common_ui_cardback_png",i.width=78.3,i.height=105.27,i.scaleX=0,i.scaleY=0,i.x=t,i.y=e,i.alpha=0,i.rotation=0}},o.prototype.typeCardAni=function(t){var e=this.cardPos;if(e.length){this.typeIndex=t[0];for(var o=0;o<e.length;o++){var i=0,n=0;0==o?(i=this.selfCardPos[o].x+100,n=this.selfCardPos[o].y+78):(i=e[o].x+100,n=e[o].y+78);var s="bull"+t[o],r=this.getCardTypeName(t[o]);this.playAni(r,i,n,o,s)}}},o.prototype.getCardTypeName=function(t){var e=null;return 0==t?e="bull_0":6>=t?e="bull_six":9>=t?e="bull_nine":10==t?e="bull_ten":12>=t||14==t?e="huabull":13==t&&(e="bullboom"),e},o.prototype.playAni=function(e,o,i,n,s,r,a){if(!this.cardAni.length||!this.cardAni[n]){var h=new t.QznnTypeBones;this.GroupBone.addChild(h),this.cardAni.push(h)}this.cardAni[n].visible=!0,this.cardAni[n].updateId(e),this.cardAni[n].setPosition(o,i),this.cardAni[n].play(1,s);var p=this;this.cardAni[n].addPlayEndCallBack(function(){if(r&&r.call(a),0==n){var e=p.typeIndex>10?10:p.typeIndex;App.SoundManager.playEffect(t.QznnSoundConst.RESULT[e])}},this)},o.prototype.hideCardTpye=function(){var t=this.cardAni;if(t)for(var e=0;e<t.length;e++)t[e].visible=!1},o.prototype.showCardTpye=function(){var t=this.cardAni;if(t)for(var e=0;e<t.length;e++)t[e].visible=!0},o.prototype.cleanCardTpye=function(){var t=this.cardAni;if(t)for(var e=0;e<t.length;e++){var o=t[e];o.destroy()}this.cardAni=[]},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("抢庄牛牛 CardView destroy"),t.QznnTypeBones.cleanFormPool(),this.cleanCardTpye(),this.cardList=void 0)},o}(BaseEuiComponent);t.CardView=e,__reflect(e.prototype,"qznn.CardView")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,"QznnClosePoputSkin")||this;return o.spotNumber=0,o.visible=!1,o}return __extends(o,e),o.prototype.openPopup=function(t){switch(console.log("打开弹窗",t),this.hidePopInit(),this.promptType=t,t){case 1:this.matchStyle();break;case 2:this.returnStyle();break;case 3:this.balanceStyle()}1!=t&&(this.visible=!0,this.PoputBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu))},o.prototype.hidePopInit=function(){this.matchGraup.visible=!1,this.returnGraup.visible=!1},o.prototype.closePopup=function(t){void 0===t&&(t=!0),this.PoputBg.visible=!1;var e=this;t&&App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(e.Menu,200,0,function(){e.visible=!1,e.matchGraup.visible=!1,e.returnGraup.visible=!1})},o.prototype.ConcerPopup=function(){App.SoundManager.playEffect("click_mp3"),1==this.promptType||3==this.promptType?App.MessageCenter.dispatch(t.triggerEvent.closeMatchPop,this.promptType):this.closePopup(!1)},o.prototype.confirmPoput=function(){App.SoundManager.playEffect("click_mp3"),this.closePopup(),App.MessageCenter.dispatch(t.triggerEvent.confirmMatchPop,this.promptType)},o.prototype.matchStyle=function(){this.Menu.scaleX=this.Menu.scaleY=1,this.Menu.visible=!0,this.PoputBg.visible=!0,this.visible=!0,this.matchGraup.visible=!0},o.prototype.returnStyle=function(){this.returnGraup.visible=!0,this.returnTxt.text="退出后会由系统代打，是否确定退出？"},o.prototype.balanceStyle=function(){this.returnGraup.visible=!0,this.returnTxt.text="余额低于入场限制，是否前往充值？"},o.prototype.refreshSpot=function(){this.spotNumber<6?this.spotNumber++:this.spotNumber=0,this.hideSpot();for(var t=0;t<this.spotNumber;t++)this.BoxSpot.getChildAt(t).visible=!0},o.prototype.hideSpot=function(){for(var t=0;t<this.BoxSpot.numChildren;t++)this.BoxSpot.getChildAt(t).visible=!1},o.prototype.exitRoom=function(){this.applyFunc(t.EVENT.EXIT_ROOM)},o.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConcerPopup,this),this.BtnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ConcerPopup,this),this.BtnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},o.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConcerPopup,this),this.BtnCancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ConcerPopup,this),this.BtnConfirm.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.confirmPoput,this)},o.prototype.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)},o}(BaseEuiComponent);t.ClosePoput=e,__reflect(e.prototype,"qznn.ClosePoput")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,"QznnGameSetSkin")||this;return e.visible=!1,e}return __extends(e,t),e.prototype.initSet=function(){this.VoiceSlider.minimum=0,this.VoiceSlider.maximum=100,this.VoiceSlider.value=100*App.SoundManager.getBgVolume(),this.MusicSlider.minimum=0,this.MusicSlider.maximum=100,this.MusicSlider.value=100*App.SoundManager.getEffectVolume(),this.Effect.alpha=0},e.prototype.openPopup=function(){this.visible=!0,this.GameSetBg.visible=!0,this.Menu.scaleX=this.Menu.scaleY=0,App.EffectUtils.showUI(this.Menu)},e.prototype.closePopup=function(){this.GameSetBg.visible=!1;var t=this;App.SoundManager.playEffect("click_mp3"),App.EffectUtils.hideUI(t.Menu,200,0,function(){t.visible=!1})},e.prototype.setVoiceMin=function(){this.VoiceSlider.value=0;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setVoiceMax=function(){this.VoiceSlider.value=100;var t=this.VoiceSlider.value/100;App.SoundManager.setBgVolume(t)},e.prototype.setMusicMin=function(){this.MusicSlider.value=0;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.setMusicMax=function(){this.MusicSlider.value=100;var t=this.MusicSlider.value/100;App.SoundManager.setEffectVolume(t)},e.prototype.toggleEffect=function(){this.Effect.selected?this.Effect.alpha=1:this.Effect.alpha=0},e.prototype.onChangeValue=function(t){var e;switch(t.currentTarget){case this.VoiceSlider:e=this.VoiceSlider.value/100,App.SoundManager.setBgVolume(e);break;case this.MusicSlider:e=this.MusicSlider.value/100,App.SoundManager.setEffectVolume(e)}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},e.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),this.VoiceSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),this.MusicSlider.addEventListener(egret.Event.CHANGE,this.onChangeValue,this),App.CommonUtils.effectButton(this.VoiceMin,this.setVoiceMin,this),App.CommonUtils.effectButton(this.VoiceMax,this.setVoiceMax,this),App.CommonUtils.effectButton(this.MusicMin,this.setMusicMin,this),App.CommonUtils.effectButton(this.MusicMax,this.setMusicMax,this)},e.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePopup,this),this.Effect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.toggleEffect,this),App.CommonUtils.removeButton(this.VoiceMin),App.CommonUtils.removeButton(this.VoiceMax),App.CommonUtils.removeButton(this.MusicMin),App.CommonUtils.removeButton(this.MusicMax)},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.removeEvent())},e}(BaseEuiComponent);t.GameSet=e,__reflect(e.prototype,"qznn.GameSet")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,"QznnHelpSkin")||this;return o.visible=!1,o}return __extends(o,e),o.prototype.initUI=function(){this.gameList.itemRenderer=t.QznnHelpItem,this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList},o.prototype.showPopup=function(){App.EffectUtils.showView(this),this.scrollerItem.verticalScrollBar.visible=!0,App.MouseUtils.addMouseWheel(this.onMouseWheel,this)},o.prototype.closePoput=function(){var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1},this),App.MouseUtils.removeMouseWheel()},o.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.touchMove=function(t){this.ScrollBox.width=930,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,t,54)},o.prototype.touchEnd=function(){this.ScrollBox.width=50,this.ScrollBox.x=601},o.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},o}(BaseEuiComponent);t.Help=e,__reflect(e.prototype,"qznn.Help")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,"QznnMenuViewSkin")||this;return o.spotNumber=0,o.timerCallBankerNumber=0,o.menuType=!1,o.boneList=[],o.boneName=["light","sweep"],o.BoxMatching.initComponent(t),o}return __extends(o,e),o.prototype.initComponent=function(t,o){e.prototype.initComponent.call(this,t,o),this.moneyGroup.touchChildren=!1,this.moneyGroup.touchEnabled=!0,this.moneyGroup.visible=!App.isWebDecorate},o.prototype.init=function(){this.initRecharge(),this.hideStartBtn(),this.hideRobBox(),this.hideDoubleBox(),this.BoxMatching.hidePopInit(),this.MenuBox.y=-300,this.BtnReturn.visible=!App.isWebInsert,this.btnRedPacket=RedPackBone.create(),this.btnRedPacket.init(),this.RadePaper.addChild(this.btnRedPacket),this.btnRedPacket.x=-10,this.btnRedPacket.y=20,this.btnRedPacket.play(RedPackBone.Animation1),this.btnRedPacket.touchEnabled=!0},o.prototype.initRecharge=function(){if(!this.boneList.length)for(var t=0;2>t;t++){var e=common.comBones.create();this.boneList.push(e)}for(var o=0;2>o;o++)if(!this.boneList[o].parent){var i=this.boneName[o];this.moneyGroup.addChild(this.boneList[o]),this.boneList[o].updateId(i);var n=43.5,s=43.5;this.boneList[o].setPosition(n,s),this.boneList[o].play(0)}},o.prototype.requestStart=function(){this.hideStartBtn(),this.applyFunc(t.EVENT.OPERATE_REQ,t.OperateType.OPER_STARTGAME)},o.prototype.CallBanker=function(e){var o=Number(e);this.applyFunc(t.EVENT.OPERATE_REQ,o)},o.prototype.matchStyle=function(){this.BoxMatching.openPopup(1)},o.prototype.onMatch=function(){this.BoxMatching.visible=!0,this.hideSpot(),App.TimerManager.doTimer(300,0,this.refreshSpot,this)},o.prototype.refreshSpot=function(){this.BoxMatching.refreshSpot()},o.prototype.hideSpot=function(){this.BoxMatching.hideSpot()},o.prototype.filishMatch=function(){this.BoxMatching.visible=!1,App.TimerManager.remove(this.refreshSpot,this),this.spotNumber=0},o.prototype.showStartBtn=function(){this.BoxMatching.closePopup(!1),this.BtnBoxGameStart.visible=!0},o.prototype.hideStartBtn=function(){this.BtnBoxGameStart.visible=!1},o.prototype.showRobBox=function(){this.CallBankerBox.visible=!0},o.prototype.hideRobBox=function(){this.CallBankerBox.visible=!1},o.prototype.startTimer=function(t){this.Timer_0.showTime(t)},o.prototype.stopTimer=function(){this.Timer_0.stopTime()},o.prototype.hideTime=function(){this.Timer_0.hideTime()},o.prototype.showTypeTime=function(){this.Timer_0.showTypeTime()},o.prototype.showDoubleBox=function(){this.boxDouble.visible=!0},o.prototype.hideDoubleBox=function(){this.boxDouble.visible=!1},o.prototype.hideOperBtn=function(){this.CallBankerBox.visible=!1,this.boxDouble.visible=!1},o.prototype.playTip=function(){this.applyFunc(t.EVENT.PLAY_TIP)},o.prototype["double"]=function(e){var o=Number(e);this.applyFunc(t.EVENT.OPERATE_REQ,o)},o.prototype.setBetTimes=function(t){var e=t;this.hideBetTimes();for(var o=0;o<e.length;o++)this["betScore"+o].text=e[o]+"倍",this.boxDouble.getChildAt(o).visible=!0},o.prototype.hideBetTimes=function(){for(var t=0;t<this.boxDouble.numChildren;t++)this.boxDouble.getChildAt(t).visible=!1},o.prototype.flopCards=function(){this.applyFunc(t.EVENT.FlopCards)},o.prototype.showMenu=function(){App.SoundManager.playEffect("click_mp3"),this.menuType=0==this.menuType?!0:!1,this.menuType?(this.ShowMenu.source=RES.getRes("ui_set_json.common_ui_xlh"),egret.Tween.get(this.MenuBox).to({y:0},100)):(this.ShowMenu.source=RES.getRes("ui_set_json.common_ui_xl"),egret.Tween.get(this.MenuBox).to({y:-300},100)),R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_MENU)},o.prototype.rechargeMoney=function(){this.applyFunc(t.EVENT.RECHARGE)},o.prototype.exitRoom=function(){App.SoundManager.playEffect("click_mp3"),this.applyFunc(t.EVENT.EXIT_POPUT)},o.prototype.menuItem=function(e){switch(App.SoundManager.playEffect("click_mp3"),e.currentTarget){case this.BtnHelp:this.applyFunc(t.EVENT.HELP),R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_HELP);break;case this.BtnSet:this.applyFunc(t.EVENT.GAME_SET),R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_SET);break;case this.BtnRecord:this.applyFunc(t.EVENT.RECORD),R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_MILI)}},o.prototype.onOpenRedPac=function(){App.ViewManager.open(LobbyViewConst.RedPacket),this.btnRedPacket.play(RedPackBone.Animation1)},o.prototype.RedPackNotify=function(){this.btnRedPacket.play(RedPackBone.Animation)},o.prototype.RedEnvelopeBack=function(){this.btnRedPacket.play(RedPackBone.Animation1)},o.prototype.addEvent=function(){App.EffectUtils.addEffectBtnOut(this.GameStart,this.requestStart,this);for(var t=0;4>t;t++){var e=this["CallScore"+t];App.EffectUtils.addEffectBtnOut(e,this.CallBanker,this,e.name)}for(var o=0;5>o;o++){var i=this["btnScore"+o];App.EffectUtils.addEffectBtnOut(i,this["double"],this,i.name)}this.BtnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.effectButton(this.BtnReturn,this.exitRoom,this),App.CommonUtils.effectButton(this.ShowMenu,this.showMenu,this),App.CommonUtils.effectButton(this.moneyGroup,this.rechargeMoney,this,{}),this.btnRedPacket&&this.btnRedPacket.addEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.addListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.addListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.addListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this),this.BoxMatching.addEvent()},o.prototype.removeEvent=function(){App.EffectUtils.removeEffectBtn(this.GameStart);for(var t=0;4>t;t++)App.EffectUtils.removeEffectBtn(this["CallScore"+t]);for(var e=0;5>e;e++)App.EffectUtils.removeEffectBtn(this["btnScore"+e]);this.BtnHelp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnSet.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),this.BtnRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.menuItem,this),App.CommonUtils.removeButton(this.BtnReturn),App.CommonUtils.removeButton(this.ShowMenu),App.CommonUtils.removeButton(this.moneyGroup),this.btnRedPacket&&this.btnRedPacket.removeEventListener(egret.TouchEvent.TOUCH_END,this.onOpenRedPac,this),App.MessageCenter.removeListener(RedPacketConst.newRedEnvelopeNotity,this.RedPackNotify,this),App.MessageCenter.removeListener(RedPacketConst.grabRedEnvelopeBack,this.RedEnvelopeBack,this),App.MessageCenter.removeListener(RedPacketConst.expiredRedEnvelopeNotify,this.RedEnvelopeBack,this),this.BoxMatching.removeEvent()},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.BoxMatching.destroy(),this.Timer_0.destroy())},o}(BaseEuiComponent);t.MenuView=e,__reflect(e.prototype,"qznn.MenuView")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var t=e.call(this,"QznnPlayerMessageSkin")||this;return t.GroupMoneyLight=[],t.winPos=[],t.allChipFlyList=[],t.chiparr=[],t}return __extends(o,e),o.prototype.init=function(){for(var t=0;4>t;t++)this.hideUser(t);this.flyCoordinate(),App.OffsetLeft(this.GroupInfo_3)},o.prototype.setUserName=function(t,e){this["UserName_"+t].text=e},o.prototype.getUserName=function(t){return this["UserName_"+t].text},o.prototype.setUserMoney=function(t,e){this["UserMoney_"+t].text=e+""},o.prototype.setUserHead=function(t,e){this["UserImage_"+t].source=e},o.prototype.setUserFrame=function(t,e){this["UserFrame_"+t].source=e},o.prototype.showUser=function(t){this["GroupInfo_"+t].visible=!0},o.prototype.hideUser=function(t){this["GroupInfo_"+t].visible=!1},o.prototype.hideOtherUser=function(){for(var t=1;4>t;t++)this.hideUser(t)},o.prototype.playerWinMoney=function(t,e){if(0==t&&(this["PlutewL"+e].text=""),0>t){var o=RES.getRes("special_num2_fnt");this["PlutewL"+e].font=o,this["PlutewL"+e].text="-"+Math.abs(Number(App.CommonUtils.money2Str(t)))}else{var o=RES.getRes("special_num_fnt");this["PlutewL"+e].font=o,this["PlutewL"+e].text="+"+App.CommonUtils.money2Str(t)}},o.prototype.fontEnlarge=function(t){var e=this["PlutewL"+t];e.alpha=1,e.scaleX=1,e.scaleY=1},o.prototype.directFontEnlarge=function(t){var e=this["PlutewL"+t];e.alpha=1,e.scaleX=1,e.scaleY=1},o.prototype.getMoneyLight=function(t){var e=common.comBones.create();if(this.GroupMoneyLight.push(e),!e.parent){var o=this["GroupInfo_"+t],i=this["UserImage_"+t];o.addChild(e),e.updateId("money_linght"),e.blendMode=egret.BlendMode.ADD;var n=i.x+44,s=i.y+44.5;e.setPosition(n,s),e.play(1),e.addPlayEndCallBack(function(){e&&e.parent&&common.comBones.realese(e)}.bind(this),this),this.fontEnlarge(t)}},o.prototype.clearAllMoneyLight=function(){for(;this.GroupMoneyLight.length;){var t=this.GroupMoneyLight.pop();common.comBones.realese(t)}},o.prototype.initInfo=function(){for(var t=0;4>t;t++)this["PluteWinMoney"+t].alpha=0,this["PluteWinMoney"+t].scaleX=.5,this["PluteWinMoney"+t].scaleY=.5,egret.Tween.removeTweens(this["PluteWinMoney"+t]),this["PlutewL"+t].alpha=0,this["PlutewL"+t].scaleX=.5,this["PlutewL"+t].scaleY=.5,this["PlutewL"+t].text="",egret.Tween.removeTweens(this["PlutewL"+t]),R.removeAllTimeOut(this)},o.prototype.flyCoordinate=function(){for(var t=0;4>t;t++){var e=this["HeadPos"+t],o=e.x,i=e.y;1==t?(o=GameBase.GameWidth-e.right,i=GameBase.GameHeight/2+e.verticalCenter):2==t&&(o=GameBase.GameWidth/2+e.horizontalCenter,i=e.top);var n={x:o,y:i};this.winPos.push(n)}},o.prototype.getFlyCoordinate=function(){return this.winPos.length?this.winPos:void 0},o.prototype.createFlyCoin=function(e,o,i){void 0===i&&(i=!1);for(var n=this.winPos[e],s=this.winPos[o],r=0;10>r;r++){var a=t.qznnGoldCoin.create();a.init(r),this.chiparr.push(a),this.GroupHeadPos.addChild(a),a.scaleX=1,a.scaleY=1,a.x=s.x,a.y=s.y,a.alpha=0,a.setIsFlyType(i);var h=n.x,p=n.y;a.setFlyChipX(h),a.setFlyChipY(p)}},o.prototype.flyWinGlod=function(e){void 0===e&&(e=!1),this.chiparr&&this.chiparr.length&&(this.chiparr.forEach(function(t){t.getIsFlyType()==e&&(t.alpha=1,t.moveTo())},this),App.SoundManager.playEffect(t.QznnSoundConst.WIN_BET))},o.prototype.clearFlyWinChip=function(){for(;this.chiparr&&this.chiparr.length;){var e=this.chiparr.pop();t.qznnGoldCoin.release(e)}},o.prototype.destroy=function(){e.prototype.destroy.call(this),R.removeAllTimeOut(this),this.initInfo(),this.clearFlyWinChip(),this.clearAllMoneyLight()},o}(BaseEuiComponent);t.PlayerMessage=e,__reflect(e.prototype,"qznn.PlayerMessage")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var t=e.call(this,"QznnBonesSkin")||this;return t._approach=null,t}return __extends(o,e),o.prototype.playAni=function(e,o,i,n,s,r){this._approach||(this._approach=new t.QznnTypeBones,this.GroupBones.addChild(this._approach),this._approach.updateId("qznn_start")),this._approach.visible=!0,this._approach.setPosition(o,i),this._approach.play(1,n);var a=this;this._approach.addPlayEndCallBack(function(){s&&(s.call(r),a._approach.visible=!1)},this)},o.prototype.hideStartAni=function(){this._approach&&(this._approach.visible=!1)},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this._approach&&(this._approach.destroy(),this._approach=void 0))},o}(BaseEuiComponent);t.QznnBones=e,__reflect(e.prototype,"qznn.QznnBones")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mIsInPool=!1,e._mIndex=0,e.isFlyType=!1,e.skinName="qznnGoldCoin",e}return __extends(e,t),e.create=function(){var t=ObjectPool.pop("qznn.qznnGoldCoin");return t._mIsInPool=!1,t},e.release=function(t){t._mIsInPool||(t._mIsInPool=!0,t.clean(),ObjectPool.push(t))},e.cleanqznnGoldCoinPool=function(){ObjectPool.clearClass("qznn.qznnGoldCoin","destroy")},e.prototype.init=function(t){this._mIndex=t},e.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o)},e.prototype.addPlayEndCallBack=function(t,e){this._mPlayEndCallBacK=t,this._mPlayEndThisObj=e},e.prototype.setFlyX=function(t){this.mIsX=t},e.prototype.setFlyY=function(t){this.mIsY=t},e.prototype.getFlyX=function(){return this.mIsX},e.prototype.getFlyY=function(){return this.mIsY},e.prototype.setFlyChipX=function(t){this._flyX=t},e.prototype.setFlyChipY=function(t){this._flyY=t},e.prototype.getFlyChipX=function(){return this._flyX},e.prototype.getFlyChipY=function(){return this._flyY},e.prototype.setIsFlyType=function(t){this.isFlyType=t},e.prototype.getIsFlyType=function(){return this.isFlyType},e.prototype.moveTo=function(){var t=this._flyX,o=this._flyY,i=this;egret.Tween.get(this).wait(100*this._mIndex).to({x:t,y:o},500,egret.Ease.sineInOut).call(function(){e.release(i)},this)},e.prototype.moveToPlace=function(){var t=this._flyX,o=this._flyY,i=this;
egret.Tween.get(this).to({x:t,y:o},350).call(function(){e.release(i)},this)},e.prototype.cleanTween=function(){egret.Tween.removeTweens(this)},e.prototype.setNameNum=function(t){this._mChipId=t},e.prototype.getNameNum=function(){return this._mChipId},e.prototype.getChipNum=function(t){return this._mchipValue*t},e.prototype.stopChip=function(){this.btnGlod.touchEnabled=!1},e.prototype.clean=function(){R.removeFromParent(this),egret.Tween.removeTweens(this),this._mPlayEndCallBacK=void 0,this._mPlayEndThisObj=void 0},e.prototype.destroy=function(){this.clean()},e}(eui.Component);t.qznnGoldCoin=e,__reflect(e.prototype,"qznn.qznnGoldCoin")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getHeight=function(){return this.height},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(eui.ItemRenderer);t.QznnHelpItem=e,__reflect(e.prototype,"qznn.QznnHelpItem")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,"QznnRecordSkin")||this;return o.isCreateEnd=!1,o.visible=!1,o}return __extends(o,e),o.prototype.showPopup=function(){this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1,App.EffectUtils.showView(this)},o.prototype.closePoput=function(){App.SoundManager.playEffect("click_mp3");var t=this;App.EffectUtils.hideView(this,function(){t.visible=!1,t.isCreateEnd=!1},this),App.MouseUtils.removeMouseWheel()},o.prototype.touchMove=function(t){this.ScrollBox.width=1e3,this.ScrollBox.x=0,common.GUtils.touchScrollMove(this.scrollerItem,t,50)},o.prototype.touchEnd=function(){this.ScrollBox.width=50,this.ScrollBox.x=602},o.prototype.onMouseWheel=function(t){common.GUtils.touchMouseWheel(this.scrollerItem,this.gameList,t.data)},o.prototype.qznnRecordCreateEnd=function(){this.isCreateEnd||(this.isCreateEnd=!0,App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this.gameList.contentHeight<this.scrollerItem.viewport.height?(this.scrollerItem.verticalScrollBar.visible=!1,this.ScrollBox.touchEnabled=!1):(this.scrollerItem.verticalScrollBar.visible=!0,this.ScrollBox.touchEnabled=!0))},o.prototype.rankData=function(t){var e=new eui.ArrayCollection;t.forEach(function(t){e.addItem(t)}),this.refreshGameList(e)},o.prototype.refreshGameList=function(e){return this.gameList.itemRenderer=t.RecordItem,this.gameList.dataProvider=e,this.gameList.itemRendererSkinName="resource/games/qznn/components/RecordItem.exml",this.scrollerItem.viewport.scrollH=0,this.scrollerItem.viewport=this.gameList,this.scrollerItem},o.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)},o.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},o.prototype.addEvent=function(){this.ClosePoput.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.addListener(t.triggerEvent.qznnRecordCreateEnd,this.qznnRecordCreateEnd,this)},o.prototype.removeEvent=function(){this.ClosePoput.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closePoput,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchMove,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.ScrollBox.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this),App.MessageCenter.removeListener(t.triggerEvent.qznnRecordCreateEnd,this.qznnRecordCreateEnd,this)},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),this.removeEvent())},o}(BaseEuiComponent);t.Record=e,__reflect(e.prototype,"qznn.Record")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var o=e.call(this)||this;return App.MessageCenter.dispatch(t.triggerEvent.qznnRecordCreateEnd),o}return __extends(o,e),o.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.Time.text=App.DateUtils.getFormatBySecond(this.data.time,2),this.Identify.textColor=this.data.isRob?255:16711680,this.Identify.text=this.data.isRob?"闲":"庄",this.Money.text="+"+this.data.hit_money)},o}(eui.ItemRenderer);t.RecordItem=e,__reflect(e.prototype,"qznn.RecordItem")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,null)||this;return e.init(),e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.updateRes("jiantou")},e.prototype.updateRes=function(t){this.initDBRes(t),this.armature=this.createArmature("Armature",t,e._mActionList)},e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.play=function(){this.armature.play(e.Animation,999999999)},e.prototype.stop=function(){this.armature.stop()},e.prototype.clean=function(){t.prototype.clean.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.armature=void 0},e.Animation="newAnimation",e._mActionList=[e.Animation],e}(base.BaseGameObject);t.EntryArrowBone=e,__reflect(e.prototype,"qznn.EntryArrowBone")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=t.call(this,"QznnTypeBoxSkin")||this;return e.alarmIndex_0=0,e.alarmIndex_1=0,e.alarmIndex_2=0,e}return __extends(e,t),e.prototype.init=function(){App.OffsetLeft(this.BossHat_3),App.OffsetLeft(this.GroupType_3),this.hideAllType(-1),this.hideAllBoss(),this.hideTips()},e.prototype.showType=function(t,e){var o="qzTimes"+e;this["Type_"+t].source=RES.getRes(o),this["Type_"+t].visible=!0},e.prototype.showBetType=function(t,e){e&&(this["bet_"+t].text="下注"+e+"倍",this["bet_"+t].visible=!0)},e.prototype.hideType=function(t){this["Type_"+t].visible=!1},e.prototype.hideBetType=function(t){this["bet_"+t].visible=!1},e.prototype.hideAllType=function(t){for(var e=0;4>e;e++)e!=t&&this.hideType(e);this.hideAllBetType()},e.prototype.hideAllBetType=function(){for(var t=0;4>t;t++)this.hideBetType(t)},e.prototype.hideAllBankerType=function(){for(var t=0;4>t;t++)this.hideType(t)},e.prototype.showBankerTpye=function(t,e){this.hideAllBankerType(),this.showType(t,e)},e.prototype.showPlayerBetTpye=function(t){if(t.length){this.hideAllBetType();for(var e=0;e<t.length;e++)t[e]&&-1!=t[e]&&this.showBetType(e,t[e])}},e.prototype.showPlayerRobTpye=function(t){if(t.length){this.hideAllBankerType();for(var e=0;e<t.length;e++)t[e]&&-1!=t[e]&&this.showType(e,t[e])}},e.prototype.showBoss=function(t){this.hideAllBoss(),this["BossHat_"+t].visible=!0},e.prototype.hideBoss=function(t){this["BossHat_"+t].visible=!1},e.prototype.hideAllBoss=function(){for(var t=0;4>t;t++)this.hideBoss(t)},e.prototype.hideTips=function(){this.PlayTips.visible=!1},e.prototype.showTips=function(){this.PlayTips.visible=!0},e.prototype.setTiptext=function(t){this.tiptext.text=t},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),App.TimerManager.removeAll(this))},e}(BaseEuiComponent);t.TypeBox=e,__reflect(e.prototype,"qznn.TypeBox")}(qznn||(qznn={}));var qznn;!function(t){var e;!function(t){t[t.Base=1100]="Base",t[t.Ani=1101]="Ani",t[t.Popup=1102]="Popup",t[t.CommonTest=1102]="CommonTest"}(e=t.ViewConst||(t.ViewConst={}));var o;!function(t){t[t.MALE=1]="MALE",t[t.FAMALE=2]="FAMALE"}(o=t.SexConst||(t.SexConst={}));var i;!function(t){t[t.POSITION_UNDEFINE=-1]="POSITION_UNDEFINE",t[t.POSITION_SELF=0]="POSITION_SELF",t[t.POSITION_RIGHT=1]="POSITION_RIGHT",t[t.POSITION_UP=2]="POSITION_UP",t[t.POSITION_LEFT=3]="POSITION_LEFT"}(i=t.QznnPosition||(t.QznnPosition={}));var n;!function(t){t[t.STATE_UNDEFINED=-1]="STATE_UNDEFINED",t[t.STATE_IDLE=0]="STATE_IDLE",t[t.STATE_MATCH=1]="STATE_MATCH",t[t.STATE_BANKER=2]="STATE_BANKER",t[t.STATE_BET=3]="STATE_BET",t[t.STATE_EXCHANGE=4]="STATE_EXCHANGE"}(n=t.GameStateConst||(t.GameStateConst={}));var s;!function(t){t[t.OPER_READY=25]="OPER_READY",t[t.OPER_STARTGAME=100]="OPER_STARTGAME",t[t.OPER_STARTGAMESEEN=101]="OPER_STARTGAMESEEN",t[t.OPER_NOROB=200]="OPER_NOROB",t[t.OPER_ROBONE=201]="OPER_ROBONE",t[t.OPER_ROBTWO=202]="OPER_ROBTWO",t[t.OPER_ROBTHREE=203]="OPER_ROBTHREE",t[t.OPER_BET0=300]="OPER_BET0",t[t.OPER_BET1=301]="OPER_BET1",t[t.OPER_BET2=302]="OPER_BET2",t[t.OPER_BET3=303]="OPER_BET3",t[t.OPER_BET4=304]="OPER_BET4",t[t.OPER_DESTROY_LeaveTable=400]="OPER_DESTROY_LeaveTable",t[t.OPER_DESTROY_TO_LOBBY=401]="OPER_DESTROY_TO_LOBBY",t[t.OPER_DESTROY_IDLE=402]="OPER_DESTROY_IDLE",t[t.OPER_DESTROY_MATCH=403]="OPER_DESTROY_MATCH"}(s=t.OperateType||(t.OperateType={}));var r=function(){function t(){}return t.overTimes="overTimes",t.closeMatchPop="closeMatchPop",t.confirmMatchPop="confirmMatchPop",t.qznnRecordCreateEnd="qznnRecordCreateEnd",t}();t.triggerEvent=r,__reflect(r.prototype,"qznn.triggerEvent");var a;!function(t){t[t.TIP_UNDEFINED=0]="TIP_UNDEFINED",t[t.TIP_ONE=1]="TIP_ONE",t[t.TIP_TWO=2]="TIP_TWO",t[t.TIP_THREE=3]="TIP_THREE"}(a=t.TipConst||(t.TipConst={}));var h;!function(t){t[t.CODE_ZERO=0]="CODE_ZERO",t[t.CODE_SEVEN=7]="CODE_SEVEN"}(h=t.ErrorConst||(t.ErrorConst={}));var p;!function(t){t[t.TYPE_UNDEFINED=0]="TYPE_UNDEFINED",t[t.TYPE_ROB=1]="TYPE_ROB",t[t.TYPE_DOUBLE=2]="TYPE_DOUBLE",t[t.TYPE_PLAY=3]="TYPE_PLAY"}(p=t.TypeConst||(t.TypeConst={}));var l;!function(t){t[t.EXIT_ROOM=10104]="EXIT_ROOM",t[t.EXIT_ROOM_R=10105]="EXIT_ROOM_R",t[t.BOTTOM_SCORE_N=12001]="BOTTOM_SCORE_N",t[t.RRMA_TIME_Q=12002]="RRMA_TIME_Q",t[t.RRMA_TIME_S=12003]="RRMA_TIME_S",t[t.STATE_R=12004]="STATE_R",t[t.SEAT_INFO=12005]="SEAT_INFO",t[t.SEAT_R=12006]="SEAT_R",t[t.ACTION_Q=12007]="ACTION_Q",t[t.ACTION_R=12008]="ACTION_R",t[t.ACTION_N=12009]="ACTION_N",t[t.CARD_INFO_R=12010]="CARD_INFO_R",t[t.CALL_BANKER=12011]="CALL_BANKER",t[t.ADD_SCORE=12012]="ADD_SCORE",t[t.EXCHANGE_N=12013]="EXCHANGE_N",t[t.COMBAT_RECORD_Q=12014]="COMBAT_RECORD_Q",t[t.COMBAT_RECORD_R=12015]="COMBAT_RECORD_R",t[t.GAME_LIST_Q=10195]="GAME_LIST_Q",t[t.GAME_LIST_S=10196]="GAME_LIST_S"}(l=t.ProxyConst||(t.ProxyConst={}));var c;!function(t){t[t.onBottomScoreCallBack=10001]="onBottomScoreCallBack",t[t.onStateCallBack=10002]="onStateCallBack",t[t.onActionCallBack=10003]="onActionCallBack",t[t.onSeatCallBack=10004]="onSeatCallBack",t[t.onSeatInfoCallBack=10005]="onSeatInfoCallBack",t[t.onCardInfoCallBack=10006]="onCardInfoCallBack",t[t.onActionNotifyCallBack=10007]="onActionNotifyCallBack",t[t.onCallBankerCallBack=10008]="onCallBankerCallBack",t[t.onDiscardCallBack=10009]="onDiscardCallBack",t[t.onDiscardNotifyCallBack=10010]="onDiscardNotifyCallBack",t[t.onExchangeNotifyCallBack=10011]="onExchangeNotifyCallBack",t[t.onExitRoomCallBack=10012]="onExitRoomCallBack",t[t.onMultipleCalBack=10013]="onMultipleCalBack",t[t.onDiscardRecordCallBack=10014]="onDiscardRecordCallBack",t[t.onCombatRecordCallBack=10015]="onCombatRecordCallBack",t[t.onGameListCallBack=10016]="onGameListCallBack",t[t.onRemainingTimeBack=10017]="onRemainingTimeBack"}(c=t.CallBacks||(t.CallBacks={}));var d;!function(t){t[t.OPERATE_REQ=1001]="OPERATE_REQ",t[t.TOUCH_CARD_END=1002]="TOUCH_CARD_END",t[t.TOUCH_CARD_MOVE=1003]="TOUCH_CARD_MOVE",t[t.TOUCH_CARD_BEGIN=1004]="TOUCH_CARD_BEGIN",t[t.PLAY_CARD=1005]="PLAY_CARD",t[t.NO_PLAY_CARD=1006]="NO_PLAY_CARD",t[t.PLAY_TIP=1007]="PLAY_TIP",t[t.EXIT_ROOM=1008]="EXIT_ROOM",t[t.GAME_SET=1009]="GAME_SET",t[t.HELP=1010]="HELP",t[t.RECORD=1011]="RECORD",t[t.EXIT_POPUT=1012]="EXIT_POPUT",t[t.RECHARGE=1013]="RECHARGE",t[t.FlopCards=1014]="FlopCards",t[t.CLOSE_MATCH=1015]="CLOSE_MATCH",t[t.NO_TETRUEN=1016]="NO_TETRUEN"}(d=t.EVENT||(t.EVENT={}));var u=function(){function t(){}return t.CardInfo="CardInfo",t.Banker="Banker",t.Exchange="Exchange",t.state="state",t}();t.QznnGameMSG=u,__reflect(u.prototype,"qznn.QznnGameMSG");var y;!function(t){t[t.START=1]="START",t[t.ROCKET=2]="ROCKET",t[t.BOMB=3]="BOMB",t[t.LIANDUI=4]="LIANDUI",t[t.SHUNZI=5]="SHUNZI",t[t.PLANE=6]="PLANE",t[t.SPRING=7]="SPRING",t[t.BOSSWIN=8]="BOSSWIN",t[t.FARMERWIN=9]="FARMERWIN"}(y=t.BonesConst||(t.BonesConst={}));var m=function(){function t(){}return t.BG="qznn_bg_mp3",t.DEAL="qznn_sendcard_mp3",t.COUNT_DOWN="qznn_s_countdown_mp3",t.BET="fkdn_bet_mp3",t.SHOW="fkdn_show_mp3",t.WIN_BET="qznn_wincoin_mp3",t.WIN_GAME="qznn_win_mp3",t.RESULT=["qznn_cow0_mp3","qznn_cow1_mp3","qznn_cow2_mp3","qznn_cow3_mp3","qznn_cow4_mp3","qznn_cow5_mp3","qznn_cow6_mp3","qznn_cow7_mp3","qznn_cow8_mp3","qznn_cow9_mp3","qznn_cow10_mp3"],t}();t.QznnSoundConst=m,__reflect(m.prototype,"qznn.QznnSoundConst");var f=function(){function t(){}return t.QZNN_POINT={ROB_201BEI:"QZNNrob_1bei",ROB_202BEI:"QZNNrob_2bei",ROB_203BEI:"QZNNrob_3bei",ROB_200BEI:"QZNNrob_0bei",BET_300:"QZNNbet_1bei",BET_301:"QZNNbet_1/4zgbei",BET_302:"QZNNbet_2/4zgbei",BET_303:"QZNNbet_3/4zgbei",BET_304:"QZNNbet_zgbei",BUTTON_MENU:"QZNNbutton_menu",BUTTON_BACK:"QZNNbutton_back",BUTTON_HELP:"QZNNbutton_help",BUTTON_SET:"QZNNbutton_set",BUTTON_MILI:"QZNNbutton_military",EVENT_CONT:"QZNNevent_continue",EVENT_ISBAND:"QZNNevent_normaldisband",EVENT_MATCH:"QZNNevent_match",EVENT_MATCHES:"QZNNevent_matches"},t}();t.PointConst=f,__reflect(f.prototype,"qznn.PointConst");var _=function(){function t(){}return t.StateNotify1={state:1,total_time:-1,remaining_time:-1,turn_seat:-1,cmp_seat:-1},t.StateNotify2={state:2,total_time:9e3,remaining_time:9e3,turn_seat:-1,cmp_seat:-1},t.StateNotify3={state:3,total_time:1e4,remaining_time:1e4,turn_seat:1,cmp_seat:-1},t.StateNotify4={state:4,total_time:5e3,remaining_time:5e3,turn_seat:-1,cmp_seat:-1},t.CellScore={cell_score:1},t.seatingNotify={seat:2},t.ActionRes={code:0,oper:203},t.ActionNotify={seat:2,oper:203},t.BankerNotify={landlord_seat:2,add_score:[1,2,3]},t.FlopCardNotify={seat:2,cards:[2,5,7,61,23]},t.seatInfoNotify=[{balance:1003475e3,double_val:-1,head:1,head_frame:1,is_seenseencard:!1,is_trusteeship:!1,last_discard_type:-1,lately_valid_discard:[],lately_valid_discard_type:-1,nick_name:"testN156",rob_landlord_val:-1,seat:0,sex:1,vip:6},{balance:1e9,double_val:-1,head:1,head_frame:1,is_seenseencard:!1,is_trusteeship:!1,last_discard_type:-1,lately_valid_discard:[],lately_valid_discard_type:-1,nick_name:"testN188",rob_landlord_val:-1,seat:1,sex:1,vip:8},{balance:18888e6,double_val:-1,head:1,head_frame:1,is_seenseencard:!1,is_trusteeship:!1,last_discard_type:-1,lately_valid_discard:[],lately_valid_discard_type:-1,nick_name:"testN162",rob_landlord_val:-1,seat:2,sex:1,vip:5},{balance:199999e5,double_val:-1,head:1,head_frame:1,is_seenseencard:!1,is_trusteeship:!1,last_discard_type:-1,lately_valid_discard:[],lately_valid_discard_type:-1,nick_name:"testN199",rob_landlord_val:-1,seat:3,sex:1,vip:5}],t.handCardNotify=[{cards:[2,5,7],order_cards:[],type:-1,count:3,seat:0},{cards:[58,61,81],order_cards:[],type:-1,count:3,seat:1},{cards:[22,23,29],order_cards:[],type:-1,count:3,seat:2},{cards:[22,23,29],order_cards:[],type:-1,count:3,seat:3}],t.festCardNotify=[{cards:[2,5,7,58,61],order_cards:[2,5,7,58,61],type:0,count:3,seat:0},{cards:[58,61,7,22,23],order_cards:[58,61,7,22,29],type:8,count:3,seat:1},{cards:[22,23,29,5,7],order_cards:[22,23,29,5,7],type:11,count:3,seat:2},{cards:[58,61,5,22,23],order_cards:[58,61,5,22,23],type:13,count:3,seat:3}],t}();t.testData=_,__reflect(_.prototype,"qznn.testData")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t._view=null,t._popView=null,t._proxy=null,t.flyGlodWays=0,t}return __extends(o,e),o.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners(),this.addEventListeners()},o.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),Log.trace("GameController init()"),this.gameInit(),this.enterGameInfo()},o.prototype.onReconstruction=function(){e.prototype.onReconstruction.call(this),this.model.isBackstage=!1,(this.model.gameState==t.GameStateConst.STATE_IDLE||this.model.gameState==t.GameStateConst.STATE_EXCHANGE)&&this._view.showStartBtn()},o.prototype.cleanTable=function(){this._view.cleanAllStype(),this._view.stopTimer(),this.resetResultInit()},o.prototype.GameFrameResume=function(){e.prototype.GameFrameResume.call(this),this._proxy.qznnRequestRemainTime(),this.model.isBackstage=!0,this.robDealStype(),egret.Tween.removeTweens(this),R.removeAllTimeOut(this),App.TimerManager.removeAll(this)},Object.defineProperty(o.prototype,"model",{get:function(){return e.prototype.getModel.call(this)},enumerable:!0,configurable:!0}),o.prototype.inits=function(){e.prototype.inits.call(this),this._model=new t.GameModel(this),this._proxy=new t.GameProxy(this,this.getModel()),this._view=new t.GameView(this),this._popView=new t.PopView(this)},o.prototype.addListeners=function(){e.prototype.addListeners.call(this),this._proxy.addEvent(),App.MessageCenter.addListener(t.triggerEvent.closeMatchPop,this.closeMatchPop,this),App.MessageCenter.addListener(t.triggerEvent.confirmMatchPop,this.confirmMatchPop,this)},o.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),this._proxy.removeEvent(),App.MessageCenter.removeListener(t.triggerEvent.closeMatchPop,this.closeMatchPop,this),App.MessageCenter.removeListener(t.triggerEvent.confirmMatchPop,this.confirmMatchPop,this)},o.prototype.onUserMoneyChange=function(o){e.prototype.onUserMoneyChange.call(this,o),this.model.playerMoneys[0]=this.player.getMoney(),this._view.setUserMoney(t.QznnPosition.POSITION_SELF,App.CommonUtils.money2Str(this.player.getMoney()))},o.prototype.registers=function(){e.prototype.registers.call(this),App.ViewManager.register(t.ViewConst.Base,this._view),App.ViewManager.register(t.ViewConst.Popup,this._popView),this.registerRecharge(),this.registerRedpacket()},o.prototype.addEventListeners=function(){this.registerFunc(t.CallBacks.onBottomScoreCallBack,this.onBottomScoreCallBack,this),this.registerFunc(t.CallBacks.onStateCallBack,this.onStateCallBack,this),this.registerFunc(t.EVENT.OPERATE_REQ,this.operateReq,this),this.registerFunc(t.CallBacks.onSeatInfoCallBack,this.onSeatInfoCallBack,this),this.registerFunc(t.CallBacks.onSeatCallBack,this.onSeatCallBack,this),this.registerFunc(t.CallBacks.onActionCallBack,this.onActionCallBack,this),this.registerFunc(t.CallBacks.onActionNotifyCallBack,this.onActionNotifyCallBack,this),this.registerFunc(t.CallBacks.onCardInfoCallBack,this.onCardInfoCallBack,this),this.registerFunc(t.CallBacks.onCallBankerCallBack,this.onCallBankerCallBack,this),this.registerFunc(t.CallBacks.onMultipleCalBack,this.onMultipleCalBack,this),this.registerFunc(t.CallBacks.onExchangeNotifyCallBack,this.onExchangeNotifyCallBack,this),this.registerFunc(t.EVENT.EXIT_ROOM,this.exitRoom,this),this.registerFunc(t.EVENT.EXIT_POPUT,this.exitPoput,this),this.registerFunc(t.EVENT.FlopCards,this.flopCards,this),this.registerFunc(t.EVENT.CLOSE_MATCH,this.onCloseMatchPop,this),this.registerFunc(t.EVENT.RECHARGE,this.rechage,this),this.registerFunc(t.EVENT.GAME_SET,this.gameSet,this),this.registerFunc(t.EVENT.RECORD,this.record,this),this.registerFunc(t.EVENT.HELP,this.help,this),this.registerFunc("showFistCard",this.showFistCard,this),this.registerFunc("showBankerBox",this.showBankerBox,this),this.registerFunc(t.EVENT.CLOSE_MATCH,this.closeMatchPop,this),this.registerFunc(t.CallBacks.onExitRoomCallBack,this.onExitRoomCallBack,this),this.registerFunc(t.CallBacks.onRemainingTimeBack,this.onRemainingTimeBack,this)},o.prototype.gameInit=function(){var e=this;App.ViewManager.open(t.ViewConst.Base),App.ViewManager.open(t.ViewConst.Popup),App.SoundManager.playBg(t.QznnSoundConst.BG),this._view.setUserName(t.QznnPosition.POSITION_SELF,this.player.getNickName()),this.model.playerMoneys[0]=this.player.getMoney(),this._view.setUserMoney(t.QznnPosition.POSITION_SELF,App.CommonUtils.money2Str(this.player.getMoney())),this._view.setUserHead(t.QznnPosition.POSITION_SELF,"ui_headImg_"+this.player.getAvatar()),this._view.setUserFrame(t.QznnPosition.POSITION_SELF,"ui_headBox_"+this.player.getAvatarBox()),this._view.showUser(t.QznnPosition.POSITION_SELF),R.setTimeOnce(function(){e.operateReq(t.OperateType.OPER_STARTGAME)},this,500)},o.prototype.enterGameInfo=function(){this.model.isOpenGame=!0;var t=this.model.initGameMss;null!=t&&this.onBottomScoreCallBack(t)},o.prototype.onBottomScoreCallBack=function(t){this.model.baseScore=t.cell_score,this._view.showBaseScore(App.CommonUtils.money2StrTwo(this.model.baseScore))},o.prototype.onStateCallBack=function(e){if(this.model.initGameData.state=App.CommonUtils.copyDataHandler(e),!this.model.isBackstage)switch(this.model.gameState=e.state,this.model.timerInfo=e,e.state){case t.GameStateConst.STATE_IDLE:this.onWait();break;case t.GameStateConst.STATE_MATCH:this.onMatch();break;case t.GameStateConst.STATE_BANKER:this.onBanker(e);break;case t.GameStateConst.STATE_BET:this.onBet(e);break;case t.GameStateConst.STATE_EXCHANGE:this.onDiscard(e)}},o.prototype.onWait=function(){},o.prototype.onMatch=function(){this._view.filishMatch(),this._view.matchStyle(),this._view.stopTimer(),this.model.isContinuity=!1,this.startMatch()},o.prototype.onBanker=function(t){this.robDealStype();var e=Math.round(this.model.timerInfo.remaining_time/1e3);this._view.startTimer(e),this._view.hideTime(),this.model.isContinuity&&this.continuityPoint(),this.matchPoint()},o.prototype.onBet=function(t){this._view.stopTimer();var e=Math.round(t.remaining_time/1e3);this._view.startTimer(e),this._view.hideTime()},o.prototype.onDiscard=function(t){this.startExcange(),this._view.stopTimer(),this._view.hideDoubleBox()},o.prototype.showFistCard=function(){this._view.dealCard(this.model.cardList)},o.prototype.showBankerBox=function(){this._view.showRobBox(),this._view.showTypeTime()},o.prototype.onSeatCallBack=function(t){this.model.selfPosition=t.seat},o.prototype.onSeatInfoCallBack=function(e){var o=t.qznnUtil.resetPosition(e.seat,this.model.selfPosition);this.model.playerMoneys[o]=e.balance,this._view.setUserName(o,e.nick_name),this._view.setUserMoney(o,""+App.CommonUtils.money2Str(e.balance));var i=e.head?e.head:1;if(this._view.setUserHead(o,"ui_headImg_"+i),this._view.setUserFrame(o,"ui_headBox_"+e.head_frame),this._view.showUser(o),this.model["sex_"+o]=e.sex?e.sex:1,e.seat==this.model.selfPosition&&(this.model.vip=e.vip+1),e.is_banker){var n=200+e.call_banker_val;this.model.bankerSeat=o,this._view.showBoss(this.model.bankerSeat),this._view.showBankerTpye(o,n)}else if(this.model.timerInfo.state==t.GameStateConst.STATE_BET)this.model.playerBetTimes[o]=e.add_score_val,this._view.showPlayerBetTpye(this.model.playerBetTimes);else if(this.model.timerInfo.state==t.GameStateConst.STATE_BANKER){if(-1==e.call_banker_val)return;var n=200+e.call_banker_val;this.model.callBossTimes[o]=n,this._view.showPlayerRobTpye(this.model.callBossTimes),o==t.QznnPosition.POSITION_SELF&&this._view.hideRobBox()}},o.prototype.onCardInfoCallBack=function(e,o){Log.log("手牌信息",e,this.model.timerInfo);var i=t.qznnUtil.resetPosition(e.seat,this.model.selfPosition);if(e.order_cards.length&&(this.model["cardList_"+i]=this.createCard(e.order_cards),this.model.openType[i]=e.type),i==t.QznnPosition.POSITION_SELF&&(this.model.cardList=this.createCard(e.cards)),this.model.initGameData.CardInfo=App.CommonUtils.copyDataHandler(e),!this.model.isBackstage){var n=this,s=this.model.timerInfo.total_time-this.model.timerInfo.remaining_time;(i==t.QznnPosition.POSITION_SELF||o)&&(this.model.timerInfo.state==t.GameStateConst.STATE_EXCHANGE?200>=s?(n.showFistCard(),App.TimerManager.doTimer(3e3,1,function(){n.showAllCards()},this,function(){App.TimerManager.removeAll(this),n.showTypeCard()},this)):(this.showAllCards(!1),this.ontypeCardAni(),this._view.showStartBtn()):this.model.timerInfo.state==t.GameStateConst.STATE_BANKER?200>=s?this._view.playBoneAni():(this._view.directCard(this.model.cardList),this._view.showTypeTime(),this.displayRobBtn()):this._view.directCard(this.model.cardList))}},o.prototype.displayRobBtn=function(){-1!=this.model.callBossTimes[0]?this._view.hideRobBox():this._view.showRobBox()},o.prototype.showTypeCard=function(){var t=this;App.TimerManager.doTimer(1e3,1,function(){t.ontypeCardAni()},this,function(){App.TimerManager.removeAll(this),t.flyGlod()},this)},o.prototype.flyGlod=function(){var t=this;App.TimerManager.doTimer(1e3,1,function(){t._view.flyWinGlod(t.flyGlodWays,t.model.playerWinMoney,t.model.bankerSeat)},this,function(){App.TimerManager.removeAll(this),t.showstartBtn()},this)},o.prototype.changeMoney=function(){for(var t=this.model.playerMoneys,e=0;e<t.length;e++)this._view.setUserMoney(e,App.CommonUtils.money2Str(t[e]))},o.prototype.showstartBtn=function(){var e=this;this.changeMoney(),R.setTimeOut(function(){e.model.playerWinMoney[t.QznnPosition.POSITION_SELF]&&App.SoundManager.playEffect(t.QznnSoundConst.WIN_GAME),e._view.showStartBtn()},this,3e3)},o.prototype.lightMoney=function(t){void 0===t&&(t=!0);for(var e=this.model.playerWinMoney,o=0;o<e.length;o++)t?this._view.getMoneyLight(o):this._view.directFontEnlarge(o)},o.prototype.onCallBankerCallBack=function(e){this.model.betTimes=[];var o=t.qznnUtil.resetPosition(e.banker_seat,this.model.selfPosition);this.model.bankerSeat=o;var i=e.add_score;if(this.model.betTimes=i,this.model.initGameData.Banker=App.CommonUtils.copyDataHandler(e),!this.model.isBackstage){this._view.directCard(this.model.cardList);var n=this.model.timerInfo.total_time-this.model.timerInfo.remaining_time,s=this;this.model.timerInfo.state==t.GameStateConst.STATE_BET&&(200>=n?R.setTimeOnce(function(){s.startPlayerBet(),s._view.showBoss(this.model.bankerSeat),s._view.setBetTimes(this.model.betTimes),s.showBetTimes()},this,1e3):(this.startPlayerBet(),this._view.showBoss(this.model.bankerSeat),this._view.setBetTimes(this.model.betTimes),this.showBetTimes(),this._view.showPlayerBetTpye(this.model.playerBetTimes)))}},o.prototype.showBetTimes=function(){this.model.bankerSeat==t.QznnPosition.POSITION_SELF?(this._view.stopTimer(),this._view.showTips(),this._view.setTiptext("等待闲家下注...")):this.model.isBet?(this._view.stopTimer(),this._view.showTips(),this._view.setTiptext("等待其他玩家下注...")):(this._view.showTypeTime(),this._view.showDoubleBox())},o.prototype.onMultipleCalBack=function(e){var o=t.qznnUtil.resetPosition(e.seat,this.model.selfPosition);this.model.playerBetTimes[o]=e.add_score,this._view.showPlayerBetTpye(this.model.playerBetTimes)},o.prototype.onExchangeNotifyCallBack=function(e){if(this.exchangeInit(e.infos),this.model.initGameData.Exchange=App.CommonUtils.copyDataHandler(e),!this.model.isBackstage){var o=e.infos;this.model.isContinuity=!0;for(var i=this.model.timerInfo.total_time-this.model.timerInfo.remaining_time,n=0;n<o.length;n++){var s=o[n],r=t.qznnUtil.resetPosition(s.seat,this.model.selfPosition);this.model.timerInfo.state==t.GameStateConst.STATE_EXCHANGE&&(200>=i?r!=this.model.bankerSeat&&0!=s.change_money&&(s.change_money>0?this._view.createFlyCoin(r,this.model.bankerSeat):this._view.createFlyCoin(this.model.bankerSeat,r,!0)):this.lightMoney(!1))}this.flyGlodWay(),this.matchsPoint()}},o.prototype.exchangeInit=function(e){if(e.length){for(var o=0;o<e.length;o++){var i=e[o],n=t.qznnUtil.resetPosition(i.seat,this.model.selfPosition);this.model.playerWinMoney[n]=i.change_money,this._view.playerWinMoney(i.change_money,n),this.model.playerMoneys[n]=i.balance}this.setRecordInit(this.model.playerWinMoney[t.QznnPosition.POSITION_SELF])}},o.prototype.flyGlodWay=function(){for(var t=this.model.playerWinMoney,e=[],o=[],i=0;i<t.length;i++)i!=this.model.bankerSeat&&0!=t[i]&&(t[i]>0?e.push(1):e.push(2));o=this.findSameValue(e),o.length&&(1==o.length?2==o[0][0]?this.flyGlodWays=1:this.flyGlodWays=2:this.flyGlodWays=3)},o.prototype.findSameValue=function(t){var e=t.sort(function(t,e){return t-e});if(!(e.length<=0)){for(var o=[],i=-1,n=0;n<e.length;n++){var s=e[n];i==s?o[o.length-1].push(s):(i=s,o.push([s]))}return o}},o.prototype.showAllCards=function(t){void 0===t&&(t=!0);for(var e=0;4>e;e++){var o=this.model["cardList_"+e],i=this.model.openType[e];t?this._view.accountShowCard(e,o,i):this._view.directShowCard(e,o,i)}},o.prototype.ontypeCardAni=function(){this._view.typeCardAni(this.model.openType)},o.prototype.createCard=function(e){if(e.length>0){for(var o=e,i=[],n=0;n<o.length;n++){var s=o[n],r=t.qznnUtil.getPokerTexture(s);i.push(r)}return i}},o.prototype.onActionCallBack=function(e){if(e.code==t.ErrorConst.CODE_ZERO)switch(e.oper){case t.OperateType.OPER_STARTGAME:this._view.filishMatch(),this._view.matchStyle(),this._view.stopTimer(),this.startMatch();break;case t.OperateType.OPER_STARTGAMESEEN:this._view.showStartBtn();break;case t.OperateType.OPER_NOROB:this.robReturn(e);break;case t.OperateType.OPER_ROBONE:this.robReturn(e);break;case t.OperateType.OPER_ROBTWO:this.robReturn(e);break;case t.OperateType.OPER_ROBTHREE:this.robReturn(e);break;case t.OperateType.OPER_BET0:this.doubleReturn(e);break;case t.OperateType.OPER_BET1:this.doubleReturn(e);break;case t.OperateType.OPER_BET2:this.doubleReturn(e);break;case t.OperateType.OPER_BET3:this.doubleReturn(e);break;case t.OperateType.OPER_BET4:this.doubleReturn(e)}else e.code==t.ErrorConst.CODE_SEVEN&&(this.disbandPoint(),this.onExitRoomCallBack())},o.prototype.onActionNotifyCallBack=function(e){e.seat==this.model.selfPosition&&this._view.hideOperBtn();var o=t.qznnUtil.resetPosition(e.seat,this.model.selfPosition);switch(e.oper){case t.OperateType.OPER_STARTGAME:e.seat==this.model.selfPosition&&this._view.onReady();break;case t.OperateType.OPER_STARTGAMESEEN:e.seat==this.model.selfPosition&&this._view.onReady();break;case t.OperateType.OPER_NOROB:this.model.callBossTimes[o]=e.oper,this._view.showType(o,t.OperateType.OPER_NOROB);break;case t.OperateType.OPER_ROBONE:this.model.callBossTimes[o]=e.oper,this._view.showType(o,t.OperateType.OPER_ROBONE);break;case t.OperateType.OPER_ROBTWO:this.model.callBossTimes[o]=e.oper,this._view.showType(o,t.OperateType.OPER_ROBTWO);break;case t.OperateType.OPER_ROBTHREE:this.model.callBossTimes[o]=e.oper,this._view.showType(o,t.OperateType.OPER_ROBTHREE);break;case t.OperateType.OPER_DESTROY_LeaveTable:this.disbandPoint(),this.player.setMoney(this.model.playerMoneys[0]),o==t.QznnPosition.POSITION_SELF&&this.onExitRoomCallBack();break;case t.OperateType.OPER_DESTROY_TO_LOBBY:this.disbandPoint(),this.player.setMoney(this.model.playerMoneys[0]),o==t.QznnPosition.POSITION_SELF&&this.onExitRoomCallBack();break;case t.OperateType.OPER_DESTROY_IDLE:this.disbandPoint();break;case t.OperateType.OPER_DESTROY_MATCH:this.disbandPoint()}},o.prototype.robReturn=function(e){this._view.hideRobBox(),this._view.showType(t.QznnPosition.POSITION_SELF,e.oper),this.robPoint(e.oper)},o.prototype.doubleReturn=function(e){this._view.hideDoubleBox(),this.model.isBet=!0,this.model.timerInfo.state==t.GameStateConst.STATE_BET&&(this._view.stopTimer(),this._view.showTips(),this._view.setTiptext("等待其他玩家下注...")),this.doublePoint(e.oper)},o.prototype.setRecordInit=function(t){if(!(this.model.isAddRecord||0>=t)){this.model.isAddRecord=!0;var e=GameBase.getCurrServerTime(),o=App.CommonUtils.money2Str(t);if(Number(o)>0){var i={time:e,isRob:this.model.bankerSeat,hit_money:o};this.model.recordList.unshift(i)}this.model.recordList.length>50&&this.model.recordList.splice(50,this.model.recordList.length-50)}},o.prototype.createWinRecord=function(){var e=GameBase.getCurrServerTime(),o=this.model.playerWinMoney[t.QznnPosition.POSITION_SELF];if(o){var i=this.model.recordList;if(i.length){for(var n=[],s=0;s<i.length;s++){var r=i[s];n.push(r.issue)}if(n.indexOf(e)>-1)return;this.addWinRecord(e,o)}else this.addWinRecord(e,o)}},o.prototype.addWinRecord=function(t,e){var o={issue:t,hit_money:App.CommonUtils.money(e)};this.model.recordList.unshift(o),this.model.recordList.length>50&&this.model.recordList.splice(50,this.model.recordList.length-50)},o.prototype.renderWinRecord=function(){this.model.recordList.length&&this._popView.renderRecord(this.model.recordList)
},o.prototype.onRemainingTimeBack=function(e){this.model.isBackstage=!1;var o=this.model.initGameData.state;switch(o.remaining_time=e.remaining_time,this.onStateCallBack(this.model.initGameData[t.QznnGameMSG.state]),o.state){case t.GameStateConst.STATE_IDLE:this.showIdleType();break;case t.GameStateConst.STATE_BANKER:this.model.initGameData[t.QznnGameMSG.CardInfo]&&this.onCardInfoCallBack(this.model.initGameData[t.QznnGameMSG.CardInfo],!0);break;case t.GameStateConst.STATE_BET:this.model.initGameData[t.QznnGameMSG.Banker]&&this.onCallBankerCallBack(this.model.initGameData[t.QznnGameMSG.Banker]);break;case t.GameStateConst.STATE_EXCHANGE:this.model.initGameData[t.QznnGameMSG.CardInfo]&&this.onCardInfoCallBack(this.model.initGameData[t.QznnGameMSG.CardInfo],!0),this.model.initGameData[t.QznnGameMSG.Exchange]&&this.onExchangeNotifyCallBack(this.model.initGameData[t.QznnGameMSG.Exchange])}},o.prototype.showIdleType=function(){this.model.cardList.length&&(this.excangeStype(),this.showAllCards(!1),this.ontypeCardAni(),this._view.showStartBtn(),this.lightMoney(!1))},o.prototype.operateReq=function(t){this._proxy.actionRequest(t)},o.prototype.exitRoom=function(){this._proxy.requestExitRoom()},o.prototype.gameSet=function(){this._popView.openSet()},o.prototype.help=function(){this._popView.openHelp()},o.prototype.record=function(){this._popView.openRecord(),this.renderWinRecord()},o.prototype.rechage=function(){App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.exitPoput=function(){this.model.gameState==t.GameStateConst.STATE_IDLE||this.model.gameState==t.GameStateConst.STATE_MATCH||this.model.gameState==t.GameStateConst.STATE_EXCHANGE?this._proxy.requestExitRoom():this._popView.openExitPoput(),this.backPoint()},o.prototype.flopCards=function(){var e=t.testData.FlopCardNotify;t.qznnUtil.resetPosition(e.seat,this.model.selfPosition)},o.prototype.onCloseMatchPop=function(){this._view.showStartBtn()},o.prototype.onExitRoomCallBack=function(){this.goBack2Room()},o.prototype.closeMatchPop=function(t){if(1==t){var e=101;this.operateReq(e)}else 3==t&&this.exitRoom()},o.prototype.confirmMatchPop=function(t){2==t?this.exitRoom():3==t&&App.ViewManager.open(LobbyViewConst.Recharge)},o.prototype.resetResultInit=function(){for(var t=0;4>t;t++)this.model.playerWinMoney[t]=0,this.model.callBossTimes[t]=-1,this.model.openType[t]=-1,this.model.playerBetTimes[t]=0,this.model["cardList_"+t]=[];this.model.isAddRecord=!1,this.model.betTimes=[],this.model.cardList=[]},o.prototype.startMatch=function(){this.cleanMatchStype(),this._view.onMatch(),this.resetResultInit()},o.prototype.startBanker=function(t){this.robDealStype()},o.prototype.startPlayerBet=function(){this.PlayerBetStype()},o.prototype.startExcange=function(){this.excangeStype()},o.prototype.cleanMatchStype=function(){this._view.cleanAllStype(),this._view.hideOtherUser()},o.prototype.robDealStype=function(){this._view.filishMatch()},o.prototype.PlayerBetStype=function(){this.robDealStype(),this._view.hideRobBox(),-1!=this.model.bankerSeat&&-1!=this.model.callBossTimes[this.model.bankerSeat]&&this._view.showBankerTpye(this.model.bankerSeat,this.model.callBossTimes[this.model.bankerSeat])},o.prototype.excangeStype=function(){this.PlayerBetStype(),this._view.hideDoubleBox(),this._view.hideRobBox(),this._view.hideTips(),this._view.showPlayerBetTpye(this.model.playerBetTimes),this.model.bankerSeat>=0&&this._view.showBoss(this.model.bankerSeat),this.model.isBet=!1},o.prototype.playerBetTimes=function(){for(var t=this.model.playerBetTimes,e=0;e<t.length;e++){var o=t[e];this._view.showBetType(e,o)}},o.prototype.robPoint=function(e){R.sendPlayerAction(t.PointConst.QZNN_POINT["ROB_"+e+"BEI"])},o.prototype.doublePoint=function(e){R.sendPlayerAction(t.PointConst.QZNN_POINT["BET_"+e])},o.prototype.btnMenuPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_MENU)},o.prototype.backPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.BUTTON_BACK)},o.prototype.continuityPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.EVENT_CONT)},o.prototype.disbandPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.EVENT_ISBAND)},o.prototype.matchPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.EVENT_MATCH)},o.prototype.matchsPoint=function(){R.sendPlayerAction(t.PointConst.QZNN_POINT.EVENT_MATCHES)},o.prototype.destroy=function(){e.prototype.destroy.call(this),App.TimerManager.removeAll(this),this._view.destroy(),this._popView.destroy(),this.model.destroy(),this._proxy.destroy(),t.qznnGoldCoin.cleanqznnGoldCoinPool(),this._view=void 0,this._popView=void 0,this._proxy=void 0},o}(base.GameController);t.GameController=e,__reflect(e.prototype,"qznn.GameController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,t)||this;return o.initData(),o}return __extends(o,e),o.prototype.initData=function(){this.bankerSeat=-1,this.cardList=[],this.cardList_0=[],this.cardList_1=[],this.cardList_2=[],this.cardList_3=[],this.callBossTimes=[-1,-1,-1,-1],this.isDealAni=!0,this.selfPosition=0,this.sex_0=t.SexConst.MALE,this.sex_1=t.SexConst.MALE,this.sex_2=t.SexConst.MALE,this.lastScore=0,this.playerMoneys=[0,0,0,0],this.openType=[-1,-1,-1,-1],this.betTimes=[],this.playerBetTimes=[0,0,0,0],this.initGameMss=null,this.isOpenGame=!1,this.baseScore=-1,this.isBet=!1,this.playerWinMoney=[0,0,0,0],this.isContinuity=!1,this.recordList=[],this.isBackstage=!1,this.initGameData={CardInfo:null,Banker:null,Exchange:null,state:null},this.isAddRecord=!1},o.prototype.destroy=function(){e.prototype.destroy.call(this),this.initData(),this.cardList_0=void 0,this.cardList_1=void 0,this.cardList_2=void 0},o}(base.GameModel);t.GameModel=e,__reflect(e.prototype,"qznn.GameModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),o.prototype.onBottomScore=function(e){Log.log("低分",e),this.model.initGameMss=App.CommonUtils.copyDataHandler(e),this.applyFunc(t.CallBacks.onBottomScoreCallBack,e)},o.prototype.onState=function(e){Log.log("游戏状态",e),this.applyFunc(t.CallBacks.onStateCallBack,e)},o.prototype.onAction=function(e){Log.log("动作返回",e),this.applyFunc(t.CallBacks.onActionCallBack,e)},o.prototype.onActionNotify=function(e){Log.log("动作广播",e),this.applyFunc(t.CallBacks.onActionNotifyCallBack,e)},o.prototype.onSeat=function(e){Log.log("座位号",e),this.applyFunc(t.CallBacks.onSeatCallBack,e)},o.prototype.onSeatInfo=function(e){Log.log("座位号玩家信息",e),this.applyFunc(t.CallBacks.onSeatInfoCallBack,e)},o.prototype.onCardInfo=function(e){Log.log("手牌信息",e),this.applyFunc(t.CallBacks.onCardInfoCallBack,e)},o.prototype.onCallBanker=function(e){Log.log("知抢庄结果",e),this.applyFunc(t.CallBacks.onCallBankerCallBack,e)},o.prototype.onMultipleCalBack=function(e){Log.log("下注广播",e),this.applyFunc(t.CallBacks.onMultipleCalBack,e)},o.prototype.onExchangeNotify=function(e){Log.log("结算广播",e),this.applyFunc(t.CallBacks.onExchangeNotifyCallBack,e)},o.prototype.onExitRoomCallBack=function(e){Log.log("离开房间",e),this.applyFunc(t.CallBacks.onExitRoomCallBack,e)},o.prototype.onCombatRecord=function(e){Log.log("战绩",e),this.applyFunc(t.CallBacks.onCombatRecordCallBack,e)},o.prototype.onRemainingTime=function(e){Log.log("请求剩余时间",e),this.applyFunc(t.CallBacks.onRemainingTimeBack,e)},o.prototype.actionRequest=function(e){var o={oper:e};this.send(t.ProxyConst.ACTION_Q,o)},o.prototype.requestExitRoom=function(){e.prototype.sendLeaveGame.call(this)},o.prototype.requestRecord=function(e){this.send(t.ProxyConst.COMBAT_RECORD_Q,e)},o.prototype.qznnRequestRemainTime=function(){this.send(t.ProxyConst.RRMA_TIME_Q)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.addListener(t.ProxyConst.STATE_R,this.onState,this),this.addListener(t.ProxyConst.ACTION_R,this.onAction,this),this.addListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.addListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.addListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.addListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.addListener(t.ProxyConst.CALL_BANKER,this.onCallBanker,this),this.addListener(t.ProxyConst.ADD_SCORE,this.onMultipleCalBack,this),this.addListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.addListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.addListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this),this.addListener(t.ProxyConst.RRMA_TIME_S,this.onRemainingTime,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.BOTTOM_SCORE_N,this.onBottomScore,this),this.removeListener(t.ProxyConst.STATE_R,this.onState,this),this.removeListener(t.ProxyConst.ACTION_R,this.onAction,this),this.removeListener(t.ProxyConst.ACTION_N,this.onActionNotify,this),this.removeListener(t.ProxyConst.SEAT_R,this.onSeat,this),this.removeListener(t.ProxyConst.SEAT_INFO,this.onSeatInfo,this),this.removeListener(t.ProxyConst.CARD_INFO_R,this.onCardInfo,this),this.removeListener(t.ProxyConst.CALL_BANKER,this.onCallBanker,this),this.removeListener(t.ProxyConst.ADD_SCORE,this.onMultipleCalBack,this),this.removeListener(t.ProxyConst.EXCHANGE_N,this.onExchangeNotify,this),this.removeListener(t.ProxyConst.EXIT_ROOM_R,this.onExitRoomCallBack,this),this.removeListener(t.ProxyConst.COMBAT_RECORD_R,this.onCombatRecord,this),this.removeListener(t.ProxyConst.RRMA_TIME_S,this.onRemainingTime,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this)},o}(base.GameProxy);t.GameProxy=e,__reflect(e.prototype,"qznn.GameProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t.setBrnnHitRate=function(e){t.hitRate=e},t.getBrnnHitRate=function(){return t.hitRate},t.catName=function(t){for(var e=t.toString().split(""),o=[],i=0;i<e.length;i++)o.push(Number(e[i]));return o},t.resetPosition=function(t,e){var o=t-e;return o=0>o?o+4:o},t.getCardWithNum=function(t){var e=t>>4&15,o=15&t,i={value:o,color:e,number:t};return i},t.getPokerTexture=function(t){var e=t>>4&15,o=15&t,i=11==o?"j":12==o?"q":13==o?"k":o;if(0==e)var n="black";else if(1==e)var n="heart";else if(2==e)var n="flower";else if(3==e)var n="square";var s="common_ui_card"+n+i+"_png";return 0==e&&0==i&&(s="",Log.warn("cardNum:",e,i)),s},t.chipArr=function(t){for(var e=[],o=[],i={},n=0;n<t.length;n++)0!=t[n]&&(i={digit:t[n],bit:n},e.push(i)),o=e.length>=3?e.slice(0,3):e;return o},t.deepClone=function(t){var e,o=Object.prototype.toString.call(t);if("[object Array]"===o){if(e=[],t.length>0)for(var i=0;i<t.length;i++)e.push(this.deepClone(t[i]))}else if("[object Object]"===o){e={};for(var i in t)e[i]=this.deepClone(t[i])}else e=t;return e},t.getPoints=function(t){for(var e=[],o=0;5>o;o++){var i=t.getChildAt(o),n=Math.floor(o%5),s=0;0!=n&&(s=n>2?-12:0);var r={x:i.x,y:i.y,_y:i.y+s};e.push(r)}return e},t.dealCard=function(t,e,o,i){var n=0;if(1==i)for(var s=0;5>s;s++){var r=t[s];this.pieceDealCard(r,e,o,n),n++}else for(var a=5;10>a;a++){var r=t[a];this.pieceDealCard(r,e,o,n),n++}},t.pieceDealCard=function(t,e,o,i){5>i&&(egret.Tween.removeTweens(t),egret.Tween.get(t).wait(o*i*1.5).to({x:e[t.name].x,y:e[t.name].y,scaleX:1,scaleY:1,alpha:1,rotation:0},o).call(function(){}))},t.getBetIndex=function(t){var e=String(t).split(""),o=e[e.length-1];return o},t.hitRate=null,t}();t.qznnUtil=e,__reflect(e.prototype,"qznn.qznnUtil")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Main,"qznn","GameSkin")||this;return o.isMultipleOpen=!1,o.typePosList=[],o.MenuView.initComponent(t),o.CardView.initComponent(t),o}return __extends(o,e),o.prototype.initUI=function(){this.Mask.visible=!1,this.hideBaseScore(),this.MenuView.init(),this.PlayerMessage.init(),this.CardView.init(),this.TypeBox.init(),this.typePosList=this.PlayerMessage.getFlyCoordinate(),this.PlayerMessage.initInfo(),this.initBroadcast(this)},o.prototype.cleanAllStype=function(){this.recoverCard(),this.hideAllBoss(),this.hideTypeAll(-1),this.hideDoubleBox(),this.hideRobBox(),this.hideStartBtn(),this.hideTips(),this.CardView.hideCardTpye(),this.qznnBone.hideStartAni(),this.PlayerMessage.initInfo()},o.prototype.onMatch=function(){this.MenuView.onMatch()},o.prototype.filishMatch=function(){this.MenuView.filishMatch()},o.prototype.hideAllType=function(t){this.TypeBox.hideAllType(t)},o.prototype.playBoneAni=function(){var t=StageUtils.getInstance().getWidth()/2,e=StageUtils.getInstance().getHeight()/2,o=this;this.playAni("qznn_start",t,e,void 0,function(){o.applyFunc("showFistCard")},this)},o.prototype.typeCardAni=function(t){this.CardView.typeCardAni(t)},o.prototype.hideCardTpye=function(){this.CardView.hideCardTpye()},o.prototype.showCardTpye=function(){this.CardView.showCardTpye()},o.prototype.playAni=function(t,e,o,i,n,s){this.qznnBone.playAni(t,e,o,i,n,s)},o.prototype.flyWinGlod=function(t,e,o){1==t?(this.PlayerMessage.flyWinGlod(!0),this.showLoseAndWinMoney(1,e,o)):2==t?(this.showLoseAndWinMoney(1,e,o),this.PlayerMessage.flyWinGlod()):(this.PlayerMessage.flyWinGlod(!0),this.showLoseAndWinMoney(2,e,o),R.setTimeOnce(function(){this.showLoseAndWinMoney(3,e,o),this.PlayerMessage.flyWinGlod()},this,1200))},o.prototype.showLoseAndWinMoney=function(t,e,o){for(var i=e,n=0;n<i.length;n++)1==t?this.PlayerMessage.fontEnlarge(n):2==t?(n!=o||0!=i[n])&&i[n]<0&&this.PlayerMessage.fontEnlarge(n):n!=o?i[n]>0&&this.PlayerMessage.fontEnlarge(n):this.PlayerMessage.fontEnlarge(n)},o.prototype.showLoseMoney=function(t){for(var e=0;e<t.length;e++);},o.prototype.showBaseScore=function(t){this.BaseScore.text="底注: "+t,this.BaseScoreBox.visible=!0},o.prototype.hideBaseScore=function(){this.BaseScoreBox.visible=!1},o.prototype.hideTips=function(){this.TypeBox.hideTips()},o.prototype.setUserName=function(t,e){this.PlayerMessage.setUserName(t,e)},o.prototype.getUserName=function(t){return this.PlayerMessage.getUserName(t)},o.prototype.setUserMoney=function(t,e){this.PlayerMessage.setUserMoney(t,e)},o.prototype.setUserHead=function(t,e){this.PlayerMessage.setUserHead(t,e)},o.prototype.setUserFrame=function(t,e){this.PlayerMessage.setUserFrame(t,e)},o.prototype.showUser=function(t){this.PlayerMessage.showUser(t)},o.prototype.hideUser=function(t){this.PlayerMessage.hideUser(t)},o.prototype.startGameReq=function(){this.MenuView.hideStartBtn()},o.prototype.showStartBtn=function(){this.MenuView.showStartBtn()},o.prototype.hideStartBtn=function(){this.MenuView.hideStartBtn()},o.prototype.matchStyle=function(){this.MenuView.matchStyle()},o.prototype.hideOtherUser=function(){this.PlayerMessage.hideOtherUser()},o.prototype.setBetTimes=function(t){this.MenuView.setBetTimes(t)},o.prototype.dealCard=function(t){this.CardView.dealCard(t)},o.prototype.directCard=function(t){this.CardView.directCard(t)},o.prototype.accountShowCard=function(t,e,o){this.CardView.accountShowCard(t,e,o)},o.prototype.directShowCard=function(t,e,o){this.CardView.directShowCard(t,e,o)},o.prototype.directFontEnlarge=function(t){this.PlayerMessage.directFontEnlarge(t)},o.prototype.getMoneyLight=function(t){this.PlayerMessage.getMoneyLight(t)},o.prototype.clearAllMoneyLight=function(){this.PlayerMessage.clearAllMoneyLight()},o.prototype.setTiptext=function(t){this.TypeBox.setTiptext(t)},o.prototype.recoverCard=function(){this.CardView.recoverCard()},o.prototype.showRobBox=function(){this.MenuView.showRobBox(),this.MenuView.hideDoubleBox()},o.prototype.hideRobBox=function(){this.MenuView.hideRobBox()},o.prototype.startTimer=function(t,e,o){this.MenuView.startTimer(t)},o.prototype.stopTimer=function(){this.MenuView.stopTimer()},o.prototype.hideTime=function(){this.MenuView.hideTime()},o.prototype.showTypeTime=function(){this.MenuView.showTypeTime()},o.prototype.showBankerTpye=function(t,e){this.TypeBox.showBankerTpye(t,e)},o.prototype.showPlayerBetTpye=function(t){this.TypeBox.showPlayerBetTpye(t)},o.prototype.showDoubleBox=function(){this.MenuView.hideRobBox(),this.MenuView.showDoubleBox()},o.prototype.hideDoubleBox=function(){this.MenuView.hideDoubleBox()},o.prototype.hideOperBtn=function(){this.MenuView.hideOperBtn()},o.prototype.showTips=function(){this.TypeBox.showTips()},o.prototype.showType=function(t,e){this.TypeBox.showType(t,e)},o.prototype.showPlayerRobTpye=function(t){this.TypeBox.showPlayerRobTpye(t)},o.prototype.showBetType=function(t,e){this.TypeBox.showBetType(t,e)},o.prototype.playerWinMoney=function(t,e){this.PlayerMessage.playerWinMoney(t,e)},o.prototype.createFlyCoin=function(t,e,o){void 0===o&&(o=!1),this.PlayerMessage.createFlyCoin(t,e,o)},o.prototype.hideType=function(t){this.TypeBox.hideType(t)},o.prototype.hideBetType=function(t){this.TypeBox.hideBetType(t)},o.prototype.hideTypeAll=function(t){this.TypeBox.hideAllType(t)},o.prototype.showBoss=function(t){this.TypeBox.showBoss(t)},o.prototype.hideBoss=function(t){this.TypeBox.hideBoss(t)},o.prototype.hideAllBoss=function(){this.TypeBox.hideAllBoss()},o.prototype.robBanker=function(){},o.prototype.onReady=function(){this.stopTimer(),this.hideAllBoss(),this.recoverCard()},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.MenuView.addEvent()},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.MenuView.removeEvent()},o.prototype.destroy=function(){this._isDestroy||(e.prototype.destroy.call(this),egret.warn("抢庄牛牛 GameView destroy"),this.MenuView.destroy(),this.CardView.destroy(),this.qznnBone.destroy(),this.PlayerMessage.destroy(),t.QznnTypeBones.cleanFormPool())},o}(base.GameView);t.GameView=e,__reflect(e.prototype,"qznn.GameView")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(e){var o=t.call(this,e,LayerManager.UI_Popup,"qznn","PopSkin")||this;return o.ClosePoput.initComponent(e),o.init(),o}return __extends(e,t),e.prototype.init=function(){this.GameSet.initSet(),this.Help.initUI(),this.ClosePoput.hidePopInit()},e.prototype.openHelp=function(){this.Help.showPopup()},e.prototype.openSet=function(){this.GameSet.showPopup()},e.prototype.openRecord=function(){this.Record.showPopup()},e.prototype.renderRecord=function(t){this.Record.rankData(t)},e.prototype.openExitPoput=function(){this.ClosePoput.openPopup(2)},e.prototype.addEvent=function(){t.prototype.addEvent.call(this),this.ClosePoput.addEvent(),this.Help.addEvent()},e.prototype.removeEvent=function(){t.prototype.removeEvent.call(this),this.ClosePoput.removeEvent(),this.Help.removeEvent()},e.prototype.destroy=function(){this._isDestroy||(t.prototype.destroy.call(this),this.Help.destroy(),this.GameSet.destroy(),this.Record.destroy(),this.ClosePoput.destroy())},e}(base.GameView);t.PopView=e,__reflect(e.prototype,"qznn.PopView")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getHeight=function(){return this.height},e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){var e=this.data,o="qzbull_ui_"+e.imgId+"score";this.bgIcon.texture=RES.getRes(o),this.enterYun.text="入场限制"+App.CommonUtils.money2StrTwo(e.ent_limit)+"元",this.botScore.text=App.CommonUtils.money2StrTwo(e.cell_score)+"底分"}},e}(eui.ItemRenderer);t.QznnRoomIcon=e,__reflect(e.prototype,"qznn.QznnRoomIcon")}(qznn||(qznn={}));var qznn;!function(t){var e=function(){function t(){}return t.METHOD={ENTER_GAME:"1001",BACK_GAME:"1002"},t}();t.RoomConst=e,__reflect(e.prototype,"qznn.RoomConst")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(){var t=e.call(this)||this;return t._view=null,t._proxy=null,Log.trace("RoomController init()"),t}return __extends(o,e),o.prototype.onCreate=function(){e.prototype.onCreate.call(this),this.inits(),this.addListeners()},o.prototype.onInit=function(){e.prototype.onInit.call(this),this.registers(),App.ViewManager.open(t.ViewConst.Base),this._proxy.requestGameList()},o.prototype.inits=function(){this._model=new t.RoomModel(this),this._view=new t.RoomView(this),this._proxy=new t.RoomProxy(this,this.getModel())},o.prototype.registers=function(){App.ViewManager.register(t.ViewConst.Base,this._view),this.registerFunc(t.RoomConst.METHOD.BACK_GAME,this.onBack2Lobby,this),this.registerFunc(t.RoomConst.METHOD.ENTER_GAME,this.onEnterGame,this),this.registerFunc(t.CallBacks.onGameListCallBack,this.onGameListCallBack,this)},o.prototype.onBack2Lobby=function(){this.goBack2Lobby()},o.prototype.onEnterGame=function(t){var e=GameModuleMgr.i.getGameByName("qznn"),o={sceneType:e.mArrGameType[t]};this.goEnterGame(o)},o.prototype.addListeners=function(){this._proxy.addEvent()},o.prototype.removeListeners=function(){this._proxy.removeEvent()},Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),o.prototype.onGameListCallBack=function(t){console.log("游戏列表"),this._view.createList(t)},o.prototype.destroy=function(){e.prototype.destroy.call(this),egret.warn("RoomController destroy"),this._model.destroy(),this._proxy.destroy(),this._view.destroy(),this._view=void 0,this._model=void 0,this._proxy=void 0},o}(base.RoomController);t.RoomController=e,__reflect(e.prototype,"qznn.RoomController")}(qznn||(qznn={}));var qznn;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roleName="",e}return __extends(e,t),e}(base.RoomModel);t.RoomModel=e,__reflect(e.prototype,"qznn.RoomModel")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t,o){return e.call(this,t,o)||this}return __extends(o,e),Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),o.prototype.onGameList=function(e){Log.log("返回游戏列表",e),this.applyFunc(t.CallBacks.onGameListCallBack,e)},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),this.addListener(t.ProxyConst.GAME_LIST_S,this.onGameList,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),this.removeListener(t.ProxyConst.GAME_LIST_S,this.onGameList,this)},o.prototype.requestGameList=function(){var e={token:GamePlayerMgr.i.getPlayer().getToken(),game_name:"qznn"};this.send(t.ProxyConst.GAME_LIST_Q,e)},o.prototype.destroy=function(){e.prototype.destroy.call(this)},o}(base.RoomProxy);t.RoomProxy=e,__reflect(e.prototype,"qznn.RoomProxy")}(qznn||(qznn={}));var qznn;!function(t){var e=function(e){function o(t){var o=e.call(this,t,LayerManager.Game_Bg,"qznn","Room")||this;return o.deskList=[],o._mIsOnThrow=!1,o._mThrowV=0,o}return __extends(o,e),o.prototype.initUI=function(){e.prototype.initUI.call(this),this.Heip.initUI(),App.OffsetLeft(this.arrowLeft),this.scrollerItem.viewport=this.gameList,this.scrollerItem.scrollPolicyV=eui.ScrollPolicy.OFF,this.scrollerItem.scrollPolicyH=eui.ScrollPolicy.ON,this.gameList.itemRenderer=t.QznnRoomIcon,this.tempCollection=new eui.ArrayCollection,this.BtnReturn.visible=!App.isWebInsert,this._mPartEffect=new BaseParticleObj,this._mPartEffect.init("part_ddz_lobby"),this.addChild(this._mPartEffect),this._mPartEffect.play(),this.showArrowLeft(!1),this.showArrowRight(!1),this.initBroadcast(this);var o=this;App.TimerManager.doTimer(200,5,function(){o.onScrollerChange()},this)},o.prototype.showArrowLeft=function(e){void 0===e&&(e=!0),this._mArrowLeftAnim||(this._mArrowLeftAnim=new t.EntryArrowBone,this._mArrowLeftAnim.scaleX=-1,this.arrowLeft.addChild(this._mArrowLeftAnim)),e?this._mArrowLeftAnim.play():this._mArrowLeftAnim.stop(),this._mArrowLeftAnim.visible=e},o.prototype.showArrowRight=function(e){void 0===e&&(e=!0),this._mArrowRightAnim||(this._mArrowRightAnim=new t.EntryArrowBone,this.arrowRight.addChild(this._mArrowRightAnim)),e?this._mArrowRightAnim.play():this._mArrowRightAnim.stop(),this._mArrowRightAnim.visible=e},o.prototype.onArrowTap=function(t){t.currentTarget==this._mArrowLeftAnim?this.throwScroller(0):this.throwScroller(this.gameList.contentWidth-this.scrollerItem.width)},o.prototype.throwScroller=function(t){this._mIsOnThrow=!0,this._mThrowV=t,App.TimerManager.doFrame(1,999999,this.updateThrowScroller,this)},o.prototype.updateThrowScroller=function(t){if(this._mIsOnThrow){var e=this.scrollerItem.viewport.scrollH,o=this._mThrowV-e,i=o>0?Math.min(500,o):Math.max(-500,o),n=.1*i*t/16;Math.abs(this._mThrowV-e)<5&&(this.stopThrowScroller(),this.onScrollerChange()),this.scrollerItem.viewport.scrollH+=n}},o.prototype.stopThrowScroller=function(){this._mIsOnThrow&&(App.TimerManager.remove(this.updateThrowScroller,this),this.scrollerItem.stopAnimation(),this._mIsOnThrow=!1)},o.prototype.onScrollerBegin=function(){this.stopThrowScroller()},o.prototype.onScrollerChange=function(){var t=this.scrollerItem.viewport.scrollH;this.showArrowLeft(t>20),this.showArrowRight(t+this.scrollerItem.viewport.width<=this.gameList.contentWidth-20)},o.prototype.createList=function(t,e){var o=App.CommonUtils.copyDataHandler(t.list);this.deskList.length=0,this.deskList=o;for(var i=function(t){return function(e,o){var i=e[t],n=o[t];return i-n}},n=o.sort(i("game_id")),s=0;s<n.length;s++){var r=n[s];r.imgId=s+1}this.deskList.length?this.refreshList():(this.tempCollection.removeAll(),this.tempCollection.refresh())},o.prototype.refreshList=function(){if(this.deskList.length){this.tempCollection.refresh();var t=this.deskList;this.tempCollection.replaceAll(t),this.gameList.dataProvider=this.tempCollection,this.tempCollection.refresh()}},o.prototype.onBackRoom=function(){this.applyFunc(t.RoomConst.METHOD.BACK_GAME)},o.prototype.onEnterGame=function(e){var o=this.gameList.selectedIndex;this.applyFunc(t.RoomConst.METHOD.ENTER_GAME,o)},o.prototype.showHelp=function(){this.Heip.showPopup()},o.prototype.onMouseWheel=function(t){var e=this.scrollerItem.viewport;if(!(this.gameList.contentWidth-e.width<0)){var o=e.scrollH-t.data;0>o?e.scrollH=0:o>this.gameList.contentWidth-e.width?e.scrollH=this.gameList.contentWidth-e.width:e.scrollH-=t.data,this.onScrollerChange()}},o.prototype.addEvent=function(){e.prototype.addEvent.call(this),App.EffectUtils.addEffectBtnOut(this.BtnReturn,this.onBackRoom,this),App.EffectUtils.addEffectBtnOut(this.BtnHelp,this.showHelp,this),this.gameList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.Heip.addEvent(),App.MouseUtils.addMouseWheel(this.onMouseWheel,this),this._mArrowLeftAnim.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this._mArrowRightAnim.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this.scrollerItem.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.scrollerItem.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrollerBegin,this)},o.prototype.removeEvent=function(){e.prototype.removeEvent.call(this),App.EffectUtils.removeEffectBtn(this.BtnReturn),App.EffectUtils.removeEffectBtn(this.BtnHelp),this.gameList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onEnterGame,this),this.Heip.removeEvent(),App.MouseUtils.removeMouseWheel(),this._mArrowLeftAnim.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this._mArrowRightAnim.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowTap,this),this.scrollerItem.removeEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.scrollerItem.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onScrollerBegin,this)},o.prototype.destroy=function(){e.prototype.destroy.call(this),egret.warn("抢庄牛牛 RoomView destroy"),this._mPartEffect&&(this._mPartEffect.destroy(),this._mPartEffect=void 0),this.tempCollection=void 0,this.deskList=void 0,App.TimerManager.removeAll(this),this._mArrowLeftAnim&&(this._mArrowLeftAnim.destroy(),this._mArrowLeftAnim=void 0),this._mArrowRightAnim&&(this._mArrowRightAnim.destroy(),this._mArrowRightAnim=void 0)},o}(base.RoomView);t.RoomView=e,__reflect(e.prototype,"qznn.RoomView")}(qznn||(qznn={}));